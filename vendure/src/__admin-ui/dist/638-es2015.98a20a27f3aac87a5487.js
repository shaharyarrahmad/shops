"use strict";(self.webpackChunkvendure_admin_ui=self.webpackChunkvendure_admin_ui||[]).push([[638],{17638:function(t,o,e){e.r(o),e.d(o,{MarketingModule:function(){return E},PromotionDetailComponent:function(){return D},PromotionListComponent:function(){return Q},PromotionResolver:function(){return I},marketingRoutes:function(){return j},promotionBreadcrumb:function(){return S},"\u02750":function(){return Y},"\u02751":function(){return $}});var n=e(51694),i=e(21067),r=e(41460),s=e(24791),a=e(38521),c=e(94769),d=e(15405),m=e(72041),l=e(8603),u=e(86184),p=e(82957),g=e(65519),f=e(70942),h=e(56258),Z=e(53198);const A=function(){return["enabled"]};function v(t,o){if(1&t&&(n.TgZ(0,"clr-toggle-wrapper"),n._UZ(1,"input",25),n.TgZ(2,"label"),n._uU(3),n.ALo(4,"translate"),n.qZA(),n.qZA()),2&t){const t=n.oxw();n.xp6(1),n.Q6J("formControl",t.detailForm.get(n.DdM(4,A))),n.xp6(2),n.Oqu(n.lcZ(4,2,"common.enabled"))}}function b(t,o){if(1&t){const t=n.EpF();n.TgZ(0,"button",26),n.NdJ("click",function(){return n.CHM(t),n.oxw().create()}),n._uU(1),n.ALo(2,"translate"),n.qZA()}if(2&t){const t=n.oxw();n.Q6J("disabled",!t.saveButtonEnabled()),n.xp6(1),n.hij(" ",n.lcZ(2,2,"common.create")," ")}}function y(t,o){if(1&t){const t=n.EpF();n.TgZ(0,"button",26),n.NdJ("click",function(){return n.CHM(t),n.oxw(2).save()}),n._uU(1),n.ALo(2,"translate"),n.qZA()}if(2&t){const t=n.oxw(2);n.Q6J("disabled",!t.saveButtonEnabled()),n.xp6(1),n.hij(" ",n.lcZ(2,2,"common.update")," ")}}function x(t,o){1&t&&n.YNc(0,y,3,4,"button",27),2&t&&n.Q6J("vdrIfPermissions","UpdatePromotion")}function C(t,o){if(1&t&&(n.TgZ(0,"section",28),n.TgZ(1,"label"),n._uU(2),n.ALo(3,"translate"),n.qZA(),n._UZ(4,"vdr-tabbed-custom-fields",29),n.ALo(5,"hasPermission"),n.qZA()),2&t){const t=n.oxw();n.xp6(2),n.Oqu(n.lcZ(3,4,"common.custom-fields")),n.xp6(2),n.Q6J("customFields",t.customFields)("customFieldsFormGroup",t.detailForm.get("customFields"))("readonly",!n.lcZ(5,6,"UpdatePromotion"))}}function q(t,o){if(1&t){const t=n.EpF();n.ynx(0),n.TgZ(1,"vdr-configurable-input",30),n.NdJ("remove",function(o){return n.CHM(t),n.oxw().removeCondition(o)}),n.ALo(2,"hasPermission"),n.qZA(),n.BQk()}if(2&t){const t=o.$implicit,e=o.index,i=n.oxw();n.xp6(1),n.Q6J("position",e)("readonly",!n.lcZ(2,5,"UpdatePromotion"))("operation",t)("operationDefinition",i.getConditionDefinition(t))("formControlName",e)}}function F(t,o){if(1&t){const t=n.EpF();n.TgZ(0,"button",35),n.NdJ("click",function(){const o=n.CHM(t).$implicit;return n.oxw(2).addCondition(o)}),n._uU(1),n.qZA()}if(2&t){const t=o.$implicit;n.xp6(1),n.hij(" ",t.description," ")}}function P(t,o){if(1&t&&(n.TgZ(0,"vdr-dropdown"),n.TgZ(1,"button",31),n._UZ(2,"clr-icon",32),n._uU(3),n.ALo(4,"translate"),n.qZA(),n.TgZ(5,"vdr-dropdown-menu",33),n.YNc(6,F,2,1,"button",34),n.qZA(),n.qZA()),2&t){const t=n.oxw();n.xp6(3),n.hij(" ",n.lcZ(4,2,"marketing.add-condition")," "),n.xp6(3),n.Q6J("ngForOf",t.getAvailableConditions())}}function T(t,o){if(1&t){const t=n.EpF();n.TgZ(0,"vdr-configurable-input",36),n.NdJ("remove",function(o){return n.CHM(t),n.oxw().removeAction(o)}),n.ALo(1,"hasPermission"),n.qZA()}if(2&t){const t=o.$implicit,e=o.index,i=n.oxw();n.Q6J("position",e)("operation",t)("readonly",!n.lcZ(1,5,"UpdatePromotion"))("operationDefinition",i.getActionDefinition(t))("formControlName",e)}}function U(t,o){if(1&t){const t=n.EpF();n.TgZ(0,"button",35),n.NdJ("click",function(){const o=n.CHM(t).$implicit;return n.oxw(2).addAction(o)}),n._uU(1),n.qZA()}if(2&t){const t=o.$implicit;n.xp6(1),n.hij(" ",t.description," ")}}function L(t,o){if(1&t&&(n.TgZ(0,"vdr-dropdown"),n.TgZ(1,"button",31),n._UZ(2,"clr-icon",32),n._uU(3),n.ALo(4,"translate"),n.qZA(),n.TgZ(5,"vdr-dropdown-menu",33),n.YNc(6,U,2,1,"button",34),n.qZA(),n.qZA()),2&t){const t=n.oxw();n.xp6(3),n.hij(" ",n.lcZ(4,2,"marketing.add-action")," "),n.xp6(3),n.Q6J("ngForOf",t.getAvailableActions())}}const J=function(){return["./create"]};function O(t,o){1&t&&(n.TgZ(0,"a",6),n._UZ(1,"clr-icon",7),n._uU(2),n.ALo(3,"translate"),n.qZA()),2&t&&(n.Q6J("routerLink",n.DdM(4,J)),n.xp6(2),n.hij(" ",n.lcZ(3,2,"marketing.create-new-promotion")," "))}function _(t,o){if(1&t&&(n.TgZ(0,"vdr-chip"),n._uU(1),n.qZA()),2&t){const t=n.oxw().item;n.xp6(1),n.hij(" ",t.couponCode," ")}}function k(t,o){1&t&&(n.TgZ(0,"vdr-chip"),n._uU(1),n.ALo(2,"translate"),n.qZA()),2&t&&(n.xp6(1),n.Oqu(n.lcZ(2,1,"common.disabled")))}const w=function(t){return["./",t]};function N(t,o){if(1&t){const t=n.EpF();n.TgZ(0,"td",8),n._uU(1),n.qZA(),n.TgZ(2,"td",8),n.YNc(3,_,2,1,"vdr-chip",9),n.qZA(),n.TgZ(4,"td",8),n._uU(5),n.ALo(6,"localeDate"),n.qZA(),n.TgZ(7,"td",8),n._uU(8),n.ALo(9,"localeDate"),n.qZA(),n.TgZ(10,"td",10),n.YNc(11,k,3,3,"vdr-chip",9),n.qZA(),n.TgZ(12,"td",11),n._UZ(13,"vdr-table-row-action",12),n.ALo(14,"translate"),n.qZA(),n.TgZ(15,"td",11),n.TgZ(16,"vdr-dropdown"),n.TgZ(17,"button",13),n._uU(18),n.ALo(19,"translate"),n._UZ(20,"clr-icon",14),n.qZA(),n.TgZ(21,"vdr-dropdown-menu",15),n.TgZ(22,"button",16),n.NdJ("click",function(){const o=n.CHM(t).item;return n.oxw().deletePromotion(o.id)}),n.ALo(23,"hasPermission"),n._UZ(24,"clr-icon",17),n._uU(25),n.ALo(26,"translate"),n.qZA(),n.qZA(),n.qZA(),n.qZA()}if(2&t){const t=o.item;n.xp6(1),n.Oqu(t.name),n.xp6(2),n.Q6J("ngIf",t.couponCode),n.xp6(2),n.Oqu(n.xi3(6,10,t.startsAt,"longDate")),n.xp6(3),n.Oqu(n.xi3(9,13,t.endsAt,"longDate")),n.xp6(3),n.Q6J("ngIf",!t.enabled),n.xp6(2),n.Q6J("label",n.lcZ(14,16,"common.edit"))("linkTo",n.VKq(24,w,t.id)),n.xp6(5),n.hij(" ",n.lcZ(19,18,"common.actions")," "),n.xp6(4),n.Q6J("disabled",!n.lcZ(23,20,"DeletePromotion")),n.xp6(3),n.hij(" ",n.lcZ(26,22,"common.delete")," ")}}class D extends a.UT_{constructor(t,o,e,n,r,s,a){super(o,t,e,r),this.changeDetector=n,this.dataService=r,this.formBuilder=s,this.notificationService=a,this.conditions=[],this.actions=[],this.allConditions=[],this.allActions=[],this.customFields=this.getCustomFieldConfig("Promotion"),this.detailForm=this.formBuilder.group({name:["",i.kI.required],enabled:!0,couponCode:null,perCustomerUsageLimit:null,startsAt:null,endsAt:null,conditions:this.formBuilder.array([]),actions:this.formBuilder.array([]),customFields:this.formBuilder.group(this.customFields.reduce((t,o)=>Object.assign(Object.assign({},t),{[o.name]:""}),{}))})}ngOnInit(){this.init(),this.promotion$=this.entity$,this.dataService.promotion.getPromotionActionsAndConditions().single$.subscribe(t=>{this.allActions=t.promotionActions,this.allConditions=t.promotionConditions,this.changeDetector.markForCheck()})}ngOnDestroy(){this.destroy()}getAvailableConditions(){return this.allConditions.filter(t=>!this.conditions.find(o=>o.code===t.code))}getConditionDefinition(t){return this.allConditions.find(o=>o.code===t.code)}getAvailableActions(){return this.allActions.filter(t=>!this.actions.find(o=>o.code===t.code))}getActionDefinition(t){return this.allActions.find(o=>o.code===t.code)}saveButtonEnabled(){return this.detailForm.dirty&&this.detailForm.valid&&(0!==this.conditions.length||this.detailForm.value.couponCode)&&0!==this.actions.length}addCondition(t){this.addOperation("conditions",t),this.detailForm.markAsDirty()}addAction(t){this.addOperation("actions",t),this.detailForm.markAsDirty()}removeCondition(t){this.removeOperation("conditions",t),this.detailForm.markAsDirty()}removeAction(t){this.removeOperation("actions",t),this.detailForm.markAsDirty()}formArrayOf(t){return this.detailForm.get(t)}create(){if(!this.detailForm.dirty)return;const t=this.detailForm.value,o={name:t.name,enabled:!0,couponCode:t.couponCode,perCustomerUsageLimit:t.perCustomerUsageLimit,startsAt:t.startsAt,endsAt:t.endsAt,conditions:this.mapOperationsToInputs(this.conditions,t.conditions),actions:this.mapOperationsToInputs(this.actions,t.actions),customFields:t.customFields};this.dataService.promotion.createPromotion(o).subscribe(({createPromotion:t})=>{switch(t.__typename){case"Promotion":this.notificationService.success((0,s.J)("common.notify-create-success"),{entity:"Promotion"}),this.detailForm.markAsPristine(),this.changeDetector.markForCheck(),this.router.navigate(["../",t.id],{relativeTo:this.route});break;case"MissingConditionsError":this.notificationService.error(t.message)}},t=>{this.notificationService.error((0,s.J)("common.notify-create-error"),{entity:"Promotion"})})}save(){if(!this.detailForm.dirty)return;const t=this.detailForm.value;this.promotion$.pipe((0,c.q)(1),(0,d.zg)(o=>{const e={id:o.id,name:t.name,enabled:t.enabled,couponCode:t.couponCode,perCustomerUsageLimit:t.perCustomerUsageLimit,startsAt:t.startsAt,endsAt:t.endsAt,conditions:this.mapOperationsToInputs(this.conditions,t.conditions),actions:this.mapOperationsToInputs(this.actions,t.actions),customFields:t.customFields};return this.dataService.promotion.updatePromotion(e)})).subscribe(t=>{this.notificationService.success((0,s.J)("common.notify-update-success"),{entity:"Promotion"}),this.detailForm.markAsPristine(),this.changeDetector.markForCheck()},t=>{this.notificationService.error((0,s.J)("common.notify-update-error"),{entity:"Promotion"})})}setFormValues(t,o){this.detailForm.patchValue({name:t.name,enabled:t.enabled,couponCode:t.couponCode,perCustomerUsageLimit:t.perCustomerUsageLimit,startsAt:t.startsAt,endsAt:t.endsAt}),t.conditions.forEach(t=>{this.addOperation("conditions",t)}),t.actions.forEach(t=>this.addOperation("actions",t)),this.customFields.length&&this.setCustomFieldFormValues(this.customFields,this.detailForm.get("customFields"),t)}mapOperationsToInputs(t,o){return t.map((t,e)=>({code:t.code,arguments:Object.values(o[e].args).map((o,e)=>({name:t.args[e].name,value:(0,a.qrw)(o)}))}))}addOperation(t,o){const e=this.formArrayOf(t),n="conditions"===t?this.conditions:this.actions;if(-1===e.value.findIndex(t=>t.code===o.code)){const i=o.args.reduce((e,n)=>{var i;return Object.assign(Object.assign({},e),{[n.name]:null!==(i=(0,a.sux)(n.value))&&void 0!==i?i:this.getDefaultArgValue(t,o,n.name)})},{});e.push(this.formBuilder.control({code:o.code,args:i})),n.push({code:o.code,args:o.args.map(t=>({name:t.name,value:(0,a.sux)(t.value)}))})}}getDefaultArgValue(t,o,e){const n="conditions"===t?this.allConditions.find(t=>t.code===o.code):this.allActions.find(t=>t.code===o.code);if(n){const t=n.args.find(t=>t.name===e);if(t)return(0,a.NWQ)(t)}throw new Error('Could not determine default value for "argName"')}removeOperation(t,o){const e=this.formArrayOf(t),n="conditions"===t?this.conditions:this.actions,i=e.value.findIndex(t=>t.code===o.code);-1!==i&&(e.removeAt(i),n.splice(i,1))}}D.\u0275fac=function(t){return new(t||D)(n.Y36(r.F0),n.Y36(r.gz),n.Y36(a.iHG),n.Y36(n.sBO),n.Y36(a.DoR),n.Y36(i.qu),n.Y36(a.gqp))},D.\u0275cmp=n.Xpm({type:D,selectors:[["vdr-promotion-detail"]],features:[n.qOj],decls:48,vars:46,consts:[[1,"flex","clr-align-items-center"],[3,"entity"],[4,"vdrIfPermissions"],["locationId","promotion-detail"],["class","btn btn-primary",3,"disabled","click",4,"ngIf","ngIfElse"],["updateButton",""],[1,"form",3,"formGroup"],["for","name",3,"label"],["id","name","type","text","formControlName","name",3,"readonly"],["for","startsAt",3,"label"],["formControlName","startsAt"],["for","endsAt",3,"label"],["formControlName","endsAt"],["for","couponCode",3,"label"],["id","couponCode","type","text","formControlName","couponCode",3,"readonly"],["for","perCustomerUsageLimit",3,"label"],["id","perCustomerUsageLimit","type","number","min","1","max","999","formControlName","perCustomerUsageLimit",3,"readonly"],["formGroupName","customFields",4,"ngIf"],["locationId","promotion-detail",3,"entity$","detailForm"],[1,"clr-row"],["formArrayName","conditions",1,"clr-col"],[1,"clr-control-label"],[4,"ngFor","ngForOf"],["formArrayName","actions",1,"clr-col"],[3,"position","operation","readonly","operationDefinition","formControlName","remove",4,"ngFor","ngForOf"],["type","checkbox","clrToggle","","name","enabled",3,"formControl"],[1,"btn","btn-primary",3,"disabled","click"],["class","btn btn-primary",3,"disabled","click",4,"vdrIfPermissions"],["formGroupName","customFields"],["entityName","Promotion",3,"customFields","customFieldsFormGroup","readonly"],[3,"position","readonly","operation","operationDefinition","formControlName","remove"],["vdrDropdownTrigger","",1,"btn","btn-outline"],["shape","plus"],["vdrPosition","bottom-left"],["type","button","vdrDropdownItem","","class","item-wrap",3,"click",4,"ngFor","ngForOf"],["type","button","vdrDropdownItem","",1,"item-wrap",3,"click"],[3,"position","operation","readonly","operationDefinition","formControlName","remove"]],template:function(t,o){if(1&t&&(n.TgZ(0,"vdr-action-bar"),n.TgZ(1,"vdr-ab-left"),n.TgZ(2,"div",0),n._UZ(3,"vdr-entity-info",1),n.ALo(4,"async"),n.YNc(5,v,5,5,"clr-toggle-wrapper",2),n.qZA(),n.qZA(),n.TgZ(6,"vdr-ab-right"),n._UZ(7,"vdr-action-bar-items",3),n.YNc(8,b,3,4,"button",4),n.ALo(9,"async"),n.YNc(10,x,1,1,"ng-template",null,5,n.W1O),n.qZA(),n.qZA(),n.TgZ(12,"form",6),n.TgZ(13,"vdr-form-field",7),n.ALo(14,"translate"),n._UZ(15,"input",8),n.ALo(16,"hasPermission"),n.qZA(),n.TgZ(17,"vdr-form-field",9),n.ALo(18,"translate"),n._UZ(19,"vdr-datetime-picker",10),n.qZA(),n.TgZ(20,"vdr-form-field",11),n.ALo(21,"translate"),n._UZ(22,"vdr-datetime-picker",12),n.qZA(),n.TgZ(23,"vdr-form-field",13),n.ALo(24,"translate"),n._UZ(25,"input",14),n.ALo(26,"hasPermission"),n.qZA(),n.TgZ(27,"vdr-form-field",15),n.ALo(28,"translate"),n._UZ(29,"input",16),n.ALo(30,"hasPermission"),n.qZA(),n.YNc(31,C,6,8,"section",17),n._UZ(32,"vdr-custom-detail-component-host",18),n.TgZ(33,"div",19),n.TgZ(34,"div",20),n.TgZ(35,"label",21),n._uU(36),n.ALo(37,"translate"),n.qZA(),n.YNc(38,q,3,7,"ng-container",22),n.TgZ(39,"div"),n.YNc(40,P,7,4,"vdr-dropdown",2),n.qZA(),n.qZA(),n.TgZ(41,"div",23),n.TgZ(42,"label",21),n._uU(43),n.ALo(44,"translate"),n.qZA(),n.YNc(45,T,2,7,"vdr-configurable-input",24),n.TgZ(46,"div"),n.YNc(47,L,7,4,"vdr-dropdown",2),n.qZA(),n.qZA(),n.qZA(),n.qZA()),2&t){const t=n.MAs(11);n.xp6(3),n.Q6J("entity",n.lcZ(4,22,o.entity$)),n.xp6(2),n.Q6J("vdrIfPermissions","UpdatePromotion"),n.xp6(3),n.Q6J("ngIf",n.lcZ(9,24,o.isNew$))("ngIfElse",t),n.xp6(4),n.Q6J("formGroup",o.detailForm),n.xp6(1),n.Q6J("label",n.lcZ(14,26,"common.name")),n.xp6(2),n.Q6J("readonly",!n.lcZ(16,28,"UpdatePromotion")),n.xp6(2),n.Q6J("label",n.lcZ(18,30,"marketing.starts-at")),n.xp6(3),n.Q6J("label",n.lcZ(21,32,"marketing.ends-at")),n.xp6(3),n.Q6J("label",n.lcZ(24,34,"marketing.coupon-code")),n.xp6(2),n.Q6J("readonly",!n.lcZ(26,36,"UpdatePromotion")),n.xp6(2),n.Q6J("label",n.lcZ(28,38,"marketing.per-customer-limit")),n.xp6(2),n.Q6J("readonly",!n.lcZ(30,40,"UpdatePromotion")),n.xp6(2),n.Q6J("ngIf",o.customFields.length),n.xp6(1),n.Q6J("entity$",o.entity$)("detailForm",o.detailForm),n.xp6(4),n.Oqu(n.lcZ(37,42,"marketing.conditions")),n.xp6(2),n.Q6J("ngForOf",o.conditions),n.xp6(2),n.Q6J("vdrIfPermissions","UpdatePromotion"),n.xp6(3),n.Oqu(n.lcZ(44,44,"marketing.actions")),n.xp6(2),n.Q6J("ngForOf",o.actions),n.xp6(2),n.Q6J("vdrIfPermissions","UpdatePromotion")}},directives:[a.KkL,a.BND,a.Vqt,a.HAh,a.mz,a.WWO,f.O5,i._Y,i.JL,i.sg,a.hgI,a.y_K,i.Fj,i.JJ,i.u,a.IPv,i.qQ,i.Fd,i.wV,a.CWh,i.CE,h.MgK,f.sg,h.PEh,i.Wl,h.KKC,i.oH,i.x0,a.yc0,a.qq8,a.JOL,a.UaT,h.qvL,a.N9E,a.HH4],pipes:[f.Ov,Z.X$,a.j$k],styles:[".item-wrap[_ngcontent-%COMP%]{white-space:normal}"],changeDetection:0}),D.ctorParameters=()=>[{type:r.F0},{type:r.gz},{type:a.iHG},{type:n.sBO},{type:a.DoR},{type:i.qu},{type:a.gqp}];class Q extends a.t7C{constructor(t,o,e,n,r){super(o,e),this.dataService=t,this.notificationService=n,this.modalService=r,this.searchForm=new i.cw({name:new i.NI(""),couponCode:new i.NI("")}),super.setQueryFn((...t)=>this.dataService.promotion.getPromotions(...t).refetchOnChannelChange(),t=>t.promotions,(t,o)=>this.createQueryOptions(t,o,this.searchForm.value))}ngOnInit(){super.ngOnInit(),(0,p.T)(this.searchForm.valueChanges.pipe((0,m.b)(250)),this.route.queryParamMap).pipe((0,l.R)(this.destroy$)).subscribe(t=>{t.params||this.setPageNumber(1),this.refresh()})}deletePromotion(t){this.modalService.dialog({title:(0,s.J)("catalog.confirm-delete-promotion"),buttons:[{type:"secondary",label:(0,s.J)("common.cancel")},{type:"danger",label:(0,s.J)("common.delete"),returnValue:!0}]}).pipe((0,u.w)(o=>o?this.dataService.promotion.deletePromotion(t):g.E)).subscribe(()=>{this.notificationService.success((0,s.J)("common.notify-delete-success"),{entity:"Promotion"}),this.refresh()},t=>{this.notificationService.error((0,s.J)("common.notify-delete-error"),{entity:"Promotion"})})}createQueryOptions(t,o,e){const n={};return e.couponCode&&(n.couponCode={contains:e.couponCode}),e.name&&(n.name={contains:e.name}),{options:{skip:t,take:o,filter:n}}}}Q.\u0275fac=function(t){return new(t||Q)(n.Y36(a.DoR),n.Y36(r.F0),n.Y36(r.gz),n.Y36(a.gqp),n.Y36(a.Z7U))},Q.\u0275cmp=n.Xpm({type:Q,selectors:[["vdr-promotion-list"]],features:[n.qOj],decls:31,vars:32,consts:[[1,"search-form",3,"formGroup"],["type","text","formControlName","name",1,"search-input",3,"placeholder"],["type","text","formControlName","couponCode",1,"search-input",3,"placeholder"],["locationId","promotion-list"],["class","btn btn-primary",3,"routerLink",4,"vdrIfPermissions"],[3,"items","itemsPerPage","totalItems","currentPage","pageChange","itemsPerPageChange"],[1,"btn","btn-primary",3,"routerLink"],["shape","plus"],[1,"left","align-middle"],[4,"ngIf"],[1,"align-middle"],[1,"right","align-middle"],["iconShape","edit",3,"label","linkTo"],["type","button","vdrDropdownTrigger","",1,"btn","btn-link","btn-sm"],["shape","caret down"],["vdrPosition","bottom-right"],["type","button","vdrDropdownItem","",1,"delete-button",3,"disabled","click"],["shape","trash",1,"is-danger"]],template:function(t,o){1&t&&(n.TgZ(0,"vdr-action-bar"),n.TgZ(1,"vdr-ab-left"),n.TgZ(2,"form",0),n._UZ(3,"input",1),n.ALo(4,"translate"),n._UZ(5,"input",2),n.ALo(6,"translate"),n.qZA(),n.qZA(),n.TgZ(7,"vdr-ab-right"),n._UZ(8,"vdr-action-bar-items",3),n.YNc(9,O,4,5,"a",4),n.qZA(),n.qZA(),n.TgZ(10,"vdr-data-table",5),n.NdJ("pageChange",function(t){return o.setPageNumber(t)})("itemsPerPageChange",function(t){return o.setItemsPerPage(t)}),n.ALo(11,"async"),n.ALo(12,"async"),n.ALo(13,"async"),n.ALo(14,"async"),n.TgZ(15,"vdr-dt-column"),n._uU(16),n.ALo(17,"translate"),n.qZA(),n.TgZ(18,"vdr-dt-column"),n._uU(19),n.ALo(20,"translate"),n.qZA(),n.TgZ(21,"vdr-dt-column"),n._uU(22),n.ALo(23,"translate"),n.qZA(),n.TgZ(24,"vdr-dt-column"),n._uU(25),n.ALo(26,"translate"),n.qZA(),n._UZ(27,"vdr-dt-column"),n._UZ(28,"vdr-dt-column"),n._UZ(29,"vdr-dt-column"),n.YNc(30,N,27,26,"ng-template"),n.qZA()),2&t&&(n.xp6(2),n.Q6J("formGroup",o.searchForm),n.xp6(1),n.Q6J("placeholder",n.lcZ(4,12,"marketing.search-by-name")),n.xp6(2),n.Q6J("placeholder",n.lcZ(6,14,"marketing.search-by-coupon-code")),n.xp6(4),n.Q6J("vdrIfPermissions","CreatePromotion"),n.xp6(1),n.Q6J("items",n.lcZ(11,16,o.items$))("itemsPerPage",n.lcZ(12,18,o.itemsPerPage$))("totalItems",n.lcZ(13,20,o.totalItems$))("currentPage",n.lcZ(14,22,o.currentPage$)),n.xp6(6),n.Oqu(n.lcZ(17,24,"common.name")),n.xp6(3),n.Oqu(n.lcZ(20,26,"marketing.coupon-code")),n.xp6(3),n.Oqu(n.lcZ(23,28,"marketing.starts-at")),n.xp6(3),n.Oqu(n.lcZ(26,30,"marketing.ends-at")))},directives:[a.KkL,a.BND,i._Y,i.JL,i.sg,a.y_K,i.Fj,i.JJ,i.u,a.mz,a.WWO,a.HAh,a.Qj_,a.Egy,r.yS,h.qvL,f.O5,a.v_8,a.JOL,a.UaT,a.N9E,a.HH4,a.Ywx],pipes:[Z.X$,f.Ov,a.HbD,a.j$k],styles:[".search-form[_ngcontent-%COMP%]{padding:0}.search-input[_ngcontent-%COMP%]{margin:6px 8px 0 0;min-width:200px}"],changeDetection:0}),Q.ctorParameters=()=>[{type:a.DoR},{type:r.F0},{type:r.gz},{type:a.gqp},{type:a.Z7U}];class I extends a.p_9{constructor(t,o){super(t,{__typename:"Promotion",id:"",createdAt:"",updatedAt:"",name:"",enabled:!1,conditions:[],actions:[]},t=>o.promotion.getPromotion(t).mapStream(t=>t.promotion))}}I.\u0275fac=function(t){return new(t||I)(n.LFG(r.F0),n.LFG(a.DoR))},I.\u0275prov=n.Yz7({factory:function(){return new I(n.LFG(r.F0),n.LFG(a.DoR))},token:I,providedIn:"root"}),I.ctorParameters=()=>[{type:r.F0},{type:a.DoR}];const Y={breadcrumb:(0,s.J)("breadcrumb.promotions")},$={breadcrumb:S},j=[{path:"promotions",component:Q,data:Y},{path:"promotions/:id",component:D,resolve:(0,a.Po4)(I),canDeactivate:[a.TSp],data:$}];function S(t,o){return(0,a.YWC)({entity:t.entity,id:o.id,breadcrumbKey:"breadcrumb.promotions",getName:t=>t.name,route:"promotions"})}class E{}E.\u0275fac=function(t){return new(t||E)},E.\u0275mod=n.oAB({type:E}),E.\u0275inj=n.cJS({imports:[[a.m81,r.Bz.forChild(j)]]})}}]);
//# sourceMappingURL=638-es2015.98a20a27f3aac87a5487.js.map