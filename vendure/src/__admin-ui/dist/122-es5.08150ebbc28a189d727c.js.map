{"version":3,"mappings":"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","names":["Pt","constructor","this","call","Tt","super","Me","t","a","notifyComplete","_next","notifyNext","e","save","qt","Ut","$t","create","$implicit","r","index","oxw","removeFilter","addFilter","count","tn","standalone","toggleLivePreview","c","pattern","updateSlug","assetChanges","closeContents","l","updateValueCode","s","deleteFacetValue","addFacetValue","ngIf","updateCode","item","toggleDisplayLimit","kn","deleteFacet","cancel","selectValues","channel","channelCode","assign","removeFromChannel","assignToChannel","removeProductFacetValue","selectProductFacetValue","createVariantsConfig","setItemsPerPage","setPage","assignVariantToChannel","removeVariantFromChannel","variantAssetChange","updateProductOption","selectedVariantIds","selectVariantFacetValue","variantDisplayMode","filterInput","navigateToTab","runPendingSearchIndexUpdates","deleteProduct","confirm","name","addOption","removeOption","removeOptionGroup","enabled","formValueChanged","sku","onFormChanged","price","stock","CHM","deleteVariant","selectAssets","dropListDropped","previewAsset","setAsFeatured","removeAsset","removeFacetValue","addFacetValues","tab","vo","toggleExpanded","parentId","Io","move","contents","Do","Mo","selectionManager","getMoveListItems","moveUp","moveDown","delete","handleEnter","values","generateVariants","onFormChange","variantFormValues","Qo","updateOption","editName","update","editOption","selectFacetValueClick","channelId","onAssetChange","itemsPerPage","rate","p","ngOnInit","tags","customFields","n","ngOnDestroy","updateAsset","id","subscribe","u","entity","setFormValues","i","ie","h","type","decls","directives","pipes","C","F","styles","changeDetection","take","G","g","m","options","skip","filter","contains","sort","createdAt","I","b","_ref2","j","S","filesSelected","createAssets","pipe","Ee","_step","_iterator","deleteAssets","A","showModalAndDelete","dialog","title","translationVars","body","buttons","k","ce","qe","Le","slug","description","visible","filters","_","f","Ve","ke","_step2","_iterator2","value","w","getFilterDefinition","assetsChanged","D","ae","code","args","T","relativeTo","canDeactivate","trackByFn","getUpdatedCollection","translatable","updatedFields","customFieldConfig","languageCode","defaultTranslation","assetIds","mapOperationsToInputs","arguments","z","features","v","$","B","contentsComponent","additiveMode","multiSelect","itemsAreEqual","mapStream","R","Ae","be","uiState","queryParams","q","queryParamsHandling","toggleExpandAll","expanded","onRearrange","next","error","deleteCollection","setLanguage","refresh","se","Y","facet","V","customValueFieldIsSet","getValuesFormArray","_step3","Te","createFacetValues","Q","x","y","P","_step4","_this23","N","De","Ze","getUpdatedFacet","getCreatedFacetValues","map","translations","facetId","getUpdatedFacetValues","le","Ot","label","returnValue","o","de","getFacets","getTaxCategories","mapSingle","createProductWithVariants","createProduct","d","productId","optionGroupId","optionIds","createProductOptionGroups","createProductVariants","join","stockOnHand","updateProduct","product","getProductVariants","productVariants","L","_step5","_iterator5","Zt","Fe","_step6","_iterator6","deleteProductVariant","wt","M","factory","token","ngAfterViewInit","setTimeout","K","selector","userStatus","Ie","Pe","pricePreview","selectChannel","assignVariantsToChannel","productVariantIds","priceFactor","assignProductsToChannel","productIds","getTopVariants","Dt","getProduct","toPromise","E","variants","groups","autoUpdateVariantNames","facetValueIds","emitEvent","totalItems","_ref33","currentPage","It","filterOperator","bufferSize","_step7","getProductFormGroup","valueChanges","getActiveChannel","refetchOnChannelChange","createUrlTree","toString","isDefaultChannel","je","size","locals","currentChannelIds","fromComponent","variantAssetsChanged","O","Be","_step8","_iterator8","variantsToCreateAreValid","displayFacetValueModal","closable","facets","console","_ref54","autoUpdate","productInput","variantsInput","buildVariantFormArray","priceWithTax","taxCategoryId","useGlobalOutOfStockThreshold","outOfStockThreshold","trackInventory","getUpdatedProduct","getUpdatedProductVariants","updateSlugAfterSave","hasOwnProperty","pe","te","re","input","term","facetValueOperator","groupByProduct","Ye","getPendingSearchIndexUpdates","pendingSearchIndexUpdates","setSearchTerm","setFacetValueIds","fvids","rebuildSearchIndex","reindex","time","W","vr","productSearchInput","static","optionGroups","getOptionGroups","detailForm","controls","getOptions","_step9","_iterator9","find","_loop4","getUpdatedOptionGroup","getUpdatedOption","_step11","_iterator11","_step12","updatedAt","_iterator12","ue","Ce","ge","getVariantsToAdd","getVariantName","addOptionGroup","isNew","locked","removeOptionGroupFromProduct","deleteProductOption","existing","productVariantId","isDefault","getVariantPrototype","length","Mt","checkUniqueSkus","confirmDeletionOfObsoleteVariants","getObsoleteVariants","hasOnlyDefaultVariant","addOptionGroupsToProduct","addNewOptionsToGroups","productOptionGroupId","reduce","fetchOptionGroups","getProductOptionGroup","Ft","createNewProductVariants","deleteObsoleteVariants","reFetchProduct","initOptionsAndVariants","getProductVariantsOptions","flat","optionsAreEqual","optionsAreSubset","toOptionString","J","__typename","fileSize","mimeType","width","height","source","preview","focalPoint","me","isPrivate","breadcrumbs","featuredAsset","assets","parent","children","_e","ve","facetValues","variantList","items","channels","he","X","breadcrumb","ka","wa","Oa","Da","Ma","La","Va","qa","Ua","Xe","path","component","data","resolve","breadcrumbKey","getName","route","link","isFeatured","asset","emitChangeEvent","H","inputs","compact","outputs","change","assetsSetter","updatePermissions","ee","we","ct","st","lt","fe","query","ids","products","replaceUrl","previewCollectionVariants","kt","getCollectionContents","ngOnChanges","setContentsPageNumber","setContentsItemsPerPage","setParam","previewUpdatedFilters","collectionId","updatedFilters","headerTemplate","dt","location","icon","iconClass","requiresPermission","onClick","injector","_step13","_iterator13","pt","isVisible","assignCollectionsToChannel","collectionIds","ut","getTranslationVars","_step14","ja","_iterator14","onDrop","onMove","onDelete","calculateAllMoveListItems","isRootNode","expandAll","rearrange","U","collections","activeCollectionId","expandedIds","drop","collectionTree","mt","deleteFacets","_step16","_iterator16","_t","assignFacetsToChannel","facetIds","vt","force","_step17","_iterator17","removedCount","Se","optionValues","copyFromDefault","Vo","variantsChange","groupNameInputs","read","provide","useExisting","multi","registerOnChange","registerOnTouched","setDisabledState","writeValue","focus","handleKey","handleBlur","addOptionValue","_step18","_iterator18","parseInputIntoOptions","split","removeLastOption","Go","groupName","add","textArea","nameInputs","remove","edit","disabled","ft","_step19","_iterator19","bt","Ct","xt","getAllFacets","mode","yt","xe","_step20","_iterator20","globalSettings","trackById","inventoryIsNotTracked","getTaxCategoryName","getStockOnHandMinValue","getSaleableStockLevel","areAllSelected","variantId","toggleSelectAll","toggleSelectVariant","optionGroupName","optionName","pendingFacetValues","existingFacetValues","_toConsumableArray","isVariantSelected","productOption","activeLanguage","buildFormGroupMap","getFacetValueIds","ne","formArray","oe","paginationConfig","channelPriceIncludesTax","taxCategories","customOptionFields","pendingAssetChanges","assetChange","selectionChange","getFeaturedAsset","getTaxRatesSimple","Math","priceIncludesTax","currencyCode","ye","imports"],"sources":["webpack:///node_modules/rxjs/_esm2015/internal/operators/skipUntil.js","webpack:///node_modules/@vendure/admin-ui/__ivy_ngcc__/fesm2015/vendure-admin-ui-catalog.js"],"sourcesContent":["import { SimpleOuterSubscriber, SimpleInnerSubscriber, innerSubscribe } from '../innerSubscribe';\nexport function skipUntil(notifier) {\n    return (source) => source.lift(new SkipUntilOperator(notifier));\n}\nclass SkipUntilOperator {\n    constructor(notifier) {\n        this.notifier = notifier;\n    }\n    call(destination, source) {\n        return source.subscribe(new SkipUntilSubscriber(destination, this.notifier));\n    }\n}\nclass SkipUntilSubscriber extends SimpleOuterSubscriber {\n    constructor(destination, notifier) {\n        super(destination);\n        this.hasValue = false;\n        const innerSubscriber = new SimpleInnerSubscriber(this);\n        this.add(innerSubscriber);\n        this.innerSubscription = innerSubscriber;\n        const innerSubscription = innerSubscribe(notifier, innerSubscriber);\n        if (innerSubscription !== innerSubscriber) {\n            this.add(innerSubscription);\n            this.innerSubscription = innerSubscription;\n        }\n    }\n    _next(value) {\n        if (this.hasValue) {\n            super._next(value);\n        }\n    }\n    notifyNext() {\n        this.hasValue = true;\n        if (this.innerSubscription) {\n            this.innerSubscription.unsubscribe();\n        }\n    }\n    notifyComplete() {\n    }\n}\n","import * as i0 from '@angular/core';\nimport { Component, ChangeDetectionStrategy, ChangeDetectorRef, ViewChild, Injectable, EventEmitter, Input, HostBinding, Output, ContentChild, TemplateRef, SkipSelf, Optional, ViewChildren, ElementRef, forwardRef, NgModule } from '@angular/core';\nimport * as i1 from '@angular/router';\nimport { Router, ActivatedRoute, RouterModule } from '@angular/router';\nimport * as i2 from '@vendure/admin-ui/core';\nimport { BaseDetailComponent, ServerConfigService, NotificationService, DataService, BaseListComponent, SortOrder, LogicalOperator, DeletionResult, ModalService, Permission, unicodePatternValidator, findTranslation, getConfigArgValue, createUpdatedTranslatable, encodeConfigArgValue, LocalStorageService, SelectionManager, FacetValueSelectorComponent, flattenFacetValues, getChannelCodeFromUserStatus, JobState, JobQueueService, getDefaultUiLanguage, BaseEntityResolver, AssetType, createResolveData, CanDeactivateDetailGuard, detailBreadcrumb, AssetPickerDialogComponent, AssetPreviewDialogComponent, isMultiChannel, currentChannelIsNotDefault, GlobalFlag, SharedModule, BulkActionRegistryService } from '@vendure/admin-ui/core';\nimport { marker } from '@biesbjerg/ngx-translate-extract-marker';\nimport { map, debounceTime, takeUntil, finalize, switchMap, filter, take, mergeMap, tap, shareReplay, distinctUntilChanged, mapTo, startWith, skipUntil, skip, withLatestFrom, delay, defaultIfEmpty, catchError } from 'rxjs/operators';\nimport { FormGroup, FormControl, FormBuilder, Validators, FormArray, NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { BehaviorSubject, combineLatest, EMPTY, Subject, merge, of, forkJoin, throwError, from } from 'rxjs';\nimport { normalizeString } from '@vendure/common/lib/normalize-string';\nimport { notNullOrUndefined, generateAllCombinations } from '@vendure/common/lib/shared-utils';\nimport { SortOrder as SortOrder$1 } from '@vendure/common/lib/generated-shop-types';\nimport { Location } from '@angular/common';\nimport { DEFAULT_CHANNEL_CODE } from '@vendure/common/lib/shared-constants';\nimport { unique } from '@vendure/common/lib/unique';\nimport { __awaiter } from 'tslib';\nimport { pick } from '@vendure/common/lib/pick';\nimport { moveItemInArray } from '@angular/cdk/drag-drop';\nimport { gql } from 'apollo-angular';\n\nimport * as ngcc0 from '@angular/core';\nimport * as ngcc1 from '@angular/router';\nimport * as ngcc2 from '@vendure/admin-ui/core';\nimport * as ngcc3 from '@angular/forms';\nimport * as ngcc4 from '@angular/common';\nimport * as ngcc5 from '@ngx-translate/core';\nimport * as ngcc6 from 'ngx-pagination';\nimport * as ngcc7 from '@clr/angular';\nimport * as ngcc8 from '@angular/cdk/drag-drop';\n\nfunction AssetDetailComponent_button_6_Template(rf, ctx) { if (rf & 1) {\n    const _r2 = ngcc0.getCurrentView();\n    ngcc0.elementStart(0, \"button\", 4);\n    ngcc0.listener(\"click\", function AssetDetailComponent_button_6_Template_button_click_0_listener() { ngcc0.restoreView(_r2); const ctx_r1 = ngcc0.nextContext(); return ctx_r1.save(); });\n    ngcc0.text(1);\n    ngcc0.pipe(2, \"translate\");\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const ctx_r0 = ngcc0.nextContext();\n    ngcc0.property(\"disabled\", ctx_r0.detailForm.invalid || ctx_r0.detailForm.pristine);\n    ngcc0.advance(1);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(2, 2, \"common.update\"), \" \");\n} }\nconst _c0 = function () { return [\"UpdateCatalog\", \"UpdateAsset\"]; };\nconst _c1 = function () { return {}; };\nconst _c2 = function () { return [\"DeleteCatalog\", \"DeleteAsset\"]; };\nconst _c3 = [\"collectionContents\"];\nfunction CollectionDetailComponent_button_10_Template(rf, ctx) { if (rf & 1) {\n    const _r5 = ngcc0.getCurrentView();\n    ngcc0.elementStart(0, \"button\", 6);\n    ngcc0.listener(\"click\", function CollectionDetailComponent_button_10_Template_button_click_0_listener() { ngcc0.restoreView(_r5); const ctx_r4 = ngcc0.nextContext(); return ctx_r4.create(); });\n    ngcc0.text(1);\n    ngcc0.pipe(2, \"translate\");\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const ctx_r0 = ngcc0.nextContext();\n    ngcc0.property(\"disabled\", ctx_r0.detailForm.invalid || ctx_r0.detailForm.pristine);\n    ngcc0.advance(1);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(2, 2, \"common.create\"), \" \");\n} }\nfunction CollectionDetailComponent_ng_template_12_button_0_Template(rf, ctx) { if (rf & 1) {\n    const _r8 = ngcc0.getCurrentView();\n    ngcc0.elementStart(0, \"button\", 6);\n    ngcc0.listener(\"click\", function CollectionDetailComponent_ng_template_12_button_0_Template_button_click_0_listener() { ngcc0.restoreView(_r8); const ctx_r7 = ngcc0.nextContext(2); return ctx_r7.save(); });\n    ngcc0.text(1);\n    ngcc0.pipe(2, \"translate\");\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const ctx_r6 = ngcc0.nextContext(2);\n    ngcc0.property(\"disabled\", (ctx_r6.detailForm.invalid || ctx_r6.detailForm.pristine) && !ctx_r6.assetsChanged());\n    ngcc0.advance(1);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(2, 2, \"common.update\"), \" \");\n} }\nfunction CollectionDetailComponent_ng_template_12_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.template(0, CollectionDetailComponent_ng_template_12_button_0_Template, 3, 4, \"button\", 7);\n} if (rf & 2) {\n    const ctx_r2 = ngcc0.nextContext();\n    ngcc0.property(\"vdrIfPermissions\", ctx_r2.updatePermission);\n} }\nconst _c4 = function () { return [\"/catalog/collections\"]; };\nfunction CollectionDetailComponent_form_14_li_3_a_1_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementStart(0, \"a\", 35);\n    ngcc0.text(1);\n    ngcc0.pipe(2, \"translate\");\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    ngcc0.property(\"routerLink\", ngcc0.pureFunction0(4, _c4));\n    ngcc0.advance(1);\n    ngcc0.textInterpolate(ngcc0.pipeBind1(2, 2, \"catalog.root-collection\"));\n} }\nconst _c5 = function (a1) { return [\"/catalog/collections\", a1]; };\nfunction CollectionDetailComponent_form_14_li_3_a_2_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementStart(0, \"a\", 35);\n    ngcc0.text(1);\n    ngcc0.pipe(2, \"translate\");\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const breadcrumb_r19 = ngcc0.nextContext().$implicit;\n    ngcc0.property(\"routerLink\", ngcc0.pureFunction1(4, _c5, breadcrumb_r19.id));\n    ngcc0.advance(1);\n    ngcc0.textInterpolate(ngcc0.pipeBind1(2, 2, breadcrumb_r19.name));\n} }\nfunction CollectionDetailComponent_form_14_li_3_ng_container_3_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementContainerStart(0);\n    ngcc0.text(1);\n    ngcc0.pipe(2, \"translate\");\n    ngcc0.elementContainerEnd();\n} if (rf & 2) {\n    const breadcrumb_r19 = ngcc0.nextContext().$implicit;\n    ngcc0.advance(1);\n    ngcc0.textInterpolate(ngcc0.pipeBind1(2, 1, breadcrumb_r19.name));\n} }\nfunction CollectionDetailComponent_form_14_li_3_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementStart(0, \"li\");\n    ngcc0.template(1, CollectionDetailComponent_form_14_li_3_a_1_Template, 3, 5, \"a\", 33);\n    ngcc0.template(2, CollectionDetailComponent_form_14_li_3_a_2_Template, 3, 6, \"a\", 33);\n    ngcc0.template(3, CollectionDetailComponent_form_14_li_3_ng_container_3_Template, 3, 3, \"ng-container\", 34);\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const isFirst_r20 = ctx.first;\n    const isLast_r21 = ctx.last;\n    ngcc0.advance(1);\n    ngcc0.property(\"ngIf\", isFirst_r20);\n    ngcc0.advance(1);\n    ngcc0.property(\"ngIf\", !isFirst_r20 && !isLast_r21);\n    ngcc0.advance(1);\n    ngcc0.property(\"ngIf\", isLast_r21);\n} }\nfunction CollectionDetailComponent_form_14_ng_container_12_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementContainerStart(0);\n    ngcc0.text(1);\n    ngcc0.pipe(2, \"translate\");\n    ngcc0.elementContainerEnd();\n} if (rf & 2) {\n    ngcc0.advance(1);\n    ngcc0.textInterpolate(ngcc0.pipeBind1(2, 1, \"catalog.public\"));\n} }\nfunction CollectionDetailComponent_form_14_ng_template_13_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.text(0);\n    ngcc0.pipe(1, \"translate\");\n} if (rf & 2) {\n    ngcc0.textInterpolate(ngcc0.pipeBind1(1, 1, \"catalog.private\"));\n} }\nconst _c6 = function () { return [\"customFields\"]; };\nfunction CollectionDetailComponent_form_14_section_27_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementStart(0, \"section\", 36);\n    ngcc0.elementStart(1, \"label\");\n    ngcc0.text(2);\n    ngcc0.pipe(3, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.element(4, \"vdr-tabbed-custom-fields\", 37);\n    ngcc0.pipe(5, \"hasPermission\");\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const ctx_r14 = ngcc0.nextContext(2);\n    ngcc0.advance(2);\n    ngcc0.textInterpolate(ngcc0.pipeBind1(3, 4, \"common.custom-fields\"));\n    ngcc0.advance(2);\n    ngcc0.property(\"customFields\", ctx_r14.customFields)(\"customFieldsFormGroup\", ctx_r14.detailForm.get(ngcc0.pureFunction0(8, _c6)))(\"readonly\", !ngcc0.pipeBind1(5, 6, ctx_r14.updatePermission));\n} }\nfunction CollectionDetailComponent_form_14_ng_container_36_Template(rf, ctx) { if (rf & 1) {\n    const _r30 = ngcc0.getCurrentView();\n    ngcc0.elementContainerStart(0);\n    ngcc0.elementStart(1, \"vdr-configurable-input\", 38);\n    ngcc0.listener(\"remove\", function CollectionDetailComponent_form_14_ng_container_36_Template_vdr_configurable_input_remove_1_listener() { const restoredCtx = ngcc0.restoreView(_r30); const i_r28 = restoredCtx.index; const ctx_r29 = ngcc0.nextContext(2); return ctx_r29.removeFilter(i_r28); });\n    ngcc0.pipe(2, \"hasPermission\");\n    ngcc0.elementEnd();\n    ngcc0.elementContainerEnd();\n} if (rf & 2) {\n    const filter_r27 = ctx.$implicit;\n    const i_r28 = ctx.index;\n    const ctx_r15 = ngcc0.nextContext(2);\n    ngcc0.advance(1);\n    ngcc0.property(\"position\", i_r28)(\"operation\", filter_r27)(\"operationDefinition\", ctx_r15.getFilterDefinition(filter_r27))(\"formControlName\", i_r28)(\"readonly\", !ngcc0.pipeBind1(2, 5, ctx_r15.updatePermission));\n} }\nfunction CollectionDetailComponent_form_14_div_37_button_7_Template(rf, ctx) { if (rf & 1) {\n    const _r34 = ngcc0.getCurrentView();\n    ngcc0.elementStart(0, \"button\", 43);\n    ngcc0.listener(\"click\", function CollectionDetailComponent_form_14_div_37_button_7_Template_button_click_0_listener() { const restoredCtx = ngcc0.restoreView(_r34); const filter_r32 = restoredCtx.$implicit; const ctx_r33 = ngcc0.nextContext(3); return ctx_r33.addFilter(filter_r32); });\n    ngcc0.text(1);\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const filter_r32 = ctx.$implicit;\n    ngcc0.advance(1);\n    ngcc0.textInterpolate1(\" \", filter_r32.description, \" \");\n} }\nfunction CollectionDetailComponent_form_14_div_37_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementStart(0, \"div\");\n    ngcc0.elementStart(1, \"vdr-dropdown\");\n    ngcc0.elementStart(2, \"button\", 39);\n    ngcc0.element(3, \"clr-icon\", 40);\n    ngcc0.text(4);\n    ngcc0.pipe(5, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.elementStart(6, \"vdr-dropdown-menu\", 41);\n    ngcc0.template(7, CollectionDetailComponent_form_14_div_37_button_7_Template, 2, 1, \"button\", 42);\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const ctx_r16 = ngcc0.nextContext(2);\n    ngcc0.advance(4);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(5, 2, \"marketing.add-condition\"), \" \");\n    ngcc0.advance(3);\n    ngcc0.property(\"ngForOf\", ctx_r16.allFilters);\n} }\nconst _c7 = function (a0) { return { count: a0 }; };\nconst _c8 = function () { return { standalone: true }; };\nfunction CollectionDetailComponent_form_14_ng_template_43_Template(rf, ctx) { if (rf & 1) {\n    const _r37 = ngcc0.getCurrentView();\n    ngcc0.elementStart(0, \"div\", 44);\n    ngcc0.text(1);\n    ngcc0.pipe(2, \"translate\");\n    ngcc0.pipe(3, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.elementStart(4, \"clr-checkbox-wrapper\");\n    ngcc0.elementStart(5, \"input\", 45);\n    ngcc0.listener(\"ngModelChange\", function CollectionDetailComponent_form_14_ng_template_43_Template_input_ngModelChange_5_listener() { ngcc0.restoreView(_r37); const ctx_r36 = ngcc0.nextContext(2); return ctx_r36.toggleLivePreview(); });\n    ngcc0.elementEnd();\n    ngcc0.elementStart(6, \"label\");\n    ngcc0.text(7);\n    ngcc0.pipe(8, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const count_r35 = ctx.$implicit;\n    const ctx_r18 = ngcc0.nextContext(2);\n    let tmp_1_0;\n    let tmp_3_0;\n    ngcc0.advance(1);\n    ngcc0.textInterpolate2(\" \", ngcc0.pipeBind1(2, 8, \"catalog.collection-contents\"), \" (\", ngcc0.pipeBind2(3, 10, \"common.results-count\", ngcc0.pureFunction1(15, _c7, count_r35)), \") \");\n    ngcc0.advance(3);\n    ngcc0.classProp(\"disabled\", (tmp_1_0 = ctx_r18.detailForm.get(\"filters\")) == null ? null : tmp_1_0.pristine);\n    ngcc0.advance(1);\n    ngcc0.property(\"ngModelOptions\", ngcc0.pureFunction0(17, _c8))(\"disabled\", (tmp_3_0 = ctx_r18.detailForm.get(\"filters\")) == null ? null : tmp_3_0.pristine)(\"ngModel\", ctx_r18.livePreview);\n    ngcc0.advance(2);\n    ngcc0.textInterpolate(ngcc0.pipeBind1(8, 13, \"catalog.live-preview-contents\"));\n} }\nconst _c9 = function (a0) { return { pattern: a0 }; };\nfunction CollectionDetailComponent_form_14_Template(rf, ctx) { if (rf & 1) {\n    const _r39 = ngcc0.getCurrentView();\n    ngcc0.elementStart(0, \"form\", 8);\n    ngcc0.elementStart(1, \"nav\", 9);\n    ngcc0.elementStart(2, \"ul\", 10);\n    ngcc0.template(3, CollectionDetailComponent_form_14_li_3_Template, 4, 3, \"li\", 11);\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementStart(4, \"div\", 12);\n    ngcc0.elementStart(5, \"div\", 13);\n    ngcc0.elementStart(6, \"vdr-form-field\", 14);\n    ngcc0.pipe(7, \"translate\");\n    ngcc0.elementStart(8, \"clr-toggle-wrapper\");\n    ngcc0.element(9, \"input\", 15);\n    ngcc0.pipe(10, \"hasPermission\");\n    ngcc0.elementStart(11, \"label\", 16);\n    ngcc0.template(12, CollectionDetailComponent_form_14_ng_container_12_Template, 3, 3, \"ng-container\", 17);\n    ngcc0.template(13, CollectionDetailComponent_form_14_ng_template_13_Template, 2, 3, \"ng-template\", null, 18, ngcc0.templateRefExtractor);\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementStart(15, \"vdr-form-field\", 19);\n    ngcc0.pipe(16, \"translate\");\n    ngcc0.elementStart(17, \"input\", 20);\n    ngcc0.listener(\"input\", function CollectionDetailComponent_form_14_Template_input_input_17_listener($event) { ngcc0.restoreView(_r39); const ctx_r38 = ngcc0.nextContext(); return ctx_r38.updateSlug($event.target.value); });\n    ngcc0.pipe(18, \"hasPermission\");\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementStart(19, \"vdr-form-field\", 21);\n    ngcc0.pipe(20, \"translate\");\n    ngcc0.pipe(21, \"translate\");\n    ngcc0.element(22, \"input\", 22);\n    ngcc0.pipe(23, \"hasPermission\");\n    ngcc0.elementEnd();\n    ngcc0.element(24, \"vdr-rich-text-editor\", 23);\n    ngcc0.pipe(25, \"hasPermission\");\n    ngcc0.pipe(26, \"translate\");\n    ngcc0.template(27, CollectionDetailComponent_form_14_section_27_Template, 6, 9, \"section\", 24);\n    ngcc0.element(28, \"vdr-custom-detail-component-host\", 25);\n    ngcc0.elementEnd();\n    ngcc0.elementStart(29, \"div\", 26);\n    ngcc0.elementStart(30, \"vdr-assets\", 27);\n    ngcc0.listener(\"change\", function CollectionDetailComponent_form_14_Template_vdr_assets_change_30_listener($event) { ngcc0.restoreView(_r39); const ctx_r40 = ngcc0.nextContext(); return ctx_r40.assetChanges = $event; });\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementStart(31, \"div\", 28);\n    ngcc0.elementStart(32, \"div\", 13);\n    ngcc0.elementStart(33, \"label\");\n    ngcc0.text(34);\n    ngcc0.pipe(35, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.template(36, CollectionDetailComponent_form_14_ng_container_36_Template, 3, 7, \"ng-container\", 29);\n    ngcc0.template(37, CollectionDetailComponent_form_14_div_37_Template, 8, 4, \"div\", 30);\n    ngcc0.elementEnd();\n    ngcc0.elementStart(38, \"div\", 13);\n    ngcc0.elementStart(39, \"vdr-collection-contents\", 31, 32);\n    ngcc0.pipe(41, \"async\");\n    ngcc0.pipe(42, \"async\");\n    ngcc0.template(43, CollectionDetailComponent_form_14_ng_template_43_Template, 9, 18, \"ng-template\");\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const collection_r9 = ctx.ngIf;\n    const _r12 = ngcc0.reference(14);\n    const ctx_r3 = ngcc0.nextContext();\n    ngcc0.property(\"formGroup\", ctx_r3.detailForm);\n    ngcc0.advance(3);\n    ngcc0.property(\"ngForOf\", collection_r9.breadcrumbs);\n    ngcc0.advance(3);\n    ngcc0.property(\"label\", ngcc0.pipeBind1(7, 27, \"catalog.visibility\"));\n    ngcc0.advance(3);\n    ngcc0.property(\"vdrDisabled\", !ngcc0.pipeBind1(10, 29, ctx_r3.updatePermission));\n    ngcc0.advance(3);\n    ngcc0.property(\"ngIf\", ctx_r3.detailForm.value.visible)(\"ngIfElse\", _r12);\n    ngcc0.advance(3);\n    ngcc0.property(\"label\", ngcc0.pipeBind1(16, 31, \"common.name\"));\n    ngcc0.advance(2);\n    ngcc0.property(\"readonly\", !ngcc0.pipeBind1(18, 33, ctx_r3.updatePermission));\n    ngcc0.advance(2);\n    ngcc0.property(\"label\", ngcc0.pipeBind1(20, 35, \"catalog.slug\"))(\"errors\", ngcc0.pureFunction1(51, _c9, ngcc0.pipeBind1(21, 37, \"catalog.slug-pattern-error\")));\n    ngcc0.advance(3);\n    ngcc0.property(\"readonly\", !ngcc0.pipeBind1(23, 39, ctx_r3.updatePermission));\n    ngcc0.advance(2);\n    ngcc0.property(\"readonly\", !ngcc0.pipeBind1(25, 41, ctx_r3.updatePermission))(\"label\", ngcc0.pipeBind1(26, 43, \"common.description\"));\n    ngcc0.advance(3);\n    ngcc0.property(\"ngIf\", ctx_r3.customFields.length);\n    ngcc0.advance(1);\n    ngcc0.property(\"entity$\", ctx_r3.entity$)(\"detailForm\", ctx_r3.detailForm);\n    ngcc0.advance(2);\n    ngcc0.property(\"assets\", collection_r9.assets)(\"featuredAsset\", collection_r9.featuredAsset)(\"updatePermissions\", ctx_r3.updatePermission);\n    ngcc0.advance(4);\n    ngcc0.textInterpolate(ngcc0.pipeBind1(35, 45, \"catalog.filters\"));\n    ngcc0.advance(2);\n    ngcc0.property(\"ngForOf\", ctx_r3.filters)(\"ngForTrackBy\", ctx_r3.trackByFn);\n    ngcc0.advance(1);\n    ngcc0.property(\"vdrIfPermissions\", ctx_r3.updatePermission);\n    ngcc0.advance(2);\n    ngcc0.property(\"collectionId\", ctx_r3.id)(\"parentId\", ngcc0.pipeBind1(41, 47, ctx_r3.parentId$))(\"updatedFilters\", ngcc0.pipeBind1(42, 49, ctx_r3.updatedFilters$))(\"previewUpdatedFilters\", ctx_r3.livePreview);\n} }\nconst _c10 = function () { return [\"./create\"]; };\nfunction CollectionListComponent_a_16_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementStart(0, \"a\", 15);\n    ngcc0.element(1, \"clr-icon\", 16);\n    ngcc0.text(2);\n    ngcc0.pipe(3, \"translate\");\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    ngcc0.property(\"routerLink\", ngcc0.pureFunction0(4, _c10));\n    ngcc0.advance(2);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(3, 2, \"catalog.create-new-collection\"), \" \");\n} }\nfunction CollectionListComponent_ng_template_28_Template(rf, ctx) { if (rf & 1) {\n    const _r4 = ngcc0.getCurrentView();\n    ngcc0.elementStart(0, \"div\", 17);\n    ngcc0.text(1);\n    ngcc0.pipe(2, \"async\");\n    ngcc0.pipe(3, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.elementStart(4, \"button\", 18);\n    ngcc0.listener(\"click\", function CollectionListComponent_ng_template_28_Template_button_click_4_listener() { ngcc0.restoreView(_r4); const ctx_r3 = ngcc0.nextContext(); return ctx_r3.closeContents(); });\n    ngcc0.element(5, \"clr-icon\", 19);\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const count_r2 = ctx.$implicit;\n    const ctx_r1 = ngcc0.nextContext();\n    ngcc0.advance(1);\n    ngcc0.textInterpolate2(\" \", ngcc0.pipeBind1(2, 2, ctx_r1.activeCollectionTitle$), \" (\", ngcc0.pipeBind2(3, 4, \"common.results-count\", ngcc0.pureFunction1(7, _c7, count_r2)), \") \");\n} }\nconst _c11 = function () { return [\"CreateCatalog\", \"CreateCollection\"]; };\nfunction FacetDetailComponent_button_10_Template(rf, ctx) { if (rf & 1) {\n    const _r5 = ngcc0.getCurrentView();\n    ngcc0.elementStart(0, \"button\", 6);\n    ngcc0.listener(\"click\", function FacetDetailComponent_button_10_Template_button_click_0_listener() { ngcc0.restoreView(_r5); const ctx_r4 = ngcc0.nextContext(); return ctx_r4.create(); });\n    ngcc0.text(1);\n    ngcc0.pipe(2, \"translate\");\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const ctx_r0 = ngcc0.nextContext();\n    ngcc0.property(\"disabled\", ctx_r0.detailForm.invalid || ctx_r0.detailForm.pristine);\n    ngcc0.advance(1);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(2, 2, \"common.create\"), \" \");\n} }\nfunction FacetDetailComponent_ng_template_12_button_0_Template(rf, ctx) { if (rf & 1) {\n    const _r8 = ngcc0.getCurrentView();\n    ngcc0.elementStart(0, \"button\", 6);\n    ngcc0.listener(\"click\", function FacetDetailComponent_ng_template_12_button_0_Template_button_click_0_listener() { ngcc0.restoreView(_r8); const ctx_r7 = ngcc0.nextContext(2); return ctx_r7.save(); });\n    ngcc0.text(1);\n    ngcc0.pipe(2, \"translate\");\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const ctx_r6 = ngcc0.nextContext(2);\n    ngcc0.property(\"disabled\", ctx_r6.detailForm.invalid || ctx_r6.detailForm.pristine);\n    ngcc0.advance(1);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(2, 2, \"common.update\"), \" \");\n} }\nfunction FacetDetailComponent_ng_template_12_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.template(0, FacetDetailComponent_ng_template_12_button_0_Template, 3, 4, \"button\", 7);\n} if (rf & 2) {\n    const ctx_r2 = ngcc0.nextContext();\n    ngcc0.property(\"vdrIfPermissions\", ctx_r2.updatePermission);\n} }\nfunction FacetDetailComponent_form_14_ng_container_8_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementContainerStart(0);\n    ngcc0.text(1);\n    ngcc0.pipe(2, \"translate\");\n    ngcc0.elementContainerEnd();\n} if (rf & 2) {\n    ngcc0.advance(1);\n    ngcc0.textInterpolate(ngcc0.pipeBind1(2, 1, \"catalog.public\"));\n} }\nfunction FacetDetailComponent_form_14_ng_template_9_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.text(0);\n    ngcc0.pipe(1, \"translate\");\n} if (rf & 2) {\n    ngcc0.textInterpolate(ngcc0.pipeBind1(1, 1, \"catalog.private\"));\n} }\nconst _c12 = function () { return [\"facet\", \"customFields\"]; };\nfunction FacetDetailComponent_form_14_section_20_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementStart(0, \"section\", 22);\n    ngcc0.elementStart(1, \"label\");\n    ngcc0.text(2);\n    ngcc0.pipe(3, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.element(4, \"vdr-tabbed-custom-fields\", 23);\n    ngcc0.pipe(5, \"hasPermission\");\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const ctx_r13 = ngcc0.nextContext(2);\n    ngcc0.advance(2);\n    ngcc0.textInterpolate(ngcc0.pipeBind1(3, 4, \"common.custom-fields\"));\n    ngcc0.advance(2);\n    ngcc0.property(\"customFields\", ctx_r13.customFields)(\"customFieldsFormGroup\", ctx_r13.detailForm.get(ngcc0.pureFunction0(8, _c12)))(\"readonly\", !ngcc0.pipeBind1(5, 6, ctx_r13.updatePermission));\n} }\nfunction FacetDetailComponent_form_14_section_22_table_4_ng_container_10_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementContainerStart(0);\n    ngcc0.elementStart(1, \"th\");\n    ngcc0.text(2);\n    ngcc0.pipe(3, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.elementContainerEnd();\n} if (rf & 2) {\n    ngcc0.advance(2);\n    ngcc0.textInterpolate(ngcc0.pipeBind1(3, 1, \"common.custom-fields\"));\n} }\nconst _c13 = function (a1) { return [\"values\", a1, \"customFields\"]; };\nfunction FacetDetailComponent_form_14_section_22_table_4_tr_13_td_8_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementStart(0, \"td\", 40);\n    ngcc0.element(1, \"vdr-tabbed-custom-fields\", 41);\n    ngcc0.pipe(2, \"hasPermission\");\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const i_r20 = ngcc0.nextContext().index;\n    const ctx_r21 = ngcc0.nextContext(4);\n    ngcc0.advance(1);\n    ngcc0.property(\"customFields\", ctx_r21.customValueFields)(\"compact\", true)(\"customFieldsFormGroup\", ctx_r21.detailForm.get(ngcc0.pureFunction1(6, _c13, i_r20)))(\"readonly\", !ngcc0.pipeBind1(2, 4, ctx_r21.updatePermission));\n} }\nfunction FacetDetailComponent_form_14_section_22_table_4_tr_13_Template(rf, ctx) { if (rf & 1) {\n    const _r25 = ngcc0.getCurrentView();\n    ngcc0.elementStart(0, \"tr\", 30);\n    ngcc0.elementStart(1, \"td\", 31);\n    ngcc0.element(2, \"vdr-entity-info\", 0);\n    ngcc0.elementEnd();\n    ngcc0.elementStart(3, \"td\", 31);\n    ngcc0.elementStart(4, \"input\", 32);\n    ngcc0.listener(\"input\", function FacetDetailComponent_form_14_section_22_table_4_tr_13_Template_input_input_4_listener($event) { const restoredCtx = ngcc0.restoreView(_r25); const i_r20 = restoredCtx.index; const facet_r9 = ngcc0.nextContext(3).ngIf; const ctx_r23 = ngcc0.nextContext(); return ctx_r23.updateValueCode(facet_r9.values[i_r20] == null ? null : facet_r9.values[i_r20].code, $event.target.value, i_r20); });\n    ngcc0.pipe(5, \"hasPermission\");\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementStart(6, \"td\", 31);\n    ngcc0.element(7, \"input\", 33);\n    ngcc0.elementEnd();\n    ngcc0.template(8, FacetDetailComponent_form_14_section_22_table_4_tr_13_td_8_Template, 3, 8, \"td\", 34);\n    ngcc0.elementStart(9, \"td\", 31);\n    ngcc0.elementStart(10, \"vdr-dropdown\");\n    ngcc0.elementStart(11, \"button\", 35);\n    ngcc0.text(12);\n    ngcc0.pipe(13, \"translate\");\n    ngcc0.element(14, \"clr-icon\", 36);\n    ngcc0.elementEnd();\n    ngcc0.elementStart(15, \"vdr-dropdown-menu\", 37);\n    ngcc0.elementStart(16, \"button\", 38);\n    ngcc0.listener(\"click\", function FacetDetailComponent_form_14_section_22_table_4_tr_13_Template_button_click_16_listener() { const restoredCtx = ngcc0.restoreView(_r25); const i_r20 = restoredCtx.index; const facet_r9 = ngcc0.nextContext(3).ngIf; const ctx_r26 = ngcc0.nextContext(); return ctx_r26.deleteFacetValue(facet_r9.values[i_r20] == null ? null : facet_r9.values[i_r20].id, i_r20); });\n    ngcc0.pipe(17, \"hasPermission\");\n    ngcc0.element(18, \"clr-icon\", 39);\n    ngcc0.text(19);\n    ngcc0.pipe(20, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const value_r19 = ctx.$implicit;\n    const i_r20 = ctx.index;\n    const ctx_r18 = ngcc0.nextContext(4);\n    ngcc0.property(\"formGroupName\", i_r20);\n    ngcc0.advance(2);\n    ngcc0.property(\"entity\", value_r19);\n    ngcc0.advance(2);\n    ngcc0.property(\"readonly\", !ngcc0.pipeBind1(5, 7, ctx_r18.updatePermission));\n    ngcc0.advance(4);\n    ngcc0.property(\"ngIf\", ctx_r18.customValueFields.length);\n    ngcc0.advance(4);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(13, 9, \"common.actions\"), \" \");\n    ngcc0.advance(4);\n    ngcc0.property(\"disabled\", !ngcc0.pipeBind1(17, 11, ctx_r18.updatePermission));\n    ngcc0.advance(3);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(20, 13, \"common.delete\"), \" \");\n} }\nfunction FacetDetailComponent_form_14_section_22_table_4_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementStart(0, \"table\", 27);\n    ngcc0.elementStart(1, \"thead\");\n    ngcc0.elementStart(2, \"tr\");\n    ngcc0.element(3, \"th\");\n    ngcc0.elementStart(4, \"th\");\n    ngcc0.text(5);\n    ngcc0.pipe(6, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.elementStart(7, \"th\");\n    ngcc0.text(8);\n    ngcc0.pipe(9, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.template(10, FacetDetailComponent_form_14_section_22_table_4_ng_container_10_Template, 4, 3, \"ng-container\", 28);\n    ngcc0.element(11, \"th\");\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementStart(12, \"tbody\");\n    ngcc0.template(13, FacetDetailComponent_form_14_section_22_table_4_tr_13_Template, 21, 15, \"tr\", 29);\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const ctx_r15 = ngcc0.nextContext(3);\n    ngcc0.advance(5);\n    ngcc0.textInterpolate(ngcc0.pipeBind1(6, 4, \"common.name\"));\n    ngcc0.advance(3);\n    ngcc0.textInterpolate(ngcc0.pipeBind1(9, 6, \"common.code\"));\n    ngcc0.advance(2);\n    ngcc0.property(\"ngIf\", ctx_r15.customValueFields.length);\n    ngcc0.advance(3);\n    ngcc0.property(\"ngForOf\", ctx_r15.values);\n} }\nfunction FacetDetailComponent_form_14_section_22_button_6_Template(rf, ctx) { if (rf & 1) {\n    const _r29 = ngcc0.getCurrentView();\n    ngcc0.elementStart(0, \"button\", 42);\n    ngcc0.listener(\"click\", function FacetDetailComponent_form_14_section_22_button_6_Template_button_click_0_listener() { ngcc0.restoreView(_r29); const ctx_r28 = ngcc0.nextContext(3); return ctx_r28.addFacetValue(); });\n    ngcc0.element(1, \"clr-icon\", 43);\n    ngcc0.text(2);\n    ngcc0.pipe(3, \"translate\");\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    ngcc0.advance(2);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(3, 1, \"catalog.add-facet-value\"), \" \");\n} }\nconst _c14 = function () { return [\"CreateCatalog\", \"CreateFacet\"]; };\nfunction FacetDetailComponent_form_14_section_22_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementStart(0, \"section\", 24);\n    ngcc0.elementStart(1, \"label\");\n    ngcc0.text(2);\n    ngcc0.pipe(3, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.template(4, FacetDetailComponent_form_14_section_22_table_4_Template, 14, 8, \"table\", 25);\n    ngcc0.elementStart(5, \"div\");\n    ngcc0.template(6, FacetDetailComponent_form_14_section_22_button_6_Template, 4, 3, \"button\", 26);\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const ctx_r14 = ngcc0.nextContext(2);\n    ngcc0.advance(2);\n    ngcc0.textInterpolate(ngcc0.pipeBind1(3, 3, \"catalog.facet-values\"));\n    ngcc0.advance(2);\n    ngcc0.property(\"ngIf\", 0 < ctx_r14.getValuesFormArray().length);\n    ngcc0.advance(2);\n    ngcc0.property(\"vdrIfPermissions\", ngcc0.pureFunction0(5, _c14));\n} }\nfunction FacetDetailComponent_form_14_Template(rf, ctx) { if (rf & 1) {\n    const _r31 = ngcc0.getCurrentView();\n    ngcc0.elementStart(0, \"form\", 8);\n    ngcc0.elementStart(1, \"section\", 9);\n    ngcc0.elementStart(2, \"vdr-form-field\", 10);\n    ngcc0.pipe(3, \"translate\");\n    ngcc0.elementStart(4, \"clr-toggle-wrapper\");\n    ngcc0.element(5, \"input\", 11);\n    ngcc0.pipe(6, \"hasPermission\");\n    ngcc0.elementStart(7, \"label\", 12);\n    ngcc0.template(8, FacetDetailComponent_form_14_ng_container_8_Template, 3, 3, \"ng-container\", 13);\n    ngcc0.template(9, FacetDetailComponent_form_14_ng_template_9_Template, 2, 3, \"ng-template\", null, 14, ngcc0.templateRefExtractor);\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementStart(11, \"vdr-form-field\", 15);\n    ngcc0.pipe(12, \"translate\");\n    ngcc0.elementStart(13, \"input\", 16);\n    ngcc0.listener(\"input\", function FacetDetailComponent_form_14_Template_input_input_13_listener($event) { const restoredCtx = ngcc0.restoreView(_r31); const facet_r9 = restoredCtx.ngIf; const ctx_r30 = ngcc0.nextContext(); return ctx_r30.updateCode(facet_r9.code, $event.target.value); });\n    ngcc0.pipe(14, \"hasPermission\");\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementStart(15, \"vdr-form-field\", 17);\n    ngcc0.pipe(16, \"translate\");\n    ngcc0.pipe(17, \"hasPermission\");\n    ngcc0.element(18, \"input\", 18);\n    ngcc0.pipe(19, \"hasPermission\");\n    ngcc0.elementEnd();\n    ngcc0.template(20, FacetDetailComponent_form_14_section_20_Template, 6, 9, \"section\", 19);\n    ngcc0.element(21, \"vdr-custom-detail-component-host\", 20);\n    ngcc0.elementEnd();\n    ngcc0.template(22, FacetDetailComponent_form_14_section_22_Template, 7, 6, \"section\", 21);\n    ngcc0.pipe(23, \"async\");\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const _r11 = ngcc0.reference(10);\n    const ctx_r3 = ngcc0.nextContext();\n    ngcc0.property(\"formGroup\", ctx_r3.detailForm);\n    ngcc0.advance(2);\n    ngcc0.property(\"label\", ngcc0.pipeBind1(3, 14, \"catalog.visibility\"));\n    ngcc0.advance(3);\n    ngcc0.property(\"vdrDisabled\", !ngcc0.pipeBind1(6, 16, ctx_r3.updatePermission));\n    ngcc0.advance(3);\n    ngcc0.property(\"ngIf\", ctx_r3.detailForm.value.facet.visible)(\"ngIfElse\", _r11);\n    ngcc0.advance(3);\n    ngcc0.property(\"label\", ngcc0.pipeBind1(12, 18, \"common.name\"));\n    ngcc0.advance(2);\n    ngcc0.property(\"readonly\", !ngcc0.pipeBind1(14, 20, ctx_r3.updatePermission));\n    ngcc0.advance(2);\n    ngcc0.property(\"label\", ngcc0.pipeBind1(16, 22, \"common.code\"))(\"readOnlyToggle\", ngcc0.pipeBind1(17, 24, ctx_r3.updatePermission));\n    ngcc0.advance(3);\n    ngcc0.property(\"readonly\", !ngcc0.pipeBind1(19, 26, ctx_r3.updatePermission));\n    ngcc0.advance(2);\n    ngcc0.property(\"ngIf\", ctx_r3.customFields.length);\n    ngcc0.advance(1);\n    ngcc0.property(\"entity$\", ctx_r3.entity$)(\"detailForm\", ctx_r3.detailForm);\n    ngcc0.advance(1);\n    ngcc0.property(\"ngIf\", !ngcc0.pipeBind1(23, 28, ctx_r3.isNew$));\n} }\nfunction FacetListComponent_a_11_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementStart(0, \"a\", 8);\n    ngcc0.element(1, \"clr-icon\", 9);\n    ngcc0.text(2);\n    ngcc0.pipe(3, \"translate\");\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    ngcc0.property(\"routerLink\", ngcc0.pureFunction0(4, _c10));\n    ngcc0.advance(2);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(3, 2, \"catalog.create-new-facet\"), \" \");\n} }\nfunction FacetListComponent_ng_template_32_vdr_facet_value_chip_5_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.element(0, \"vdr-facet-value-chip\", 22);\n} if (rf & 2) {\n    const value_r8 = ctx.$implicit;\n    ngcc0.property(\"facetValue\", value_r8)(\"removable\", false)(\"displayFacetName\", false);\n} }\nfunction FacetListComponent_ng_template_32_button_7_ng_container_1_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementContainerStart(0);\n    ngcc0.element(1, \"clr-icon\", 9);\n    ngcc0.text(2);\n    ngcc0.elementContainerEnd();\n} if (rf & 2) {\n    const facet_r2 = ngcc0.nextContext(2).item;\n    const ctx_r9 = ngcc0.nextContext();\n    ngcc0.advance(2);\n    ngcc0.textInterpolate1(\" \", facet_r2.values.length - ctx_r9.initialLimit, \" \");\n} }\nfunction FacetListComponent_ng_template_32_button_7_ng_template_2_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.element(0, \"clr-icon\", 25);\n} }\nfunction FacetListComponent_ng_template_32_button_7_Template(rf, ctx) { if (rf & 1) {\n    const _r15 = ngcc0.getCurrentView();\n    ngcc0.elementStart(0, \"button\", 23);\n    ngcc0.listener(\"click\", function FacetListComponent_ng_template_32_button_7_Template_button_click_0_listener() { ngcc0.restoreView(_r15); const facet_r2 = ngcc0.nextContext().item; const ctx_r13 = ngcc0.nextContext(); return ctx_r13.toggleDisplayLimit(facet_r2); });\n    ngcc0.template(1, FacetListComponent_ng_template_32_button_7_ng_container_1_Template, 3, 1, \"ng-container\", 13);\n    ngcc0.template(2, FacetListComponent_ng_template_32_button_7_ng_template_2_Template, 1, 0, \"ng-template\", null, 24, ngcc0.templateRefExtractor);\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const _r10 = ngcc0.reference(3);\n    const facet_r2 = ngcc0.nextContext().item;\n    const ctx_r4 = ngcc0.nextContext();\n    ngcc0.advance(1);\n    ngcc0.property(\"ngIf\", (ctx_r4.displayLimit[facet_r2.id] || 0) < facet_r2.values.length)(\"ngIfElse\", _r10);\n} }\nfunction FacetListComponent_ng_template_32_ng_container_10_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementContainerStart(0);\n    ngcc0.text(1);\n    ngcc0.pipe(2, \"translate\");\n    ngcc0.elementContainerEnd();\n} if (rf & 2) {\n    ngcc0.advance(1);\n    ngcc0.textInterpolate(ngcc0.pipeBind1(2, 1, \"catalog.public\"));\n} }\nfunction FacetListComponent_ng_template_32_ng_template_11_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.text(0);\n    ngcc0.pipe(1, \"translate\");\n} if (rf & 2) {\n    ngcc0.textInterpolate(ngcc0.pipeBind1(1, 1, \"catalog.private\"));\n} }\nconst _c15 = function (a1) { return [\"./\", a1]; };\nconst _c16 = function () { return [\"DeleteCatalog\", \"DeleteFacet\"]; };\nfunction FacetListComponent_ng_template_32_Template(rf, ctx) { if (rf & 1) {\n    const _r18 = ngcc0.getCurrentView();\n    ngcc0.elementStart(0, \"td\", 10);\n    ngcc0.text(1);\n    ngcc0.elementEnd();\n    ngcc0.elementStart(2, \"td\", 10);\n    ngcc0.text(3);\n    ngcc0.elementEnd();\n    ngcc0.elementStart(4, \"td\", 10);\n    ngcc0.template(5, FacetListComponent_ng_template_32_vdr_facet_value_chip_5_Template, 1, 3, \"vdr-facet-value-chip\", 11);\n    ngcc0.pipe(6, \"slice\");\n    ngcc0.template(7, FacetListComponent_ng_template_32_button_7_Template, 4, 2, \"button\", 12);\n    ngcc0.elementEnd();\n    ngcc0.elementStart(8, \"td\", 10);\n    ngcc0.elementStart(9, \"vdr-chip\");\n    ngcc0.template(10, FacetListComponent_ng_template_32_ng_container_10_Template, 3, 3, \"ng-container\", 13);\n    ngcc0.template(11, FacetListComponent_ng_template_32_ng_template_11_Template, 2, 3, \"ng-template\", null, 14, ngcc0.templateRefExtractor);\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementStart(13, \"td\", 15);\n    ngcc0.element(14, \"vdr-table-row-action\", 16);\n    ngcc0.pipe(15, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.elementStart(16, \"td\", 15);\n    ngcc0.elementStart(17, \"vdr-dropdown\");\n    ngcc0.elementStart(18, \"button\", 17);\n    ngcc0.text(19);\n    ngcc0.pipe(20, \"translate\");\n    ngcc0.element(21, \"clr-icon\", 18);\n    ngcc0.elementEnd();\n    ngcc0.elementStart(22, \"vdr-dropdown-menu\", 19);\n    ngcc0.elementStart(23, \"button\", 20);\n    ngcc0.listener(\"click\", function FacetListComponent_ng_template_32_Template_button_click_23_listener() { const restoredCtx = ngcc0.restoreView(_r18); const facet_r2 = restoredCtx.item; const ctx_r17 = ngcc0.nextContext(); return ctx_r17.deleteFacet(facet_r2.id); });\n    ngcc0.pipe(24, \"hasPermission\");\n    ngcc0.element(25, \"clr-icon\", 21);\n    ngcc0.text(26);\n    ngcc0.pipe(27, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const facet_r2 = ctx.item;\n    const _r6 = ngcc0.reference(12);\n    const ctx_r1 = ngcc0.nextContext();\n    ngcc0.classProp(\"private\", facet_r2.isPrivate);\n    ngcc0.advance(1);\n    ngcc0.textInterpolate(facet_r2.code);\n    ngcc0.advance(1);\n    ngcc0.classProp(\"private\", facet_r2.isPrivate);\n    ngcc0.advance(1);\n    ngcc0.textInterpolate(facet_r2.name);\n    ngcc0.advance(1);\n    ngcc0.classProp(\"private\", facet_r2.isPrivate);\n    ngcc0.advance(1);\n    ngcc0.property(\"ngForOf\", ngcc0.pipeBind3(6, 23, facet_r2.values, 0, ctx_r1.displayLimit[facet_r2.id] || 3));\n    ngcc0.advance(2);\n    ngcc0.property(\"ngIf\", facet_r2.values.length > ctx_r1.initialLimit);\n    ngcc0.advance(1);\n    ngcc0.classProp(\"private\", facet_r2.isPrivate);\n    ngcc0.advance(2);\n    ngcc0.property(\"ngIf\", !facet_r2.isPrivate)(\"ngIfElse\", _r6);\n    ngcc0.advance(3);\n    ngcc0.classProp(\"private\", facet_r2.isPrivate);\n    ngcc0.advance(1);\n    ngcc0.property(\"label\", ngcc0.pipeBind1(15, 27, \"common.edit\"))(\"linkTo\", ngcc0.pureFunction1(35, _c15, facet_r2.id));\n    ngcc0.advance(2);\n    ngcc0.classProp(\"private\", facet_r2.isPrivate);\n    ngcc0.advance(3);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(20, 29, \"common.actions\"), \" \");\n    ngcc0.advance(4);\n    ngcc0.property(\"disabled\", !ngcc0.pipeBind1(24, 31, ngcc0.pureFunction0(37, _c16)));\n    ngcc0.advance(3);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(27, 33, \"common.delete\"), \" \");\n} }\nfunction ApplyFacetDialogComponent_ng_template_0_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.text(0);\n    ngcc0.pipe(1, \"translate\");\n} if (rf & 2) {\n    ngcc0.textInterpolate(ngcc0.pipeBind1(1, 1, \"catalog.add-facets\"));\n} }\nfunction ApplyFacetDialogComponent_ng_template_2_Template(rf, ctx) { if (rf & 1) {\n    const _r3 = ngcc0.getCurrentView();\n    ngcc0.elementStart(0, \"button\", 3);\n    ngcc0.listener(\"click\", function ApplyFacetDialogComponent_ng_template_2_Template_button_click_0_listener() { ngcc0.restoreView(_r3); const ctx_r2 = ngcc0.nextContext(); return ctx_r2.cancel(); });\n    ngcc0.text(1);\n    ngcc0.pipe(2, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.elementStart(3, \"button\", 4);\n    ngcc0.listener(\"click\", function ApplyFacetDialogComponent_ng_template_2_Template_button_click_3_listener() { ngcc0.restoreView(_r3); const ctx_r4 = ngcc0.nextContext(); return ctx_r4.selectValues(); });\n    ngcc0.text(4);\n    ngcc0.pipe(5, \"translate\");\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const ctx_r1 = ngcc0.nextContext();\n    ngcc0.advance(1);\n    ngcc0.textInterpolate(ngcc0.pipeBind1(2, 3, \"common.cancel\"));\n    ngcc0.advance(2);\n    ngcc0.property(\"disabled\", ctx_r1.selectedValues.length === 0);\n    ngcc0.advance(1);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(5, 5, \"catalog.add-facets\"), \" \");\n} }\nfunction AssignProductsToChannelDialogComponent_ng_template_0_ng_container_0_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementContainerStart(0);\n    ngcc0.text(1);\n    ngcc0.pipe(2, \"translate\");\n    ngcc0.elementContainerEnd();\n} if (rf & 2) {\n    ngcc0.advance(1);\n    ngcc0.textInterpolate(ngcc0.pipeBind1(2, 1, \"catalog.assign-variants-to-channel\"));\n} }\nfunction AssignProductsToChannelDialogComponent_ng_template_0_ng_template_1_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.text(0);\n    ngcc0.pipe(1, \"translate\");\n} if (rf & 2) {\n    ngcc0.textInterpolate(ngcc0.pipeBind1(1, 1, \"catalog.assign-products-to-channel\"));\n} }\nfunction AssignProductsToChannelDialogComponent_ng_template_0_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.template(0, AssignProductsToChannelDialogComponent_ng_template_0_ng_container_0_Template, 3, 3, \"ng-container\", 12);\n    ngcc0.template(1, AssignProductsToChannelDialogComponent_ng_template_0_ng_template_1_Template, 2, 3, \"ng-template\", null, 13, ngcc0.templateRefExtractor);\n} if (rf & 2) {\n    const _r7 = ngcc0.reference(2);\n    const ctx_r0 = ngcc0.nextContext();\n    ngcc0.property(\"ngIf\", ctx_r0.isProductVariantMode)(\"ngIfElse\", _r7);\n} }\nconst _c17 = function (a0) { return { channel: a0 }; };\nfunction AssignProductsToChannelDialogComponent_ng_template_29_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.text(0);\n    ngcc0.pipe(1, \"translate\");\n} if (rf & 2) {\n    const ctx_r1 = ngcc0.nextContext();\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind2(1, 1, \"catalog.price-in-channel\", ngcc0.pureFunction1(4, _c17, ctx_r1.selectedChannel == null ? null : ctx_r1.selectedChannel.code)), \" \");\n} }\nfunction AssignProductsToChannelDialogComponent_ng_template_30_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.text(0);\n    ngcc0.pipe(1, \"translate\");\n} if (rf & 2) {\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(1, 1, \"catalog.no-channel-selected\"), \" \");\n} }\nfunction AssignProductsToChannelDialogComponent_tr_33_ng_template_7_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.text(0);\n    ngcc0.pipe(1, \"localeCurrency\");\n} if (rf & 2) {\n    const row_r9 = ngcc0.nextContext().$implicit;\n    const ctx_r10 = ngcc0.nextContext();\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind2(1, 1, row_r9.pricePreview, ctx_r10.selectedChannel == null ? null : ctx_r10.selectedChannel.currencyCode), \" \");\n} }\nfunction AssignProductsToChannelDialogComponent_tr_33_ng_template_8_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.text(0, \" - \");\n} }\nfunction AssignProductsToChannelDialogComponent_tr_33_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementStart(0, \"tr\");\n    ngcc0.elementStart(1, \"td\");\n    ngcc0.text(2);\n    ngcc0.elementEnd();\n    ngcc0.elementStart(3, \"td\");\n    ngcc0.text(4);\n    ngcc0.pipe(5, \"localeCurrency\");\n    ngcc0.elementEnd();\n    ngcc0.elementStart(6, \"td\");\n    ngcc0.template(7, AssignProductsToChannelDialogComponent_tr_33_ng_template_7_Template, 2, 4, \"ng-template\", 8);\n    ngcc0.template(8, AssignProductsToChannelDialogComponent_tr_33_ng_template_8_Template, 1, 0, \"ng-template\", null, 14, ngcc0.templateRefExtractor);\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const row_r9 = ctx.$implicit;\n    const _r11 = ngcc0.reference(9);\n    const ctx_r4 = ngcc0.nextContext();\n    ngcc0.advance(2);\n    ngcc0.textInterpolate(row_r9.name);\n    ngcc0.advance(2);\n    ngcc0.textInterpolate(ngcc0.pipeBind2(5, 4, row_r9.price, ctx_r4.currentChannel == null ? null : ctx_r4.currentChannel.currencyCode));\n    ngcc0.advance(3);\n    ngcc0.property(\"ngIf\", ctx_r4.selectedChannel)(\"ngIfElse\", _r11);\n} }\nconst _c18 = function (a0) { return { channelCode: a0 }; };\nfunction AssignProductsToChannelDialogComponent_ng_template_35_ng_template_4_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.text(0);\n    ngcc0.pipe(1, \"translate\");\n} if (rf & 2) {\n    const ctx_r14 = ngcc0.nextContext(2);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind2(1, 1, \"catalog.assign-to-named-channel\", ngcc0.pureFunction1(4, _c18, ctx_r14.selectedChannel == null ? null : ctx_r14.selectedChannel.code)), \" \");\n} }\nfunction AssignProductsToChannelDialogComponent_ng_template_35_ng_template_5_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.text(0);\n    ngcc0.pipe(1, \"translate\");\n} if (rf & 2) {\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(1, 1, \"catalog.no-channel-selected\"), \" \");\n} }\nfunction AssignProductsToChannelDialogComponent_ng_template_35_Template(rf, ctx) { if (rf & 1) {\n    const _r18 = ngcc0.getCurrentView();\n    ngcc0.elementStart(0, \"button\", 15);\n    ngcc0.listener(\"click\", function AssignProductsToChannelDialogComponent_ng_template_35_Template_button_click_0_listener() { ngcc0.restoreView(_r18); const ctx_r17 = ngcc0.nextContext(); return ctx_r17.cancel(); });\n    ngcc0.text(1);\n    ngcc0.pipe(2, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.elementStart(3, \"button\", 16);\n    ngcc0.listener(\"click\", function AssignProductsToChannelDialogComponent_ng_template_35_Template_button_click_3_listener() { ngcc0.restoreView(_r18); const ctx_r19 = ngcc0.nextContext(); return ctx_r19.assign(); });\n    ngcc0.template(4, AssignProductsToChannelDialogComponent_ng_template_35_ng_template_4_Template, 2, 6, \"ng-template\", 8);\n    ngcc0.template(5, AssignProductsToChannelDialogComponent_ng_template_35_ng_template_5_Template, 2, 3, \"ng-template\", null, 9, ngcc0.templateRefExtractor);\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const _r15 = ngcc0.reference(6);\n    const ctx_r5 = ngcc0.nextContext();\n    ngcc0.advance(1);\n    ngcc0.textInterpolate(ngcc0.pipeBind1(2, 4, \"common.cancel\"));\n    ngcc0.advance(2);\n    ngcc0.property(\"disabled\", !ctx_r5.selectedChannel);\n    ngcc0.advance(1);\n    ngcc0.property(\"ngIf\", ctx_r5.selectedChannel)(\"ngIfElse\", _r15);\n} }\nconst _c19 = function () { return [\"product\", \"enabled\"]; };\nfunction ProductDetailComponent_clr_toggle_wrapper_5_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementStart(0, \"clr-toggle-wrapper\");\n    ngcc0.element(1, \"input\", 8);\n    ngcc0.elementStart(2, \"label\");\n    ngcc0.text(3);\n    ngcc0.pipe(4, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const ctx_r0 = ngcc0.nextContext();\n    ngcc0.advance(1);\n    ngcc0.property(\"formControl\", ctx_r0.detailForm.get(ngcc0.pureFunction0(4, _c19)));\n    ngcc0.advance(2);\n    ngcc0.textInterpolate(ngcc0.pipeBind1(4, 2, \"common.enabled\"));\n} }\nfunction ProductDetailComponent_button_12_Template(rf, ctx) { if (rf & 1) {\n    const _r6 = ngcc0.getCurrentView();\n    ngcc0.elementStart(0, \"button\", 9);\n    ngcc0.listener(\"click\", function ProductDetailComponent_button_12_Template_button_click_0_listener() { ngcc0.restoreView(_r6); const ctx_r5 = ngcc0.nextContext(); return ctx_r5.create(); });\n    ngcc0.text(1);\n    ngcc0.pipe(2, \"translate\");\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const ctx_r1 = ngcc0.nextContext();\n    ngcc0.property(\"disabled\", ctx_r1.detailForm.invalid || ctx_r1.detailForm.pristine || !ctx_r1.variantsToCreateAreValid());\n    ngcc0.advance(1);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(2, 2, \"common.create\"), \" \");\n} }\nfunction ProductDetailComponent_ng_template_14_button_0_Template(rf, ctx) { if (rf & 1) {\n    const _r9 = ngcc0.getCurrentView();\n    ngcc0.elementStart(0, \"button\", 9);\n    ngcc0.listener(\"click\", function ProductDetailComponent_ng_template_14_button_0_Template_button_click_0_listener() { ngcc0.restoreView(_r9); const ctx_r8 = ngcc0.nextContext(2); return ctx_r8.save(); });\n    ngcc0.text(1);\n    ngcc0.pipe(2, \"translate\");\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const ctx_r7 = ngcc0.nextContext(2);\n    ngcc0.property(\"disabled\", (ctx_r7.detailForm.invalid || ctx_r7.detailForm.pristine) && !ctx_r7.assetsChanged() && !ctx_r7.variantAssetsChanged());\n    ngcc0.advance(1);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(2, 2, \"common.update\"), \" \");\n} }\nconst _c20 = function () { return [\"UpdateCatalog\", \"UpdateProduct\"]; };\nfunction ProductDetailComponent_ng_template_14_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.template(0, ProductDetailComponent_ng_template_14_button_0_Template, 3, 4, \"button\", 10);\n} if (rf & 2) {\n    ngcc0.property(\"vdrIfPermissions\", ngcc0.pureFunction0(1, _c20));\n} }\nfunction ProductDetailComponent_form_16_clr_tab_content_7_ng_container_4_ng_container_1_vdr_form_item_1_ng_container_3_vdr_chip_1_Template(rf, ctx) { if (rf & 1) {\n    const _r25 = ngcc0.getCurrentView();\n    ngcc0.elementStart(0, \"vdr-chip\", 41);\n    ngcc0.listener(\"iconClick\", function ProductDetailComponent_form_16_clr_tab_content_7_ng_container_4_ng_container_1_vdr_form_item_1_ng_container_3_vdr_chip_1_Template_vdr_chip_iconClick_0_listener() { ngcc0.restoreView(_r25); const channel_r21 = ngcc0.nextContext().$implicit; const ctx_r23 = ngcc0.nextContext(6); return ctx_r23.removeFromChannel(channel_r21.id); });\n    ngcc0.element(1, \"vdr-channel-badge\", 42);\n    ngcc0.text(2);\n    ngcc0.pipe(3, \"channelCodeToLabel\");\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const channel_r21 = ngcc0.nextContext().$implicit;\n    ngcc0.advance(1);\n    ngcc0.property(\"channelCode\", channel_r21.code);\n    ngcc0.advance(1);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(3, 2, channel_r21.code), \" \");\n} }\nfunction ProductDetailComponent_form_16_clr_tab_content_7_ng_container_4_ng_container_1_vdr_form_item_1_ng_container_3_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementContainerStart(0);\n    ngcc0.template(1, ProductDetailComponent_form_16_clr_tab_content_7_ng_container_4_ng_container_1_vdr_form_item_1_ng_container_3_vdr_chip_1_Template, 4, 4, \"vdr-chip\", 40);\n    ngcc0.elementContainerEnd();\n} if (rf & 2) {\n    const channel_r21 = ctx.$implicit;\n    const ctx_r20 = ngcc0.nextContext(6);\n    ngcc0.advance(1);\n    ngcc0.property(\"ngIf\", !ctx_r20.isDefaultChannel(channel_r21.code));\n} }\nfunction ProductDetailComponent_form_16_clr_tab_content_7_ng_container_4_ng_container_1_vdr_form_item_1_Template(rf, ctx) { if (rf & 1) {\n    const _r28 = ngcc0.getCurrentView();\n    ngcc0.elementStart(0, \"vdr-form-item\", 35);\n    ngcc0.pipe(1, \"translate\");\n    ngcc0.elementStart(2, \"div\", 36);\n    ngcc0.template(3, ProductDetailComponent_form_16_clr_tab_content_7_ng_container_4_ng_container_1_vdr_form_item_1_ng_container_3_Template, 2, 1, \"ng-container\", 37);\n    ngcc0.pipe(4, \"async\");\n    ngcc0.elementStart(5, \"button\", 38);\n    ngcc0.listener(\"click\", function ProductDetailComponent_form_16_clr_tab_content_7_ng_container_4_ng_container_1_vdr_form_item_1_Template_button_click_5_listener() { ngcc0.restoreView(_r28); const ctx_r27 = ngcc0.nextContext(5); return ctx_r27.assignToChannel(); });\n    ngcc0.element(6, \"clr-icon\", 39);\n    ngcc0.text(7);\n    ngcc0.pipe(8, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const ctx_r19 = ngcc0.nextContext(5);\n    ngcc0.property(\"label\", ngcc0.pipeBind1(1, 3, \"common.channels\"));\n    ngcc0.advance(3);\n    ngcc0.property(\"ngForOf\", ngcc0.pipeBind1(4, 5, ctx_r19.productChannels$));\n    ngcc0.advance(4);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(8, 7, \"catalog.assign-to-channel\"), \" \");\n} }\nfunction ProductDetailComponent_form_16_clr_tab_content_7_ng_container_4_ng_container_1_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementContainerStart(0);\n    ngcc0.template(1, ProductDetailComponent_form_16_clr_tab_content_7_ng_container_4_ng_container_1_vdr_form_item_1_Template, 9, 9, \"vdr-form-item\", 34);\n    ngcc0.elementContainerEnd();\n} }\nfunction ProductDetailComponent_form_16_clr_tab_content_7_ng_container_4_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementContainerStart(0);\n    ngcc0.template(1, ProductDetailComponent_form_16_clr_tab_content_7_ng_container_4_ng_container_1_Template, 2, 0, \"ng-container\", 33);\n    ngcc0.elementContainerEnd();\n} }\nconst _c21 = function () { return [\"product\", \"customFields\"]; };\nfunction ProductDetailComponent_form_16_clr_tab_content_7_section_25_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementStart(0, \"section\", 43);\n    ngcc0.elementStart(1, \"label\");\n    ngcc0.text(2);\n    ngcc0.pipe(3, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.element(4, \"vdr-tabbed-custom-fields\", 44);\n    ngcc0.pipe(5, \"hasPermission\");\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const ctx_r14 = ngcc0.nextContext(3);\n    ngcc0.advance(2);\n    ngcc0.textInterpolate(ngcc0.pipeBind1(3, 4, \"common.custom-fields\"));\n    ngcc0.advance(2);\n    ngcc0.property(\"customFields\", ctx_r14.customFields)(\"customFieldsFormGroup\", ctx_r14.detailForm.get(ngcc0.pureFunction0(8, _c21)))(\"readonly\", !ngcc0.pipeBind1(5, 6, ngcc0.pureFunction0(9, _c20)));\n} }\nfunction ProductDetailComponent_form_16_clr_tab_content_7_vdr_facet_value_chip_30_Template(rf, ctx) { if (rf & 1) {\n    const _r31 = ngcc0.getCurrentView();\n    ngcc0.elementStart(0, \"vdr-facet-value-chip\", 45);\n    ngcc0.listener(\"remove\", function ProductDetailComponent_form_16_clr_tab_content_7_vdr_facet_value_chip_30_Template_vdr_facet_value_chip_remove_0_listener() { const restoredCtx = ngcc0.restoreView(_r31); const facetValue_r29 = restoredCtx.$implicit; const ctx_r30 = ngcc0.nextContext(3); return ctx_r30.removeProductFacetValue(facetValue_r29.id); });\n    ngcc0.pipe(1, \"hasPermission\");\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const facetValue_r29 = ctx.$implicit;\n    ngcc0.property(\"facetValue\", facetValue_r29)(\"removable\", ngcc0.pipeBind1(1, 2, ngcc0.pureFunction0(4, _c20)));\n} }\nfunction ProductDetailComponent_form_16_clr_tab_content_7_button_32_Template(rf, ctx) { if (rf & 1) {\n    const _r33 = ngcc0.getCurrentView();\n    ngcc0.elementStart(0, \"button\", 46);\n    ngcc0.listener(\"click\", function ProductDetailComponent_form_16_clr_tab_content_7_button_32_Template_button_click_0_listener() { ngcc0.restoreView(_r33); const ctx_r32 = ngcc0.nextContext(3); return ctx_r32.selectProductFacetValue(); });\n    ngcc0.element(1, \"clr-icon\", 47);\n    ngcc0.text(2);\n    ngcc0.pipe(3, \"translate\");\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    ngcc0.advance(2);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(3, 1, \"catalog.add-facets\"), \" \");\n} }\nfunction ProductDetailComponent_form_16_clr_tab_content_7_div_33_Template(rf, ctx) { if (rf & 1) {\n    const _r35 = ngcc0.getCurrentView();\n    ngcc0.elementStart(0, \"div\");\n    ngcc0.elementStart(1, \"h4\");\n    ngcc0.text(2);\n    ngcc0.pipe(3, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.elementStart(4, \"vdr-generate-product-variants\", 48);\n    ngcc0.listener(\"variantsChange\", function ProductDetailComponent_form_16_clr_tab_content_7_div_33_Template_vdr_generate_product_variants_variantsChange_4_listener($event) { ngcc0.restoreView(_r35); const ctx_r34 = ngcc0.nextContext(3); return ctx_r34.createVariantsConfig = $event; });\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    ngcc0.advance(2);\n    ngcc0.textInterpolate(ngcc0.pipeBind1(3, 1, \"catalog.product-variants\"));\n} }\nconst _c22 = function () { return [\"product\", \"name\"]; };\nfunction ProductDetailComponent_form_16_clr_tab_content_7_Template(rf, ctx) { if (rf & 1) {\n    const _r37 = ngcc0.getCurrentView();\n    ngcc0.elementStart(0, \"clr-tab-content\");\n    ngcc0.elementStart(1, \"div\", 16);\n    ngcc0.elementStart(2, \"div\", 17);\n    ngcc0.elementStart(3, \"section\", 18);\n    ngcc0.template(4, ProductDetailComponent_form_16_clr_tab_content_7_ng_container_4_Template, 2, 0, \"ng-container\", 15);\n    ngcc0.pipe(5, \"async\");\n    ngcc0.elementStart(6, \"vdr-form-field\", 19);\n    ngcc0.pipe(7, \"translate\");\n    ngcc0.elementStart(8, \"input\", 20);\n    ngcc0.listener(\"input\", function ProductDetailComponent_form_16_clr_tab_content_7_Template_input_input_8_listener($event) { ngcc0.restoreView(_r37); const ctx_r36 = ngcc0.nextContext(2); return ctx_r36.updateSlug($event.target.value); });\n    ngcc0.pipe(9, \"hasPermission\");\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementStart(10, \"div\", 21);\n    ngcc0.pipe(11, \"async\");\n    ngcc0.elementStart(12, \"clr-checkbox-wrapper\");\n    ngcc0.element(13, \"input\", 22);\n    ngcc0.elementStart(14, \"label\");\n    ngcc0.text(15);\n    ngcc0.pipe(16, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementStart(17, \"vdr-form-field\", 23);\n    ngcc0.pipe(18, \"translate\");\n    ngcc0.pipe(19, \"translate\");\n    ngcc0.element(20, \"input\", 24);\n    ngcc0.pipe(21, \"hasPermission\");\n    ngcc0.elementEnd();\n    ngcc0.element(22, \"vdr-rich-text-editor\", 25);\n    ngcc0.pipe(23, \"hasPermission\");\n    ngcc0.pipe(24, \"translate\");\n    ngcc0.template(25, ProductDetailComponent_form_16_clr_tab_content_7_section_25_Template, 6, 10, \"section\", 26);\n    ngcc0.element(26, \"vdr-custom-detail-component-host\", 27);\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementStart(27, \"div\", 28);\n    ngcc0.elementStart(28, \"vdr-assets\", 29);\n    ngcc0.listener(\"change\", function ProductDetailComponent_form_16_clr_tab_content_7_Template_vdr_assets_change_28_listener($event) { ngcc0.restoreView(_r37); const ctx_r38 = ngcc0.nextContext(2); return ctx_r38.assetChanges = $event; });\n    ngcc0.elementEnd();\n    ngcc0.elementStart(29, \"div\", 30);\n    ngcc0.template(30, ProductDetailComponent_form_16_clr_tab_content_7_vdr_facet_value_chip_30_Template, 2, 5, \"vdr-facet-value-chip\", 31);\n    ngcc0.pipe(31, \"async\");\n    ngcc0.template(32, ProductDetailComponent_form_16_clr_tab_content_7_button_32_Template, 4, 3, \"button\", 32);\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.template(33, ProductDetailComponent_form_16_clr_tab_content_7_div_33_Template, 5, 3, \"div\", 15);\n    ngcc0.pipe(34, \"async\");\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const product_r10 = ngcc0.nextContext().ngIf;\n    const ctx_r11 = ngcc0.nextContext();\n    let tmp_3_0;\n    ngcc0.advance(4);\n    ngcc0.property(\"ngIf\", !ngcc0.pipeBind1(5, 20, ctx_r11.isNew$));\n    ngcc0.advance(2);\n    ngcc0.property(\"label\", ngcc0.pipeBind1(7, 22, \"catalog.product-name\"));\n    ngcc0.advance(2);\n    ngcc0.property(\"readonly\", !ngcc0.pipeBind1(9, 24, ngcc0.pureFunction0(44, _c20)));\n    ngcc0.advance(2);\n    ngcc0.classProp(\"visible\", ngcc0.pipeBind1(11, 26, ctx_r11.isNew$) === false && ((tmp_3_0 = ctx_r11.detailForm.get(ngcc0.pureFunction0(45, _c22))) == null ? null : tmp_3_0.dirty));\n    ngcc0.advance(5);\n    ngcc0.textInterpolate(ngcc0.pipeBind1(16, 28, \"catalog.auto-update-product-variant-name\"));\n    ngcc0.advance(2);\n    ngcc0.property(\"label\", ngcc0.pipeBind1(18, 30, \"catalog.slug\"))(\"errors\", ngcc0.pureFunction1(46, _c9, ngcc0.pipeBind1(19, 32, \"catalog.slug-pattern-error\")));\n    ngcc0.advance(3);\n    ngcc0.property(\"readonly\", !ngcc0.pipeBind1(21, 34, ngcc0.pureFunction0(48, _c20)));\n    ngcc0.advance(2);\n    ngcc0.property(\"readonly\", !ngcc0.pipeBind1(23, 36, ngcc0.pureFunction0(49, _c20)))(\"label\", ngcc0.pipeBind1(24, 38, \"common.description\"));\n    ngcc0.advance(3);\n    ngcc0.property(\"ngIf\", ctx_r11.customFields.length);\n    ngcc0.advance(1);\n    ngcc0.property(\"entity$\", ctx_r11.entity$)(\"detailForm\", ctx_r11.detailForm);\n    ngcc0.advance(2);\n    ngcc0.property(\"assets\", ctx_r11.assetChanges.assets || product_r10.assets)(\"featuredAsset\", ctx_r11.assetChanges.featuredAsset || product_r10.featuredAsset)(\"updatePermissions\", ctx_r11.updatePermissions);\n    ngcc0.advance(2);\n    ngcc0.property(\"ngForOf\", ngcc0.pipeBind1(31, 40, ctx_r11.facetValues$));\n    ngcc0.advance(2);\n    ngcc0.property(\"vdrIfPermissions\", ngcc0.pureFunction0(50, _c20));\n    ngcc0.advance(1);\n    ngcc0.property(\"ngIf\", ngcc0.pipeBind1(34, 42, ctx_r11.isNew$));\n} }\nconst _c23 = function () { return [\"./\", \"manage-variants\"]; };\nfunction ProductDetailComponent_form_16_clr_tab_9_clr_tab_content_4_a_20_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementStart(0, \"a\", 66);\n    ngcc0.element(1, \"clr-icon\", 67);\n    ngcc0.text(2);\n    ngcc0.pipe(3, \"translate\");\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    ngcc0.property(\"routerLink\", ngcc0.pureFunction0(4, _c23));\n    ngcc0.advance(2);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(3, 2, \"catalog.manage-variants\"), \" \");\n} }\nfunction ProductDetailComponent_form_16_clr_tab_9_clr_tab_content_4_div_21_Template(rf, ctx) { if (rf & 1) {\n    const _r47 = ngcc0.getCurrentView();\n    ngcc0.elementStart(0, \"div\", 68);\n    ngcc0.elementStart(1, \"vdr-items-per-page-controls\", 69);\n    ngcc0.listener(\"itemsPerPageChange\", function ProductDetailComponent_form_16_clr_tab_9_clr_tab_content_4_div_21_Template_vdr_items_per_page_controls_itemsPerPageChange_1_listener($event) { ngcc0.restoreView(_r47); const ctx_r46 = ngcc0.nextContext(4); return ctx_r46.setItemsPerPage($event); });\n    ngcc0.pipe(2, \"async\");\n    ngcc0.elementEnd();\n    ngcc0.elementStart(3, \"vdr-pagination-controls\", 70);\n    ngcc0.listener(\"pageChange\", function ProductDetailComponent_form_16_clr_tab_9_clr_tab_content_4_div_21_Template_vdr_pagination_controls_pageChange_3_listener($event) { ngcc0.restoreView(_r47); const ctx_r48 = ngcc0.nextContext(4); return ctx_r48.setPage($event); });\n    ngcc0.pipe(4, \"async\");\n    ngcc0.pipe(5, \"async\");\n    ngcc0.pipe(6, \"async\");\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const ctx_r42 = ngcc0.nextContext(4);\n    let tmp_1_0;\n    ngcc0.advance(1);\n    ngcc0.property(\"itemsPerPage\", ngcc0.pipeBind1(2, 4, ctx_r42.itemsPerPage$));\n    ngcc0.advance(2);\n    ngcc0.property(\"id\", (tmp_1_0 = ngcc0.pipeBind1(4, 6, ctx_r42.paginationConfig$)) == null ? null : tmp_1_0.id)(\"currentPage\", ngcc0.pipeBind1(5, 8, ctx_r42.currentPage$))(\"itemsPerPage\", ngcc0.pipeBind1(6, 10, ctx_r42.itemsPerPage$));\n} }\nfunction ProductDetailComponent_form_16_clr_tab_9_clr_tab_content_4_vdr_product_variants_table_23_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.element(0, \"vdr-product-variants-table\", 71);\n    ngcc0.pipe(1, \"async\");\n    ngcc0.pipe(2, \"async\");\n    ngcc0.pipe(3, \"async\");\n} if (rf & 2) {\n    const product_r10 = ngcc0.nextContext(3).ngIf;\n    const ctx_r43 = ngcc0.nextContext();\n    ngcc0.property(\"variants\", ngcc0.pipeBind1(1, 6, ctx_r43.variants$))(\"paginationConfig\", ngcc0.pipeBind1(2, 8, ctx_r43.paginationConfig$))(\"optionGroups\", product_r10.optionGroups)(\"channelPriceIncludesTax\", ngcc0.pipeBind1(3, 10, ctx_r43.channelPriceIncludesTax$))(\"productVariantsFormArray\", ctx_r43.detailForm.get(\"variants\"))(\"pendingAssetChanges\", ctx_r43.variantAssetChanges);\n} }\nfunction ProductDetailComponent_form_16_clr_tab_9_clr_tab_content_4_vdr_product_variants_list_24_Template(rf, ctx) { if (rf & 1) {\n    const _r51 = ngcc0.getCurrentView();\n    ngcc0.elementStart(0, \"vdr-product-variants-list\", 72);\n    ngcc0.listener(\"assignToChannel\", function ProductDetailComponent_form_16_clr_tab_9_clr_tab_content_4_vdr_product_variants_list_24_Template_vdr_product_variants_list_assignToChannel_0_listener($event) { ngcc0.restoreView(_r51); const ctx_r50 = ngcc0.nextContext(4); return ctx_r50.assignVariantToChannel($event); })(\"removeFromChannel\", function ProductDetailComponent_form_16_clr_tab_9_clr_tab_content_4_vdr_product_variants_list_24_Template_vdr_product_variants_list_removeFromChannel_0_listener($event) { ngcc0.restoreView(_r51); const ctx_r52 = ngcc0.nextContext(4); return ctx_r52.removeVariantFromChannel($event); })(\"assetChange\", function ProductDetailComponent_form_16_clr_tab_9_clr_tab_content_4_vdr_product_variants_list_24_Template_vdr_product_variants_list_assetChange_0_listener($event) { ngcc0.restoreView(_r51); const ctx_r53 = ngcc0.nextContext(4); return ctx_r53.variantAssetChange($event); })(\"updateProductOption\", function ProductDetailComponent_form_16_clr_tab_9_clr_tab_content_4_vdr_product_variants_list_24_Template_vdr_product_variants_list_updateProductOption_0_listener($event) { ngcc0.restoreView(_r51); const ctx_r54 = ngcc0.nextContext(4); return ctx_r54.updateProductOption($event); })(\"selectionChange\", function ProductDetailComponent_form_16_clr_tab_9_clr_tab_content_4_vdr_product_variants_list_24_Template_vdr_product_variants_list_selectionChange_0_listener($event) { ngcc0.restoreView(_r51); const ctx_r55 = ngcc0.nextContext(4); return ctx_r55.selectedVariantIds = $event; })(\"selectFacetValueClick\", function ProductDetailComponent_form_16_clr_tab_9_clr_tab_content_4_vdr_product_variants_list_24_Template_vdr_product_variants_list_selectFacetValueClick_0_listener($event) { ngcc0.restoreView(_r51); const ctx_r56 = ngcc0.nextContext(4); return ctx_r56.selectVariantFacetValue($event); });\n    ngcc0.pipe(1, \"async\");\n    ngcc0.pipe(2, \"async\");\n    ngcc0.pipe(3, \"async\");\n    ngcc0.pipe(4, \"async\");\n    ngcc0.pipe(5, \"async\");\n    ngcc0.pipe(6, \"async\");\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const product_r10 = ngcc0.nextContext(3).ngIf;\n    const ctx_r44 = ngcc0.nextContext();\n    ngcc0.property(\"variants\", ngcc0.pipeBind1(1, 11, ctx_r44.variants$))(\"paginationConfig\", ngcc0.pipeBind1(2, 13, ctx_r44.paginationConfig$))(\"channelPriceIncludesTax\", ngcc0.pipeBind1(3, 15, ctx_r44.channelPriceIncludesTax$))(\"facets\", ngcc0.pipeBind1(4, 17, ctx_r44.facets$))(\"optionGroups\", product_r10.optionGroups)(\"productVariantsFormArray\", ctx_r44.detailForm.get(\"variants\"))(\"taxCategories\", ngcc0.pipeBind1(5, 19, ctx_r44.taxCategories$))(\"customFields\", ctx_r44.customVariantFields)(\"customOptionFields\", ctx_r44.customOptionFields)(\"activeLanguage\", ngcc0.pipeBind1(6, 21, ctx_r44.languageCode$))(\"pendingAssetChanges\", ctx_r44.variantAssetChanges);\n} }\nfunction ProductDetailComponent_form_16_clr_tab_9_clr_tab_content_4_div_25_Template(rf, ctx) { if (rf & 1) {\n    const _r59 = ngcc0.getCurrentView();\n    ngcc0.elementStart(0, \"div\", 68);\n    ngcc0.elementStart(1, \"vdr-items-per-page-controls\", 69);\n    ngcc0.listener(\"itemsPerPageChange\", function ProductDetailComponent_form_16_clr_tab_9_clr_tab_content_4_div_25_Template_vdr_items_per_page_controls_itemsPerPageChange_1_listener($event) { ngcc0.restoreView(_r59); const ctx_r58 = ngcc0.nextContext(4); return ctx_r58.setItemsPerPage($event); });\n    ngcc0.pipe(2, \"async\");\n    ngcc0.elementEnd();\n    ngcc0.elementStart(3, \"vdr-pagination-controls\", 70);\n    ngcc0.listener(\"pageChange\", function ProductDetailComponent_form_16_clr_tab_9_clr_tab_content_4_div_25_Template_vdr_pagination_controls_pageChange_3_listener($event) { ngcc0.restoreView(_r59); const ctx_r60 = ngcc0.nextContext(4); return ctx_r60.setPage($event); });\n    ngcc0.pipe(4, \"async\");\n    ngcc0.pipe(5, \"async\");\n    ngcc0.pipe(6, \"async\");\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const ctx_r45 = ngcc0.nextContext(4);\n    let tmp_1_0;\n    ngcc0.advance(1);\n    ngcc0.property(\"itemsPerPage\", ngcc0.pipeBind1(2, 4, ctx_r45.itemsPerPage$));\n    ngcc0.advance(2);\n    ngcc0.property(\"id\", (tmp_1_0 = ngcc0.pipeBind1(4, 6, ctx_r45.paginationConfig$)) == null ? null : tmp_1_0.id)(\"currentPage\", ngcc0.pipeBind1(5, 8, ctx_r45.currentPage$))(\"itemsPerPage\", ngcc0.pipeBind1(6, 10, ctx_r45.itemsPerPage$));\n} }\nfunction ProductDetailComponent_form_16_clr_tab_9_clr_tab_content_4_Template(rf, ctx) { if (rf & 1) {\n    const _r62 = ngcc0.getCurrentView();\n    ngcc0.elementStart(0, \"clr-tab-content\");\n    ngcc0.elementStart(1, \"section\", 49);\n    ngcc0.elementStart(2, \"div\", 50);\n    ngcc0.elementStart(3, \"div\", 51);\n    ngcc0.elementStart(4, \"button\", 52);\n    ngcc0.listener(\"click\", function ProductDetailComponent_form_16_clr_tab_9_clr_tab_content_4_Template_button_click_4_listener() { ngcc0.restoreView(_r62); const ctx_r61 = ngcc0.nextContext(3); return ctx_r61.variantDisplayMode = \"card\"; });\n    ngcc0.element(5, \"clr-icon\", 53);\n    ngcc0.elementStart(6, \"span\", 54);\n    ngcc0.text(7);\n    ngcc0.pipe(8, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementStart(9, \"button\", 55);\n    ngcc0.listener(\"click\", function ProductDetailComponent_form_16_clr_tab_9_clr_tab_content_4_Template_button_click_9_listener() { ngcc0.restoreView(_r62); const ctx_r63 = ngcc0.nextContext(3); return ctx_r63.variantDisplayMode = \"table\"; });\n    ngcc0.element(10, \"clr-icon\", 56);\n    ngcc0.elementStart(11, \"span\", 54);\n    ngcc0.text(12);\n    ngcc0.pipe(13, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementStart(14, \"div\", 57);\n    ngcc0.element(15, \"input\", 58);\n    ngcc0.pipe(16, \"translate\");\n    ngcc0.elementStart(17, \"button\", 59);\n    ngcc0.listener(\"click\", function ProductDetailComponent_form_16_clr_tab_9_clr_tab_content_4_Template_button_click_17_listener() { ngcc0.restoreView(_r62); const ctx_r64 = ngcc0.nextContext(3); return ctx_r64.filterInput.setValue(\"\"); });\n    ngcc0.element(18, \"clr-icon\", 60);\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.element(19, \"div\", 61);\n    ngcc0.template(20, ProductDetailComponent_form_16_clr_tab_9_clr_tab_content_4_a_20_Template, 4, 5, \"a\", 62);\n    ngcc0.elementEnd();\n    ngcc0.template(21, ProductDetailComponent_form_16_clr_tab_9_clr_tab_content_4_div_21_Template, 7, 12, \"div\", 63);\n    ngcc0.pipe(22, \"async\");\n    ngcc0.template(23, ProductDetailComponent_form_16_clr_tab_9_clr_tab_content_4_vdr_product_variants_table_23_Template, 4, 12, \"vdr-product-variants-table\", 64);\n    ngcc0.template(24, ProductDetailComponent_form_16_clr_tab_9_clr_tab_content_4_vdr_product_variants_list_24_Template, 7, 23, \"vdr-product-variants-list\", 65);\n    ngcc0.elementEnd();\n    ngcc0.template(25, ProductDetailComponent_form_16_clr_tab_9_clr_tab_content_4_div_25_Template, 7, 12, \"div\", 63);\n    ngcc0.pipe(26, \"async\");\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const ctx_r40 = ngcc0.nextContext(3);\n    let tmp_7_0;\n    let tmp_10_0;\n    ngcc0.advance(4);\n    ngcc0.classProp(\"btn-primary\", ctx_r40.variantDisplayMode === \"card\");\n    ngcc0.advance(3);\n    ngcc0.textInterpolate(ngcc0.pipeBind1(8, 13, \"catalog.display-variant-cards\"));\n    ngcc0.advance(2);\n    ngcc0.classProp(\"btn-primary\", ctx_r40.variantDisplayMode === \"table\");\n    ngcc0.advance(3);\n    ngcc0.textInterpolate(ngcc0.pipeBind1(13, 15, \"catalog.display-variant-table\"));\n    ngcc0.advance(3);\n    ngcc0.property(\"formControl\", ctx_r40.filterInput)(\"placeholder\", ngcc0.pipeBind1(16, 17, \"catalog.filter-by-name-or-sku\"));\n    ngcc0.advance(5);\n    ngcc0.property(\"vdrIfPermissions\", ngcc0.pureFunction0(23, _c20));\n    ngcc0.advance(1);\n    ngcc0.property(\"ngIf\", 10 < ((tmp_7_0 = ngcc0.pipeBind1(22, 19, ctx_r40.paginationConfig$)) == null ? null : tmp_7_0.totalItems));\n    ngcc0.advance(2);\n    ngcc0.property(\"ngIf\", ctx_r40.variantDisplayMode === \"table\");\n    ngcc0.advance(1);\n    ngcc0.property(\"ngIf\", ctx_r40.variantDisplayMode === \"card\");\n    ngcc0.advance(1);\n    ngcc0.property(\"ngIf\", 10 < ((tmp_10_0 = ngcc0.pipeBind1(26, 21, ctx_r40.paginationConfig$)) == null ? null : tmp_10_0.totalItems));\n} }\nfunction ProductDetailComponent_form_16_clr_tab_9_Template(rf, ctx) { if (rf & 1) {\n    const _r66 = ngcc0.getCurrentView();\n    ngcc0.elementStart(0, \"clr-tab\");\n    ngcc0.elementStart(1, \"button\", 13);\n    ngcc0.listener(\"click\", function ProductDetailComponent_form_16_clr_tab_9_Template_button_click_1_listener() { ngcc0.restoreView(_r66); const ctx_r65 = ngcc0.nextContext(2); return ctx_r65.navigateToTab(\"variants\"); });\n    ngcc0.text(2);\n    ngcc0.pipe(3, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.template(4, ProductDetailComponent_form_16_clr_tab_9_clr_tab_content_4_Template, 27, 24, \"clr-tab-content\", 14);\n    ngcc0.pipe(5, \"async\");\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const ctx_r12 = ngcc0.nextContext(2);\n    ngcc0.advance(2);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(3, 2, \"catalog.product-variants\"), \" \");\n    ngcc0.advance(2);\n    ngcc0.property(\"clrIfActive\", ngcc0.pipeBind1(5, 4, ctx_r12.activeTab$) === \"variants\");\n} }\nfunction ProductDetailComponent_form_16_Template(rf, ctx) { if (rf & 1) {\n    const _r68 = ngcc0.getCurrentView();\n    ngcc0.elementStart(0, \"form\", 11);\n    ngcc0.element(1, \"button\", 12);\n    ngcc0.elementStart(2, \"clr-tabs\");\n    ngcc0.elementStart(3, \"clr-tab\");\n    ngcc0.elementStart(4, \"button\", 13);\n    ngcc0.listener(\"click\", function ProductDetailComponent_form_16_Template_button_click_4_listener() { ngcc0.restoreView(_r68); const ctx_r67 = ngcc0.nextContext(); return ctx_r67.navigateToTab(\"details\"); });\n    ngcc0.text(5);\n    ngcc0.pipe(6, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.template(7, ProductDetailComponent_form_16_clr_tab_content_7_Template, 35, 51, \"clr-tab-content\", 14);\n    ngcc0.pipe(8, \"async\");\n    ngcc0.elementEnd();\n    ngcc0.template(9, ProductDetailComponent_form_16_clr_tab_9_Template, 6, 6, \"clr-tab\", 15);\n    ngcc0.pipe(10, \"async\");\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const ctx_r4 = ngcc0.nextContext();\n    ngcc0.property(\"formGroup\", ctx_r4.detailForm);\n    ngcc0.advance(5);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(6, 4, \"catalog.product-details\"), \" \");\n    ngcc0.advance(2);\n    ngcc0.property(\"clrIfActive\", ngcc0.pipeBind1(8, 6, ctx_r4.activeTab$) === \"details\");\n    ngcc0.advance(2);\n    ngcc0.property(\"ngIf\", !ngcc0.pipeBind1(10, 8, ctx_r4.isNew$));\n} }\nconst _c24 = [\"productSearchInputComponent\"];\nfunction ProductListComponent_vdr_status_badge_10_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.element(0, \"vdr-status-badge\", 20);\n} }\nfunction ProductListComponent_ng_container_15_Template(rf, ctx) { if (rf & 1) {\n    const _r6 = ngcc0.getCurrentView();\n    ngcc0.elementContainerStart(0);\n    ngcc0.elementStart(1, \"button\", 21);\n    ngcc0.listener(\"click\", function ProductListComponent_ng_container_15_Template_button_click_1_listener() { ngcc0.restoreView(_r6); const ctx_r5 = ngcc0.nextContext(); return ctx_r5.runPendingSearchIndexUpdates(); });\n    ngcc0.pipe(2, \"hasPermission\");\n    ngcc0.element(3, \"vdr-status-badge\", 20);\n    ngcc0.text(4);\n    ngcc0.pipe(5, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.element(6, \"div\", 22);\n    ngcc0.elementContainerEnd();\n} if (rf & 2) {\n    const ctx_r2 = ngcc0.nextContext();\n    ngcc0.advance(1);\n    ngcc0.property(\"disabled\", !ngcc0.pipeBind1(2, 2, ngcc0.pureFunction0(7, _c20)));\n    ngcc0.advance(3);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind2(5, 4, \"catalog.run-pending-search-index-updates\", ngcc0.pureFunction1(8, _c7, ctx_r2.pendingSearchIndexUpdates)), \" \");\n} }\nfunction ProductListComponent_a_31_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementStart(0, \"a\", 23);\n    ngcc0.element(1, \"clr-icon\", 24);\n    ngcc0.text(2);\n    ngcc0.pipe(3, \"translate\");\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    ngcc0.property(\"routerLink\", ngcc0.pureFunction0(4, _c10));\n    ngcc0.advance(2);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(3, 2, \"catalog.create-new-product\"), \" \");\n} }\nfunction ProductListComponent_ng_template_42_img_2_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.element(0, \"img\", 38);\n    ngcc0.pipe(1, \"assetPreview\");\n} if (rf & 2) {\n    const asset_r13 = ctx.ngIf;\n    ngcc0.property(\"src\", ngcc0.pipeBind2(1, 1, asset_r13, \"tiny\"), ngcc0.sanitizeUrl);\n} }\nfunction ProductListComponent_ng_template_42_ng_template_3_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementStart(0, \"div\", 39);\n    ngcc0.element(1, \"clr-icon\", 40);\n    ngcc0.elementEnd();\n} }\nfunction ProductListComponent_ng_template_42_div_8_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementStart(0, \"div\", 41);\n    ngcc0.text(1);\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const result_r7 = ngcc0.nextContext().item;\n    ngcc0.advance(1);\n    ngcc0.textInterpolate(result_r7.sku);\n} }\nfunction ProductListComponent_ng_template_42_vdr_chip_10_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementStart(0, \"vdr-chip\");\n    ngcc0.text(1);\n    ngcc0.pipe(2, \"translate\");\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    ngcc0.advance(1);\n    ngcc0.textInterpolate(ngcc0.pipeBind1(2, 1, \"common.disabled\"));\n} }\nconst _c25 = function () { return [\"DeleteCatalog\", \"DeleteProduct\"]; };\nfunction ProductListComponent_ng_template_42_Template(rf, ctx) { if (rf & 1) {\n    const _r16 = ngcc0.getCurrentView();\n    ngcc0.elementStart(0, \"td\", 25);\n    ngcc0.elementStart(1, \"div\", 26);\n    ngcc0.template(2, ProductListComponent_ng_template_42_img_2_Template, 2, 4, \"img\", 27);\n    ngcc0.template(3, ProductListComponent_ng_template_42_ng_template_3_Template, 2, 0, \"ng-template\", null, 28, ngcc0.templateRefExtractor);\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementStart(5, \"td\", 29);\n    ngcc0.elementStart(6, \"div\");\n    ngcc0.text(7);\n    ngcc0.elementEnd();\n    ngcc0.template(8, ProductListComponent_ng_template_42_div_8_Template, 2, 1, \"div\", 30);\n    ngcc0.elementEnd();\n    ngcc0.elementStart(9, \"td\", 31);\n    ngcc0.template(10, ProductListComponent_ng_template_42_vdr_chip_10_Template, 3, 3, \"vdr-chip\", 10);\n    ngcc0.elementEnd();\n    ngcc0.elementStart(11, \"td\", 32);\n    ngcc0.element(12, \"vdr-table-row-action\", 33);\n    ngcc0.pipe(13, \"translate\");\n    ngcc0.elementStart(14, \"vdr-dropdown\");\n    ngcc0.elementStart(15, \"button\", 34);\n    ngcc0.text(16);\n    ngcc0.pipe(17, \"translate\");\n    ngcc0.element(18, \"clr-icon\", 35);\n    ngcc0.elementEnd();\n    ngcc0.elementStart(19, \"vdr-dropdown-menu\", 8);\n    ngcc0.elementStart(20, \"button\", 36);\n    ngcc0.listener(\"click\", function ProductListComponent_ng_template_42_Template_button_click_20_listener() { const restoredCtx = ngcc0.restoreView(_r16); const result_r7 = restoredCtx.item; const ctx_r15 = ngcc0.nextContext(); return ctx_r15.deleteProduct(result_r7.productId); });\n    ngcc0.pipe(21, \"hasPermission\");\n    ngcc0.element(22, \"clr-icon\", 37);\n    ngcc0.text(23);\n    ngcc0.pipe(24, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const result_r7 = ctx.item;\n    const _r9 = ngcc0.reference(4);\n    const ctx_r4 = ngcc0.nextContext();\n    ngcc0.classProp(\"disabled\", !result_r7.enabled);\n    ngcc0.advance(2);\n    ngcc0.property(\"ngIf\", ctx_r4.groupByProduct ? result_r7.productAsset : result_r7.productVariantAsset || result_r7.productAsset)(\"ngIfElse\", _r9);\n    ngcc0.advance(3);\n    ngcc0.classProp(\"disabled\", !result_r7.enabled);\n    ngcc0.advance(2);\n    ngcc0.textInterpolate(ctx_r4.groupByProduct ? result_r7.productName : result_r7.productVariantName);\n    ngcc0.advance(1);\n    ngcc0.property(\"ngIf\", !ctx_r4.groupByProduct);\n    ngcc0.advance(1);\n    ngcc0.classProp(\"disabled\", !result_r7.enabled);\n    ngcc0.advance(1);\n    ngcc0.property(\"ngIf\", !result_r7.enabled);\n    ngcc0.advance(1);\n    ngcc0.classProp(\"disabled\", !result_r7.enabled);\n    ngcc0.advance(1);\n    ngcc0.property(\"label\", ngcc0.pipeBind1(13, 18, \"common.edit\"))(\"linkTo\", ngcc0.pureFunction1(26, _c15, result_r7.productId));\n    ngcc0.advance(4);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(17, 20, \"common.actions\"), \" \");\n    ngcc0.advance(4);\n    ngcc0.property(\"disabled\", !ngcc0.pipeBind1(21, 22, ngcc0.pureFunction0(28, _c25)));\n    ngcc0.advance(3);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(24, 24, \"common.delete\"), \" \");\n} }\nconst _c26 = function () { return [\"CreateCatalog\", \"CreateProduct\"]; };\nfunction ProductOptionsEditorComponent_button_13_Template(rf, ctx) { if (rf & 1) {\n    const _r3 = ngcc0.getCurrentView();\n    ngcc0.elementStart(0, \"button\", 6);\n    ngcc0.listener(\"click\", function ProductOptionsEditorComponent_button_13_Template_button_click_0_listener() { ngcc0.restoreView(_r3); const ctx_r2 = ngcc0.nextContext(); return ctx_r2.save(); });\n    ngcc0.text(1);\n    ngcc0.pipe(2, \"translate\");\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const ctx_r0 = ngcc0.nextContext();\n    ngcc0.property(\"disabled\", ctx_r0.detailForm.pristine || ctx_r0.detailForm.invalid);\n    ngcc0.advance(1);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(2, 2, \"common.update\"), \" \");\n} }\nfunction ProductOptionsEditorComponent_form_14_div_2_tr_27_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementStart(0, \"tr\", 22);\n    ngcc0.elementStart(1, \"td\", 23);\n    ngcc0.element(2, \"vdr-entity-info\", 13);\n    ngcc0.elementEnd();\n    ngcc0.elementStart(3, \"td\", 23);\n    ngcc0.element(4, \"input\", 24);\n    ngcc0.pipe(5, \"hasPermission\");\n    ngcc0.elementEnd();\n    ngcc0.elementStart(6, \"td\", 23);\n    ngcc0.element(7, \"input\", 25);\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const option_r9 = ctx.$implicit;\n    const i_r10 = ctx.index;\n    const ctx_r8 = ngcc0.nextContext(3);\n    ngcc0.property(\"formGroupName\", i_r10);\n    ngcc0.advance(2);\n    ngcc0.property(\"entity\", option_r9.value);\n    ngcc0.advance(2);\n    ngcc0.property(\"readonly\", !ngcc0.pipeBind1(5, 3, ctx_r8.updatePermission));\n} }\nfunction ProductOptionsEditorComponent_form_14_div_2_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementStart(0, \"div\", 10);\n    ngcc0.elementStart(1, \"section\", 11);\n    ngcc0.elementStart(2, \"div\", 12);\n    ngcc0.element(3, \"vdr-entity-info\", 13);\n    ngcc0.elementStart(4, \"div\", 14);\n    ngcc0.text(5);\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementStart(6, \"div\", 15);\n    ngcc0.elementStart(7, \"vdr-form-field\", 16);\n    ngcc0.pipe(8, \"translate\");\n    ngcc0.element(9, \"input\", 17);\n    ngcc0.pipe(10, \"hasPermission\");\n    ngcc0.elementEnd();\n    ngcc0.elementStart(11, \"vdr-form-field\", 18);\n    ngcc0.pipe(12, \"translate\");\n    ngcc0.element(13, \"input\", 19);\n    ngcc0.pipe(14, \"hasPermission\");\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementStart(15, \"section\", 15);\n    ngcc0.elementStart(16, \"table\", 20);\n    ngcc0.elementStart(17, \"thead\");\n    ngcc0.elementStart(18, \"tr\");\n    ngcc0.element(19, \"th\");\n    ngcc0.elementStart(20, \"th\");\n    ngcc0.text(21);\n    ngcc0.pipe(22, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.elementStart(23, \"th\");\n    ngcc0.text(24);\n    ngcc0.pipe(25, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementStart(26, \"tbody\");\n    ngcc0.template(27, ProductOptionsEditorComponent_form_14_div_2_tr_27_Template, 8, 5, \"tr\", 21);\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const optionGroup_r6 = ctx.$implicit;\n    const i_r7 = ctx.index;\n    const ctx_r5 = ngcc0.nextContext(2);\n    ngcc0.advance(1);\n    ngcc0.property(\"formArrayName\", i_r7);\n    ngcc0.advance(2);\n    ngcc0.property(\"entity\", optionGroup_r6.value);\n    ngcc0.advance(2);\n    ngcc0.textInterpolate(optionGroup_r6.value.code);\n    ngcc0.advance(2);\n    ngcc0.property(\"label\", ngcc0.pipeBind1(8, 12, \"common.name\"));\n    ngcc0.advance(2);\n    ngcc0.property(\"id\", \"name-\" + i_r7)(\"readonly\", !ngcc0.pipeBind1(10, 14, ctx_r5.updatePermission));\n    ngcc0.advance(2);\n    ngcc0.property(\"label\", ngcc0.pipeBind1(12, 16, \"common.code\"));\n    ngcc0.advance(2);\n    ngcc0.property(\"id\", \"code-\" + i_r7)(\"readonly\", !ngcc0.pipeBind1(14, 18, ctx_r5.updatePermission));\n    ngcc0.advance(8);\n    ngcc0.textInterpolate(ngcc0.pipeBind1(22, 20, \"common.name\"));\n    ngcc0.advance(3);\n    ngcc0.textInterpolate(ngcc0.pipeBind1(25, 22, \"common.code\"));\n    ngcc0.advance(3);\n    ngcc0.property(\"ngForOf\", ctx_r5.getOptions(optionGroup_r6));\n} }\nfunction ProductOptionsEditorComponent_form_14_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementStart(0, \"form\", 7);\n    ngcc0.elementStart(1, \"div\", 8);\n    ngcc0.template(2, ProductOptionsEditorComponent_form_14_div_2_Template, 28, 24, \"div\", 9);\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const ctx_r1 = ngcc0.nextContext();\n    ngcc0.property(\"formGroup\", ctx_r1.detailForm);\n    ngcc0.advance(2);\n    ngcc0.property(\"ngForOf\", ctx_r1.getOptionGroups());\n} }\nfunction ConfirmVariantDeletionDialogComponent_ng_template_0_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.text(0);\n    ngcc0.pipe(1, \"translate\");\n} if (rf & 2) {\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(1, 1, \"catalog.confirm-deletion-of-unused-variants-title\"), \"\\n\");\n} }\nfunction ConfirmVariantDeletionDialogComponent_li_4_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementStart(0, \"li\");\n    ngcc0.text(1);\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const variant_r3 = ctx.$implicit;\n    ngcc0.advance(1);\n    ngcc0.textInterpolate2(\"\", variant_r3.name, \" (\", variant_r3.sku, \")\");\n} }\nfunction ConfirmVariantDeletionDialogComponent_ng_template_5_Template(rf, ctx) { if (rf & 1) {\n    const _r5 = ngcc0.getCurrentView();\n    ngcc0.elementStart(0, \"button\", 3);\n    ngcc0.listener(\"click\", function ConfirmVariantDeletionDialogComponent_ng_template_5_Template_button_click_0_listener() { ngcc0.restoreView(_r5); const ctx_r4 = ngcc0.nextContext(); return ctx_r4.cancel(); });\n    ngcc0.text(1);\n    ngcc0.pipe(2, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.elementStart(3, \"button\", 4);\n    ngcc0.listener(\"click\", function ConfirmVariantDeletionDialogComponent_ng_template_5_Template_button_click_3_listener() { ngcc0.restoreView(_r5); const ctx_r6 = ngcc0.nextContext(); return ctx_r6.confirm(); });\n    ngcc0.text(4);\n    ngcc0.pipe(5, \"translate\");\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    ngcc0.advance(1);\n    ngcc0.textInterpolate(ngcc0.pipeBind1(2, 2, \"common.cancel\"));\n    ngcc0.advance(3);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(5, 4, \"common.confirm\"), \" \");\n} }\nfunction ProductVariantsEditorComponent_div_5_Template(rf, ctx) { if (rf & 1) {\n    const _r6 = ngcc0.getCurrentView();\n    ngcc0.elementStart(0, \"div\", 7);\n    ngcc0.elementStart(1, \"div\", 8);\n    ngcc0.elementStart(2, \"label\");\n    ngcc0.text(3);\n    ngcc0.pipe(4, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.elementStart(5, \"input\", 9);\n    ngcc0.listener(\"ngModelChange\", function ProductVariantsEditorComponent_div_5_Template_input_ngModelChange_5_listener($event) { const restoredCtx = ngcc0.restoreView(_r6); const group_r2 = restoredCtx.$implicit; return group_r2.name = $event; });\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementStart(6, \"div\", 10);\n    ngcc0.elementStart(7, \"label\");\n    ngcc0.text(8);\n    ngcc0.pipe(9, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.elementStart(10, \"vdr-option-value-input\", 11, 12);\n    ngcc0.listener(\"add\", function ProductVariantsEditorComponent_div_5_Template_vdr_option_value_input_add_10_listener($event) { const restoredCtx = ngcc0.restoreView(_r6); const i_r3 = restoredCtx.index; const ctx_r7 = ngcc0.nextContext(); return ctx_r7.addOption(i_r3, $event.name); })(\"remove\", function ProductVariantsEditorComponent_div_5_Template_vdr_option_value_input_remove_10_listener($event) { const restoredCtx = ngcc0.restoreView(_r6); const i_r3 = restoredCtx.index; const ctx_r8 = ngcc0.nextContext(); return ctx_r8.removeOption(i_r3, $event); });\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementStart(12, \"div\");\n    ngcc0.elementStart(13, \"button\", 13);\n    ngcc0.listener(\"click\", function ProductVariantsEditorComponent_div_5_Template_button_click_13_listener() { const restoredCtx = ngcc0.restoreView(_r6); const group_r2 = restoredCtx.$implicit; const ctx_r9 = ngcc0.nextContext(); return ctx_r9.removeOptionGroup(group_r2); });\n    ngcc0.element(14, \"clr-icon\", 14);\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const group_r2 = ctx.$implicit;\n    ngcc0.advance(3);\n    ngcc0.textInterpolate(ngcc0.pipeBind1(4, 8, \"catalog.option\"));\n    ngcc0.advance(2);\n    ngcc0.property(\"ngModel\", group_r2.name)(\"readonly\", !group_r2.isNew);\n    ngcc0.advance(3);\n    ngcc0.textInterpolate(ngcc0.pipeBind1(9, 10, \"catalog.option-values\"));\n    ngcc0.advance(2);\n    ngcc0.property(\"options\", group_r2.values)(\"groupName\", group_r2.name)(\"disabled\", group_r2.name === \"\");\n    ngcc0.advance(3);\n    ngcc0.property(\"disabled\", group_r2.locked);\n} }\nfunction ProductVariantsEditorComponent_tr_28_clr_checkbox_wrapper_2_Template(rf, ctx) { if (rf & 1) {\n    const _r21 = ngcc0.getCurrentView();\n    ngcc0.elementStart(0, \"clr-checkbox-wrapper\");\n    ngcc0.elementStart(1, \"input\", 18);\n    ngcc0.listener(\"ngModelChange\", function ProductVariantsEditorComponent_tr_28_clr_checkbox_wrapper_2_Template_input_ngModelChange_1_listener($event) { ngcc0.restoreView(_r21); const variant_r10 = ngcc0.nextContext().$implicit; return variant_r10.enabled = $event; })(\"ngModelChange\", function ProductVariantsEditorComponent_tr_28_clr_checkbox_wrapper_2_Template_input_ngModelChange_1_listener() { ngcc0.restoreView(_r21); const ctx_r22 = ngcc0.nextContext(2); return ctx_r22.formValueChanged = true; });\n    ngcc0.elementEnd();\n    ngcc0.elementStart(2, \"label\");\n    ngcc0.text(3);\n    ngcc0.pipe(4, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const variant_r10 = ngcc0.nextContext().$implicit;\n    ngcc0.advance(1);\n    ngcc0.property(\"ngModel\", variant_r10.enabled);\n    ngcc0.advance(2);\n    ngcc0.textInterpolate(ngcc0.pipeBind1(4, 2, \"common.create\"));\n} }\nfunction ProductVariantsEditorComponent_tr_28_clr_input_container_8_Template(rf, ctx) { if (rf & 1) {\n    const _r26 = ngcc0.getCurrentView();\n    ngcc0.elementStart(0, \"clr-input-container\");\n    ngcc0.elementStart(1, \"input\", 19);\n    ngcc0.listener(\"ngModelChange\", function ProductVariantsEditorComponent_tr_28_clr_input_container_8_Template_input_ngModelChange_1_listener($event) { ngcc0.restoreView(_r26); const variant_r10 = ngcc0.nextContext().$implicit; return variant_r10.sku = $event; })(\"ngModelChange\", function ProductVariantsEditorComponent_tr_28_clr_input_container_8_Template_input_ngModelChange_1_listener() { ngcc0.restoreView(_r26); const variant_r10 = ngcc0.nextContext().$implicit; const ctx_r27 = ngcc0.nextContext(); return ctx_r27.onFormChanged(variant_r10); });\n    ngcc0.pipe(2, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const variant_r10 = ngcc0.nextContext().$implicit;\n    ngcc0.advance(1);\n    ngcc0.property(\"ngModel\", variant_r10.sku)(\"placeholder\", ngcc0.pipeBind1(2, 2, \"catalog.sku\"));\n} }\nfunction ProductVariantsEditorComponent_tr_28_span_9_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementStart(0, \"span\");\n    ngcc0.text(1);\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const variant_r10 = ngcc0.nextContext().$implicit;\n    ngcc0.advance(1);\n    ngcc0.textInterpolate(variant_r10.sku);\n} }\nfunction ProductVariantsEditorComponent_tr_28_clr_input_container_12_Template(rf, ctx) { if (rf & 1) {\n    const _r33 = ngcc0.getCurrentView();\n    ngcc0.elementStart(0, \"clr-input-container\");\n    ngcc0.elementStart(1, \"vdr-currency-input\", 20);\n    ngcc0.listener(\"ngModelChange\", function ProductVariantsEditorComponent_tr_28_clr_input_container_12_Template_vdr_currency_input_ngModelChange_1_listener($event) { ngcc0.restoreView(_r33); const variant_r10 = ngcc0.nextContext().$implicit; return variant_r10.price = $event; })(\"ngModelChange\", function ProductVariantsEditorComponent_tr_28_clr_input_container_12_Template_vdr_currency_input_ngModelChange_1_listener() { ngcc0.restoreView(_r33); const variant_r10 = ngcc0.nextContext().$implicit; const ctx_r34 = ngcc0.nextContext(); return ctx_r34.onFormChanged(variant_r10); });\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const variant_r10 = ngcc0.nextContext().$implicit;\n    const ctx_r14 = ngcc0.nextContext();\n    ngcc0.advance(1);\n    ngcc0.property(\"ngModel\", variant_r10.price)(\"currencyCode\", ctx_r14.currencyCode);\n} }\nfunction ProductVariantsEditorComponent_tr_28_span_13_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementStart(0, \"span\");\n    ngcc0.text(1);\n    ngcc0.pipe(2, \"localeCurrency\");\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const variant_r10 = ngcc0.nextContext().$implicit;\n    const ctx_r15 = ngcc0.nextContext();\n    ngcc0.advance(1);\n    ngcc0.textInterpolate(ngcc0.pipeBind2(2, 1, variant_r10.price, ctx_r15.currencyCode));\n} }\nfunction ProductVariantsEditorComponent_tr_28_clr_input_container_16_Template(rf, ctx) { if (rf & 1) {\n    const _r40 = ngcc0.getCurrentView();\n    ngcc0.elementStart(0, \"clr-input-container\");\n    ngcc0.elementStart(1, \"input\", 21);\n    ngcc0.listener(\"ngModelChange\", function ProductVariantsEditorComponent_tr_28_clr_input_container_16_Template_input_ngModelChange_1_listener($event) { ngcc0.restoreView(_r40); const variant_r10 = ngcc0.nextContext().$implicit; return variant_r10.stock = $event; })(\"ngModelChange\", function ProductVariantsEditorComponent_tr_28_clr_input_container_16_Template_input_ngModelChange_1_listener() { ngcc0.restoreView(_r40); const variant_r10 = ngcc0.nextContext().$implicit; const ctx_r41 = ngcc0.nextContext(); return ctx_r41.onFormChanged(variant_r10); });\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const variant_r10 = ngcc0.nextContext().$implicit;\n    ngcc0.advance(1);\n    ngcc0.property(\"ngModel\", variant_r10.stock);\n} }\nfunction ProductVariantsEditorComponent_tr_28_span_17_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementStart(0, \"span\");\n    ngcc0.text(1);\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const variant_r10 = ngcc0.nextContext().$implicit;\n    ngcc0.advance(1);\n    ngcc0.textInterpolate(variant_r10.stock);\n} }\nfunction ProductVariantsEditorComponent_tr_28_vdr_dropdown_19_Template(rf, ctx) { if (rf & 1) {\n    const _r47 = ngcc0.getCurrentView();\n    ngcc0.elementStart(0, \"vdr-dropdown\");\n    ngcc0.elementStart(1, \"button\", 22);\n    ngcc0.element(2, \"clr-icon\", 23);\n    ngcc0.elementEnd();\n    ngcc0.elementStart(3, \"vdr-dropdown-menu\", 24);\n    ngcc0.elementStart(4, \"button\", 25);\n    ngcc0.listener(\"click\", function ProductVariantsEditorComponent_tr_28_vdr_dropdown_19_Template_button_click_4_listener() { const restoredCtx = ngcc0.restoreView(_r47); const productVariantId_r45 = restoredCtx.ngIf; const variant_r10 = ngcc0.nextContext().$implicit; const ctx_r46 = ngcc0.nextContext(); return ctx_r46.deleteVariant(productVariantId_r45, variant_r10.options); });\n    ngcc0.element(5, \"clr-icon\", 26);\n    ngcc0.text(6);\n    ngcc0.pipe(7, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    ngcc0.advance(6);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(7, 1, \"common.delete\"), \" \");\n} }\nfunction ProductVariantsEditorComponent_tr_28_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementStart(0, \"tr\");\n    ngcc0.elementStart(1, \"td\", 15);\n    ngcc0.template(2, ProductVariantsEditorComponent_tr_28_clr_checkbox_wrapper_2_Template, 5, 4, \"clr-checkbox-wrapper\", 16);\n    ngcc0.elementEnd();\n    ngcc0.elementStart(3, \"td\");\n    ngcc0.text(4);\n    ngcc0.pipe(5, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.elementStart(6, \"td\");\n    ngcc0.elementStart(7, \"div\", 17);\n    ngcc0.template(8, ProductVariantsEditorComponent_tr_28_clr_input_container_8_Template, 3, 4, \"clr-input-container\", 16);\n    ngcc0.template(9, ProductVariantsEditorComponent_tr_28_span_9_Template, 2, 1, \"span\", 16);\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementStart(10, \"td\");\n    ngcc0.elementStart(11, \"div\", 17);\n    ngcc0.template(12, ProductVariantsEditorComponent_tr_28_clr_input_container_12_Template, 2, 2, \"clr-input-container\", 16);\n    ngcc0.template(13, ProductVariantsEditorComponent_tr_28_span_13_Template, 3, 4, \"span\", 16);\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementStart(14, \"td\");\n    ngcc0.elementStart(15, \"div\", 17);\n    ngcc0.template(16, ProductVariantsEditorComponent_tr_28_clr_input_container_16_Template, 2, 1, \"clr-input-container\", 16);\n    ngcc0.template(17, ProductVariantsEditorComponent_tr_28_span_17_Template, 2, 1, \"span\", 16);\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementStart(18, \"td\");\n    ngcc0.template(19, ProductVariantsEditorComponent_tr_28_vdr_dropdown_19_Template, 8, 3, \"vdr-dropdown\", 16);\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const variant_r10 = ctx.$implicit;\n    const ctx_r1 = ngcc0.nextContext();\n    ngcc0.classProp(\"disabled\", !variant_r10.enabled || variant_r10.existing);\n    ngcc0.advance(2);\n    ngcc0.property(\"ngIf\", !variant_r10.existing);\n    ngcc0.advance(2);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(5, 11, ctx_r1.getVariantName(variant_r10)), \" \");\n    ngcc0.advance(4);\n    ngcc0.property(\"ngIf\", !variant_r10.existing);\n    ngcc0.advance(1);\n    ngcc0.property(\"ngIf\", variant_r10.existing);\n    ngcc0.advance(3);\n    ngcc0.property(\"ngIf\", !variant_r10.existing);\n    ngcc0.advance(1);\n    ngcc0.property(\"ngIf\", variant_r10.existing);\n    ngcc0.advance(3);\n    ngcc0.property(\"ngIf\", !variant_r10.existing);\n    ngcc0.advance(1);\n    ngcc0.property(\"ngIf\", variant_r10.existing);\n    ngcc0.advance(2);\n    ngcc0.property(\"ngIf\", variant_r10.productVariantId);\n} }\nfunction AssetsComponent_div_0_img_3_Template(rf, ctx) { if (rf & 1) {\n    const _r10 = ngcc0.getCurrentView();\n    ngcc0.elementStart(0, \"img\", 11);\n    ngcc0.listener(\"click\", function AssetsComponent_div_0_img_3_Template_img_click_0_listener() { ngcc0.restoreView(_r10); const ctx_r9 = ngcc0.nextContext(2); return ctx_r9.previewAsset(ctx_r9.featuredAsset); });\n    ngcc0.pipe(1, \"assetPreview\");\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const ctx_r5 = ngcc0.nextContext(2);\n    ngcc0.property(\"src\", ngcc0.pipeBind2(1, 1, ctx_r5.featuredAsset, \"small\"), ngcc0.sanitizeUrl);\n} }\nfunction AssetsComponent_div_0_div_4_Template(rf, ctx) { if (rf & 1) {\n    const _r12 = ngcc0.getCurrentView();\n    ngcc0.elementStart(0, \"div\", 12);\n    ngcc0.listener(\"click\", function AssetsComponent_div_0_div_4_Template_div_click_0_listener() { ngcc0.restoreView(_r12); const ctx_r11 = ngcc0.nextContext(2); return ctx_r11.selectAssets(); });\n    ngcc0.element(1, \"clr-icon\", 13);\n    ngcc0.elementStart(2, \"div\");\n    ngcc0.text(3);\n    ngcc0.pipe(4, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    ngcc0.advance(3);\n    ngcc0.textInterpolate(ngcc0.pipeBind1(4, 1, \"catalog.no-featured-asset\"));\n} }\nfunction AssetsComponent_div_0_ng_container_6_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementContainer(0);\n} }\nfunction AssetsComponent_div_0_div_7_Template(rf, ctx) { if (rf & 1) {\n    const _r14 = ngcc0.getCurrentView();\n    ngcc0.elementStart(0, \"div\", 14);\n    ngcc0.elementStart(1, \"button\", 15);\n    ngcc0.listener(\"click\", function AssetsComponent_div_0_div_7_Template_button_click_1_listener() { ngcc0.restoreView(_r14); const ctx_r13 = ngcc0.nextContext(2); return ctx_r13.selectAssets(); });\n    ngcc0.element(2, \"clr-icon\", 16);\n    ngcc0.text(3);\n    ngcc0.pipe(4, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    ngcc0.advance(3);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(4, 1, \"asset.add-asset\"), \" \");\n} }\nfunction AssetsComponent_div_0_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementStart(0, \"div\", 3);\n    ngcc0.elementStart(1, \"div\", 4);\n    ngcc0.elementStart(2, \"div\", 5);\n    ngcc0.template(3, AssetsComponent_div_0_img_3_Template, 2, 4, \"img\", 6);\n    ngcc0.template(4, AssetsComponent_div_0_div_4_Template, 5, 3, \"div\", 7);\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementStart(5, \"div\", 8);\n    ngcc0.template(6, AssetsComponent_div_0_ng_container_6_Template, 1, 0, \"ng-container\", 9);\n    ngcc0.elementEnd();\n    ngcc0.template(7, AssetsComponent_div_0_div_7_Template, 5, 3, \"div\", 10);\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const ctx_r0 = ngcc0.nextContext();\n    const _r3 = ngcc0.reference(4);\n    ngcc0.advance(3);\n    ngcc0.property(\"ngIf\", ctx_r0.featuredAsset);\n    ngcc0.advance(1);\n    ngcc0.property(\"ngIf\", !ctx_r0.featuredAsset);\n    ngcc0.advance(2);\n    ngcc0.property(\"ngTemplateOutlet\", _r3);\n    ngcc0.advance(1);\n    ngcc0.property(\"vdrIfPermissions\", ctx_r0.updatePermissions);\n} }\nfunction AssetsComponent_ng_template_1_img_1_Template(rf, ctx) { if (rf & 1) {\n    const _r20 = ngcc0.getCurrentView();\n    ngcc0.elementStart(0, \"img\", 11);\n    ngcc0.listener(\"click\", function AssetsComponent_ng_template_1_img_1_Template_img_click_0_listener() { ngcc0.restoreView(_r20); const ctx_r19 = ngcc0.nextContext(2); return ctx_r19.previewAsset(ctx_r19.featuredAsset); });\n    ngcc0.pipe(1, \"assetPreview\");\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const ctx_r15 = ngcc0.nextContext(2);\n    ngcc0.property(\"src\", ngcc0.pipeBind2(1, 1, ctx_r15.featuredAsset, \"thumb\"), ngcc0.sanitizeUrl);\n} }\nfunction AssetsComponent_ng_template_1_div_2_Template(rf, ctx) { if (rf & 1) {\n    const _r22 = ngcc0.getCurrentView();\n    ngcc0.elementStart(0, \"div\", 12);\n    ngcc0.listener(\"click\", function AssetsComponent_ng_template_1_div_2_Template_div_click_0_listener() { ngcc0.restoreView(_r22); const ctx_r21 = ngcc0.nextContext(2); return ctx_r21.selectAssets(); });\n    ngcc0.element(1, \"clr-icon\", 19);\n    ngcc0.elementEnd();\n} }\nfunction AssetsComponent_ng_template_1_ng_container_3_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementContainer(0);\n} }\nfunction AssetsComponent_ng_template_1_button_4_Template(rf, ctx) { if (rf & 1) {\n    const _r24 = ngcc0.getCurrentView();\n    ngcc0.elementStart(0, \"button\", 20);\n    ngcc0.listener(\"click\", function AssetsComponent_ng_template_1_button_4_Template_button_click_0_listener() { ngcc0.restoreView(_r24); const ctx_r23 = ngcc0.nextContext(2); return ctx_r23.selectAssets(); });\n    ngcc0.pipe(1, \"translate\");\n    ngcc0.element(2, \"clr-icon\", 16);\n    ngcc0.text(3);\n    ngcc0.pipe(4, \"translate\");\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    ngcc0.property(\"title\", ngcc0.pipeBind1(1, 2, \"asset.add-asset\"));\n    ngcc0.advance(3);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(4, 4, \"asset.add-asset\"), \" \");\n} }\nfunction AssetsComponent_ng_template_1_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementStart(0, \"div\", 17);\n    ngcc0.template(1, AssetsComponent_ng_template_1_img_1_Template, 2, 4, \"img\", 6);\n    ngcc0.template(2, AssetsComponent_ng_template_1_div_2_Template, 2, 0, \"div\", 7);\n    ngcc0.elementEnd();\n    ngcc0.template(3, AssetsComponent_ng_template_1_ng_container_3_Template, 1, 0, \"ng-container\", 9);\n    ngcc0.template(4, AssetsComponent_ng_template_1_button_4_Template, 5, 6, \"button\", 18);\n} if (rf & 2) {\n    const ctx_r2 = ngcc0.nextContext();\n    const _r3 = ngcc0.reference(4);\n    ngcc0.advance(1);\n    ngcc0.property(\"ngIf\", ctx_r2.featuredAsset);\n    ngcc0.advance(1);\n    ngcc0.property(\"ngIf\", !ctx_r2.featuredAsset);\n    ngcc0.advance(1);\n    ngcc0.property(\"ngTemplateOutlet\", _r3);\n    ngcc0.advance(1);\n    ngcc0.property(\"vdrIfPermissions\", ctx_r2.updatePermissions);\n} }\nfunction AssetsComponent_ng_template_3_div_1_Template(rf, ctx) { if (rf & 1) {\n    const _r29 = ngcc0.getCurrentView();\n    ngcc0.elementStart(0, \"div\", 23);\n    ngcc0.listener(\"cdkDropListDropped\", function AssetsComponent_ng_template_3_div_1_Template_div_cdkDropListDropped_0_listener($event) { ngcc0.restoreView(_r29); const ctx_r28 = ngcc0.nextContext(2); return ctx_r28.dropListDropped($event); });\n    ngcc0.pipe(1, \"hasPermission\");\n    ngcc0.elementStart(2, \"vdr-dropdown\", 24);\n    ngcc0.elementStart(3, \"div\", 25);\n    ngcc0.element(4, \"img\", 26);\n    ngcc0.pipe(5, \"assetPreview\");\n    ngcc0.elementEnd();\n    ngcc0.elementStart(6, \"vdr-dropdown-menu\", 27);\n    ngcc0.elementStart(7, \"button\", 28);\n    ngcc0.listener(\"click\", function AssetsComponent_ng_template_3_div_1_Template_button_click_7_listener() { const restoredCtx = ngcc0.restoreView(_r29); const asset_r26 = restoredCtx.$implicit; const ctx_r30 = ngcc0.nextContext(2); return ctx_r30.previewAsset(asset_r26); });\n    ngcc0.text(8);\n    ngcc0.pipe(9, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.elementStart(10, \"button\", 29);\n    ngcc0.listener(\"click\", function AssetsComponent_ng_template_3_div_1_Template_button_click_10_listener() { const restoredCtx = ngcc0.restoreView(_r29); const asset_r26 = restoredCtx.$implicit; const ctx_r31 = ngcc0.nextContext(2); return ctx_r31.setAsFeatured(asset_r26); });\n    ngcc0.pipe(11, \"hasPermission\");\n    ngcc0.text(12);\n    ngcc0.pipe(13, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.element(14, \"div\", 30);\n    ngcc0.elementStart(15, \"button\", 31);\n    ngcc0.listener(\"click\", function AssetsComponent_ng_template_3_div_1_Template_button_click_15_listener() { const restoredCtx = ngcc0.restoreView(_r29); const asset_r26 = restoredCtx.$implicit; const ctx_r32 = ngcc0.nextContext(2); return ctx_r32.removeAsset(asset_r26); });\n    ngcc0.pipe(16, \"hasPermission\");\n    ngcc0.text(17);\n    ngcc0.pipe(18, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const asset_r26 = ctx.$implicit;\n    const index_r27 = ctx.index;\n    const ctx_r25 = ngcc0.nextContext(2);\n    ngcc0.property(\"cdkDropListData\", index_r27)(\"cdkDropListDisabled\", !ngcc0.pipeBind1(1, 10, ctx_r25.updatePermissions));\n    ngcc0.advance(3);\n    ngcc0.classProp(\"featured\", ctx_r25.isFeatured(asset_r26));\n    ngcc0.advance(1);\n    ngcc0.property(\"src\", ngcc0.pipeBind2(5, 12, asset_r26, \"tiny\"), ngcc0.sanitizeUrl);\n    ngcc0.advance(4);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(9, 15, \"asset.preview\"), \" \");\n    ngcc0.advance(2);\n    ngcc0.property(\"disabled\", ctx_r25.isFeatured(asset_r26) || !ngcc0.pipeBind1(11, 17, ctx_r25.updatePermissions));\n    ngcc0.advance(2);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(13, 19, \"asset.set-as-featured-asset\"), \" \");\n    ngcc0.advance(3);\n    ngcc0.property(\"disabled\", !ngcc0.pipeBind1(16, 21, ctx_r25.updatePermissions));\n    ngcc0.advance(2);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(18, 23, \"asset.remove-asset\"), \" \");\n} }\nfunction AssetsComponent_ng_template_3_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementStart(0, \"div\", 21);\n    ngcc0.template(1, AssetsComponent_ng_template_3_div_1_Template, 19, 25, \"div\", 22);\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const ctx_r4 = ngcc0.nextContext();\n    ngcc0.classProp(\"compact\", ctx_r4.compact);\n    ngcc0.advance(1);\n    ngcc0.property(\"ngForOf\", ctx_r4.assets);\n} }\nfunction AssignToChannelDialogComponent_ng_template_0_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.text(0);\n    ngcc0.pipe(1, \"translate\");\n} if (rf & 2) {\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(1, 1, \"catalog.assign-to-channel\"), \"\\n\");\n} }\nfunction AssignToChannelDialogComponent_ng_template_6_ng_template_4_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.text(0);\n    ngcc0.pipe(1, \"translate\");\n} if (rf & 2) {\n    const ctx_r2 = ngcc0.nextContext(2);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind2(1, 1, \"catalog.assign-to-named-channel\", ngcc0.pureFunction1(4, _c18, ctx_r2.selectedChannel == null ? null : ctx_r2.selectedChannel.code)), \" \");\n} }\nfunction AssignToChannelDialogComponent_ng_template_6_ng_template_5_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.text(0);\n    ngcc0.pipe(1, \"translate\");\n} if (rf & 2) {\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(1, 1, \"catalog.no-channel-selected\"), \" \");\n} }\nfunction AssignToChannelDialogComponent_ng_template_6_Template(rf, ctx) { if (rf & 1) {\n    const _r6 = ngcc0.getCurrentView();\n    ngcc0.elementStart(0, \"button\", 4);\n    ngcc0.listener(\"click\", function AssignToChannelDialogComponent_ng_template_6_Template_button_click_0_listener() { ngcc0.restoreView(_r6); const ctx_r5 = ngcc0.nextContext(); return ctx_r5.cancel(); });\n    ngcc0.text(1);\n    ngcc0.pipe(2, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.elementStart(3, \"button\", 5);\n    ngcc0.listener(\"click\", function AssignToChannelDialogComponent_ng_template_6_Template_button_click_3_listener() { ngcc0.restoreView(_r6); const ctx_r7 = ngcc0.nextContext(); return ctx_r7.assign(); });\n    ngcc0.template(4, AssignToChannelDialogComponent_ng_template_6_ng_template_4_Template, 2, 6, \"ng-template\", 6);\n    ngcc0.template(5, AssignToChannelDialogComponent_ng_template_6_ng_template_5_Template, 2, 3, \"ng-template\", null, 7, ngcc0.templateRefExtractor);\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const _r3 = ngcc0.reference(6);\n    const ctx_r1 = ngcc0.nextContext();\n    ngcc0.advance(1);\n    ngcc0.textInterpolate(ngcc0.pipeBind1(2, 4, \"common.cancel\"));\n    ngcc0.advance(2);\n    ngcc0.property(\"disabled\", !ctx_r1.selectedChannel);\n    ngcc0.advance(1);\n    ngcc0.property(\"ngIf\", ctx_r1.selectedChannel)(\"ngIfElse\", _r3);\n} }\nfunction BulkAddFacetValuesDialogComponent_ng_template_0_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.text(0);\n    ngcc0.pipe(1, \"translate\");\n} if (rf & 2) {\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(1, 1, \"catalog.edit-facet-values\"), \"\\n\");\n} }\nfunction BulkAddFacetValuesDialogComponent_table_7_tr_2_div_4_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementStart(0, \"div\", 14);\n    ngcc0.text(1);\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const item_r6 = ngcc0.nextContext().$implicit;\n    ngcc0.advance(1);\n    ngcc0.textInterpolate(item_r6.sku);\n} }\nfunction BulkAddFacetValuesDialogComponent_table_7_tr_2_vdr_facet_value_chip_6_Template(rf, ctx) { if (rf & 1) {\n    const _r13 = ngcc0.getCurrentView();\n    ngcc0.elementStart(0, \"vdr-facet-value-chip\", 15);\n    ngcc0.listener(\"remove\", function BulkAddFacetValuesDialogComponent_table_7_tr_2_vdr_facet_value_chip_6_Template_vdr_facet_value_chip_remove_0_listener() { const restoredCtx = ngcc0.restoreView(_r13); const facetValue_r10 = restoredCtx.$implicit; const item_r6 = ngcc0.nextContext().$implicit; const ctx_r11 = ngcc0.nextContext(2); return ctx_r11.removeFacetValue(item_r6, facetValue_r10.id); });\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const facetValue_r10 = ctx.$implicit;\n    ngcc0.property(\"facetValue\", facetValue_r10);\n} }\nfunction BulkAddFacetValuesDialogComponent_table_7_tr_2_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementStart(0, \"tr\");\n    ngcc0.elementStart(1, \"td\", 10);\n    ngcc0.elementStart(2, \"div\");\n    ngcc0.text(3);\n    ngcc0.elementEnd();\n    ngcc0.template(4, BulkAddFacetValuesDialogComponent_table_7_tr_2_div_4_Template, 2, 1, \"div\", 11);\n    ngcc0.elementEnd();\n    ngcc0.elementStart(5, \"td\", 12);\n    ngcc0.template(6, BulkAddFacetValuesDialogComponent_table_7_tr_2_vdr_facet_value_chip_6_Template, 1, 1, \"vdr-facet-value-chip\", 13);\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const item_r6 = ctx.$implicit;\n    ngcc0.advance(3);\n    ngcc0.textInterpolate(item_r6.name);\n    ngcc0.advance(1);\n    ngcc0.property(\"ngIf\", item_r6.sku);\n    ngcc0.advance(2);\n    ngcc0.property(\"ngForOf\", item_r6.facetValues);\n} }\nfunction BulkAddFacetValuesDialogComponent_table_7_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementStart(0, \"table\", 8);\n    ngcc0.elementStart(1, \"tbody\");\n    ngcc0.template(2, BulkAddFacetValuesDialogComponent_table_7_tr_2_Template, 7, 3, \"tr\", 9);\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const ctx_r1 = ngcc0.nextContext();\n    ngcc0.advance(2);\n    ngcc0.property(\"ngForOf\", ctx_r1.items);\n} }\nfunction BulkAddFacetValuesDialogComponent_ng_template_8_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementStart(0, \"div\", 16);\n    ngcc0.element(1, \"clr-spinner\");\n    ngcc0.elementEnd();\n} }\nfunction BulkAddFacetValuesDialogComponent_ng_template_10_Template(rf, ctx) { if (rf & 1) {\n    const _r15 = ngcc0.getCurrentView();\n    ngcc0.elementStart(0, \"button\", 17);\n    ngcc0.listener(\"click\", function BulkAddFacetValuesDialogComponent_ng_template_10_Template_button_click_0_listener() { ngcc0.restoreView(_r15); const ctx_r14 = ngcc0.nextContext(); return ctx_r14.cancel(); });\n    ngcc0.text(1);\n    ngcc0.pipe(2, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.elementStart(3, \"button\", 18);\n    ngcc0.listener(\"click\", function BulkAddFacetValuesDialogComponent_ng_template_10_Template_button_click_3_listener() { ngcc0.restoreView(_r15); const ctx_r16 = ngcc0.nextContext(); return ctx_r16.addFacetValues(); });\n    ngcc0.text(4);\n    ngcc0.pipe(5, \"translate\");\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const ctx_r4 = ngcc0.nextContext();\n    ngcc0.advance(1);\n    ngcc0.textInterpolate(ngcc0.pipeBind1(2, 3, \"common.cancel\"));\n    ngcc0.advance(2);\n    ngcc0.property(\"disabled\", ctx_r4.selectedValues.length === 0 && ctx_r4.facetValuesRemoved === false);\n    ngcc0.advance(1);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(5, 5, \"common.update\"), \" \");\n} }\nfunction CollectionContentsComponent_ng_container_2_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementContainer(0);\n} }\nconst _c27 = function () { return { tab: \"variants\" }; };\nconst _c28 = function (a1, a2) { return [\"/catalog/products\", a1, a2]; };\nfunction CollectionContentsComponent_ng_template_13_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementStart(0, \"td\", 7);\n    ngcc0.text(1);\n    ngcc0.elementEnd();\n    ngcc0.elementStart(2, \"td\", 7);\n    ngcc0.elementStart(3, \"small\", 8);\n    ngcc0.text(4);\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementStart(5, \"td\", 9);\n    ngcc0.element(6, \"vdr-table-row-action\", 10);\n    ngcc0.pipe(7, \"translate\");\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const variant_r2 = ctx.item;\n    ngcc0.advance(1);\n    ngcc0.textInterpolate(variant_r2.name);\n    ngcc0.advance(3);\n    ngcc0.textInterpolate(variant_r2.sku);\n    ngcc0.advance(2);\n    ngcc0.property(\"label\", ngcc0.pipeBind1(7, 4, \"common.edit\"))(\"linkTo\", ngcc0.pureFunction2(7, _c28, variant_r2.productId, ngcc0.pureFunction0(6, _c27)));\n} }\nconst _c29 = function (a0) { return { $implicit: a0 }; };\nfunction CollectionTreeComponent_vdr_collection_tree_node_0_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.element(0, \"vdr-collection-tree-node\", 1);\n} if (rf & 2) {\n    const ctx_r0 = ngcc0.nextContext();\n    ngcc0.property(\"expandAll\", ctx_r0.expandAll)(\"collectionTree\", ctx_r0.collectionTree)(\"selectionManager\", ctx_r0.selectionManager)(\"activeCollectionId\", ctx_r0.activeCollectionId);\n} }\nfunction CollectionTreeNodeComponent_div_3_button_5_clr_icon_1_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.element(0, \"clr-icon\", 32);\n} }\nfunction CollectionTreeNodeComponent_div_3_button_5_clr_icon_2_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.element(0, \"clr-icon\", 33);\n} }\nfunction CollectionTreeNodeComponent_div_3_button_5_Template(rf, ctx) { if (rf & 1) {\n    const _r16 = ngcc0.getCurrentView();\n    ngcc0.elementStart(0, \"button\", 29);\n    ngcc0.listener(\"click\", function CollectionTreeNodeComponent_div_3_button_5_Template_button_click_0_listener() { ngcc0.restoreView(_r16); const collection_r2 = ngcc0.nextContext().$implicit; const ctx_r14 = ngcc0.nextContext(); return ctx_r14.toggleExpanded(collection_r2); });\n    ngcc0.template(1, CollectionTreeNodeComponent_div_3_button_5_clr_icon_1_Template, 1, 0, \"clr-icon\", 30);\n    ngcc0.template(2, CollectionTreeNodeComponent_div_3_button_5_clr_icon_2_Template, 1, 0, \"clr-icon\", 31);\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const collection_r2 = ngcc0.nextContext().$implicit;\n    const ctx_r4 = ngcc0.nextContext();\n    ngcc0.property(\"disabled\", ctx_r4.expandAll);\n    ngcc0.advance(1);\n    ngcc0.property(\"ngIf\", !collection_r2.expanded && !ctx_r4.expandAll);\n    ngcc0.advance(1);\n    ngcc0.property(\"ngIf\", collection_r2.expanded || ctx_r4.expandAll);\n} }\nfunction CollectionTreeNodeComponent_div_3_ng_template_6_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.element(0, \"div\", 34);\n} }\nfunction CollectionTreeNodeComponent_div_3_vdr_chip_10_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementStart(0, \"vdr-chip\");\n    ngcc0.text(1);\n    ngcc0.pipe(2, \"translate\");\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    ngcc0.advance(1);\n    ngcc0.textInterpolate(ngcc0.pipeBind1(2, 1, \"catalog.private\"));\n} }\nfunction CollectionTreeNodeComponent_div_3_div_19_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementStart(0, \"div\", 35);\n    ngcc0.element(1, \"clr-icon\", 36);\n    ngcc0.elementEnd();\n} }\nconst _c30 = function (a0) { return { parentId: a0 }; };\nconst _c31 = function (a2) { return [\"./\", \"create\", a2]; };\nfunction CollectionTreeNodeComponent_div_3_a_24_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementStart(0, \"a\", 37);\n    ngcc0.element(1, \"clr-icon\", 38);\n    ngcc0.text(2);\n    ngcc0.pipe(3, \"translate\");\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const collection_r2 = ngcc0.nextContext().$implicit;\n    ngcc0.property(\"routerLink\", ngcc0.pureFunction1(6, _c31, ngcc0.pureFunction1(4, _c30, collection_r2.id)));\n    ngcc0.advance(2);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(3, 2, \"catalog.create-new-collection\"), \" \");\n} }\nfunction CollectionTreeNodeComponent_div_3_button_39_Template(rf, ctx) { if (rf & 1) {\n    const _r22 = ngcc0.getCurrentView();\n    ngcc0.elementStart(0, \"button\", 21);\n    ngcc0.listener(\"click\", function CollectionTreeNodeComponent_div_3_button_39_Template_button_click_0_listener() { const restoredCtx = ngcc0.restoreView(_r22); const item_r19 = restoredCtx.$implicit; const collection_r2 = ngcc0.nextContext().$implicit; const ctx_r20 = ngcc0.nextContext(); return ctx_r20.move(collection_r2, item_r19.id); });\n    ngcc0.pipe(1, \"async\");\n    ngcc0.elementStart(2, \"div\", 39);\n    ngcc0.elementStart(3, \"div\", 40);\n    ngcc0.element(4, \"clr-icon\", 41);\n    ngcc0.elementEnd();\n    ngcc0.elementStart(5, \"div\", 42);\n    ngcc0.text(6);\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const item_r19 = ctx.$implicit;\n    const ctx_r10 = ngcc0.nextContext(2);\n    ngcc0.property(\"disabled\", !ngcc0.pipeBind1(1, 2, ctx_r10.hasUpdatePermission$));\n    ngcc0.advance(6);\n    ngcc0.textInterpolate1(\" \", item_r19.path, \" \");\n} }\nfunction CollectionTreeNodeComponent_div_3_vdr_collection_tree_node_46_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.element(0, \"vdr-collection-tree-node\", 43);\n} if (rf & 2) {\n    const collection_r2 = ngcc0.nextContext().$implicit;\n    const ctx_r11 = ngcc0.nextContext();\n    ngcc0.property(\"expandAll\", ctx_r11.expandAll)(\"collectionTree\", collection_r2)(\"activeCollectionId\", ctx_r11.activeCollectionId)(\"selectionManager\", ctx_r11.selectionManager);\n} }\nconst _c32 = function (a0) { return { contents: a0 }; };\nconst _c33 = function (a1) { return [\"/catalog/collections/\", a1]; };\nconst _c34 = function () { return [\"UpdateCatalog\", \"UpdateCollection\"]; };\nfunction CollectionTreeNodeComponent_div_3_Template(rf, ctx) { if (rf & 1) {\n    const _r25 = ngcc0.getCurrentView();\n    ngcc0.elementStart(0, \"div\", 3);\n    ngcc0.elementStart(1, \"div\", 4);\n    ngcc0.elementStart(2, \"div\");\n    ngcc0.elementStart(3, \"input\", 5);\n    ngcc0.listener(\"click\", function CollectionTreeNodeComponent_div_3_Template_input_click_3_listener($event) { const restoredCtx = ngcc0.restoreView(_r25); const collection_r2 = restoredCtx.$implicit; const ctx_r24 = ngcc0.nextContext(); return ctx_r24.selectionManager.toggleSelection(collection_r2, $event); });\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementStart(4, \"div\", 6);\n    ngcc0.template(5, CollectionTreeNodeComponent_div_3_button_5_Template, 3, 3, \"button\", 7);\n    ngcc0.template(6, CollectionTreeNodeComponent_div_3_ng_template_6_Template, 1, 0, \"ng-template\", null, 8, ngcc0.templateRefExtractor);\n    ngcc0.text(8);\n    ngcc0.elementEnd();\n    ngcc0.element(9, \"div\", 9);\n    ngcc0.template(10, CollectionTreeNodeComponent_div_3_vdr_chip_10_Template, 3, 3, \"vdr-chip\", 10);\n    ngcc0.elementStart(11, \"a\", 11);\n    ngcc0.element(12, \"clr-icon\", 12);\n    ngcc0.text(13);\n    ngcc0.pipe(14, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.elementStart(15, \"a\", 13);\n    ngcc0.element(16, \"clr-icon\", 14);\n    ngcc0.text(17);\n    ngcc0.pipe(18, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.template(19, CollectionTreeNodeComponent_div_3_div_19_Template, 2, 0, \"div\", 15);\n    ngcc0.elementStart(20, \"vdr-dropdown\");\n    ngcc0.elementStart(21, \"button\", 16);\n    ngcc0.listener(\"click\", function CollectionTreeNodeComponent_div_3_Template_button_click_21_listener() { const restoredCtx = ngcc0.restoreView(_r25); const collection_r2 = restoredCtx.$implicit; const ctx_r26 = ngcc0.nextContext(); return ctx_r26.getMoveListItems(collection_r2); });\n    ngcc0.element(22, \"clr-icon\", 17);\n    ngcc0.elementEnd();\n    ngcc0.elementStart(23, \"vdr-dropdown-menu\", 18);\n    ngcc0.template(24, CollectionTreeNodeComponent_div_3_a_24_Template, 4, 8, \"a\", 19);\n    ngcc0.element(25, \"div\", 20);\n    ngcc0.elementStart(26, \"button\", 21);\n    ngcc0.listener(\"click\", function CollectionTreeNodeComponent_div_3_Template_button_click_26_listener() { const restoredCtx = ngcc0.restoreView(_r25); const collection_r2 = restoredCtx.$implicit; const i_r3 = restoredCtx.index; const ctx_r27 = ngcc0.nextContext(); return ctx_r27.moveUp(collection_r2, i_r3); });\n    ngcc0.pipe(27, \"async\");\n    ngcc0.element(28, \"clr-icon\", 22);\n    ngcc0.text(29);\n    ngcc0.pipe(30, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.elementStart(31, \"button\", 21);\n    ngcc0.listener(\"click\", function CollectionTreeNodeComponent_div_3_Template_button_click_31_listener() { const restoredCtx = ngcc0.restoreView(_r25); const collection_r2 = restoredCtx.$implicit; const i_r3 = restoredCtx.index; const ctx_r28 = ngcc0.nextContext(); return ctx_r28.moveDown(collection_r2, i_r3); });\n    ngcc0.pipe(32, \"async\");\n    ngcc0.element(33, \"clr-icon\", 23);\n    ngcc0.text(34);\n    ngcc0.pipe(35, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.elementStart(36, \"h4\", 24);\n    ngcc0.text(37);\n    ngcc0.pipe(38, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.template(39, CollectionTreeNodeComponent_div_3_button_39_Template, 7, 4, \"button\", 25);\n    ngcc0.element(40, \"div\", 20);\n    ngcc0.elementStart(41, \"button\", 26);\n    ngcc0.listener(\"click\", function CollectionTreeNodeComponent_div_3_Template_button_click_41_listener() { const restoredCtx = ngcc0.restoreView(_r25); const collection_r2 = restoredCtx.$implicit; const ctx_r29 = ngcc0.nextContext(); return ctx_r29.delete(collection_r2.id); });\n    ngcc0.pipe(42, \"async\");\n    ngcc0.element(43, \"clr-icon\", 27);\n    ngcc0.text(44);\n    ngcc0.pipe(45, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.template(46, CollectionTreeNodeComponent_div_3_vdr_collection_tree_node_46_Template, 1, 4, \"vdr-collection-tree-node\", 28);\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const collection_r2 = ctx.$implicit;\n    const i_r3 = ctx.index;\n    const _r5 = ngcc0.reference(7);\n    const ctx_r1 = ngcc0.nextContext();\n    ngcc0.classProp(\"private\", collection_r2.isPrivate);\n    ngcc0.property(\"cdkDragData\", collection_r2);\n    ngcc0.advance(1);\n    ngcc0.classProp(\"active\", collection_r2.id === ctx_r1.activeCollectionId);\n    ngcc0.property(\"ngClass\", \"depth-\" + ctx_r1.depth);\n    ngcc0.advance(2);\n    ngcc0.property(\"checked\", ctx_r1.selectionManager.isSelected(collection_r2));\n    ngcc0.advance(2);\n    ngcc0.property(\"ngIf\", collection_r2.children == null ? null : collection_r2.children.length)(\"ngIfElse\", _r5);\n    ngcc0.advance(3);\n    ngcc0.textInterpolate1(\" \", collection_r2.name, \" \");\n    ngcc0.advance(2);\n    ngcc0.property(\"ngIf\", collection_r2.isPrivate);\n    ngcc0.advance(1);\n    ngcc0.property(\"routerLink\", ngcc0.pureFunction1(46, _c15, ngcc0.pureFunction1(44, _c32, collection_r2.id)));\n    ngcc0.advance(2);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(14, 26, \"catalog.view-contents\"), \" \");\n    ngcc0.advance(2);\n    ngcc0.property(\"routerLink\", ngcc0.pureFunction1(48, _c33, collection_r2.id));\n    ngcc0.advance(2);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(18, 28, \"common.edit\"), \" \");\n    ngcc0.advance(2);\n    ngcc0.property(\"vdrIfPermissions\", ngcc0.pureFunction0(50, _c34));\n    ngcc0.advance(5);\n    ngcc0.property(\"vdrIfPermissions\", ngcc0.pureFunction0(51, _c11));\n    ngcc0.advance(2);\n    ngcc0.property(\"disabled\", i_r3 === 0 || !ngcc0.pipeBind1(27, 30, ctx_r1.hasUpdatePermission$));\n    ngcc0.advance(3);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(30, 32, \"catalog.move-up\"), \" \");\n    ngcc0.advance(2);\n    ngcc0.property(\"disabled\", i_r3 === ctx_r1.collectionTree.children.length - 1 || !ngcc0.pipeBind1(32, 34, ctx_r1.hasUpdatePermission$));\n    ngcc0.advance(3);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(35, 36, \"catalog.move-down\"), \" \");\n    ngcc0.advance(3);\n    ngcc0.textInterpolate(ngcc0.pipeBind1(38, 38, \"catalog.move-to\"));\n    ngcc0.advance(2);\n    ngcc0.property(\"ngForOf\", ctx_r1.moveListItems);\n    ngcc0.advance(2);\n    ngcc0.property(\"disabled\", !ngcc0.pipeBind1(42, 40, ctx_r1.hasDeletePermission$));\n    ngcc0.advance(3);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(45, 42, \"common.delete\"), \" \");\n    ngcc0.advance(2);\n    ngcc0.property(\"ngIf\", collection_r2.expanded || ctx_r1.expandAll);\n} }\nconst _c35 = [\"optionGroupName\"];\nfunction GenerateProductVariantsComponent_div_0_Template(rf, ctx) { if (rf & 1) {\n    const _r8 = ngcc0.getCurrentView();\n    ngcc0.elementStart(0, \"div\", 7);\n    ngcc0.elementStart(1, \"div\", 8);\n    ngcc0.elementStart(2, \"label\");\n    ngcc0.text(3);\n    ngcc0.pipe(4, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.elementStart(5, \"input\", 9, 10);\n    ngcc0.listener(\"ngModelChange\", function GenerateProductVariantsComponent_div_0_Template_input_ngModelChange_5_listener($event) { const restoredCtx = ngcc0.restoreView(_r8); const group_r4 = restoredCtx.$implicit; return group_r4.name = $event; })(\"keydown.enter\", function GenerateProductVariantsComponent_div_0_Template_input_keydown_enter_5_listener($event) { ngcc0.restoreView(_r8); const _r6 = ngcc0.reference(12); const ctx_r9 = ngcc0.nextContext(); return ctx_r9.handleEnter($event, _r6); });\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementStart(7, \"div\", 11);\n    ngcc0.elementStart(8, \"label\");\n    ngcc0.text(9);\n    ngcc0.pipe(10, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.elementStart(11, \"vdr-option-value-input\", 12, 13);\n    ngcc0.listener(\"ngModelChange\", function GenerateProductVariantsComponent_div_0_Template_vdr_option_value_input_ngModelChange_11_listener($event) { const restoredCtx = ngcc0.restoreView(_r8); const group_r4 = restoredCtx.$implicit; return group_r4.values = $event; })(\"ngModelChange\", function GenerateProductVariantsComponent_div_0_Template_vdr_option_value_input_ngModelChange_11_listener() { ngcc0.restoreView(_r8); const ctx_r11 = ngcc0.nextContext(); return ctx_r11.generateVariants(); })(\"edit\", function GenerateProductVariantsComponent_div_0_Template_vdr_option_value_input_edit_11_listener() { ngcc0.restoreView(_r8); const ctx_r12 = ngcc0.nextContext(); return ctx_r12.generateVariants(); });\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementStart(13, \"div\", 14);\n    ngcc0.elementStart(14, \"button\", 15);\n    ngcc0.listener(\"click\", function GenerateProductVariantsComponent_div_0_Template_button_click_14_listener() { const restoredCtx = ngcc0.restoreView(_r8); const group_r4 = restoredCtx.$implicit; const ctx_r13 = ngcc0.nextContext(); return ctx_r13.removeOption(group_r4.name); });\n    ngcc0.pipe(15, \"translate\");\n    ngcc0.element(16, \"clr-icon\", 16);\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const group_r4 = ctx.$implicit;\n    ngcc0.advance(3);\n    ngcc0.textInterpolate(ngcc0.pipeBind1(4, 7, \"catalog.option\"));\n    ngcc0.advance(2);\n    ngcc0.property(\"ngModel\", group_r4.name);\n    ngcc0.advance(4);\n    ngcc0.textInterpolate(ngcc0.pipeBind1(10, 9, \"catalog.option-values\"));\n    ngcc0.advance(2);\n    ngcc0.property(\"ngModel\", group_r4.values)(\"groupName\", group_r4.name)(\"disabled\", group_r4.name === \"\");\n    ngcc0.advance(3);\n    ngcc0.property(\"title\", ngcc0.pipeBind1(15, 11, \"catalog.remove-option\"));\n} }\nfunction GenerateProductVariantsComponent_th_9_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementStart(0, \"th\");\n    ngcc0.text(1);\n    ngcc0.pipe(2, \"translate\");\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    ngcc0.advance(1);\n    ngcc0.textInterpolate(ngcc0.pipeBind1(2, 1, \"common.create\"));\n} }\nfunction GenerateProductVariantsComponent_th_10_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementStart(0, \"th\");\n    ngcc0.text(1);\n    ngcc0.pipe(2, \"translate\");\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    ngcc0.advance(1);\n    ngcc0.textInterpolate(ngcc0.pipeBind1(2, 1, \"catalog.variant\"));\n} }\nfunction GenerateProductVariantsComponent_tr_20_td_1_Template(rf, ctx) { if (rf & 1) {\n    const _r18 = ngcc0.getCurrentView();\n    ngcc0.elementStart(0, \"td\");\n    ngcc0.elementStart(1, \"input\", 20);\n    ngcc0.listener(\"change\", function GenerateProductVariantsComponent_tr_20_td_1_Template_input_change_1_listener() { ngcc0.restoreView(_r18); const ctx_r17 = ngcc0.nextContext(2); return ctx_r17.onFormChange(); })(\"ngModelChange\", function GenerateProductVariantsComponent_tr_20_td_1_Template_input_ngModelChange_1_listener($event) { ngcc0.restoreView(_r18); const variant_r14 = ngcc0.nextContext().$implicit; const ctx_r19 = ngcc0.nextContext(); return ctx_r19.variantFormValues[variant_r14.id].enabled = $event; });\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const variant_r14 = ngcc0.nextContext().$implicit;\n    const ctx_r15 = ngcc0.nextContext();\n    ngcc0.advance(1);\n    ngcc0.property(\"ngModel\", ctx_r15.variantFormValues[variant_r14.id].enabled);\n} }\nfunction GenerateProductVariantsComponent_tr_20_td_2_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementStart(0, \"td\");\n    ngcc0.text(1);\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const variant_r14 = ngcc0.nextContext().$implicit;\n    ngcc0.advance(1);\n    ngcc0.textInterpolate1(\" \", variant_r14.values.join(\" \"), \" \");\n} }\nfunction GenerateProductVariantsComponent_tr_20_Template(rf, ctx) { if (rf & 1) {\n    const _r24 = ngcc0.getCurrentView();\n    ngcc0.elementStart(0, \"tr\");\n    ngcc0.template(1, GenerateProductVariantsComponent_tr_20_td_1_Template, 2, 1, \"td\", 5);\n    ngcc0.template(2, GenerateProductVariantsComponent_tr_20_td_2_Template, 2, 1, \"td\", 5);\n    ngcc0.elementStart(3, \"td\");\n    ngcc0.elementStart(4, \"clr-input-container\");\n    ngcc0.elementStart(5, \"input\", 17);\n    ngcc0.listener(\"change\", function GenerateProductVariantsComponent_tr_20_Template_input_change_5_listener() { ngcc0.restoreView(_r24); const ctx_r23 = ngcc0.nextContext(); return ctx_r23.onFormChange(); })(\"ngModelChange\", function GenerateProductVariantsComponent_tr_20_Template_input_ngModelChange_5_listener($event) { const restoredCtx = ngcc0.restoreView(_r24); const variant_r14 = restoredCtx.$implicit; const ctx_r25 = ngcc0.nextContext(); return ctx_r25.variantFormValues[variant_r14.id].sku = $event; });\n    ngcc0.pipe(6, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementStart(7, \"td\");\n    ngcc0.elementStart(8, \"clr-input-container\");\n    ngcc0.elementStart(9, \"vdr-currency-input\", 18);\n    ngcc0.listener(\"ngModelChange\", function GenerateProductVariantsComponent_tr_20_Template_vdr_currency_input_ngModelChange_9_listener($event) { const restoredCtx = ngcc0.restoreView(_r24); const variant_r14 = restoredCtx.$implicit; const ctx_r26 = ngcc0.nextContext(); return ctx_r26.variantFormValues[variant_r14.id].price = $event; })(\"ngModelChange\", function GenerateProductVariantsComponent_tr_20_Template_vdr_currency_input_ngModelChange_9_listener() { ngcc0.restoreView(_r24); const ctx_r27 = ngcc0.nextContext(); return ctx_r27.onFormChange(); });\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementStart(10, \"td\");\n    ngcc0.elementStart(11, \"clr-input-container\");\n    ngcc0.elementStart(12, \"input\", 19);\n    ngcc0.listener(\"ngModelChange\", function GenerateProductVariantsComponent_tr_20_Template_input_ngModelChange_12_listener($event) { const restoredCtx = ngcc0.restoreView(_r24); const variant_r14 = restoredCtx.$implicit; const ctx_r28 = ngcc0.nextContext(); return ctx_r28.variantFormValues[variant_r14.id].stock = $event; })(\"change\", function GenerateProductVariantsComponent_tr_20_Template_input_change_12_listener() { ngcc0.restoreView(_r24); const ctx_r29 = ngcc0.nextContext(); return ctx_r29.onFormChange(); });\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const variant_r14 = ctx.$implicit;\n    const ctx_r3 = ngcc0.nextContext();\n    ngcc0.classProp(\"disabled\", !ctx_r3.variantFormValues[variant_r14.id].enabled);\n    ngcc0.advance(1);\n    ngcc0.property(\"ngIf\", 1 < ctx_r3.variants.length);\n    ngcc0.advance(1);\n    ngcc0.property(\"ngIf\", 1 < ctx_r3.variants.length);\n    ngcc0.advance(3);\n    ngcc0.property(\"ngModel\", ctx_r3.variantFormValues[variant_r14.id].sku)(\"placeholder\", ngcc0.pipeBind1(6, 9, \"catalog.sku\"));\n    ngcc0.advance(4);\n    ngcc0.property(\"ngModel\", ctx_r3.variantFormValues[variant_r14.id].price)(\"currencyCode\", ctx_r3.currencyCode);\n    ngcc0.advance(3);\n    ngcc0.property(\"ngModel\", ctx_r3.variantFormValues[variant_r14.id].stock);\n} }\nconst _c36 = [\"textArea\"];\nconst _c37 = [\"editNameInput\"];\nfunction OptionValueInputComponent_div_1_vdr_chip_1_Template(rf, ctx) { if (rf & 1) {\n    const _r8 = ngcc0.getCurrentView();\n    ngcc0.elementStart(0, \"vdr-chip\", 6);\n    ngcc0.listener(\"iconClick\", function OptionValueInputComponent_div_1_vdr_chip_1_Template_vdr_chip_iconClick_0_listener() { const restoredCtx = ngcc0.restoreView(_r8); const option_r3 = restoredCtx.$implicit; const ctx_r7 = ngcc0.nextContext(2); return ctx_r7.removeOption(option_r3); });\n    ngcc0.elementStart(1, \"span\", 7);\n    ngcc0.elementStart(2, \"input\", 8, 9);\n    ngcc0.listener(\"blur\", function OptionValueInputComponent_div_1_vdr_chip_1_Template_input_blur_2_listener($event) { const restoredCtx = ngcc0.restoreView(_r8); const i_r5 = restoredCtx.index; const ctx_r9 = ngcc0.nextContext(2); return ctx_r9.updateOption(i_r5, $event); })(\"click\", function OptionValueInputComponent_div_1_vdr_chip_1_Template_input_click_2_listener($event) { return $event.cancelBubble = true; });\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementStart(4, \"span\", 10);\n    ngcc0.listener(\"click\", function OptionValueInputComponent_div_1_vdr_chip_1_Template_span_click_4_listener($event) { const restoredCtx = ngcc0.restoreView(_r8); const i_r5 = restoredCtx.index; const ctx_r11 = ngcc0.nextContext(2); return ctx_r11.editName(i_r5, $event); });\n    ngcc0.text(5);\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const option_r3 = ctx.$implicit;\n    const isLast_r4 = ctx.last;\n    const i_r5 = ctx.index;\n    const ctx_r2 = ngcc0.nextContext(2);\n    ngcc0.classProp(\"selected\", isLast_r4 && ctx_r2.lastSelected)(\"locked\", option_r3.locked);\n    ngcc0.property(\"icon\", option_r3.locked ? \"lock\" : \"times\")(\"colorFrom\", ctx_r2.groupName);\n    ngcc0.advance(1);\n    ngcc0.property(\"hidden\", ctx_r2.editingIndex !== i_r5);\n    ngcc0.advance(1);\n    ngcc0.property(\"ngModel\", option_r3.name);\n    ngcc0.advance(2);\n    ngcc0.classProp(\"editable\", !option_r3.locked && !option_r3.id);\n    ngcc0.property(\"hidden\", ctx_r2.editingIndex === i_r5);\n    ngcc0.advance(1);\n    ngcc0.textInterpolate(option_r3.name);\n} }\nfunction OptionValueInputComponent_div_1_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementStart(0, \"div\", 4);\n    ngcc0.template(1, OptionValueInputComponent_div_1_vdr_chip_1_Template, 6, 12, \"vdr-chip\", 5);\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const ctx_r0 = ngcc0.nextContext();\n    ngcc0.advance(1);\n    ngcc0.property(\"ngForOf\", ctx_r0.optionValues);\n} }\nfunction UpdateProductOptionDialogComponent_ng_template_0_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.text(0);\n    ngcc0.pipe(1, \"translate\");\n} if (rf & 2) {\n    ngcc0.textInterpolate(ngcc0.pipeBind1(1, 1, \"catalog.update-product-option\"));\n} }\nfunction UpdateProductOptionDialogComponent_section_14_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementStart(0, \"section\");\n    ngcc0.elementStart(1, \"label\");\n    ngcc0.text(2);\n    ngcc0.pipe(3, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.element(4, \"vdr-tabbed-custom-fields\", 10);\n    ngcc0.pipe(5, \"hasPermission\");\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const ctx_r3 = ngcc0.nextContext();\n    ngcc0.advance(2);\n    ngcc0.textInterpolate(ngcc0.pipeBind1(3, 4, \"common.custom-fields\"));\n    ngcc0.advance(2);\n    ngcc0.property(\"customFields\", ctx_r3.customFields)(\"customFieldsFormGroup\", ctx_r3.customFieldsForm)(\"readonly\", !ngcc0.pipeBind1(5, 6, ngcc0.pureFunction0(8, _c20)));\n} }\nfunction UpdateProductOptionDialogComponent_ng_template_15_Template(rf, ctx) { if (rf & 1) {\n    const _r6 = ngcc0.getCurrentView();\n    ngcc0.elementStart(0, \"button\", 11);\n    ngcc0.listener(\"click\", function UpdateProductOptionDialogComponent_ng_template_15_Template_button_click_0_listener() { ngcc0.restoreView(_r6); const ctx_r5 = ngcc0.nextContext(); return ctx_r5.cancel(); });\n    ngcc0.text(1);\n    ngcc0.pipe(2, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.elementStart(3, \"button\", 12);\n    ngcc0.listener(\"click\", function UpdateProductOptionDialogComponent_ng_template_15_Template_button_click_3_listener() { ngcc0.restoreView(_r6); const ctx_r7 = ngcc0.nextContext(); return ctx_r7.update(); });\n    ngcc0.text(4);\n    ngcc0.pipe(5, \"translate\");\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const ctx_r4 = ngcc0.nextContext();\n    const _r1 = ngcc0.reference(4);\n    const _r2 = ngcc0.reference(8);\n    ngcc0.advance(1);\n    ngcc0.textInterpolate(ngcc0.pipeBind1(2, 3, \"common.cancel\"));\n    ngcc0.advance(2);\n    ngcc0.property(\"disabled\", _r1.invalid || _r2.invalid || _r1.pristine && _r2.pristine && ctx_r4.customFieldsForm.pristine);\n    ngcc0.advance(1);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(5, 5, \"catalog.update-product-option\"), \" \");\n} }\nfunction ProductVariantsListComponent_div_1_ng_container_1_clr_toggle_wrapper_16_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementStart(0, \"clr-toggle-wrapper\");\n    ngcc0.element(1, \"input\", 45);\n    ngcc0.elementStart(2, \"label\");\n    ngcc0.text(3);\n    ngcc0.pipe(4, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    ngcc0.advance(3);\n    ngcc0.textInterpolate(ngcc0.pipeBind1(4, 1, \"common.enabled\"));\n} }\nfunction ProductVariantsListComponent_div_1_ng_container_1_clr_select_container_25_option_5_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementStart(0, \"option\", 48);\n    ngcc0.text(1);\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const taxCategory_r19 = ctx.$implicit;\n    ngcc0.property(\"value\", taxCategory_r19.id);\n    ngcc0.advance(1);\n    ngcc0.textInterpolate1(\" \", taxCategory_r19.name, \" \");\n} }\nfunction ProductVariantsListComponent_div_1_ng_container_1_clr_select_container_25_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementStart(0, \"clr-select-container\");\n    ngcc0.elementStart(1, \"label\");\n    ngcc0.text(2);\n    ngcc0.pipe(3, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.elementStart(4, \"select\", 46);\n    ngcc0.template(5, ProductVariantsListComponent_div_1_ng_container_1_clr_select_container_25_option_5_Template, 2, 2, \"option\", 47);\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const ctx_r6 = ngcc0.nextContext(3);\n    ngcc0.advance(2);\n    ngcc0.textInterpolate(ngcc0.pipeBind1(3, 2, \"catalog.tax-category\"));\n    ngcc0.advance(3);\n    ngcc0.property(\"ngForOf\", ctx_r6.taxCategories);\n} }\nfunction ProductVariantsListComponent_div_1_ng_container_1_ng_template_26_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementStart(0, \"label\", 29);\n    ngcc0.text(1);\n    ngcc0.pipe(2, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.elementStart(3, \"div\", 49);\n    ngcc0.text(4);\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const formGroup_r4 = ngcc0.nextContext().ngIf;\n    const ctx_r8 = ngcc0.nextContext(2);\n    ngcc0.advance(1);\n    ngcc0.textInterpolate(ngcc0.pipeBind1(2, 2, \"catalog.tax-category\"));\n    ngcc0.advance(3);\n    ngcc0.textInterpolate1(\" \", ctx_r8.getTaxCategoryName(formGroup_r4), \" \");\n} }\nfunction ProductVariantsListComponent_div_1_ng_container_1_vdr_currency_input_33_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.element(0, \"vdr-currency-input\", 50);\n    ngcc0.pipe(1, \"hasPermission\");\n} if (rf & 2) {\n    const variant_r1 = ngcc0.nextContext(2).$implicit;\n    const ctx_r9 = ngcc0.nextContext();\n    ngcc0.property(\"currencyCode\", variant_r1.currencyCode)(\"readonly\", !ngcc0.pipeBind1(1, 2, ctx_r9.updatePermission));\n} }\nfunction ProductVariantsListComponent_div_1_ng_container_1_vdr_currency_input_34_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.element(0, \"vdr-currency-input\", 51);\n    ngcc0.pipe(1, \"hasPermission\");\n} if (rf & 2) {\n    const variant_r1 = ngcc0.nextContext(2).$implicit;\n    const ctx_r10 = ngcc0.nextContext();\n    ngcc0.property(\"currencyCode\", variant_r1.currencyCode)(\"readonly\", !ngcc0.pipeBind1(1, 2, ctx_r10.updatePermission));\n} }\nfunction ProductVariantsListComponent_div_1_ng_container_1_clr_select_container_37_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementStart(0, \"clr-select-container\");\n    ngcc0.elementStart(1, \"label\");\n    ngcc0.text(2);\n    ngcc0.pipe(3, \"translate\");\n    ngcc0.element(4, \"vdr-help-tooltip\", 27);\n    ngcc0.pipe(5, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.elementStart(6, \"select\", 52);\n    ngcc0.elementStart(7, \"option\", 48);\n    ngcc0.text(8);\n    ngcc0.pipe(9, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.elementStart(10, \"option\", 48);\n    ngcc0.text(11);\n    ngcc0.pipe(12, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.elementStart(13, \"option\", 48);\n    ngcc0.text(14);\n    ngcc0.pipe(15, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const ctx_r11 = ngcc0.nextContext(3);\n    ngcc0.advance(2);\n    ngcc0.textInterpolate1(\"\", ngcc0.pipeBind1(3, 8, \"catalog.track-inventory\"), \" \");\n    ngcc0.advance(2);\n    ngcc0.property(\"content\", ngcc0.pipeBind1(5, 10, \"catalog.track-inventory-tooltip\"));\n    ngcc0.advance(3);\n    ngcc0.property(\"value\", ctx_r11.GlobalFlag.TRUE);\n    ngcc0.advance(1);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(9, 12, \"catalog.track-inventory-true\"), \" \");\n    ngcc0.advance(2);\n    ngcc0.property(\"value\", ctx_r11.GlobalFlag.FALSE);\n    ngcc0.advance(1);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(12, 14, \"catalog.track-inventory-false\"), \" \");\n    ngcc0.advance(2);\n    ngcc0.property(\"value\", ctx_r11.GlobalFlag.INHERIT);\n    ngcc0.advance(1);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(15, 16, \"catalog.track-inventory-inherit\"), \" \");\n} }\nfunction ProductVariantsListComponent_div_1_ng_container_1_section_81_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementStart(0, \"section\", 53);\n    ngcc0.element(1, \"vdr-tabbed-custom-fields\", 54);\n    ngcc0.pipe(2, \"hasPermission\");\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const formGroup_r4 = ngcc0.nextContext().ngIf;\n    const ctx_r12 = ngcc0.nextContext(2);\n    ngcc0.advance(1);\n    ngcc0.property(\"customFields\", ctx_r12.customFields)(\"compact\", true)(\"customFieldsFormGroup\", formGroup_r4.get(\"customFields\"))(\"readonly\", !ngcc0.pipeBind1(2, 4, ctx_r12.updatePermission));\n} }\nfunction ProductVariantsListComponent_div_1_ng_container_1_div_85_vdr_chip_2_Template(rf, ctx) { if (rf & 1) {\n    const _r27 = ngcc0.getCurrentView();\n    ngcc0.elementStart(0, \"vdr-chip\", 58);\n    ngcc0.listener(\"iconClick\", function ProductVariantsListComponent_div_1_ng_container_1_div_85_vdr_chip_2_Template_vdr_chip_iconClick_0_listener() { const restoredCtx = ngcc0.restoreView(_r27); const option_r25 = restoredCtx.$implicit; const ctx_r26 = ngcc0.nextContext(4); return ctx_r26.editOption(option_r25); });\n    ngcc0.pipe(1, \"hasPermission\");\n    ngcc0.elementStart(2, \"span\", 59);\n    ngcc0.text(3);\n    ngcc0.elementEnd();\n    ngcc0.text(4);\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const option_r25 = ctx.$implicit;\n    const ctx_r24 = ngcc0.nextContext(4);\n    ngcc0.property(\"colorFrom\", ctx_r24.optionGroupName(option_r25.groupId))(\"invert\", true)(\"icon\", ngcc0.pipeBind1(1, 5, ctx_r24.updatePermission) && \"pencil\");\n    ngcc0.advance(3);\n    ngcc0.textInterpolate(ctx_r24.optionGroupName(option_r25.groupId));\n    ngcc0.advance(1);\n    ngcc0.textInterpolate1(\" \", ctx_r24.optionName(option_r25), \" \");\n} }\nconst _c38 = function () { return [\"./\", \"options\"]; };\nfunction ProductVariantsListComponent_div_1_ng_container_1_div_85_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementStart(0, \"div\");\n    ngcc0.elementStart(1, \"div\", 55);\n    ngcc0.template(2, ProductVariantsListComponent_div_1_ng_container_1_div_85_vdr_chip_2_Template, 5, 7, \"vdr-chip\", 56);\n    ngcc0.pipe(3, \"sort\");\n    ngcc0.elementStart(4, \"a\", 57);\n    ngcc0.text(5);\n    ngcc0.pipe(6, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const variant_r1 = ngcc0.nextContext(2).$implicit;\n    ngcc0.advance(2);\n    ngcc0.property(\"ngForOf\", ngcc0.pipeBind2(3, 3, variant_r1.options, \"groupId\"));\n    ngcc0.advance(2);\n    ngcc0.property(\"routerLink\", ngcc0.pureFunction0(8, _c38));\n    ngcc0.advance(1);\n    ngcc0.textInterpolate1(\"\", ngcc0.pipeBind1(6, 6, \"catalog.edit-options\"), \"...\");\n} }\nfunction ProductVariantsListComponent_div_1_ng_container_1_vdr_facet_value_chip_88_Template(rf, ctx) { if (rf & 1) {\n    const _r32 = ngcc0.getCurrentView();\n    ngcc0.elementStart(0, \"vdr-facet-value-chip\", 60);\n    ngcc0.listener(\"remove\", function ProductVariantsListComponent_div_1_ng_container_1_vdr_facet_value_chip_88_Template_vdr_facet_value_chip_remove_0_listener() { const restoredCtx = ngcc0.restoreView(_r32); const facetValue_r29 = restoredCtx.$implicit; const variant_r1 = ngcc0.nextContext(2).$implicit; const ctx_r30 = ngcc0.nextContext(); return ctx_r30.removeFacetValue(variant_r1, facetValue_r29.id); });\n    ngcc0.pipe(1, \"hasPermission\");\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const facetValue_r29 = ctx.$implicit;\n    const ctx_r14 = ngcc0.nextContext(3);\n    ngcc0.property(\"facetValue\", facetValue_r29)(\"removable\", ngcc0.pipeBind1(1, 2, ctx_r14.updatePermission));\n} }\nfunction ProductVariantsListComponent_div_1_ng_container_1_vdr_facet_value_chip_89_Template(rf, ctx) { if (rf & 1) {\n    const _r36 = ngcc0.getCurrentView();\n    ngcc0.elementStart(0, \"vdr-facet-value-chip\", 60);\n    ngcc0.listener(\"remove\", function ProductVariantsListComponent_div_1_ng_container_1_vdr_facet_value_chip_89_Template_vdr_facet_value_chip_remove_0_listener() { const restoredCtx = ngcc0.restoreView(_r36); const facetValue_r33 = restoredCtx.$implicit; const variant_r1 = ngcc0.nextContext(2).$implicit; const ctx_r34 = ngcc0.nextContext(); return ctx_r34.removeFacetValue(variant_r1, facetValue_r33.id); });\n    ngcc0.pipe(1, \"hasPermission\");\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const facetValue_r33 = ctx.$implicit;\n    const ctx_r15 = ngcc0.nextContext(3);\n    ngcc0.property(\"facetValue\", facetValue_r33)(\"removable\", ngcc0.pipeBind1(1, 2, ctx_r15.updatePermission));\n} }\nfunction ProductVariantsListComponent_div_1_ng_container_1_button_90_Template(rf, ctx) { if (rf & 1) {\n    const _r39 = ngcc0.getCurrentView();\n    ngcc0.elementStart(0, \"button\", 61);\n    ngcc0.listener(\"click\", function ProductVariantsListComponent_div_1_ng_container_1_button_90_Template_button_click_0_listener() { ngcc0.restoreView(_r39); const variant_r1 = ngcc0.nextContext(2).$implicit; const ctx_r37 = ngcc0.nextContext(); return ctx_r37.selectFacetValueClick.emit([variant_r1.id]); });\n    ngcc0.element(1, \"clr-icon\", 62);\n    ngcc0.text(2);\n    ngcc0.pipe(3, \"translate\");\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    ngcc0.advance(2);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(3, 1, \"catalog.add-facets\"), \" \");\n} }\nfunction ProductVariantsListComponent_div_1_ng_container_1_ng_container_91_div_1_ng_container_2_vdr_chip_1_Template(rf, ctx) { if (rf & 1) {\n    const _r46 = ngcc0.getCurrentView();\n    ngcc0.elementStart(0, \"vdr-chip\", 69);\n    ngcc0.listener(\"iconClick\", function ProductVariantsListComponent_div_1_ng_container_1_ng_container_91_div_1_ng_container_2_vdr_chip_1_Template_vdr_chip_iconClick_0_listener() { ngcc0.restoreView(_r46); const channel_r42 = ngcc0.nextContext().$implicit; const variant_r1 = ngcc0.nextContext(4).$implicit; const ctx_r44 = ngcc0.nextContext(); return ctx_r44.removeFromChannel.emit({ channelId: channel_r42.id, variant: variant_r1 }); });\n    ngcc0.pipe(1, \"translate\");\n    ngcc0.element(2, \"vdr-channel-badge\", 70);\n    ngcc0.text(3);\n    ngcc0.pipe(4, \"channelCodeToLabel\");\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const channel_r42 = ngcc0.nextContext().$implicit;\n    ngcc0.property(\"title\", ngcc0.pipeBind2(1, 3, \"catalog.remove-from-channel\", ngcc0.pureFunction1(8, _c18, channel_r42.code)));\n    ngcc0.advance(2);\n    ngcc0.property(\"channelCode\", channel_r42.code);\n    ngcc0.advance(1);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(4, 6, channel_r42.code), \" \");\n} }\nfunction ProductVariantsListComponent_div_1_ng_container_1_ng_container_91_div_1_ng_container_2_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementContainerStart(0);\n    ngcc0.template(1, ProductVariantsListComponent_div_1_ng_container_1_ng_container_91_div_1_ng_container_2_vdr_chip_1_Template, 5, 10, \"vdr-chip\", 68);\n    ngcc0.elementContainerEnd();\n} if (rf & 2) {\n    const channel_r42 = ctx.$implicit;\n    const ctx_r41 = ngcc0.nextContext(5);\n    ngcc0.advance(1);\n    ngcc0.property(\"ngIf\", !ctx_r41.isDefaultChannel(channel_r42.code));\n} }\nfunction ProductVariantsListComponent_div_1_ng_container_1_ng_container_91_div_1_Template(rf, ctx) { if (rf & 1) {\n    const _r51 = ngcc0.getCurrentView();\n    ngcc0.elementStart(0, \"div\", 13);\n    ngcc0.elementStart(1, \"div\", 64);\n    ngcc0.template(2, ProductVariantsListComponent_div_1_ng_container_1_ng_container_91_div_1_ng_container_2_Template, 2, 1, \"ng-container\", 65);\n    ngcc0.elementStart(3, \"button\", 66);\n    ngcc0.listener(\"click\", function ProductVariantsListComponent_div_1_ng_container_1_ng_container_91_div_1_Template_button_click_3_listener() { ngcc0.restoreView(_r51); const variant_r1 = ngcc0.nextContext(3).$implicit; const ctx_r49 = ngcc0.nextContext(); return ctx_r49.assignToChannel.emit(variant_r1); });\n    ngcc0.element(4, \"clr-icon\", 67);\n    ngcc0.text(5);\n    ngcc0.pipe(6, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const variant_r1 = ngcc0.nextContext(3).$implicit;\n    ngcc0.advance(2);\n    ngcc0.property(\"ngForOf\", variant_r1.channels);\n    ngcc0.advance(3);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(6, 2, \"catalog.assign-to-channel\"), \" \");\n} }\nfunction ProductVariantsListComponent_div_1_ng_container_1_ng_container_91_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementContainerStart(0);\n    ngcc0.template(1, ProductVariantsListComponent_div_1_ng_container_1_ng_container_91_div_1_Template, 7, 4, \"div\", 63);\n    ngcc0.elementContainerEnd();\n} }\nfunction ProductVariantsListComponent_div_1_ng_container_1_Template(rf, ctx) { if (rf & 1) {\n    const _r55 = ngcc0.getCurrentView();\n    ngcc0.elementContainerStart(0, 4);\n    ngcc0.elementStart(1, \"div\", 5);\n    ngcc0.elementStart(2, \"div\", 6);\n    ngcc0.elementStart(3, \"vdr-title-input\", 7);\n    ngcc0.pipe(4, \"hasPermission\");\n    ngcc0.elementStart(5, \"clr-input-container\");\n    ngcc0.element(6, \"input\", 8);\n    ngcc0.pipe(7, \"hasPermission\");\n    ngcc0.pipe(8, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementStart(9, \"vdr-title-input\", 9);\n    ngcc0.pipe(10, \"hasPermission\");\n    ngcc0.elementStart(11, \"clr-input-container\");\n    ngcc0.element(12, \"input\", 10);\n    ngcc0.pipe(13, \"hasPermission\");\n    ngcc0.pipe(14, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementStart(15, \"div\", 11);\n    ngcc0.template(16, ProductVariantsListComponent_div_1_ng_container_1_clr_toggle_wrapper_16_Template, 5, 3, \"clr-toggle-wrapper\", 12);\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementStart(17, \"div\", 13);\n    ngcc0.elementStart(18, \"div\", 14);\n    ngcc0.elementStart(19, \"div\", 15);\n    ngcc0.elementStart(20, \"vdr-assets\", 16);\n    ngcc0.listener(\"change\", function ProductVariantsListComponent_div_1_ng_container_1_Template_vdr_assets_change_20_listener($event) { ngcc0.restoreView(_r55); const variant_r1 = ngcc0.nextContext().$implicit; const ctx_r53 = ngcc0.nextContext(); return ctx_r53.onAssetChange(variant_r1.id, $event); });\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementStart(21, \"div\", 17);\n    ngcc0.elementStart(22, \"div\", 18);\n    ngcc0.elementStart(23, \"div\", 19);\n    ngcc0.elementStart(24, \"div\", 20);\n    ngcc0.template(25, ProductVariantsListComponent_div_1_ng_container_1_clr_select_container_25_Template, 6, 4, \"clr-select-container\", 21);\n    ngcc0.template(26, ProductVariantsListComponent_div_1_ng_container_1_ng_template_26_Template, 5, 4, \"ng-template\", null, 22, ngcc0.templateRefExtractor);\n    ngcc0.elementEnd();\n    ngcc0.elementStart(28, \"div\", 23);\n    ngcc0.elementStart(29, \"clr-input-container\");\n    ngcc0.elementStart(30, \"label\");\n    ngcc0.text(31);\n    ngcc0.pipe(32, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.template(33, ProductVariantsListComponent_div_1_ng_container_1_vdr_currency_input_33_Template, 2, 4, \"vdr-currency-input\", 24);\n    ngcc0.template(34, ProductVariantsListComponent_div_1_ng_container_1_vdr_currency_input_34_Template, 2, 4, \"vdr-currency-input\", 25);\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.element(35, \"vdr-variant-price-detail\", 26);\n    ngcc0.elementEnd();\n    ngcc0.elementStart(36, \"div\", 19);\n    ngcc0.template(37, ProductVariantsListComponent_div_1_ng_container_1_clr_select_container_37_Template, 16, 18, \"clr-select-container\", 12);\n    ngcc0.elementStart(38, \"clr-input-container\");\n    ngcc0.elementStart(39, \"label\");\n    ngcc0.text(40);\n    ngcc0.pipe(41, \"translate\");\n    ngcc0.element(42, \"vdr-help-tooltip\", 27);\n    ngcc0.pipe(43, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.element(44, \"input\", 28);\n    ngcc0.pipe(45, \"hasPermission\");\n    ngcc0.elementEnd();\n    ngcc0.elementStart(46, \"div\");\n    ngcc0.elementStart(47, \"label\", 29);\n    ngcc0.text(48);\n    ngcc0.pipe(49, \"translate\");\n    ngcc0.element(50, \"vdr-help-tooltip\", 27);\n    ngcc0.pipe(51, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.elementStart(52, \"div\", 30);\n    ngcc0.text(53);\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementStart(54, \"div\");\n    ngcc0.elementStart(55, \"label\", 29);\n    ngcc0.text(56);\n    ngcc0.pipe(57, \"translate\");\n    ngcc0.element(58, \"vdr-help-tooltip\", 27);\n    ngcc0.pipe(59, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.elementStart(60, \"div\", 30);\n    ngcc0.text(61);\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementStart(62, \"div\", 19);\n    ngcc0.elementStart(63, \"div\", 31);\n    ngcc0.elementStart(64, \"label\", 29);\n    ngcc0.text(65);\n    ngcc0.pipe(66, \"translate\");\n    ngcc0.element(67, \"vdr-help-tooltip\", 27);\n    ngcc0.pipe(68, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.elementStart(69, \"div\", 32);\n    ngcc0.elementStart(70, \"clr-input-container\");\n    ngcc0.element(71, \"input\", 33);\n    ngcc0.pipe(72, \"hasPermission\");\n    ngcc0.elementEnd();\n    ngcc0.elementStart(73, \"clr-toggle-wrapper\");\n    ngcc0.element(74, \"input\", 34);\n    ngcc0.pipe(75, \"hasPermission\");\n    ngcc0.elementStart(76, \"label\");\n    ngcc0.text(77);\n    ngcc0.pipe(78, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementStart(79, \"div\", 35);\n    ngcc0.elementStart(80, \"div\", 19);\n    ngcc0.template(81, ProductVariantsListComponent_div_1_ng_container_1_section_81_Template, 3, 6, \"section\", 36);\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementStart(82, \"div\", 13);\n    ngcc0.elementStart(83, \"div\", 37);\n    ngcc0.element(84, \"vdr-entity-info\", 38);\n    ngcc0.template(85, ProductVariantsListComponent_div_1_ng_container_1_div_85_Template, 7, 9, \"div\", 39);\n    ngcc0.element(86, \"div\", 40);\n    ngcc0.elementStart(87, \"div\", 41);\n    ngcc0.template(88, ProductVariantsListComponent_div_1_ng_container_1_vdr_facet_value_chip_88_Template, 2, 4, \"vdr-facet-value-chip\", 42);\n    ngcc0.template(89, ProductVariantsListComponent_div_1_ng_container_1_vdr_facet_value_chip_89_Template, 2, 4, \"vdr-facet-value-chip\", 42);\n    ngcc0.template(90, ProductVariantsListComponent_div_1_ng_container_1_button_90_Template, 4, 3, \"button\", 43);\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.template(91, ProductVariantsListComponent_div_1_ng_container_1_ng_container_91_Template, 2, 0, \"ng-container\", 44);\n    ngcc0.elementContainerEnd();\n} if (rf & 2) {\n    const formGroup_r4 = ctx.ngIf;\n    const _r7 = ngcc0.reference(27);\n    const variant_r1 = ngcc0.nextContext().$implicit;\n    const ctx_r3 = ngcc0.nextContext();\n    let tmp_41_0;\n    ngcc0.property(\"formGroup\", formGroup_r4);\n    ngcc0.advance(3);\n    ngcc0.property(\"readonly\", !ngcc0.pipeBind1(4, 55, ctx_r3.updatePermission));\n    ngcc0.advance(3);\n    ngcc0.property(\"readonly\", !ngcc0.pipeBind1(7, 57, ctx_r3.updatePermission))(\"placeholder\", ngcc0.pipeBind1(8, 59, \"catalog.sku\"));\n    ngcc0.advance(3);\n    ngcc0.property(\"readonly\", !ngcc0.pipeBind1(10, 61, ctx_r3.updatePermission));\n    ngcc0.advance(3);\n    ngcc0.property(\"readonly\", !ngcc0.pipeBind1(13, 63, ctx_r3.updatePermission))(\"placeholder\", ngcc0.pipeBind1(14, 65, \"common.name\"));\n    ngcc0.advance(4);\n    ngcc0.property(\"vdrIfPermissions\", ctx_r3.updatePermission);\n    ngcc0.advance(4);\n    ngcc0.property(\"compact\", true)(\"assets\", (ctx_r3.pendingAssetChanges[variant_r1.id] == null ? null : ctx_r3.pendingAssetChanges[variant_r1.id].assets) || variant_r1.assets)(\"featuredAsset\", (ctx_r3.pendingAssetChanges[variant_r1.id] == null ? null : ctx_r3.pendingAssetChanges[variant_r1.id].featuredAsset) || variant_r1.featuredAsset)(\"updatePermissions\", ctx_r3.updatePermission);\n    ngcc0.advance(5);\n    ngcc0.property(\"vdrIfPermissions\", ctx_r3.updatePermission)(\"vdrIfPermissionsElse\", _r7);\n    ngcc0.advance(6);\n    ngcc0.textInterpolate(ngcc0.pipeBind1(32, 67, \"catalog.price\"));\n    ngcc0.advance(2);\n    ngcc0.property(\"ngIf\", !ctx_r3.channelPriceIncludesTax);\n    ngcc0.advance(1);\n    ngcc0.property(\"ngIf\", ctx_r3.channelPriceIncludesTax);\n    ngcc0.advance(1);\n    ngcc0.property(\"price\", formGroup_r4.get(\"price\").value)(\"currencyCode\", variant_r1.currencyCode)(\"priceIncludesTax\", ctx_r3.channelPriceIncludesTax)(\"taxCategoryId\", formGroup_r4.get(\"taxCategoryId\").value);\n    ngcc0.advance(2);\n    ngcc0.property(\"vdrIfPermissions\", ctx_r3.updatePermission);\n    ngcc0.advance(3);\n    ngcc0.textInterpolate1(\"\", ngcc0.pipeBind1(41, 69, \"catalog.stock-on-hand\"), \" \");\n    ngcc0.advance(2);\n    ngcc0.property(\"content\", ngcc0.pipeBind1(43, 71, \"catalog.stock-on-hand-tooltip\"));\n    ngcc0.advance(2);\n    ngcc0.classProp(\"inventory-untracked\", ctx_r3.inventoryIsNotTracked(formGroup_r4));\n    ngcc0.property(\"min\", ctx_r3.getStockOnHandMinValue(formGroup_r4))(\"readonly\", !ngcc0.pipeBind1(45, 73, ctx_r3.updatePermission))(\"vdrDisabled\", ctx_r3.inventoryIsNotTracked(formGroup_r4));\n    ngcc0.advance(2);\n    ngcc0.classProp(\"inventory-untracked\", ctx_r3.inventoryIsNotTracked(formGroup_r4));\n    ngcc0.advance(2);\n    ngcc0.textInterpolate1(\"\", ngcc0.pipeBind1(49, 75, \"catalog.stock-allocated\"), \" \");\n    ngcc0.advance(2);\n    ngcc0.property(\"content\", ngcc0.pipeBind1(51, 77, \"catalog.stock-allocated-tooltip\"));\n    ngcc0.advance(3);\n    ngcc0.textInterpolate1(\" \", variant_r1.stockAllocated, \" \");\n    ngcc0.advance(1);\n    ngcc0.classProp(\"inventory-untracked\", ctx_r3.inventoryIsNotTracked(formGroup_r4));\n    ngcc0.advance(2);\n    ngcc0.textInterpolate1(\"\", ngcc0.pipeBind1(57, 79, \"catalog.stock-saleable\"), \" \");\n    ngcc0.advance(2);\n    ngcc0.property(\"content\", ngcc0.pipeBind1(59, 81, \"catalog.stock-saleable-tooltip\"));\n    ngcc0.advance(3);\n    ngcc0.textInterpolate1(\" \", ctx_r3.getSaleableStockLevel(variant_r1), \" \");\n    ngcc0.advance(2);\n    ngcc0.classProp(\"inventory-untracked\", ctx_r3.inventoryIsNotTracked(formGroup_r4));\n    ngcc0.advance(2);\n    ngcc0.textInterpolate(ngcc0.pipeBind1(66, 83, \"catalog.out-of-stock-threshold\"));\n    ngcc0.advance(2);\n    ngcc0.property(\"content\", ngcc0.pipeBind1(68, 85, \"catalog.out-of-stock-threshold-tooltip\"));\n    ngcc0.advance(4);\n    ngcc0.property(\"formControl\", formGroup_r4.get(\"outOfStockThreshold\"))(\"readonly\", !ngcc0.pipeBind1(72, 87, ctx_r3.updatePermission))(\"vdrDisabled\", ((tmp_41_0 = formGroup_r4.get(\"useGlobalOutOfStockThreshold\")) == null ? null : tmp_41_0.value) !== false || ctx_r3.inventoryIsNotTracked(formGroup_r4));\n    ngcc0.advance(3);\n    ngcc0.property(\"vdrDisabled\", !ngcc0.pipeBind1(75, 89, ctx_r3.updatePermission) || ctx_r3.inventoryIsNotTracked(formGroup_r4));\n    ngcc0.advance(3);\n    ngcc0.textInterpolate2(\"\", ngcc0.pipeBind1(78, 91, \"catalog.use-global-value\"), \" (\", ctx_r3.globalOutOfStockThreshold, \")\");\n    ngcc0.advance(4);\n    ngcc0.property(\"ngIf\", ctx_r3.customFields.length);\n    ngcc0.advance(3);\n    ngcc0.property(\"entity\", variant_r1);\n    ngcc0.advance(1);\n    ngcc0.property(\"ngIf\", variant_r1.options.length);\n    ngcc0.advance(3);\n    ngcc0.property(\"ngForOf\", ctx_r3.existingFacetValues(variant_r1));\n    ngcc0.advance(1);\n    ngcc0.property(\"ngForOf\", ctx_r3.pendingFacetValues(variant_r1));\n    ngcc0.advance(1);\n    ngcc0.property(\"vdrIfPermissions\", ctx_r3.updatePermission);\n} }\nfunction ProductVariantsListComponent_div_1_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementStart(0, \"div\", 2);\n    ngcc0.template(1, ProductVariantsListComponent_div_1_ng_container_1_Template, 92, 93, \"ng-container\", 3);\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const variant_r1 = ctx.$implicit;\n    const ctx_r0 = ngcc0.nextContext();\n    let tmp_0_0;\n    let tmp_0_1;\n    ngcc0.classProp(\"disabled\", !((tmp_0_0 = ctx_r0.formGroupMap.get(variant_r1.id)) == null ? null : (tmp_0_1 = tmp_0_0.get(\"enabled\")) == null ? null : tmp_0_1.value));\n    ngcc0.advance(1);\n    ngcc0.property(\"ngIf\", ctx_r0.formGroupMap.get(variant_r1.id));\n} }\nconst _c39 = function () { return { itemsPerPage: 10, currentPage: 1 }; };\nfunction ProductVariantsTableComponent_ng_container_10_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementContainerStart(0);\n    ngcc0.elementStart(1, \"th\");\n    ngcc0.text(2);\n    ngcc0.elementEnd();\n    ngcc0.elementContainerEnd();\n} if (rf & 2) {\n    const optionGroup_r2 = ctx.$implicit;\n    ngcc0.advance(2);\n    ngcc0.textInterpolate(optionGroup_r2.name);\n} }\nfunction ProductVariantsTableComponent_tr_22_ng_container_1_img_4_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.element(0, \"img\", 18);\n    ngcc0.pipe(1, \"assetPreview\");\n} if (rf & 2) {\n    const featuredAsset_r13 = ctx.ngIf;\n    ngcc0.property(\"src\", ngcc0.pipeBind2(1, 1, featuredAsset_r13, \"tiny\"), ngcc0.sanitizeUrl);\n} }\nfunction ProductVariantsTableComponent_tr_22_ng_container_1_ng_template_5_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementStart(0, \"div\", 19);\n    ngcc0.element(1, \"clr-icon\", 20);\n    ngcc0.elementEnd();\n} }\nfunction ProductVariantsTableComponent_tr_22_ng_container_1_ng_container_17_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementContainerStart(0);\n    ngcc0.elementStart(1, \"td\", 5);\n    ngcc0.pipe(2, \"stringToColor\");\n    ngcc0.text(3);\n    ngcc0.elementEnd();\n    ngcc0.elementContainerEnd();\n} if (rf & 2) {\n    const option_r14 = ctx.$implicit;\n    const formGroup_r6 = ngcc0.nextContext().ngIf;\n    const ctx_r10 = ngcc0.nextContext(2);\n    ngcc0.advance(1);\n    ngcc0.styleProp(\"color\", ngcc0.pipeBind1(2, 5, ctx_r10.optionGroupName(option_r14.groupId)));\n    ngcc0.classProp(\"disabled\", !formGroup_r6.get(\"enabled\").value);\n    ngcc0.advance(2);\n    ngcc0.textInterpolate1(\" \", option_r14.name, \" \");\n} }\nfunction ProductVariantsTableComponent_tr_22_ng_container_1_vdr_currency_input_21_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.element(0, \"vdr-currency-input\", 21);\n    ngcc0.pipe(1, \"hasPermission\");\n} if (rf & 2) {\n    const variant_r3 = ngcc0.nextContext(2).$implicit;\n    const ctx_r11 = ngcc0.nextContext();\n    ngcc0.property(\"currencyCode\", variant_r3.currencyCode)(\"readonly\", !ngcc0.pipeBind1(1, 2, ctx_r11.updatePermission));\n} }\nfunction ProductVariantsTableComponent_tr_22_ng_container_1_vdr_currency_input_22_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.element(0, \"vdr-currency-input\", 22);\n    ngcc0.pipe(1, \"hasPermission\");\n} if (rf & 2) {\n    const variant_r3 = ngcc0.nextContext(2).$implicit;\n    const ctx_r12 = ngcc0.nextContext();\n    ngcc0.property(\"currencyCode\", variant_r3.currencyCode)(\"readonly\", !ngcc0.pipeBind1(1, 2, ctx_r12.updatePermission));\n} }\nfunction ProductVariantsTableComponent_tr_22_ng_container_1_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementContainerStart(0, 4);\n    ngcc0.elementStart(1, \"td\", 5);\n    ngcc0.elementStart(2, \"div\", 6);\n    ngcc0.elementStart(3, \"div\", 7);\n    ngcc0.template(4, ProductVariantsTableComponent_tr_22_ng_container_1_img_4_Template, 2, 4, \"img\", 8);\n    ngcc0.template(5, ProductVariantsTableComponent_tr_22_ng_container_1_ng_template_5_Template, 2, 0, \"ng-template\", null, 9, ngcc0.templateRefExtractor);\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementStart(7, \"td\", 5);\n    ngcc0.elementStart(8, \"clr-input-container\");\n    ngcc0.element(9, \"input\", 10);\n    ngcc0.pipe(10, \"hasPermission\");\n    ngcc0.pipe(11, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementStart(12, \"td\", 5);\n    ngcc0.elementStart(13, \"clr-input-container\");\n    ngcc0.element(14, \"input\", 11);\n    ngcc0.pipe(15, \"hasPermission\");\n    ngcc0.pipe(16, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.template(17, ProductVariantsTableComponent_tr_22_ng_container_1_ng_container_17_Template, 4, 7, \"ng-container\", 1);\n    ngcc0.pipe(18, \"sort\");\n    ngcc0.elementStart(19, \"td\", 12);\n    ngcc0.elementStart(20, \"clr-input-container\");\n    ngcc0.template(21, ProductVariantsTableComponent_tr_22_ng_container_1_vdr_currency_input_21_Template, 2, 4, \"vdr-currency-input\", 13);\n    ngcc0.template(22, ProductVariantsTableComponent_tr_22_ng_container_1_vdr_currency_input_22_Template, 2, 4, \"vdr-currency-input\", 14);\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementStart(23, \"td\", 15);\n    ngcc0.elementStart(24, \"clr-input-container\");\n    ngcc0.element(25, \"input\", 16);\n    ngcc0.pipe(26, \"hasPermission\");\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementStart(27, \"td\", 15);\n    ngcc0.elementStart(28, \"clr-toggle-wrapper\");\n    ngcc0.element(29, \"input\", 17);\n    ngcc0.pipe(30, \"hasPermission\");\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementContainerEnd();\n} if (rf & 2) {\n    const formGroup_r6 = ctx.ngIf;\n    const _r8 = ngcc0.reference(6);\n    const variant_r3 = ngcc0.nextContext().$implicit;\n    const ctx_r5 = ngcc0.nextContext();\n    ngcc0.property(\"formGroup\", formGroup_r6);\n    ngcc0.advance(1);\n    ngcc0.classProp(\"disabled\", !formGroup_r6.get(\"enabled\").value);\n    ngcc0.advance(3);\n    ngcc0.property(\"ngIf\", ctx_r5.getFeaturedAsset(variant_r3))(\"ngIfElse\", _r8);\n    ngcc0.advance(3);\n    ngcc0.classProp(\"disabled\", !formGroup_r6.get(\"enabled\").value);\n    ngcc0.advance(2);\n    ngcc0.property(\"readonly\", !ngcc0.pipeBind1(10, 24, ctx_r5.updatePermission))(\"placeholder\", ngcc0.pipeBind1(11, 26, \"common.name\"));\n    ngcc0.advance(3);\n    ngcc0.classProp(\"disabled\", !formGroup_r6.get(\"enabled\").value);\n    ngcc0.advance(2);\n    ngcc0.property(\"readonly\", !ngcc0.pipeBind1(15, 28, ctx_r5.updatePermission))(\"placeholder\", ngcc0.pipeBind1(16, 30, \"catalog.sku\"));\n    ngcc0.advance(3);\n    ngcc0.property(\"ngForOf\", ngcc0.pipeBind2(18, 32, variant_r3.options, \"groupId\"));\n    ngcc0.advance(2);\n    ngcc0.classProp(\"disabled\", !formGroup_r6.get(\"enabled\").value);\n    ngcc0.advance(2);\n    ngcc0.property(\"ngIf\", !ctx_r5.channelPriceIncludesTax);\n    ngcc0.advance(1);\n    ngcc0.property(\"ngIf\", ctx_r5.channelPriceIncludesTax);\n    ngcc0.advance(1);\n    ngcc0.classProp(\"disabled\", !formGroup_r6.get(\"enabled\").value);\n    ngcc0.advance(2);\n    ngcc0.property(\"readonly\", !ngcc0.pipeBind1(26, 35, ctx_r5.updatePermission));\n    ngcc0.advance(2);\n    ngcc0.classProp(\"disabled\", !formGroup_r6.get(\"enabled\").value);\n    ngcc0.advance(2);\n    ngcc0.property(\"vdrDisabled\", !ngcc0.pipeBind1(30, 37, ctx_r5.updatePermission));\n} }\nfunction ProductVariantsTableComponent_tr_22_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementStart(0, \"tr\");\n    ngcc0.template(1, ProductVariantsTableComponent_tr_22_ng_container_1_Template, 31, 39, \"ng-container\", 3);\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const variant_r3 = ctx.$implicit;\n    const ctx_r1 = ngcc0.nextContext();\n    ngcc0.advance(1);\n    ngcc0.property(\"ngIf\", ctx_r1.formGroupMap.get(variant_r3.id));\n} }\nconst _c40 = function (a0) { return { rate: a0 }; };\nfunction VariantPriceDetailComponent_div_3_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementStart(0, \"div\", 2);\n    ngcc0.text(1);\n    ngcc0.pipe(2, \"translate\");\n    ngcc0.pipe(3, \"async\");\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const ctx_r0 = ngcc0.nextContext();\n    ngcc0.advance(1);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind2(2, 1, \"catalog.price-includes-tax-at\", ngcc0.pureFunction1(6, _c40, ngcc0.pipeBind1(3, 4, ctx_r0.taxRate$))), \"\\n\");\n} }\nconst _c41 = function (a0, a1) { return { price: a0, rate: a1 }; };\nfunction VariantPriceDetailComponent_div_4_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementStart(0, \"div\", 2);\n    ngcc0.text(1);\n    ngcc0.pipe(2, \"translate\");\n    ngcc0.pipe(3, \"localeCurrency\");\n    ngcc0.pipe(4, \"async\");\n    ngcc0.pipe(5, \"async\");\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const ctx_r1 = ngcc0.nextContext();\n    ngcc0.advance(1);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind2(2, 1, \"catalog.price-with-tax-in-default-zone\", ngcc0.pureFunction2(11, _c41, ngcc0.pipeBind2(3, 4, ngcc0.pipeBind1(4, 7, ctx_r1.grossPrice$), ctx_r1.currencyCode), ngcc0.pipeBind1(5, 9, ctx_r1.taxRate$))), \"\\n\");\n} }\nclass AssetDetailComponent extends BaseDetailComponent {\r\n    constructor(router, route, serverConfigService, notificationService, dataService, formBuilder) {\r\n        super(route, router, serverConfigService, dataService);\r\n        this.notificationService = notificationService;\r\n        this.dataService = dataService;\r\n        this.formBuilder = formBuilder;\r\n        this.detailForm = new FormGroup({});\r\n        this.customFields = this.getCustomFieldConfig('Asset');\r\n    }\r\n    ngOnInit() {\r\n        this.detailForm = new FormGroup({\r\n            name: new FormControl(''),\r\n            tags: new FormControl([]),\r\n            customFields: this.formBuilder.group(this.customFields.reduce((hash, field) => (Object.assign(Object.assign({}, hash), { [field.name]: '' })), {})),\r\n        });\r\n        this.init();\r\n    }\r\n    ngOnDestroy() {\r\n        this.destroy();\r\n    }\r\n    onAssetChange(event) {\r\n        var _a, _b;\r\n        (_a = this.detailForm.get('name')) === null || _a === void 0 ? void 0 : _a.setValue(event.name);\r\n        (_b = this.detailForm.get('tags')) === null || _b === void 0 ? void 0 : _b.setValue(event.tags);\r\n        this.detailForm.markAsDirty();\r\n    }\r\n    save() {\r\n        this.dataService.product\r\n            .updateAsset({\r\n            id: this.id,\r\n            name: this.detailForm.value.name,\r\n            tags: this.detailForm.value.tags,\r\n            customFields: this.detailForm.value.customFields,\r\n        })\r\n            .subscribe(() => {\r\n            this.notificationService.success(marker('common.notify-update-success'), { entity: 'Asset' });\r\n        }, err => {\r\n            this.notificationService.error(marker('common.notify-update-error'), {\r\n                entity: 'Asset',\r\n            });\r\n        });\r\n    }\r\n    setFormValues(entity, languageCode) {\r\n        var _a, _b;\r\n        (_a = this.detailForm.get('name')) === null || _a === void 0 ? void 0 : _a.setValue(entity.name);\r\n        (_b = this.detailForm.get('tags')) === null || _b === void 0 ? void 0 : _b.setValue(entity.tags);\r\n        if (this.customFields.length) {\r\n            this.setCustomFieldFormValues(this.customFields, this.detailForm.get(['customFields']), entity);\r\n        }\r\n    }\r\n}\nAssetDetailComponent.fac = function AssetDetailComponent_Factory(t) { return new (t || AssetDetailComponent)(ngcc0.directiveInject(ngcc1.Router), ngcc0.directiveInject(ngcc1.ActivatedRoute), ngcc0.directiveInject(ngcc2.ServerConfigService), ngcc0.directiveInject(ngcc2.NotificationService), ngcc0.directiveInject(ngcc2.DataService), ngcc0.directiveInject(ngcc3.FormBuilder)); };\nAssetDetailComponent.cmp = /*@__PURE__*/ ngcc0.defineComponent({ type: AssetDetailComponent, selectors: [[\"vdr-asset-detail\"]], features: [ngcc0.InheritDefinitionFeature], decls: 9, vars: 11, consts: [[3, \"entity\"], [\"locationId\", \"asset-detail\"], [\"class\", \"btn btn-primary\", 3, \"disabled\", \"click\", 4, \"vdrIfPermissions\"], [3, \"asset\", \"editable\", \"customFields\", \"customFieldsForm\", \"assetChange\"], [1, \"btn\", \"btn-primary\", 3, \"disabled\", \"click\"]], template: function AssetDetailComponent_Template(rf, ctx) { if (rf & 1) {\n        ngcc0.elementStart(0, \"vdr-action-bar\");\n        ngcc0.elementStart(1, \"vdr-ab-left\");\n        ngcc0.element(2, \"vdr-entity-info\", 0);\n        ngcc0.pipe(3, \"async\");\n        ngcc0.elementEnd();\n        ngcc0.elementStart(4, \"vdr-ab-right\");\n        ngcc0.element(5, \"vdr-action-bar-items\", 1);\n        ngcc0.template(6, AssetDetailComponent_button_6_Template, 3, 4, \"button\", 2);\n        ngcc0.elementEnd();\n        ngcc0.elementEnd();\n        ngcc0.elementStart(7, \"vdr-asset-preview\", 3);\n        ngcc0.listener(\"assetChange\", function AssetDetailComponent_Template_vdr_asset_preview_assetChange_7_listener($event) { return ctx.onAssetChange($event); });\n        ngcc0.pipe(8, \"async\");\n        ngcc0.elementEnd();\n    } if (rf & 2) {\n        ngcc0.advance(2);\n        ngcc0.property(\"entity\", ngcc0.pipeBind1(3, 6, ctx.entity$));\n        ngcc0.advance(4);\n        ngcc0.property(\"vdrIfPermissions\", ngcc0.pureFunction0(10, _c0));\n        ngcc0.advance(1);\n        ngcc0.property(\"asset\", ngcc0.pipeBind1(8, 8, ctx.entity$))(\"editable\", true)(\"customFields\", ctx.customFields)(\"customFieldsForm\", ctx.detailForm.get(\"customFields\"));\n    } }, directives: [ngcc2.ActionBarComponent, ngcc2.ActionBarLeftComponent, ngcc2.EntityInfoComponent, ngcc2.ActionBarRightComponent, ngcc2.ActionBarItemsComponent, ngcc2.IfPermissionsDirective, ngcc2.AssetPreviewComponent], pipes: [ngcc4.AsyncPipe, ngcc5.TranslatePipe], styles: [\"[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%}\"], changeDetection: 0 });\r\nAssetDetailComponent.ctorParameters = () => [\r\n    { type: Router },\r\n    { type: ActivatedRoute },\r\n    { type: ServerConfigService },\r\n    { type: NotificationService },\r\n    { type: DataService },\r\n    { type: FormBuilder }\r\n];\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ngcc0.setClassMetadata(AssetDetailComponent, [{\n        type: Component,\n        args: [{\n                selector: 'vdr-asset-detail',\n                template: \"<vdr-action-bar>\\r\\n    <vdr-ab-left>\\r\\n        <vdr-entity-info [entity]=\\\"entity$ | async\\\"></vdr-entity-info>\\r\\n    </vdr-ab-left>\\r\\n\\r\\n    <vdr-ab-right>\\r\\n        <vdr-action-bar-items locationId=\\\"asset-detail\\\"></vdr-action-bar-items>\\r\\n        <button\\r\\n            *vdrIfPermissions=\\\"['UpdateCatalog', 'UpdateAsset']\\\"\\r\\n            class=\\\"btn btn-primary\\\"\\r\\n            (click)=\\\"save()\\\"\\r\\n            [disabled]=\\\"detailForm.invalid || detailForm.pristine\\\"\\r\\n        >\\r\\n            {{ 'common.update' | translate }}\\r\\n        </button>\\r\\n    </vdr-ab-right>\\r\\n</vdr-action-bar>\\r\\n<vdr-asset-preview\\r\\n    [asset]=\\\"entity$ | async\\\"\\r\\n    [editable]=\\\"true\\\"\\r\\n    [customFields]=\\\"customFields\\\"\\r\\n    [customFieldsForm]=\\\"detailForm.get('customFields')\\\"\\r\\n    (assetChange)=\\\"onAssetChange($event)\\\"\\r\\n></vdr-asset-preview>\\r\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\":host{display:flex;flex-direction:column;height:100%}\\n\"]\n            }]\n    }], function () { return [{ type: ngcc1.Router }, { type: ngcc1.ActivatedRoute }, { type: ngcc2.ServerConfigService }, { type: ngcc2.NotificationService }, { type: ngcc2.DataService }, { type: ngcc3.FormBuilder }]; }, null); })();\n\nclass AssetListComponent extends BaseListComponent {\r\n    constructor(notificationService, modalService, dataService, router, route) {\r\n        super(router, route);\r\n        this.notificationService = notificationService;\r\n        this.modalService = modalService;\r\n        this.dataService = dataService;\r\n        this.searchTerm$ = new BehaviorSubject(undefined);\r\n        this.filterByTags$ = new BehaviorSubject(undefined);\r\n        this.uploading = false;\r\n        super.setQueryFn((...args) => this.dataService.product.getAssetList(...args), data => data.assets, (skip, take) => {\r\n            var _a;\r\n            const searchTerm = this.searchTerm$.value;\r\n            const tags = (_a = this.filterByTags$.value) === null || _a === void 0 ? void 0 : _a.map(t => t.value);\r\n            return {\r\n                options: Object.assign(Object.assign({ skip,\r\n                    take }, (searchTerm\r\n                    ? {\r\n                        filter: {\r\n                            name: { contains: searchTerm },\r\n                        },\r\n                    }\r\n                    : {})), { sort: {\r\n                        createdAt: SortOrder.DESC,\r\n                    }, tags, tagsOperator: LogicalOperator.AND }),\r\n            };\r\n        }, { take: 25, skip: 0 });\r\n    }\r\n    ngOnInit() {\r\n        super.ngOnInit();\r\n        this.paginationConfig$ = combineLatest(this.itemsPerPage$, this.currentPage$, this.totalItems$).pipe(map(([itemsPerPage, currentPage, totalItems]) => ({ itemsPerPage, currentPage, totalItems })));\r\n        this.searchTerm$.pipe(debounceTime(250), takeUntil(this.destroy$)).subscribe(() => this.refresh());\r\n        this.filterByTags$.pipe(takeUntil(this.destroy$)).subscribe(() => this.refresh());\r\n        this.allTags$ = this.dataService.product.getTagList().mapStream(data => data.tags.items);\r\n    }\r\n    filesSelected(files) {\r\n        if (files.length) {\r\n            this.uploading = true;\r\n            this.dataService.product\r\n                .createAssets(files)\r\n                .pipe(finalize(() => (this.uploading = false)))\r\n                .subscribe(({ createAssets }) => {\r\n                let successCount = 0;\r\n                for (const result of createAssets) {\r\n                    switch (result.__typename) {\r\n                        case 'Asset':\r\n                            successCount++;\r\n                            break;\r\n                        case 'MimeTypeError':\r\n                            this.notificationService.error(result.message);\r\n                            break;\r\n                    }\r\n                }\r\n                if (0 < successCount) {\r\n                    super.refresh();\r\n                    this.notificationService.success(marker('asset.notify-create-assets-success'), {\r\n                        count: successCount,\r\n                    });\r\n                }\r\n            });\r\n        }\r\n    }\r\n    deleteAssets(assets) {\r\n        this.showModalAndDelete(assets.map(a => a.id))\r\n            .pipe(switchMap(response => {\r\n            if (response.result === DeletionResult.DELETED) {\r\n                return [true];\r\n            }\r\n            else {\r\n                return this.showModalAndDelete(assets.map(a => a.id), response.message || '').pipe(map(r => r.result === DeletionResult.DELETED));\r\n            }\r\n        }))\r\n            .subscribe(() => {\r\n            this.notificationService.success(marker('common.notify-delete-success'), {\r\n                entity: 'Assets',\r\n            });\r\n            this.refresh();\r\n        }, err => {\r\n            this.notificationService.error(marker('common.notify-delete-error'), {\r\n                entity: 'Assets',\r\n            });\r\n        });\r\n    }\r\n    showModalAndDelete(assetIds, message) {\r\n        return this.modalService\r\n            .dialog({\r\n            title: marker('catalog.confirm-delete-assets'),\r\n            translationVars: {\r\n                count: assetIds.length,\r\n            },\r\n            body: message,\r\n            buttons: [\r\n                { type: 'secondary', label: marker('common.cancel') },\r\n                { type: 'danger', label: marker('common.delete'), returnValue: true },\r\n            ],\r\n        })\r\n            .pipe(switchMap(res => (res ? this.dataService.product.deleteAssets(assetIds, !!message) : EMPTY)), map(res => res.deleteAssets));\r\n    }\r\n}\nAssetListComponent.fac = function AssetListComponent_Factory(t) { return new (t || AssetListComponent)(ngcc0.directiveInject(ngcc2.NotificationService), ngcc0.directiveInject(ngcc2.ModalService), ngcc0.directiveInject(ngcc2.DataService), ngcc0.directiveInject(ngcc1.Router), ngcc0.directiveInject(ngcc1.ActivatedRoute)); };\nAssetListComponent.cmp = /*@__PURE__*/ ngcc0.defineComponent({ type: AssetListComponent, selectors: [[\"vdr-asset-list\"]], features: [ngcc0.InheritDefinitionFeature], decls: 19, vars: 31, consts: [[3, \"grow\"], [1, \"pr4\", \"mt1\", 3, \"tags\", \"searchTermChange\", \"tagsChange\"], [\"locationId\", \"asset-list\"], [\"dropZoneTarget\", \".content-area\", 3, \"uploading\", \"selectFiles\"], [3, \"assets\", \"multiSelect\", \"canDelete\", \"deleteAssets\"], [1, \"paging-controls\"], [3, \"itemsPerPage\", \"itemsPerPageChange\"], [3, \"currentPage\", \"itemsPerPage\", \"totalItems\", \"pageChange\"]], template: function AssetListComponent_Template(rf, ctx) { if (rf & 1) {\n        ngcc0.elementStart(0, \"vdr-action-bar\");\n        ngcc0.elementStart(1, \"vdr-ab-left\", 0);\n        ngcc0.elementStart(2, \"vdr-asset-search-input\", 1);\n        ngcc0.listener(\"searchTermChange\", function AssetListComponent_Template_vdr_asset_search_input_searchTermChange_2_listener($event) { return ctx.searchTerm$.next($event); })(\"tagsChange\", function AssetListComponent_Template_vdr_asset_search_input_tagsChange_2_listener($event) { return ctx.filterByTags$.next($event); });\n        ngcc0.pipe(3, \"async\");\n        ngcc0.elementEnd();\n        ngcc0.elementEnd();\n        ngcc0.elementStart(4, \"vdr-ab-right\");\n        ngcc0.element(5, \"vdr-action-bar-items\", 2);\n        ngcc0.elementStart(6, \"vdr-asset-file-input\", 3);\n        ngcc0.listener(\"selectFiles\", function AssetListComponent_Template_vdr_asset_file_input_selectFiles_6_listener($event) { return ctx.filesSelected($event); });\n        ngcc0.elementEnd();\n        ngcc0.elementEnd();\n        ngcc0.elementEnd();\n        ngcc0.elementStart(7, \"vdr-asset-gallery\", 4);\n        ngcc0.listener(\"deleteAssets\", function AssetListComponent_Template_vdr_asset_gallery_deleteAssets_7_listener($event) { return ctx.deleteAssets($event); });\n        ngcc0.pipe(8, \"paginate\");\n        ngcc0.pipe(9, \"async\");\n        ngcc0.pipe(10, \"async\");\n        ngcc0.pipe(11, \"hasPermission\");\n        ngcc0.elementEnd();\n        ngcc0.elementStart(12, \"div\", 5);\n        ngcc0.elementStart(13, \"vdr-items-per-page-controls\", 6);\n        ngcc0.listener(\"itemsPerPageChange\", function AssetListComponent_Template_vdr_items_per_page_controls_itemsPerPageChange_13_listener($event) { return ctx.setItemsPerPage($event); });\n        ngcc0.pipe(14, \"async\");\n        ngcc0.elementEnd();\n        ngcc0.elementStart(15, \"vdr-pagination-controls\", 7);\n        ngcc0.listener(\"pageChange\", function AssetListComponent_Template_vdr_pagination_controls_pageChange_15_listener($event) { return ctx.setPageNumber($event); });\n        ngcc0.pipe(16, \"async\");\n        ngcc0.pipe(17, \"async\");\n        ngcc0.pipe(18, \"async\");\n        ngcc0.elementEnd();\n        ngcc0.elementEnd();\n    } if (rf & 2) {\n        ngcc0.advance(1);\n        ngcc0.property(\"grow\", true);\n        ngcc0.advance(1);\n        ngcc0.property(\"tags\", ngcc0.pipeBind1(3, 10, ctx.allTags$));\n        ngcc0.advance(4);\n        ngcc0.property(\"uploading\", ctx.uploading);\n        ngcc0.advance(1);\n        ngcc0.property(\"assets\", ngcc0.pipeBind2(8, 12, ngcc0.pipeBind1(9, 15, ctx.items$), ngcc0.pipeBind1(10, 17, ctx.paginationConfig$) || ngcc0.pureFunction0(29, _c1)))(\"multiSelect\", true)(\"canDelete\", ngcc0.pipeBind1(11, 19, ngcc0.pureFunction0(30, _c2)));\n        ngcc0.advance(6);\n        ngcc0.property(\"itemsPerPage\", ngcc0.pipeBind1(14, 21, ctx.itemsPerPage$));\n        ngcc0.advance(2);\n        ngcc0.property(\"currentPage\", ngcc0.pipeBind1(16, 23, ctx.currentPage$))(\"itemsPerPage\", ngcc0.pipeBind1(17, 25, ctx.itemsPerPage$))(\"totalItems\", ngcc0.pipeBind1(18, 27, ctx.totalItems$));\n    } }, directives: [ngcc2.ActionBarComponent, ngcc2.ActionBarLeftComponent, ngcc2.AssetSearchInputComponent, ngcc2.ActionBarRightComponent, ngcc2.ActionBarItemsComponent, ngcc2.AssetFileInputComponent, ngcc2.AssetGalleryComponent, ngcc2.ItemsPerPageControlsComponent, ngcc2.PaginationControlsComponent], pipes: [ngcc4.AsyncPipe, ngcc6.PaginatePipe, ngcc2.HasPermissionPipe], styles: [\"[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%}vdr-asset-gallery[_ngcontent-%COMP%]{flex:1}.paging-controls[_ngcontent-%COMP%]{padding-top:6px;border-top:1px solid var(--color-component-border-100);display:flex;justify-content:space-between}.search-input[_ngcontent-%COMP%]{margin-top:6px;min-width:300px}\"] });\r\nAssetListComponent.ctorParameters = () => [\r\n    { type: NotificationService },\r\n    { type: ModalService },\r\n    { type: DataService },\r\n    { type: Router },\r\n    { type: ActivatedRoute }\r\n];\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ngcc0.setClassMetadata(AssetListComponent, [{\n        type: Component,\n        args: [{\n                selector: 'vdr-asset-list',\n                template: \"<vdr-action-bar>\\r\\n    <vdr-ab-left [grow]=\\\"true\\\">\\r\\n        <vdr-asset-search-input\\r\\n            class=\\\"pr4 mt1\\\"\\r\\n            [tags]=\\\"allTags$ | async\\\"\\r\\n            (searchTermChange)=\\\"searchTerm$.next($event)\\\"\\r\\n            (tagsChange)=\\\"filterByTags$.next($event)\\\"\\r\\n        ></vdr-asset-search-input>\\r\\n    </vdr-ab-left>\\r\\n    <vdr-ab-right>\\r\\n        <vdr-action-bar-items locationId=\\\"asset-list\\\"></vdr-action-bar-items>\\r\\n        <vdr-asset-file-input\\r\\n            (selectFiles)=\\\"filesSelected($event)\\\"\\r\\n            [uploading]=\\\"uploading\\\"\\r\\n            dropZoneTarget=\\\".content-area\\\"\\r\\n        ></vdr-asset-file-input>\\r\\n    </vdr-ab-right>\\r\\n</vdr-action-bar>\\r\\n\\r\\n<vdr-asset-gallery\\r\\n    [assets]=\\\"(items$ | async)! | paginate: (paginationConfig$ | async) || {}\\\"\\r\\n    [multiSelect]=\\\"true\\\"\\r\\n    [canDelete]=\\\"['DeleteCatalog', 'DeleteAsset'] | hasPermission\\\"\\r\\n    (deleteAssets)=\\\"deleteAssets($event)\\\"\\r\\n></vdr-asset-gallery>\\r\\n\\r\\n<div class=\\\"paging-controls\\\">\\r\\n    <vdr-items-per-page-controls\\r\\n        [itemsPerPage]=\\\"itemsPerPage$ | async\\\"\\r\\n        (itemsPerPageChange)=\\\"setItemsPerPage($event)\\\"\\r\\n    ></vdr-items-per-page-controls>\\r\\n\\r\\n    <vdr-pagination-controls\\r\\n        [currentPage]=\\\"currentPage$ | async\\\"\\r\\n        [itemsPerPage]=\\\"itemsPerPage$ | async\\\"\\r\\n        [totalItems]=\\\"totalItems$ | async\\\"\\r\\n        (pageChange)=\\\"setPageNumber($event)\\\"\\r\\n    ></vdr-pagination-controls>\\r\\n</div>\\r\\n\",\n                styles: [\":host{display:flex;flex-direction:column;height:100%}vdr-asset-gallery{flex:1}.paging-controls{padding-top:6px;border-top:1px solid var(--color-component-border-100);display:flex;justify-content:space-between}.search-input{margin-top:6px;min-width:300px}\\n\"]\n            }]\n    }], function () { return [{ type: ngcc2.NotificationService }, { type: ngcc2.ModalService }, { type: ngcc2.DataService }, { type: ngcc1.Router }, { type: ngcc1.ActivatedRoute }]; }, null); })();\n\nclass CollectionDetailComponent extends BaseDetailComponent {\r\n    constructor(router, route, serverConfigService, changeDetector, dataService, formBuilder, notificationService, modalService, localStorageService) {\r\n        var _a;\r\n        super(route, router, serverConfigService, dataService);\r\n        this.changeDetector = changeDetector;\r\n        this.dataService = dataService;\r\n        this.formBuilder = formBuilder;\r\n        this.notificationService = notificationService;\r\n        this.modalService = modalService;\r\n        this.localStorageService = localStorageService;\r\n        this.assetChanges = {};\r\n        this.filters = [];\r\n        this.allFilters = [];\r\n        this.livePreview = false;\r\n        this.updatePermission = [Permission.UpdateCatalog, Permission.UpdateCollection];\r\n        this.filterRemoved$ = new Subject();\r\n        this.customFields = this.getCustomFieldConfig('Collection');\r\n        this.detailForm = this.formBuilder.group({\r\n            name: ['', Validators.required],\r\n            slug: ['', unicodePatternValidator(/^[\\p{Letter}0-9_-]+$/)],\r\n            description: '',\r\n            visible: false,\r\n            filters: this.formBuilder.array([]),\r\n            customFields: this.formBuilder.group(this.customFields.reduce((hash, field) => (Object.assign(Object.assign({}, hash), { [field.name]: '' })), {})),\r\n        });\r\n        this.livePreview = (_a = this.localStorageService.get('livePreviewCollectionContents')) !== null && _a !== void 0 ? _a : false;\r\n    }\r\n    ngOnInit() {\r\n        this.init();\r\n        this.dataService.collection.getCollectionFilters().single$.subscribe(res => {\r\n            this.allFilters = res.collectionFilters;\r\n        });\r\n        const filtersFormArray = this.detailForm.get('filters');\r\n        this.updatedFilters$ = merge(filtersFormArray.statusChanges, this.filterRemoved$).pipe(debounceTime(200), filter(() => filtersFormArray.touched), map(() => this.mapOperationsToInputs(this.filters, filtersFormArray.value).filter(_filter => {\r\n            // ensure all the arguments have valid values. E.g. a newly-added\r\n            // filter will not yet have valid values\r\n            for (const arg of _filter.arguments) {\r\n                if (arg.value === '') {\r\n                    return false;\r\n                }\r\n            }\r\n            return true;\r\n        })));\r\n        this.parentId$ = this.route.paramMap.pipe(map(pm => pm.get('parentId') || undefined), switchMap(parentId => {\r\n            if (parentId) {\r\n                return of(parentId);\r\n            }\r\n            else {\r\n                return this.entity$.pipe(map(collection => { var _a; return (_a = collection.parent) === null || _a === void 0 ? void 0 : _a.id; }));\r\n            }\r\n        }));\r\n    }\r\n    ngOnDestroy() {\r\n        this.destroy();\r\n    }\r\n    getFilterDefinition(_filter) {\r\n        return this.allFilters.find(f => f.code === _filter.code);\r\n    }\r\n    assetsChanged() {\r\n        return !!Object.values(this.assetChanges).length;\r\n    }\r\n    /**\r\n     * If creating a new Collection, automatically generate the slug based on the collection name.\r\n     */\r\n    updateSlug(nameValue) {\r\n        combineLatest(this.entity$, this.languageCode$)\r\n            .pipe(take(1))\r\n            .subscribe(([entity, languageCode]) => {\r\n            const slugControl = this.detailForm.get(['slug']);\r\n            const currentTranslation = findTranslation(entity, languageCode);\r\n            const currentSlugIsEmpty = !currentTranslation || !currentTranslation.slug;\r\n            if (slugControl && slugControl.pristine && currentSlugIsEmpty) {\r\n                slugControl.setValue(normalizeString(`${nameValue}`, '-'));\r\n            }\r\n        });\r\n    }\r\n    addFilter(collectionFilter) {\r\n        const filtersArray = this.detailForm.get('filters');\r\n        const argsHash = collectionFilter.args.reduce((output, arg) => (Object.assign(Object.assign({}, output), { [arg.name]: getConfigArgValue(arg.value) })), {});\r\n        filtersArray.push(this.formBuilder.control({\r\n            code: collectionFilter.code,\r\n            args: argsHash,\r\n        }));\r\n        this.filters.push({\r\n            code: collectionFilter.code,\r\n            args: collectionFilter.args.map(a => ({ name: a.name, value: getConfigArgValue(a.value) })),\r\n        });\r\n    }\r\n    removeFilter(index) {\r\n        const filtersArray = this.detailForm.get('filters');\r\n        if (index !== -1) {\r\n            filtersArray.removeAt(index);\r\n            filtersArray.markAsDirty();\r\n            filtersArray.markAsTouched();\r\n            this.filters.splice(index, 1);\r\n            this.filterRemoved$.next();\r\n        }\r\n    }\r\n    create() {\r\n        if (!this.detailForm.dirty) {\r\n            return;\r\n        }\r\n        combineLatest(this.entity$, this.languageCode$)\r\n            .pipe(take(1), mergeMap(([category, languageCode]) => {\r\n            const input = this.getUpdatedCollection(category, this.detailForm, languageCode);\r\n            const parentId = this.route.snapshot.paramMap.get('parentId');\r\n            if (parentId) {\r\n                input.parentId = parentId;\r\n            }\r\n            return this.dataService.collection.createCollection(input);\r\n        }))\r\n            .subscribe(data => {\r\n            this.notificationService.success(marker('common.notify-create-success'), {\r\n                entity: 'Collection',\r\n            });\r\n            this.assetChanges = {};\r\n            this.detailForm.markAsPristine();\r\n            this.changeDetector.markForCheck();\r\n            this.router.navigate(['../', data.createCollection.id], { relativeTo: this.route });\r\n        }, err => {\r\n            this.notificationService.error(marker('common.notify-create-error'), {\r\n                entity: 'Collection',\r\n            });\r\n        });\r\n    }\r\n    save() {\r\n        combineLatest(this.entity$, this.languageCode$)\r\n            .pipe(take(1), mergeMap(([category, languageCode]) => {\r\n            const input = this.getUpdatedCollection(category, this.detailForm, languageCode);\r\n            return this.dataService.collection.updateCollection(input);\r\n        }))\r\n            .subscribe(() => {\r\n            this.assetChanges = {};\r\n            this.detailForm.markAsPristine();\r\n            this.changeDetector.markForCheck();\r\n            this.notificationService.success(marker('common.notify-update-success'), {\r\n                entity: 'Collection',\r\n            });\r\n            this.contentsComponent.refresh();\r\n        }, err => {\r\n            this.notificationService.error(marker('common.notify-update-error'), {\r\n                entity: 'Collection',\r\n            });\r\n        });\r\n    }\r\n    canDeactivate() {\r\n        return super.canDeactivate() && !this.assetChanges.assets && !this.assetChanges.featuredAsset;\r\n    }\r\n    toggleLivePreview() {\r\n        this.livePreview = !this.livePreview;\r\n        this.localStorageService.set('livePreviewCollectionContents', this.livePreview);\r\n    }\r\n    trackByFn(index, item) {\r\n        return JSON.stringify(item);\r\n    }\r\n    /**\r\n     * Sets the values of the form on changes to the category or current language.\r\n     */\r\n    setFormValues(entity, languageCode) {\r\n        const currentTranslation = findTranslation(entity, languageCode);\r\n        this.detailForm.patchValue({\r\n            name: currentTranslation ? currentTranslation.name : '',\r\n            slug: currentTranslation ? currentTranslation.slug : '',\r\n            description: currentTranslation ? currentTranslation.description : '',\r\n            visible: !entity.isPrivate,\r\n        });\r\n        const formArray = this.detailForm.get('filters');\r\n        if (formArray.length !== entity.filters.length) {\r\n            formArray.clear();\r\n            this.filters = [];\r\n            entity.filters.forEach(f => this.addFilter(f));\r\n        }\r\n        if (this.customFields.length) {\r\n            this.setCustomFieldFormValues(this.customFields, this.detailForm.get(['customFields']), entity, currentTranslation);\r\n        }\r\n    }\r\n    /**\r\n     * Given a category and the value of the form, this method creates an updated copy of the category which\r\n     * can then be persisted to the API.\r\n     */\r\n    getUpdatedCollection(category, form, languageCode) {\r\n        var _a, _b;\r\n        const updatedCategory = createUpdatedTranslatable({\r\n            translatable: category,\r\n            updatedFields: form.value,\r\n            customFieldConfig: this.customFields,\r\n            languageCode,\r\n            defaultTranslation: {\r\n                languageCode,\r\n                name: category.name || '',\r\n                slug: category.slug || '',\r\n                description: category.description || '',\r\n            },\r\n        });\r\n        return Object.assign(Object.assign({}, updatedCategory), { assetIds: (_a = this.assetChanges.assets) === null || _a === void 0 ? void 0 : _a.map(a => a.id), featuredAssetId: (_b = this.assetChanges.featuredAsset) === null || _b === void 0 ? void 0 : _b.id, isPrivate: !form.value.visible, filters: this.mapOperationsToInputs(this.filters, this.detailForm.value.filters) });\r\n    }\r\n    /**\r\n     * Maps an array of conditions or actions to the input format expected by the GraphQL API.\r\n     */\r\n    mapOperationsToInputs(operations, formValueOperations) {\r\n        return operations.map((o, i) => {\r\n            return {\r\n                code: o.code,\r\n                arguments: Object.entries(formValueOperations[i].args).map(([name, value], j) => {\r\n                    return {\r\n                        name,\r\n                        value: encodeConfigArgValue(value),\r\n                    };\r\n                }),\r\n            };\r\n        });\r\n    }\r\n}\nCollectionDetailComponent.fac = function CollectionDetailComponent_Factory(t) { return new (t || CollectionDetailComponent)(ngcc0.directiveInject(ngcc1.Router), ngcc0.directiveInject(ngcc1.ActivatedRoute), ngcc0.directiveInject(ngcc2.ServerConfigService), ngcc0.directiveInject(ngcc0.ChangeDetectorRef), ngcc0.directiveInject(ngcc2.DataService), ngcc0.directiveInject(ngcc3.FormBuilder), ngcc0.directiveInject(ngcc2.NotificationService), ngcc0.directiveInject(ngcc2.ModalService), ngcc0.directiveInject(ngcc2.LocalStorageService)); };\nCollectionDetailComponent.cmp = /*@__PURE__*/ ngcc0.defineComponent({ type: CollectionDetailComponent, selectors: [[\"vdr-collection-detail\"]], viewQuery: function CollectionDetailComponent_Query(rf, ctx) { if (rf & 1) {\n        ngcc0.viewQuery(_c3, 5);\n    } if (rf & 2) {\n        let _t;\n        ngcc0.queryRefresh(_t = ngcc0.loadQuery()) && (ctx.contentsComponent = _t.first);\n    } }, features: [ngcc0.InheritDefinitionFeature], decls: 16, vars: 19, consts: [[3, \"entity\"], [3, \"disabled\", \"availableLanguageCodes\", \"currentLanguageCode\", \"languageCodeChange\"], [\"locationId\", \"collection-detail\"], [\"class\", \"btn btn-primary\", 3, \"disabled\", \"click\", 4, \"ngIf\", \"ngIfElse\"], [\"updateButton\", \"\"], [\"class\", \"form\", 3, \"formGroup\", 4, \"ngIf\"], [1, \"btn\", \"btn-primary\", 3, \"disabled\", \"click\"], [\"class\", \"btn btn-primary\", 3, \"disabled\", \"click\", 4, \"vdrIfPermissions\"], [1, \"form\", 3, \"formGroup\"], [\"role\", \"navigation\"], [1, \"collection-breadcrumbs\"], [4, \"ngFor\", \"ngForOf\"], [1, \"clr-row\"], [1, \"clr-col\"], [\"for\", \"visibility\", 3, \"label\"], [\"type\", \"checkbox\", \"clrToggle\", \"\", \"formControlName\", \"visible\", \"id\", \"visibility\", 3, \"vdrDisabled\"], [1, \"visible-toggle\"], [4, \"ngIf\", \"ngIfElse\"], [\"private\", \"\"], [\"for\", \"name\", 3, \"label\"], [\"id\", \"name\", \"type\", \"text\", \"formControlName\", \"name\", 3, \"readonly\", \"input\"], [\"for\", \"slug\", 3, \"label\", \"errors\"], [\"id\", \"slug\", \"type\", \"text\", \"formControlName\", \"slug\", 3, \"readonly\"], [\"formControlName\", \"description\", 3, \"readonly\", \"label\"], [\"formGroupName\", \"customFields\", 4, \"ngIf\"], [\"locationId\", \"collection-detail\", 3, \"entity$\", \"detailForm\"], [1, \"clr-col-md-auto\"], [3, \"assets\", \"featuredAsset\", \"updatePermissions\", \"change\"], [\"formArrayName\", \"filters\", 1, \"clr-row\"], [4, \"ngFor\", \"ngForOf\", \"ngForTrackBy\"], [4, \"vdrIfPermissions\"], [3, \"collectionId\", \"parentId\", \"updatedFilters\", \"previewUpdatedFilters\"], [\"collectionContents\", \"\"], [3, \"routerLink\", 4, \"ngIf\"], [4, \"ngIf\"], [3, \"routerLink\"], [\"formGroupName\", \"customFields\"], [\"entityName\", \"Collection\", 3, \"customFields\", \"customFieldsFormGroup\", \"readonly\"], [3, \"position\", \"operation\", \"operationDefinition\", \"formControlName\", \"readonly\", \"remove\"], [\"vdrDropdownTrigger\", \"\", 1, \"btn\", \"btn-outline\"], [\"shape\", \"plus\"], [\"vdrPosition\", \"bottom-left\"], [\"type\", \"button\", \"vdrDropdownItem\", \"\", 3, \"click\", 4, \"ngFor\", \"ngForOf\"], [\"type\", \"button\", \"vdrDropdownItem\", \"\", 3, \"click\"], [1, \"contents-title\"], [\"type\", \"checkbox\", \"clrCheckbox\", \"\", 3, \"ngModelOptions\", \"disabled\", \"ngModel\", \"ngModelChange\"]], template: function CollectionDetailComponent_Template(rf, ctx) { if (rf & 1) {\n        ngcc0.elementStart(0, \"vdr-action-bar\");\n        ngcc0.elementStart(1, \"vdr-ab-left\");\n        ngcc0.element(2, \"vdr-entity-info\", 0);\n        ngcc0.pipe(3, \"async\");\n        ngcc0.elementStart(4, \"vdr-language-selector\", 1);\n        ngcc0.listener(\"languageCodeChange\", function CollectionDetailComponent_Template_vdr_language_selector_languageCodeChange_4_listener($event) { return ctx.setLanguage($event); });\n        ngcc0.pipe(5, \"async\");\n        ngcc0.pipe(6, \"async\");\n        ngcc0.pipe(7, \"async\");\n        ngcc0.elementEnd();\n        ngcc0.elementEnd();\n        ngcc0.elementStart(8, \"vdr-ab-right\");\n        ngcc0.element(9, \"vdr-action-bar-items\", 2);\n        ngcc0.template(10, CollectionDetailComponent_button_10_Template, 3, 4, \"button\", 3);\n        ngcc0.pipe(11, \"async\");\n        ngcc0.template(12, CollectionDetailComponent_ng_template_12_Template, 1, 1, \"ng-template\", null, 4, ngcc0.templateRefExtractor);\n        ngcc0.elementEnd();\n        ngcc0.elementEnd();\n        ngcc0.template(14, CollectionDetailComponent_form_14_Template, 44, 53, \"form\", 5);\n        ngcc0.pipe(15, \"async\");\n    } if (rf & 2) {\n        const _r1 = ngcc0.reference(13);\n        ngcc0.advance(2);\n        ngcc0.property(\"entity\", ngcc0.pipeBind1(3, 7, ctx.entity$));\n        ngcc0.advance(2);\n        ngcc0.property(\"disabled\", ngcc0.pipeBind1(5, 9, ctx.isNew$))(\"availableLanguageCodes\", ngcc0.pipeBind1(6, 11, ctx.availableLanguages$))(\"currentLanguageCode\", ngcc0.pipeBind1(7, 13, ctx.languageCode$));\n        ngcc0.advance(6);\n        ngcc0.property(\"ngIf\", ngcc0.pipeBind1(11, 15, ctx.isNew$))(\"ngIfElse\", _r1);\n        ngcc0.advance(4);\n        ngcc0.property(\"ngIf\", ngcc0.pipeBind1(15, 17, ctx.entity$));\n    } }, directives: function () { return [ngcc2.ActionBarComponent, ngcc2.ActionBarLeftComponent, ngcc2.EntityInfoComponent, ngcc2.LanguageSelectorComponent, ngcc2.ActionBarRightComponent, ngcc2.ActionBarItemsComponent, ngcc4.NgIf, ngcc2.IfPermissionsDirective, ngcc3.NgNoValidate, ngcc3.NgControlStatusGroup, ngcc3.FormGroupDirective, ngcc4.NgForOf, ngcc2.FormFieldComponent, ngcc7.ClrCheckboxWrapper, ngcc2.FormFieldControlDirective, ngcc3.CheckboxControlValueAccessor, ngcc7.ClrCheckbox, ngcc3.NgControlStatus, ngcc3.FormControlName, ngcc2.DisabledDirective, ngcc7.ClrLabel, ngcc3.DefaultValueAccessor, ngcc2.RichTextEditorComponent, ngcc2.CustomDetailComponentHostComponent, AssetsComponent, ngcc3.FormArrayName, ngcc7.ClrDatagridItemsTrackBy, CollectionContentsComponent, ngcc1.RouterLinkWithHref, ngcc3.FormGroupName, ngcc2.TabbedCustomFieldsComponent, ngcc2.ConfigurableInputComponent, ngcc2.DropdownComponent, ngcc2.DropdownTriggerDirective, ngcc7.ClrIconCustomTag, ngcc2.DropdownMenuComponent, ngcc2.DropdownItemDirective, ngcc3.NgModel]; }, pipes: function () { return [ngcc4.AsyncPipe, ngcc5.TranslatePipe, ngcc2.HasPermissionPipe]; }, styles: [\"@charset \\\"UTF-8\\\";.visible-toggle[_ngcontent-%COMP%]{margin-top:-3px!important}clr-checkbox-wrapper[_ngcontent-%COMP%]{transition:opacity .3s}clr-checkbox-wrapper.disabled[_ngcontent-%COMP%]{opacity:.5}.collection-breadcrumbs[_ngcontent-%COMP%]{list-style-type:none;background-color:var(--color-component-bg-200);padding:2px 6px;margin-bottom:6px;border-radius:var(--clr-global-borderradius)}.collection-breadcrumbs[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:.65rem;display:inline-block;margin-right:10px}.collection-breadcrumbs[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:not(:last-child):after{content:\\\"\\\\203a\\\";top:0;color:var(--color-grey-400);margin-left:10px}\"], changeDetection: 0 });\r\nCollectionDetailComponent.ctorParameters = () => [\r\n    { type: Router },\r\n    { type: ActivatedRoute },\r\n    { type: ServerConfigService },\r\n    { type: ChangeDetectorRef },\r\n    { type: DataService },\r\n    { type: FormBuilder },\r\n    { type: NotificationService },\r\n    { type: ModalService },\r\n    { type: LocalStorageService }\r\n];\r\nCollectionDetailComponent.propDecorators = {\r\n    contentsComponent: [{ type: ViewChild, args: ['collectionContents',] }]\r\n};\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ngcc0.setClassMetadata(CollectionDetailComponent, [{\n        type: Component,\n        args: [{\n                selector: 'vdr-collection-detail',\n                template: \"<vdr-action-bar>\\r\\n    <vdr-ab-left>\\r\\n        <vdr-entity-info [entity]=\\\"entity$ | async\\\"></vdr-entity-info>\\r\\n        <vdr-language-selector\\r\\n            [disabled]=\\\"isNew$ | async\\\"\\r\\n            [availableLanguageCodes]=\\\"availableLanguages$ | async\\\"\\r\\n            [currentLanguageCode]=\\\"languageCode$ | async\\\"\\r\\n            (languageCodeChange)=\\\"setLanguage($event)\\\"\\r\\n        ></vdr-language-selector>\\r\\n    </vdr-ab-left>\\r\\n\\r\\n    <vdr-ab-right>\\r\\n        <vdr-action-bar-items locationId=\\\"collection-detail\\\"></vdr-action-bar-items>\\r\\n        <button\\r\\n            class=\\\"btn btn-primary\\\"\\r\\n            *ngIf=\\\"isNew$ | async; else updateButton\\\"\\r\\n            (click)=\\\"create()\\\"\\r\\n            [disabled]=\\\"detailForm.invalid || detailForm.pristine\\\"\\r\\n        >\\r\\n            {{ 'common.create' | translate }}\\r\\n        </button>\\r\\n        <ng-template #updateButton>\\r\\n            <button\\r\\n                *vdrIfPermissions=\\\"updatePermission\\\"\\r\\n                class=\\\"btn btn-primary\\\"\\r\\n                (click)=\\\"save()\\\"\\r\\n                [disabled]=\\\"(detailForm.invalid || detailForm.pristine) && !assetsChanged()\\\"\\r\\n            >\\r\\n                {{ 'common.update' | translate }}\\r\\n            </button>\\r\\n        </ng-template>\\r\\n    </vdr-ab-right>\\r\\n</vdr-action-bar>\\r\\n<form class=\\\"form\\\" [formGroup]=\\\"detailForm\\\" *ngIf=\\\"entity$ | async as collection\\\">\\r\\n\\r\\n    <nav role=\\\"navigation\\\">\\r\\n        <ul class=\\\"collection-breadcrumbs\\\">\\r\\n            <li *ngFor=\\\"let breadcrumb of collection.breadcrumbs; let isFirst = first; let isLast = last\\\">\\r\\n                <a [routerLink]=\\\"['/catalog/collections']\\\" *ngIf=\\\"isFirst\\\">{{ 'catalog.root-collection' | translate }}</a>\\r\\n                <a [routerLink]=\\\"['/catalog/collections', breadcrumb.id]\\\" *ngIf=\\\"!isFirst && !isLast\\\">{{ breadcrumb.name | translate }}</a>\\r\\n                <ng-container *ngIf=\\\"isLast\\\">{{ breadcrumb.name | translate }}</ng-container>\\r\\n            </li>\\r\\n        </ul>\\r\\n    </nav>\\r\\n    <div class=\\\"clr-row\\\">\\r\\n        <div class=\\\"clr-col\\\">\\r\\n            <vdr-form-field [label]=\\\"'catalog.visibility' | translate\\\" for=\\\"visibility\\\">\\r\\n                <clr-toggle-wrapper>\\r\\n                    <input\\r\\n                        type=\\\"checkbox\\\"\\r\\n                        clrToggle\\r\\n                        formControlName=\\\"visible\\\"\\r\\n                        id=\\\"visibility\\\"\\r\\n                        [vdrDisabled]=\\\"!(updatePermission | hasPermission)\\\"\\r\\n                    />\\r\\n                    <label class=\\\"visible-toggle\\\">\\r\\n                        <ng-container *ngIf=\\\"detailForm.value.visible; else private\\\">{{\\r\\n                            'catalog.public' | translate\\r\\n                            }}</ng-container>\\r\\n                        <ng-template #private>{{ 'catalog.private' | translate }}</ng-template>\\r\\n                    </label>\\r\\n                </clr-toggle-wrapper>\\r\\n            </vdr-form-field>\\r\\n            <vdr-form-field [label]=\\\"'common.name' | translate\\\" for=\\\"name\\\">\\r\\n                <input\\r\\n                    id=\\\"name\\\"\\r\\n                    type=\\\"text\\\"\\r\\n                    formControlName=\\\"name\\\"\\r\\n                    [readonly]=\\\"!(updatePermission | hasPermission)\\\"\\r\\n                    (input)=\\\"updateSlug($event.target.value)\\\"\\r\\n                />\\r\\n            </vdr-form-field>\\r\\n            <vdr-form-field\\r\\n                [label]=\\\"'catalog.slug' | translate\\\"\\r\\n                for=\\\"slug\\\"\\r\\n                [errors]=\\\"{ pattern: ('catalog.slug-pattern-error' | translate) }\\\"\\r\\n            >\\r\\n                <input\\r\\n                    id=\\\"slug\\\"\\r\\n                    type=\\\"text\\\"\\r\\n                    formControlName=\\\"slug\\\"\\r\\n                    [readonly]=\\\"!(updatePermission | hasPermission)\\\"\\r\\n                />\\r\\n            </vdr-form-field>\\r\\n            <vdr-rich-text-editor\\r\\n                formControlName=\\\"description\\\"\\r\\n                [readonly]=\\\"!(updatePermission | hasPermission)\\\"\\r\\n                [label]=\\\"'common.description' | translate\\\"\\r\\n            ></vdr-rich-text-editor>\\r\\n\\r\\n            <section formGroupName=\\\"customFields\\\" *ngIf=\\\"customFields.length\\\">\\r\\n                <label>{{ 'common.custom-fields' | translate }}</label>\\r\\n                <vdr-tabbed-custom-fields\\r\\n                    entityName=\\\"Collection\\\"\\r\\n                    [customFields]=\\\"customFields\\\"\\r\\n                    [customFieldsFormGroup]=\\\"detailForm.get(['customFields'])\\\"\\r\\n                    [readonly]=\\\"!(updatePermission | hasPermission)\\\"\\r\\n                ></vdr-tabbed-custom-fields>\\r\\n            </section>\\r\\n            <vdr-custom-detail-component-host\\r\\n                locationId=\\\"collection-detail\\\"\\r\\n                [entity$]=\\\"entity$\\\"\\r\\n                [detailForm]=\\\"detailForm\\\"\\r\\n            ></vdr-custom-detail-component-host>\\r\\n        </div>\\r\\n        <div class=\\\"clr-col-md-auto\\\">\\r\\n            <vdr-assets\\r\\n                [assets]=\\\"collection.assets\\\"\\r\\n                [featuredAsset]=\\\"collection.featuredAsset\\\"\\r\\n                [updatePermissions]=\\\"updatePermission\\\"\\r\\n                (change)=\\\"assetChanges = $event\\\"\\r\\n            ></vdr-assets>\\r\\n        </div>\\r\\n    </div>\\r\\n    <div class=\\\"clr-row\\\" formArrayName=\\\"filters\\\">\\r\\n        <div class=\\\"clr-col\\\">\\r\\n            <label>{{ 'catalog.filters' | translate }}</label>\\r\\n            <ng-container *ngFor=\\\"let filter of filters; index as i; trackBy:trackByFn\\\">\\r\\n                <vdr-configurable-input\\r\\n                    (remove)=\\\"removeFilter(i)\\\"\\r\\n                    [position]=\\\"i\\\"\\r\\n                    [operation]=\\\"filter\\\"\\r\\n                    [operationDefinition]=\\\"getFilterDefinition(filter)\\\"\\r\\n                    [formControlName]=\\\"i\\\"\\r\\n                    [readonly]=\\\"!(updatePermission | hasPermission)\\\"\\r\\n                ></vdr-configurable-input>\\r\\n            </ng-container>\\r\\n\\r\\n            <div *vdrIfPermissions=\\\"updatePermission\\\">\\r\\n                <vdr-dropdown>\\r\\n                    <button class=\\\"btn btn-outline\\\" vdrDropdownTrigger>\\r\\n                        <clr-icon shape=\\\"plus\\\"></clr-icon>\\r\\n                        {{ 'marketing.add-condition' | translate }}\\r\\n                    </button>\\r\\n                    <vdr-dropdown-menu vdrPosition=\\\"bottom-left\\\">\\r\\n                        <button\\r\\n                            *ngFor=\\\"let filter of allFilters\\\"\\r\\n                            type=\\\"button\\\"\\r\\n                            vdrDropdownItem\\r\\n                            (click)=\\\"addFilter(filter)\\\"\\r\\n                        >\\r\\n                            {{ filter.description }}\\r\\n                        </button>\\r\\n                    </vdr-dropdown-menu>\\r\\n                </vdr-dropdown>\\r\\n            </div>\\r\\n        </div>\\r\\n        <div class=\\\"clr-col\\\">\\r\\n            <vdr-collection-contents\\r\\n                [collectionId]=\\\"id\\\"\\r\\n                [parentId]=\\\"parentId$ | async\\\"\\r\\n                [updatedFilters]=\\\"updatedFilters$ | async\\\"\\r\\n                [previewUpdatedFilters]=\\\"livePreview\\\"\\r\\n                #collectionContents\\r\\n            >\\r\\n                <ng-template let-count>\\r\\n                    <div class=\\\"contents-title\\\">\\r\\n                        {{ 'catalog.collection-contents' | translate }} ({{\\r\\n                        'common.results-count' | translate: {count: count}\\r\\n                        }})\\r\\n                    </div>\\r\\n                    <clr-checkbox-wrapper [class.disabled]=\\\"detailForm.get('filters')?.pristine\\\">\\r\\n                        <input\\r\\n                            type=\\\"checkbox\\\"\\r\\n                            clrCheckbox\\r\\n                            [ngModelOptions]=\\\"{ standalone: true }\\\"\\r\\n                            [disabled]=\\\"detailForm.get('filters')?.pristine\\\"\\r\\n                            [ngModel]=\\\"livePreview\\\"\\r\\n                            (ngModelChange)=\\\"toggleLivePreview()\\\"\\r\\n                        />\\r\\n                        <label>{{ 'catalog.live-preview-contents' | translate }}</label>\\r\\n                    </clr-checkbox-wrapper>\\r\\n                </ng-template>\\r\\n            </vdr-collection-contents>\\r\\n        </div>\\r\\n    </div>\\r\\n</form>\\r\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\"@charset \\\"UTF-8\\\";.visible-toggle{margin-top:-3px!important}clr-checkbox-wrapper{transition:opacity .3s}clr-checkbox-wrapper.disabled{opacity:.5}.collection-breadcrumbs{list-style-type:none;background-color:var(--color-component-bg-200);padding:2px 6px;margin-bottom:6px;border-radius:var(--clr-global-borderradius)}.collection-breadcrumbs li{font-size:.65rem;display:inline-block;margin-right:10px}.collection-breadcrumbs li:not(:last-child):after{content:\\\"\\\\203a\\\";top:0;color:var(--color-grey-400);margin-left:10px}\\n\"]\n            }]\n    }], function () { return [{ type: ngcc1.Router }, { type: ngcc1.ActivatedRoute }, { type: ngcc2.ServerConfigService }, { type: ngcc0.ChangeDetectorRef }, { type: ngcc2.DataService }, { type: ngcc3.FormBuilder }, { type: ngcc2.NotificationService }, { type: ngcc2.ModalService }, { type: ngcc2.LocalStorageService }]; }, { contentsComponent: [{\n            type: ViewChild,\n            args: ['collectionContents']\n        }] }); })();\n\nclass CollectionListComponent {\r\n    constructor(dataService, notificationService, modalService, router, route, serverConfigService, changeDetectorRef) {\r\n        this.dataService = dataService;\r\n        this.notificationService = notificationService;\r\n        this.modalService = modalService;\r\n        this.router = router;\r\n        this.route = route;\r\n        this.serverConfigService = serverConfigService;\r\n        this.changeDetectorRef = changeDetectorRef;\r\n        this.filterTermControl = new FormControl('');\r\n        this.expandAll = false;\r\n        this.expandedIds = [];\r\n        this.destroy$ = new Subject();\r\n        this.selectionManager = new SelectionManager({\r\n            additiveMode: true,\r\n            multiSelect: true,\r\n            itemsAreEqual: (a, b) => a.id === b.id,\r\n        });\r\n    }\r\n    ngOnInit() {\r\n        var _a, _b;\r\n        this.queryResult = this.dataService.collection.getCollections(1000, 0).refetchOnChannelChange();\r\n        this.items$ = this.queryResult\r\n            .mapStream(data => data.collections.items)\r\n            .pipe(tap(items => this.selectionManager.setCurrentItems(items)), shareReplay(1));\r\n        this.activeCollectionId$ = this.route.paramMap.pipe(map(pm => pm.get('contents')), distinctUntilChanged());\r\n        this.expandedIds = (_b = (_a = this.route.snapshot.queryParamMap.get('expanded')) === null || _a === void 0 ? void 0 : _a.split(',')) !== null && _b !== void 0 ? _b : [];\r\n        this.expandAll = this.route.snapshot.queryParamMap.get('expanded') === 'all';\r\n        this.activeCollectionTitle$ = combineLatest(this.activeCollectionId$, this.items$).pipe(map(([id, collections]) => {\r\n            if (id) {\r\n                const match = collections.find(c => c.id === id);\r\n                return match ? match.name : '';\r\n            }\r\n            return '';\r\n        }));\r\n        this.availableLanguages$ = this.serverConfigService.getAvailableLanguages();\r\n        this.contentLanguage$ = this.dataService.client\r\n            .uiState()\r\n            .mapStream(({ uiState }) => uiState.contentLanguage)\r\n            .pipe(tap(() => this.refresh()));\r\n        this.filterTermControl.valueChanges\r\n            .pipe(debounceTime(250), takeUntil(this.destroy$))\r\n            .subscribe(term => {\r\n            this.router.navigate(['./'], {\r\n                queryParams: {\r\n                    q: term || undefined,\r\n                },\r\n                queryParamsHandling: 'merge',\r\n                relativeTo: this.route,\r\n            });\r\n        });\r\n        this.route.queryParamMap\r\n            .pipe(map(qpm => qpm.get('q')), distinctUntilChanged(), takeUntil(this.destroy$))\r\n            .subscribe(() => this.refresh());\r\n        this.filterTermControl.patchValue(this.route.snapshot.queryParamMap.get('q'));\r\n    }\r\n    ngOnDestroy() {\r\n        this.queryResult.completed$.next();\r\n        this.destroy$.next(undefined);\r\n        this.destroy$.complete();\r\n    }\r\n    toggleExpandAll() {\r\n        this.router.navigate(['./'], {\r\n            queryParams: {\r\n                expanded: this.expandAll ? 'all' : undefined,\r\n            },\r\n            queryParamsHandling: 'merge',\r\n            relativeTo: this.route,\r\n        });\r\n    }\r\n    onRearrange(event) {\r\n        this.dataService.collection.moveCollection([event]).subscribe({\r\n            next: () => {\r\n                this.notificationService.success(marker('common.notify-saved-changes'));\r\n                this.refresh();\r\n            },\r\n            error: err => {\r\n                this.notificationService.error(marker('common.notify-save-changes-error'));\r\n            },\r\n        });\r\n    }\r\n    deleteCollection(id) {\r\n        this.items$\r\n            .pipe(take(1), map(items => -1 < items.findIndex(i => i.parent && i.parent.id === id)), switchMap(hasChildren => {\r\n            return this.modalService.dialog({\r\n                title: marker('catalog.confirm-delete-collection'),\r\n                body: hasChildren\r\n                    ? marker('catalog.confirm-delete-collection-and-children-body')\r\n                    : undefined,\r\n                buttons: [\r\n                    { type: 'secondary', label: marker('common.cancel') },\r\n                    { type: 'danger', label: marker('common.delete'), returnValue: true },\r\n                ],\r\n            });\r\n        }), switchMap(response => (response ? this.dataService.collection.deleteCollection(id) : EMPTY)))\r\n            .subscribe(() => {\r\n            this.notificationService.success(marker('common.notify-delete-success'), {\r\n                entity: 'Collection',\r\n            });\r\n            this.refresh();\r\n        }, err => {\r\n            this.notificationService.error(marker('common.notify-delete-error'), {\r\n                entity: 'Collection',\r\n            });\r\n        });\r\n    }\r\n    closeContents() {\r\n        const params = Object.assign({}, this.route.snapshot.params);\r\n        delete params.contents;\r\n        this.router.navigate(['./', params], { relativeTo: this.route, queryParamsHandling: 'preserve' });\r\n    }\r\n    setLanguage(code) {\r\n        this.dataService.client.setContentLanguage(code).subscribe();\r\n    }\r\n    refresh() {\r\n        const filterTerm = this.route.snapshot.queryParamMap.get('q');\r\n        this.queryResult.ref.refetch({\r\n            options: Object.assign({ skip: 0, take: 1000 }, (filterTerm\r\n                ? {\r\n                    filter: {\r\n                        name: {\r\n                            contains: filterTerm,\r\n                        },\r\n                    },\r\n                }\r\n                : {})),\r\n        });\r\n    }\r\n}\nCollectionListComponent.fac = function CollectionListComponent_Factory(t) { return new (t || CollectionListComponent)(ngcc0.directiveInject(ngcc2.DataService), ngcc0.directiveInject(ngcc2.NotificationService), ngcc0.directiveInject(ngcc2.ModalService), ngcc0.directiveInject(ngcc1.Router), ngcc0.directiveInject(ngcc1.ActivatedRoute), ngcc0.directiveInject(ngcc2.ServerConfigService), ngcc0.directiveInject(ngcc0.ChangeDetectorRef)); };\nCollectionListComponent.cmp = /*@__PURE__*/ ngcc0.defineComponent({ type: CollectionListComponent, selectors: [[\"vdr-collection-list\"]], decls: 29, vars: 35, consts: [[1, \"\"], [\"type\", \"text\", \"name\", \"searchTerm\", 1, \"clr-input\", \"search-input\", 3, \"formControl\", \"placeholder\"], [1, \"flex\", \"center\"], [1, \"expand-all-toggle\", \"mt2\"], [\"type\", \"checkbox\", \"clrToggle\", \"\", 3, \"ngModel\", \"ngModelChange\", \"change\"], [1, \"mt2\", 3, \"availableLanguageCodes\", \"currentLanguageCode\", \"languageCodeChange\"], [\"locationId\", \"collection-list\"], [\"class\", \"btn btn-primary\", 3, \"routerLink\", 4, \"vdrIfPermissions\"], [1, \"bulk-select-controls\"], [\"type\", \"checkbox\", \"clrCheckbox\", \"\", 3, \"checked\", \"click\"], [\"locationId\", \"collection-list\", 1, \"ml2\", 3, \"hostComponent\", \"selectionManager\"], [1, \"collection-wrapper\"], [3, \"collections\", \"activeCollectionId\", \"expandAll\", \"expandedIds\", \"selectionManager\", \"rearrange\", \"deleteCollection\"], [1, \"collection-contents\"], [3, \"collectionId\"], [1, \"btn\", \"btn-primary\", 3, \"routerLink\"], [\"shape\", \"plus\"], [1, \"collection-title\"], [\"type\", \"button\", 1, \"close-button\", 3, \"click\"], [\"shape\", \"close\"]], template: function CollectionListComponent_Template(rf, ctx) { if (rf & 1) {\n        ngcc0.elementStart(0, \"vdr-action-bar\");\n        ngcc0.elementStart(1, \"vdr-ab-left\");\n        ngcc0.elementStart(2, \"div\", 0);\n        ngcc0.element(3, \"input\", 1);\n        ngcc0.pipe(4, \"translate\");\n        ngcc0.elementStart(5, \"div\", 2);\n        ngcc0.elementStart(6, \"clr-toggle-wrapper\", 3);\n        ngcc0.elementStart(7, \"input\", 4);\n        ngcc0.listener(\"ngModelChange\", function CollectionListComponent_Template_input_ngModelChange_7_listener($event) { return ctx.expandAll = $event; })(\"change\", function CollectionListComponent_Template_input_change_7_listener() { return ctx.toggleExpandAll(); });\n        ngcc0.elementEnd();\n        ngcc0.elementStart(8, \"label\");\n        ngcc0.text(9);\n        ngcc0.pipe(10, \"translate\");\n        ngcc0.elementEnd();\n        ngcc0.elementEnd();\n        ngcc0.elementStart(11, \"vdr-language-selector\", 5);\n        ngcc0.listener(\"languageCodeChange\", function CollectionListComponent_Template_vdr_language_selector_languageCodeChange_11_listener($event) { return ctx.setLanguage($event); });\n        ngcc0.pipe(12, \"async\");\n        ngcc0.pipe(13, \"async\");\n        ngcc0.elementEnd();\n        ngcc0.elementEnd();\n        ngcc0.elementEnd();\n        ngcc0.elementEnd();\n        ngcc0.elementStart(14, \"vdr-ab-right\");\n        ngcc0.element(15, \"vdr-action-bar-items\", 6);\n        ngcc0.template(16, CollectionListComponent_a_16_Template, 4, 5, \"a\", 7);\n        ngcc0.elementEnd();\n        ngcc0.elementEnd();\n        ngcc0.elementStart(17, \"div\", 8);\n        ngcc0.elementStart(18, \"input\", 9);\n        ngcc0.listener(\"click\", function CollectionListComponent_Template_input_click_18_listener() { return ctx.selectionManager.toggleSelectAll(); });\n        ngcc0.elementEnd();\n        ngcc0.element(19, \"vdr-bulk-action-menu\", 10);\n        ngcc0.elementEnd();\n        ngcc0.elementStart(20, \"div\", 11);\n        ngcc0.elementStart(21, \"vdr-collection-tree\", 12);\n        ngcc0.listener(\"rearrange\", function CollectionListComponent_Template_vdr_collection_tree_rearrange_21_listener($event) { return ctx.onRearrange($event); })(\"deleteCollection\", function CollectionListComponent_Template_vdr_collection_tree_deleteCollection_21_listener($event) { return ctx.deleteCollection($event); });\n        ngcc0.pipe(22, \"async\");\n        ngcc0.pipe(23, \"async\");\n        ngcc0.elementEnd();\n        ngcc0.elementStart(24, \"div\", 13);\n        ngcc0.pipe(25, \"async\");\n        ngcc0.elementStart(26, \"vdr-collection-contents\", 14);\n        ngcc0.pipe(27, \"async\");\n        ngcc0.template(28, CollectionListComponent_ng_template_28_Template, 6, 9, \"ng-template\");\n        ngcc0.elementEnd();\n        ngcc0.elementEnd();\n        ngcc0.elementEnd();\n    } if (rf & 2) {\n        ngcc0.advance(3);\n        ngcc0.property(\"formControl\", ctx.filterTermControl)(\"placeholder\", ngcc0.pipeBind1(4, 18, \"catalog.filter-by-name\"));\n        ngcc0.advance(4);\n        ngcc0.property(\"ngModel\", ctx.expandAll);\n        ngcc0.advance(2);\n        ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(10, 20, \"catalog.expand-all-collections\"), \" \");\n        ngcc0.advance(2);\n        ngcc0.property(\"availableLanguageCodes\", ngcc0.pipeBind1(12, 22, ctx.availableLanguages$))(\"currentLanguageCode\", ngcc0.pipeBind1(13, 24, ctx.contentLanguage$));\n        ngcc0.advance(5);\n        ngcc0.property(\"vdrIfPermissions\", ngcc0.pureFunction0(34, _c11));\n        ngcc0.advance(2);\n        ngcc0.property(\"checked\", ctx.selectionManager.areAllCurrentItemsSelected());\n        ngcc0.advance(1);\n        ngcc0.property(\"hostComponent\", ctx)(\"selectionManager\", ctx.selectionManager);\n        ngcc0.advance(2);\n        ngcc0.property(\"collections\", ngcc0.pipeBind1(22, 26, ctx.items$))(\"activeCollectionId\", ngcc0.pipeBind1(23, 28, ctx.activeCollectionId$))(\"expandAll\", ctx.expandAll)(\"expandedIds\", ctx.expandedIds)(\"selectionManager\", ctx.selectionManager);\n        ngcc0.advance(3);\n        ngcc0.classProp(\"expanded\", ngcc0.pipeBind1(25, 30, ctx.activeCollectionId$));\n        ngcc0.advance(2);\n        ngcc0.property(\"collectionId\", ngcc0.pipeBind1(27, 32, ctx.activeCollectionId$));\n    } }, directives: function () { return [ngcc2.ActionBarComponent, ngcc2.ActionBarLeftComponent, ngcc2.FormFieldControlDirective, ngcc3.DefaultValueAccessor, ngcc3.NgControlStatus, ngcc3.FormControlDirective, ngcc7.ClrCheckboxWrapper, ngcc3.CheckboxControlValueAccessor, ngcc7.ClrCheckbox, ngcc3.NgModel, ngcc7.ClrLabel, ngcc2.LanguageSelectorComponent, ngcc2.ActionBarRightComponent, ngcc2.ActionBarItemsComponent, ngcc2.IfPermissionsDirective, ngcc2.BulkActionMenuComponent, CollectionTreeComponent, CollectionContentsComponent, ngcc1.RouterLinkWithHref, ngcc7.ClrIconCustomTag]; }, pipes: function () { return [ngcc5.TranslatePipe, ngcc4.AsyncPipe]; }, styles: [\"[_nghost-%COMP%]{height:100%;display:flex;flex-direction:column}.bulk-select-controls[_ngcontent-%COMP%]{min-height:36px;padding-left:14px;display:flex;align-items:center;border-bottom:1px solid var(--color-component-border-200)}.expand-all-toggle[_ngcontent-%COMP%]{display:block}.collection-wrapper[_ngcontent-%COMP%]{display:flex;height:calc(100% - 50px)}.collection-wrapper[_ngcontent-%COMP%]   vdr-collection-tree[_ngcontent-%COMP%]{flex:1;height:100%;overflow:auto}.collection-wrapper[_ngcontent-%COMP%]   .collection-contents[_ngcontent-%COMP%]{height:100%;width:0;opacity:0;visibility:hidden;overflow:auto;transition:width .3s,opacity .2s .3s,visibility 0s .3s}.collection-wrapper[_ngcontent-%COMP%]   .collection-contents.expanded[_ngcontent-%COMP%]{width:30vw;visibility:visible;opacity:1;padding-left:12px}.collection-wrapper[_ngcontent-%COMP%]   .collection-contents[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]{margin:0;background:none;border:none;cursor:pointer}.paging-controls[_ngcontent-%COMP%]{padding-top:6px;border-top:1px solid var(--color-component-border-100);display:flex;justify-content:space-between}\"], changeDetection: 0 });\r\nCollectionListComponent.ctorParameters = () => [\r\n    { type: DataService },\r\n    { type: NotificationService },\r\n    { type: ModalService },\r\n    { type: Router },\r\n    { type: ActivatedRoute },\r\n    { type: ServerConfigService },\r\n    { type: ChangeDetectorRef }\r\n];\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ngcc0.setClassMetadata(CollectionListComponent, [{\n        type: Component,\n        args: [{\n                selector: 'vdr-collection-list',\n                template: \"<vdr-action-bar>\\r\\n    <vdr-ab-left>\\r\\n        <div class=\\\"\\\">\\r\\n            <input\\r\\n                type=\\\"text\\\"\\r\\n                name=\\\"searchTerm\\\"\\r\\n                [formControl]=\\\"filterTermControl\\\"\\r\\n                [placeholder]=\\\"'catalog.filter-by-name' | translate\\\"\\r\\n                class=\\\"clr-input search-input\\\"\\r\\n            />\\r\\n            <div class=\\\"flex center\\\">\\r\\n                <clr-toggle-wrapper\\r\\n                    class=\\\"expand-all-toggle mt2\\\"\\r\\n                >\\r\\n                    <input type=\\\"checkbox\\\" clrToggle [(ngModel)]=\\\"expandAll\\\" (change)=\\\"toggleExpandAll()\\\" />\\r\\n                    <label>\\r\\n                        {{ 'catalog.expand-all-collections' | translate }}\\r\\n                    </label>\\r\\n                </clr-toggle-wrapper>\\r\\n                <vdr-language-selector\\r\\n                    class=\\\"mt2\\\"\\r\\n                    [availableLanguageCodes]=\\\"availableLanguages$ | async\\\"\\r\\n                    [currentLanguageCode]=\\\"contentLanguage$ | async\\\"\\r\\n                    (languageCodeChange)=\\\"setLanguage($event)\\\"\\r\\n                ></vdr-language-selector>\\r\\n            </div>\\r\\n        </div>\\r\\n    </vdr-ab-left>\\r\\n    <vdr-ab-right>\\r\\n        <vdr-action-bar-items locationId=\\\"collection-list\\\"></vdr-action-bar-items>\\r\\n        <a\\r\\n            class=\\\"btn btn-primary\\\"\\r\\n            *vdrIfPermissions=\\\"['CreateCatalog', 'CreateCollection']\\\"\\r\\n            [routerLink]=\\\"['./create']\\\"\\r\\n        >\\r\\n            <clr-icon shape=\\\"plus\\\"></clr-icon>\\r\\n            {{ 'catalog.create-new-collection' | translate }}\\r\\n        </a>\\r\\n    </vdr-ab-right>\\r\\n</vdr-action-bar>\\r\\n<div class=\\\"bulk-select-controls\\\">\\r\\n    <input\\r\\n        type=\\\"checkbox\\\"\\r\\n        clrCheckbox\\r\\n        [checked]=\\\"selectionManager.areAllCurrentItemsSelected()\\\"\\r\\n        (click)=\\\"selectionManager.toggleSelectAll()\\\"\\r\\n    />\\r\\n    <vdr-bulk-action-menu\\r\\n        class=\\\"ml2\\\"\\r\\n        locationId=\\\"collection-list\\\"\\r\\n        [hostComponent]=\\\"this\\\"\\r\\n        [selectionManager]=\\\"selectionManager\\\"\\r\\n    ></vdr-bulk-action-menu>\\r\\n</div>\\r\\n<div class=\\\"collection-wrapper\\\">\\r\\n    <vdr-collection-tree\\r\\n        [collections]=\\\"items$ | async\\\"\\r\\n        [activeCollectionId]=\\\"activeCollectionId$ | async\\\"\\r\\n        [expandAll]=\\\"expandAll\\\"\\r\\n        [expandedIds]=\\\"expandedIds\\\"\\r\\n        [selectionManager]=\\\"selectionManager\\\"\\r\\n        (rearrange)=\\\"onRearrange($event)\\\"\\r\\n        (deleteCollection)=\\\"deleteCollection($event)\\\"\\r\\n    ></vdr-collection-tree>\\r\\n\\r\\n    <div class=\\\"collection-contents\\\" [class.expanded]=\\\"activeCollectionId$ | async\\\">\\r\\n        <vdr-collection-contents [collectionId]=\\\"activeCollectionId$ | async\\\">\\r\\n            <ng-template let-count>\\r\\n                <div class=\\\"collection-title\\\">\\r\\n                    {{ activeCollectionTitle$ | async }} ({{\\r\\n                        'common.results-count' | translate: { count: count }\\r\\n                    }})\\r\\n                </div>\\r\\n                <button type=\\\"button\\\" class=\\\"close-button\\\" (click)=\\\"closeContents()\\\">\\r\\n                    <clr-icon shape=\\\"close\\\"></clr-icon>\\r\\n                </button>\\r\\n            </ng-template>\\r\\n        </vdr-collection-contents>\\r\\n    </div>\\r\\n</div>\\r\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\":host{height:100%;display:flex;flex-direction:column}.bulk-select-controls{min-height:36px;padding-left:14px;display:flex;align-items:center;border-bottom:1px solid var(--color-component-border-200)}.expand-all-toggle{display:block}.collection-wrapper{display:flex;height:calc(100% - 50px)}.collection-wrapper vdr-collection-tree{flex:1;height:100%;overflow:auto}.collection-wrapper .collection-contents{height:100%;width:0;opacity:0;visibility:hidden;overflow:auto;transition:width .3s,opacity .2s .3s,visibility 0s .3s}.collection-wrapper .collection-contents.expanded{width:30vw;visibility:visible;opacity:1;padding-left:12px}.collection-wrapper .collection-contents .close-button{margin:0;background:none;border:none;cursor:pointer}.paging-controls{padding-top:6px;border-top:1px solid var(--color-component-border-100);display:flex;justify-content:space-between}\\n\"]\n            }]\n    }], function () { return [{ type: ngcc2.DataService }, { type: ngcc2.NotificationService }, { type: ngcc2.ModalService }, { type: ngcc1.Router }, { type: ngcc1.ActivatedRoute }, { type: ngcc2.ServerConfigService }, { type: ngcc0.ChangeDetectorRef }]; }, null); })();\n\nclass FacetDetailComponent extends BaseDetailComponent {\r\n    constructor(router, route, serverConfigService, changeDetector, dataService, formBuilder, notificationService, modalService) {\r\n        super(route, router, serverConfigService, dataService);\r\n        this.changeDetector = changeDetector;\r\n        this.dataService = dataService;\r\n        this.formBuilder = formBuilder;\r\n        this.notificationService = notificationService;\r\n        this.modalService = modalService;\r\n        this.updatePermission = [Permission.UpdateCatalog, Permission.UpdateFacet];\r\n        this.customFields = this.getCustomFieldConfig('Facet');\r\n        this.customValueFields = this.getCustomFieldConfig('FacetValue');\r\n        this.detailForm = this.formBuilder.group({\r\n            facet: this.formBuilder.group({\r\n                code: ['', Validators.required],\r\n                name: '',\r\n                visible: true,\r\n                customFields: this.formBuilder.group(this.customFields.reduce((hash, field) => (Object.assign(Object.assign({}, hash), { [field.name]: '' })), {})),\r\n            }),\r\n            values: this.formBuilder.array([]),\r\n        });\r\n    }\r\n    ngOnInit() {\r\n        this.init();\r\n    }\r\n    ngOnDestroy() {\r\n        this.destroy();\r\n    }\r\n    updateCode(currentCode, nameValue) {\r\n        if (!currentCode) {\r\n            const codeControl = this.detailForm.get(['facet', 'code']);\r\n            if (codeControl && codeControl.pristine) {\r\n                codeControl.setValue(normalizeString(nameValue, '-'));\r\n            }\r\n        }\r\n    }\r\n    updateValueCode(currentCode, nameValue, index) {\r\n        if (!currentCode) {\r\n            const codeControl = this.detailForm.get(['values', index, 'code']);\r\n            if (codeControl && codeControl.pristine) {\r\n                codeControl.setValue(normalizeString(nameValue, '-'));\r\n            }\r\n        }\r\n    }\r\n    customValueFieldIsSet(index, name) {\r\n        return !!this.detailForm.get(['values', index, 'customFields', name]);\r\n    }\r\n    getValuesFormArray() {\r\n        return this.detailForm.get('values');\r\n    }\r\n    addFacetValue() {\r\n        const valuesFormArray = this.detailForm.get('values');\r\n        if (valuesFormArray) {\r\n            const valueGroup = this.formBuilder.group({\r\n                id: '',\r\n                name: ['', Validators.required],\r\n                code: '',\r\n            });\r\n            const newValue = { name: '', code: '' };\r\n            if (this.customValueFields.length) {\r\n                const customValueFieldsGroup = new FormGroup({});\r\n                newValue.customFields = {};\r\n                for (const fieldDef of this.customValueFields) {\r\n                    const key = fieldDef.name;\r\n                    customValueFieldsGroup.addControl(key, new FormControl());\r\n                }\r\n                valueGroup.addControl('customFields', customValueFieldsGroup);\r\n            }\r\n            valuesFormArray.insert(valuesFormArray.length, valueGroup);\r\n            this.values.push(newValue);\r\n        }\r\n    }\r\n    create() {\r\n        const facetForm = this.detailForm.get('facet');\r\n        if (!facetForm || !facetForm.dirty) {\r\n            return;\r\n        }\r\n        combineLatest(this.entity$, this.languageCode$)\r\n            .pipe(take(1), mergeMap(([facet, languageCode]) => {\r\n            const newFacet = this.getUpdatedFacet(facet, facetForm, languageCode);\r\n            return this.dataService.facet.createFacet(newFacet);\r\n        }), switchMap(data => this.dataService.facet.getAllFacets().single$.pipe(mapTo(data))))\r\n            .subscribe(data => {\r\n            this.notificationService.success(marker('common.notify-create-success'), { entity: 'Facet' });\r\n            this.detailForm.markAsPristine();\r\n            this.changeDetector.markForCheck();\r\n            this.router.navigate(['../', data.createFacet.id], { relativeTo: this.route });\r\n        }, err => {\r\n            this.notificationService.error(marker('common.notify-create-error'), {\r\n                entity: 'Facet',\r\n            });\r\n        });\r\n    }\r\n    save() {\r\n        combineLatest(this.entity$, this.languageCode$)\r\n            .pipe(take(1), mergeMap(([facet, languageCode]) => {\r\n            const facetGroup = this.detailForm.get('facet');\r\n            const updateOperations = [];\r\n            if (facetGroup && facetGroup.dirty) {\r\n                const newFacet = this.getUpdatedFacet(facet, facetGroup, languageCode);\r\n                if (newFacet) {\r\n                    updateOperations.push(this.dataService.facet.updateFacet(newFacet));\r\n                }\r\n            }\r\n            const valuesArray = this.detailForm.get('values');\r\n            if (valuesArray && valuesArray.dirty) {\r\n                const createdValues = this.getCreatedFacetValues(facet, valuesArray, languageCode);\r\n                if (createdValues.length) {\r\n                    updateOperations.push(this.dataService.facet\r\n                        .createFacetValues(createdValues)\r\n                        .pipe(switchMap(() => this.dataService.facet.getFacet(this.id).single$)));\r\n                }\r\n                const updatedValues = this.getUpdatedFacetValues(facet, valuesArray, languageCode);\r\n                if (updatedValues.length) {\r\n                    updateOperations.push(this.dataService.facet.updateFacetValues(updatedValues));\r\n                }\r\n            }\r\n            return forkJoin(updateOperations);\r\n        }), switchMap(() => this.dataService.facet.getAllFacets().single$))\r\n            .subscribe(() => {\r\n            this.detailForm.markAsPristine();\r\n            this.changeDetector.markForCheck();\r\n            this.notificationService.success(marker('common.notify-update-success'), { entity: 'Facet' });\r\n        }, err => {\r\n            this.notificationService.error(marker('common.notify-update-error'), {\r\n                entity: 'Facet',\r\n            });\r\n        });\r\n    }\r\n    deleteFacetValue(facetValueId, index) {\r\n        if (!facetValueId) {\r\n            // deleting a newly-added (not persisted) FacetValue\r\n            const valuesFormArray = this.detailForm.get('values');\r\n            if (valuesFormArray) {\r\n                valuesFormArray.removeAt(index);\r\n            }\r\n            this.values.splice(index, 1);\r\n            return;\r\n        }\r\n        this.showModalAndDelete(facetValueId)\r\n            .pipe(switchMap(response => {\r\n            if (response.result === DeletionResult.DELETED) {\r\n                return [true];\r\n            }\r\n            else {\r\n                return this.showModalAndDelete(facetValueId, response.message || '').pipe(map(r => r.result === DeletionResult.DELETED));\r\n            }\r\n        }), switchMap(deleted => (deleted ? this.dataService.facet.getFacet(this.id).single$ : [])))\r\n            .subscribe(() => {\r\n            const valuesFormArray = this.detailForm.get('values');\r\n            if (valuesFormArray) {\r\n                valuesFormArray.removeAt(index);\r\n            }\r\n            this.notificationService.success(marker('common.notify-delete-success'), {\r\n                entity: 'FacetValue',\r\n            });\r\n        }, err => {\r\n            this.notificationService.error(marker('common.notify-delete-error'), {\r\n                entity: 'FacetValue',\r\n            });\r\n        });\r\n    }\r\n    showModalAndDelete(facetValueId, message) {\r\n        return this.modalService\r\n            .dialog({\r\n            title: marker('catalog.confirm-delete-facet-value'),\r\n            body: message,\r\n            buttons: [\r\n                { type: 'secondary', label: marker('common.cancel') },\r\n                { type: 'danger', label: marker('common.delete'), returnValue: true },\r\n            ],\r\n        })\r\n            .pipe(switchMap(result => result ? this.dataService.facet.deleteFacetValues([facetValueId], !!message) : EMPTY), map(result => result.deleteFacetValues[0]));\r\n    }\r\n    /**\r\n     * Sets the values of the form on changes to the facet or current language.\r\n     */\r\n    setFormValues(facet, languageCode) {\r\n        var _a;\r\n        const currentTranslation = findTranslation(facet, languageCode);\r\n        this.detailForm.patchValue({\r\n            facet: {\r\n                code: facet.code,\r\n                visible: !facet.isPrivate,\r\n                name: (_a = currentTranslation === null || currentTranslation === void 0 ? void 0 : currentTranslation.name) !== null && _a !== void 0 ? _a : '',\r\n            },\r\n        });\r\n        if (this.customFields.length) {\r\n            const customFieldsGroup = this.detailForm.get(['facet', 'customFields']);\r\n            this.setCustomFieldFormValues(this.customFields, this.detailForm.get(['facet', 'customFields']), facet, currentTranslation);\r\n        }\r\n        const currentValuesFormArray = this.detailForm.get('values');\r\n        this.values = [...facet.values];\r\n        facet.values.forEach(value => {\r\n            var _a, _b, _c, _d, _e;\r\n            const valueTranslation = findTranslation(value, languageCode);\r\n            const group = {\r\n                id: value.id,\r\n                code: value.code,\r\n                name: valueTranslation ? valueTranslation.name : '',\r\n            };\r\n            let valueControl = currentValuesFormArray.controls.find(control => control.value.id === value.id);\r\n            if (valueControl) {\r\n                (_a = valueControl.get('id')) === null || _a === void 0 ? void 0 : _a.setValue(group.id);\r\n                (_b = valueControl.get('code')) === null || _b === void 0 ? void 0 : _b.setValue(group.code);\r\n                (_c = valueControl.get('name')) === null || _c === void 0 ? void 0 : _c.setValue(group.name);\r\n            }\r\n            else {\r\n                valueControl = this.formBuilder.group(group);\r\n                currentValuesFormArray.push(valueControl);\r\n            }\r\n            if (this.customValueFields.length) {\r\n                let customValueFieldsGroup = valueControl.get(['customFields']);\r\n                if (!customValueFieldsGroup) {\r\n                    customValueFieldsGroup = new FormGroup({});\r\n                    valueControl.addControl('customFields', customValueFieldsGroup);\r\n                }\r\n                if (customValueFieldsGroup) {\r\n                    for (const fieldDef of this.customValueFields) {\r\n                        const key = fieldDef.name;\r\n                        const fieldValue = fieldDef.type === 'localeString'\r\n                            ? (_e = (_d = valueTranslation) === null || _d === void 0 ? void 0 : _d.customFields) === null || _e === void 0 ? void 0 : _e[key]\r\n                            : value.customFields[key];\r\n                        const control = customValueFieldsGroup.get(key);\r\n                        if (control) {\r\n                            control.setValue(fieldValue);\r\n                        }\r\n                        else {\r\n                            customValueFieldsGroup.addControl(key, new FormControl(fieldValue));\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * Given a facet and the value of the detailForm, this method creates an updated copy of the facet which\r\n     * can then be persisted to the API.\r\n     */\r\n    getUpdatedFacet(facet, facetFormGroup, languageCode) {\r\n        const input = createUpdatedTranslatable({\r\n            translatable: facet,\r\n            updatedFields: facetFormGroup.value,\r\n            customFieldConfig: this.customFields,\r\n            languageCode,\r\n            defaultTranslation: {\r\n                languageCode,\r\n                name: facet.name || '',\r\n            },\r\n        });\r\n        input.isPrivate = !facetFormGroup.value.visible;\r\n        return input;\r\n    }\r\n    /**\r\n     * Given an array of facet values and the values from the detailForm, this method creates a new array\r\n     * which can be persisted to the API via a createFacetValues mutation.\r\n     */\r\n    getCreatedFacetValues(facet, valuesFormArray, languageCode) {\r\n        return valuesFormArray.controls\r\n            .filter(c => !c.value.id)\r\n            .map(c => c.value)\r\n            .map(value => createUpdatedTranslatable({\r\n            translatable: Object.assign(Object.assign({}, value), { translations: [] }),\r\n            updatedFields: value,\r\n            customFieldConfig: this.customValueFields,\r\n            languageCode,\r\n            defaultTranslation: {\r\n                languageCode,\r\n                name: '',\r\n            },\r\n        }))\r\n            .map(input => (Object.assign({ facetId: facet.id }, input)));\r\n    }\r\n    /**\r\n     * Given an array of facet values and the values from the detailForm, this method creates a new array\r\n     * which can be persisted to the API via an updateFacetValues mutation.\r\n     */\r\n    getUpdatedFacetValues(facet, valuesFormArray, languageCode) {\r\n        const dirtyValues = facet.values.filter((v, i) => {\r\n            const formRow = valuesFormArray.get(i.toString());\r\n            return formRow && formRow.dirty && formRow.value.id;\r\n        });\r\n        const dirtyValueValues = valuesFormArray.controls\r\n            .filter(c => c.dirty && c.value.id)\r\n            .map(c => c.value);\r\n        if (dirtyValues.length !== dirtyValueValues.length) {\r\n            throw new Error(marker(`error.facet-value-form-values-do-not-match`));\r\n        }\r\n        return dirtyValues\r\n            .map((value, i) => {\r\n            return createUpdatedTranslatable({\r\n                translatable: value,\r\n                updatedFields: dirtyValueValues[i],\r\n                customFieldConfig: this.customValueFields,\r\n                languageCode,\r\n                defaultTranslation: {\r\n                    languageCode,\r\n                    name: '',\r\n                },\r\n            });\r\n        })\r\n            .filter(notNullOrUndefined);\r\n    }\r\n}\nFacetDetailComponent.fac = function FacetDetailComponent_Factory(t) { return new (t || FacetDetailComponent)(ngcc0.directiveInject(ngcc1.Router), ngcc0.directiveInject(ngcc1.ActivatedRoute), ngcc0.directiveInject(ngcc2.ServerConfigService), ngcc0.directiveInject(ngcc0.ChangeDetectorRef), ngcc0.directiveInject(ngcc2.DataService), ngcc0.directiveInject(ngcc3.FormBuilder), ngcc0.directiveInject(ngcc2.NotificationService), ngcc0.directiveInject(ngcc2.ModalService)); };\nFacetDetailComponent.cmp = /*@__PURE__*/ ngcc0.defineComponent({ type: FacetDetailComponent, selectors: [[\"vdr-facet-detail\"]], features: [ngcc0.InheritDefinitionFeature], decls: 16, vars: 19, consts: [[3, \"entity\"], [3, \"disabled\", \"availableLanguageCodes\", \"currentLanguageCode\", \"languageCodeChange\"], [\"locationId\", \"facet-detail\"], [\"class\", \"btn btn-primary\", 3, \"disabled\", \"click\", 4, \"ngIf\", \"ngIfElse\"], [\"updateButton\", \"\"], [\"class\", \"form\", 3, \"formGroup\", 4, \"ngIf\"], [1, \"btn\", \"btn-primary\", 3, \"disabled\", \"click\"], [\"class\", \"btn btn-primary\", 3, \"disabled\", \"click\", 4, \"vdrIfPermissions\"], [1, \"form\", 3, \"formGroup\"], [\"formGroupName\", \"facet\", 1, \"form-block\"], [\"for\", \"visibility\", 3, \"label\"], [\"type\", \"checkbox\", \"clrToggle\", \"\", \"formControlName\", \"visible\", \"id\", \"visibility\", 3, \"vdrDisabled\"], [1, \"visible-toggle\"], [4, \"ngIf\", \"ngIfElse\"], [\"private\", \"\"], [\"for\", \"name\", 3, \"label\"], [\"id\", \"name\", \"type\", \"text\", \"formControlName\", \"name\", 3, \"readonly\", \"input\"], [\"for\", \"code\", 3, \"label\", \"readOnlyToggle\"], [\"id\", \"code\", \"type\", \"text\", \"formControlName\", \"code\", 3, \"readonly\"], [\"formGroupName\", \"customFields\", 4, \"ngIf\"], [\"locationId\", \"facet-detail\", 3, \"entity$\", \"detailForm\"], [\"class\", \"form-block\", 4, \"ngIf\"], [\"formGroupName\", \"customFields\"], [\"entityName\", \"Facet\", 3, \"customFields\", \"customFieldsFormGroup\", \"readonly\"], [1, \"form-block\"], [\"class\", \"facet-values-list table\", \"formArrayName\", \"values\", 4, \"ngIf\"], [\"type\", \"button\", \"class\", \"btn btn-secondary\", 3, \"click\", 4, \"vdrIfPermissions\"], [\"formArrayName\", \"values\", 1, \"facet-values-list\", \"table\"], [4, \"ngIf\"], [\"class\", \"facet-value\", 3, \"formGroupName\", 4, \"ngFor\", \"ngForOf\"], [1, \"facet-value\", 3, \"formGroupName\"], [1, \"align-middle\"], [\"type\", \"text\", \"formControlName\", \"name\", 3, \"readonly\", \"input\"], [\"type\", \"text\", \"formControlName\", \"code\", \"readonly\", \"\"], [\"class\", \"\", 4, \"ngIf\"], [\"type\", \"button\", \"vdrDropdownTrigger\", \"\", 1, \"btn\", \"btn-link\", \"btn-sm\"], [\"shape\", \"caret down\"], [\"vdrPosition\", \"bottom-right\"], [\"type\", \"button\", \"vdrDropdownItem\", \"\", 1, \"delete-button\", 3, \"disabled\", \"click\"], [\"shape\", \"trash\", 1, \"is-danger\"], [1, \"\"], [\"entityName\", \"FacetValue\", 3, \"customFields\", \"compact\", \"customFieldsFormGroup\", \"readonly\"], [\"type\", \"button\", 1, \"btn\", \"btn-secondary\", 3, \"click\"], [\"shape\", \"add\"]], template: function FacetDetailComponent_Template(rf, ctx) { if (rf & 1) {\n        ngcc0.elementStart(0, \"vdr-action-bar\");\n        ngcc0.elementStart(1, \"vdr-ab-left\");\n        ngcc0.element(2, \"vdr-entity-info\", 0);\n        ngcc0.pipe(3, \"async\");\n        ngcc0.elementStart(4, \"vdr-language-selector\", 1);\n        ngcc0.listener(\"languageCodeChange\", function FacetDetailComponent_Template_vdr_language_selector_languageCodeChange_4_listener($event) { return ctx.setLanguage($event); });\n        ngcc0.pipe(5, \"async\");\n        ngcc0.pipe(6, \"async\");\n        ngcc0.pipe(7, \"async\");\n        ngcc0.elementEnd();\n        ngcc0.elementEnd();\n        ngcc0.elementStart(8, \"vdr-ab-right\");\n        ngcc0.element(9, \"vdr-action-bar-items\", 2);\n        ngcc0.template(10, FacetDetailComponent_button_10_Template, 3, 4, \"button\", 3);\n        ngcc0.pipe(11, \"async\");\n        ngcc0.template(12, FacetDetailComponent_ng_template_12_Template, 1, 1, \"ng-template\", null, 4, ngcc0.templateRefExtractor);\n        ngcc0.elementEnd();\n        ngcc0.elementEnd();\n        ngcc0.template(14, FacetDetailComponent_form_14_Template, 24, 30, \"form\", 5);\n        ngcc0.pipe(15, \"async\");\n    } if (rf & 2) {\n        const _r1 = ngcc0.reference(13);\n        ngcc0.advance(2);\n        ngcc0.property(\"entity\", ngcc0.pipeBind1(3, 7, ctx.entity$));\n        ngcc0.advance(2);\n        ngcc0.property(\"disabled\", ngcc0.pipeBind1(5, 9, ctx.isNew$))(\"availableLanguageCodes\", ngcc0.pipeBind1(6, 11, ctx.availableLanguages$))(\"currentLanguageCode\", ngcc0.pipeBind1(7, 13, ctx.languageCode$));\n        ngcc0.advance(6);\n        ngcc0.property(\"ngIf\", ngcc0.pipeBind1(11, 15, ctx.isNew$))(\"ngIfElse\", _r1);\n        ngcc0.advance(4);\n        ngcc0.property(\"ngIf\", ngcc0.pipeBind1(15, 17, ctx.entity$));\n    } }, directives: [ngcc2.ActionBarComponent, ngcc2.ActionBarLeftComponent, ngcc2.EntityInfoComponent, ngcc2.LanguageSelectorComponent, ngcc2.ActionBarRightComponent, ngcc2.ActionBarItemsComponent, ngcc4.NgIf, ngcc2.IfPermissionsDirective, ngcc3.NgNoValidate, ngcc3.NgControlStatusGroup, ngcc3.FormGroupDirective, ngcc3.FormGroupName, ngcc2.FormFieldComponent, ngcc7.ClrCheckboxWrapper, ngcc2.FormFieldControlDirective, ngcc3.CheckboxControlValueAccessor, ngcc7.ClrCheckbox, ngcc3.NgControlStatus, ngcc3.FormControlName, ngcc2.DisabledDirective, ngcc7.ClrLabel, ngcc3.DefaultValueAccessor, ngcc2.CustomDetailComponentHostComponent, ngcc2.TabbedCustomFieldsComponent, ngcc3.FormArrayName, ngcc4.NgForOf, ngcc2.DropdownComponent, ngcc2.DropdownTriggerDirective, ngcc7.ClrIconCustomTag, ngcc2.DropdownMenuComponent, ngcc2.DropdownItemDirective], pipes: [ngcc4.AsyncPipe, ngcc5.TranslatePipe, ngcc2.HasPermissionPipe], styles: [\".visible-toggle[_ngcontent-%COMP%]{margin-top:-3px!important}\"], changeDetection: 0 });\r\nFacetDetailComponent.ctorParameters = () => [\r\n    { type: Router },\r\n    { type: ActivatedRoute },\r\n    { type: ServerConfigService },\r\n    { type: ChangeDetectorRef },\r\n    { type: DataService },\r\n    { type: FormBuilder },\r\n    { type: NotificationService },\r\n    { type: ModalService }\r\n];\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ngcc0.setClassMetadata(FacetDetailComponent, [{\n        type: Component,\n        args: [{\n                selector: 'vdr-facet-detail',\n                template: \"<vdr-action-bar>\\r\\n    <vdr-ab-left>\\r\\n        <vdr-entity-info [entity]=\\\"entity$ | async\\\"></vdr-entity-info>\\r\\n        <vdr-language-selector\\r\\n            [disabled]=\\\"isNew$ | async\\\"\\r\\n            [availableLanguageCodes]=\\\"availableLanguages$ | async\\\"\\r\\n            [currentLanguageCode]=\\\"languageCode$ | async\\\"\\r\\n            (languageCodeChange)=\\\"setLanguage($event)\\\"\\r\\n        ></vdr-language-selector>\\r\\n    </vdr-ab-left>\\r\\n\\r\\n    <vdr-ab-right>\\r\\n        <vdr-action-bar-items locationId=\\\"facet-detail\\\"></vdr-action-bar-items>\\r\\n        <button\\r\\n            class=\\\"btn btn-primary\\\"\\r\\n            *ngIf=\\\"isNew$ | async; else updateButton\\\"\\r\\n            (click)=\\\"create()\\\"\\r\\n            [disabled]=\\\"detailForm.invalid || detailForm.pristine\\\"\\r\\n        >\\r\\n            {{ 'common.create' | translate }}\\r\\n        </button>\\r\\n        <ng-template #updateButton>\\r\\n            <button\\r\\n                *vdrIfPermissions=\\\"updatePermission\\\"\\r\\n                class=\\\"btn btn-primary\\\"\\r\\n                (click)=\\\"save()\\\"\\r\\n                [disabled]=\\\"detailForm.invalid || detailForm.pristine\\\"\\r\\n            >\\r\\n                {{ 'common.update' | translate }}\\r\\n            </button>\\r\\n        </ng-template>\\r\\n    </vdr-ab-right>\\r\\n</vdr-action-bar>\\r\\n\\r\\n<form class=\\\"form\\\" [formGroup]=\\\"detailForm\\\" *ngIf=\\\"entity$ | async as facet\\\">\\r\\n    <section class=\\\"form-block\\\" formGroupName=\\\"facet\\\">\\r\\n        <vdr-form-field [label]=\\\"'catalog.visibility' | translate\\\" for=\\\"visibility\\\">\\r\\n            <clr-toggle-wrapper>\\r\\n                <input\\r\\n                    type=\\\"checkbox\\\"\\r\\n                    clrToggle\\r\\n                    [vdrDisabled]=\\\"!(updatePermission | hasPermission)\\\"\\r\\n                    formControlName=\\\"visible\\\"\\r\\n                    id=\\\"visibility\\\"\\r\\n                />\\r\\n                <label class=\\\"visible-toggle\\\">\\r\\n                    <ng-container *ngIf=\\\"detailForm.value.facet.visible; else private\\\">{{\\r\\n                        'catalog.public' | translate\\r\\n                    }}</ng-container>\\r\\n                    <ng-template #private>{{ 'catalog.private' | translate }}</ng-template>\\r\\n                </label>\\r\\n            </clr-toggle-wrapper>\\r\\n        </vdr-form-field>\\r\\n        <vdr-form-field [label]=\\\"'common.name' | translate\\\" for=\\\"name\\\">\\r\\n            <input\\r\\n                id=\\\"name\\\"\\r\\n                type=\\\"text\\\"\\r\\n                formControlName=\\\"name\\\"\\r\\n                [readonly]=\\\"!(updatePermission | hasPermission)\\\"\\r\\n                (input)=\\\"updateCode(facet.code, $event.target.value)\\\"\\r\\n            />\\r\\n        </vdr-form-field>\\r\\n        <vdr-form-field\\r\\n            [label]=\\\"'common.code' | translate\\\"\\r\\n            for=\\\"code\\\"\\r\\n            [readOnlyToggle]=\\\"updatePermission | hasPermission\\\"\\r\\n        >\\r\\n            <input\\r\\n                id=\\\"code\\\"\\r\\n                type=\\\"text\\\"\\r\\n                [readonly]=\\\"!(updatePermission | hasPermission)\\\"\\r\\n                formControlName=\\\"code\\\"\\r\\n            />\\r\\n        </vdr-form-field>\\r\\n\\r\\n        <section formGroupName=\\\"customFields\\\" *ngIf=\\\"customFields.length\\\">\\r\\n            <label>{{ 'common.custom-fields' | translate }}</label>\\r\\n            <vdr-tabbed-custom-fields\\r\\n                entityName=\\\"Facet\\\"\\r\\n                [customFields]=\\\"customFields\\\"\\r\\n                [customFieldsFormGroup]=\\\"detailForm.get(['facet', 'customFields'])\\\"\\r\\n                [readonly]=\\\"!(updatePermission | hasPermission)\\\"\\r\\n            ></vdr-tabbed-custom-fields>\\r\\n        </section>\\r\\n        <vdr-custom-detail-component-host\\r\\n            locationId=\\\"facet-detail\\\"\\r\\n            [entity$]=\\\"entity$\\\"\\r\\n            [detailForm]=\\\"detailForm\\\"\\r\\n        ></vdr-custom-detail-component-host>\\r\\n    </section>\\r\\n\\r\\n    <section class=\\\"form-block\\\" *ngIf=\\\"!(isNew$ | async)\\\">\\r\\n        <label>{{ 'catalog.facet-values' | translate }}</label>\\r\\n\\r\\n        <table class=\\\"facet-values-list table\\\" formArrayName=\\\"values\\\" *ngIf=\\\"0 < getValuesFormArray().length\\\">\\r\\n            <thead>\\r\\n                <tr>\\r\\n                    <th></th>\\r\\n                    <th>{{ 'common.name' | translate }}</th>\\r\\n                    <th>{{ 'common.code' | translate }}</th>\\r\\n                    <ng-container *ngIf=\\\"customValueFields.length\\\">\\r\\n                        <th>{{ 'common.custom-fields' | translate }}</th>\\r\\n                    </ng-container>\\r\\n                    <th></th>\\r\\n                </tr>\\r\\n            </thead>\\r\\n            <tbody>\\r\\n                <tr class=\\\"facet-value\\\" *ngFor=\\\"let value of values; let i = index\\\" [formGroupName]=\\\"i\\\">\\r\\n                    <td class=\\\"align-middle\\\">\\r\\n                        <vdr-entity-info [entity]=\\\"value\\\"></vdr-entity-info>\\r\\n                    </td>\\r\\n                    <td class=\\\"align-middle\\\">\\r\\n                        <input\\r\\n                            type=\\\"text\\\"\\r\\n                            formControlName=\\\"name\\\"\\r\\n                            [readonly]=\\\"!(updatePermission | hasPermission)\\\"\\r\\n                            (input)=\\\"updateValueCode(facet.values[i]?.code, $event.target.value, i)\\\"\\r\\n                        />\\r\\n                    </td>\\r\\n                    <td class=\\\"align-middle\\\"><input type=\\\"text\\\" formControlName=\\\"code\\\" readonly /></td>\\r\\n                    <td class=\\\"\\\" *ngIf=\\\"customValueFields.length\\\">\\r\\n                        <vdr-tabbed-custom-fields\\r\\n                            entityName=\\\"FacetValue\\\"\\r\\n                            [customFields]=\\\"customValueFields\\\"\\r\\n                            [compact]=\\\"true\\\"\\r\\n                            [customFieldsFormGroup]=\\\"detailForm.get(['values', i, 'customFields'])\\\"\\r\\n                            [readonly]=\\\"!(updatePermission | hasPermission)\\\"\\r\\n                        ></vdr-tabbed-custom-fields>\\r\\n                    </td>\\r\\n                    <td class=\\\"align-middle\\\">\\r\\n                        <vdr-dropdown>\\r\\n                            <button type=\\\"button\\\" class=\\\"btn btn-link btn-sm\\\" vdrDropdownTrigger>\\r\\n                                {{ 'common.actions' | translate }}\\r\\n                                <clr-icon shape=\\\"caret down\\\"></clr-icon>\\r\\n                            </button>\\r\\n                            <vdr-dropdown-menu vdrPosition=\\\"bottom-right\\\">\\r\\n                                <button\\r\\n                                    type=\\\"button\\\"\\r\\n                                    class=\\\"delete-button\\\"\\r\\n                                    (click)=\\\"deleteFacetValue(facet.values[i]?.id, i)\\\"\\r\\n                                    [disabled]=\\\"!(updatePermission | hasPermission)\\\"\\r\\n                                    vdrDropdownItem\\r\\n                                >\\r\\n                                    <clr-icon shape=\\\"trash\\\" class=\\\"is-danger\\\"></clr-icon>\\r\\n                                    {{ 'common.delete' | translate }}\\r\\n                                </button>\\r\\n                            </vdr-dropdown-menu>\\r\\n                        </vdr-dropdown>\\r\\n                    </td>\\r\\n                </tr>\\r\\n            </tbody>\\r\\n        </table>\\r\\n\\r\\n        <div>\\r\\n            <button\\r\\n                type=\\\"button\\\"\\r\\n                class=\\\"btn btn-secondary\\\"\\r\\n                *vdrIfPermissions=\\\"['CreateCatalog', 'CreateFacet']\\\"\\r\\n                (click)=\\\"addFacetValue()\\\"\\r\\n            >\\r\\n                <clr-icon shape=\\\"add\\\"></clr-icon>\\r\\n                {{ 'catalog.add-facet-value' | translate }}\\r\\n            </button>\\r\\n        </div>\\r\\n    </section>\\r\\n</form>\\r\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\".visible-toggle{margin-top:-3px!important}\\n\"]\n            }]\n    }], function () { return [{ type: ngcc1.Router }, { type: ngcc1.ActivatedRoute }, { type: ngcc2.ServerConfigService }, { type: ngcc0.ChangeDetectorRef }, { type: ngcc2.DataService }, { type: ngcc3.FormBuilder }, { type: ngcc2.NotificationService }, { type: ngcc2.ModalService }]; }, null); })();\n\nclass FacetListComponent extends BaseListComponent {\r\n    constructor(dataService, modalService, notificationService, serverConfigService, router, route) {\r\n        super(router, route);\r\n        this.dataService = dataService;\r\n        this.modalService = modalService;\r\n        this.notificationService = notificationService;\r\n        this.serverConfigService = serverConfigService;\r\n        this.filterTermControl = new FormControl('');\r\n        this.initialLimit = 3;\r\n        this.displayLimit = {};\r\n        super.setQueryFn((...args) => this.dataService.facet.getFacets(...args).refetchOnChannelChange(), data => data.facets, (skip, take) => ({\r\n            options: {\r\n                skip,\r\n                take,\r\n                filter: {\r\n                    name: {\r\n                        contains: this.filterTermControl.value,\r\n                    },\r\n                },\r\n                sort: {\r\n                    createdAt: SortOrder$1.DESC,\r\n                },\r\n            },\r\n        }));\r\n        this.selectionManager = new SelectionManager({\r\n            multiSelect: true,\r\n            itemsAreEqual: (a, b) => a.id === b.id,\r\n            additiveMode: true,\r\n        });\r\n    }\r\n    ngOnInit() {\r\n        super.ngOnInit();\r\n        this.availableLanguages$ = this.serverConfigService.getAvailableLanguages();\r\n        this.contentLanguage$ = this.dataService.client\r\n            .uiState()\r\n            .mapStream(({ uiState }) => uiState.contentLanguage)\r\n            .pipe(tap(() => this.refresh()));\r\n        this.filterTermControl.valueChanges\r\n            .pipe(filter(value => 2 <= value.length || value.length === 0), debounceTime(250), takeUntil(this.destroy$))\r\n            .subscribe(() => this.refresh());\r\n    }\r\n    toggleDisplayLimit(facet) {\r\n        if (this.displayLimit[facet.id] === facet.values.length) {\r\n            this.displayLimit[facet.id] = this.initialLimit;\r\n        }\r\n        else {\r\n            this.displayLimit[facet.id] = facet.values.length;\r\n        }\r\n    }\r\n    deleteFacet(facetValueId) {\r\n        this.showModalAndDelete(facetValueId)\r\n            .pipe(switchMap(response => {\r\n            if (response.result === DeletionResult.DELETED) {\r\n                return [true];\r\n            }\r\n            else {\r\n                return this.showModalAndDelete(facetValueId, response.message || '').pipe(map(r => r.result === DeletionResult.DELETED));\r\n            }\r\n        }), \r\n        // Refresh the cached facets to reflect the changes\r\n        switchMap(() => this.dataService.facet.getAllFacets().single$))\r\n            .subscribe(() => {\r\n            this.notificationService.success(marker('common.notify-delete-success'), {\r\n                entity: 'FacetValue',\r\n            });\r\n            this.refresh();\r\n        }, err => {\r\n            this.notificationService.error(marker('common.notify-delete-error'), {\r\n                entity: 'FacetValue',\r\n            });\r\n        });\r\n    }\r\n    setLanguage(code) {\r\n        this.dataService.client.setContentLanguage(code).subscribe();\r\n    }\r\n    showModalAndDelete(facetId, message) {\r\n        return this.modalService\r\n            .dialog({\r\n            title: marker('catalog.confirm-delete-facet'),\r\n            body: message,\r\n            buttons: [\r\n                { type: 'secondary', label: marker('common.cancel') },\r\n                {\r\n                    type: 'danger',\r\n                    label: message ? marker('common.force-delete') : marker('common.delete'),\r\n                    returnValue: true,\r\n                },\r\n            ],\r\n        })\r\n            .pipe(switchMap(res => (res ? this.dataService.facet.deleteFacet(facetId, !!message) : EMPTY)), map(res => res.deleteFacet));\r\n    }\r\n}\nFacetListComponent.fac = function FacetListComponent_Factory(t) { return new (t || FacetListComponent)(ngcc0.directiveInject(ngcc2.DataService), ngcc0.directiveInject(ngcc2.ModalService), ngcc0.directiveInject(ngcc2.NotificationService), ngcc0.directiveInject(ngcc2.ServerConfigService), ngcc0.directiveInject(ngcc1.Router), ngcc0.directiveInject(ngcc1.ActivatedRoute)); };\nFacetListComponent.cmp = /*@__PURE__*/ ngcc0.defineComponent({ type: FacetListComponent, selectors: [[\"vdr-facet-list\"]], features: [ngcc0.InheritDefinitionFeature], decls: 33, vars: 40, consts: [[1, \"\"], [\"type\", \"text\", \"name\", \"searchTerm\", 1, \"clr-input\", \"search-input\", 3, \"formControl\", \"placeholder\"], [3, \"availableLanguageCodes\", \"currentLanguageCode\", \"languageCodeChange\"], [\"locationId\", \"facet-list\"], [\"class\", \"btn btn-primary\", 3, \"routerLink\", 4, \"vdrIfPermissions\"], [3, \"items\", \"itemsPerPage\", \"totalItems\", \"currentPage\", \"selectionManager\", \"pageChange\", \"itemsPerPageChange\"], [\"locationId\", \"facet-list\", 3, \"hostComponent\", \"selectionManager\"], [3, \"expand\"], [1, \"btn\", \"btn-primary\", 3, \"routerLink\"], [\"shape\", \"plus\"], [1, \"left\", \"align-middle\"], [3, \"facetValue\", \"removable\", \"displayFacetName\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"btn btn-sm btn-secondary btn-icon\", 3, \"click\", 4, \"ngIf\"], [4, \"ngIf\", \"ngIfElse\"], [\"private\", \"\"], [1, \"right\", \"align-middle\"], [\"iconShape\", \"edit\", 3, \"label\", \"linkTo\"], [\"type\", \"button\", \"vdrDropdownTrigger\", \"\", 1, \"btn\", \"btn-link\", \"btn-sm\"], [\"shape\", \"caret down\"], [\"vdrPosition\", \"bottom-right\"], [\"type\", \"button\", \"vdrDropdownItem\", \"\", 1, \"delete-button\", 3, \"disabled\", \"click\"], [\"shape\", \"trash\", 1, \"is-danger\"], [3, \"facetValue\", \"removable\", \"displayFacetName\"], [1, \"btn\", \"btn-sm\", \"btn-secondary\", \"btn-icon\", 3, \"click\"], [\"collapse\", \"\"], [\"shape\", \"minus\"]], template: function FacetListComponent_Template(rf, ctx) { if (rf & 1) {\n        ngcc0.elementStart(0, \"vdr-action-bar\");\n        ngcc0.elementStart(1, \"vdr-ab-left\");\n        ngcc0.elementStart(2, \"div\", 0);\n        ngcc0.element(3, \"input\", 1);\n        ngcc0.pipe(4, \"translate\");\n        ngcc0.elementStart(5, \"div\");\n        ngcc0.elementStart(6, \"vdr-language-selector\", 2);\n        ngcc0.listener(\"languageCodeChange\", function FacetListComponent_Template_vdr_language_selector_languageCodeChange_6_listener($event) { return ctx.setLanguage($event); });\n        ngcc0.pipe(7, \"async\");\n        ngcc0.pipe(8, \"async\");\n        ngcc0.elementEnd();\n        ngcc0.elementEnd();\n        ngcc0.elementEnd();\n        ngcc0.elementEnd();\n        ngcc0.elementStart(9, \"vdr-ab-right\");\n        ngcc0.element(10, \"vdr-action-bar-items\", 3);\n        ngcc0.template(11, FacetListComponent_a_11_Template, 4, 5, \"a\", 4);\n        ngcc0.elementEnd();\n        ngcc0.elementEnd();\n        ngcc0.elementStart(12, \"vdr-data-table\", 5);\n        ngcc0.listener(\"pageChange\", function FacetListComponent_Template_vdr_data_table_pageChange_12_listener($event) { return ctx.setPageNumber($event); })(\"itemsPerPageChange\", function FacetListComponent_Template_vdr_data_table_itemsPerPageChange_12_listener($event) { return ctx.setItemsPerPage($event); });\n        ngcc0.pipe(13, \"async\");\n        ngcc0.pipe(14, \"async\");\n        ngcc0.pipe(15, \"async\");\n        ngcc0.pipe(16, \"async\");\n        ngcc0.element(17, \"vdr-bulk-action-menu\", 6);\n        ngcc0.elementStart(18, \"vdr-dt-column\");\n        ngcc0.text(19);\n        ngcc0.pipe(20, \"translate\");\n        ngcc0.elementEnd();\n        ngcc0.elementStart(21, \"vdr-dt-column\");\n        ngcc0.text(22);\n        ngcc0.pipe(23, \"translate\");\n        ngcc0.elementEnd();\n        ngcc0.elementStart(24, \"vdr-dt-column\", 7);\n        ngcc0.text(25);\n        ngcc0.pipe(26, \"translate\");\n        ngcc0.elementEnd();\n        ngcc0.elementStart(27, \"vdr-dt-column\");\n        ngcc0.text(28);\n        ngcc0.pipe(29, \"translate\");\n        ngcc0.elementEnd();\n        ngcc0.element(30, \"vdr-dt-column\");\n        ngcc0.element(31, \"vdr-dt-column\");\n        ngcc0.template(32, FacetListComponent_ng_template_32_Template, 28, 38, \"ng-template\");\n        ngcc0.elementEnd();\n    } if (rf & 2) {\n        ngcc0.advance(3);\n        ngcc0.property(\"formControl\", ctx.filterTermControl)(\"placeholder\", ngcc0.pipeBind1(4, 17, \"catalog.filter-by-name\"));\n        ngcc0.advance(3);\n        ngcc0.property(\"availableLanguageCodes\", ngcc0.pipeBind1(7, 19, ctx.availableLanguages$))(\"currentLanguageCode\", ngcc0.pipeBind1(8, 21, ctx.contentLanguage$));\n        ngcc0.advance(5);\n        ngcc0.property(\"vdrIfPermissions\", ngcc0.pureFunction0(39, _c14));\n        ngcc0.advance(1);\n        ngcc0.property(\"items\", ngcc0.pipeBind1(13, 23, ctx.items$))(\"itemsPerPage\", ngcc0.pipeBind1(14, 25, ctx.itemsPerPage$))(\"totalItems\", ngcc0.pipeBind1(15, 27, ctx.totalItems$))(\"currentPage\", ngcc0.pipeBind1(16, 29, ctx.currentPage$))(\"selectionManager\", ctx.selectionManager);\n        ngcc0.advance(5);\n        ngcc0.property(\"hostComponent\", ctx)(\"selectionManager\", ctx.selectionManager);\n        ngcc0.advance(2);\n        ngcc0.textInterpolate(ngcc0.pipeBind1(20, 31, \"common.code\"));\n        ngcc0.advance(3);\n        ngcc0.textInterpolate(ngcc0.pipeBind1(23, 33, \"common.name\"));\n        ngcc0.advance(2);\n        ngcc0.property(\"expand\", true);\n        ngcc0.advance(1);\n        ngcc0.textInterpolate(ngcc0.pipeBind1(26, 35, \"catalog.values\"));\n        ngcc0.advance(3);\n        ngcc0.textInterpolate(ngcc0.pipeBind1(29, 37, \"catalog.visibility\"));\n    } }, directives: [ngcc2.ActionBarComponent, ngcc2.ActionBarLeftComponent, ngcc2.FormFieldControlDirective, ngcc3.DefaultValueAccessor, ngcc3.NgControlStatus, ngcc3.FormControlDirective, ngcc2.LanguageSelectorComponent, ngcc2.ActionBarRightComponent, ngcc2.ActionBarItemsComponent, ngcc2.IfPermissionsDirective, ngcc2.DataTableComponent, ngcc2.BulkActionMenuComponent, ngcc2.DataTableColumnComponent, ngcc1.RouterLinkWithHref, ngcc7.ClrIconCustomTag, ngcc4.NgForOf, ngcc4.NgIf, ngcc2.ChipComponent, ngcc2.TableRowActionComponent, ngcc2.DropdownComponent, ngcc2.DropdownTriggerDirective, ngcc2.DropdownMenuComponent, ngcc2.DropdownItemDirective, ngcc2.FacetValueChipComponent], pipes: [ngcc5.TranslatePipe, ngcc4.AsyncPipe, ngcc4.SlicePipe, ngcc2.HasPermissionPipe], styles: [\"td.private[_ngcontent-%COMP%]{background-color:var(--color-component-bg-200)}\"] });\r\nFacetListComponent.ctorParameters = () => [\r\n    { type: DataService },\r\n    { type: ModalService },\r\n    { type: NotificationService },\r\n    { type: ServerConfigService },\r\n    { type: Router },\r\n    { type: ActivatedRoute }\r\n];\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ngcc0.setClassMetadata(FacetListComponent, [{\n        type: Component,\n        args: [{\n                selector: 'vdr-facet-list',\n                template: \"<vdr-action-bar>\\r\\n    <vdr-ab-left>\\r\\n        <div class=\\\"\\\">\\r\\n            <input\\r\\n                type=\\\"text\\\"\\r\\n                name=\\\"searchTerm\\\"\\r\\n                [formControl]=\\\"filterTermControl\\\"\\r\\n                [placeholder]=\\\"'catalog.filter-by-name' | translate\\\"\\r\\n                class=\\\"clr-input search-input\\\"\\r\\n            />\\r\\n            <div>\\r\\n                <vdr-language-selector\\r\\n                    [availableLanguageCodes]=\\\"availableLanguages$ | async\\\"\\r\\n                    [currentLanguageCode]=\\\"contentLanguage$ | async\\\"\\r\\n                    (languageCodeChange)=\\\"setLanguage($event)\\\"\\r\\n                ></vdr-language-selector>\\r\\n            </div>\\r\\n        </div>\\r\\n    </vdr-ab-left>\\r\\n    <vdr-ab-right>\\r\\n        <vdr-action-bar-items locationId=\\\"facet-list\\\"></vdr-action-bar-items>\\r\\n        <a\\r\\n            class=\\\"btn btn-primary\\\"\\r\\n            *vdrIfPermissions=\\\"['CreateCatalog', 'CreateFacet']\\\"\\r\\n            [routerLink]=\\\"['./create']\\\"\\r\\n        >\\r\\n            <clr-icon shape=\\\"plus\\\"></clr-icon>\\r\\n            {{ 'catalog.create-new-facet' | translate }}\\r\\n        </a>\\r\\n    </vdr-ab-right>\\r\\n</vdr-action-bar>\\r\\n\\r\\n<vdr-data-table\\r\\n    [items]=\\\"items$ | async\\\"\\r\\n    [itemsPerPage]=\\\"itemsPerPage$ | async\\\"\\r\\n    [totalItems]=\\\"totalItems$ | async\\\"\\r\\n    [currentPage]=\\\"currentPage$ | async\\\"\\r\\n    (pageChange)=\\\"setPageNumber($event)\\\"\\r\\n    (itemsPerPageChange)=\\\"setItemsPerPage($event)\\\"\\r\\n    [selectionManager]=\\\"selectionManager\\\"\\r\\n>\\r\\n    <vdr-bulk-action-menu\\r\\n        locationId=\\\"facet-list\\\"\\r\\n        [hostComponent]=\\\"this\\\"\\r\\n        [selectionManager]=\\\"selectionManager\\\"\\r\\n    ></vdr-bulk-action-menu>\\r\\n    <vdr-dt-column>{{ 'common.code' | translate }}</vdr-dt-column>\\r\\n    <vdr-dt-column>{{ 'common.name' | translate }}</vdr-dt-column>\\r\\n    <vdr-dt-column [expand]=\\\"true\\\">{{ 'catalog.values' | translate }}</vdr-dt-column>\\r\\n    <vdr-dt-column>{{ 'catalog.visibility' | translate }}</vdr-dt-column>\\r\\n    <vdr-dt-column></vdr-dt-column>\\r\\n    <vdr-dt-column></vdr-dt-column>\\r\\n    <ng-template let-facet=\\\"item\\\">\\r\\n        <td class=\\\"left align-middle\\\" [class.private]=\\\"facet.isPrivate\\\">{{ facet.code }}</td>\\r\\n        <td class=\\\"left align-middle\\\" [class.private]=\\\"facet.isPrivate\\\">{{ facet.name }}</td>\\r\\n        <td class=\\\"left align-middle\\\" [class.private]=\\\"facet.isPrivate\\\">\\r\\n            <vdr-facet-value-chip\\r\\n                *ngFor=\\\"let value of facet.values | slice: 0:displayLimit[facet.id] || 3\\\"\\r\\n                [facetValue]=\\\"value\\\"\\r\\n                [removable]=\\\"false\\\"\\r\\n                [displayFacetName]=\\\"false\\\"\\r\\n            ></vdr-facet-value-chip>\\r\\n            <button\\r\\n                class=\\\"btn btn-sm btn-secondary btn-icon\\\"\\r\\n                *ngIf=\\\"facet.values.length > initialLimit\\\"\\r\\n                (click)=\\\"toggleDisplayLimit(facet)\\\"\\r\\n            >\\r\\n                <ng-container *ngIf=\\\"(displayLimit[facet.id] || 0) < facet.values.length; else collapse\\\">\\r\\n                    <clr-icon shape=\\\"plus\\\"></clr-icon>\\r\\n                    {{ facet.values.length - initialLimit }}\\r\\n                </ng-container>\\r\\n                <ng-template #collapse>\\r\\n                    <clr-icon shape=\\\"minus\\\"></clr-icon>\\r\\n                </ng-template>\\r\\n            </button>\\r\\n        </td>\\r\\n        <td class=\\\"left align-middle\\\" [class.private]=\\\"facet.isPrivate\\\">\\r\\n            <vdr-chip>\\r\\n                <ng-container *ngIf=\\\"!facet.isPrivate; else private\\\">{{\\r\\n                    'catalog.public' | translate\\r\\n                }}</ng-container>\\r\\n                <ng-template #private>{{ 'catalog.private' | translate }}</ng-template>\\r\\n            </vdr-chip>\\r\\n        </td>\\r\\n        <td class=\\\"right align-middle\\\" [class.private]=\\\"facet.isPrivate\\\">\\r\\n            <vdr-table-row-action\\r\\n                iconShape=\\\"edit\\\"\\r\\n                [label]=\\\"'common.edit' | translate\\\"\\r\\n                [linkTo]=\\\"['./', facet.id]\\\"\\r\\n            ></vdr-table-row-action>\\r\\n        </td>\\r\\n        <td class=\\\"right align-middle\\\" [class.private]=\\\"facet.isPrivate\\\">\\r\\n            <vdr-dropdown>\\r\\n                <button type=\\\"button\\\" class=\\\"btn btn-link btn-sm\\\" vdrDropdownTrigger>\\r\\n                    {{ 'common.actions' | translate }}\\r\\n                    <clr-icon shape=\\\"caret down\\\"></clr-icon>\\r\\n                </button>\\r\\n                <vdr-dropdown-menu vdrPosition=\\\"bottom-right\\\">\\r\\n                    <button\\r\\n                        type=\\\"button\\\"\\r\\n                        class=\\\"delete-button\\\"\\r\\n                        (click)=\\\"deleteFacet(facet.id)\\\"\\r\\n                        [disabled]=\\\"!(['DeleteCatalog', 'DeleteFacet'] | hasPermission)\\\"\\r\\n                        vdrDropdownItem\\r\\n                    >\\r\\n                        <clr-icon shape=\\\"trash\\\" class=\\\"is-danger\\\"></clr-icon>\\r\\n                        {{ 'common.delete' | translate }}\\r\\n                    </button>\\r\\n                </vdr-dropdown-menu>\\r\\n            </vdr-dropdown>\\r\\n        </td>\\r\\n    </ng-template>\\r\\n</vdr-data-table>\\r\\n\",\n                styles: [\"td.private{background-color:var(--color-component-bg-200)}\\n\"]\n            }]\n    }], function () { return [{ type: ngcc2.DataService }, { type: ngcc2.ModalService }, { type: ngcc2.NotificationService }, { type: ngcc2.ServerConfigService }, { type: ngcc1.Router }, { type: ngcc1.ActivatedRoute }]; }, null); })();\n\n/**\r\n * @description\r\n * Like String.prototype.replace(), but replaces the last instance\r\n * rather than the first.\r\n */\r\nfunction replaceLast(target, search, replace) {\r\n    if (!target) {\r\n        return '';\r\n    }\r\n    const lastIndex = target.lastIndexOf(search);\r\n    if (lastIndex === -1) {\r\n        return target;\r\n    }\r\n    const head = target.substr(0, lastIndex);\r\n    const tail = target.substr(lastIndex).replace(search, replace);\r\n    return head + tail;\r\n}\n\n/**\r\n * Handles the logic for making the API calls to perform CRUD operations on a Product and its related\r\n * entities. This logic was extracted out of the component because it became too large and hard to follow.\r\n */\r\nclass ProductDetailService {\r\n    constructor(dataService) {\r\n        this.dataService = dataService;\r\n    }\r\n    getFacets() {\r\n        return this.dataService.facet.getAllFacets().mapSingle(data => data.facets.items);\r\n    }\r\n    getTaxCategories() {\r\n        return this.dataService.settings\r\n            .getTaxCategories()\r\n            .mapSingle(data => data.taxCategories)\r\n            .pipe(shareReplay(1));\r\n    }\r\n    createProductWithVariants(input, createVariantsConfig, languageCode) {\r\n        const createProduct$ = this.dataService.product.createProduct(input);\r\n        const nonEmptyOptionGroups = createVariantsConfig.groups.filter(g => 0 < g.values.length);\r\n        const createOptionGroups$ = this.createProductOptionGroups(nonEmptyOptionGroups, languageCode);\r\n        return forkJoin(createProduct$, createOptionGroups$).pipe(mergeMap(([{ createProduct }, optionGroups]) => {\r\n            const addOptionsToProduct$ = optionGroups.length\r\n                ? forkJoin(optionGroups.map(optionGroup => {\r\n                    return this.dataService.product.addOptionGroupToProduct({\r\n                        productId: createProduct.id,\r\n                        optionGroupId: optionGroup.id,\r\n                    });\r\n                }))\r\n                : of([]);\r\n            return addOptionsToProduct$.pipe(map(() => {\r\n                return { createProduct, optionGroups };\r\n            }));\r\n        }), mergeMap(({ createProduct, optionGroups }) => {\r\n            const variants = createVariantsConfig.variants.map(v => {\r\n                const optionIds = optionGroups.length\r\n                    ? v.optionValues.map((optionName, index) => {\r\n                        const option = optionGroups[index].options.find(o => o.name === optionName);\r\n                        if (!option) {\r\n                            throw new Error(`Could not find a matching ProductOption \"${optionName}\" when creating variant`);\r\n                        }\r\n                        return option.id;\r\n                    })\r\n                    : [];\r\n                return Object.assign(Object.assign({}, v), { optionIds });\r\n            });\r\n            const options = optionGroups.map(og => og.options).reduce((flat, o) => [...flat, ...o], []);\r\n            return this.createProductVariants(createProduct, variants, options, languageCode);\r\n        }));\r\n    }\r\n    createProductOptionGroups(groups, languageCode) {\r\n        return groups.length\r\n            ? forkJoin(groups.map(c => {\r\n                return this.dataService.product\r\n                    .createProductOptionGroups({\r\n                    code: normalizeString(c.name, '-'),\r\n                    translations: [{ languageCode, name: c.name }],\r\n                    options: c.values.map(v => ({\r\n                        code: normalizeString(v, '-'),\r\n                        translations: [{ languageCode, name: v }],\r\n                    })),\r\n                })\r\n                    .pipe(map(data => data.createProductOptionGroup));\r\n            }))\r\n            : of([]);\r\n    }\r\n    createProductVariants(product, variantData, options, languageCode) {\r\n        const variants = variantData.map(v => {\r\n            const name = options.length\r\n                ? `${product.name} ${v.optionIds\r\n                    .map(id => options.find(o => o.id === id))\r\n                    .filter(notNullOrUndefined)\r\n                    .map(o => o.name)\r\n                    .join(' ')}`\r\n                : product.name;\r\n            return {\r\n                productId: product.id,\r\n                price: v.price,\r\n                sku: v.sku,\r\n                stockOnHand: v.stock,\r\n                translations: [\r\n                    {\r\n                        languageCode,\r\n                        name,\r\n                    },\r\n                ],\r\n                optionIds: v.optionIds,\r\n            };\r\n        });\r\n        return this.dataService.product.createProductVariants(variants).pipe(map(({ createProductVariants }) => ({\r\n            createProductVariants,\r\n            productId: product.id,\r\n        })));\r\n    }\r\n    updateProduct(updateOptions) {\r\n        const { product, languageCode, autoUpdate, productInput, variantsInput } = updateOptions;\r\n        const updateOperations = [];\r\n        const updateVariantsInput = variantsInput || [];\r\n        const variants$ = autoUpdate\r\n            ? this.dataService.product\r\n                .getProductVariants({}, product.id)\r\n                .mapSingle(({ productVariants }) => productVariants.items)\r\n            : of([]);\r\n        return variants$.pipe(mergeMap(variants => {\r\n            var _a, _b, _c, _d;\r\n            if (productInput) {\r\n                updateOperations.push(this.dataService.product.updateProduct(productInput));\r\n                const productOldName = (_b = (_a = findTranslation(product, languageCode)) === null || _a === void 0 ? void 0 : _a.name) !== null && _b !== void 0 ? _b : '';\r\n                const productNewName = (_c = findTranslation(productInput, languageCode)) === null || _c === void 0 ? void 0 : _c.name;\r\n                if (productNewName && productOldName !== productNewName && autoUpdate) {\r\n                    for (const variant of variants) {\r\n                        const currentVariantName = ((_d = findTranslation(variant, languageCode)) === null || _d === void 0 ? void 0 : _d.name) || '';\r\n                        let variantInput;\r\n                        const existingVariantInput = updateVariantsInput.find(i => i.id === variant.id);\r\n                        if (existingVariantInput) {\r\n                            variantInput = existingVariantInput;\r\n                        }\r\n                        else {\r\n                            variantInput = {\r\n                                id: variant.id,\r\n                                translations: [{ languageCode, name: currentVariantName }],\r\n                            };\r\n                            updateVariantsInput.push(variantInput);\r\n                        }\r\n                        const variantTranslation = findTranslation(variantInput, languageCode);\r\n                        if (variantTranslation) {\r\n                            if (variantTranslation.name) {\r\n                                variantTranslation.name = replaceLast(variantTranslation.name, productOldName, productNewName);\r\n                            }\r\n                            else {\r\n                                // The variant translation was falsy, which occurs\r\n                                // when defining the product name for a new translation\r\n                                // language that had not yet been defined.\r\n                                variantTranslation.name = [\r\n                                    productNewName,\r\n                                    ...variant.options.map(o => o.name),\r\n                                ].join(' ');\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            if (updateVariantsInput.length) {\r\n                updateOperations.push(this.dataService.product.updateProductVariants(updateVariantsInput));\r\n            }\r\n            return forkJoin(updateOperations);\r\n        }));\r\n    }\r\n    updateProductOption(input, product, languageCode) {\r\n        const variants$ = input.autoUpdate\r\n            ? this.dataService.product\r\n                .getProductVariants({}, product.id)\r\n                .mapSingle(({ productVariants }) => productVariants.items)\r\n            : of([]);\r\n        return variants$.pipe(mergeMap(variants => {\r\n            var _a, _b, _c;\r\n            let updateProductVariantNames$ = of([]);\r\n            if (input.autoUpdate) {\r\n                // Update any ProductVariants' names which include the option name\r\n                let oldOptionName;\r\n                const newOptionName = (_a = findTranslation(input, languageCode)) === null || _a === void 0 ? void 0 : _a.name;\r\n                if (!newOptionName) {\r\n                    updateProductVariantNames$ = of([]);\r\n                }\r\n                const variantsToUpdate = [];\r\n                for (const variant of variants) {\r\n                    if (variant.options.map(o => o.id).includes(input.id)) {\r\n                        if (!oldOptionName) {\r\n                            oldOptionName = (_b = findTranslation(variant.options.find(o => o.id === input.id), languageCode)) === null || _b === void 0 ? void 0 : _b.name;\r\n                        }\r\n                        const variantName = ((_c = findTranslation(variant, languageCode)) === null || _c === void 0 ? void 0 : _c.name) || '';\r\n                        if (oldOptionName && newOptionName && variantName.includes(oldOptionName)) {\r\n                            variantsToUpdate.push({\r\n                                id: variant.id,\r\n                                translations: [\r\n                                    {\r\n                                        languageCode,\r\n                                        name: replaceLast(variantName, oldOptionName, newOptionName),\r\n                                    },\r\n                                ],\r\n                            });\r\n                        }\r\n                    }\r\n                }\r\n                if (variantsToUpdate.length) {\r\n                    updateProductVariantNames$ =\r\n                        this.dataService.product.updateProductVariants(variantsToUpdate);\r\n                }\r\n            }\r\n            return this.dataService.product\r\n                .updateProductOption(input)\r\n                .pipe(mergeMap(() => updateProductVariantNames$));\r\n        }));\r\n    }\r\n    deleteProductVariant(id, productId) {\r\n        return this.dataService.product.deleteProductVariant(id).pipe(switchMap(result => {\r\n            if (result.deleteProductVariant.result === DeletionResult.DELETED) {\r\n                return this.dataService.product.getProduct(productId).single$;\r\n            }\r\n            else {\r\n                return throwError(result.deleteProductVariant.message);\r\n            }\r\n        }));\r\n    }\r\n}\nProductDetailService.fac = function ProductDetailService_Factory(t) { return new (t || ProductDetailService)(ngcc0.inject(ngcc2.DataService)); };\r\nProductDetailService.prov = i0.defineInjectable({ factory: function ProductDetailService_Factory() { return new ProductDetailService(i0.inject(i2.DataService)); }, token: ProductDetailService, providedIn: \"root\" });\r\nProductDetailService.ctorParameters = () => [\r\n    { type: DataService }\r\n];\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ngcc0.setClassMetadata(ProductDetailService, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: ngcc2.DataService }]; }, null); })();\n\nclass ApplyFacetDialogComponent {\r\n    constructor(changeDetector) {\r\n        this.changeDetector = changeDetector;\r\n        this.selectedValues = [];\r\n    }\r\n    ngAfterViewInit() {\r\n        setTimeout(() => this.selector.focus(), 0);\r\n    }\r\n    selectValues() {\r\n        this.resolveWith(this.selectedValues);\r\n    }\r\n    cancel() {\r\n        this.resolveWith();\r\n    }\r\n}\nApplyFacetDialogComponent.fac = function ApplyFacetDialogComponent_Factory(t) { return new (t || ApplyFacetDialogComponent)(ngcc0.directiveInject(ngcc0.ChangeDetectorRef)); };\nApplyFacetDialogComponent.cmp = /*@__PURE__*/ ngcc0.defineComponent({ type: ApplyFacetDialogComponent, selectors: [[\"vdr-apply-facet-dialog\"]], viewQuery: function ApplyFacetDialogComponent_Query(rf, ctx) { if (rf & 1) {\n        ngcc0.viewQuery(FacetValueSelectorComponent, 5);\n    } if (rf & 2) {\n        let _t;\n        ngcc0.queryRefresh(_t = ngcc0.loadQuery()) && (ctx.selector = _t.first);\n    } }, decls: 3, vars: 1, consts: [[\"vdrDialogTitle\", \"\"], [3, \"facets\", \"selectedValuesChange\"], [\"vdrDialogButtons\", \"\"], [\"type\", \"button\", 1, \"btn\", 3, \"click\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", 3, \"disabled\", \"click\"]], template: function ApplyFacetDialogComponent_Template(rf, ctx) { if (rf & 1) {\n        ngcc0.template(0, ApplyFacetDialogComponent_ng_template_0_Template, 2, 3, \"ng-template\", 0);\n        ngcc0.elementStart(1, \"vdr-facet-value-selector\", 1);\n        ngcc0.listener(\"selectedValuesChange\", function ApplyFacetDialogComponent_Template_vdr_facet_value_selector_selectedValuesChange_1_listener($event) { return ctx.selectedValues = $event; });\n        ngcc0.elementEnd();\n        ngcc0.template(2, ApplyFacetDialogComponent_ng_template_2_Template, 6, 7, \"ng-template\", 2);\n    } if (rf & 2) {\n        ngcc0.advance(1);\n        ngcc0.property(\"facets\", ctx.facets);\n    } }, directives: [ngcc2.DialogTitleDirective, ngcc2.FacetValueSelectorComponent, ngcc2.DialogButtonsDirective], pipes: [ngcc5.TranslatePipe], styles: [\"\"], changeDetection: 0 });\r\nApplyFacetDialogComponent.ctorParameters = () => [\r\n    { type: ChangeDetectorRef }\r\n];\r\nApplyFacetDialogComponent.propDecorators = {\r\n    selector: [{ type: ViewChild, args: [FacetValueSelectorComponent,] }]\r\n};\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ngcc0.setClassMetadata(ApplyFacetDialogComponent, [{\n        type: Component,\n        args: [{\n                selector: 'vdr-apply-facet-dialog',\n                template: \"<ng-template vdrDialogTitle>{{ 'catalog.add-facets' | translate }}</ng-template>\\r\\n\\r\\n<vdr-facet-value-selector\\r\\n    [facets]=\\\"facets\\\"\\r\\n    (selectedValuesChange)=\\\"selectedValues = $event\\\"\\r\\n></vdr-facet-value-selector>\\r\\n\\r\\n<ng-template vdrDialogButtons>\\r\\n    <button type=\\\"button\\\" class=\\\"btn\\\" (click)=\\\"cancel()\\\">{{ 'common.cancel' | translate }}</button>\\r\\n    <button\\r\\n        type=\\\"submit\\\"\\r\\n        (click)=\\\"selectValues()\\\"\\r\\n        [disabled]=\\\"selectedValues.length === 0\\\"\\r\\n        class=\\\"btn btn-primary\\\"\\r\\n    >\\r\\n        {{ 'catalog.add-facets' | translate }}\\r\\n    </button>\\r\\n</ng-template>\\r\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\"\"]\n            }]\n    }], function () { return [{ type: ngcc0.ChangeDetectorRef }]; }, { selector: [{\n            type: ViewChild,\n            args: [FacetValueSelectorComponent]\n        }] }); })();\n\nclass AssignProductsToChannelDialogComponent {\r\n    constructor(dataService, notificationService) {\r\n        this.dataService = dataService;\r\n        this.notificationService = notificationService;\r\n        this.priceFactorControl = new FormControl(1);\r\n        this.selectedChannelIdControl = new FormControl();\r\n    }\r\n    get isProductVariantMode() {\r\n        return this.productVariantIds != null;\r\n    }\r\n    ngOnInit() {\r\n        const activeChannelId$ = this.dataService.client\r\n            .userStatus()\r\n            .mapSingle(({ userStatus }) => userStatus.activeChannelId);\r\n        const allChannels$ = this.dataService.settings.getChannels().mapSingle(data => data.channels);\r\n        combineLatest(activeChannelId$, allChannels$).subscribe(([activeChannelId, channels]) => {\r\n            // tslint:disable-next-line:no-non-null-assertion\r\n            this.currentChannel = channels.find(c => c.id === activeChannelId);\r\n            this.availableChannels = channels;\r\n        });\r\n        this.selectedChannelIdControl.valueChanges.subscribe(ids => {\r\n            this.selectChannel(ids);\r\n        });\r\n        this.variantsPreview$ = combineLatest(from(this.getTopVariants(10)), this.priceFactorControl.valueChanges.pipe(startWith(1))).pipe(map(([variants, factor]) => {\r\n            return variants.map(v => ({\r\n                id: v.id,\r\n                name: v.name,\r\n                price: v.price,\r\n                pricePreview: v.price * +factor,\r\n            }));\r\n        }));\r\n    }\r\n    selectChannel(channelIds) {\r\n        this.selectedChannel = this.availableChannels.find(c => c.id === channelIds[0]);\r\n    }\r\n    assign() {\r\n        const selectedChannel = this.selectedChannel;\r\n        if (selectedChannel) {\r\n            if (!this.isProductVariantMode) {\r\n                this.dataService.product\r\n                    .assignProductsToChannel({\r\n                    channelId: selectedChannel.id,\r\n                    productIds: this.productIds,\r\n                    priceFactor: +this.priceFactorControl.value,\r\n                })\r\n                    .subscribe(() => {\r\n                    this.notificationService.success(marker('catalog.assign-product-to-channel-success'), {\r\n                        channel: selectedChannel.code,\r\n                        count: this.productIds.length,\r\n                    });\r\n                    this.resolveWith(true);\r\n                });\r\n            }\r\n            else if (this.productVariantIds) {\r\n                this.dataService.product\r\n                    .assignVariantsToChannel({\r\n                    channelId: selectedChannel.id,\r\n                    productVariantIds: this.productVariantIds,\r\n                    priceFactor: +this.priceFactorControl.value,\r\n                })\r\n                    .subscribe(() => {\r\n                    this.notificationService.success(marker('catalog.assign-variant-to-channel-success'), {\r\n                        channel: selectedChannel.code,\r\n                        // tslint:disable-next-line:no-non-null-assertion\r\n                        count: this.productVariantIds.length,\r\n                    });\r\n                    this.resolveWith(true);\r\n                });\r\n            }\r\n        }\r\n    }\r\n    cancel() {\r\n        this.resolveWith();\r\n    }\r\n    getTopVariants(take) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const variants = [];\r\n            for (let i = 0; i < this.productIds.length && variants.length < take; i++) {\r\n                const productVariants = yield this.dataService.product\r\n                    .getProduct(this.productIds[i], { take: this.isProductVariantMode ? undefined : take })\r\n                    .mapSingle(({ product }) => {\r\n                    const _variants = product ? product.variantList.items : [];\r\n                    return _variants.filter(v => { var _a; return this.isProductVariantMode ? (_a = this.productVariantIds) === null || _a === void 0 ? void 0 : _a.includes(v.id) : true; });\r\n                })\r\n                    .toPromise();\r\n                variants.push(...(productVariants || []));\r\n            }\r\n            return variants.slice(0, take);\r\n        });\r\n    }\r\n}\nAssignProductsToChannelDialogComponent.fac = function AssignProductsToChannelDialogComponent_Factory(t) { return new (t || AssignProductsToChannelDialogComponent)(ngcc0.directiveInject(ngcc2.DataService), ngcc0.directiveInject(ngcc2.NotificationService)); };\nAssignProductsToChannelDialogComponent.cmp = /*@__PURE__*/ ngcc0.defineComponent({ type: AssignProductsToChannelDialogComponent, selectors: [[\"vdr-assign-products-to-channel-dialog\"]], decls: 36, vars: 32, consts: [[\"vdrDialogTitle\", \"\"], [1, \"flex\"], [\"clrInput\", \"\", 3, \"multiple\", \"includeDefaultChannel\", \"disableChannelIds\", \"formControl\"], [1, \"flex-spacer\"], [\"clrInput\", \"\", \"type\", \"number\", \"min\", \"0\", \"max\", \"99999\", 3, \"formControl\"], [1, \"channel-price-preview\"], [1, \"clr-control-label\"], [1, \"table\"], [3, \"ngIf\", \"ngIfElse\"], [\"noSelection\", \"\"], [4, \"ngFor\", \"ngForOf\"], [\"vdrDialogButtons\", \"\"], [4, \"ngIf\", \"ngIfElse\"], [\"productModeTitle\", \"\"], [\"noChannelSelected\", \"\"], [\"type\", \"button\", 1, \"btn\", 3, \"click\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", 3, \"disabled\", \"click\"]], template: function AssignProductsToChannelDialogComponent_Template(rf, ctx) { if (rf & 1) {\n        ngcc0.template(0, AssignProductsToChannelDialogComponent_ng_template_0_Template, 3, 2, \"ng-template\", 0);\n        ngcc0.elementStart(1, \"div\", 1);\n        ngcc0.elementStart(2, \"clr-input-container\");\n        ngcc0.elementStart(3, \"label\");\n        ngcc0.text(4);\n        ngcc0.pipe(5, \"translate\");\n        ngcc0.elementEnd();\n        ngcc0.element(6, \"vdr-channel-assignment-control\", 2);\n        ngcc0.elementEnd();\n        ngcc0.element(7, \"div\", 3);\n        ngcc0.elementStart(8, \"clr-input-container\");\n        ngcc0.elementStart(9, \"label\");\n        ngcc0.text(10);\n        ngcc0.pipe(11, \"translate\");\n        ngcc0.elementEnd();\n        ngcc0.element(12, \"input\", 4);\n        ngcc0.elementEnd();\n        ngcc0.elementEnd();\n        ngcc0.elementStart(13, \"div\", 5);\n        ngcc0.elementStart(14, \"label\", 6);\n        ngcc0.text(15);\n        ngcc0.pipe(16, \"translate\");\n        ngcc0.elementEnd();\n        ngcc0.elementStart(17, \"table\", 7);\n        ngcc0.elementStart(18, \"thead\");\n        ngcc0.elementStart(19, \"tr\");\n        ngcc0.elementStart(20, \"th\");\n        ngcc0.text(21);\n        ngcc0.pipe(22, \"translate\");\n        ngcc0.elementEnd();\n        ngcc0.elementStart(23, \"th\");\n        ngcc0.text(24);\n        ngcc0.pipe(25, \"translate\");\n        ngcc0.pipe(26, \"translate\");\n        ngcc0.pipe(27, \"channelCodeToLabel\");\n        ngcc0.elementEnd();\n        ngcc0.elementStart(28, \"th\");\n        ngcc0.template(29, AssignProductsToChannelDialogComponent_ng_template_29_Template, 2, 6, \"ng-template\", 8);\n        ngcc0.template(30, AssignProductsToChannelDialogComponent_ng_template_30_Template, 2, 3, \"ng-template\", null, 9, ngcc0.templateRefExtractor);\n        ngcc0.elementEnd();\n        ngcc0.elementEnd();\n        ngcc0.elementEnd();\n        ngcc0.elementStart(32, \"tbody\");\n        ngcc0.template(33, AssignProductsToChannelDialogComponent_tr_33_Template, 10, 7, \"tr\", 10);\n        ngcc0.pipe(34, \"async\");\n        ngcc0.elementEnd();\n        ngcc0.elementEnd();\n        ngcc0.elementEnd();\n        ngcc0.template(35, AssignProductsToChannelDialogComponent_ng_template_35_Template, 7, 6, \"ng-template\", 11);\n    } if (rf & 2) {\n        const _r2 = ngcc0.reference(31);\n        ngcc0.advance(4);\n        ngcc0.textInterpolate(ngcc0.pipeBind1(5, 13, \"common.channel\"));\n        ngcc0.advance(2);\n        ngcc0.property(\"multiple\", false)(\"includeDefaultChannel\", false)(\"disableChannelIds\", ctx.currentChannelIds)(\"formControl\", ctx.selectedChannelIdControl);\n        ngcc0.advance(4);\n        ngcc0.textInterpolate(ngcc0.pipeBind1(11, 15, \"catalog.price-conversion-factor\"));\n        ngcc0.advance(2);\n        ngcc0.property(\"formControl\", ctx.priceFactorControl);\n        ngcc0.advance(3);\n        ngcc0.textInterpolate(ngcc0.pipeBind1(16, 17, \"catalog.channel-price-preview\"));\n        ngcc0.advance(6);\n        ngcc0.textInterpolate(ngcc0.pipeBind1(22, 19, \"common.name\"));\n        ngcc0.advance(3);\n        ngcc0.textInterpolate1(\" \", ngcc0.pipeBind2(25, 21, \"catalog.price-in-channel\", ngcc0.pureFunction1(30, _c17, ngcc0.pipeBind1(26, 24, ngcc0.pipeBind1(27, 26, ctx.currentChannel == null ? null : ctx.currentChannel.code)))), \" \");\n        ngcc0.advance(5);\n        ngcc0.property(\"ngIf\", ctx.selectedChannel)(\"ngIfElse\", _r2);\n        ngcc0.advance(4);\n        ngcc0.property(\"ngForOf\", ngcc0.pipeBind1(34, 28, ctx.variantsPreview$));\n    } }, directives: [ngcc2.DialogTitleDirective, ngcc7.ClrInputContainer, ngcc7.ClrLabel, ngcc2.ChannelAssignmentControlComponent, ngcc7.ClrInput, ngcc3.NgControlStatus, ngcc3.FormControlDirective, ngcc2.FormFieldControlDirective, ngcc3.MinValidator, ngcc3.MaxValidator, ngcc3.NumberValueAccessor, ngcc3.DefaultValueAccessor, ngcc4.NgIf, ngcc4.NgForOf, ngcc2.DialogButtonsDirective], pipes: [ngcc5.TranslatePipe, ngcc2.ChannelLabelPipe, ngcc4.AsyncPipe, ngcc2.LocaleCurrencyPipe], styles: [\"vdr-channel-assignment-control[_ngcontent-%COMP%]{min-width:200px}.channel-price-preview[_ngcontent-%COMP%]{margin-top:24px}.channel-price-preview[_ngcontent-%COMP%]   table.table[_ngcontent-%COMP%]{margin-top:6px}\"], changeDetection: 0 });\r\nAssignProductsToChannelDialogComponent.ctorParameters = () => [\r\n    { type: DataService },\r\n    { type: NotificationService }\r\n];\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ngcc0.setClassMetadata(AssignProductsToChannelDialogComponent, [{\n        type: Component,\n        args: [{\n                selector: 'vdr-assign-products-to-channel-dialog',\n                template: \"<ng-template vdrDialogTitle>\\r\\n    <ng-container *ngIf=\\\"isProductVariantMode; else productModeTitle\\\">{{\\r\\n        'catalog.assign-variants-to-channel' | translate\\r\\n    }}</ng-container>\\r\\n    <ng-template #productModeTitle>{{ 'catalog.assign-products-to-channel' | translate }}</ng-template>\\r\\n</ng-template>\\r\\n\\r\\n<div class=\\\"flex\\\">\\r\\n    <clr-input-container>\\r\\n        <label>{{ 'common.channel' | translate }}</label>\\r\\n        <vdr-channel-assignment-control\\r\\n            clrInput\\r\\n            [multiple]=\\\"false\\\"\\r\\n            [includeDefaultChannel]=\\\"false\\\"\\r\\n            [disableChannelIds]=\\\"currentChannelIds\\\"\\r\\n            [formControl]=\\\"selectedChannelIdControl\\\"\\r\\n        ></vdr-channel-assignment-control>\\r\\n    </clr-input-container>\\r\\n    <div class=\\\"flex-spacer\\\"></div>\\r\\n    <clr-input-container>\\r\\n        <label>{{ 'catalog.price-conversion-factor' | translate }}</label>\\r\\n        <input clrInput type=\\\"number\\\" min=\\\"0\\\" max=\\\"99999\\\" [formControl]=\\\"priceFactorControl\\\" />\\r\\n    </clr-input-container>\\r\\n</div>\\r\\n\\r\\n<div class=\\\"channel-price-preview\\\">\\r\\n    <label class=\\\"clr-control-label\\\">{{ 'catalog.channel-price-preview' | translate }}</label>\\r\\n    <table class=\\\"table\\\">\\r\\n        <thead>\\r\\n            <tr>\\r\\n                <th>{{ 'common.name' | translate }}</th>\\r\\n                <th>\\r\\n                    {{\\r\\n                        'catalog.price-in-channel'\\r\\n                            | translate: { channel: currentChannel?.code | channelCodeToLabel | translate }\\r\\n                    }}\\r\\n                </th>\\r\\n                <th>\\r\\n                    <ng-template [ngIf]=\\\"selectedChannel\\\" [ngIfElse]=\\\"noSelection\\\">\\r\\n                        {{ 'catalog.price-in-channel' | translate: { channel: selectedChannel?.code } }}\\r\\n                    </ng-template>\\r\\n                    <ng-template #noSelection>\\r\\n                        {{ 'catalog.no-channel-selected' | translate }}\\r\\n                    </ng-template>\\r\\n                </th>\\r\\n            </tr>\\r\\n        </thead>\\r\\n        <tbody>\\r\\n            <tr *ngFor=\\\"let row of variantsPreview$ | async\\\">\\r\\n                <td>{{ row.name }}</td>\\r\\n                <td>{{ row.price | localeCurrency: currentChannel?.currencyCode }}</td>\\r\\n                <td>\\r\\n                    <ng-template [ngIf]=\\\"selectedChannel\\\" [ngIfElse]=\\\"noChannelSelected\\\">\\r\\n                        {{ row.pricePreview | localeCurrency: selectedChannel?.currencyCode }}\\r\\n                    </ng-template>\\r\\n                    <ng-template #noChannelSelected> - </ng-template>\\r\\n                </td>\\r\\n            </tr>\\r\\n        </tbody>\\r\\n    </table>\\r\\n</div>\\r\\n\\r\\n<ng-template vdrDialogButtons>\\r\\n    <button type=\\\"button\\\" class=\\\"btn\\\" (click)=\\\"cancel()\\\">{{ 'common.cancel' | translate }}</button>\\r\\n    <button type=\\\"submit\\\" (click)=\\\"assign()\\\" [disabled]=\\\"!selectedChannel\\\" class=\\\"btn btn-primary\\\">\\r\\n        <ng-template [ngIf]=\\\"selectedChannel\\\" [ngIfElse]=\\\"noSelection\\\">\\r\\n            {{ 'catalog.assign-to-named-channel' | translate: { channelCode: selectedChannel?.code } }}\\r\\n        </ng-template>\\r\\n        <ng-template #noSelection>\\r\\n            {{ 'catalog.no-channel-selected' | translate }}\\r\\n        </ng-template>\\r\\n    </button>\\r\\n</ng-template>\\r\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\"vdr-channel-assignment-control{min-width:200px}.channel-price-preview{margin-top:24px}.channel-price-preview table.table{margin-top:6px}\\n\"]\n            }]\n    }], function () { return [{ type: ngcc2.DataService }, { type: ngcc2.NotificationService }]; }, null); })();\n\nclass ProductDetailComponent extends BaseDetailComponent {\r\n    constructor(route, router, serverConfigService, productDetailService, formBuilder, modalService, notificationService, dataService, location, changeDetector) {\r\n        super(route, router, serverConfigService, dataService);\r\n        this.productDetailService = productDetailService;\r\n        this.formBuilder = formBuilder;\r\n        this.modalService = modalService;\r\n        this.notificationService = notificationService;\r\n        this.dataService = dataService;\r\n        this.location = location;\r\n        this.changeDetector = changeDetector;\r\n        this.filterInput = new FormControl('');\r\n        this.assetChanges = {};\r\n        this.variantAssetChanges = {};\r\n        this.variantFacetValueChanges = {};\r\n        this.currentPage$ = new BehaviorSubject(1);\r\n        this.itemsPerPage$ = new BehaviorSubject(10);\r\n        this.selectedVariantIds = [];\r\n        this.variantDisplayMode = 'card';\r\n        this.createVariantsConfig = { groups: [], variants: [] };\r\n        // Used to store all ProductVariants which have been loaded.\r\n        // It is needed when saving changes to variants.\r\n        this.productVariantMap = new Map();\r\n        this.updatePermissions = [Permission.UpdateCatalog, Permission.UpdateProduct];\r\n        this.customFields = this.getCustomFieldConfig('Product');\r\n        this.customVariantFields = this.getCustomFieldConfig('ProductVariant');\r\n        this.customOptionGroupFields = this.getCustomFieldConfig('ProductOptionGroup');\r\n        this.customOptionFields = this.getCustomFieldConfig('ProductOption');\r\n        this.detailForm = this.formBuilder.group({\r\n            product: this.formBuilder.group({\r\n                enabled: true,\r\n                name: ['', Validators.required],\r\n                autoUpdateVariantNames: true,\r\n                slug: ['', unicodePatternValidator(/^[\\p{Letter}0-9_-]+$/)],\r\n                description: '',\r\n                facetValueIds: [[]],\r\n                customFields: this.formBuilder.group(this.customFields.reduce((hash, field) => (Object.assign(Object.assign({}, hash), { [field.name]: '' })), {})),\r\n            }),\r\n            variants: this.formBuilder.array([]),\r\n        });\r\n    }\r\n    ngOnInit() {\r\n        this.init();\r\n        this.product$ = this.entity$;\r\n        this.totalItems$ = this.product$.pipe(map(product => product.variantList.totalItems));\r\n        this.paginationConfig$ = combineLatest(this.totalItems$, this.itemsPerPage$, this.currentPage$).pipe(map(([totalItems, itemsPerPage, currentPage]) => ({\r\n            totalItems,\r\n            itemsPerPage,\r\n            currentPage,\r\n        })));\r\n        const variants$ = this.product$.pipe(map(product => product.variantList.items));\r\n        const filterTerm$ = this.filterInput.valueChanges.pipe(startWith(''), debounceTime(200), shareReplay());\r\n        const initialVariants$ = this.product$.pipe(map(p => p.variantList.items));\r\n        const updatedVariants$ = combineLatest(filterTerm$, this.currentPage$, this.itemsPerPage$).pipe(skipUntil(initialVariants$), skip(1), switchMap(([term, currentPage, itemsPerPage]) => {\r\n            return this.dataService.product\r\n                .getProductVariants(Object.assign(Object.assign({ skip: (currentPage - 1) * itemsPerPage, take: itemsPerPage }, (term\r\n                ? { filter: { name: { contains: term }, sku: { contains: term } } }\r\n                : {})), { filterOperator: LogicalOperator.OR }), this.id)\r\n                .mapStream(({ productVariants }) => productVariants.items);\r\n        }), shareReplay({ bufferSize: 1, refCount: true }));\r\n        this.variants$ = merge(initialVariants$, updatedVariants$).pipe(tap(variants => {\r\n            for (const variant of variants) {\r\n                this.productVariantMap.set(variant.id, variant);\r\n            }\r\n        }));\r\n        this.taxCategories$ = this.productDetailService.getTaxCategories().pipe(takeUntil(this.destroy$));\r\n        this.activeTab$ = this.route.paramMap.pipe(map(qpm => qpm.get('tab')));\r\n        combineLatest(updatedVariants$, this.languageCode$)\r\n            .pipe(takeUntil(this.destroy$))\r\n            .subscribe(([variants, languageCode]) => {\r\n            this.buildVariantFormArray(variants, languageCode);\r\n        });\r\n        // FacetValues are provided initially by the nested array of the\r\n        // Product entity, but once a fetch to get all Facets is made (as when\r\n        // opening the FacetValue selector modal), then these additional values\r\n        // are concatenated onto the initial array.\r\n        this.facets$ = this.productDetailService.getFacets();\r\n        const productFacetValues$ = this.product$.pipe(map(product => product.facetValues));\r\n        const allFacetValues$ = this.facets$.pipe(map(flattenFacetValues));\r\n        const productGroup = this.getProductFormGroup();\r\n        const formFacetValueIdChanges$ = productGroup.valueChanges.pipe(map(val => val.facetValueIds), distinctUntilChanged());\r\n        const formChangeFacetValues$ = combineLatest(formFacetValueIdChanges$, productFacetValues$, allFacetValues$).pipe(map(([ids, productFacetValues, allFacetValues]) => {\r\n            const combined = [...productFacetValues, ...allFacetValues];\r\n            return ids.map(id => combined.find(fv => fv.id === id)).filter(notNullOrUndefined);\r\n        }));\r\n        this.facetValues$ = merge(productFacetValues$, formChangeFacetValues$);\r\n        this.productChannels$ = this.product$.pipe(map(p => p.channels));\r\n        this.channelPriceIncludesTax$ = this.dataService.settings\r\n            .getActiveChannel('cache-first')\r\n            .refetchOnChannelChange()\r\n            .mapStream(data => data.activeChannel.pricesIncludeTax)\r\n            .pipe(shareReplay(1));\r\n    }\r\n    ngOnDestroy() {\r\n        this.destroy();\r\n    }\r\n    navigateToTab(tabName) {\r\n        this.location.replaceState(this.router\r\n            .createUrlTree(['./', Object.assign(Object.assign({}, this.route.snapshot.params), { tab: tabName })], {\r\n            queryParamsHandling: 'merge',\r\n            relativeTo: this.route,\r\n        })\r\n            .toString());\r\n    }\r\n    isDefaultChannel(channelCode) {\r\n        return channelCode === DEFAULT_CHANNEL_CODE;\r\n    }\r\n    setPage(page) {\r\n        this.currentPage$.next(page);\r\n    }\r\n    setItemsPerPage(value) {\r\n        this.itemsPerPage$.next(+value);\r\n        this.currentPage$.next(1);\r\n    }\r\n    assignToChannel() {\r\n        this.productChannels$\r\n            .pipe(take(1), switchMap(channels => {\r\n            return this.modalService.fromComponent(AssignProductsToChannelDialogComponent, {\r\n                size: 'lg',\r\n                locals: {\r\n                    productIds: [this.id],\r\n                    currentChannelIds: channels.map(c => c.id),\r\n                },\r\n            });\r\n        }))\r\n            .subscribe();\r\n    }\r\n    removeFromChannel(channelId) {\r\n        from(getChannelCodeFromUserStatus(this.dataService, channelId))\r\n            .pipe(switchMap(({ channelCode }) => {\r\n            return this.modalService.dialog({\r\n                title: marker('catalog.remove-product-from-channel'),\r\n                buttons: [\r\n                    { type: 'secondary', label: marker('common.cancel') },\r\n                    {\r\n                        type: 'danger',\r\n                        label: marker('catalog.remove-from-channel'),\r\n                        translationVars: { channelCode },\r\n                        returnValue: true,\r\n                    },\r\n                ],\r\n            });\r\n        }), switchMap(response => response\r\n            ? this.dataService.product.removeProductsFromChannel({\r\n                channelId,\r\n                productIds: [this.id],\r\n            })\r\n            : EMPTY))\r\n            .subscribe(() => {\r\n            this.notificationService.success(marker('catalog.notify-remove-product-from-channel-success'));\r\n        }, err => {\r\n            this.notificationService.error(marker('catalog.notify-remove-product-from-channel-error'));\r\n        });\r\n    }\r\n    assignVariantToChannel(variant) {\r\n        return this.modalService\r\n            .fromComponent(AssignProductsToChannelDialogComponent, {\r\n            size: 'lg',\r\n            locals: {\r\n                productIds: [this.id],\r\n                productVariantIds: [variant.id],\r\n                currentChannelIds: variant.channels.map(c => c.id),\r\n            },\r\n        })\r\n            .subscribe();\r\n    }\r\n    removeVariantFromChannel({ channelId, variant, }) {\r\n        from(getChannelCodeFromUserStatus(this.dataService, channelId))\r\n            .pipe(switchMap(({ channelCode }) => {\r\n            return this.modalService.dialog({\r\n                title: marker('catalog.remove-product-variant-from-channel'),\r\n                buttons: [\r\n                    { type: 'secondary', label: marker('common.cancel') },\r\n                    {\r\n                        type: 'danger',\r\n                        label: marker('catalog.remove-from-channel'),\r\n                        translationVars: { channelCode },\r\n                        returnValue: true,\r\n                    },\r\n                ],\r\n            });\r\n        }), switchMap(response => response\r\n            ? this.dataService.product.removeVariantsFromChannel({\r\n                channelId,\r\n                productVariantIds: [variant.id],\r\n            })\r\n            : EMPTY))\r\n            .subscribe(() => {\r\n            this.notificationService.success(marker('catalog.notify-remove-variant-from-channel-success'));\r\n        }, err => {\r\n            this.notificationService.error(marker('catalog.notify-remove-variant-from-channel-error'));\r\n        });\r\n    }\r\n    assetsChanged() {\r\n        return !!Object.values(this.assetChanges).length;\r\n    }\r\n    variantAssetsChanged() {\r\n        return !!Object.keys(this.variantAssetChanges).length;\r\n    }\r\n    variantAssetChange(event) {\r\n        this.variantAssetChanges[event.variantId] = event;\r\n    }\r\n    /**\r\n     * If creating a new product, automatically generate the slug based on the product name.\r\n     */\r\n    updateSlug(nameValue) {\r\n        combineLatest(this.entity$, this.languageCode$)\r\n            .pipe(take(1))\r\n            .subscribe(([entity, languageCode]) => {\r\n            const slugControl = this.detailForm.get(['product', 'slug']);\r\n            const currentTranslation = findTranslation(entity, languageCode);\r\n            const currentSlugIsEmpty = !currentTranslation || !currentTranslation.slug;\r\n            if (slugControl && slugControl.pristine && currentSlugIsEmpty) {\r\n                slugControl.setValue(normalizeString(`${nameValue}`, '-'));\r\n            }\r\n        });\r\n    }\r\n    selectProductFacetValue() {\r\n        this.displayFacetValueModal().subscribe(facetValueIds => {\r\n            if (facetValueIds) {\r\n                const productGroup = this.getProductFormGroup();\r\n                const currentFacetValueIds = productGroup.value.facetValueIds;\r\n                productGroup.patchValue({\r\n                    facetValueIds: unique([...currentFacetValueIds, ...facetValueIds]),\r\n                });\r\n                productGroup.markAsDirty();\r\n            }\r\n        });\r\n    }\r\n    updateProductOption(input) {\r\n        combineLatest(this.product$, this.languageCode$)\r\n            .pipe(take(1), mergeMap(([product, languageCode]) => this.productDetailService.updateProductOption(input, product, languageCode)))\r\n            .subscribe(() => {\r\n            this.notificationService.success(marker('common.notify-update-success'), {\r\n                entity: 'ProductOption',\r\n            });\r\n        }, err => {\r\n            this.notificationService.error(marker('common.notify-update-error'), {\r\n                entity: 'ProductOption',\r\n            });\r\n        });\r\n    }\r\n    removeProductFacetValue(facetValueId) {\r\n        const productGroup = this.getProductFormGroup();\r\n        const currentFacetValueIds = productGroup.value.facetValueIds;\r\n        productGroup.patchValue({\r\n            facetValueIds: currentFacetValueIds.filter(id => id !== facetValueId),\r\n        });\r\n        productGroup.markAsDirty();\r\n    }\r\n    /**\r\n     * Opens a dialog to select FacetValues to apply to the select ProductVariants.\r\n     */\r\n    selectVariantFacetValue(selectedVariantIds) {\r\n        this.displayFacetValueModal()\r\n            .pipe(withLatestFrom(this.variants$))\r\n            .subscribe(([facetValueIds, variants]) => {\r\n            if (facetValueIds) {\r\n                for (const variantId of selectedVariantIds) {\r\n                    const index = variants.findIndex(v => v.id === variantId);\r\n                    const variant = variants[index];\r\n                    const existingFacetValueIds = variant ? variant.facetValues.map(fv => fv.id) : [];\r\n                    const variantFormGroup = this.detailForm.get('variants').controls.find(c => c.value.id === variantId);\r\n                    if (variantFormGroup) {\r\n                        const uniqueFacetValueIds = unique([...existingFacetValueIds, ...facetValueIds]);\r\n                        variantFormGroup.patchValue({\r\n                            facetValueIds: uniqueFacetValueIds,\r\n                        });\r\n                        variantFormGroup.markAsDirty();\r\n                        this.variantFacetValueChanges[variantId] = uniqueFacetValueIds;\r\n                    }\r\n                }\r\n                this.changeDetector.markForCheck();\r\n            }\r\n        });\r\n    }\r\n    variantsToCreateAreValid() {\r\n        return (0 < this.createVariantsConfig.variants.length &&\r\n            this.createVariantsConfig.variants.every(v => {\r\n                return v.sku !== '';\r\n            }));\r\n    }\r\n    displayFacetValueModal() {\r\n        return this.productDetailService.getFacets().pipe(mergeMap(facets => this.modalService.fromComponent(ApplyFacetDialogComponent, {\r\n            size: 'md',\r\n            closable: true,\r\n            locals: { facets },\r\n        })), map(facetValues => facetValues && facetValues.map(v => v.id)));\r\n    }\r\n    create() {\r\n        const productGroup = this.getProductFormGroup();\r\n        if (!productGroup.dirty) {\r\n            return;\r\n        }\r\n        combineLatest(this.product$, this.languageCode$)\r\n            .pipe(take(1), mergeMap(([product, languageCode]) => {\r\n            const newProduct = this.getUpdatedProduct(product, productGroup, languageCode);\r\n            return this.productDetailService.createProductWithVariants(newProduct, this.createVariantsConfig, languageCode);\r\n        }))\r\n            .subscribe(({ createProductVariants, productId }) => {\r\n            this.notificationService.success(marker('common.notify-create-success'), {\r\n                entity: 'Product',\r\n            });\r\n            this.assetChanges = {};\r\n            this.variantAssetChanges = {};\r\n            this.detailForm.markAsPristine();\r\n            this.router.navigate(['../', productId], { relativeTo: this.route });\r\n        }, err => {\r\n            // tslint:disable-next-line:no-console\r\n            console.error(err);\r\n            this.notificationService.error(marker('common.notify-create-error'), {\r\n                entity: 'Product',\r\n            });\r\n        });\r\n    }\r\n    save() {\r\n        combineLatest(this.product$, this.languageCode$, this.channelPriceIncludesTax$)\r\n            .pipe(take(1), mergeMap(([product, languageCode, priceIncludesTax]) => {\r\n            var _a, _b;\r\n            const productGroup = this.getProductFormGroup();\r\n            let productInput;\r\n            let variantsInput;\r\n            if (productGroup.dirty || this.assetsChanged()) {\r\n                productInput = this.getUpdatedProduct(product, productGroup, languageCode);\r\n            }\r\n            const variantsArray = this.detailForm.get('variants');\r\n            if ((variantsArray && variantsArray.dirty) || this.variantAssetsChanged()) {\r\n                variantsInput = this.getUpdatedProductVariants(product, variantsArray, languageCode, priceIncludesTax);\r\n            }\r\n            return this.productDetailService.updateProduct({\r\n                product,\r\n                languageCode,\r\n                autoUpdate: (_b = (_a = this.detailForm.get(['product', 'autoUpdateVariantNames'])) === null || _a === void 0 ? void 0 : _a.value) !== null && _b !== void 0 ? _b : false,\r\n                productInput,\r\n                variantsInput,\r\n            });\r\n        }))\r\n            .subscribe(result => {\r\n            this.updateSlugAfterSave(result);\r\n            this.detailForm.markAsPristine();\r\n            this.assetChanges = {};\r\n            this.variantAssetChanges = {};\r\n            this.notificationService.success(marker('common.notify-update-success'), {\r\n                entity: 'Product',\r\n            });\r\n            this.changeDetector.markForCheck();\r\n        }, err => {\r\n            this.notificationService.error(marker('common.notify-update-error'), {\r\n                entity: 'Product',\r\n            });\r\n        });\r\n    }\r\n    canDeactivate() {\r\n        return super.canDeactivate() && !this.assetChanges.assets && !this.assetChanges.featuredAsset;\r\n    }\r\n    /**\r\n     * Sets the values of the form on changes to the product or current language.\r\n     */\r\n    setFormValues(product, languageCode) {\r\n        const currentTranslation = findTranslation(product, languageCode);\r\n        this.detailForm.patchValue({\r\n            product: {\r\n                enabled: product.enabled,\r\n                name: currentTranslation ? currentTranslation.name : '',\r\n                slug: currentTranslation ? currentTranslation.slug : '',\r\n                description: currentTranslation ? currentTranslation.description : '',\r\n                facetValueIds: product.facetValues.map(fv => fv.id),\r\n            },\r\n        });\r\n        if (this.customFields.length) {\r\n            this.setCustomFieldFormValues(this.customFields, this.detailForm.get(['product', 'customFields']), product, currentTranslation);\r\n        }\r\n        this.buildVariantFormArray(product.variantList.items, languageCode);\r\n    }\r\n    buildVariantFormArray(variants, languageCode) {\r\n        const variantsFormArray = this.detailForm.get('variants');\r\n        variants.forEach((variant, i) => {\r\n            const variantTranslation = findTranslation(variant, languageCode);\r\n            const pendingFacetValueChanges = this.variantFacetValueChanges[variant.id];\r\n            const facetValueIds = pendingFacetValueChanges\r\n                ? pendingFacetValueChanges\r\n                : variant.facetValues.map(fv => fv.id);\r\n            const group = {\r\n                id: variant.id,\r\n                enabled: variant.enabled,\r\n                sku: variant.sku,\r\n                name: variantTranslation ? variantTranslation.name : '',\r\n                price: variant.price,\r\n                priceWithTax: variant.priceWithTax,\r\n                taxCategoryId: variant.taxCategory.id,\r\n                stockOnHand: variant.stockOnHand,\r\n                useGlobalOutOfStockThreshold: variant.useGlobalOutOfStockThreshold,\r\n                outOfStockThreshold: variant.outOfStockThreshold,\r\n                trackInventory: variant.trackInventory,\r\n                facetValueIds,\r\n            };\r\n            let variantFormGroup = variantsFormArray.controls.find(c => c.value.id === variant.id);\r\n            if (variantFormGroup) {\r\n                if (variantFormGroup.pristine) {\r\n                    variantFormGroup.patchValue(group);\r\n                }\r\n            }\r\n            else {\r\n                variantFormGroup = this.formBuilder.group(Object.assign(Object.assign({}, group), { facetValueIds: this.formBuilder.control(facetValueIds) }));\r\n                variantsFormArray.insert(i, variantFormGroup);\r\n            }\r\n            if (this.customVariantFields.length) {\r\n                let customFieldsGroup = variantFormGroup.get(['customFields']);\r\n                if (!customFieldsGroup) {\r\n                    customFieldsGroup = this.formBuilder.group(this.customVariantFields.reduce((hash, field) => (Object.assign(Object.assign({}, hash), { [field.name]: '' })), {}));\r\n                    variantFormGroup.addControl('customFields', customFieldsGroup);\r\n                }\r\n                this.setCustomFieldFormValues(this.customVariantFields, customFieldsGroup, variant, variantTranslation);\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * Given a product and the value of the detailForm, this method creates an updated copy of the product which\r\n     * can then be persisted to the API.\r\n     */\r\n    getUpdatedProduct(product, productFormGroup, languageCode) {\r\n        var _a, _b;\r\n        const updatedProduct = createUpdatedTranslatable({\r\n            translatable: product,\r\n            updatedFields: productFormGroup.value,\r\n            customFieldConfig: this.customFields,\r\n            languageCode,\r\n            defaultTranslation: {\r\n                languageCode,\r\n                name: product.name || '',\r\n                slug: product.slug || '',\r\n                description: product.description || '',\r\n            },\r\n        });\r\n        return Object.assign(Object.assign({}, updatedProduct), { assetIds: (_a = this.assetChanges.assets) === null || _a === void 0 ? void 0 : _a.map(a => a.id), featuredAssetId: (_b = this.assetChanges.featuredAsset) === null || _b === void 0 ? void 0 : _b.id, facetValueIds: productFormGroup.value.facetValueIds });\r\n    }\r\n    /**\r\n     * Given an array of product variants and the values from the detailForm, this method creates an new array\r\n     * which can be persisted to the API.\r\n     */\r\n    getUpdatedProductVariants(product, variantsFormArray, languageCode, priceIncludesTax) {\r\n        const dirtyFormControls = variantsFormArray.controls.filter(c => c.dirty);\r\n        const dirtyVariants = dirtyFormControls\r\n            .map(c => this.productVariantMap.get(c.value.id))\r\n            .filter(notNullOrUndefined);\r\n        const dirtyVariantValues = dirtyFormControls.map(c => c.value);\r\n        if (dirtyVariants.length !== dirtyVariantValues.length) {\r\n            throw new Error(marker(`error.product-variant-form-values-do-not-match`));\r\n        }\r\n        return dirtyVariants\r\n            .map((variant, i) => {\r\n            var _a, _b;\r\n            const formValue = dirtyVariantValues.find(value => value.id === variant.id);\r\n            const result = createUpdatedTranslatable({\r\n                translatable: variant,\r\n                updatedFields: formValue,\r\n                customFieldConfig: this.customVariantFields,\r\n                languageCode,\r\n                defaultTranslation: {\r\n                    languageCode,\r\n                    name: '',\r\n                },\r\n            });\r\n            result.taxCategoryId = formValue.taxCategoryId;\r\n            result.facetValueIds = formValue.facetValueIds;\r\n            result.price = priceIncludesTax ? formValue.priceWithTax : formValue.price;\r\n            const assetChanges = this.variantAssetChanges[variant.id];\r\n            if (assetChanges) {\r\n                result.featuredAssetId = (_a = assetChanges.featuredAsset) === null || _a === void 0 ? void 0 : _a.id;\r\n                result.assetIds = (_b = assetChanges.assets) === null || _b === void 0 ? void 0 : _b.map(a => a.id);\r\n            }\r\n            return result;\r\n        })\r\n            .filter(notNullOrUndefined);\r\n    }\r\n    getProductFormGroup() {\r\n        return this.detailForm.get('product');\r\n    }\r\n    /**\r\n     * The server may alter the slug value in order to normalize and ensure uniqueness upon saving.\r\n     */\r\n    updateSlugAfterSave(results) {\r\n        const firstResult = results[0];\r\n        const slugControl = this.detailForm.get(['product', 'slug']);\r\n        function isUpdateMutation(input) {\r\n            return input.hasOwnProperty('updateProduct');\r\n        }\r\n        if (slugControl && isUpdateMutation(firstResult)) {\r\n            slugControl.setValue(firstResult.updateProduct.slug, { emitEvent: false });\r\n        }\r\n    }\r\n}\nProductDetailComponent.fac = function ProductDetailComponent_Factory(t) { return new (t || ProductDetailComponent)(ngcc0.directiveInject(ngcc1.ActivatedRoute), ngcc0.directiveInject(ngcc1.Router), ngcc0.directiveInject(ngcc2.ServerConfigService), ngcc0.directiveInject(ProductDetailService), ngcc0.directiveInject(ngcc3.FormBuilder), ngcc0.directiveInject(ngcc2.ModalService), ngcc0.directiveInject(ngcc2.NotificationService), ngcc0.directiveInject(ngcc2.DataService), ngcc0.directiveInject(ngcc4.Location), ngcc0.directiveInject(ngcc0.ChangeDetectorRef)); };\nProductDetailComponent.cmp = /*@__PURE__*/ ngcc0.defineComponent({ type: ProductDetailComponent, selectors: [[\"vdr-product-detail\"]], features: [ngcc0.InheritDefinitionFeature], decls: 18, vars: 21, consts: [[1, \"flex\", \"clr-flex-row\"], [3, \"entity\"], [4, \"vdrIfPermissions\"], [3, \"disabled\", \"availableLanguageCodes\", \"currentLanguageCode\", \"languageCodeChange\"], [\"locationId\", \"product-detail\"], [\"class\", \"btn btn-primary\", 3, \"disabled\", \"click\", 4, \"ngIf\", \"ngIfElse\"], [\"updateButton\", \"\"], [\"class\", \"form\", 3, \"formGroup\", 4, \"ngIf\"], [\"type\", \"checkbox\", \"clrToggle\", \"\", \"name\", \"enabled\", 3, \"formControl\"], [1, \"btn\", \"btn-primary\", 3, \"disabled\", \"click\"], [\"class\", \"btn btn-primary\", 3, \"disabled\", \"click\", 4, \"vdrIfPermissions\"], [1, \"form\", 3, \"formGroup\"], [\"type\", \"submit\", \"hidden\", \"\", \"x-data\", \"prevents enter key from triggering other buttons\"], [\"clrTabLink\", \"\", 3, \"click\"], [4, \"clrIfActive\"], [4, \"ngIf\"], [1, \"clr-row\"], [1, \"clr-col\"], [\"formGroupName\", \"product\", 1, \"form-block\"], [\"for\", \"name\", 3, \"label\"], [\"id\", \"name\", \"type\", \"text\", \"formControlName\", \"name\", 3, \"readonly\", \"input\"], [1, \"auto-rename-wrapper\"], [\"clrCheckbox\", \"\", \"type\", \"checkbox\", \"id\", \"auto-update\", \"formControlName\", \"autoUpdateVariantNames\"], [\"for\", \"slug\", 3, \"label\", \"errors\"], [\"id\", \"slug\", \"type\", \"text\", \"formControlName\", \"slug\", 3, \"readonly\"], [\"formControlName\", \"description\", 3, \"readonly\", \"label\"], [\"formGroupName\", \"customFields\", 4, \"ngIf\"], [\"locationId\", \"product-detail\", 3, \"entity$\", \"detailForm\"], [1, \"clr-col-md-auto\"], [3, \"assets\", \"featuredAsset\", \"updatePermissions\", \"change\"], [1, \"facets\"], [3, \"facetValue\", \"removable\", \"remove\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"btn btn-sm btn-secondary\", 3, \"click\", 4, \"vdrIfPermissions\"], [4, \"vdrIfMultichannel\"], [3, \"label\", 4, \"vdrIfDefaultChannelActive\"], [3, \"label\"], [1, \"flex\", \"channel-assignment\"], [4, \"ngFor\", \"ngForOf\"], [1, \"btn\", \"btn-sm\", 3, \"click\"], [\"shape\", \"layers\"], [\"icon\", \"times-circle\", 3, \"iconClick\", 4, \"ngIf\"], [\"icon\", \"times-circle\", 3, \"iconClick\"], [3, \"channelCode\"], [\"formGroupName\", \"customFields\"], [\"entityName\", \"Product\", 3, \"customFields\", \"customFieldsFormGroup\", \"readonly\"], [3, \"facetValue\", \"removable\", \"remove\"], [1, \"btn\", \"btn-sm\", \"btn-secondary\", 3, \"click\"], [\"shape\", \"plus\"], [3, \"variantsChange\"], [1, \"form-block\"], [1, \"view-mode\"], [1, \"btn-group\"], [1, \"btn\", \"btn-secondary-outline\", 3, \"click\"], [\"shape\", \"list\"], [1, \"full-label\"], [1, \"btn\", 3, \"click\"], [\"shape\", \"table\"], [1, \"variant-filter\"], [3, \"formControl\", \"placeholder\"], [1, \"icon-button\", 3, \"click\"], [\"shape\", \"times\"], [1, \"flex-spacer\"], [\"class\", \"btn btn-secondary edit-variants-btn mb0 mr0\", 3, \"routerLink\", 4, \"vdrIfPermissions\"], [\"class\", \"pagination-row mt4\", 4, \"ngIf\"], [3, \"variants\", \"paginationConfig\", \"optionGroups\", \"channelPriceIncludesTax\", \"productVariantsFormArray\", \"pendingAssetChanges\", 4, \"ngIf\"], [3, \"variants\", \"paginationConfig\", \"channelPriceIncludesTax\", \"facets\", \"optionGroups\", \"productVariantsFormArray\", \"taxCategories\", \"customFields\", \"customOptionFields\", \"activeLanguage\", \"pendingAssetChanges\", \"assignToChannel\", \"removeFromChannel\", \"assetChange\", \"updateProductOption\", \"selectionChange\", \"selectFacetValueClick\", 4, \"ngIf\"], [1, \"btn\", \"btn-secondary\", \"edit-variants-btn\", \"mb0\", \"mr0\", 3, \"routerLink\"], [\"shape\", \"add-text\"], [1, \"pagination-row\", \"mt4\"], [3, \"itemsPerPage\", \"itemsPerPageChange\"], [3, \"id\", \"currentPage\", \"itemsPerPage\", \"pageChange\"], [3, \"variants\", \"paginationConfig\", \"optionGroups\", \"channelPriceIncludesTax\", \"productVariantsFormArray\", \"pendingAssetChanges\"], [3, \"variants\", \"paginationConfig\", \"channelPriceIncludesTax\", \"facets\", \"optionGroups\", \"productVariantsFormArray\", \"taxCategories\", \"customFields\", \"customOptionFields\", \"activeLanguage\", \"pendingAssetChanges\", \"assignToChannel\", \"removeFromChannel\", \"assetChange\", \"updateProductOption\", \"selectionChange\", \"selectFacetValueClick\"]], template: function ProductDetailComponent_Template(rf, ctx) { if (rf & 1) {\n        ngcc0.elementStart(0, \"vdr-action-bar\");\n        ngcc0.elementStart(1, \"vdr-ab-left\");\n        ngcc0.elementStart(2, \"div\", 0);\n        ngcc0.element(3, \"vdr-entity-info\", 1);\n        ngcc0.pipe(4, \"async\");\n        ngcc0.template(5, ProductDetailComponent_clr_toggle_wrapper_5_Template, 5, 5, \"clr-toggle-wrapper\", 2);\n        ngcc0.elementEnd();\n        ngcc0.elementStart(6, \"vdr-language-selector\", 3);\n        ngcc0.listener(\"languageCodeChange\", function ProductDetailComponent_Template_vdr_language_selector_languageCodeChange_6_listener($event) { return ctx.setLanguage($event); });\n        ngcc0.pipe(7, \"async\");\n        ngcc0.pipe(8, \"async\");\n        ngcc0.pipe(9, \"async\");\n        ngcc0.elementEnd();\n        ngcc0.elementEnd();\n        ngcc0.elementStart(10, \"vdr-ab-right\");\n        ngcc0.element(11, \"vdr-action-bar-items\", 4);\n        ngcc0.template(12, ProductDetailComponent_button_12_Template, 3, 4, \"button\", 5);\n        ngcc0.pipe(13, \"async\");\n        ngcc0.template(14, ProductDetailComponent_ng_template_14_Template, 1, 2, \"ng-template\", null, 6, ngcc0.templateRefExtractor);\n        ngcc0.elementEnd();\n        ngcc0.elementEnd();\n        ngcc0.template(16, ProductDetailComponent_form_16_Template, 11, 10, \"form\", 7);\n        ngcc0.pipe(17, \"async\");\n    } if (rf & 2) {\n        const _r2 = ngcc0.reference(15);\n        ngcc0.advance(3);\n        ngcc0.property(\"entity\", ngcc0.pipeBind1(4, 8, ctx.entity$));\n        ngcc0.advance(2);\n        ngcc0.property(\"vdrIfPermissions\", ngcc0.pureFunction0(20, _c20));\n        ngcc0.advance(1);\n        ngcc0.property(\"disabled\", ngcc0.pipeBind1(7, 10, ctx.isNew$))(\"availableLanguageCodes\", ngcc0.pipeBind1(8, 12, ctx.availableLanguages$))(\"currentLanguageCode\", ngcc0.pipeBind1(9, 14, ctx.languageCode$));\n        ngcc0.advance(6);\n        ngcc0.property(\"ngIf\", ngcc0.pipeBind1(13, 16, ctx.isNew$))(\"ngIfElse\", _r2);\n        ngcc0.advance(4);\n        ngcc0.property(\"ngIf\", ngcc0.pipeBind1(17, 18, ctx.product$));\n    } }, directives: function () { return [ngcc2.ActionBarComponent, ngcc2.ActionBarLeftComponent, ngcc2.EntityInfoComponent, ngcc2.IfPermissionsDirective, ngcc2.LanguageSelectorComponent, ngcc2.ActionBarRightComponent, ngcc2.ActionBarItemsComponent, ngcc4.NgIf, ngcc7.ClrCheckboxWrapper, ngcc2.FormFieldControlDirective, ngcc3.CheckboxControlValueAccessor, ngcc7.ClrCheckbox, ngcc3.NgControlStatus, ngcc3.FormControlDirective, ngcc7.ClrLabel, ngcc3.NgNoValidate, ngcc3.NgControlStatusGroup, ngcc3.FormGroupDirective, ngcc7.ClrTabs, ngcc7.lrTabsWillyWonka, ngcc7.ClrTab, ngcc7.ClrTabLink, ngcc7.lrActiveOompaLoompa, ngcc7.ClrIfActive, ngcc7.ClrTabContent, ngcc3.FormGroupName, ngcc2.FormFieldComponent, ngcc3.DefaultValueAccessor, ngcc3.FormControlName, ngcc2.RichTextEditorComponent, ngcc2.CustomDetailComponentHostComponent, AssetsComponent, ngcc4.NgForOf, ngcc2.IfMultichannelDirective, ngcc2.IfDefaultChannelActiveDirective, ngcc2.FormItemComponent, ngcc7.ClrIconCustomTag, ngcc2.ChipComponent, ngcc2.ChannelBadgeComponent, ngcc2.TabbedCustomFieldsComponent, ngcc2.FacetValueChipComponent, GenerateProductVariantsComponent, ngcc1.RouterLinkWithHref, ngcc2.ItemsPerPageControlsComponent, ngcc2.PaginationControlsComponent, ProductVariantsTableComponent, ProductVariantsListComponent]; }, pipes: function () { return [ngcc4.AsyncPipe, ngcc5.TranslatePipe, ngcc2.HasPermissionPipe, ngcc2.ChannelLabelPipe]; }, styles: [\"[_nghost-%COMP%]     trix-toolbar{top:24px}.facets[_ngcontent-%COMP%]{margin-top:12px;display:flex;flex-wrap:wrap;align-items:center}@media screen and (min-width: 768px){.facets[_ngcontent-%COMP%]{max-width:340px}}vdr-action-bar[_ngcontent-%COMP%]   clr-toggle-wrapper[_ngcontent-%COMP%]{margin-top:12px}.variant-filter[_ngcontent-%COMP%]{flex:1;display:flex}.variant-filter[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;max-width:initial;border-radius:3px 0 0 3px!important}.variant-filter[_ngcontent-%COMP%]   .icon-button[_ngcontent-%COMP%]{border:1px solid var(--color-component-border-300);background-color:var(--color-component-bg-100);border-radius:0 3px 3px 0;border-left:none}.group-name[_ngcontent-%COMP%]{padding-right:6px}.view-mode[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between}@media screen and (min-width: 768px){.view-mode[_ngcontent-%COMP%]{flex-direction:row}}.edit-variants-btn[_ngcontent-%COMP%]{margin-top:0}.channel-assignment[_ngcontent-%COMP%]{flex-wrap:wrap;max-height:144px;overflow-y:auto}.auto-rename-wrapper[_ngcontent-%COMP%]{overflow:hidden;max-height:0;padding-left:9.5rem;margin-bottom:0;transition:max-height .2s,margin-bottom .2s}.auto-rename-wrapper.visible[_ngcontent-%COMP%]{max-height:24px;margin-bottom:12px}.pagination-row[_ngcontent-%COMP%]{display:flex;align-items:baseline;justify-content:space-between}\"], changeDetection: 0 });\r\nProductDetailComponent.ctorParameters = () => [\r\n    { type: ActivatedRoute },\r\n    { type: Router },\r\n    { type: ServerConfigService },\r\n    { type: ProductDetailService },\r\n    { type: FormBuilder },\r\n    { type: ModalService },\r\n    { type: NotificationService },\r\n    { type: DataService },\r\n    { type: Location },\r\n    { type: ChangeDetectorRef }\r\n];\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ngcc0.setClassMetadata(ProductDetailComponent, [{\n        type: Component,\n        args: [{\n                selector: 'vdr-product-detail',\n                template: \"<vdr-action-bar>\\r\\n    <vdr-ab-left>\\r\\n        <div class=\\\"flex clr-flex-row\\\">\\r\\n            <vdr-entity-info [entity]=\\\"entity$ | async\\\"></vdr-entity-info>\\r\\n            <clr-toggle-wrapper *vdrIfPermissions=\\\"['UpdateCatalog', 'UpdateProduct']\\\">\\r\\n                <input\\r\\n                    type=\\\"checkbox\\\"\\r\\n                    clrToggle\\r\\n                    name=\\\"enabled\\\"\\r\\n                    [formControl]=\\\"detailForm.get(['product', 'enabled'])\\\"\\r\\n                />\\r\\n                <label>{{ 'common.enabled' | translate }}</label>\\r\\n            </clr-toggle-wrapper>\\r\\n        </div>\\r\\n        <vdr-language-selector\\r\\n            [disabled]=\\\"isNew$ | async\\\"\\r\\n            [availableLanguageCodes]=\\\"availableLanguages$ | async\\\"\\r\\n            [currentLanguageCode]=\\\"languageCode$ | async\\\"\\r\\n            (languageCodeChange)=\\\"setLanguage($event)\\\"\\r\\n        ></vdr-language-selector>\\r\\n    </vdr-ab-left>\\r\\n\\r\\n    <vdr-ab-right>\\r\\n        <vdr-action-bar-items locationId=\\\"product-detail\\\"></vdr-action-bar-items>\\r\\n        <button\\r\\n            class=\\\"btn btn-primary\\\"\\r\\n            *ngIf=\\\"isNew$ | async; else updateButton\\\"\\r\\n            (click)=\\\"create()\\\"\\r\\n            [disabled]=\\\"detailForm.invalid || detailForm.pristine || !variantsToCreateAreValid()\\\"\\r\\n        >\\r\\n            {{ 'common.create' | translate }}\\r\\n        </button>\\r\\n        <ng-template #updateButton>\\r\\n            <button\\r\\n                *vdrIfPermissions=\\\"['UpdateCatalog', 'UpdateProduct']\\\"\\r\\n                class=\\\"btn btn-primary\\\"\\r\\n                (click)=\\\"save()\\\"\\r\\n                [disabled]=\\\"\\r\\n                    (detailForm.invalid || detailForm.pristine) && !assetsChanged() && !variantAssetsChanged()\\r\\n                \\\"\\r\\n            >\\r\\n                {{ 'common.update' | translate }}\\r\\n            </button>\\r\\n        </ng-template>\\r\\n    </vdr-ab-right>\\r\\n</vdr-action-bar>\\r\\n\\r\\n<form class=\\\"form\\\" [formGroup]=\\\"detailForm\\\" *ngIf=\\\"product$ | async as product\\\">\\r\\n    <button type=\\\"submit\\\" hidden x-data=\\\"prevents enter key from triggering other buttons\\\"></button>\\r\\n    <clr-tabs>\\r\\n        <clr-tab>\\r\\n            <button clrTabLink (click)=\\\"navigateToTab('details')\\\">\\r\\n                {{ 'catalog.product-details' | translate }}\\r\\n            </button>\\r\\n            <clr-tab-content *clrIfActive=\\\"(activeTab$ | async) === 'details'\\\">\\r\\n                <div class=\\\"clr-row\\\">\\r\\n                    <div class=\\\"clr-col\\\">\\r\\n                        <section class=\\\"form-block\\\" formGroupName=\\\"product\\\">\\r\\n                            <ng-container *ngIf=\\\"!(isNew$ | async)\\\">\\r\\n                                <ng-container *vdrIfMultichannel>\\r\\n                                    <vdr-form-item\\r\\n                                        [label]=\\\"'common.channels' | translate\\\"\\r\\n                                        *vdrIfDefaultChannelActive\\r\\n                                    >\\r\\n                                        <div class=\\\"flex channel-assignment\\\">\\r\\n                                            <ng-container *ngFor=\\\"let channel of productChannels$ | async\\\">\\r\\n                                                <vdr-chip\\r\\n                                                    *ngIf=\\\"!isDefaultChannel(channel.code)\\\"\\r\\n                                                    icon=\\\"times-circle\\\"\\r\\n                                                    (iconClick)=\\\"removeFromChannel(channel.id)\\\"\\r\\n                                                >\\r\\n                                                    <vdr-channel-badge\\r\\n                                                        [channelCode]=\\\"channel.code\\\"\\r\\n                                                    ></vdr-channel-badge>\\r\\n                                                    {{ channel.code | channelCodeToLabel }}\\r\\n                                                </vdr-chip>\\r\\n                                            </ng-container>\\r\\n                                            <button class=\\\"btn btn-sm\\\" (click)=\\\"assignToChannel()\\\">\\r\\n                                                <clr-icon shape=\\\"layers\\\"></clr-icon>\\r\\n                                                {{ 'catalog.assign-to-channel' | translate }}\\r\\n                                            </button>\\r\\n                                        </div>\\r\\n                                    </vdr-form-item>\\r\\n                                </ng-container>\\r\\n                            </ng-container>\\r\\n                            <vdr-form-field [label]=\\\"'catalog.product-name' | translate\\\" for=\\\"name\\\">\\r\\n                                <input\\r\\n                                    id=\\\"name\\\"\\r\\n                                    type=\\\"text\\\"\\r\\n                                    formControlName=\\\"name\\\"\\r\\n                                    [readonly]=\\\"!(['UpdateCatalog', 'UpdateProduct'] | hasPermission)\\\"\\r\\n                                    (input)=\\\"updateSlug($event.target.value)\\\"\\r\\n                                />\\r\\n                            </vdr-form-field>\\r\\n                            <div\\r\\n                                class=\\\"auto-rename-wrapper\\\"\\r\\n                                [class.visible]=\\\"\\r\\n                                    (isNew$ | async) === false && detailForm.get(['product', 'name'])?.dirty\\r\\n                                \\\"\\r\\n                            >\\r\\n                                <clr-checkbox-wrapper>\\r\\n                                    <input\\r\\n                                        clrCheckbox\\r\\n                                        type=\\\"checkbox\\\"\\r\\n                                        id=\\\"auto-update\\\"\\r\\n                                        formControlName=\\\"autoUpdateVariantNames\\\"\\r\\n                                    />\\r\\n                                    <label>{{\\r\\n                                        'catalog.auto-update-product-variant-name' | translate\\r\\n                                    }}</label>\\r\\n                                </clr-checkbox-wrapper>\\r\\n                            </div>\\r\\n                            <vdr-form-field\\r\\n                                [label]=\\\"'catalog.slug' | translate\\\"\\r\\n                                for=\\\"slug\\\"\\r\\n                                [errors]=\\\"{ pattern: 'catalog.slug-pattern-error' | translate }\\\"\\r\\n                            >\\r\\n                                <input\\r\\n                                    id=\\\"slug\\\"\\r\\n                                    type=\\\"text\\\"\\r\\n                                    formControlName=\\\"slug\\\"\\r\\n                                    [readonly]=\\\"!(['UpdateCatalog', 'UpdateProduct'] | hasPermission)\\\"\\r\\n                                />\\r\\n                            </vdr-form-field>\\r\\n                            <vdr-rich-text-editor\\r\\n                                formControlName=\\\"description\\\"\\r\\n                                [readonly]=\\\"!(['UpdateCatalog', 'UpdateProduct'] | hasPermission)\\\"\\r\\n                                [label]=\\\"'common.description' | translate\\\"\\r\\n                            ></vdr-rich-text-editor>\\r\\n\\r\\n                            <section formGroupName=\\\"customFields\\\" *ngIf=\\\"customFields.length\\\">\\r\\n                                <label>{{ 'common.custom-fields' | translate }}</label>\\r\\n                                <vdr-tabbed-custom-fields\\r\\n                                    entityName=\\\"Product\\\"\\r\\n                                    [customFields]=\\\"customFields\\\"\\r\\n                                    [customFieldsFormGroup]=\\\"detailForm.get(['product', 'customFields'])\\\"\\r\\n                                    [readonly]=\\\"!(['UpdateCatalog', 'UpdateProduct'] | hasPermission)\\\"\\r\\n                                ></vdr-tabbed-custom-fields>\\r\\n                            </section>\\r\\n                            <vdr-custom-detail-component-host\\r\\n                                locationId=\\\"product-detail\\\"\\r\\n                                [entity$]=\\\"entity$\\\"\\r\\n                                [detailForm]=\\\"detailForm\\\"\\r\\n                            ></vdr-custom-detail-component-host>\\r\\n                        </section>\\r\\n                    </div>\\r\\n                    <div class=\\\"clr-col-md-auto\\\">\\r\\n                        <vdr-assets\\r\\n                            [assets]=\\\"assetChanges.assets || product.assets\\\"\\r\\n                            [featuredAsset]=\\\"assetChanges.featuredAsset || product.featuredAsset\\\"\\r\\n                            [updatePermissions]=\\\"updatePermissions\\\"\\r\\n                            (change)=\\\"assetChanges = $event\\\"\\r\\n                        ></vdr-assets>\\r\\n                        <div class=\\\"facets\\\">\\r\\n                            <vdr-facet-value-chip\\r\\n                                *ngFor=\\\"let facetValue of facetValues$ | async\\\"\\r\\n                                [facetValue]=\\\"facetValue\\\"\\r\\n                                [removable]=\\\"['UpdateCatalog', 'UpdateProduct'] | hasPermission\\\"\\r\\n                                (remove)=\\\"removeProductFacetValue(facetValue.id)\\\"\\r\\n                            ></vdr-facet-value-chip>\\r\\n                            <button\\r\\n                                class=\\\"btn btn-sm btn-secondary\\\"\\r\\n                                *vdrIfPermissions=\\\"['UpdateCatalog', 'UpdateProduct']\\\"\\r\\n                                (click)=\\\"selectProductFacetValue()\\\"\\r\\n                            >\\r\\n                                <clr-icon shape=\\\"plus\\\"></clr-icon>\\r\\n                                {{ 'catalog.add-facets' | translate }}\\r\\n                            </button>\\r\\n                        </div>\\r\\n                    </div>\\r\\n                </div>\\r\\n\\r\\n                <div *ngIf=\\\"isNew$ | async\\\">\\r\\n                    <h4>{{ 'catalog.product-variants' | translate }}</h4>\\r\\n                    <vdr-generate-product-variants\\r\\n                        (variantsChange)=\\\"createVariantsConfig = $event\\\"\\r\\n                    ></vdr-generate-product-variants>\\r\\n                </div>\\r\\n            </clr-tab-content>\\r\\n        </clr-tab>\\r\\n        <clr-tab *ngIf=\\\"!(isNew$ | async)\\\">\\r\\n            <button clrTabLink (click)=\\\"navigateToTab('variants')\\\">\\r\\n                {{ 'catalog.product-variants' | translate }}\\r\\n            </button>\\r\\n            <clr-tab-content *clrIfActive=\\\"(activeTab$ | async) === 'variants'\\\">\\r\\n                <section class=\\\"form-block\\\">\\r\\n                    <div class=\\\"view-mode\\\">\\r\\n                        <div class=\\\"btn-group\\\">\\r\\n                            <button\\r\\n                                class=\\\"btn btn-secondary-outline\\\"\\r\\n                                (click)=\\\"variantDisplayMode = 'card'\\\"\\r\\n                                [class.btn-primary]=\\\"variantDisplayMode === 'card'\\\"\\r\\n                            >\\r\\n                                <clr-icon shape=\\\"list\\\"></clr-icon>\\r\\n                                <span class=\\\"full-label\\\">{{ 'catalog.display-variant-cards' | translate }}</span>\\r\\n                            </button>\\r\\n                            <button\\r\\n                                class=\\\"btn\\\"\\r\\n                                (click)=\\\"variantDisplayMode = 'table'\\\"\\r\\n                                [class.btn-primary]=\\\"variantDisplayMode === 'table'\\\"\\r\\n                            >\\r\\n                                <clr-icon shape=\\\"table\\\"></clr-icon>\\r\\n                                <span class=\\\"full-label\\\">{{ 'catalog.display-variant-table' | translate }}</span>\\r\\n                            </button>\\r\\n                        </div>\\r\\n                        <div class=\\\"variant-filter\\\">\\r\\n                            <input\\r\\n                                [formControl]=\\\"filterInput\\\"\\r\\n                                [placeholder]=\\\"'catalog.filter-by-name-or-sku' | translate\\\"\\r\\n                            />\\r\\n                            <button class=\\\"icon-button\\\" (click)=\\\"filterInput.setValue('')\\\">\\r\\n                                <clr-icon shape=\\\"times\\\"></clr-icon>\\r\\n                            </button>\\r\\n                        </div>\\r\\n                        <div class=\\\"flex-spacer\\\"></div>\\r\\n                        <a\\r\\n                            *vdrIfPermissions=\\\"['UpdateCatalog', 'UpdateProduct']\\\"\\r\\n                            [routerLink]=\\\"['./', 'manage-variants']\\\"\\r\\n                            class=\\\"btn btn-secondary edit-variants-btn mb0 mr0\\\"\\r\\n                        >\\r\\n                            <clr-icon shape=\\\"add-text\\\"></clr-icon>\\r\\n                            {{ 'catalog.manage-variants' | translate }}\\r\\n                        </a>\\r\\n                    </div>\\r\\n\\r\\n                    <div class=\\\"pagination-row mt4\\\" *ngIf=\\\"10 < (paginationConfig$ | async)?.totalItems\\\">\\r\\n                        <vdr-items-per-page-controls\\r\\n                            [itemsPerPage]=\\\"itemsPerPage$ | async\\\"\\r\\n                            (itemsPerPageChange)=\\\"setItemsPerPage($event)\\\"\\r\\n                        ></vdr-items-per-page-controls>\\r\\n\\r\\n                        <vdr-pagination-controls\\r\\n                            [id]=\\\"(paginationConfig$ | async)?.id\\\"\\r\\n                            [currentPage]=\\\"currentPage$ | async\\\"\\r\\n                            [itemsPerPage]=\\\"itemsPerPage$ | async\\\"\\r\\n                            (pageChange)=\\\"setPage($event)\\\"\\r\\n                        ></vdr-pagination-controls>\\r\\n                    </div>\\r\\n\\r\\n                    <vdr-product-variants-table\\r\\n                        *ngIf=\\\"variantDisplayMode === 'table'\\\"\\r\\n                        [variants]=\\\"variants$ | async\\\"\\r\\n                        [paginationConfig]=\\\"paginationConfig$ | async\\\"\\r\\n                        [optionGroups]=\\\"product.optionGroups\\\"\\r\\n                        [channelPriceIncludesTax]=\\\"channelPriceIncludesTax$ | async\\\"\\r\\n                        [productVariantsFormArray]=\\\"detailForm.get('variants')\\\"\\r\\n                        [pendingAssetChanges]=\\\"variantAssetChanges\\\"\\r\\n                    ></vdr-product-variants-table>\\r\\n                    <vdr-product-variants-list\\r\\n                        *ngIf=\\\"variantDisplayMode === 'card'\\\"\\r\\n                        [variants]=\\\"variants$ | async\\\"\\r\\n                        [paginationConfig]=\\\"paginationConfig$ | async\\\"\\r\\n                        [channelPriceIncludesTax]=\\\"channelPriceIncludesTax$ | async\\\"\\r\\n                        [facets]=\\\"facets$ | async\\\"\\r\\n                        [optionGroups]=\\\"product.optionGroups\\\"\\r\\n                        [productVariantsFormArray]=\\\"detailForm.get('variants')\\\"\\r\\n                        [taxCategories]=\\\"taxCategories$ | async\\\"\\r\\n                        [customFields]=\\\"customVariantFields\\\"\\r\\n                        [customOptionFields]=\\\"customOptionFields\\\"\\r\\n                        [activeLanguage]=\\\"languageCode$ | async\\\"\\r\\n                        [pendingAssetChanges]=\\\"variantAssetChanges\\\"\\r\\n                        (assignToChannel)=\\\"assignVariantToChannel($event)\\\"\\r\\n                        (removeFromChannel)=\\\"removeVariantFromChannel($event)\\\"\\r\\n                        (assetChange)=\\\"variantAssetChange($event)\\\"\\r\\n                        (updateProductOption)=\\\"updateProductOption($event)\\\"\\r\\n                        (selectionChange)=\\\"selectedVariantIds = $event\\\"\\r\\n                        (selectFacetValueClick)=\\\"selectVariantFacetValue($event)\\\"\\r\\n                    ></vdr-product-variants-list>\\r\\n                </section>\\r\\n                <div class=\\\"pagination-row mt4\\\" *ngIf=\\\"10 < (paginationConfig$ | async)?.totalItems\\\">\\r\\n                    <vdr-items-per-page-controls\\r\\n                        [itemsPerPage]=\\\"itemsPerPage$ | async\\\"\\r\\n                        (itemsPerPageChange)=\\\"setItemsPerPage($event)\\\"\\r\\n                    ></vdr-items-per-page-controls>\\r\\n\\r\\n                    <vdr-pagination-controls\\r\\n                        [id]=\\\"(paginationConfig$ | async)?.id\\\"\\r\\n                        [currentPage]=\\\"currentPage$ | async\\\"\\r\\n                        [itemsPerPage]=\\\"itemsPerPage$ | async\\\"\\r\\n                        (pageChange)=\\\"setPage($event)\\\"\\r\\n                    ></vdr-pagination-controls>\\r\\n                </div>\\r\\n            </clr-tab-content>\\r\\n        </clr-tab>\\r\\n    </clr-tabs>\\r\\n</form>\\r\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\":host ::ng-deep trix-toolbar{top:24px}.facets{margin-top:12px;display:flex;flex-wrap:wrap;align-items:center}@media screen and (min-width: 768px){.facets{max-width:340px}}vdr-action-bar clr-toggle-wrapper{margin-top:12px}.variant-filter{flex:1;display:flex}.variant-filter input{flex:1;max-width:initial;border-radius:3px 0 0 3px!important}.variant-filter .icon-button{border:1px solid var(--color-component-border-300);background-color:var(--color-component-bg-100);border-radius:0 3px 3px 0;border-left:none}.group-name{padding-right:6px}.view-mode{display:flex;flex-direction:column;justify-content:space-between}@media screen and (min-width: 768px){.view-mode{flex-direction:row}}.edit-variants-btn{margin-top:0}.channel-assignment{flex-wrap:wrap;max-height:144px;overflow-y:auto}.auto-rename-wrapper{overflow:hidden;max-height:0;padding-left:9.5rem;margin-bottom:0;transition:max-height .2s,margin-bottom .2s}.auto-rename-wrapper.visible{max-height:24px;margin-bottom:12px}.pagination-row{display:flex;align-items:baseline;justify-content:space-between}\\n\"]\n            }]\n    }], function () { return [{ type: ngcc1.ActivatedRoute }, { type: ngcc1.Router }, { type: ngcc2.ServerConfigService }, { type: ProductDetailService }, { type: ngcc3.FormBuilder }, { type: ngcc2.ModalService }, { type: ngcc2.NotificationService }, { type: ngcc2.DataService }, { type: ngcc4.Location }, { type: ngcc0.ChangeDetectorRef }]; }, null); })();\n\nclass ProductListComponent extends BaseListComponent {\r\n    constructor(dataService, modalService, notificationService, jobQueueService, serverConfigService, router, route) {\r\n        super(router, route);\r\n        this.dataService = dataService;\r\n        this.modalService = modalService;\r\n        this.notificationService = notificationService;\r\n        this.jobQueueService = jobQueueService;\r\n        this.serverConfigService = serverConfigService;\r\n        this.searchTerm = '';\r\n        this.facetValueIds = [];\r\n        this.groupByProduct = true;\r\n        this.pendingSearchIndexUpdates = 0;\r\n        this.route.queryParamMap\r\n            .pipe(map(qpm => qpm.get('q')), takeUntil(this.destroy$))\r\n            .subscribe(term => {\r\n            this.searchTerm = term || '';\r\n            if (this.productSearchInput) {\r\n                this.productSearchInput.setSearchTerm(term);\r\n            }\r\n        });\r\n        this.selectedFacetValueIds$ = this.route.queryParamMap.pipe(map(qpm => qpm.getAll('fvids')));\r\n        this.selectedFacetValueIds$.pipe(takeUntil(this.destroy$)).subscribe(ids => {\r\n            this.facetValueIds = ids;\r\n            if (this.productSearchInput) {\r\n                this.productSearchInput.setFacetValues(ids);\r\n            }\r\n        });\r\n        super.setQueryFn((...args) => this.dataService.product.searchProducts(this.searchTerm, ...args).refetchOnChannelChange(), data => data.search, \r\n        // tslint:disable-next-line:no-shadowed-variable\r\n        (skip, take) => ({\r\n            input: {\r\n                skip,\r\n                take,\r\n                term: this.searchTerm,\r\n                facetValueIds: this.facetValueIds,\r\n                facetValueOperator: LogicalOperator.AND,\r\n                groupByProduct: this.groupByProduct,\r\n            },\r\n        }));\r\n        this.selectionManager = new SelectionManager({\r\n            multiSelect: true,\r\n            itemsAreEqual: (a, b) => this.groupByProduct ? a.productId === b.productId : a.productVariantId === b.productVariantId,\r\n            additiveMode: true,\r\n        });\r\n    }\r\n    ngOnInit() {\r\n        super.ngOnInit();\r\n        this.facetValues$ = this.result$.pipe(map(data => data.search.facetValues));\r\n        this.facetValues$\r\n            .pipe(take(1), delay(100), withLatestFrom(this.selectedFacetValueIds$))\r\n            .subscribe(([__, ids]) => {\r\n            this.productSearchInput.setFacetValues(ids);\r\n        });\r\n        this.availableLanguages$ = this.serverConfigService.getAvailableLanguages();\r\n        this.contentLanguage$ = this.dataService.client\r\n            .uiState()\r\n            .mapStream(({ uiState }) => uiState.contentLanguage)\r\n            .pipe(tap(() => this.refresh()));\r\n        this.dataService.product\r\n            .getPendingSearchIndexUpdates()\r\n            .mapSingle(({ pendingSearchIndexUpdates }) => pendingSearchIndexUpdates)\r\n            .subscribe(value => (this.pendingSearchIndexUpdates = value));\r\n    }\r\n    ngAfterViewInit() {\r\n        if (this.productSearchInput && this.searchTerm) {\r\n            setTimeout(() => this.productSearchInput.setSearchTerm(this.searchTerm));\r\n        }\r\n    }\r\n    setSearchTerm(term) {\r\n        this.searchTerm = term;\r\n        this.setQueryParam({ q: term || null, page: 1 });\r\n        this.refresh();\r\n    }\r\n    setFacetValueIds(ids) {\r\n        this.facetValueIds = ids;\r\n        this.setQueryParam({ fvids: ids, page: 1 });\r\n        this.refresh();\r\n    }\r\n    rebuildSearchIndex() {\r\n        this.dataService.product.reindex().subscribe(({ reindex }) => {\r\n            this.notificationService.info(marker('catalog.reindexing'));\r\n            this.jobQueueService.addJob(reindex.id, job => {\r\n                if (job.state === JobState.COMPLETED) {\r\n                    const time = new Intl.NumberFormat().format(job.duration || 0);\r\n                    this.notificationService.success(marker('catalog.reindex-successful'), {\r\n                        count: job.result.indexedItemCount,\r\n                        time,\r\n                    });\r\n                    this.refresh();\r\n                }\r\n                else {\r\n                    this.notificationService.error(marker('catalog.reindex-error'));\r\n                }\r\n            });\r\n        });\r\n    }\r\n    runPendingSearchIndexUpdates() {\r\n        this.dataService.product.runPendingSearchIndexUpdates().subscribe(value => {\r\n            this.notificationService.info(marker('catalog.running-search-index-updates'), {\r\n                count: this.pendingSearchIndexUpdates,\r\n            });\r\n            this.pendingSearchIndexUpdates = 0;\r\n        });\r\n    }\r\n    deleteProduct(productId) {\r\n        this.modalService\r\n            .dialog({\r\n            title: marker('catalog.confirm-delete-product'),\r\n            buttons: [\r\n                { type: 'secondary', label: marker('common.cancel') },\r\n                { type: 'danger', label: marker('common.delete'), returnValue: true },\r\n            ],\r\n        })\r\n            .pipe(switchMap(response => (response ? this.dataService.product.deleteProduct(productId) : EMPTY)), \r\n        // Short delay to allow the product to be removed from the search index before\r\n        // refreshing.\r\n        delay(500))\r\n            .subscribe(() => {\r\n            this.notificationService.success(marker('common.notify-delete-success'), {\r\n                entity: 'Product',\r\n            });\r\n            this.refresh();\r\n        }, err => {\r\n            this.notificationService.error(marker('common.notify-delete-error'), {\r\n                entity: 'Product',\r\n            });\r\n        });\r\n    }\r\n    setLanguage(code) {\r\n        this.dataService.client.setContentLanguage(code).subscribe();\r\n    }\r\n}\nProductListComponent.fac = function ProductListComponent_Factory(t) { return new (t || ProductListComponent)(ngcc0.directiveInject(ngcc2.DataService), ngcc0.directiveInject(ngcc2.ModalService), ngcc0.directiveInject(ngcc2.NotificationService), ngcc0.directiveInject(ngcc2.JobQueueService), ngcc0.directiveInject(ngcc2.ServerConfigService), ngcc0.directiveInject(ngcc1.Router), ngcc0.directiveInject(ngcc1.ActivatedRoute)); };\nProductListComponent.cmp = /*@__PURE__*/ ngcc0.defineComponent({ type: ProductListComponent, selectors: [[\"vdr-products-list\"]], viewQuery: function ProductListComponent_Query(rf, ctx) { if (rf & 1) {\n        ngcc0.viewQuery(_c24, 7);\n    } if (rf & 2) {\n        let _t;\n        ngcc0.queryRefresh(_t = ngcc0.loadQuery()) && (ctx.productSearchInput = _t.first);\n    } }, features: [ngcc0.InheritDefinitionFeature], decls: 43, vars: 46, consts: [[3, \"grow\"], [1, \"search-form\"], [3, \"facetValueResults\", \"searchTermChange\", \"facetValueChange\"], [\"productSearchInputComponent\", \"\"], [1, \"search-settings-menu\", \"mr3\"], [\"type\", \"button\", \"vdrDropdownTrigger\", \"\", 1, \"icon-button\", \"search-index-button\", 3, \"title\"], [\"shape\", \"cog\"], [\"type\", \"warning\", 4, \"ngIf\"], [\"vdrPosition\", \"bottom-right\"], [1, \"dropdown-header\"], [4, \"ngIf\"], [\"type\", \"button\", \"vdrDropdownItem\", \"\", 3, \"disabled\", \"click\"], [1, \"flex\", \"wrap\"], [1, \"mt2\"], [\"type\", \"checkbox\", \"clrToggle\", \"\", 3, \"ngModel\", \"ngModelChange\"], [3, \"availableLanguageCodes\", \"currentLanguageCode\", \"languageCodeChange\"], [\"locationId\", \"product-list\"], [\"class\", \"btn btn-primary\", 3, \"routerLink\", 4, \"vdrIfPermissions\"], [3, \"items\", \"itemsPerPage\", \"totalItems\", \"currentPage\", \"selectionManager\", \"pageChange\", \"itemsPerPageChange\"], [\"locationId\", \"product-list\", 3, \"hostComponent\", \"selectionManager\"], [\"type\", \"warning\"], [\"type\", \"button\", \"vdrDropdownItem\", \"\", 1, \"run-updates-button\", 3, \"disabled\", \"click\"], [1, \"dropdown-divider\"], [1, \"btn\", \"btn-primary\", 3, \"routerLink\"], [\"shape\", \"plus\"], [1, \"left\", \"align-middle\", \"image-col\"], [1, \"image-placeholder\"], [3, \"src\", 4, \"ngIf\", \"ngIfElse\"], [\"imagePlaceholder\", \"\"], [1, \"left\", \"align-middle\"], [\"class\", \"sku\", 4, \"ngIf\"], [1, \"align-middle\"], [1, \"right\", \"align-middle\"], [\"iconShape\", \"edit\", 1, \"edit-button\", 3, \"label\", \"linkTo\"], [\"type\", \"button\", \"vdrDropdownTrigger\", \"\", 1, \"btn\", \"btn-link\", \"btn-sm\"], [\"shape\", \"caret down\"], [\"type\", \"button\", \"vdrDropdownItem\", \"\", 1, \"delete-button\", 3, \"disabled\", \"click\"], [\"shape\", \"trash\", 1, \"is-danger\"], [3, \"src\"], [1, \"placeholder\"], [\"shape\", \"image\", \"size\", \"48\"], [1, \"sku\"]], template: function ProductListComponent_Template(rf, ctx) { if (rf & 1) {\n        ngcc0.elementStart(0, \"vdr-action-bar\");\n        ngcc0.elementStart(1, \"vdr-ab-left\", 0);\n        ngcc0.elementStart(2, \"div\", 1);\n        ngcc0.elementStart(3, \"vdr-product-search-input\", 2, 3);\n        ngcc0.listener(\"searchTermChange\", function ProductListComponent_Template_vdr_product_search_input_searchTermChange_3_listener($event) { return ctx.setSearchTerm($event); })(\"facetValueChange\", function ProductListComponent_Template_vdr_product_search_input_facetValueChange_3_listener($event) { return ctx.setFacetValueIds($event); });\n        ngcc0.pipe(5, \"async\");\n        ngcc0.elementEnd();\n        ngcc0.elementStart(6, \"vdr-dropdown\", 4);\n        ngcc0.elementStart(7, \"button\", 5);\n        ngcc0.pipe(8, \"translate\");\n        ngcc0.element(9, \"clr-icon\", 6);\n        ngcc0.template(10, ProductListComponent_vdr_status_badge_10_Template, 1, 0, \"vdr-status-badge\", 7);\n        ngcc0.elementEnd();\n        ngcc0.elementStart(11, \"vdr-dropdown-menu\", 8);\n        ngcc0.elementStart(12, \"h4\", 9);\n        ngcc0.text(13);\n        ngcc0.pipe(14, \"translate\");\n        ngcc0.elementEnd();\n        ngcc0.template(15, ProductListComponent_ng_container_15_Template, 7, 10, \"ng-container\", 10);\n        ngcc0.elementStart(16, \"button\", 11);\n        ngcc0.listener(\"click\", function ProductListComponent_Template_button_click_16_listener() { return ctx.rebuildSearchIndex(); });\n        ngcc0.pipe(17, \"hasPermission\");\n        ngcc0.text(18);\n        ngcc0.pipe(19, \"translate\");\n        ngcc0.elementEnd();\n        ngcc0.elementEnd();\n        ngcc0.elementEnd();\n        ngcc0.elementEnd();\n        ngcc0.elementStart(20, \"div\", 12);\n        ngcc0.elementStart(21, \"clr-toggle-wrapper\", 13);\n        ngcc0.elementStart(22, \"input\", 14);\n        ngcc0.listener(\"ngModelChange\", function ProductListComponent_Template_input_ngModelChange_22_listener($event) { return ctx.groupByProduct = $event; })(\"ngModelChange\", function ProductListComponent_Template_input_ngModelChange_22_listener() { return ctx.refresh(); });\n        ngcc0.elementEnd();\n        ngcc0.elementStart(23, \"label\");\n        ngcc0.text(24);\n        ngcc0.pipe(25, \"translate\");\n        ngcc0.elementEnd();\n        ngcc0.elementEnd();\n        ngcc0.elementStart(26, \"vdr-language-selector\", 15);\n        ngcc0.listener(\"languageCodeChange\", function ProductListComponent_Template_vdr_language_selector_languageCodeChange_26_listener($event) { return ctx.setLanguage($event); });\n        ngcc0.pipe(27, \"async\");\n        ngcc0.pipe(28, \"async\");\n        ngcc0.elementEnd();\n        ngcc0.elementEnd();\n        ngcc0.elementEnd();\n        ngcc0.elementStart(29, \"vdr-ab-right\");\n        ngcc0.element(30, \"vdr-action-bar-items\", 16);\n        ngcc0.template(31, ProductListComponent_a_31_Template, 4, 5, \"a\", 17);\n        ngcc0.elementEnd();\n        ngcc0.elementEnd();\n        ngcc0.elementStart(32, \"vdr-data-table\", 18);\n        ngcc0.listener(\"pageChange\", function ProductListComponent_Template_vdr_data_table_pageChange_32_listener($event) { return ctx.setPageNumber($event); })(\"itemsPerPageChange\", function ProductListComponent_Template_vdr_data_table_itemsPerPageChange_32_listener($event) { return ctx.setItemsPerPage($event); });\n        ngcc0.pipe(33, \"async\");\n        ngcc0.pipe(34, \"async\");\n        ngcc0.pipe(35, \"async\");\n        ngcc0.pipe(36, \"async\");\n        ngcc0.element(37, \"vdr-bulk-action-menu\", 19);\n        ngcc0.element(38, \"vdr-dt-column\");\n        ngcc0.element(39, \"vdr-dt-column\");\n        ngcc0.element(40, \"vdr-dt-column\");\n        ngcc0.element(41, \"vdr-dt-column\");\n        ngcc0.template(42, ProductListComponent_ng_template_42_Template, 25, 29, \"ng-template\");\n        ngcc0.elementEnd();\n    } if (rf & 2) {\n        ngcc0.advance(1);\n        ngcc0.property(\"grow\", true);\n        ngcc0.advance(2);\n        ngcc0.property(\"facetValueResults\", ngcc0.pipeBind1(5, 20, ctx.facetValues$));\n        ngcc0.advance(4);\n        ngcc0.property(\"title\", ngcc0.pipeBind1(8, 22, ctx.pendingSearchIndexUpdates ? \"catalog.pending-search-index-updates\" : \"catalog.search-index-controls\"));\n        ngcc0.advance(3);\n        ngcc0.property(\"ngIf\", ctx.pendingSearchIndexUpdates);\n        ngcc0.advance(3);\n        ngcc0.textInterpolate(ngcc0.pipeBind1(14, 24, \"catalog.search-index-controls\"));\n        ngcc0.advance(2);\n        ngcc0.property(\"ngIf\", ctx.pendingSearchIndexUpdates);\n        ngcc0.advance(1);\n        ngcc0.property(\"disabled\", !ngcc0.pipeBind1(17, 26, ngcc0.pureFunction0(44, _c20)));\n        ngcc0.advance(2);\n        ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(19, 28, \"catalog.rebuild-search-index\"), \" \");\n        ngcc0.advance(4);\n        ngcc0.property(\"ngModel\", ctx.groupByProduct);\n        ngcc0.advance(2);\n        ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(25, 30, \"catalog.group-by-product\"), \" \");\n        ngcc0.advance(2);\n        ngcc0.property(\"availableLanguageCodes\", ngcc0.pipeBind1(27, 32, ctx.availableLanguages$))(\"currentLanguageCode\", ngcc0.pipeBind1(28, 34, ctx.contentLanguage$));\n        ngcc0.advance(5);\n        ngcc0.property(\"vdrIfPermissions\", ngcc0.pureFunction0(45, _c26));\n        ngcc0.advance(1);\n        ngcc0.property(\"items\", ngcc0.pipeBind1(33, 36, ctx.items$))(\"itemsPerPage\", ngcc0.pipeBind1(34, 38, ctx.itemsPerPage$))(\"totalItems\", ngcc0.pipeBind1(35, 40, ctx.totalItems$))(\"currentPage\", ngcc0.pipeBind1(36, 42, ctx.currentPage$))(\"selectionManager\", ctx.selectionManager);\n        ngcc0.advance(5);\n        ngcc0.property(\"hostComponent\", ctx)(\"selectionManager\", ctx.selectionManager);\n    } }, directives: [ngcc2.ActionBarComponent, ngcc2.ActionBarLeftComponent, ngcc2.ProductSearchInputComponent, ngcc2.DropdownComponent, ngcc2.DropdownTriggerDirective, ngcc7.ClrIconCustomTag, ngcc4.NgIf, ngcc2.DropdownMenuComponent, ngcc2.DropdownItemDirective, ngcc7.ClrCheckboxWrapper, ngcc2.FormFieldControlDirective, ngcc3.CheckboxControlValueAccessor, ngcc7.ClrCheckbox, ngcc3.NgControlStatus, ngcc3.NgModel, ngcc7.ClrLabel, ngcc2.LanguageSelectorComponent, ngcc2.ActionBarRightComponent, ngcc2.ActionBarItemsComponent, ngcc2.IfPermissionsDirective, ngcc2.DataTableComponent, ngcc2.BulkActionMenuComponent, ngcc2.DataTableColumnComponent, ngcc2.StatusBadgeComponent, ngcc1.RouterLinkWithHref, ngcc2.TableRowActionComponent, ngcc2.ChipComponent], pipes: [ngcc4.AsyncPipe, ngcc5.TranslatePipe, ngcc2.HasPermissionPipe, ngcc2.AssetPreviewPipe], styles: [\".image-col[_ngcontent-%COMP%]{width:70px}.image-placeholder[_ngcontent-%COMP%]{width:50px;height:50px;background-color:var(--color-component-bg-200)}.image-placeholder[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:var(--border-radius-img)}.image-placeholder[_ngcontent-%COMP%]   .placeholder[_ngcontent-%COMP%]{text-align:center;color:var(--color-grey-300)}.search-form[_ngcontent-%COMP%]{display:flex;align-items:center;width:100%}vdr-product-search-input[_ngcontent-%COMP%]{min-width:300px}@media screen and (max-width: 768px){vdr-product-search-input[_ngcontent-%COMP%]{min-width:100px}}.search-settings-menu[_ngcontent-%COMP%]{margin:0 12px}td.disabled[_ngcontent-%COMP%]{background-color:var(--color-component-bg-200)}.search-index-button[_ngcontent-%COMP%]{position:relative}.search-index-button[_ngcontent-%COMP%]   vdr-status-badge[_ngcontent-%COMP%]{right:0;top:0}.run-updates-button[_ngcontent-%COMP%]{position:relative}.run-updates-button[_ngcontent-%COMP%]   vdr-status-badge[_ngcontent-%COMP%]{left:10px;top:10px}.edit-button[_ngcontent-%COMP%]{margin-right:24px}.sku[_ngcontent-%COMP%]{color:var(--color-text-300)}\"] });\r\nProductListComponent.ctorParameters = () => [\r\n    { type: DataService },\r\n    { type: ModalService },\r\n    { type: NotificationService },\r\n    { type: JobQueueService },\r\n    { type: ServerConfigService },\r\n    { type: Router },\r\n    { type: ActivatedRoute }\r\n];\r\nProductListComponent.propDecorators = {\r\n    productSearchInput: [{ type: ViewChild, args: ['productSearchInputComponent', { static: true },] }]\r\n};\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ngcc0.setClassMetadata(ProductListComponent, [{\n        type: Component,\n        args: [{\n                selector: 'vdr-products-list',\n                template: \"<vdr-action-bar>\\r\\n    <vdr-ab-left [grow]=\\\"true\\\">\\r\\n        <div class=\\\"search-form\\\">\\r\\n            <vdr-product-search-input\\r\\n                #productSearchInputComponent\\r\\n                [facetValueResults]=\\\"facetValues$ | async\\\"\\r\\n                (searchTermChange)=\\\"setSearchTerm($event)\\\"\\r\\n                (facetValueChange)=\\\"setFacetValueIds($event)\\\"\\r\\n            ></vdr-product-search-input>\\r\\n            <vdr-dropdown class=\\\"search-settings-menu mr3\\\">\\r\\n                <button\\r\\n                    type=\\\"button\\\"\\r\\n                    class=\\\"icon-button search-index-button\\\"\\r\\n                    [title]=\\\"\\r\\n                        (pendingSearchIndexUpdates\\r\\n                            ? 'catalog.pending-search-index-updates'\\r\\n                            : 'catalog.search-index-controls'\\r\\n                        ) | translate\\r\\n                    \\\"\\r\\n                    vdrDropdownTrigger\\r\\n                >\\r\\n                    <clr-icon shape=\\\"cog\\\"></clr-icon>\\r\\n                    <vdr-status-badge *ngIf=\\\"pendingSearchIndexUpdates\\\" type=\\\"warning\\\"></vdr-status-badge>\\r\\n                </button>\\r\\n                <vdr-dropdown-menu vdrPosition=\\\"bottom-right\\\">\\r\\n                    <h4 class=\\\"dropdown-header\\\">{{ 'catalog.search-index-controls' | translate }}</h4>\\r\\n                    <ng-container *ngIf=\\\"pendingSearchIndexUpdates\\\">\\r\\n                        <button\\r\\n                            type=\\\"button\\\"\\r\\n                            class=\\\"run-updates-button\\\"\\r\\n                            vdrDropdownItem\\r\\n                            (click)=\\\"runPendingSearchIndexUpdates()\\\"\\r\\n                            [disabled]=\\\"!(['UpdateCatalog', 'UpdateProduct'] | hasPermission)\\\"\\r\\n                        >\\r\\n                            <vdr-status-badge type=\\\"warning\\\"></vdr-status-badge>\\r\\n                            {{\\r\\n                                'catalog.run-pending-search-index-updates'\\r\\n                                    | translate: { count: pendingSearchIndexUpdates }\\r\\n                            }}\\r\\n                        </button>\\r\\n                        <div class=\\\"dropdown-divider\\\"></div>\\r\\n                    </ng-container>\\r\\n                    <button\\r\\n                        type=\\\"button\\\"\\r\\n                        vdrDropdownItem\\r\\n                        (click)=\\\"rebuildSearchIndex()\\\"\\r\\n                        [disabled]=\\\"!(['UpdateCatalog', 'UpdateProduct'] | hasPermission)\\\"\\r\\n                    >\\r\\n                        {{ 'catalog.rebuild-search-index' | translate }}\\r\\n                    </button>\\r\\n                </vdr-dropdown-menu>\\r\\n            </vdr-dropdown>\\r\\n        </div>\\r\\n        <div class=\\\"flex wrap\\\">\\r\\n            <clr-toggle-wrapper class=\\\"mt2\\\">\\r\\n                <input type=\\\"checkbox\\\" clrToggle [(ngModel)]=\\\"groupByProduct\\\" (ngModelChange)=\\\"refresh()\\\" />\\r\\n                <label>\\r\\n                    {{ 'catalog.group-by-product' | translate }}\\r\\n                </label>\\r\\n            </clr-toggle-wrapper>\\r\\n            <vdr-language-selector\\r\\n                [availableLanguageCodes]=\\\"availableLanguages$ | async\\\"\\r\\n                [currentLanguageCode]=\\\"contentLanguage$ | async\\\"\\r\\n                (languageCodeChange)=\\\"setLanguage($event)\\\"\\r\\n            ></vdr-language-selector>\\r\\n        </div>\\r\\n    </vdr-ab-left>\\r\\n    <vdr-ab-right>\\r\\n        <vdr-action-bar-items locationId=\\\"product-list\\\"></vdr-action-bar-items>\\r\\n        <a\\r\\n            class=\\\"btn btn-primary\\\"\\r\\n            [routerLink]=\\\"['./create']\\\"\\r\\n            *vdrIfPermissions=\\\"['CreateCatalog', 'CreateProduct']\\\"\\r\\n        >\\r\\n            <clr-icon shape=\\\"plus\\\"></clr-icon>\\r\\n            {{ 'catalog.create-new-product' | translate }}\\r\\n        </a>\\r\\n    </vdr-ab-right>\\r\\n</vdr-action-bar>\\r\\n\\r\\n<vdr-data-table\\r\\n    [items]=\\\"items$ | async\\\"\\r\\n    [itemsPerPage]=\\\"itemsPerPage$ | async\\\"\\r\\n    [totalItems]=\\\"totalItems$ | async\\\"\\r\\n    [currentPage]=\\\"currentPage$ | async\\\"\\r\\n    (pageChange)=\\\"setPageNumber($event)\\\"\\r\\n    (itemsPerPageChange)=\\\"setItemsPerPage($event)\\\"\\r\\n    [selectionManager]=\\\"selectionManager\\\"\\r\\n>\\r\\n    <vdr-bulk-action-menu\\r\\n        locationId=\\\"product-list\\\"\\r\\n        [hostComponent]=\\\"this\\\"\\r\\n        [selectionManager]=\\\"selectionManager\\\"\\r\\n    ></vdr-bulk-action-menu>\\r\\n    <vdr-dt-column> </vdr-dt-column>\\r\\n    <vdr-dt-column></vdr-dt-column>\\r\\n    <vdr-dt-column></vdr-dt-column>\\r\\n    <vdr-dt-column></vdr-dt-column>\\r\\n    <ng-template let-result=\\\"item\\\">\\r\\n        <td class=\\\"left align-middle image-col\\\" [class.disabled]=\\\"!result.enabled\\\">\\r\\n            <div class=\\\"image-placeholder\\\">\\r\\n                <img\\r\\n                    *ngIf=\\\"\\r\\n                        groupByProduct\\r\\n                            ? result.productAsset\\r\\n                            : result.productVariantAsset || result.productAsset as asset;\\r\\n                        else imagePlaceholder\\r\\n                    \\\"\\r\\n                    [src]=\\\"asset | assetPreview: 'tiny'\\\"\\r\\n                />\\r\\n                <ng-template #imagePlaceholder>\\r\\n                    <div class=\\\"placeholder\\\">\\r\\n                        <clr-icon shape=\\\"image\\\" size=\\\"48\\\"></clr-icon>\\r\\n                    </div>\\r\\n                </ng-template>\\r\\n            </div>\\r\\n        </td>\\r\\n        <td class=\\\"left align-middle\\\" [class.disabled]=\\\"!result.enabled\\\">\\r\\n            <div>{{ groupByProduct ? result.productName : result.productVariantName }}</div>\\r\\n            <div *ngIf=\\\"!groupByProduct\\\" class=\\\"sku\\\">{{ result.sku }}</div>\\r\\n        </td>\\r\\n        <td class=\\\"align-middle\\\" [class.disabled]=\\\"!result.enabled\\\">\\r\\n            <vdr-chip *ngIf=\\\"!result.enabled\\\">{{ 'common.disabled' | translate }}</vdr-chip>\\r\\n        </td>\\r\\n        <td class=\\\"right align-middle\\\" [class.disabled]=\\\"!result.enabled\\\">\\r\\n            <vdr-table-row-action\\r\\n                class=\\\"edit-button\\\"\\r\\n                iconShape=\\\"edit\\\"\\r\\n                [label]=\\\"'common.edit' | translate\\\"\\r\\n                [linkTo]=\\\"['./', result.productId]\\\"\\r\\n            ></vdr-table-row-action>\\r\\n            <vdr-dropdown>\\r\\n                <button type=\\\"button\\\" class=\\\"btn btn-link btn-sm\\\" vdrDropdownTrigger>\\r\\n                    {{ 'common.actions' | translate }}\\r\\n                    <clr-icon shape=\\\"caret down\\\"></clr-icon>\\r\\n                </button>\\r\\n                <vdr-dropdown-menu vdrPosition=\\\"bottom-right\\\">\\r\\n                    <button\\r\\n                        type=\\\"button\\\"\\r\\n                        class=\\\"delete-button\\\"\\r\\n                        (click)=\\\"deleteProduct(result.productId)\\\"\\r\\n                        [disabled]=\\\"!(['DeleteCatalog', 'DeleteProduct'] | hasPermission)\\\"\\r\\n                        vdrDropdownItem\\r\\n                    >\\r\\n                        <clr-icon shape=\\\"trash\\\" class=\\\"is-danger\\\"></clr-icon>\\r\\n                        {{ 'common.delete' | translate }}\\r\\n                    </button>\\r\\n                </vdr-dropdown-menu>\\r\\n            </vdr-dropdown>\\r\\n        </td>\\r\\n    </ng-template>\\r\\n</vdr-data-table>\\r\\n\",\n                styles: [\".image-col{width:70px}.image-placeholder{width:50px;height:50px;background-color:var(--color-component-bg-200)}.image-placeholder img{border-radius:var(--border-radius-img)}.image-placeholder .placeholder{text-align:center;color:var(--color-grey-300)}.search-form{display:flex;align-items:center;width:100%}vdr-product-search-input{min-width:300px}@media screen and (max-width: 768px){vdr-product-search-input{min-width:100px}}.search-settings-menu{margin:0 12px}td.disabled{background-color:var(--color-component-bg-200)}.search-index-button{position:relative}.search-index-button vdr-status-badge{right:0;top:0}.run-updates-button{position:relative}.run-updates-button vdr-status-badge{left:10px;top:10px}.edit-button{margin-right:24px}.sku{color:var(--color-text-300)}\\n\"]\n            }]\n    }], function () { return [{ type: ngcc2.DataService }, { type: ngcc2.ModalService }, { type: ngcc2.NotificationService }, { type: ngcc2.JobQueueService }, { type: ngcc2.ServerConfigService }, { type: ngcc1.Router }, { type: ngcc1.ActivatedRoute }]; }, { productSearchInput: [{\n            type: ViewChild,\n            args: ['productSearchInputComponent', { static: true }]\n        }] }); })();\n\nclass ProductOptionsEditorComponent extends BaseDetailComponent {\r\n    constructor(route, router, serverConfigService, dataService, productDetailService, formBuilder, changeDetector, notificationService) {\r\n        super(route, router, serverConfigService, dataService);\r\n        this.route = route;\r\n        this.router = router;\r\n        this.serverConfigService = serverConfigService;\r\n        this.dataService = dataService;\r\n        this.productDetailService = productDetailService;\r\n        this.formBuilder = formBuilder;\r\n        this.changeDetector = changeDetector;\r\n        this.notificationService = notificationService;\r\n        this.autoUpdateVariantNames = true;\r\n        this.updatePermission = [Permission.UpdateCatalog, Permission.UpdateProduct];\r\n        this.optionGroupCustomFields = this.getCustomFieldConfig('ProductOptionGroup');\r\n        this.optionCustomFields = this.getCustomFieldConfig('ProductOption');\r\n    }\r\n    ngOnInit() {\r\n        this.optionGroups$ = this.route.snapshot.data.entity.pipe(map((product) => product.optionGroups));\r\n        this.detailForm = new FormGroup({\r\n            optionGroups: new FormArray([]),\r\n        });\r\n        super.init();\r\n    }\r\n    getOptionGroups() {\r\n        const optionGroups = this.detailForm.get('optionGroups');\r\n        return optionGroups.controls;\r\n    }\r\n    getOptions(optionGroup) {\r\n        const options = optionGroup.get('options');\r\n        return options.controls;\r\n    }\r\n    save() {\r\n        if (this.detailForm.invalid || this.detailForm.pristine) {\r\n            return;\r\n        }\r\n        // tslint:disable-next-line:no-non-null-assertion\r\n        const $product = this.dataService.product.getProduct(this.id).mapSingle(data => data.product);\r\n        combineLatest(this.entity$, this.languageCode$, $product)\r\n            .pipe(take(1), mergeMap(([{ optionGroups }, languageCode, product]) => {\r\n            var _a, _b, _c, _d, _e;\r\n            const updateOperations = [];\r\n            for (const optionGroupForm of this.getOptionGroups()) {\r\n                if (((_a = optionGroupForm.get('name')) === null || _a === void 0 ? void 0 : _a.dirty) || ((_b = optionGroupForm.get('code')) === null || _b === void 0 ? void 0 : _b.dirty)) {\r\n                    const optionGroupEntity = optionGroups.find(og => og.id === optionGroupForm.value.id);\r\n                    if (optionGroupEntity) {\r\n                        const input = this.getUpdatedOptionGroup(optionGroupEntity, optionGroupForm, languageCode);\r\n                        updateOperations.push(this.dataService.product.updateProductOptionGroup(input));\r\n                    }\r\n                }\r\n                for (const optionForm of this.getOptions(optionGroupForm)) {\r\n                    if (((_c = optionForm.get('name')) === null || _c === void 0 ? void 0 : _c.dirty) || ((_d = optionForm.get('code')) === null || _d === void 0 ? void 0 : _d.dirty)) {\r\n                        const optionGroup = (_e = optionGroups\r\n                            .find(og => og.id === optionGroupForm.value.id)) === null || _e === void 0 ? void 0 : _e.options.find(o => o.id === optionForm.value.id);\r\n                        if (optionGroup) {\r\n                            const input = this.getUpdatedOption(optionGroup, optionForm, languageCode);\r\n                            updateOperations.push(this.productDetailService.updateProductOption(Object.assign(Object.assign({}, input), { autoUpdate: this.autoUpdateVariantNames }), product, languageCode));\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            return forkJoin(updateOperations);\r\n        }))\r\n            .subscribe(() => {\r\n            this.detailForm.markAsPristine();\r\n            this.changeDetector.markForCheck();\r\n            this.notificationService.success(marker('common.notify-update-success'), {\r\n                entity: 'ProductOptionGroup',\r\n            });\r\n        }, err => {\r\n            this.notificationService.error(marker('common.notify-update-error'), {\r\n                entity: 'ProductOptionGroup',\r\n            });\r\n        });\r\n    }\r\n    getUpdatedOptionGroup(optionGroup, optionGroupFormGroup, languageCode) {\r\n        const input = createUpdatedTranslatable({\r\n            translatable: optionGroup,\r\n            updatedFields: optionGroupFormGroup.value,\r\n            customFieldConfig: this.optionGroupCustomFields,\r\n            languageCode,\r\n            defaultTranslation: {\r\n                languageCode,\r\n                name: optionGroup.name || '',\r\n            },\r\n        });\r\n        return input;\r\n    }\r\n    getUpdatedOption(option, optionFormGroup, languageCode) {\r\n        const input = createUpdatedTranslatable({\r\n            translatable: option,\r\n            updatedFields: optionFormGroup.value,\r\n            customFieldConfig: this.optionGroupCustomFields,\r\n            languageCode,\r\n            defaultTranslation: {\r\n                languageCode,\r\n                name: option.name || '',\r\n            },\r\n        });\r\n        return input;\r\n    }\r\n    setFormValues(entity, languageCode) {\r\n        const groupsFormArray = new FormArray([]);\r\n        for (const optionGroup of entity.optionGroups) {\r\n            const groupTranslation = findTranslation(optionGroup, languageCode);\r\n            const group = {\r\n                id: optionGroup.id,\r\n                createdAt: optionGroup.createdAt,\r\n                updatedAt: optionGroup.updatedAt,\r\n                code: optionGroup.code,\r\n                name: groupTranslation ? groupTranslation.name : '',\r\n            };\r\n            const optionsFormArray = new FormArray([]);\r\n            for (const option of optionGroup.options) {\r\n                const optionTranslation = findTranslation(option, languageCode);\r\n                const optionControl = this.formBuilder.group({\r\n                    id: option.id,\r\n                    createdAt: option.createdAt,\r\n                    updatedAt: option.updatedAt,\r\n                    code: option.code,\r\n                    name: optionTranslation ? optionTranslation.name : '',\r\n                });\r\n                optionsFormArray.push(optionControl);\r\n            }\r\n            const groupControl = this.formBuilder.group(group);\r\n            groupControl.addControl('options', optionsFormArray);\r\n            groupsFormArray.push(groupControl);\r\n        }\r\n        this.detailForm.setControl('optionGroups', groupsFormArray);\r\n    }\r\n}\nProductOptionsEditorComponent.fac = function ProductOptionsEditorComponent_Factory(t) { return new (t || ProductOptionsEditorComponent)(ngcc0.directiveInject(ngcc1.ActivatedRoute), ngcc0.directiveInject(ngcc1.Router), ngcc0.directiveInject(ngcc2.ServerConfigService), ngcc0.directiveInject(ngcc2.DataService), ngcc0.directiveInject(ProductDetailService), ngcc0.directiveInject(ngcc3.FormBuilder), ngcc0.directiveInject(ngcc0.ChangeDetectorRef), ngcc0.directiveInject(ngcc2.NotificationService)); };\nProductOptionsEditorComponent.cmp = /*@__PURE__*/ ngcc0.defineComponent({ type: ProductOptionsEditorComponent, selectors: [[\"vdr-product-options-editor\"]], features: [ngcc0.InheritDefinitionFeature], decls: 16, vars: 14, consts: [[3, \"availableLanguageCodes\", \"currentLanguageCode\", \"languageCodeChange\"], [1, \"flex\", \"center\"], [1, \"mr2\"], [\"clrCheckbox\", \"\", \"type\", \"checkbox\", \"id\", \"auto-update\", 3, \"ngModel\", \"ngModelChange\"], [\"class\", \"btn btn-primary\", 3, \"disabled\", \"click\", 4, \"vdrIfPermissions\"], [\"class\", \"form\", 3, \"formGroup\", 4, \"ngIf\"], [1, \"btn\", \"btn-primary\", 3, \"disabled\", \"click\"], [1, \"form\", 3, \"formGroup\"], [\"formGroupName\", \"optionGroups\", 1, \"clr-row\"], [\"class\", \"clr-col-12 clr-col-xl-6\", 4, \"ngFor\", \"ngForOf\"], [1, \"clr-col-12\", \"clr-col-xl-6\"], [1, \"card\", 3, \"formArrayName\"], [1, \"card-header\", \"option-group-header\"], [3, \"entity\"], [1, \"ml2\"], [1, \"card-block\"], [\"for\", \"name\", 3, \"label\"], [\"type\", \"text\", \"formControlName\", \"name\", 3, \"id\", \"readonly\"], [\"for\", \"code\", 3, \"label\"], [\"type\", \"text\", \"formControlName\", \"code\", 3, \"id\", \"readonly\"], [\"formGroupName\", \"options\", 1, \"facet-values-list\", \"table\", \"mt2\", \"mb4\"], [\"class\", \"facet-value\", 3, \"formGroupName\", 4, \"ngFor\", \"ngForOf\"], [1, \"facet-value\", 3, \"formGroupName\"], [1, \"align-middle\"], [\"type\", \"text\", \"formControlName\", \"name\", 3, \"readonly\"], [\"type\", \"text\", \"formControlName\", \"code\"]], template: function ProductOptionsEditorComponent_Template(rf, ctx) { if (rf & 1) {\n        ngcc0.elementStart(0, \"vdr-action-bar\");\n        ngcc0.elementStart(1, \"vdr-ab-left\");\n        ngcc0.elementStart(2, \"vdr-language-selector\", 0);\n        ngcc0.listener(\"languageCodeChange\", function ProductOptionsEditorComponent_Template_vdr_language_selector_languageCodeChange_2_listener($event) { return ctx.setLanguage($event); });\n        ngcc0.pipe(3, \"async\");\n        ngcc0.pipe(4, \"async\");\n        ngcc0.elementEnd();\n        ngcc0.elementEnd();\n        ngcc0.elementStart(5, \"vdr-ab-right\");\n        ngcc0.elementStart(6, \"div\", 1);\n        ngcc0.elementStart(7, \"div\", 2);\n        ngcc0.elementStart(8, \"clr-checkbox-wrapper\");\n        ngcc0.elementStart(9, \"input\", 3);\n        ngcc0.listener(\"ngModelChange\", function ProductOptionsEditorComponent_Template_input_ngModelChange_9_listener($event) { return ctx.autoUpdateVariantNames = $event; });\n        ngcc0.elementEnd();\n        ngcc0.elementStart(10, \"label\");\n        ngcc0.text(11);\n        ngcc0.pipe(12, \"translate\");\n        ngcc0.elementEnd();\n        ngcc0.elementEnd();\n        ngcc0.elementEnd();\n        ngcc0.template(13, ProductOptionsEditorComponent_button_13_Template, 3, 4, \"button\", 4);\n        ngcc0.elementEnd();\n        ngcc0.elementEnd();\n        ngcc0.elementEnd();\n        ngcc0.template(14, ProductOptionsEditorComponent_form_14_Template, 3, 2, \"form\", 5);\n        ngcc0.pipe(15, \"async\");\n    } if (rf & 2) {\n        ngcc0.advance(2);\n        ngcc0.property(\"availableLanguageCodes\", ngcc0.pipeBind1(3, 6, ctx.availableLanguages$))(\"currentLanguageCode\", ngcc0.pipeBind1(4, 8, ctx.languageCode$));\n        ngcc0.advance(7);\n        ngcc0.property(\"ngModel\", ctx.autoUpdateVariantNames);\n        ngcc0.advance(2);\n        ngcc0.textInterpolate(ngcc0.pipeBind1(12, 10, \"catalog.auto-update-product-variant-name\"));\n        ngcc0.advance(2);\n        ngcc0.property(\"vdrIfPermissions\", ctx.updatePermission);\n        ngcc0.advance(1);\n        ngcc0.property(\"ngIf\", ngcc0.pipeBind1(15, 12, ctx.optionGroups$));\n    } }, directives: [ngcc2.ActionBarComponent, ngcc2.ActionBarLeftComponent, ngcc2.LanguageSelectorComponent, ngcc2.ActionBarRightComponent, ngcc7.ClrCheckboxWrapper, ngcc2.FormFieldControlDirective, ngcc3.CheckboxControlValueAccessor, ngcc7.ClrCheckbox, ngcc3.NgControlStatus, ngcc3.NgModel, ngcc7.ClrLabel, ngcc2.IfPermissionsDirective, ngcc4.NgIf, ngcc3.NgNoValidate, ngcc3.NgControlStatusGroup, ngcc3.FormGroupDirective, ngcc3.FormGroupName, ngcc4.NgForOf, ngcc3.FormArrayName, ngcc2.EntityInfoComponent, ngcc2.FormFieldComponent, ngcc3.DefaultValueAccessor, ngcc3.FormControlName], pipes: [ngcc4.AsyncPipe, ngcc5.TranslatePipe, ngcc2.HasPermissionPipe], styles: [\".option-group-header[_ngcontent-%COMP%]{display:flex;align-items:baseline}\"], changeDetection: 0 });\r\nProductOptionsEditorComponent.ctorParameters = () => [\r\n    { type: ActivatedRoute },\r\n    { type: Router },\r\n    { type: ServerConfigService },\r\n    { type: DataService },\r\n    { type: ProductDetailService },\r\n    { type: FormBuilder },\r\n    { type: ChangeDetectorRef },\r\n    { type: NotificationService }\r\n];\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ngcc0.setClassMetadata(ProductOptionsEditorComponent, [{\n        type: Component,\n        args: [{\n                selector: 'vdr-product-options-editor',\n                template: \"<vdr-action-bar>\\r\\n    <vdr-ab-left>\\r\\n        <vdr-language-selector\\r\\n            [availableLanguageCodes]=\\\"availableLanguages$ | async\\\"\\r\\n            [currentLanguageCode]=\\\"languageCode$ | async\\\"\\r\\n            (languageCodeChange)=\\\"setLanguage($event)\\\"\\r\\n        ></vdr-language-selector>\\r\\n    </vdr-ab-left>\\r\\n\\r\\n    <vdr-ab-right>\\r\\n        <div class=\\\"flex center\\\">\\r\\n            <div class=\\\"mr2\\\">\\r\\n                <clr-checkbox-wrapper>\\r\\n                    <input\\r\\n                        clrCheckbox\\r\\n                        type=\\\"checkbox\\\"\\r\\n                        id=\\\"auto-update\\\"\\r\\n                        [(ngModel)]=\\\"autoUpdateVariantNames\\\"\\r\\n                    />\\r\\n                    <label>{{ 'catalog.auto-update-product-variant-name' | translate }}</label>\\r\\n                </clr-checkbox-wrapper>\\r\\n            </div>\\r\\n            <button\\r\\n                *vdrIfPermissions=\\\"updatePermission\\\"\\r\\n                class=\\\"btn btn-primary\\\"\\r\\n                (click)=\\\"save()\\\"\\r\\n                [disabled]=\\\"detailForm.pristine || detailForm.invalid\\\"\\r\\n            >\\r\\n                {{ 'common.update' | translate }}\\r\\n            </button>\\r\\n        </div>\\r\\n    </vdr-ab-right>\\r\\n</vdr-action-bar>\\r\\n<form class=\\\"form\\\" [formGroup]=\\\"detailForm\\\" *ngIf=\\\"optionGroups$ | async as optionGroups\\\">\\r\\n    <div formGroupName=\\\"optionGroups\\\" class=\\\"clr-row\\\">\\r\\n        <div class=\\\"clr-col-12 clr-col-xl-6\\\" *ngFor=\\\"let optionGroup of getOptionGroups(); index as i\\\">\\r\\n            <section class=\\\"card\\\" [formArrayName]=\\\"i\\\">\\r\\n                <div class=\\\"card-header option-group-header\\\">\\r\\n                    <vdr-entity-info [entity]=\\\"optionGroup.value\\\"></vdr-entity-info>\\r\\n                    <div class=\\\"ml2\\\">{{ optionGroup.value.code }}</div>\\r\\n                </div>\\r\\n                <div class=\\\"card-block\\\">\\r\\n                    <vdr-form-field [label]=\\\"'common.name' | translate\\\" for=\\\"name\\\">\\r\\n                        <input\\r\\n                            [id]=\\\"'name-' + i\\\"\\r\\n                            type=\\\"text\\\"\\r\\n                            formControlName=\\\"name\\\"\\r\\n                            [readonly]=\\\"!(updatePermission | hasPermission)\\\"\\r\\n                        />\\r\\n                    </vdr-form-field>\\r\\n                    <vdr-form-field [label]=\\\"'common.code' | translate\\\" for=\\\"code\\\">\\r\\n                        <input\\r\\n                            [id]=\\\"'code-' + i\\\"\\r\\n                            type=\\\"text\\\"\\r\\n                            [readonly]=\\\"!(updatePermission | hasPermission)\\\"\\r\\n                            formControlName=\\\"code\\\"\\r\\n                        />\\r\\n                    </vdr-form-field>\\r\\n                </div>\\r\\n                <section class=\\\"card-block\\\">\\r\\n                    <table class=\\\"facet-values-list table mt2 mb4\\\" formGroupName=\\\"options\\\">\\r\\n                        <thead>\\r\\n                            <tr>\\r\\n                                <th></th>\\r\\n                                <th>{{ 'common.name' | translate }}</th>\\r\\n                                <th>{{ 'common.code' | translate }}</th>\\r\\n                            </tr>\\r\\n                        </thead>\\r\\n                        <tbody>\\r\\n                            <tr\\r\\n                                class=\\\"facet-value\\\"\\r\\n                                *ngFor=\\\"let option of getOptions(optionGroup); let i = index\\\"\\r\\n                                [formGroupName]=\\\"i\\\"\\r\\n                            >\\r\\n                                <td class=\\\"align-middle\\\">\\r\\n                                    <vdr-entity-info [entity]=\\\"option.value\\\"></vdr-entity-info>\\r\\n                                </td>\\r\\n                                <td class=\\\"align-middle\\\">\\r\\n                                    <input\\r\\n                                        type=\\\"text\\\"\\r\\n                                        formControlName=\\\"name\\\"\\r\\n                                        [readonly]=\\\"!(updatePermission | hasPermission)\\\"\\r\\n                                    />\\r\\n                                </td>\\r\\n                                <td class=\\\"align-middle\\\"><input type=\\\"text\\\" formControlName=\\\"code\\\" /></td>\\r\\n                            </tr>\\r\\n                        </tbody>\\r\\n                    </table>\\r\\n                </section>\\r\\n            </section>\\r\\n        </div>\\r\\n    </div>\\r\\n</form>\\r\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\".option-group-header{display:flex;align-items:baseline}\\n\"]\n            }]\n    }], function () { return [{ type: ngcc1.ActivatedRoute }, { type: ngcc1.Router }, { type: ngcc2.ServerConfigService }, { type: ngcc2.DataService }, { type: ProductDetailService }, { type: ngcc3.FormBuilder }, { type: ngcc0.ChangeDetectorRef }, { type: ngcc2.NotificationService }]; }, null); })();\n\nclass ConfirmVariantDeletionDialogComponent {\r\n    constructor() {\r\n        this.variants = [];\r\n    }\r\n    confirm() {\r\n        this.resolveWith(true);\r\n    }\r\n    cancel() {\r\n        this.resolveWith();\r\n    }\r\n}\nConfirmVariantDeletionDialogComponent.fac = function ConfirmVariantDeletionDialogComponent_Factory(t) { return new (t || ConfirmVariantDeletionDialogComponent)(); };\nConfirmVariantDeletionDialogComponent.cmp = /*@__PURE__*/ ngcc0.defineComponent({ type: ConfirmVariantDeletionDialogComponent, selectors: [[\"vdr-confirm-variant-deletion-dialog\"]], decls: 6, vars: 4, consts: [[\"vdrDialogTitle\", \"\"], [4, \"ngFor\", \"ngForOf\"], [\"vdrDialogButtons\", \"\"], [\"type\", \"button\", 1, \"btn\", 3, \"click\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", 3, \"click\"]], template: function ConfirmVariantDeletionDialogComponent_Template(rf, ctx) { if (rf & 1) {\n        ngcc0.template(0, ConfirmVariantDeletionDialogComponent_ng_template_0_Template, 2, 3, \"ng-template\", 0);\n        ngcc0.text(1);\n        ngcc0.pipe(2, \"translate\");\n        ngcc0.elementStart(3, \"ul\");\n        ngcc0.template(4, ConfirmVariantDeletionDialogComponent_li_4_Template, 2, 2, \"li\", 1);\n        ngcc0.elementEnd();\n        ngcc0.template(5, ConfirmVariantDeletionDialogComponent_ng_template_5_Template, 6, 6, \"ng-template\", 2);\n    } if (rf & 2) {\n        ngcc0.advance(1);\n        ngcc0.textInterpolate1(\"\\n\", ngcc0.pipeBind1(2, 2, \"catalog.confirm-deletion-of-unused-variants-body\"), \"\\n\");\n        ngcc0.advance(3);\n        ngcc0.property(\"ngForOf\", ctx.variants);\n    } }, directives: [ngcc2.DialogTitleDirective, ngcc4.NgForOf, ngcc2.DialogButtonsDirective], pipes: [ngcc5.TranslatePipe], styles: [\"\"], changeDetection: 0 });\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ngcc0.setClassMetadata(ConfirmVariantDeletionDialogComponent, [{\n        type: Component,\n        args: [{\n                selector: 'vdr-confirm-variant-deletion-dialog',\n                template: \"<ng-template vdrDialogTitle>\\r\\n    {{ 'catalog.confirm-deletion-of-unused-variants-title' | translate }}\\r\\n</ng-template>\\r\\n{{ 'catalog.confirm-deletion-of-unused-variants-body' | translate }}\\r\\n<ul>\\r\\n    <li *ngFor=\\\"let variant of variants\\\">{{ variant.name }} ({{ variant.sku }})</li>\\r\\n</ul>\\r\\n<ng-template vdrDialogButtons>\\r\\n    <button type=\\\"button\\\" class=\\\"btn\\\" (click)=\\\"cancel()\\\">{{ 'common.cancel' | translate }}</button>\\r\\n    <button type=\\\"submit\\\" (click)=\\\"confirm()\\\" class=\\\"btn btn-primary\\\">\\r\\n        {{ 'common.confirm' | translate }}\\r\\n    </button>\\r\\n</ng-template>\\r\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\"\"]\n            }]\n    }], function () { return []; }, null); })();\n\nclass GeneratedVariant {\r\n    constructor(config) {\r\n        for (const key of Object.keys(config)) {\r\n            this[key] = config[key];\r\n        }\r\n    }\r\n}\r\nclass ProductVariantsEditorComponent {\r\n    constructor(route, dataService, productDetailService, notificationService, modalService) {\r\n        this.route = route;\r\n        this.dataService = dataService;\r\n        this.productDetailService = productDetailService;\r\n        this.notificationService = notificationService;\r\n        this.modalService = modalService;\r\n        this.formValueChanged = false;\r\n        this.optionsChanged = false;\r\n        this.generatedVariants = [];\r\n    }\r\n    ngOnInit() {\r\n        this.initOptionsAndVariants();\r\n        this.languageCode =\r\n            this.route.snapshot.paramMap.get('lang') || getDefaultUiLanguage();\r\n        this.dataService.settings.getActiveChannel().single$.subscribe(data => {\r\n            this.currencyCode = data.activeChannel.currencyCode;\r\n        });\r\n    }\r\n    onFormChanged(variantInfo) {\r\n        this.formValueChanged = true;\r\n        variantInfo.enabled = true;\r\n    }\r\n    canDeactivate() {\r\n        return !this.formValueChanged;\r\n    }\r\n    getVariantsToAdd() {\r\n        return this.generatedVariants.filter(v => !v.existing && v.enabled);\r\n    }\r\n    getVariantName(variant) {\r\n        return variant.options.length === 0\r\n            ? marker('catalog.default-variant')\r\n            : variant.options.map(o => o.name).join(' ');\r\n    }\r\n    addOptionGroup() {\r\n        this.optionGroups.push({\r\n            isNew: true,\r\n            locked: false,\r\n            name: '',\r\n            values: [],\r\n        });\r\n        this.optionsChanged = true;\r\n    }\r\n    removeOptionGroup(optionGroup) {\r\n        const id = optionGroup.id;\r\n        if (optionGroup.isNew) {\r\n            this.optionGroups = this.optionGroups.filter(og => og !== optionGroup);\r\n            this.generateVariants();\r\n            this.optionsChanged = true;\r\n        }\r\n        else if (id) {\r\n            this.modalService\r\n                .dialog({\r\n                title: marker('catalog.confirm-delete-product-option-group'),\r\n                translationVars: { name: optionGroup.name },\r\n                buttons: [\r\n                    { type: 'secondary', label: marker('common.cancel') },\r\n                    { type: 'danger', label: marker('common.delete'), returnValue: true },\r\n                ],\r\n            })\r\n                .pipe(switchMap(val => {\r\n                if (val) {\r\n                    return this.dataService.product.removeOptionGroupFromProduct({\r\n                        optionGroupId: id,\r\n                        productId: this.product.id,\r\n                    });\r\n                }\r\n                else {\r\n                    return EMPTY;\r\n                }\r\n            }))\r\n                .subscribe(({ removeOptionGroupFromProduct }) => {\r\n                var _a;\r\n                if (removeOptionGroupFromProduct.__typename === 'Product') {\r\n                    this.notificationService.success(marker('common.notify-delete-success'), {\r\n                        entity: 'ProductOptionGroup',\r\n                    });\r\n                    this.initOptionsAndVariants();\r\n                    this.optionsChanged = true;\r\n                }\r\n                else if (removeOptionGroupFromProduct.__typename === 'ProductOptionInUseError') {\r\n                    this.notificationService.error((_a = removeOptionGroupFromProduct.message) !== null && _a !== void 0 ? _a : '');\r\n                }\r\n            });\r\n        }\r\n    }\r\n    addOption(index, optionName) {\r\n        const group = this.optionGroups[index];\r\n        if (group) {\r\n            group.values.push({ name: optionName, locked: false });\r\n            this.generateVariants();\r\n            this.optionsChanged = true;\r\n        }\r\n    }\r\n    removeOption(index, { id, name }) {\r\n        const optionGroup = this.optionGroups[index];\r\n        if (optionGroup) {\r\n            if (!id) {\r\n                optionGroup.values = optionGroup.values.filter(v => v.name !== name);\r\n                this.generateVariants();\r\n            }\r\n            else {\r\n                this.modalService\r\n                    .dialog({\r\n                    title: marker('catalog.confirm-delete-product-option'),\r\n                    translationVars: { name },\r\n                    buttons: [\r\n                        { type: 'secondary', label: marker('common.cancel') },\r\n                        { type: 'danger', label: marker('common.delete'), returnValue: true },\r\n                    ],\r\n                })\r\n                    .pipe(switchMap(val => {\r\n                    if (val) {\r\n                        return this.dataService.product.deleteProductOption(id);\r\n                    }\r\n                    else {\r\n                        return EMPTY;\r\n                    }\r\n                }))\r\n                    .subscribe(({ deleteProductOption }) => {\r\n                    var _a;\r\n                    if (deleteProductOption.result === DeletionResult.DELETED) {\r\n                        this.notificationService.success(marker('common.notify-delete-success'), {\r\n                            entity: 'ProductOption',\r\n                        });\r\n                        optionGroup.values = optionGroup.values.filter(v => v.id !== id);\r\n                        this.generateVariants();\r\n                        this.optionsChanged = true;\r\n                    }\r\n                    else {\r\n                        this.notificationService.error((_a = deleteProductOption.message) !== null && _a !== void 0 ? _a : '');\r\n                    }\r\n                });\r\n            }\r\n        }\r\n    }\r\n    generateVariants() {\r\n        const groups = this.optionGroups.map(g => g.values);\r\n        const previousVariants = this.generatedVariants;\r\n        const generatedVariantFactory = (isDefault, options, existingVariant, prototypeVariant) => {\r\n            var _a, _b, _c, _d, _e, _f;\r\n            const prototype = this.getVariantPrototype(options, previousVariants);\r\n            return new GeneratedVariant({\r\n                enabled: true,\r\n                existing: !!existingVariant,\r\n                productVariantId: existingVariant === null || existingVariant === void 0 ? void 0 : existingVariant.id,\r\n                isDefault,\r\n                options,\r\n                price: (_b = (_a = existingVariant === null || existingVariant === void 0 ? void 0 : existingVariant.price) !== null && _a !== void 0 ? _a : prototypeVariant === null || prototypeVariant === void 0 ? void 0 : prototypeVariant.price) !== null && _b !== void 0 ? _b : prototype.price,\r\n                sku: (_d = (_c = existingVariant === null || existingVariant === void 0 ? void 0 : existingVariant.sku) !== null && _c !== void 0 ? _c : prototypeVariant === null || prototypeVariant === void 0 ? void 0 : prototypeVariant.sku) !== null && _d !== void 0 ? _d : prototype.sku,\r\n                stock: (_f = (_e = existingVariant === null || existingVariant === void 0 ? void 0 : existingVariant.stockOnHand) !== null && _e !== void 0 ? _e : prototypeVariant === null || prototypeVariant === void 0 ? void 0 : prototypeVariant.stockOnHand) !== null && _f !== void 0 ? _f : prototype.stock,\r\n            });\r\n        };\r\n        this.generatedVariants = groups.length\r\n            ? generateAllCombinations(groups).map(options => {\r\n                const existingVariant = this.product.variants.find(v => this.optionsAreEqual(v.options, options));\r\n                const prototypeVariant = this.product.variants.find(v => this.optionsAreSubset(v.options, options));\r\n                return generatedVariantFactory(false, options, existingVariant, prototypeVariant);\r\n            })\r\n            : [generatedVariantFactory(true, [], this.product.variants[0])];\r\n    }\r\n    /**\r\n     * Returns one of the existing variants to base the newly-generated variant's\r\n     * details off.\r\n     */\r\n    getVariantPrototype(options, previousVariants) {\r\n        const variantsWithSimilarOptions = previousVariants.filter(v => options.map(o => o.name).filter(name => v.options.map(o => o.name).includes(name)));\r\n        if (variantsWithSimilarOptions.length) {\r\n            return pick(previousVariants[0], ['sku', 'price', 'stock']);\r\n        }\r\n        return {\r\n            sku: '',\r\n            price: 0,\r\n            stock: 0,\r\n        };\r\n    }\r\n    deleteVariant(id, options) {\r\n        this.modalService\r\n            .dialog({\r\n            title: marker('catalog.confirm-delete-product-variant'),\r\n            translationVars: { name: options.map(o => o.name).join(' ') },\r\n            buttons: [\r\n                { type: 'secondary', label: marker('common.cancel') },\r\n                { type: 'danger', label: marker('common.delete'), returnValue: true },\r\n            ],\r\n        })\r\n            .pipe(switchMap(response => response ? this.productDetailService.deleteProductVariant(id, this.product.id) : EMPTY), switchMap(() => this.reFetchProduct(null)))\r\n            .subscribe(() => {\r\n            this.notificationService.success(marker('common.notify-delete-success'), {\r\n                entity: 'ProductVariant',\r\n            });\r\n            this.initOptionsAndVariants();\r\n        }, err => {\r\n            this.notificationService.error(marker('common.notify-delete-error'), {\r\n                entity: 'ProductVariant',\r\n            });\r\n        });\r\n    }\r\n    save() {\r\n        this.optionGroups = this.optionGroups.filter(g => g.values.length);\r\n        const newOptionGroups = this.optionGroups\r\n            .filter(og => og.isNew)\r\n            .map(og => ({\r\n            name: og.name,\r\n            values: [],\r\n        }));\r\n        this.checkUniqueSkus()\r\n            .pipe(mergeMap(() => this.confirmDeletionOfObsoleteVariants()), mergeMap(() => this.productDetailService.createProductOptionGroups(newOptionGroups, this.languageCode)), mergeMap(createdOptionGroups => this.addOptionGroupsToProduct(createdOptionGroups)), mergeMap(createdOptionGroups => this.addNewOptionsToGroups(createdOptionGroups)), mergeMap(groupsIds => this.fetchOptionGroups(groupsIds)), mergeMap(groups => this.createNewProductVariants(groups)), mergeMap(res => this.deleteObsoleteVariants(res.createProductVariants)), mergeMap(variants => this.reFetchProduct(variants)))\r\n            .subscribe({\r\n            next: variants => {\r\n                this.formValueChanged = false;\r\n                this.notificationService.success(marker('catalog.created-new-variants-success'), {\r\n                    count: variants.length,\r\n                });\r\n                this.initOptionsAndVariants();\r\n                this.optionsChanged = false;\r\n            },\r\n        });\r\n    }\r\n    checkUniqueSkus() {\r\n        const withDuplicateSkus = this.generatedVariants.filter((variant, index) => {\r\n            return (variant.enabled &&\r\n                this.generatedVariants.find(gv => gv.sku.trim() === variant.sku.trim() && gv !== variant));\r\n        });\r\n        if (withDuplicateSkus.length) {\r\n            return this.modalService\r\n                .dialog({\r\n                title: marker('catalog.duplicate-sku-warning'),\r\n                body: unique(withDuplicateSkus.map(v => `${v.sku}`)).join(', '),\r\n                buttons: [{ label: marker('common.close'), returnValue: false, type: 'primary' }],\r\n            })\r\n                .pipe(mergeMap(res => EMPTY));\r\n        }\r\n        else {\r\n            return of(true);\r\n        }\r\n    }\r\n    confirmDeletionOfObsoleteVariants() {\r\n        const obsoleteVariants = this.getObsoleteVariants();\r\n        if (obsoleteVariants.length) {\r\n            return this.modalService\r\n                .fromComponent(ConfirmVariantDeletionDialogComponent, {\r\n                locals: {\r\n                    variants: obsoleteVariants,\r\n                },\r\n            })\r\n                .pipe(mergeMap(res => {\r\n                return res === true ? of(true) : EMPTY;\r\n            }));\r\n        }\r\n        else {\r\n            return of(true);\r\n        }\r\n    }\r\n    getObsoleteVariants() {\r\n        return this.product.variants.filter(variant => !this.generatedVariants.find(gv => gv.productVariantId === variant.id));\r\n    }\r\n    hasOnlyDefaultVariant(product) {\r\n        return product.variants.length === 1 && product.optionGroups.length === 0;\r\n    }\r\n    addOptionGroupsToProduct(createdOptionGroups) {\r\n        if (createdOptionGroups.length) {\r\n            return forkJoin(createdOptionGroups.map(optionGroup => {\r\n                return this.dataService.product.addOptionGroupToProduct({\r\n                    productId: this.product.id,\r\n                    optionGroupId: optionGroup.id,\r\n                });\r\n            })).pipe(map(() => createdOptionGroups));\r\n        }\r\n        else {\r\n            return of([]);\r\n        }\r\n    }\r\n    addNewOptionsToGroups(createdOptionGroups) {\r\n        const newOptions = this.optionGroups\r\n            .map(og => {\r\n            const createdGroup = createdOptionGroups.find(cog => cog.name === og.name);\r\n            const productOptionGroupId = createdGroup ? createdGroup.id : og.id;\r\n            if (!productOptionGroupId) {\r\n                throw new Error('Could not get a productOptionGroupId');\r\n            }\r\n            return og.values\r\n                .filter(v => !v.locked)\r\n                .map(v => ({\r\n                productOptionGroupId,\r\n                code: normalizeString(v.name, '-'),\r\n                translations: [{ name: v.name, languageCode: this.languageCode }],\r\n            }));\r\n        })\r\n            .reduce((flat, options) => [...flat, ...options], []);\r\n        const allGroupIds = [\r\n            ...createdOptionGroups.map(g => g.id),\r\n            ...this.optionGroups.map(g => g.id).filter(notNullOrUndefined),\r\n        ];\r\n        if (newOptions.length) {\r\n            return forkJoin(newOptions.map(input => this.dataService.product.addOptionToGroup(input))).pipe(map(() => allGroupIds));\r\n        }\r\n        else {\r\n            return of(allGroupIds);\r\n        }\r\n    }\r\n    fetchOptionGroups(groupsIds) {\r\n        return forkJoin(groupsIds.map(id => this.dataService.product\r\n            .getProductOptionGroup(id)\r\n            .mapSingle(data => data.productOptionGroup)\r\n            .pipe(filter(notNullOrUndefined)))).pipe(defaultIfEmpty([]));\r\n    }\r\n    createNewProductVariants(groups) {\r\n        const options = groups\r\n            .filter(notNullOrUndefined)\r\n            .map(og => og.options)\r\n            .reduce((flat, o) => [...flat, ...o], []);\r\n        const variants = this.generatedVariants\r\n            .filter(v => v.enabled && !v.existing)\r\n            .map(v => {\r\n            const optionIds = groups.map((group, index) => {\r\n                const option = group.options.find(o => o.name === v.options[index].name);\r\n                if (option) {\r\n                    return option.id;\r\n                }\r\n                else {\r\n                    throw new Error(`Could not find a matching option for group ${group.name}`);\r\n                }\r\n            });\r\n            return {\r\n                price: v.price,\r\n                sku: v.sku,\r\n                stock: v.stock,\r\n                optionIds,\r\n            };\r\n        });\r\n        return this.productDetailService.createProductVariants(this.product, variants, options, this.languageCode);\r\n    }\r\n    deleteObsoleteVariants(input) {\r\n        const obsoleteVariants = this.getObsoleteVariants();\r\n        if (obsoleteVariants.length) {\r\n            const deleteOperations = obsoleteVariants.map(v => this.dataService.product.deleteProductVariant(v.id).pipe(map(() => input)));\r\n            return forkJoin(...deleteOperations);\r\n        }\r\n        else {\r\n            return of(input);\r\n        }\r\n    }\r\n    reFetchProduct(input) {\r\n        // Re-fetch the Product to force an update to the view.\r\n        const id = this.route.snapshot.paramMap.get('id');\r\n        if (id) {\r\n            return this.dataService.product.getProduct(id).single$.pipe(map(() => input));\r\n        }\r\n        else {\r\n            return of(input);\r\n        }\r\n    }\r\n    initOptionsAndVariants() {\r\n        this.dataService.product\r\n            // tslint:disable-next-line:no-non-null-assertion\r\n            .getProductVariantsOptions(this.route.snapshot.paramMap.get('id'))\r\n            // tslint:disable-next-line:no-non-null-assertion\r\n            .mapSingle(({ product }) => product)\r\n            .subscribe(p => {\r\n            this.product = p;\r\n            const allUsedOptionIds = p.variants.map(v => v.options.map(option => option.id)).flat();\r\n            const allUsedOptionGroupIds = p.variants\r\n                .map(v => v.options.map(option => option.groupId))\r\n                .flat();\r\n            this.optionGroups = p.optionGroups.map(og => {\r\n                return {\r\n                    id: og.id,\r\n                    isNew: false,\r\n                    name: og.name,\r\n                    locked: allUsedOptionGroupIds.includes(og.id),\r\n                    values: og.options.map(o => ({\r\n                        id: o.id,\r\n                        name: o.name,\r\n                        locked: allUsedOptionIds.includes(o.id),\r\n                    })),\r\n                };\r\n            });\r\n            this.generateVariants();\r\n        });\r\n    }\r\n    optionsAreEqual(a, b) {\r\n        return this.toOptionString(a) === this.toOptionString(b);\r\n    }\r\n    optionsAreSubset(a, b) {\r\n        return this.toOptionString(b).includes(this.toOptionString(a));\r\n    }\r\n    toOptionString(o) {\r\n        return o\r\n            .map(x => x.name)\r\n            .sort()\r\n            .join('|');\r\n    }\r\n}\nProductVariantsEditorComponent.fac = function ProductVariantsEditorComponent_Factory(t) { return new (t || ProductVariantsEditorComponent)(ngcc0.directiveInject(ngcc1.ActivatedRoute), ngcc0.directiveInject(ngcc2.DataService), ngcc0.directiveInject(ProductDetailService), ngcc0.directiveInject(ngcc2.NotificationService), ngcc0.directiveInject(ngcc2.ModalService)); };\nProductVariantsEditorComponent.cmp = /*@__PURE__*/ ngcc0.defineComponent({ type: ProductVariantsEditorComponent, selectors: [[\"vdr-product-variants-editor\"]], decls: 29, vars: 24, consts: [[1, \"btn\", \"btn-primary\", 3, \"disabled\", \"click\"], [\"class\", \"option-groups\", 4, \"ngFor\", \"ngForOf\"], [1, \"btn\", \"btn-primary-outline\", \"btn-sm\", 3, \"click\"], [\"shape\", \"plus\"], [1, \"variants-preview\"], [1, \"table\"], [3, \"disabled\", 4, \"ngFor\", \"ngForOf\"], [1, \"option-groups\"], [1, \"name\"], [\"clrInput\", \"\", \"name\", \"name\", 3, \"ngModel\", \"readonly\", \"ngModelChange\"], [1, \"values\"], [3, \"options\", \"groupName\", \"disabled\", \"add\", \"remove\"], [\"optionValueInputComponent\", \"\"], [1, \"btn\", \"btn-icon\", \"btn-danger-outline\", \"mt5\", 3, \"disabled\", \"click\"], [\"shape\", \"trash\"], [1, \"left\"], [4, \"ngIf\"], [1, \"flex\", \"center\"], [\"type\", \"checkbox\", \"name\", \"enabled\", \"clrCheckbox\", \"\", 3, \"ngModel\", \"ngModelChange\"], [\"clrInput\", \"\", \"type\", \"text\", \"name\", \"sku\", \"required\", \"\", 3, \"ngModel\", \"placeholder\", \"ngModelChange\"], [\"clrInput\", \"\", \"name\", \"price\", 3, \"ngModel\", \"currencyCode\", \"ngModelChange\"], [\"clrInput\", \"\", \"type\", \"number\", \"name\", \"stock\", \"min\", \"0\", \"step\", \"1\", 3, \"ngModel\", \"ngModelChange\"], [\"vdrDropdownTrigger\", \"\", 1, \"icon-button\"], [\"shape\", \"ellipsis-vertical\"], [\"vdrPosition\", \"bottom-right\"], [\"type\", \"button\", \"vdrDropdownItem\", \"\", 1, \"delete-button\", 3, \"click\"], [\"shape\", \"trash\", 1, \"is-danger\"]], template: function ProductVariantsEditorComponent_Template(rf, ctx) { if (rf & 1) {\n        ngcc0.elementStart(0, \"vdr-action-bar\");\n        ngcc0.elementStart(1, \"vdr-ab-right\");\n        ngcc0.elementStart(2, \"button\", 0);\n        ngcc0.listener(\"click\", function ProductVariantsEditorComponent_Template_button_click_2_listener() { return ctx.save(); });\n        ngcc0.text(3);\n        ngcc0.pipe(4, \"translate\");\n        ngcc0.elementEnd();\n        ngcc0.elementEnd();\n        ngcc0.elementEnd();\n        ngcc0.template(5, ProductVariantsEditorComponent_div_5_Template, 15, 12, \"div\", 1);\n        ngcc0.elementStart(6, \"button\", 2);\n        ngcc0.listener(\"click\", function ProductVariantsEditorComponent_Template_button_click_6_listener() { return ctx.addOptionGroup(); });\n        ngcc0.element(7, \"clr-icon\", 3);\n        ngcc0.text(8);\n        ngcc0.pipe(9, \"translate\");\n        ngcc0.elementEnd();\n        ngcc0.elementStart(10, \"div\", 4);\n        ngcc0.elementStart(11, \"table\", 5);\n        ngcc0.elementStart(12, \"thead\");\n        ngcc0.elementStart(13, \"tr\");\n        ngcc0.element(14, \"th\");\n        ngcc0.elementStart(15, \"th\");\n        ngcc0.text(16);\n        ngcc0.pipe(17, \"translate\");\n        ngcc0.elementEnd();\n        ngcc0.elementStart(18, \"th\");\n        ngcc0.text(19);\n        ngcc0.pipe(20, \"translate\");\n        ngcc0.elementEnd();\n        ngcc0.elementStart(21, \"th\");\n        ngcc0.text(22);\n        ngcc0.pipe(23, \"translate\");\n        ngcc0.elementEnd();\n        ngcc0.elementStart(24, \"th\");\n        ngcc0.text(25);\n        ngcc0.pipe(26, \"translate\");\n        ngcc0.elementEnd();\n        ngcc0.element(27, \"th\");\n        ngcc0.elementEnd();\n        ngcc0.elementEnd();\n        ngcc0.template(28, ProductVariantsEditorComponent_tr_28_Template, 20, 13, \"tr\", 6);\n        ngcc0.elementEnd();\n        ngcc0.elementEnd();\n    } if (rf & 2) {\n        ngcc0.advance(2);\n        ngcc0.property(\"disabled\", !ctx.formValueChanged && !ctx.optionsChanged || ctx.getVariantsToAdd().length === 0);\n        ngcc0.advance(1);\n        ngcc0.textInterpolate1(\" \", ngcc0.pipeBind2(4, 9, \"common.add-new-variants\", ngcc0.pureFunction1(22, _c7, ctx.getVariantsToAdd().length)), \" \");\n        ngcc0.advance(2);\n        ngcc0.property(\"ngForOf\", ctx.optionGroups);\n        ngcc0.advance(3);\n        ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(9, 12, \"catalog.add-option\"), \"\\n\");\n        ngcc0.advance(8);\n        ngcc0.textInterpolate(ngcc0.pipeBind1(17, 14, \"catalog.variant\"));\n        ngcc0.advance(3);\n        ngcc0.textInterpolate(ngcc0.pipeBind1(20, 16, \"catalog.sku\"));\n        ngcc0.advance(3);\n        ngcc0.textInterpolate(ngcc0.pipeBind1(23, 18, \"catalog.price\"));\n        ngcc0.advance(3);\n        ngcc0.textInterpolate(ngcc0.pipeBind1(26, 20, \"catalog.stock-on-hand\"));\n        ngcc0.advance(3);\n        ngcc0.property(\"ngForOf\", ctx.generatedVariants);\n    } }, directives: function () { return [ngcc2.ActionBarComponent, ngcc2.ActionBarRightComponent, ngcc4.NgForOf, ngcc7.ClrIconCustomTag, ngcc7.ClrLabel, ngcc2.FormFieldControlDirective, ngcc3.DefaultValueAccessor, ngcc7.ClrInput, ngcc3.NgControlStatus, ngcc3.NgModel, OptionValueInputComponent, ngcc4.NgIf, ngcc7.ClrCheckboxWrapper, ngcc3.CheckboxControlValueAccessor, ngcc7.ClrCheckbox, ngcc7.ClrInputContainer, ngcc3.RequiredValidator, ngcc2.CurrencyInputComponent, ngcc3.MinValidator, ngcc3.NumberValueAccessor, ngcc2.DropdownComponent, ngcc2.DropdownTriggerDirective, ngcc2.DropdownMenuComponent, ngcc2.DropdownItemDirective]; }, pipes: function () { return [ngcc5.TranslatePipe, ngcc2.LocaleCurrencyPipe]; }, styles: [\".option-groups[_ngcontent-%COMP%]{display:flex}.option-groups[_ngcontent-%COMP%]:first-of-type{margin-top:24px}.values[_ngcontent-%COMP%]{flex:1;margin:0 6px}.variants-preview[_ngcontent-%COMP%]   tr.disabled[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background-color:var(--color-component-bg-100);color:var(--color-grey-400)}\"] });\r\nProductVariantsEditorComponent.ctorParameters = () => [\r\n    { type: ActivatedRoute },\r\n    { type: DataService },\r\n    { type: ProductDetailService },\r\n    { type: NotificationService },\r\n    { type: ModalService }\r\n];\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ngcc0.setClassMetadata(ProductVariantsEditorComponent, [{\n        type: Component,\n        args: [{\n                selector: 'vdr-product-variants-editor',\n                template: \"<vdr-action-bar>\\r\\n    <vdr-ab-right>\\r\\n        <button\\r\\n            class=\\\"btn btn-primary\\\"\\r\\n            (click)=\\\"save()\\\"\\r\\n            [disabled]=\\\"(!formValueChanged && !optionsChanged) || getVariantsToAdd().length === 0\\\"\\r\\n        >\\r\\n            {{ 'common.add-new-variants' | translate: { count: getVariantsToAdd().length } }}\\r\\n        </button>\\r\\n    </vdr-ab-right>\\r\\n</vdr-action-bar>\\r\\n\\r\\n<div *ngFor=\\\"let group of optionGroups; index as i\\\" class=\\\"option-groups\\\">\\r\\n    <div class=\\\"name\\\">\\r\\n        <label>{{ 'catalog.option' | translate }}</label>\\r\\n        <input clrInput [(ngModel)]=\\\"group.name\\\" name=\\\"name\\\" [readonly]=\\\"!group.isNew\\\" />\\r\\n    </div>\\r\\n    <div class=\\\"values\\\">\\r\\n        <label>{{ 'catalog.option-values' | translate }}</label>\\r\\n        <vdr-option-value-input\\r\\n            #optionValueInputComponent\\r\\n            [options]=\\\"group.values\\\"\\r\\n            [groupName]=\\\"group.name\\\"\\r\\n            [disabled]=\\\"group.name === ''\\\"\\r\\n            (add)=\\\"addOption(i, $event.name)\\\"\\r\\n            (remove)=\\\"removeOption(i, $event)\\\"\\r\\n        ></vdr-option-value-input>\\r\\n    </div>\\r\\n    <div>\\r\\n        <button\\r\\n            [disabled]=\\\"group.locked\\\"\\r\\n            class=\\\"btn btn-icon btn-danger-outline mt5\\\" (click)=\\\"removeOptionGroup(group)\\\">\\r\\n            <clr-icon shape=\\\"trash\\\"></clr-icon>\\r\\n        </button>\\r\\n    </div>\\r\\n</div>\\r\\n<button class=\\\"btn btn-primary-outline btn-sm\\\" (click)=\\\"addOptionGroup()\\\">\\r\\n    <clr-icon shape=\\\"plus\\\"></clr-icon>\\r\\n    {{ 'catalog.add-option' | translate }}\\r\\n</button>\\r\\n\\r\\n<div class=\\\"variants-preview\\\">\\r\\n    <table class=\\\"table\\\">\\r\\n        <thead>\\r\\n            <tr>\\r\\n                <th></th>\\r\\n                <th>{{ 'catalog.variant' | translate }}</th>\\r\\n                <th>{{ 'catalog.sku' | translate }}</th>\\r\\n                <th>{{ 'catalog.price' | translate }}</th>\\r\\n                <th>{{ 'catalog.stock-on-hand' | translate }}</th>\\r\\n                <th></th>\\r\\n            </tr>\\r\\n        </thead>\\r\\n        <tr *ngFor=\\\"let variant of generatedVariants\\\" [class.disabled]=\\\"!variant.enabled || variant.existing\\\">\\r\\n            <td class=\\\"left\\\">\\r\\n                <clr-checkbox-wrapper *ngIf=\\\"!variant.existing\\\">\\r\\n                    <input\\r\\n                        type=\\\"checkbox\\\"\\r\\n                        [(ngModel)]=\\\"variant.enabled\\\"\\r\\n                        name=\\\"enabled\\\"\\r\\n                        clrCheckbox\\r\\n                        (ngModelChange)=\\\"formValueChanged = true\\\"\\r\\n                    />\\r\\n                    <label>{{ 'common.create' | translate }}</label>\\r\\n                </clr-checkbox-wrapper>\\r\\n            </td>\\r\\n            <td>\\r\\n                {{ getVariantName(variant) | translate }}\\r\\n            </td>\\r\\n            <td>\\r\\n                <div class=\\\"flex center\\\">\\r\\n                    <clr-input-container *ngIf=\\\"!variant.existing\\\">\\r\\n                        <input\\r\\n                            clrInput\\r\\n                            type=\\\"text\\\"\\r\\n                            [(ngModel)]=\\\"variant.sku\\\"\\r\\n                            [placeholder]=\\\"'catalog.sku' | translate\\\"\\r\\n                            name=\\\"sku\\\"\\r\\n                            required\\r\\n                            (ngModelChange)=\\\"onFormChanged(variant)\\\"\\r\\n                        />\\r\\n                    </clr-input-container>\\r\\n                    <span *ngIf=\\\"variant.existing\\\">{{ variant.sku }}</span>\\r\\n                </div>\\r\\n            </td>\\r\\n            <td>\\r\\n                <div class=\\\"flex center\\\">\\r\\n                    <clr-input-container *ngIf=\\\"!variant.existing\\\">\\r\\n                        <vdr-currency-input\\r\\n                            clrInput\\r\\n                            [(ngModel)]=\\\"variant.price\\\"\\r\\n                            name=\\\"price\\\"\\r\\n                            [currencyCode]=\\\"currencyCode\\\"\\r\\n                            (ngModelChange)=\\\"onFormChanged(variant)\\\"\\r\\n                        ></vdr-currency-input>\\r\\n                    </clr-input-container>\\r\\n                    <span *ngIf=\\\"variant.existing\\\">{{ variant.price | localeCurrency: currencyCode }}</span>\\r\\n                </div>\\r\\n            </td>\\r\\n            <td>\\r\\n                <div class=\\\"flex center\\\">\\r\\n                    <clr-input-container *ngIf=\\\"!variant.existing\\\">\\r\\n                        <input\\r\\n                            clrInput\\r\\n                            type=\\\"number\\\"\\r\\n                            [(ngModel)]=\\\"variant.stock\\\"\\r\\n                            name=\\\"stock\\\"\\r\\n                            min=\\\"0\\\"\\r\\n                            step=\\\"1\\\"\\r\\n                            (ngModelChange)=\\\"onFormChanged(variant)\\\"\\r\\n                        />\\r\\n                    </clr-input-container>\\r\\n                    <span *ngIf=\\\"variant.existing\\\">{{ variant.stock }}</span>\\r\\n                </div>\\r\\n            </td>\\r\\n            <td>\\r\\n                <vdr-dropdown *ngIf=\\\"variant.productVariantId as productVariantId\\\">\\r\\n                    <button class=\\\"icon-button\\\" vdrDropdownTrigger>\\r\\n                        <clr-icon shape=\\\"ellipsis-vertical\\\"></clr-icon>\\r\\n                    </button>\\r\\n                    <vdr-dropdown-menu vdrPosition=\\\"bottom-right\\\">\\r\\n                        <button\\r\\n                            type=\\\"button\\\"\\r\\n                            class=\\\"delete-button\\\"\\r\\n                            (click)=\\\"deleteVariant(productVariantId, variant.options)\\\"\\r\\n                            vdrDropdownItem\\r\\n                        >\\r\\n                            <clr-icon shape=\\\"trash\\\" class=\\\"is-danger\\\"></clr-icon>\\r\\n                            {{ 'common.delete' | translate }}\\r\\n                        </button>\\r\\n                    </vdr-dropdown-menu>\\r\\n                </vdr-dropdown>\\r\\n            </td>\\r\\n        </tr>\\r\\n    </table>\\r\\n</div>\\r\\n\",\n                changeDetection: ChangeDetectionStrategy.Default,\n                styles: [\".option-groups{display:flex}.option-groups:first-of-type{margin-top:24px}.values{flex:1;margin:0 6px}.variants-preview tr.disabled td{background-color:var(--color-component-bg-100);color:var(--color-grey-400)}\\n\"]\n            }]\n    }], function () { return [{ type: ngcc1.ActivatedRoute }, { type: ngcc2.DataService }, { type: ProductDetailService }, { type: ngcc2.NotificationService }, { type: ngcc2.ModalService }]; }, null); })();\n\nclass AssetResolver extends BaseEntityResolver {\r\n    constructor(router, dataService) {\r\n        super(router, {\r\n            __typename: 'Asset',\r\n            id: '',\r\n            createdAt: '',\r\n            updatedAt: '',\r\n            name: '',\r\n            type: AssetType.IMAGE,\r\n            fileSize: 0,\r\n            mimeType: '',\r\n            width: 0,\r\n            height: 0,\r\n            source: '',\r\n            preview: '',\r\n            focalPoint: null,\r\n        }, id => dataService.product.getAsset(id).mapStream(data => data.asset));\r\n    }\r\n}\nAssetResolver.fac = function AssetResolver_Factory(t) { return new (t || AssetResolver)(ngcc0.inject(ngcc1.Router), ngcc0.inject(ngcc2.DataService)); };\r\nAssetResolver.prov = i0.defineInjectable({ factory: function AssetResolver_Factory() { return new AssetResolver(i0.inject(i1.Router), i0.inject(i2.DataService)); }, token: AssetResolver, providedIn: \"root\" });\r\nAssetResolver.ctorParameters = () => [\r\n    { type: Router },\r\n    { type: DataService }\r\n];\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ngcc0.setClassMetadata(AssetResolver, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: ngcc1.Router }, { type: ngcc2.DataService }]; }, null); })();\n\nclass CollectionResolver extends BaseEntityResolver {\r\n    constructor(router, dataService) {\r\n        super(router, {\r\n            __typename: 'Collection',\r\n            id: '',\r\n            createdAt: '',\r\n            updatedAt: '',\r\n            languageCode: getDefaultUiLanguage(),\r\n            name: '',\r\n            slug: '',\r\n            isPrivate: false,\r\n            breadcrumbs: [],\r\n            description: '',\r\n            featuredAsset: null,\r\n            assets: [],\r\n            translations: [],\r\n            filters: [],\r\n            parent: {},\r\n            children: null,\r\n        }, id => dataService.collection.getCollection(id).mapStream(data => data.collection));\r\n    }\r\n}\nCollectionResolver.fac = function CollectionResolver_Factory(t) { return new (t || CollectionResolver)(ngcc0.inject(ngcc1.Router), ngcc0.inject(ngcc2.DataService)); };\r\nCollectionResolver.prov = i0.defineInjectable({ factory: function CollectionResolver_Factory() { return new CollectionResolver(i0.inject(i1.Router), i0.inject(i2.DataService)); }, token: CollectionResolver, providedIn: \"root\" });\r\nCollectionResolver.ctorParameters = () => [\r\n    { type: Router },\r\n    { type: DataService }\r\n];\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ngcc0.setClassMetadata(CollectionResolver, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: ngcc1.Router }, { type: ngcc2.DataService }]; }, null); })();\n\nclass FacetResolver extends BaseEntityResolver {\r\n    constructor(router, dataService) {\r\n        super(router, {\r\n            __typename: 'Facet',\r\n            id: '',\r\n            createdAt: '',\r\n            updatedAt: '',\r\n            isPrivate: false,\r\n            languageCode: getDefaultUiLanguage(),\r\n            name: '',\r\n            code: '',\r\n            translations: [],\r\n            values: [],\r\n        }, (id) => dataService.facet.getFacet(id).mapStream((data) => data.facet));\r\n    }\r\n}\nFacetResolver.fac = function FacetResolver_Factory(t) { return new (t || FacetResolver)(ngcc0.inject(ngcc1.Router), ngcc0.inject(ngcc2.DataService)); };\r\nFacetResolver.prov = i0.defineInjectable({ factory: function FacetResolver_Factory() { return new FacetResolver(i0.inject(i1.Router), i0.inject(i2.DataService)); }, token: FacetResolver, providedIn: \"root\" });\r\nFacetResolver.ctorParameters = () => [\r\n    { type: Router },\r\n    { type: DataService }\r\n];\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ngcc0.setClassMetadata(FacetResolver, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: ngcc1.Router }, { type: ngcc2.DataService }]; }, null); })();\n\nclass ProductResolver extends BaseEntityResolver {\r\n    constructor(dataService, router) {\r\n        super(router, {\r\n            __typename: 'Product',\r\n            id: '',\r\n            createdAt: '',\r\n            updatedAt: '',\r\n            enabled: true,\r\n            languageCode: getDefaultUiLanguage(),\r\n            name: '',\r\n            slug: '',\r\n            featuredAsset: null,\r\n            assets: [],\r\n            description: '',\r\n            translations: [],\r\n            optionGroups: [],\r\n            facetValues: [],\r\n            variantList: { items: [], totalItems: 0 },\r\n            channels: [],\r\n        }, id => dataService.product\r\n            .getProduct(id, { take: 10 })\r\n            .refetchOnChannelChange()\r\n            .mapStream(data => data.product));\r\n    }\r\n}\nProductResolver.fac = function ProductResolver_Factory(t) { return new (t || ProductResolver)(ngcc0.inject(ngcc2.DataService), ngcc0.inject(ngcc1.Router)); };\r\nProductResolver.prov = i0.defineInjectable({ factory: function ProductResolver_Factory() { return new ProductResolver(i0.inject(i2.DataService), i0.inject(i1.Router)); }, token: ProductResolver, providedIn: \"root\" });\r\nProductResolver.ctorParameters = () => [\r\n    { type: DataService },\r\n    { type: Router }\r\n];\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ngcc0.setClassMetadata(ProductResolver, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: ngcc2.DataService }, { type: ngcc1.Router }]; }, null); })();\n\nclass ProductVariantsResolver extends BaseEntityResolver {\r\n    constructor(router, dataService) {\r\n        super(router, {\r\n            __typename: 'Product',\r\n            id: '',\r\n            createdAt: '',\r\n            updatedAt: '',\r\n            name: '',\r\n            optionGroups: [],\r\n            variants: [],\r\n        }, id => dataService.product.getProductVariantsOptions(id).mapStream(data => data.product));\r\n    }\r\n}\nProductVariantsResolver.fac = function ProductVariantsResolver_Factory(t) { return new (t || ProductVariantsResolver)(ngcc0.inject(ngcc1.Router), ngcc0.inject(ngcc2.DataService)); };\r\nProductVariantsResolver.prov = i0.defineInjectable({ factory: function ProductVariantsResolver_Factory() { return new ProductVariantsResolver(i0.inject(i1.Router), i0.inject(i2.DataService)); }, token: ProductVariantsResolver, providedIn: \"root\" });\r\nProductVariantsResolver.ctorParameters = () => [\r\n    { type: Router },\r\n    { type: DataService }\r\n];\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ngcc0.setClassMetadata(ProductVariantsResolver, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: ngcc1.Router }, { type: ngcc2.DataService }]; }, null); })();\n\nconst 0$3 = {\r\n    breadcrumb: marker('breadcrumb.products'),\r\n}, 1$3 = {\r\n    breadcrumb: productBreadcrumb,\r\n}, 2$3 = {\r\n    breadcrumb: productVariantEditorBreadcrumb,\r\n}, 3$3 = {\r\n    breadcrumb: productOptionsEditorBreadcrumb,\r\n}, 4$3 = {\r\n    breadcrumb: marker('breadcrumb.facets'),\r\n}, 5$3 = {\r\n    breadcrumb: facetBreadcrumb,\r\n}, 6$3 = {\r\n    breadcrumb: marker('breadcrumb.collections'),\r\n}, 7$3 = {\r\n    breadcrumb: collectionBreadcrumb,\r\n}, 8$3 = {\r\n    breadcrumb: marker('breadcrumb.assets'),\r\n}, 9$1 = {\r\n    breadcrumb: assetBreadcrumb,\r\n};\r\nconst catalogRoutes = [\r\n    {\r\n        path: 'products',\r\n        component: ProductListComponent,\r\n        data: 0$3,\r\n    },\r\n    {\r\n        path: 'products/:id',\r\n        component: ProductDetailComponent,\r\n        resolve: createResolveData(ProductResolver),\r\n        canDeactivate: [CanDeactivateDetailGuard],\r\n        data: 1$3,\r\n    },\r\n    {\r\n        path: 'products/:id/manage-variants',\r\n        component: ProductVariantsEditorComponent,\r\n        resolve: createResolveData(ProductVariantsResolver),\r\n        canDeactivate: [CanDeactivateDetailGuard],\r\n        data: 2$3,\r\n    },\r\n    {\r\n        path: 'products/:id/options',\r\n        component: ProductOptionsEditorComponent,\r\n        resolve: createResolveData(ProductVariantsResolver),\r\n        canDeactivate: [CanDeactivateDetailGuard],\r\n        data: 3$3,\r\n    },\r\n    {\r\n        path: 'facets',\r\n        component: FacetListComponent,\r\n        data: 4$3,\r\n    },\r\n    {\r\n        path: 'facets/:id',\r\n        component: FacetDetailComponent,\r\n        resolve: createResolveData(FacetResolver),\r\n        canDeactivate: [CanDeactivateDetailGuard],\r\n        data: 5$3,\r\n    },\r\n    {\r\n        path: 'collections',\r\n        component: CollectionListComponent,\r\n        data: 6$3,\r\n    },\r\n    {\r\n        path: 'collections/:id',\r\n        component: CollectionDetailComponent,\r\n        resolve: createResolveData(CollectionResolver),\r\n        canDeactivate: [CanDeactivateDetailGuard],\r\n        data: 7$3,\r\n    },\r\n    {\r\n        path: 'assets',\r\n        component: AssetListComponent,\r\n        data: 8$3,\r\n    },\r\n    {\r\n        path: 'assets/:id',\r\n        component: AssetDetailComponent,\r\n        resolve: createResolveData(AssetResolver),\r\n        data: 9$1,\r\n    },\r\n];\r\nfunction productBreadcrumb(data, params) {\r\n    return detailBreadcrumb({\r\n        entity: data.entity,\r\n        id: params.id,\r\n        breadcrumbKey: 'breadcrumb.products',\r\n        getName: product => product.name,\r\n        route: 'products',\r\n    });\r\n}\r\nfunction productVariantEditorBreadcrumb(data, params) {\r\n    return data.entity.pipe(map((entity) => {\r\n        return [\r\n            {\r\n                label: marker('breadcrumb.products'),\r\n                link: ['../', 'products'],\r\n            },\r\n            {\r\n                label: `${entity.name}`,\r\n                link: ['../', 'products', params.id, { tab: 'variants' }],\r\n            },\r\n            {\r\n                label: marker('breadcrumb.manage-variants'),\r\n                link: ['manage-variants'],\r\n            },\r\n        ];\r\n    }));\r\n}\r\nfunction productOptionsEditorBreadcrumb(data, params) {\r\n    return data.entity.pipe(map((entity) => {\r\n        return [\r\n            {\r\n                label: marker('breadcrumb.products'),\r\n                link: ['../', 'products'],\r\n            },\r\n            {\r\n                label: `${entity.name}`,\r\n                link: ['../', 'products', params.id, { tab: 'variants' }],\r\n            },\r\n            {\r\n                label: marker('breadcrumb.product-options'),\r\n                link: ['options'],\r\n            },\r\n        ];\r\n    }));\r\n}\r\nfunction facetBreadcrumb(data, params) {\r\n    return detailBreadcrumb({\r\n        entity: data.entity,\r\n        id: params.id,\r\n        breadcrumbKey: 'breadcrumb.facets',\r\n        getName: facet => facet.name,\r\n        route: 'facets',\r\n    });\r\n}\r\nfunction collectionBreadcrumb(data, params) {\r\n    return detailBreadcrumb({\r\n        entity: data.entity,\r\n        id: params.id,\r\n        breadcrumbKey: 'breadcrumb.collections',\r\n        getName: collection => collection.name,\r\n        route: 'collections',\r\n    });\r\n}\r\nfunction assetBreadcrumb(data, params) {\r\n    return detailBreadcrumb({\r\n        entity: data.entity,\r\n        id: params.id,\r\n        breadcrumbKey: 'breadcrumb.assets',\r\n        getName: asset => asset.name,\r\n        route: 'assets',\r\n    });\r\n}\n\n/**\r\n * A component which displays the Assets, and allows assets to be removed and\r\n * added, and for the featured asset to be set.\r\n *\r\n * Note: rather complex code for drag drop is due to a limitation of the default CDK implementation\r\n * which is addressed by a work-around from here: https://github.com/angular/components/issues/13372#issuecomment-483998378\r\n */\r\nclass AssetsComponent {\r\n    constructor(modalService, changeDetector) {\r\n        this.modalService = modalService;\r\n        this.changeDetector = changeDetector;\r\n        this.compact = false;\r\n        this.change = new EventEmitter();\r\n        this.assets = [];\r\n    }\r\n    set assetsSetter(val) {\r\n        // create a new non-readonly array of assets\r\n        this.assets = (val || []).slice();\r\n    }\r\n    selectAssets() {\r\n        this.modalService\r\n            .fromComponent(AssetPickerDialogComponent, {\r\n            size: 'xl',\r\n        })\r\n            .subscribe(result => {\r\n            if (result && result.length) {\r\n                this.assets = unique(this.assets.concat(result), 'id');\r\n                if (!this.featuredAsset) {\r\n                    this.featuredAsset = result[0];\r\n                }\r\n                this.emitChangeEvent(this.assets, this.featuredAsset);\r\n                this.changeDetector.markForCheck();\r\n            }\r\n        });\r\n    }\r\n    setAsFeatured(asset) {\r\n        this.featuredAsset = asset;\r\n        this.emitChangeEvent(this.assets, asset);\r\n    }\r\n    isFeatured(asset) {\r\n        return !!this.featuredAsset && this.featuredAsset.id === asset.id;\r\n    }\r\n    previewAsset(asset) {\r\n        this.modalService\r\n            .fromComponent(AssetPreviewDialogComponent, {\r\n            size: 'xl',\r\n            closable: true,\r\n            locals: { asset },\r\n        })\r\n            .subscribe();\r\n    }\r\n    removeAsset(asset) {\r\n        this.assets = this.assets.filter(a => a.id !== asset.id);\r\n        if (this.featuredAsset && this.featuredAsset.id === asset.id) {\r\n            this.featuredAsset = this.assets.length > 0 ? this.assets[0] : undefined;\r\n        }\r\n        this.emitChangeEvent(this.assets, this.featuredAsset);\r\n    }\r\n    emitChangeEvent(assets, featuredAsset) {\r\n        this.change.emit({\r\n            assets,\r\n            featuredAsset,\r\n        });\r\n    }\r\n    dropListDropped(event) {\r\n        moveItemInArray(this.assets, event.previousContainer.data, event.container.data);\r\n        this.emitChangeEvent(this.assets, this.featuredAsset);\r\n    }\r\n}\nAssetsComponent.fac = function AssetsComponent_Factory(t) { return new (t || AssetsComponent)(ngcc0.directiveInject(ngcc2.ModalService), ngcc0.directiveInject(ngcc0.ChangeDetectorRef)); };\nAssetsComponent.cmp = /*@__PURE__*/ ngcc0.defineComponent({ type: AssetsComponent, selectors: [[\"vdr-assets\"]], hostVars: 2, hostBindings: function AssetsComponent_HostBindings(rf, ctx) { if (rf & 2) {\n        ngcc0.classProp(\"compact\", ctx.compact);\n    } }, inputs: { compact: \"compact\", assetsSetter: [\"assets\", \"assetsSetter\"], featuredAsset: \"featuredAsset\", updatePermissions: \"updatePermissions\" }, outputs: { change: \"change\" }, decls: 5, vars: 2, consts: [[\"class\", \"card\", 4, \"ngIf\", \"ngIfElse\"], [\"compactView\", \"\"], [\"assetList\", \"\"], [1, \"card\"], [1, \"card-img\"], [1, \"featured-asset\"], [3, \"src\", \"click\", 4, \"ngIf\"], [\"class\", \"placeholder\", 3, \"click\", 4, \"ngIf\"], [1, \"card-block\"], [4, \"ngTemplateOutlet\"], [\"class\", \"card-footer\", 4, \"vdrIfPermissions\"], [3, \"src\", \"click\"], [1, \"placeholder\", 3, \"click\"], [\"shape\", \"image\", \"size\", \"128\"], [1, \"card-footer\"], [1, \"btn\", 3, \"click\"], [\"shape\", \"attachment\"], [1, \"featured-asset\", \"compact\"], [\"class\", \"compact-select btn btn-icon btn-sm btn-block\", 3, \"title\", \"click\", 4, \"vdrIfPermissions\"], [\"shape\", \"image\", \"size\", \"150\"], [1, \"compact-select\", \"btn\", \"btn-icon\", \"btn-sm\", \"btn-block\", 3, \"title\", \"click\"], [\"cdkDropListGroup\", \"\", 1, \"all-assets\"], [\"class\", \"drop-list\", \"cdkDropList\", \"\", \"cdkDropListOrientation\", \"horizontal\", 3, \"cdkDropListData\", \"cdkDropListDisabled\", \"cdkDropListDropped\", 4, \"ngFor\", \"ngForOf\"], [\"cdkDropList\", \"\", \"cdkDropListOrientation\", \"horizontal\", 1, \"drop-list\", 3, \"cdkDropListData\", \"cdkDropListDisabled\", \"cdkDropListDropped\"], [\"cdkDrag\", \"\"], [\"vdrDropdownTrigger\", \"\", \"tabindex\", \"0\", 1, \"asset-thumb\", 3, \"title\"], [3, \"src\"], [\"vdrPosition\", \"bottom-right\"], [\"type\", \"button\", \"vdrDropdownItem\", \"\", 3, \"click\"], [\"type\", \"button\", \"vdrDropdownItem\", \"\", 3, \"disabled\", \"click\"], [1, \"dropdown-divider\"], [\"type\", \"button\", \"vdrDropdownItem\", \"\", 1, \"remove-asset\", 3, \"disabled\", \"click\"]], template: function AssetsComponent_Template(rf, ctx) { if (rf & 1) {\n        ngcc0.template(0, AssetsComponent_div_0_Template, 8, 4, \"div\", 0);\n        ngcc0.template(1, AssetsComponent_ng_template_1_Template, 5, 4, \"ng-template\", null, 1, ngcc0.templateRefExtractor);\n        ngcc0.template(3, AssetsComponent_ng_template_3_Template, 2, 3, \"ng-template\", null, 2, ngcc0.templateRefExtractor);\n    } if (rf & 2) {\n        const _r1 = ngcc0.reference(2);\n        ngcc0.property(\"ngIf\", !ctx.compact)(\"ngIfElse\", _r1);\n    } }, directives: [ngcc4.NgIf, ngcc4.NgTemplateOutlet, ngcc2.IfPermissionsDirective, ngcc7.ClrIconCustomTag, ngcc8.CdkDropListGroup, ngcc4.NgForOf, ngcc8.CdkDropList, ngcc2.DropdownComponent, ngcc8.CdkDrag, ngcc2.DropdownTriggerDirective, ngcc2.DropdownMenuComponent, ngcc2.DropdownItemDirective], pipes: [ngcc2.AssetPreviewPipe, ngcc5.TranslatePipe, ngcc2.HasPermissionPipe], styles: [\"[_nghost-%COMP%]{width:340px;display:block}.compact[_nghost-%COMP%]{width:162px}.placeholder[_ngcontent-%COMP%]{text-align:center;color:var(--color-grey-300)}.featured-asset[_ngcontent-%COMP%]{text-align:center;background:var(--color-component-bg-200);padding:6px;cursor:pointer;border-radius:var(--border-radius-img)}.featured-asset[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:var(--border-radius-img)}.featured-asset.compact[_ngcontent-%COMP%]{width:100%;min-height:40px;position:relative;padding:6px}.featured-asset[_ngcontent-%COMP%]   .compact-select[_ngcontent-%COMP%]{position:absolute;bottom:6px;right:6px;margin:0}.all-assets[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}.all-assets[_ngcontent-%COMP%]   .drop-list[_ngcontent-%COMP%]{min-width:60px}.all-assets[_ngcontent-%COMP%]   .asset-thumb[_ngcontent-%COMP%]{margin:3px;padding:0;border:2px solid var(--color-component-border-100);border-radius:var(--border-radius-img);cursor:pointer}.all-assets[_ngcontent-%COMP%]   .asset-thumb[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:var(--border-radius-img)}.all-assets[_ngcontent-%COMP%]   .asset-thumb.featured[_ngcontent-%COMP%]{border-color:var(--color-primary-500);border-radius:calc(var(--border-radius-img) + 2px)}.all-assets[_ngcontent-%COMP%]   .remove-asset[_ngcontent-%COMP%]{color:var(--color-warning-500)}.all-assets.compact[_ngcontent-%COMP%]   .drop-list[_ngcontent-%COMP%]{min-width:54px}.all-assets.compact[_ngcontent-%COMP%]   .asset-thumb[_ngcontent-%COMP%]{margin:1px;border-width:1px}.all-assets.compact[_ngcontent-%COMP%]   .cdk-drag-placeholder[_ngcontent-%COMP%]{width:50px}.all-assets.compact[_ngcontent-%COMP%]   .cdk-drag-placeholder[_ngcontent-%COMP%]   .asset-thumb[_ngcontent-%COMP%]{width:50px}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.example-box[_ngcontent-%COMP%]:last-child{border:none}.all-assets.cdk-drop-list-dragging[_ngcontent-%COMP%]   vdr-dropdown[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}.cdk-drop-list-dragging[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){display:none}\"], changeDetection: 0 });\r\nAssetsComponent.ctorParameters = () => [\r\n    { type: ModalService },\r\n    { type: ChangeDetectorRef }\r\n];\r\nAssetsComponent.propDecorators = {\r\n    assetsSetter: [{ type: Input, args: ['assets',] }],\r\n    featuredAsset: [{ type: Input }],\r\n    compact: [{ type: HostBinding, args: ['class.compact',] }, { type: Input }],\r\n    change: [{ type: Output }],\r\n    updatePermissions: [{ type: Input }]\r\n};\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ngcc0.setClassMetadata(AssetsComponent, [{\n        type: Component,\n        args: [{\n                selector: 'vdr-assets',\n                template: \"<div class=\\\"card\\\" *ngIf=\\\"!compact; else compactView\\\">\\r\\n    <div class=\\\"card-img\\\">\\r\\n        <div class=\\\"featured-asset\\\">\\r\\n            <img\\r\\n                *ngIf=\\\"featuredAsset\\\"\\r\\n                [src]=\\\"featuredAsset | assetPreview:'small'\\\"\\r\\n                (click)=\\\"previewAsset(featuredAsset)\\\"\\r\\n            />\\r\\n            <div class=\\\"placeholder\\\" *ngIf=\\\"!featuredAsset\\\" (click)=\\\"selectAssets()\\\">\\r\\n                <clr-icon shape=\\\"image\\\" size=\\\"128\\\"></clr-icon>\\r\\n                <div>{{ 'catalog.no-featured-asset' | translate }}</div>\\r\\n            </div>\\r\\n        </div>\\r\\n    </div>\\r\\n    <div class=\\\"card-block\\\"><ng-container *ngTemplateOutlet=\\\"assetList\\\"></ng-container></div>\\r\\n    <div class=\\\"card-footer\\\" *vdrIfPermissions=\\\"updatePermissions\\\">\\r\\n        <button class=\\\"btn\\\" (click)=\\\"selectAssets()\\\">\\r\\n            <clr-icon shape=\\\"attachment\\\"></clr-icon>\\r\\n            {{ 'asset.add-asset' | translate }}\\r\\n        </button>\\r\\n    </div>\\r\\n</div>\\r\\n\\r\\n<ng-template #compactView>\\r\\n    <div class=\\\"featured-asset compact\\\">\\r\\n        <img\\r\\n            *ngIf=\\\"featuredAsset\\\"\\r\\n            [src]=\\\"featuredAsset | assetPreview:'thumb'\\\"\\r\\n            (click)=\\\"previewAsset(featuredAsset)\\\"\\r\\n        />\\r\\n\\r\\n        <div class=\\\"placeholder\\\" *ngIf=\\\"!featuredAsset\\\" (click)=\\\"selectAssets()\\\"><clr-icon shape=\\\"image\\\" size=\\\"150\\\"></clr-icon></div>\\r\\n    </div>\\r\\n    <ng-container *ngTemplateOutlet=\\\"assetList\\\"></ng-container>\\r\\n    <button\\r\\n        *vdrIfPermissions=\\\"updatePermissions\\\"\\r\\n        class=\\\"compact-select btn btn-icon btn-sm btn-block\\\"\\r\\n        [title]=\\\"'asset.add-asset' | translate\\\"\\r\\n        (click)=\\\"selectAssets()\\\"\\r\\n    >\\r\\n        <clr-icon shape=\\\"attachment\\\"></clr-icon>\\r\\n        {{ 'asset.add-asset' | translate }}\\r\\n    </button>\\r\\n</ng-template>\\r\\n\\r\\n<ng-template #assetList>\\r\\n    <div class=\\\"all-assets\\\" [class.compact]=\\\"compact\\\" cdkDropListGroup>\\r\\n        <div\\r\\n            *ngFor=\\\"let asset of assets; let index = index\\\"\\r\\n            class=\\\"drop-list\\\"\\r\\n            cdkDropList\\r\\n            cdkDropListOrientation=\\\"horizontal\\\"\\r\\n            [cdkDropListData]=\\\"index\\\"\\r\\n            [cdkDropListDisabled]=\\\"!(updatePermissions | hasPermission)\\\"\\r\\n            (cdkDropListDropped)=\\\"dropListDropped($event)\\\"\\r\\n        >\\r\\n            <vdr-dropdown cdkDrag>\\r\\n                <div\\r\\n                    class=\\\"asset-thumb\\\"\\r\\n                    vdrDropdownTrigger\\r\\n                    [class.featured]=\\\"isFeatured(asset)\\\"\\r\\n                    [title]=\\\"\\\"\\r\\n                    tabindex=\\\"0\\\"\\r\\n                >\\r\\n                    <img [src]=\\\"asset | assetPreview:'tiny'\\\" />\\r\\n                </div>\\r\\n                <vdr-dropdown-menu vdrPosition=\\\"bottom-right\\\">\\r\\n                    <button type=\\\"button\\\" vdrDropdownItem (click)=\\\"previewAsset(asset)\\\">\\r\\n                        {{ 'asset.preview' | translate }}\\r\\n                    </button>\\r\\n                    <button\\r\\n                        type=\\\"button\\\"\\r\\n                        [disabled]=\\\"isFeatured(asset) || !(updatePermissions | hasPermission)\\\"\\r\\n                        vdrDropdownItem\\r\\n                        (click)=\\\"setAsFeatured(asset)\\\"\\r\\n                    >\\r\\n                        {{ 'asset.set-as-featured-asset' | translate }}\\r\\n                    </button>\\r\\n                    <div class=\\\"dropdown-divider\\\"></div>\\r\\n                    <button\\r\\n                        type=\\\"button\\\"\\r\\n                        class=\\\"remove-asset\\\"\\r\\n                        vdrDropdownItem\\r\\n                        [disabled]=\\\"!(updatePermissions | hasPermission)\\\"\\r\\n                        (click)=\\\"removeAsset(asset)\\\"\\r\\n                    >\\r\\n                        {{ 'asset.remove-asset' | translate }}\\r\\n                    </button>\\r\\n                </vdr-dropdown-menu>\\r\\n            </vdr-dropdown>\\r\\n        </div>\\r\\n    </div>\\r\\n</ng-template>\\r\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\":host{width:340px;display:block}:host.compact{width:162px}.placeholder{text-align:center;color:var(--color-grey-300)}.featured-asset{text-align:center;background:var(--color-component-bg-200);padding:6px;cursor:pointer;border-radius:var(--border-radius-img)}.featured-asset img{border-radius:var(--border-radius-img)}.featured-asset.compact{width:100%;min-height:40px;position:relative;padding:6px}.featured-asset .compact-select{position:absolute;bottom:6px;right:6px;margin:0}.all-assets{display:flex;flex-wrap:wrap}.all-assets .drop-list{min-width:60px}.all-assets .asset-thumb{margin:3px;padding:0;border:2px solid var(--color-component-border-100);border-radius:var(--border-radius-img);cursor:pointer}.all-assets .asset-thumb img{width:50px;height:50px;border-radius:var(--border-radius-img)}.all-assets .asset-thumb.featured{border-color:var(--color-primary-500);border-radius:calc(var(--border-radius-img) + 2px)}.all-assets .remove-asset{color:var(--color-warning-500)}.all-assets.compact .drop-list{min-width:54px}.all-assets.compact .asset-thumb{margin:1px;border-width:1px}.all-assets.compact .cdk-drag-placeholder{width:50px}.all-assets.compact .cdk-drag-placeholder .asset-thumb{width:50px}.cdk-drag-animating{transition:transform .25s cubic-bezier(0,0,.2,1)}.example-box:last-child{border:none}.all-assets.cdk-drop-list-dragging vdr-dropdown:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}.cdk-drop-list-dragging>*:not(.cdk-drag-placeholder){display:none}\\n\"]\n            }]\n    }], function () { return [{ type: ngcc2.ModalService }, { type: ngcc0.ChangeDetectorRef }]; }, { compact: [{\n            type: HostBinding,\n            args: ['class.compact']\n        }, {\n            type: Input\n        }], change: [{\n            type: Output\n        }], assetsSetter: [{\n            type: Input,\n            args: ['assets']\n        }], featuredAsset: [{\n            type: Input\n        }], updatePermissions: [{\n            type: Input\n        }] }); })();\n\nclass AssignToChannelDialogComponent {\r\n    // assigned by ModalService.fromComponent() call\r\n    constructor(dataService, notificationService) {\r\n        this.dataService = dataService;\r\n        this.notificationService = notificationService;\r\n        this.selectedChannelIdControl = new FormControl();\r\n    }\r\n    ngOnInit() {\r\n        const activeChannelId$ = this.dataService.client\r\n            .userStatus()\r\n            .mapSingle(({ userStatus }) => userStatus.activeChannelId);\r\n        const allChannels$ = this.dataService.settings.getChannels().mapSingle(data => data.channels);\r\n        combineLatest(activeChannelId$, allChannels$).subscribe(([activeChannelId, channels]) => {\r\n            // tslint:disable-next-line:no-non-null-assertion\r\n            this.currentChannel = channels.find(c => c.id === activeChannelId);\r\n            this.availableChannels = channels;\r\n        });\r\n        this.selectedChannelIdControl.valueChanges.subscribe(ids => {\r\n            this.selectChannel(ids);\r\n        });\r\n    }\r\n    selectChannel(channelIds) {\r\n        this.selectedChannel = this.availableChannels.find(c => c.id === channelIds[0]);\r\n    }\r\n    assign() {\r\n        const selectedChannel = this.selectedChannel;\r\n        if (selectedChannel) {\r\n            this.resolveWith(selectedChannel);\r\n        }\r\n    }\r\n    cancel() {\r\n        this.resolveWith();\r\n    }\r\n}\nAssignToChannelDialogComponent.fac = function AssignToChannelDialogComponent_Factory(t) { return new (t || AssignToChannelDialogComponent)(ngcc0.directiveInject(ngcc2.DataService), ngcc0.directiveInject(ngcc2.NotificationService)); };\nAssignToChannelDialogComponent.cmp = /*@__PURE__*/ ngcc0.defineComponent({ type: AssignToChannelDialogComponent, selectors: [[\"vdr-assign-to-channel-dialog\"]], decls: 7, vars: 6, consts: [[\"vdrDialogTitle\", \"\"], [1, \"mb4\"], [\"clrInput\", \"\", 3, \"multiple\", \"includeDefaultChannel\", \"formControl\"], [\"vdrDialogButtons\", \"\"], [\"type\", \"button\", 1, \"btn\", 3, \"click\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", 3, \"disabled\", \"click\"], [3, \"ngIf\", \"ngIfElse\"], [\"noSelection\", \"\"]], template: function AssignToChannelDialogComponent_Template(rf, ctx) { if (rf & 1) {\n        ngcc0.template(0, AssignToChannelDialogComponent_ng_template_0_Template, 2, 3, \"ng-template\", 0);\n        ngcc0.elementStart(1, \"clr-input-container\", 1);\n        ngcc0.elementStart(2, \"label\");\n        ngcc0.text(3);\n        ngcc0.pipe(4, \"translate\");\n        ngcc0.elementEnd();\n        ngcc0.element(5, \"vdr-channel-assignment-control\", 2);\n        ngcc0.elementEnd();\n        ngcc0.template(6, AssignToChannelDialogComponent_ng_template_6_Template, 7, 6, \"ng-template\", 3);\n    } if (rf & 2) {\n        ngcc0.advance(3);\n        ngcc0.textInterpolate(ngcc0.pipeBind1(4, 4, \"common.channel\"));\n        ngcc0.advance(2);\n        ngcc0.property(\"multiple\", false)(\"includeDefaultChannel\", false)(\"formControl\", ctx.selectedChannelIdControl);\n    } }, directives: [ngcc2.DialogTitleDirective, ngcc7.ClrInputContainer, ngcc7.ClrLabel, ngcc2.ChannelAssignmentControlComponent, ngcc7.ClrInput, ngcc3.NgControlStatus, ngcc3.FormControlDirective, ngcc2.DialogButtonsDirective, ngcc4.NgIf], pipes: [ngcc5.TranslatePipe], styles: [\"vdr-channel-assignment-control[_ngcontent-%COMP%]{min-width:200px}\"], changeDetection: 0 });\r\nAssignToChannelDialogComponent.ctorParameters = () => [\r\n    { type: DataService },\r\n    { type: NotificationService }\r\n];\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ngcc0.setClassMetadata(AssignToChannelDialogComponent, [{\n        type: Component,\n        args: [{\n                selector: 'vdr-assign-to-channel-dialog',\n                template: \"<ng-template vdrDialogTitle>\\r\\n    {{ 'catalog.assign-to-channel' | translate }}\\r\\n</ng-template>\\r\\n<clr-input-container class=\\\"mb4\\\">\\r\\n    <label>{{ 'common.channel' | translate }}</label>\\r\\n    <vdr-channel-assignment-control\\r\\n        clrInput\\r\\n        [multiple]=\\\"false\\\"\\r\\n        [includeDefaultChannel]=\\\"false\\\"\\r\\n        [formControl]=\\\"selectedChannelIdControl\\\"\\r\\n    ></vdr-channel-assignment-control>\\r\\n</clr-input-container>\\r\\n\\r\\n<ng-template vdrDialogButtons>\\r\\n    <button type=\\\"button\\\" class=\\\"btn\\\" (click)=\\\"cancel()\\\">{{ 'common.cancel' | translate }}</button>\\r\\n    <button type=\\\"submit\\\" (click)=\\\"assign()\\\" [disabled]=\\\"!selectedChannel\\\" class=\\\"btn btn-primary\\\">\\r\\n        <ng-template [ngIf]=\\\"selectedChannel\\\" [ngIfElse]=\\\"noSelection\\\">\\r\\n            {{ 'catalog.assign-to-named-channel' | translate: { channelCode: selectedChannel?.code } }}\\r\\n        </ng-template>\\r\\n        <ng-template #noSelection>\\r\\n            {{ 'catalog.no-channel-selected' | translate }}\\r\\n        </ng-template>\\r\\n    </button>\\r\\n</ng-template>\\r\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\"vdr-channel-assignment-control{min-width:200px}\\n\"]\n            }]\n    }], function () { return [{ type: ngcc2.DataService }, { type: ngcc2.NotificationService }]; }, null); })();\n\nconst GET_PRODUCTS_WITH_FACET_VALUES_BY_IDS = gql `\r\n    query GetProductsWithFacetValuesByIds($ids: [String!]!) {\r\n        products(options: { filter: { id: { in: $ids } } }) {\r\n            items {\r\n                id\r\n                name\r\n                facetValues {\r\n                    id\r\n                    name\r\n                    code\r\n                    facet {\r\n                        id\r\n                        name\r\n                        code\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n`;\r\nconst GET_VARIANTS_WITH_FACET_VALUES_BY_IDS = gql `\r\n    query GetVariantsWithFacetValuesByIds($ids: [String!]!) {\r\n        productVariants(options: { filter: { id: { in: $ids } } }) {\r\n            items {\r\n                id\r\n                name\r\n                sku\r\n                facetValues {\r\n                    id\r\n                    name\r\n                    code\r\n                    facet {\r\n                        id\r\n                        name\r\n                        code\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n`;\r\nconst UPDATE_PRODUCTS_BULK = gql `\r\n    mutation UpdateProductsBulk($input: [UpdateProductInput!]!) {\r\n        updateProducts(input: $input) {\r\n            id\r\n            name\r\n            facetValues {\r\n                id\r\n                name\r\n                code\r\n            }\r\n        }\r\n    }\r\n`;\r\nconst UPDATE_VARIANTS_BULK = gql `\r\n    mutation UpdateVariantsBulk($input: [UpdateProductVariantInput!]!) {\r\n        updateProductVariants(input: $input) {\r\n            id\r\n            name\r\n            facetValues {\r\n                id\r\n                name\r\n                code\r\n            }\r\n        }\r\n    }\r\n`;\n\nclass BulkAddFacetValuesDialogComponent {\r\n    constructor(dataService, changeDetectorRef) {\r\n        this.dataService = dataService;\r\n        this.changeDetectorRef = changeDetectorRef;\r\n        /* provided by call to ModalService */\r\n        this.mode = 'product';\r\n        this.facets = [];\r\n        this.state = 'loading';\r\n        this.selectedValues = [];\r\n        this.items = [];\r\n        this.facetValuesRemoved = false;\r\n    }\r\n    ngOnInit() {\r\n        var _a, _b;\r\n        const fetchData$ = this.mode === 'product'\r\n            ? this.dataService\r\n                .query(GET_PRODUCTS_WITH_FACET_VALUES_BY_IDS, {\r\n                ids: (_a = this.ids) !== null && _a !== void 0 ? _a : [],\r\n            })\r\n                .mapSingle(({ products }) => products.items.map(p => (Object.assign(Object.assign({}, p), { facetValues: [...p.facetValues] }))))\r\n            : this.dataService\r\n                .query(GET_VARIANTS_WITH_FACET_VALUES_BY_IDS, {\r\n                ids: (_b = this.ids) !== null && _b !== void 0 ? _b : [],\r\n            })\r\n                .mapSingle(({ productVariants }) => productVariants.items.map(p => (Object.assign(Object.assign({}, p), { facetValues: [...p.facetValues] }))));\r\n        this.subscription = fetchData$.subscribe({\r\n            next: items => {\r\n                this.items = items;\r\n                this.state = 'ready';\r\n                this.changeDetectorRef.markForCheck();\r\n            },\r\n        });\r\n    }\r\n    ngOnDestroy() {\r\n        var _a;\r\n        (_a = this.subscription) === null || _a === void 0 ? void 0 : _a.unsubscribe();\r\n    }\r\n    cancel() {\r\n        this.resolveWith();\r\n    }\r\n    removeFacetValue(item, facetValueId) {\r\n        item.facetValues = item.facetValues.filter(fv => fv.id !== facetValueId);\r\n        this.facetValuesRemoved = true;\r\n    }\r\n    addFacetValues() {\r\n        var _a, _b;\r\n        const selectedFacetValueIds = this.selectedValues.map(sv => sv.id);\r\n        this.state = 'saving';\r\n        const save$ = this.mode === 'product'\r\n            ? this.dataService.mutate(UPDATE_PRODUCTS_BULK, {\r\n                input: (_a = this.items) === null || _a === void 0 ? void 0 : _a.map(product => ({\r\n                    id: product.id,\r\n                    facetValueIds: unique([\r\n                        ...product.facetValues.map(fv => fv.id),\r\n                        ...selectedFacetValueIds,\r\n                    ]),\r\n                })),\r\n            })\r\n            : this.dataService.mutate(UPDATE_VARIANTS_BULK, {\r\n                input: (_b = this.items) === null || _b === void 0 ? void 0 : _b.map(product => ({\r\n                    id: product.id,\r\n                    facetValueIds: unique([\r\n                        ...product.facetValues.map(fv => fv.id),\r\n                        ...selectedFacetValueIds,\r\n                    ]),\r\n                })),\r\n            });\r\n        return save$.subscribe(result => {\r\n            this.resolveWith(this.selectedValues);\r\n        });\r\n    }\r\n}\nBulkAddFacetValuesDialogComponent.fac = function BulkAddFacetValuesDialogComponent_Factory(t) { return new (t || BulkAddFacetValuesDialogComponent)(ngcc0.directiveInject(ngcc2.DataService), ngcc0.directiveInject(ngcc0.ChangeDetectorRef)); };\nBulkAddFacetValuesDialogComponent.cmp = /*@__PURE__*/ ngcc0.defineComponent({ type: BulkAddFacetValuesDialogComponent, selectors: [[\"vdr-bulk-add-facet-values-dialog\"]], decls: 11, vars: 6, consts: [[\"vdrDialogTitle\", \"\"], [1, \"flex\"], [1, \"flex\", \"center\"], [1, \"mr2\"], [3, \"facets\", \"selectedValuesChange\"], [\"class\", \"table\", 4, \"ngIf\", \"ngIfElse\"], [\"placeholder\", \"\"], [\"vdrDialogButtons\", \"\"], [1, \"table\"], [4, \"ngFor\", \"ngForOf\"], [1, \"left\", \"align-middle\"], [\"class\", \"sku\", 4, \"ngIf\"], [1, \"left\"], [3, \"facetValue\", \"remove\", 4, \"ngFor\", \"ngForOf\"], [1, \"sku\"], [3, \"facetValue\", \"remove\"], [1, \"loading\"], [\"type\", \"button\", 1, \"btn\", 3, \"click\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", 3, \"disabled\", \"click\"]], template: function BulkAddFacetValuesDialogComponent_Template(rf, ctx) { if (rf & 1) {\n        ngcc0.template(0, BulkAddFacetValuesDialogComponent_ng_template_0_Template, 2, 3, \"ng-template\", 0);\n        ngcc0.elementStart(1, \"div\", 1);\n        ngcc0.elementStart(2, \"div\", 2);\n        ngcc0.elementStart(3, \"div\", 3);\n        ngcc0.text(4);\n        ngcc0.pipe(5, \"translate\");\n        ngcc0.elementEnd();\n        ngcc0.elementStart(6, \"vdr-facet-value-selector\", 4);\n        ngcc0.listener(\"selectedValuesChange\", function BulkAddFacetValuesDialogComponent_Template_vdr_facet_value_selector_selectedValuesChange_6_listener($event) { return ctx.selectedValues = $event; });\n        ngcc0.elementEnd();\n        ngcc0.elementEnd();\n        ngcc0.elementEnd();\n        ngcc0.template(7, BulkAddFacetValuesDialogComponent_table_7_Template, 3, 1, \"table\", 5);\n        ngcc0.template(8, BulkAddFacetValuesDialogComponent_ng_template_8_Template, 2, 0, \"ng-template\", null, 6, ngcc0.templateRefExtractor);\n        ngcc0.template(10, BulkAddFacetValuesDialogComponent_ng_template_10_Template, 6, 7, \"ng-template\", 7);\n    } if (rf & 2) {\n        const _r2 = ngcc0.reference(9);\n        ngcc0.advance(4);\n        ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(5, 4, \"catalog.add-facet-value\"), \" \");\n        ngcc0.advance(2);\n        ngcc0.property(\"facets\", ctx.facets);\n        ngcc0.advance(1);\n        ngcc0.property(\"ngIf\", ctx.state !== \"loading\")(\"ngIfElse\", _r2);\n    } }, directives: [ngcc2.DialogTitleDirective, ngcc2.FacetValueSelectorComponent, ngcc4.NgIf, ngcc2.DialogButtonsDirective, ngcc4.NgForOf, ngcc2.FacetValueChipComponent, ngcc7.ClrSpinner], pipes: [ngcc5.TranslatePipe], styles: [\".loading[_ngcontent-%COMP%]{min-height:25vh;display:flex;justify-content:center;align-items:center}.sku[_ngcontent-%COMP%]{color:var(--color-text-300)}\"], changeDetection: 0 });\r\nBulkAddFacetValuesDialogComponent.ctorParameters = () => [\r\n    { type: DataService },\r\n    { type: ChangeDetectorRef }\r\n];\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ngcc0.setClassMetadata(BulkAddFacetValuesDialogComponent, [{\n        type: Component,\n        args: [{\n                selector: 'vdr-bulk-add-facet-values-dialog',\n                template: \"<ng-template vdrDialogTitle>\\r\\n    {{ 'catalog.edit-facet-values' | translate }}\\r\\n</ng-template>\\r\\n\\r\\n<div class=\\\"flex\\\">\\r\\n    <div class=\\\"flex center\\\">\\r\\n        <div class=\\\"mr2\\\">\\r\\n            {{ 'catalog.add-facet-value' | translate }}\\r\\n        </div>\\r\\n        <vdr-facet-value-selector\\r\\n            [facets]=\\\"facets\\\"\\r\\n            (selectedValuesChange)=\\\"selectedValues = $event\\\"\\r\\n        ></vdr-facet-value-selector>\\r\\n    </div>\\r\\n</div>\\r\\n\\r\\n<table class=\\\"table\\\" *ngIf=\\\"state !== 'loading'; else placeholder\\\">\\r\\n    <tbody>\\r\\n        <tr *ngFor=\\\"let item of items\\\">\\r\\n            <td class=\\\"left align-middle\\\">\\r\\n                <div>{{ item.name }}</div>\\r\\n                <div *ngIf=\\\"item.sku\\\" class=\\\"sku\\\">{{ item.sku }}</div>\\r\\n            </td>\\r\\n            <td class=\\\"left\\\">\\r\\n                <vdr-facet-value-chip\\r\\n                    *ngFor=\\\"let facetValue of item.facetValues\\\"\\r\\n                    [facetValue]=\\\"facetValue\\\"\\r\\n                    (remove)=\\\"removeFacetValue(item, facetValue.id)\\\"\\r\\n                ></vdr-facet-value-chip>\\r\\n            </td>\\r\\n        </tr>\\r\\n    </tbody>\\r\\n</table>\\r\\n\\r\\n<ng-template #placeholder>\\r\\n    <div class=\\\"loading\\\">\\r\\n    <clr-spinner></clr-spinner>\\r\\n    </div>\\r\\n</ng-template>\\r\\n\\r\\n<ng-template vdrDialogButtons>\\r\\n    <button type=\\\"button\\\" class=\\\"btn\\\" (click)=\\\"cancel()\\\">{{ 'common.cancel' | translate }}</button>\\r\\n    <button\\r\\n        type=\\\"submit\\\"\\r\\n        (click)=\\\"addFacetValues()\\\"\\r\\n        [disabled]=\\\"selectedValues.length === 0 && facetValuesRemoved === false\\\"\\r\\n        class=\\\"btn btn-primary\\\"\\r\\n    >\\r\\n        {{ 'common.update' | translate }}\\r\\n    </button>\\r\\n</ng-template>\\r\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\".loading{min-height:25vh;display:flex;justify-content:center;align-items:center}.sku{color:var(--color-text-300)}\\n\"]\n            }]\n    }], function () { return [{ type: ngcc2.DataService }, { type: ngcc0.ChangeDetectorRef }]; }, null); })();\n\nclass CollectionContentsComponent {\r\n    constructor(route, router, dataService) {\r\n        this.route = route;\r\n        this.router = router;\r\n        this.dataService = dataService;\r\n        this.previewUpdatedFilters = false;\r\n        this.filterTermControl = new FormControl('');\r\n        this.isLoading = false;\r\n        this.collectionIdChange$ = new BehaviorSubject('');\r\n        this.parentIdChange$ = new BehaviorSubject('');\r\n        this.filterChanges$ = new BehaviorSubject([]);\r\n        this.refresh$ = new BehaviorSubject(true);\r\n        this.destroy$ = new Subject();\r\n    }\r\n    ngOnInit() {\r\n        this.contentsCurrentPage$ = this.route.queryParamMap.pipe(map(qpm => qpm.get('contentsPage')), map(page => (!page ? 1 : +page)), startWith(1), distinctUntilChanged());\r\n        this.contentsItemsPerPage$ = this.route.queryParamMap.pipe(map(qpm => qpm.get('contentsPerPage')), map(perPage => (!perPage ? 10 : +perPage)), startWith(10), distinctUntilChanged());\r\n        const filterTerm$ = this.filterTermControl.valueChanges.pipe(debounceTime(250), tap(() => this.setContentsPageNumber(1)), startWith(''));\r\n        const filterChanges$ = this.filterChanges$.asObservable().pipe(filter(() => this.previewUpdatedFilters), tap(() => this.setContentsPageNumber(1)), startWith([]));\r\n        const fetchUpdate$ = combineLatest(this.collectionIdChange$, this.parentIdChange$, this.contentsCurrentPage$, this.contentsItemsPerPage$, filterTerm$, filterChanges$, this.refresh$);\r\n        const collection$ = fetchUpdate$.pipe(takeUntil(this.destroy$), tap(() => (this.isLoading = true)), debounceTime(50), switchMap(([id, parentId, currentPage, itemsPerPage, filterTerm, filters]) => {\r\n            const take = itemsPerPage;\r\n            const skip = (currentPage - 1) * itemsPerPage;\r\n            if (filters.length && this.previewUpdatedFilters) {\r\n                const filterClause = filterTerm\r\n                    ? { name: { contains: filterTerm } }\r\n                    : undefined;\r\n                return this.dataService.collection\r\n                    .previewCollectionVariants({\r\n                    parentId,\r\n                    filters,\r\n                }, {\r\n                    take,\r\n                    skip,\r\n                    filter: filterClause,\r\n                })\r\n                    .mapSingle(data => data.previewCollectionVariants)\r\n                    .pipe(catchError(() => of({ items: [], totalItems: 0 })));\r\n            }\r\n            else if (id) {\r\n                return this.dataService.collection\r\n                    .getCollectionContents(id, take, skip, filterTerm)\r\n                    .mapSingle(data => { var _a; return (_a = data.collection) === null || _a === void 0 ? void 0 : _a.productVariants; });\r\n            }\r\n            else {\r\n                return of(null);\r\n            }\r\n        }), tap(() => (this.isLoading = false)), finalize(() => (this.isLoading = false)));\r\n        this.contents$ = collection$.pipe(map(result => (result ? result.items : [])));\r\n        this.contentsTotalItems$ = collection$.pipe(map(result => (result ? result.totalItems : 0)));\r\n    }\r\n    ngOnChanges(changes) {\r\n        if ('collectionId' in changes) {\r\n            this.collectionIdChange$.next(changes.collectionId.currentValue);\r\n        }\r\n        if ('parentId' in changes) {\r\n            this.parentIdChange$.next(changes.parentId.currentValue);\r\n        }\r\n        if ('updatedFilters' in changes) {\r\n            if (this.updatedFilters) {\r\n                this.filterChanges$.next(this.updatedFilters);\r\n            }\r\n        }\r\n    }\r\n    ngOnDestroy() {\r\n        this.destroy$.next();\r\n        this.destroy$.complete();\r\n    }\r\n    setContentsPageNumber(page) {\r\n        this.setParam('contentsPage', page);\r\n    }\r\n    setContentsItemsPerPage(perPage) {\r\n        this.setParam('contentsPerPage', perPage);\r\n    }\r\n    refresh() {\r\n        this.refresh$.next(true);\r\n    }\r\n    setParam(key, value) {\r\n        this.router.navigate(['./'], {\r\n            relativeTo: this.route,\r\n            queryParams: {\r\n                [key]: value,\r\n            },\r\n            queryParamsHandling: 'merge',\r\n            replaceUrl: true,\r\n        });\r\n    }\r\n}\nCollectionContentsComponent.fac = function CollectionContentsComponent_Factory(t) { return new (t || CollectionContentsComponent)(ngcc0.directiveInject(ngcc1.ActivatedRoute), ngcc0.directiveInject(ngcc1.Router), ngcc0.directiveInject(ngcc2.DataService)); };\nCollectionContentsComponent.cmp = /*@__PURE__*/ ngcc0.defineComponent({ type: CollectionContentsComponent, selectors: [[\"vdr-collection-contents\"]], contentQueries: function CollectionContentsComponent_ContentQueries(rf, ctx, dirIndex) { if (rf & 1) {\n        ngcc0.contentQuery(dirIndex, TemplateRef, 7);\n    } if (rf & 2) {\n        let _t;\n        ngcc0.queryRefresh(_t = ngcc0.loadQuery()) && (ctx.headerTemplate = _t.first);\n    } }, inputs: { previewUpdatedFilters: \"previewUpdatedFilters\", collectionId: \"collectionId\", parentId: \"parentId\", updatedFilters: \"updatedFilters\" }, features: [ngcc0.NgOnChangesFeature], decls: 14, vars: 26, consts: [[1, \"contents-header\"], [1, \"header-title-row\"], [4, \"ngTemplateOutlet\", \"ngTemplateOutletContext\"], [\"type\", \"text\", 3, \"placeholder\", \"formControl\"], [1, \"table-wrapper\"], [1, \"progress\", \"loop\"], [3, \"items\", \"itemsPerPage\", \"totalItems\", \"currentPage\", \"pageChange\", \"itemsPerPageChange\"], [1, \"left\", \"align-middle\"], [1, \"sku\"], [1, \"right\", \"align-middle\"], [\"iconShape\", \"edit\", 3, \"label\", \"linkTo\"]], template: function CollectionContentsComponent_Template(rf, ctx) { if (rf & 1) {\n        ngcc0.elementStart(0, \"div\", 0);\n        ngcc0.elementStart(1, \"div\", 1);\n        ngcc0.template(2, CollectionContentsComponent_ng_container_2_Template, 1, 0, \"ng-container\", 2);\n        ngcc0.pipe(3, \"async\");\n        ngcc0.elementEnd();\n        ngcc0.element(4, \"input\", 3);\n        ngcc0.pipe(5, \"translate\");\n        ngcc0.elementEnd();\n        ngcc0.elementStart(6, \"div\", 4);\n        ngcc0.element(7, \"div\", 5);\n        ngcc0.elementStart(8, \"vdr-data-table\", 6);\n        ngcc0.listener(\"pageChange\", function CollectionContentsComponent_Template_vdr_data_table_pageChange_8_listener($event) { return ctx.setContentsPageNumber($event); })(\"itemsPerPageChange\", function CollectionContentsComponent_Template_vdr_data_table_itemsPerPageChange_8_listener($event) { return ctx.setContentsItemsPerPage($event); });\n        ngcc0.pipe(9, \"async\");\n        ngcc0.pipe(10, \"async\");\n        ngcc0.pipe(11, \"async\");\n        ngcc0.pipe(12, \"async\");\n        ngcc0.template(13, CollectionContentsComponent_ng_template_13_Template, 8, 10, \"ng-template\");\n        ngcc0.elementEnd();\n        ngcc0.elementEnd();\n    } if (rf & 2) {\n        ngcc0.advance(2);\n        ngcc0.property(\"ngTemplateOutlet\", ctx.headerTemplate)(\"ngTemplateOutletContext\", ngcc0.pureFunction1(24, _c29, ngcc0.pipeBind1(3, 12, ctx.contentsTotalItems$)));\n        ngcc0.advance(2);\n        ngcc0.property(\"placeholder\", ngcc0.pipeBind1(5, 14, \"catalog.filter-by-name\"))(\"formControl\", ctx.filterTermControl);\n        ngcc0.advance(3);\n        ngcc0.classProp(\"visible\", ctx.isLoading);\n        ngcc0.advance(1);\n        ngcc0.classProp(\"loading\", ctx.isLoading);\n        ngcc0.property(\"items\", ngcc0.pipeBind1(9, 16, ctx.contents$))(\"itemsPerPage\", ngcc0.pipeBind1(10, 18, ctx.contentsItemsPerPage$))(\"totalItems\", ngcc0.pipeBind1(11, 20, ctx.contentsTotalItems$))(\"currentPage\", ngcc0.pipeBind1(12, 22, ctx.contentsCurrentPage$));\n    } }, directives: [ngcc4.NgTemplateOutlet, ngcc2.FormFieldControlDirective, ngcc3.DefaultValueAccessor, ngcc3.NgControlStatus, ngcc3.FormControlDirective, ngcc2.DataTableComponent, ngcc2.TableRowActionComponent], pipes: [ngcc4.AsyncPipe, ngcc5.TranslatePipe], styles: [\".contents-header[_ngcontent-%COMP%]{background-color:var(--color-component-bg-100);position:sticky;top:0;padding:6px;z-index:1;border-bottom:1px solid var(--color-component-border-200)}.contents-header[_ngcontent-%COMP%]   .header-title-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.contents-header[_ngcontent-%COMP%]   .clr-input[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]{display:block}[_nghost-%COMP%]     table{margin-top:-1px}vdr-data-table[_ngcontent-%COMP%]{opacity:1;transition:opacity .3s}vdr-data-table.loading[_ngcontent-%COMP%]{opacity:.5}.table-wrapper[_ngcontent-%COMP%]{position:relative}.progress[_ngcontent-%COMP%]{position:absolute;top:0;left:0;overflow:hidden;height:6px;opacity:0;transition:opacity .1s}.progress.visible[_ngcontent-%COMP%]{opacity:1}.sku[_ngcontent-%COMP%]{color:var(--color-text-200)}\"], changeDetection: 0 });\r\nCollectionContentsComponent.ctorParameters = () => [\r\n    { type: ActivatedRoute },\r\n    { type: Router },\r\n    { type: DataService }\r\n];\r\nCollectionContentsComponent.propDecorators = {\r\n    collectionId: [{ type: Input }],\r\n    parentId: [{ type: Input }],\r\n    updatedFilters: [{ type: Input }],\r\n    previewUpdatedFilters: [{ type: Input }],\r\n    headerTemplate: [{ type: ContentChild, args: [TemplateRef, { static: true },] }]\r\n};\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ngcc0.setClassMetadata(CollectionContentsComponent, [{\n        type: Component,\n        args: [{\n                selector: 'vdr-collection-contents',\n                template: \"<div class=\\\"contents-header\\\">\\r\\n    <div class=\\\"header-title-row\\\">\\r\\n        <ng-container\\r\\n            *ngTemplateOutlet=\\\"headerTemplate; context: { $implicit: contentsTotalItems$ | async }\\\"\\r\\n        ></ng-container>\\r\\n    </div>\\r\\n    <input\\r\\n        type=\\\"text\\\"\\r\\n        [placeholder]=\\\"'catalog.filter-by-name' | translate\\\"\\r\\n        [formControl]=\\\"filterTermControl\\\"\\r\\n    />\\r\\n</div>\\r\\n<div class=\\\"table-wrapper\\\">\\r\\n    <div class=\\\"progress loop\\\" [class.visible]=\\\"isLoading\\\"></div>\\r\\n    <vdr-data-table\\r\\n        [class.loading]=\\\"isLoading\\\"\\r\\n        [items]=\\\"contents$ | async\\\"\\r\\n        [itemsPerPage]=\\\"contentsItemsPerPage$ | async\\\"\\r\\n        [totalItems]=\\\"contentsTotalItems$ | async\\\"\\r\\n        [currentPage]=\\\"contentsCurrentPage$ | async\\\"\\r\\n        (pageChange)=\\\"setContentsPageNumber($event)\\\"\\r\\n        (itemsPerPageChange)=\\\"setContentsItemsPerPage($event)\\\"\\r\\n    >\\r\\n        <ng-template let-variant=\\\"item\\\">\\r\\n            <td class=\\\"left align-middle\\\">{{ variant.name }}</td>\\r\\n            <td class=\\\"left align-middle\\\"><small class=\\\"sku\\\">{{ variant.sku }}</small></td>\\r\\n            <td class=\\\"right align-middle\\\">\\r\\n                <vdr-table-row-action\\r\\n                    iconShape=\\\"edit\\\"\\r\\n                    [label]=\\\"'common.edit' | translate\\\"\\r\\n                    [linkTo]=\\\"['/catalog/products', variant.productId, { tab: 'variants' }]\\\"\\r\\n                ></vdr-table-row-action>\\r\\n            </td>\\r\\n        </ng-template>\\r\\n    </vdr-data-table>\\r\\n</div>\\r\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\".contents-header{background-color:var(--color-component-bg-100);position:sticky;top:0;padding:6px;z-index:1;border-bottom:1px solid var(--color-component-border-200)}.contents-header .header-title-row{display:flex;justify-content:space-between;align-items:center}.contents-header .clr-input{width:100%}:host{display:block}:host ::ng-deep table{margin-top:-1px}vdr-data-table{opacity:1;transition:opacity .3s}vdr-data-table.loading{opacity:.5}.table-wrapper{position:relative}.progress{position:absolute;top:0;left:0;overflow:hidden;height:6px;opacity:0;transition:opacity .1s}.progress.visible{opacity:1}.sku{color:var(--color-text-200)}\\n\"]\n            }]\n    }], function () { return [{ type: ngcc1.ActivatedRoute }, { type: ngcc1.Router }, { type: ngcc2.DataService }]; }, { previewUpdatedFilters: [{\n            type: Input\n        }], collectionId: [{\n            type: Input\n        }], parentId: [{\n            type: Input\n        }], updatedFilters: [{\n            type: Input\n        }], headerTemplate: [{\n            type: ContentChild,\n            args: [TemplateRef, { static: true }]\n        }] }); })();\n\nconst 0$2 = userPermissions => userPermissions.includes(Permission.DeleteCollection) ||\r\n    userPermissions.includes(Permission.DeleteCatalog), 1$2 = ({ injector, selection, hostComponent, clearSelection }) => {\r\n    const modalService = injector.get(ModalService);\r\n    const dataService = injector.get(DataService);\r\n    const notificationService = injector.get(NotificationService);\r\n    modalService\r\n        .dialog({\r\n        title: marker('catalog.confirm-bulk-delete-collections'),\r\n        translationVars: {\r\n            count: selection.length,\r\n        },\r\n        buttons: [\r\n            { type: 'secondary', label: marker('common.cancel') },\r\n            { type: 'danger', label: marker('common.delete'), returnValue: true },\r\n        ],\r\n    })\r\n        .pipe(switchMap(response => response\r\n        ? dataService.collection.deleteCollections(unique(selection.map(c => c.id)))\r\n        : EMPTY))\r\n        .subscribe(result => {\r\n        let deleted = 0;\r\n        const errors = [];\r\n        for (const item of result.deleteCollections) {\r\n            if (item.result === DeletionResult.DELETED) {\r\n                deleted++;\r\n            }\r\n            else if (item.message) {\r\n                errors.push(item.message);\r\n            }\r\n        }\r\n        if (0 < deleted) {\r\n            notificationService.success(marker('catalog.notify-bulk-delete-collections-success'), {\r\n                count: deleted,\r\n            });\r\n        }\r\n        if (0 < errors.length) {\r\n            notificationService.error(errors.join('\\n'));\r\n        }\r\n        hostComponent.refresh();\r\n        clearSelection();\r\n    });\r\n};\r\nconst deleteCollectionsBulkAction = {\r\n    location: 'collection-list',\r\n    label: marker('common.delete'),\r\n    icon: 'trash',\r\n    iconClass: 'is-danger',\r\n    requiresPermission: 0$2,\r\n    onClick: 1$2,\r\n};\r\nconst 2$2 = userPermissions => userPermissions.includes(Permission.UpdateCatalog) ||\r\n    userPermissions.includes(Permission.UpdateProduct), 3$2 = ({ injector }) => isMultiChannel(injector.get(DataService)), 4$2 = ({ injector, selection, hostComponent, clearSelection }) => {\r\n    const modalService = injector.get(ModalService);\r\n    const dataService = injector.get(DataService);\r\n    const notificationService = injector.get(NotificationService);\r\n    modalService\r\n        .fromComponent(AssignToChannelDialogComponent, {\r\n        size: 'md',\r\n        locals: {},\r\n    })\r\n        .pipe(switchMap(result => {\r\n        if (result) {\r\n            return dataService.collection\r\n                .assignCollectionsToChannel({\r\n                collectionIds: selection.map(c => c.id),\r\n                channelId: result.id,\r\n            })\r\n                .pipe(mapTo(result));\r\n        }\r\n        else {\r\n            return EMPTY;\r\n        }\r\n    }))\r\n        .subscribe(result => {\r\n        notificationService.success(marker('catalog.assign-collections-to-channel-success'), {\r\n            count: selection.length,\r\n            channelCode: result.code,\r\n        });\r\n        clearSelection();\r\n    });\r\n};\r\nconst assignCollectionsToChannelBulkAction = {\r\n    location: 'collection-list',\r\n    label: marker('catalog.assign-to-channel'),\r\n    icon: 'layers',\r\n    requiresPermission: 2$2,\r\n    isVisible: 3$2,\r\n    onClick: 4$2,\r\n};\r\nconst 5$2 = userPermissions => userPermissions.includes(Permission.UpdateChannel) ||\r\n    userPermissions.includes(Permission.UpdateProduct), 6$2 = ({ injector }) => getChannelCodeFromUserStatus(injector.get(DataService)), 7$2 = ({ injector }) => currentChannelIsNotDefault(injector.get(DataService)), 8$2 = ({ injector, selection, hostComponent, clearSelection }) => {\r\n    const modalService = injector.get(ModalService);\r\n    const dataService = injector.get(DataService);\r\n    const notificationService = injector.get(NotificationService);\r\n    const activeChannelId$ = dataService.client\r\n        .userStatus()\r\n        .mapSingle(({ userStatus }) => userStatus.activeChannelId);\r\n    from(getChannelCodeFromUserStatus(injector.get(DataService)))\r\n        .pipe(switchMap(({ channelCode }) => modalService.dialog({\r\n        title: marker('catalog.remove-from-channel'),\r\n        translationVars: {\r\n            channelCode,\r\n        },\r\n        buttons: [\r\n            { type: 'secondary', label: marker('common.cancel') },\r\n            {\r\n                type: 'danger',\r\n                label: marker('common.remove'),\r\n                returnValue: true,\r\n            },\r\n        ],\r\n    })), switchMap(res => res\r\n        ? activeChannelId$.pipe(switchMap(activeChannelId => activeChannelId\r\n            ? dataService.collection.removeCollectionsFromChannel({\r\n                channelId: activeChannelId,\r\n                collectionIds: selection.map(c => c.id),\r\n            })\r\n            : EMPTY), mapTo(true))\r\n        : of(false)))\r\n        .subscribe(removed => {\r\n        if (removed) {\r\n            clearSelection();\r\n            notificationService.success(marker('catalog.notify-remove-collections-from-channel-success'), {\r\n                count: selection.length,\r\n            });\r\n            hostComponent.refresh();\r\n        }\r\n    });\r\n};\r\nconst removeCollectionsFromChannelBulkAction = {\r\n    location: 'collection-list',\r\n    label: marker('catalog.remove-from-channel'),\r\n    requiresPermission: 5$2,\r\n    getTranslationVars: 6$2,\r\n    icon: 'layers',\r\n    iconClass: 'is-warning',\r\n    isVisible: 7$2,\r\n    onClick: 8$2,\r\n};\n\n/**\r\n * Builds a tree from an array of nodes which have a parent.\r\n * Based on https://stackoverflow.com/a/31247960/772859, modified to preserve ordering.\r\n */\r\nfunction arrayToTree(nodes, currentState, expandedIds = []) {\r\n    var _a, _b;\r\n    const topLevelNodes = [];\r\n    const mappedArr = {};\r\n    const currentStateMap = treeToMap(currentState);\r\n    // First map the nodes of the array to an object -> create a hash table.\r\n    for (const node of nodes) {\r\n        mappedArr[node.id] = Object.assign(Object.assign({}, node), { children: [] });\r\n    }\r\n    for (const id of nodes.map(n => n.id)) {\r\n        if (mappedArr.hasOwnProperty(id)) {\r\n            const mappedElem = mappedArr[id];\r\n            mappedElem.expanded = (_b = (_a = currentStateMap.get(id)) === null || _a === void 0 ? void 0 : _a.expanded) !== null && _b !== void 0 ? _b : expandedIds.includes(id);\r\n            const parent = mappedElem.parent;\r\n            if (!parent) {\r\n                continue;\r\n            }\r\n            // If the element is not at the root level, add it to its parent array of children.\r\n            const parentIsRoot = !mappedArr[parent.id];\r\n            if (!parentIsRoot) {\r\n                if (mappedArr[parent.id]) {\r\n                    mappedArr[parent.id].children.push(mappedElem);\r\n                }\r\n                else {\r\n                    mappedArr[parent.id] = { children: [mappedElem] };\r\n                }\r\n            }\r\n            else {\r\n                topLevelNodes.push(mappedElem);\r\n            }\r\n        }\r\n    }\r\n    // tslint:disable-next-line:no-non-null-assertion\r\n    const rootId = topLevelNodes.length ? topLevelNodes[0].parent.id : undefined;\r\n    return { id: rootId, children: topLevelNodes };\r\n}\r\n/**\r\n * Converts an existing tree (as generated by the arrayToTree function) into a flat\r\n * Map. This is used to persist certain states (e.g. `expanded`) when re-building the\r\n * tree.\r\n */\r\nfunction treeToMap(tree) {\r\n    const nodeMap = new Map();\r\n    function visit(node) {\r\n        nodeMap.set(node.id, node);\r\n        node.children.forEach(visit);\r\n    }\r\n    if (tree) {\r\n        visit(tree);\r\n    }\r\n    return nodeMap;\r\n}\n\nclass CollectionTreeComponent {\r\n    constructor() {\r\n        this.expandAll = false;\r\n        this.expandedIds = [];\r\n        this.rearrange = new EventEmitter();\r\n        this.deleteCollection = new EventEmitter();\r\n        this.allMoveListItems = [];\r\n    }\r\n    ngOnChanges(changes) {\r\n        if ('collections' in changes && this.collections) {\r\n            this.collectionTree = arrayToTree(this.collections, this.collectionTree, this.expandedIds);\r\n            this.allMoveListItems = [];\r\n        }\r\n    }\r\n    onDrop(event) {\r\n        const item = event.item.data;\r\n        const newParent = event.container.data;\r\n        const newParentId = newParent.id;\r\n        if (newParentId == null) {\r\n            throw new Error(`Could not determine the ID of the root Collection`);\r\n        }\r\n        this.rearrange.emit({\r\n            collectionId: item.id,\r\n            parentId: newParentId,\r\n            index: event.currentIndex,\r\n        });\r\n    }\r\n    onMove(event) {\r\n        this.rearrange.emit(event);\r\n    }\r\n    onDelete(id) {\r\n        this.deleteCollection.emit(id);\r\n    }\r\n    getMoveListItems(collection) {\r\n        if (this.allMoveListItems.length === 0) {\r\n            this.allMoveListItems = this.calculateAllMoveListItems();\r\n        }\r\n        return this.allMoveListItems.filter(item => {\r\n            var _a;\r\n            return item.id !== collection.id &&\r\n                !item.ancestorIdPath.has(collection.id) &&\r\n                item.id !== ((_a = collection.parent) === null || _a === void 0 ? void 0 : _a.id);\r\n        });\r\n    }\r\n    calculateAllMoveListItems() {\r\n        const visit = (node, parentPath, ancestorIdPath, output) => {\r\n            const path = parentPath.concat(node.name);\r\n            output.push({ path: path.slice(1).join(' / ') || 'root', id: node.id, ancestorIdPath });\r\n            node.children.forEach(child => visit(child, path, new Set([...ancestorIdPath, node.id]), output));\r\n            return output;\r\n        };\r\n        return visit(this.collectionTree, [], new Set(), []);\r\n    }\r\n    isRootNode(node) {\r\n        return !node.hasOwnProperty('parent');\r\n    }\r\n}\nCollectionTreeComponent.fac = function CollectionTreeComponent_Factory(t) { return new (t || CollectionTreeComponent)(); };\nCollectionTreeComponent.cmp = /*@__PURE__*/ ngcc0.defineComponent({ type: CollectionTreeComponent, selectors: [[\"vdr-collection-tree\"]], inputs: { expandAll: \"expandAll\", expandedIds: \"expandedIds\", collections: \"collections\", activeCollectionId: \"activeCollectionId\", selectionManager: \"selectionManager\" }, outputs: { rearrange: \"rearrange\", deleteCollection: \"deleteCollection\" }, features: [ngcc0.NgOnChangesFeature], decls: 1, vars: 1, consts: [[\"cdkDropListGroup\", \"\", 3, \"expandAll\", \"collectionTree\", \"selectionManager\", \"activeCollectionId\", 4, \"ngIf\"], [\"cdkDropListGroup\", \"\", 3, \"expandAll\", \"collectionTree\", \"selectionManager\", \"activeCollectionId\"]], template: function CollectionTreeComponent_Template(rf, ctx) { if (rf & 1) {\n        ngcc0.template(0, CollectionTreeComponent_vdr_collection_tree_node_0_Template, 1, 4, \"vdr-collection-tree-node\", 0);\n    } if (rf & 2) {\n        ngcc0.property(\"ngIf\", ctx.collectionTree);\n    } }, directives: function () { return [ngcc4.NgIf, CollectionTreeNodeComponent, ngcc8.CdkDropListGroup]; }, styles: [\"\"], changeDetection: 0 });\r\nCollectionTreeComponent.propDecorators = {\r\n    collections: [{ type: Input }],\r\n    activeCollectionId: [{ type: Input }],\r\n    expandAll: [{ type: Input }],\r\n    expandedIds: [{ type: Input }],\r\n    selectionManager: [{ type: Input }],\r\n    rearrange: [{ type: Output }],\r\n    deleteCollection: [{ type: Output }]\r\n};\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ngcc0.setClassMetadata(CollectionTreeComponent, [{\n        type: Component,\n        args: [{\n                selector: 'vdr-collection-tree',\n                template: \"<vdr-collection-tree-node\\r\\n    *ngIf=\\\"collectionTree\\\"\\r\\n    cdkDropListGroup\\r\\n    [expandAll]=\\\"expandAll\\\"\\r\\n    [collectionTree]=\\\"collectionTree\\\"\\r\\n    [selectionManager]=\\\"selectionManager\\\"\\r\\n    [activeCollectionId]=\\\"activeCollectionId\\\"\\r\\n></vdr-collection-tree-node>\\r\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\"\"]\n            }]\n    }], function () { return []; }, { expandAll: [{\n            type: Input\n        }], expandedIds: [{\n            type: Input\n        }], rearrange: [{\n            type: Output\n        }], deleteCollection: [{\n            type: Output\n        }], collections: [{\n            type: Input\n        }], activeCollectionId: [{\n            type: Input\n        }], selectionManager: [{\n            type: Input\n        }] }); })();\n\nclass CollectionTreeNodeComponent {\r\n    constructor(parent, root, dataService, router, route, changeDetectorRef) {\r\n        this.parent = parent;\r\n        this.root = root;\r\n        this.dataService = dataService;\r\n        this.router = router;\r\n        this.route = route;\r\n        this.changeDetectorRef = changeDetectorRef;\r\n        this.depth = 0;\r\n        this.expandAll = false;\r\n        this.moveListItems = [];\r\n        if (parent) {\r\n            this.depth = parent.depth + 1;\r\n        }\r\n    }\r\n    ngOnInit() {\r\n        var _a;\r\n        this.parentName = this.collectionTree.name || '<root>';\r\n        const permissions$ = this.dataService.client\r\n            .userStatus()\r\n            .mapStream(data => data.userStatus.permissions)\r\n            .pipe(shareReplay(1));\r\n        this.hasUpdatePermission$ = permissions$.pipe(map(perms => perms.includes(Permission.UpdateCatalog) || perms.includes(Permission.UpdateCollection)));\r\n        this.hasDeletePermission$ = permissions$.pipe(map(perms => perms.includes(Permission.DeleteCatalog) || perms.includes(Permission.DeleteCollection)));\r\n        this.subscription = (_a = this.selectionManager) === null || _a === void 0 ? void 0 : _a.selectionChanges$.subscribe(() => this.changeDetectorRef.markForCheck());\r\n    }\r\n    ngOnChanges(changes) {\r\n        const expandAllChange = changes['expandAll'];\r\n        if (expandAllChange) {\r\n            if (expandAllChange.previousValue === true && expandAllChange.currentValue === false) {\r\n                this.collectionTree.children.forEach(c => (c.expanded = false));\r\n            }\r\n        }\r\n    }\r\n    ngOnDestroy() {\r\n        var _a;\r\n        (_a = this.subscription) === null || _a === void 0 ? void 0 : _a.unsubscribe();\r\n    }\r\n    trackByFn(index, item) {\r\n        return item.id;\r\n    }\r\n    toggleExpanded(collection) {\r\n        var _a, _b;\r\n        collection.expanded = !collection.expanded;\r\n        let expandedIds = (_b = (_a = this.route.snapshot.queryParamMap.get('expanded')) === null || _a === void 0 ? void 0 : _a.split(',')) !== null && _b !== void 0 ? _b : [];\r\n        if (collection.expanded) {\r\n            expandedIds.push(collection.id);\r\n        }\r\n        else {\r\n            expandedIds = expandedIds.filter(id => id !== collection.id);\r\n        }\r\n        this.router.navigate(['./'], {\r\n            queryParams: {\r\n                expanded: expandedIds.filter(id => !!id).join(','),\r\n            },\r\n            queryParamsHandling: 'merge',\r\n            relativeTo: this.route,\r\n        });\r\n    }\r\n    getMoveListItems(collection) {\r\n        this.moveListItems = this.root.getMoveListItems(collection);\r\n    }\r\n    move(collection, parentId) {\r\n        this.root.onMove({\r\n            index: 0,\r\n            parentId,\r\n            collectionId: collection.id,\r\n        });\r\n    }\r\n    moveUp(collection, currentIndex) {\r\n        if (!collection.parent) {\r\n            return;\r\n        }\r\n        this.root.onMove({\r\n            index: currentIndex - 1,\r\n            parentId: collection.parent.id,\r\n            collectionId: collection.id,\r\n        });\r\n    }\r\n    moveDown(collection, currentIndex) {\r\n        if (!collection.parent) {\r\n            return;\r\n        }\r\n        this.root.onMove({\r\n            index: currentIndex + 1,\r\n            parentId: collection.parent.id,\r\n            collectionId: collection.id,\r\n        });\r\n    }\r\n    drop(event) {\r\n        moveItemInArray(this.collectionTree.children, event.previousIndex, event.currentIndex);\r\n        this.root.onDrop(event);\r\n    }\r\n    delete(id) {\r\n        this.root.onDelete(id);\r\n    }\r\n}\nCollectionTreeNodeComponent.fac = function CollectionTreeNodeComponent_Factory(t) { return new (t || CollectionTreeNodeComponent)(ngcc0.directiveInject(CollectionTreeNodeComponent, 12), ngcc0.directiveInject(CollectionTreeComponent), ngcc0.directiveInject(ngcc2.DataService), ngcc0.directiveInject(ngcc1.Router), ngcc0.directiveInject(ngcc1.ActivatedRoute), ngcc0.directiveInject(ngcc0.ChangeDetectorRef)); };\nCollectionTreeNodeComponent.cmp = /*@__PURE__*/ ngcc0.defineComponent({ type: CollectionTreeNodeComponent, selectors: [[\"vdr-collection-tree-node\"]], inputs: { expandAll: \"expandAll\", collectionTree: \"collectionTree\", activeCollectionId: \"activeCollectionId\", selectionManager: \"selectionManager\" }, features: [ngcc0.NgOnChangesFeature], decls: 4, vars: 6, consts: [[\"cdkDropList\", \"\", 1, \"tree-node\", 3, \"cdkDropListData\", \"cdkDropListDisabled\", \"cdkDropListDropped\"], [\"dropList\", \"\"], [\"class\", \"collection\", \"cdkDrag\", \"\", 3, \"private\", \"cdkDragData\", 4, \"ngFor\", \"ngForOf\", \"ngForTrackBy\"], [\"cdkDrag\", \"\", 1, \"collection\", 3, \"cdkDragData\"], [1, \"collection-detail\", 3, \"ngClass\"], [\"type\", \"checkbox\", \"clrCheckbox\", \"\", 3, \"checked\", \"click\"], [1, \"name\"], [\"class\", \"icon-button folder-button\", 3, \"disabled\", \"click\", 4, \"ngIf\", \"ngIfElse\"], [\"folderSpacer\", \"\"], [1, \"flex-spacer\"], [4, \"ngIf\"], [\"queryParamsHandling\", \"preserve\", 1, \"btn\", \"btn-link\", \"btn-sm\", 3, \"routerLink\"], [\"shape\", \"view-list\"], [1, \"btn\", \"btn-link\", \"btn-sm\", 3, \"routerLink\"], [\"shape\", \"edit\"], [\"class\", \"drag-handle\", \"cdkDragHandle\", \"\", 4, \"vdrIfPermissions\"], [\"vdrDropdownTrigger\", \"\", 1, \"icon-button\", 3, \"click\"], [\"shape\", \"ellipsis-vertical\"], [\"vdrPosition\", \"bottom-right\"], [\"class\", \"dropdown-item\", 3, \"routerLink\", 4, \"vdrIfPermissions\"], [1, \"dropdown-divider\"], [\"type\", \"button\", \"vdrDropdownItem\", \"\", 3, \"disabled\", \"click\"], [\"shape\", \"caret up\"], [\"shape\", \"caret down\"], [1, \"dropdown-header\"], [\"type\", \"button\", \"vdrDropdownItem\", \"\", 3, \"disabled\", \"click\", 4, \"ngFor\", \"ngForOf\"], [\"vdrDropdownItem\", \"\", 1, \"button\", 3, \"disabled\", \"click\"], [\"shape\", \"trash\", 1, \"is-danger\"], [3, \"expandAll\", \"collectionTree\", \"activeCollectionId\", \"selectionManager\", 4, \"ngIf\"], [1, \"icon-button\", \"folder-button\", 3, \"disabled\", \"click\"], [\"shape\", \"folder\", 4, \"ngIf\"], [\"shape\", \"folder-open\", 4, \"ngIf\"], [\"shape\", \"folder\"], [\"shape\", \"folder-open\"], [1, \"folder-button-spacer\"], [\"cdkDragHandle\", \"\", 1, \"drag-handle\"], [\"shape\", \"drag-handle\", \"size\", \"24\"], [1, \"dropdown-item\", 3, \"routerLink\"], [\"shape\", \"plus\"], [1, \"move-to-item\"], [1, \"move-icon\"], [\"shape\", \"child-arrow\"], [1, \"path\"], [3, \"expandAll\", \"collectionTree\", \"activeCollectionId\", \"selectionManager\"]], template: function CollectionTreeNodeComponent_Template(rf, ctx) { if (rf & 1) {\n        ngcc0.elementStart(0, \"div\", 0, 1);\n        ngcc0.listener(\"cdkDropListDropped\", function CollectionTreeNodeComponent_Template_div_cdkDropListDropped_0_listener($event) { return ctx.drop($event); });\n        ngcc0.pipe(2, \"async\");\n        ngcc0.template(3, CollectionTreeNodeComponent_div_3_Template, 47, 52, \"div\", 2);\n        ngcc0.elementEnd();\n    } if (rf & 2) {\n        ngcc0.property(\"cdkDropListData\", ctx.collectionTree)(\"cdkDropListDisabled\", !ngcc0.pipeBind1(2, 4, ctx.hasUpdatePermission$));\n        ngcc0.advance(3);\n        ngcc0.property(\"ngForOf\", ctx.collectionTree.children)(\"ngForTrackBy\", ctx.trackByFn);\n    } }, directives: [ngcc8.CdkDropList, ngcc4.NgForOf, ngcc7.ClrDatagridItemsTrackBy, ngcc8.CdkDrag, ngcc4.NgClass, ngcc2.FormFieldControlDirective, ngcc7.ClrCheckbox, ngcc4.NgIf, ngcc1.RouterLinkWithHref, ngcc7.ClrIconCustomTag, ngcc2.IfPermissionsDirective, ngcc2.DropdownComponent, ngcc2.DropdownTriggerDirective, ngcc2.DropdownMenuComponent, ngcc2.DropdownItemDirective, ngcc2.ChipComponent, ngcc8.CdkDragHandle, CollectionTreeNodeComponent], pipes: [ngcc4.AsyncPipe, ngcc5.TranslatePipe], styles: [\"[_nghost-%COMP%]{display:block}.collection[_ngcontent-%COMP%]{background-color:var(--clr-table-bgcolor);border-radius:var(--clr-global-borderradius);font-size:.65rem;transition:transform .25s cubic-bezier(0,0,.2,1);margin-bottom:2px;border-left:2px solid transparent;transition:border-left-color .2s}.collection.private[_ngcontent-%COMP%]{background-color:var(--color-component-bg-200)}.collection[_ngcontent-%COMP%]   .collection-detail[_ngcontent-%COMP%]{padding:6px 12px;display:flex;align-items:center;justify-content:space-between;border-bottom:1px solid var(--color-component-border-100)}.collection[_ngcontent-%COMP%]   .collection-detail.active[_ngcontent-%COMP%]{background-color:var(--clr-global-selection-color)}.collection[_ngcontent-%COMP%]   .collection-detail.depth-1[_ngcontent-%COMP%]{padding-left:36px}.collection[_ngcontent-%COMP%]   .collection-detail.depth-2[_ngcontent-%COMP%]{padding-left:60px}.collection[_ngcontent-%COMP%]   .collection-detail.depth-3[_ngcontent-%COMP%]{padding-left:84px}.collection[_ngcontent-%COMP%]   .collection-detail.depth-4[_ngcontent-%COMP%]{padding-left:108px}.collection[_ngcontent-%COMP%]   .collection-detail[_ngcontent-%COMP%]   .folder-button-spacer[_ngcontent-%COMP%]{display:inline-block;width:28px}.tree-node[_ngcontent-%COMP%]{display:block;background-color:var(--clr-table-bgcolor);border-radius:var(--clr-global-borderradius);overflow:hidden}.tree-node.cdk-drop-list-dragging[_ngcontent-%COMP%] > .collection[_ngcontent-%COMP%]{border-left-color:var(--color-primary-300)}.drag-placeholder[_ngcontent-%COMP%]{min-height:120px;background-color:var(--color-component-bg-300);transition:transform .25s cubic-bezier(0,0,.2,1)}.cdk-drag-preview[_ngcontent-%COMP%]{box-sizing:border-box;border-radius:4px;box-shadow:0 5px 5px -3px #0003,0 8px 10px 1px #00000024,0 3px 14px 2px #0000001f}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.example-list.cdk-drop-list-dragging[_ngcontent-%COMP%]   .tree-node[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}.move-to-item[_ngcontent-%COMP%]{display:flex;white-space:normal;align-items:baseline}.move-to-item[_ngcontent-%COMP%]   .move-icon[_ngcontent-%COMP%]{flex:none;margin-right:3px}.move-to-item[_ngcontent-%COMP%]   .path[_ngcontent-%COMP%]{line-height:18px}\"], changeDetection: 0 });\r\nCollectionTreeNodeComponent.ctorParameters = () => [\r\n    { type: CollectionTreeNodeComponent, decorators: [{ type: SkipSelf }, { type: Optional }] },\r\n    { type: CollectionTreeComponent },\r\n    { type: DataService },\r\n    { type: Router },\r\n    { type: ActivatedRoute },\r\n    { type: ChangeDetectorRef }\r\n];\r\nCollectionTreeNodeComponent.propDecorators = {\r\n    collectionTree: [{ type: Input }],\r\n    activeCollectionId: [{ type: Input }],\r\n    expandAll: [{ type: Input }],\r\n    selectionManager: [{ type: Input }]\r\n};\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ngcc0.setClassMetadata(CollectionTreeNodeComponent, [{\n        type: Component,\n        args: [{\n                selector: 'vdr-collection-tree-node',\n                template: \"<div\\r\\n    cdkDropList\\r\\n    class=\\\"tree-node\\\"\\r\\n    #dropList\\r\\n    [cdkDropListData]=\\\"collectionTree\\\"\\r\\n    [cdkDropListDisabled]=\\\"!(hasUpdatePermission$ | async)\\\"\\r\\n    (cdkDropListDropped)=\\\"drop($event)\\\"\\r\\n>\\r\\n    <div\\r\\n        class=\\\"collection\\\"\\r\\n        [class.private]=\\\"collection.isPrivate\\\"\\r\\n        *ngFor=\\\"let collection of collectionTree.children; index as i; trackBy: trackByFn\\\"\\r\\n        cdkDrag\\r\\n        [cdkDragData]=\\\"collection\\\"\\r\\n    >\\r\\n        <div\\r\\n            class=\\\"collection-detail\\\"\\r\\n            [ngClass]=\\\"'depth-' + depth\\\"\\r\\n            [class.active]=\\\"collection.id === activeCollectionId\\\"\\r\\n        >\\r\\n            <div>\\r\\n                <input\\r\\n                    type=\\\"checkbox\\\"\\r\\n                    clrCheckbox\\r\\n                    [checked]=\\\"selectionManager.isSelected(collection)\\\"\\r\\n                    (click)=\\\"selectionManager.toggleSelection(collection, $event)\\\"\\r\\n                />\\r\\n            </div>\\r\\n            <div class=\\\"name\\\">\\r\\n                <button\\r\\n                    class=\\\"icon-button folder-button\\\"\\r\\n                    [disabled]=\\\"expandAll\\\"\\r\\n                    *ngIf=\\\"collection.children?.length; else folderSpacer\\\"\\r\\n                    (click)=\\\"toggleExpanded(collection)\\\"\\r\\n                >\\r\\n                    <clr-icon shape=\\\"folder\\\" *ngIf=\\\"!collection.expanded && !expandAll\\\"></clr-icon>\\r\\n                    <clr-icon shape=\\\"folder-open\\\" *ngIf=\\\"collection.expanded || expandAll\\\"></clr-icon>\\r\\n                </button>\\r\\n                <ng-template #folderSpacer>\\r\\n                    <div class=\\\"folder-button-spacer\\\"></div>\\r\\n                </ng-template>\\r\\n                {{ collection.name }}\\r\\n            </div>\\r\\n            <div class=\\\"flex-spacer\\\"></div>\\r\\n            <vdr-chip *ngIf=\\\"collection.isPrivate\\\">{{ 'catalog.private' | translate }}</vdr-chip>\\r\\n            <a\\r\\n                class=\\\"btn btn-link btn-sm\\\"\\r\\n                [routerLink]=\\\"['./', { contents: collection.id }]\\\"\\r\\n                queryParamsHandling=\\\"preserve\\\"\\r\\n            >\\r\\n                <clr-icon shape=\\\"view-list\\\"></clr-icon>\\r\\n                {{ 'catalog.view-contents' | translate }}\\r\\n            </a>\\r\\n            <a class=\\\"btn btn-link btn-sm\\\" [routerLink]=\\\"['/catalog/collections/', collection.id]\\\">\\r\\n                <clr-icon shape=\\\"edit\\\"></clr-icon>\\r\\n                {{ 'common.edit' | translate }}\\r\\n            </a>\\r\\n            <div class=\\\"drag-handle\\\" cdkDragHandle *vdrIfPermissions=\\\"['UpdateCatalog', 'UpdateCollection']\\\">\\r\\n                <clr-icon shape=\\\"drag-handle\\\" size=\\\"24\\\"></clr-icon>\\r\\n            </div>\\r\\n            <vdr-dropdown>\\r\\n                <button class=\\\"icon-button\\\" vdrDropdownTrigger (click)=\\\"getMoveListItems(collection)\\\">\\r\\n                    <clr-icon shape=\\\"ellipsis-vertical\\\"></clr-icon>\\r\\n                </button>\\r\\n                <vdr-dropdown-menu vdrPosition=\\\"bottom-right\\\">\\r\\n                    <a\\r\\n                        class=\\\"dropdown-item\\\"\\r\\n                        [routerLink]=\\\"['./', 'create', { parentId: collection.id }]\\\"\\r\\n                        *vdrIfPermissions=\\\"['CreateCatalog', 'CreateCollection']\\\"\\r\\n                    >\\r\\n                        <clr-icon shape=\\\"plus\\\"></clr-icon>\\r\\n                        {{ 'catalog.create-new-collection' | translate }}\\r\\n                    </a>\\r\\n                    <div class=\\\"dropdown-divider\\\"></div>\\r\\n                    <button\\r\\n                        type=\\\"button\\\"\\r\\n                        vdrDropdownItem\\r\\n                        [disabled]=\\\"i === 0 || !(hasUpdatePermission$ | async)\\\"\\r\\n                        (click)=\\\"moveUp(collection, i)\\\"\\r\\n                    >\\r\\n                        <clr-icon shape=\\\"caret up\\\"></clr-icon>\\r\\n                        {{ 'catalog.move-up' | translate }}\\r\\n                    </button>\\r\\n                    <button\\r\\n                        type=\\\"button\\\"\\r\\n                        vdrDropdownItem\\r\\n                        [disabled]=\\\"\\r\\n                            i === collectionTree.children.length - 1 || !(hasUpdatePermission$ | async)\\r\\n                        \\\"\\r\\n                        (click)=\\\"moveDown(collection, i)\\\"\\r\\n                    >\\r\\n                        <clr-icon shape=\\\"caret down\\\"></clr-icon>\\r\\n                        {{ 'catalog.move-down' | translate }}\\r\\n                    </button>\\r\\n                    <h4 class=\\\"dropdown-header\\\">{{ 'catalog.move-to' | translate }}</h4>\\r\\n                    <button\\r\\n                        type=\\\"button\\\"\\r\\n                        vdrDropdownItem\\r\\n                        *ngFor=\\\"let item of moveListItems\\\"\\r\\n                        (click)=\\\"move(collection, item.id)\\\"\\r\\n                        [disabled]=\\\"!(hasUpdatePermission$ | async)\\\"\\r\\n                    >\\r\\n                        <div class=\\\"move-to-item\\\">\\r\\n                            <div class=\\\"move-icon\\\">\\r\\n                                <clr-icon shape=\\\"child-arrow\\\"></clr-icon>\\r\\n                            </div>\\r\\n                            <div class=\\\"path\\\">\\r\\n                                {{ item.path }}\\r\\n                            </div>\\r\\n                        </div>\\r\\n                    </button>\\r\\n                    <div class=\\\"dropdown-divider\\\"></div>\\r\\n                    <button\\r\\n                        class=\\\"button\\\"\\r\\n                        vdrDropdownItem\\r\\n                        (click)=\\\"delete(collection.id)\\\"\\r\\n                        [disabled]=\\\"!(hasDeletePermission$ | async)\\\"\\r\\n                    >\\r\\n                        <clr-icon shape=\\\"trash\\\" class=\\\"is-danger\\\"></clr-icon>\\r\\n                        {{ 'common.delete' | translate }}\\r\\n                    </button>\\r\\n                </vdr-dropdown-menu>\\r\\n            </vdr-dropdown>\\r\\n        </div>\\r\\n        <vdr-collection-tree-node\\r\\n            *ngIf=\\\"collection.expanded || expandAll\\\"\\r\\n            [expandAll]=\\\"expandAll\\\"\\r\\n            [collectionTree]=\\\"collection\\\"\\r\\n            [activeCollectionId]=\\\"activeCollectionId\\\"\\r\\n            [selectionManager]=\\\"selectionManager\\\"\\r\\n        ></vdr-collection-tree-node>\\r\\n    </div>\\r\\n</div>\\r\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\":host{display:block}.collection{background-color:var(--clr-table-bgcolor);border-radius:var(--clr-global-borderradius);font-size:.65rem;transition:transform .25s cubic-bezier(0,0,.2,1);margin-bottom:2px;border-left:2px solid transparent;transition:border-left-color .2s}.collection.private{background-color:var(--color-component-bg-200)}.collection .collection-detail{padding:6px 12px;display:flex;align-items:center;justify-content:space-between;border-bottom:1px solid var(--color-component-border-100)}.collection .collection-detail.active{background-color:var(--clr-global-selection-color)}.collection .collection-detail.depth-1{padding-left:36px}.collection .collection-detail.depth-2{padding-left:60px}.collection .collection-detail.depth-3{padding-left:84px}.collection .collection-detail.depth-4{padding-left:108px}.collection .collection-detail .folder-button-spacer{display:inline-block;width:28px}.tree-node{display:block;background-color:var(--clr-table-bgcolor);border-radius:var(--clr-global-borderradius);overflow:hidden}.tree-node.cdk-drop-list-dragging>.collection{border-left-color:var(--color-primary-300)}.drag-placeholder{min-height:120px;background-color:var(--color-component-bg-300);transition:transform .25s cubic-bezier(0,0,.2,1)}.cdk-drag-preview{box-sizing:border-box;border-radius:4px;box-shadow:0 5px 5px -3px #0003,0 8px 10px 1px #00000024,0 3px 14px 2px #0000001f}.cdk-drag-placeholder{opacity:0}.cdk-drag-animating{transition:transform .25s cubic-bezier(0,0,.2,1)}.example-list.cdk-drop-list-dragging .tree-node:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}.move-to-item{display:flex;white-space:normal;align-items:baseline}.move-to-item .move-icon{flex:none;margin-right:3px}.move-to-item .path{line-height:18px}\\n\"]\n            }]\n    }], function () { return [{ type: CollectionTreeNodeComponent, decorators: [{\n                type: SkipSelf\n            }, {\n                type: Optional\n            }] }, { type: CollectionTreeComponent }, { type: ngcc2.DataService }, { type: ngcc1.Router }, { type: ngcc1.ActivatedRoute }, { type: ngcc0.ChangeDetectorRef }]; }, { expandAll: [{\n            type: Input\n        }], collectionTree: [{\n            type: Input\n        }], activeCollectionId: [{\n            type: Input\n        }], selectionManager: [{\n            type: Input\n        }] }); })();\n\nconst 0$1 = userPermissions => userPermissions.includes(Permission.DeleteFacet) ||\r\n    userPermissions.includes(Permission.DeleteCatalog), 1$1 = ({ injector, selection, hostComponent, clearSelection }) => {\r\n    const modalService = injector.get(ModalService);\r\n    const dataService = injector.get(DataService);\r\n    const notificationService = injector.get(NotificationService);\r\n    function showModalAndDelete(facetIds, message) {\r\n        return modalService\r\n            .dialog({\r\n            title: marker('catalog.confirm-bulk-delete-facets'),\r\n            translationVars: {\r\n                count: selection.length,\r\n            },\r\n            size: message ? 'lg' : 'md',\r\n            body: message,\r\n            buttons: [\r\n                { type: 'secondary', label: marker('common.cancel') },\r\n                {\r\n                    type: 'danger',\r\n                    label: message ? marker('common.force-delete') : marker('common.delete'),\r\n                    returnValue: true,\r\n                },\r\n            ],\r\n        })\r\n            .pipe(switchMap(res => res\r\n            ? dataService.facet\r\n                .deleteFacets(facetIds, !!message)\r\n                .pipe(map(res2 => res2.deleteFacets))\r\n            : of([])));\r\n    }\r\n    showModalAndDelete(unique(selection.map(f => f.id)))\r\n        .pipe(switchMap(result => {\r\n        var _a;\r\n        let deletedCount = 0;\r\n        const errors = [];\r\n        const errorIds = [];\r\n        let i = 0;\r\n        for (const item of result) {\r\n            if (item.result === DeletionResult.DELETED) {\r\n                deletedCount++;\r\n            }\r\n            else if (item.message) {\r\n                errors.push(item.message);\r\n                errorIds.push((_a = selection[i]) === null || _a === void 0 ? void 0 : _a.id);\r\n            }\r\n            i++;\r\n        }\r\n        if (0 < errorIds.length) {\r\n            return showModalAndDelete(errorIds, errors.join('\\n')).pipe(map(result2 => {\r\n                const deletedCount2 = result2.filter(r => r.result === DeletionResult.DELETED).length;\r\n                return deletedCount + deletedCount2;\r\n            }));\r\n        }\r\n        else {\r\n            return of(deletedCount);\r\n        }\r\n    }))\r\n        .subscribe(deletedCount => {\r\n        if (deletedCount) {\r\n            hostComponent.refresh();\r\n            clearSelection();\r\n            notificationService.success(marker('catalog.notify-bulk-delete-facets-success'), {\r\n                count: deletedCount,\r\n            });\r\n        }\r\n    });\r\n};\r\nconst deleteFacetsBulkAction = {\r\n    location: 'facet-list',\r\n    label: marker('common.delete'),\r\n    icon: 'trash',\r\n    iconClass: 'is-danger',\r\n    requiresPermission: 0$1,\r\n    onClick: 1$1,\r\n};\r\nconst 2$1 = userPermissions => userPermissions.includes(Permission.UpdateFacet) ||\r\n    userPermissions.includes(Permission.UpdateCatalog), 3$1 = ({ injector }) => isMultiChannel(injector.get(DataService)), 4$1 = ({ injector, selection, hostComponent, clearSelection }) => {\r\n    const modalService = injector.get(ModalService);\r\n    const dataService = injector.get(DataService);\r\n    const notificationService = injector.get(NotificationService);\r\n    modalService\r\n        .fromComponent(AssignToChannelDialogComponent, {\r\n        size: 'md',\r\n        locals: {},\r\n    })\r\n        .pipe(switchMap(result => {\r\n        if (result) {\r\n            return dataService.facet\r\n                .assignFacetsToChannel({\r\n                facetIds: selection.map(f => f.id),\r\n                channelId: result.id,\r\n            })\r\n                .pipe(mapTo(result));\r\n        }\r\n        else {\r\n            return EMPTY;\r\n        }\r\n    }))\r\n        .subscribe(result => {\r\n        notificationService.success(marker('catalog.assign-facets-to-channel-success'), {\r\n            count: selection.length,\r\n            channelCode: result.code,\r\n        });\r\n        clearSelection();\r\n    });\r\n};\r\nconst assignFacetsToChannelBulkAction = {\r\n    location: 'facet-list',\r\n    label: marker('catalog.assign-to-channel'),\r\n    icon: 'layers',\r\n    requiresPermission: 2$1,\r\n    isVisible: 3$1,\r\n    onClick: 4$1,\r\n};\r\nconst 5$1 = ({ injector }) => getChannelCodeFromUserStatus(injector.get(DataService)), 6$1 = userPermissions => userPermissions.includes(Permission.UpdateFacet) ||\r\n    userPermissions.includes(Permission.UpdateCatalog), 7$1 = ({ injector }) => currentChannelIsNotDefault(injector.get(DataService)), 8$1 = ({ injector, selection, hostComponent, clearSelection }) => {\r\n    const modalService = injector.get(ModalService);\r\n    const dataService = injector.get(DataService);\r\n    const notificationService = injector.get(NotificationService);\r\n    const activeChannelId$ = dataService.client\r\n        .userStatus()\r\n        .mapSingle(({ userStatus }) => userStatus.activeChannelId);\r\n    function showModalAndDelete(facetIds, message) {\r\n        return modalService\r\n            .dialog({\r\n            title: marker('catalog.remove-from-channel'),\r\n            translationVars: {\r\n                count: selection.length,\r\n            },\r\n            size: message ? 'lg' : 'md',\r\n            body: message,\r\n            buttons: [\r\n                { type: 'secondary', label: marker('common.cancel') },\r\n                {\r\n                    type: 'danger',\r\n                    label: message ? marker('common.force-remove') : marker('common.remove'),\r\n                    returnValue: true,\r\n                },\r\n            ],\r\n        })\r\n            .pipe(switchMap(res => res\r\n            ? activeChannelId$.pipe(switchMap(activeChannelId => activeChannelId\r\n                ? dataService.facet.removeFacetsFromChannel({\r\n                    channelId: activeChannelId,\r\n                    facetIds,\r\n                    force: !!message,\r\n                })\r\n                : EMPTY), map(res2 => res2.removeFacetsFromChannel))\r\n            : EMPTY));\r\n    }\r\n    showModalAndDelete(unique(selection.map(f => f.id)))\r\n        .pipe(switchMap(result => {\r\n        var _a;\r\n        let removedCount = selection.length;\r\n        const errors = [];\r\n        const errorIds = [];\r\n        let i = 0;\r\n        for (const item of result) {\r\n            if (item.__typename === 'FacetInUseError') {\r\n                errors.push(item.message);\r\n                errorIds.push((_a = selection[i]) === null || _a === void 0 ? void 0 : _a.id);\r\n                removedCount--;\r\n            }\r\n            i++;\r\n        }\r\n        if (0 < errorIds.length) {\r\n            return showModalAndDelete(errorIds, errors.join('\\n')).pipe(map(result2 => {\r\n                const notRemovedCount = result2.filter(r => r.__typename === 'FacetInUseError').length;\r\n                return selection.length - notRemovedCount;\r\n            }));\r\n        }\r\n        else {\r\n            return of(removedCount);\r\n        }\r\n    }), switchMap(removedCount => removedCount\r\n        ? getChannelCodeFromUserStatus(dataService).then(({ channelCode }) => ({\r\n            channelCode,\r\n            removedCount,\r\n        }))\r\n        : EMPTY))\r\n        .subscribe(({ removedCount, channelCode }) => {\r\n        if (removedCount) {\r\n            hostComponent.refresh();\r\n            clearSelection();\r\n            notificationService.success(marker('catalog.notify-remove-facets-from-channel-success'), {\r\n                count: removedCount,\r\n                channelCode,\r\n            });\r\n        }\r\n    });\r\n};\r\nconst removeFacetsFromChannelBulkAction = {\r\n    location: 'facet-list',\r\n    label: marker('catalog.remove-from-channel'),\r\n    getTranslationVars: 5$1,\r\n    icon: 'layers',\r\n    iconClass: 'is-warning',\r\n    requiresPermission: 6$1,\r\n    isVisible: 7$1,\r\n    onClick: 8$1,\r\n};\n\nconst DEFAULT_VARIANT_CODE = '__DEFAULT_VARIANT__';\r\nclass GenerateProductVariantsComponent {\r\n    constructor(dataService) {\r\n        this.dataService = dataService;\r\n        this.variantsChange = new EventEmitter();\r\n        this.optionGroups = [];\r\n        this.variantFormValues = {};\r\n    }\r\n    ngOnInit() {\r\n        this.dataService.settings.getActiveChannel().single$.subscribe(data => {\r\n            this.currencyCode = data.activeChannel.currencyCode;\r\n        });\r\n        this.generateVariants();\r\n    }\r\n    addOption() {\r\n        this.optionGroups.push({ name: '', values: [] });\r\n        const index = this.optionGroups.length - 1;\r\n        setTimeout(() => {\r\n            var _a;\r\n            const input = (_a = this.groupNameInputs.get(index)) === null || _a === void 0 ? void 0 : _a.nativeElement;\r\n            input === null || input === void 0 ? void 0 : input.focus();\r\n        });\r\n    }\r\n    removeOption(name) {\r\n        this.optionGroups = this.optionGroups.filter(g => g.name !== name);\r\n        this.generateVariants();\r\n    }\r\n    generateVariants() {\r\n        const totalValuesCount = this.optionGroups.reduce((sum, group) => sum + group.values.length, 0);\r\n        const groups = totalValuesCount\r\n            ? this.optionGroups.map(g => g.values.map(v => v.name))\r\n            : [[DEFAULT_VARIANT_CODE]];\r\n        this.variants = generateAllCombinations(groups).map(values => ({ id: values.join('|'), values }));\r\n        this.variants.forEach(variant => {\r\n            if (!this.variantFormValues[variant.id]) {\r\n                this.variantFormValues[variant.id] = {\r\n                    optionValues: variant.values,\r\n                    enabled: true,\r\n                    price: this.copyFromDefault(variant.id, 'price', 0),\r\n                    sku: this.copyFromDefault(variant.id, 'sku', ''),\r\n                    stock: this.copyFromDefault(variant.id, 'stock', 0),\r\n                };\r\n            }\r\n        });\r\n        this.onFormChange();\r\n    }\r\n    trackByFn(index, variant) {\r\n        return variant.values.join('|');\r\n    }\r\n    handleEnter(event, optionValueInputComponent) {\r\n        event.preventDefault();\r\n        event.stopPropagation();\r\n        optionValueInputComponent.focus();\r\n    }\r\n    onFormChange() {\r\n        const variantsToCreate = this.variants.map(v => this.variantFormValues[v.id]).filter(v => v.enabled);\r\n        this.variantsChange.emit({\r\n            groups: this.optionGroups.map(og => ({ name: og.name, values: og.values.map(v => v.name) })),\r\n            variants: variantsToCreate,\r\n        });\r\n    }\r\n    copyFromDefault(variantId, prop, value) {\r\n        return variantId !== DEFAULT_VARIANT_CODE\r\n            ? this.variantFormValues[DEFAULT_VARIANT_CODE][prop]\r\n            : value;\r\n    }\r\n}\nGenerateProductVariantsComponent.fac = function GenerateProductVariantsComponent_Factory(t) { return new (t || GenerateProductVariantsComponent)(ngcc0.directiveInject(ngcc2.DataService)); };\nGenerateProductVariantsComponent.cmp = /*@__PURE__*/ ngcc0.defineComponent({ type: GenerateProductVariantsComponent, selectors: [[\"vdr-generate-product-variants\"]], viewQuery: function GenerateProductVariantsComponent_Query(rf, ctx) { if (rf & 1) {\n        ngcc0.viewQuery(_c35, 5, ElementRef);\n    } if (rf & 2) {\n        let _t;\n        ngcc0.queryRefresh(_t = ngcc0.loadQuery()) && (ctx.groupNameInputs = _t);\n    } }, outputs: { variantsChange: \"variantsChange\" }, decls: 21, vars: 17, consts: [[\"class\", \"option-groups\", 4, \"ngFor\", \"ngForOf\"], [1, \"btn\", \"btn-primary-outline\", \"btn-sm\", 3, \"click\"], [\"shape\", \"plus\"], [1, \"variants-preview\"], [1, \"table\"], [4, \"ngIf\"], [3, \"disabled\", 4, \"ngFor\", \"ngForOf\", \"ngForTrackBy\"], [1, \"option-groups\"], [1, \"name\"], [\"placeholder\", \"e.g. Size\", \"clrInput\", \"\", \"name\", \"name\", \"required\", \"\", 3, \"ngModel\", \"ngModelChange\", \"keydown.enter\"], [\"optionGroupName\", \"\"], [1, \"values\"], [3, \"ngModel\", \"groupName\", \"disabled\", \"ngModelChange\", \"edit\"], [\"optionValueInputComponent\", \"\"], [1, \"remove-group\"], [1, \"btn\", \"btn-icon\", \"btn-warning-outline\", 3, \"title\", \"click\"], [\"shape\", \"trash\"], [\"clrInput\", \"\", \"type\", \"text\", 3, \"ngModel\", \"placeholder\", \"change\", \"ngModelChange\"], [\"clrInput\", \"\", 3, \"ngModel\", \"currencyCode\", \"ngModelChange\"], [\"clrInput\", \"\", \"type\", \"number\", \"min\", \"0\", \"step\", \"1\", 3, \"ngModel\", \"ngModelChange\", \"change\"], [\"type\", \"checkbox\", \"clrCheckbox\", \"\", 3, \"ngModel\", \"change\", \"ngModelChange\"]], template: function GenerateProductVariantsComponent_Template(rf, ctx) { if (rf & 1) {\n        ngcc0.template(0, GenerateProductVariantsComponent_div_0_Template, 17, 13, \"div\", 0);\n        ngcc0.elementStart(1, \"button\", 1);\n        ngcc0.listener(\"click\", function GenerateProductVariantsComponent_Template_button_click_1_listener() { return ctx.addOption(); });\n        ngcc0.element(2, \"clr-icon\", 2);\n        ngcc0.text(3);\n        ngcc0.pipe(4, \"translate\");\n        ngcc0.elementEnd();\n        ngcc0.elementStart(5, \"div\", 3);\n        ngcc0.elementStart(6, \"table\", 4);\n        ngcc0.elementStart(7, \"thead\");\n        ngcc0.elementStart(8, \"tr\");\n        ngcc0.template(9, GenerateProductVariantsComponent_th_9_Template, 3, 3, \"th\", 5);\n        ngcc0.template(10, GenerateProductVariantsComponent_th_10_Template, 3, 3, \"th\", 5);\n        ngcc0.elementStart(11, \"th\");\n        ngcc0.text(12);\n        ngcc0.pipe(13, \"translate\");\n        ngcc0.elementEnd();\n        ngcc0.elementStart(14, \"th\");\n        ngcc0.text(15);\n        ngcc0.pipe(16, \"translate\");\n        ngcc0.elementEnd();\n        ngcc0.elementStart(17, \"th\");\n        ngcc0.text(18);\n        ngcc0.pipe(19, \"translate\");\n        ngcc0.elementEnd();\n        ngcc0.elementEnd();\n        ngcc0.elementEnd();\n        ngcc0.template(20, GenerateProductVariantsComponent_tr_20_Template, 13, 11, \"tr\", 6);\n        ngcc0.elementEnd();\n        ngcc0.elementEnd();\n    } if (rf & 2) {\n        ngcc0.property(\"ngForOf\", ctx.optionGroups);\n        ngcc0.advance(3);\n        ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(4, 9, \"catalog.add-option\"), \"\\n\");\n        ngcc0.advance(6);\n        ngcc0.property(\"ngIf\", 1 < ctx.variants.length);\n        ngcc0.advance(1);\n        ngcc0.property(\"ngIf\", 1 < ctx.variants.length);\n        ngcc0.advance(2);\n        ngcc0.textInterpolate(ngcc0.pipeBind1(13, 11, \"catalog.sku\"));\n        ngcc0.advance(3);\n        ngcc0.textInterpolate(ngcc0.pipeBind1(16, 13, \"catalog.price\"));\n        ngcc0.advance(3);\n        ngcc0.textInterpolate(ngcc0.pipeBind1(19, 15, \"catalog.stock-on-hand\"));\n        ngcc0.advance(2);\n        ngcc0.property(\"ngForOf\", ctx.variants)(\"ngForTrackBy\", ctx.trackByFn);\n    } }, directives: function () { return [ngcc4.NgForOf, ngcc7.ClrIconCustomTag, ngcc4.NgIf, ngcc7.ClrDatagridItemsTrackBy, ngcc7.ClrLabel, ngcc2.FormFieldControlDirective, ngcc3.DefaultValueAccessor, ngcc7.ClrInput, ngcc3.RequiredValidator, ngcc3.NgControlStatus, ngcc3.NgModel, OptionValueInputComponent, ngcc7.ClrInputContainer, ngcc2.CurrencyInputComponent, ngcc3.MinValidator, ngcc3.NumberValueAccessor, ngcc3.CheckboxControlValueAccessor, ngcc7.ClrCheckbox]; }, pipes: function () { return [ngcc5.TranslatePipe]; }, styles: [\"[_nghost-%COMP%]{display:block;margin-bottom:120px}.option-groups[_ngcontent-%COMP%]{display:flex}.values[_ngcontent-%COMP%]{flex:1;margin:0 6px}.remove-group[_ngcontent-%COMP%]{padding-top:18px}.variants-preview[_ngcontent-%COMP%]   tr.disabled[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background-color:var(--color-component-bg-100);color:var(--color-grey-400)}\"] });\r\nGenerateProductVariantsComponent.ctorParameters = () => [\r\n    { type: DataService }\r\n];\r\nGenerateProductVariantsComponent.propDecorators = {\r\n    variantsChange: [{ type: Output }],\r\n    groupNameInputs: [{ type: ViewChildren, args: ['optionGroupName', { read: ElementRef },] }]\r\n};\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ngcc0.setClassMetadata(GenerateProductVariantsComponent, [{\n        type: Component,\n        args: [{\n                selector: 'vdr-generate-product-variants',\n                template: \"<div *ngFor=\\\"let group of optionGroups\\\" class=\\\"option-groups\\\">\\r\\n    <div class=\\\"name\\\">\\r\\n        <label>{{ 'catalog.option' | translate }}</label>\\r\\n        <input\\r\\n            #optionGroupName\\r\\n            placeholder=\\\"e.g. Size\\\"\\r\\n            clrInput\\r\\n            [(ngModel)]=\\\"group.name\\\"\\r\\n            name=\\\"name\\\"\\r\\n            required\\r\\n            (keydown.enter)=\\\"handleEnter($event, optionValueInputComponent)\\\"\\r\\n        />\\r\\n    </div>\\r\\n    <div class=\\\"values\\\">\\r\\n        <label>{{ 'catalog.option-values' | translate }}</label>\\r\\n        <vdr-option-value-input\\r\\n            #optionValueInputComponent\\r\\n            [(ngModel)]=\\\"group.values\\\"\\r\\n            (ngModelChange)=\\\"generateVariants()\\\"\\r\\n            (edit)=\\\"generateVariants()\\\"\\r\\n            [groupName]=\\\"group.name\\\"\\r\\n            [disabled]=\\\"group.name === ''\\\"\\r\\n        ></vdr-option-value-input>\\r\\n    </div>\\r\\n    <div class=\\\"remove-group\\\">\\r\\n        <button\\r\\n            class=\\\"btn btn-icon btn-warning-outline\\\"\\r\\n            [title]=\\\"'catalog.remove-option' | translate\\\"\\r\\n            (click)=\\\"removeOption(group.name)\\\"\\r\\n        >\\r\\n            <clr-icon shape=\\\"trash\\\"></clr-icon>\\r\\n        </button>\\r\\n    </div>\\r\\n</div>\\r\\n<button class=\\\"btn btn-primary-outline btn-sm\\\" (click)=\\\"addOption()\\\">\\r\\n    <clr-icon shape=\\\"plus\\\"></clr-icon>\\r\\n    {{ 'catalog.add-option' | translate }}\\r\\n</button>\\r\\n\\r\\n<div class=\\\"variants-preview\\\">\\r\\n    <table class=\\\"table\\\">\\r\\n        <thead>\\r\\n            <tr>\\r\\n                <th *ngIf=\\\"1 < variants.length\\\">{{ 'common.create' | translate }}</th>\\r\\n                <th *ngIf=\\\"1 < variants.length\\\">{{ 'catalog.variant' | translate }}</th>\\r\\n                <th>{{ 'catalog.sku' | translate }}</th>\\r\\n                <th>{{ 'catalog.price' | translate }}</th>\\r\\n                <th>{{ 'catalog.stock-on-hand' | translate }}</th>\\r\\n            </tr>\\r\\n        </thead>\\r\\n        <tr\\r\\n            *ngFor=\\\"let variant of variants; trackBy: trackByFn\\\"\\r\\n            [class.disabled]=\\\"!variantFormValues[variant.id].enabled\\\"\\r\\n        >\\r\\n            <td *ngIf=\\\"1 < variants.length\\\">\\r\\n                <input\\r\\n                    type=\\\"checkbox\\\"\\r\\n                    (change)=\\\"onFormChange()\\\"\\r\\n                    [(ngModel)]=\\\"variantFormValues[variant.id].enabled\\\"\\r\\n                    clrCheckbox\\r\\n                />\\r\\n            </td>\\r\\n            <td *ngIf=\\\"1 < variants.length\\\">\\r\\n                {{ variant.values.join(' ') }}\\r\\n            </td>\\r\\n            <td>\\r\\n                <clr-input-container>\\r\\n                    <input\\r\\n                        clrInput\\r\\n                        type=\\\"text\\\"\\r\\n                        (change)=\\\"onFormChange()\\\"\\r\\n                        [(ngModel)]=\\\"variantFormValues[variant.id].sku\\\"\\r\\n                        [placeholder]=\\\"'catalog.sku' | translate\\\"\\r\\n                    />\\r\\n                </clr-input-container>\\r\\n            </td>\\r\\n            <td>\\r\\n                <clr-input-container>\\r\\n                    <vdr-currency-input\\r\\n                        clrInput\\r\\n                        [(ngModel)]=\\\"variantFormValues[variant.id].price\\\"\\r\\n                        (ngModelChange)=\\\"onFormChange()\\\"\\r\\n                        [currencyCode]=\\\"currencyCode\\\"\\r\\n                    ></vdr-currency-input>\\r\\n                </clr-input-container>\\r\\n            </td>\\r\\n            <td>\\r\\n                <clr-input-container>\\r\\n                    <input\\r\\n                        clrInput\\r\\n                        type=\\\"number\\\"\\r\\n                        [(ngModel)]=\\\"variantFormValues[variant.id].stock\\\"\\r\\n                        (change)=\\\"onFormChange()\\\"\\r\\n                        min=\\\"0\\\"\\r\\n                        step=\\\"1\\\"\\r\\n                    />\\r\\n                </clr-input-container>\\r\\n            </td>\\r\\n        </tr>\\r\\n    </table>\\r\\n</div>\\r\\n\",\n                styles: [\":host{display:block;margin-bottom:120px}.option-groups{display:flex}.values{flex:1;margin:0 6px}.remove-group{padding-top:18px}.variants-preview tr.disabled td{background-color:var(--color-component-bg-100);color:var(--color-grey-400)}\\n\"]\n            }]\n    }], function () { return [{ type: ngcc2.DataService }]; }, { variantsChange: [{\n            type: Output\n        }], groupNameInputs: [{\n            type: ViewChildren,\n            args: ['optionGroupName', { read: ElementRef }]\n        }] }); })();\n\nconst OPTION_VALUE_INPUT_VALUE_ACCESSOR = {\r\n    provide: NG_VALUE_ACCESSOR,\r\n    useExisting: forwardRef(() => OptionValueInputComponent),\r\n    multi: true,\r\n};\r\nclass OptionValueInputComponent {\r\n    constructor(changeDetector) {\r\n        this.changeDetector = changeDetector;\r\n        this.groupName = '';\r\n        this.add = new EventEmitter();\r\n        this.remove = new EventEmitter();\r\n        this.edit = new EventEmitter();\r\n        this.disabled = false;\r\n        this.input = '';\r\n        this.isFocussed = false;\r\n        this.lastSelected = false;\r\n        this.editingIndex = -1;\r\n    }\r\n    get optionValues() {\r\n        var _a, _b;\r\n        return (_b = (_a = this.formValue) !== null && _a !== void 0 ? _a : this.options) !== null && _b !== void 0 ? _b : [];\r\n    }\r\n    registerOnChange(fn) {\r\n        this.onChangeFn = fn;\r\n    }\r\n    registerOnTouched(fn) {\r\n        this.onTouchFn = fn;\r\n    }\r\n    setDisabledState(isDisabled) {\r\n        this.disabled = isDisabled;\r\n        this.changeDetector.markForCheck();\r\n    }\r\n    writeValue(obj) {\r\n        this.formValue = obj || [];\r\n    }\r\n    focus() {\r\n        this.textArea.nativeElement.focus();\r\n    }\r\n    editName(index, event) {\r\n        var _a;\r\n        const optionValue = this.optionValues[index];\r\n        if (!optionValue.locked && !optionValue.id) {\r\n            event.cancelBubble = true;\r\n            this.editingIndex = index;\r\n            const input = (_a = this.nameInputs.get(index)) === null || _a === void 0 ? void 0 : _a.nativeElement;\r\n            setTimeout(() => input === null || input === void 0 ? void 0 : input.focus());\r\n        }\r\n    }\r\n    updateOption(index, event) {\r\n        const optionValue = this.optionValues[index];\r\n        const newName = event.target.value;\r\n        if (optionValue) {\r\n            if (newName) {\r\n                optionValue.name = newName;\r\n                this.edit.emit({ index, option: optionValue });\r\n            }\r\n            this.editingIndex = -1;\r\n        }\r\n    }\r\n    removeOption(option) {\r\n        var _a;\r\n        if (!option.locked) {\r\n            if (this.formValue) {\r\n                this.formValue = (_a = this.formValue) === null || _a === void 0 ? void 0 : _a.filter(o => o.name !== option.name);\r\n                this.onChangeFn(this.formValue);\r\n            }\r\n            else {\r\n                this.remove.emit(option);\r\n            }\r\n        }\r\n    }\r\n    handleKey(event) {\r\n        switch (event.key) {\r\n            case ',':\r\n            case 'Enter':\r\n                this.addOptionValue();\r\n                event.preventDefault();\r\n                break;\r\n            case 'Backspace':\r\n                if (this.lastSelected) {\r\n                    this.removeLastOption();\r\n                    this.lastSelected = false;\r\n                }\r\n                else if (this.input === '') {\r\n                    this.lastSelected = true;\r\n                }\r\n                break;\r\n            default:\r\n                this.lastSelected = false;\r\n        }\r\n    }\r\n    handleBlur() {\r\n        this.isFocussed = false;\r\n        this.addOptionValue();\r\n    }\r\n    addOptionValue() {\r\n        const options = this.parseInputIntoOptions(this.input).filter(option => {\r\n            var _a;\r\n            // do not add an option with the same name\r\n            // as an existing option\r\n            const existing = (_a = this.options) !== null && _a !== void 0 ? _a : this.formValue;\r\n            return !(existing === null || existing === void 0 ? void 0 : existing.find(o => (o === null || o === void 0 ? void 0 : o.name) === option.name));\r\n        });\r\n        if (!this.formValue && this.options) {\r\n            for (const option of options) {\r\n                this.add.emit(option);\r\n            }\r\n        }\r\n        else {\r\n            this.formValue = unique([...this.formValue, ...options]);\r\n            this.onChangeFn(this.formValue);\r\n        }\r\n        this.input = '';\r\n    }\r\n    parseInputIntoOptions(input) {\r\n        return input\r\n            .split(/[,\\n]/)\r\n            .map(s => s.trim())\r\n            .filter(s => s !== '')\r\n            .map(s => ({ name: s, locked: false }));\r\n    }\r\n    removeLastOption() {\r\n        if (this.optionValues.length) {\r\n            const option = this.optionValues[this.optionValues.length - 1];\r\n            this.removeOption(option);\r\n        }\r\n    }\r\n}\nOptionValueInputComponent.fac = function OptionValueInputComponent_Factory(t) { return new (t || OptionValueInputComponent)(ngcc0.directiveInject(ngcc0.ChangeDetectorRef)); };\nOptionValueInputComponent.cmp = /*@__PURE__*/ ngcc0.defineComponent({ type: OptionValueInputComponent, selectors: [[\"vdr-option-value-input\"]], viewQuery: function OptionValueInputComponent_Query(rf, ctx) { if (rf & 1) {\n        ngcc0.viewQuery(_c36, 7);\n        ngcc0.viewQuery(_c37, 5, ElementRef);\n    } if (rf & 2) {\n        let _t;\n        ngcc0.queryRefresh(_t = ngcc0.loadQuery()) && (ctx.textArea = _t.first);\n        ngcc0.queryRefresh(_t = ngcc0.loadQuery()) && (ctx.nameInputs = _t);\n    } }, inputs: { groupName: \"groupName\", disabled: \"disabled\", options: \"options\" }, outputs: { add: \"add\", remove: \"remove\", edit: \"edit\" }, features: [ngcc0.ProvidersFeature([OPTION_VALUE_INPUT_VALUE_ACCESSOR])], decls: 4, vars: 5, consts: [[1, \"input-wrapper\", 3, \"click\"], [\"class\", \"chips\", 4, \"ngIf\"], [3, \"ngModel\", \"disabled\", \"keyup\", \"focus\", \"blur\", \"ngModelChange\"], [\"textArea\", \"\"], [1, \"chips\"], [3, \"icon\", \"selected\", \"locked\", \"colorFrom\", \"iconClick\", 4, \"ngFor\", \"ngForOf\"], [3, \"icon\", \"colorFrom\", \"iconClick\"], [3, \"hidden\"], [\"type\", \"text\", 3, \"ngModel\", \"blur\", \"click\"], [\"editNameInput\", \"\"], [1, \"option-name\", 3, \"hidden\", \"click\"]], template: function OptionValueInputComponent_Template(rf, ctx) { if (rf & 1) {\n        const _r12 = ngcc0.getCurrentView();\n        ngcc0.elementStart(0, \"div\", 0);\n        ngcc0.listener(\"click\", function OptionValueInputComponent_Template_div_click_0_listener() { ngcc0.restoreView(_r12); const _r1 = ngcc0.reference(3); return _r1.focus(); });\n        ngcc0.template(1, OptionValueInputComponent_div_1_Template, 2, 1, \"div\", 1);\n        ngcc0.elementStart(2, \"textarea\", 2, 3);\n        ngcc0.listener(\"keyup\", function OptionValueInputComponent_Template_textarea_keyup_2_listener($event) { return ctx.handleKey($event); })(\"focus\", function OptionValueInputComponent_Template_textarea_focus_2_listener() { return ctx.isFocussed = true; })(\"blur\", function OptionValueInputComponent_Template_textarea_blur_2_listener() { return ctx.handleBlur(); })(\"ngModelChange\", function OptionValueInputComponent_Template_textarea_ngModelChange_2_listener($event) { return ctx.input = $event; });\n        ngcc0.elementEnd();\n        ngcc0.elementEnd();\n    } if (rf & 2) {\n        ngcc0.classProp(\"focus\", ctx.isFocussed);\n        ngcc0.advance(1);\n        ngcc0.property(\"ngIf\", 0 < ctx.optionValues.length);\n        ngcc0.advance(1);\n        ngcc0.property(\"ngModel\", ctx.input)(\"disabled\", ctx.disabled);\n    } }, directives: [ngcc4.NgIf, ngcc2.FormFieldControlDirective, ngcc3.DefaultValueAccessor, ngcc3.NgControlStatus, ngcc3.NgModel, ngcc4.NgForOf, ngcc2.ChipComponent], styles: [\".input-wrapper[_ngcontent-%COMP%]{background-color:#fff;border-radius:3px!important;border:1px solid var(--color-grey-300)!important;cursor:text}.input-wrapper.focus[_ngcontent-%COMP%]{border-color:var(--color-primary-500)!important;box-shadow:0 0 1px 1px var(--color-primary-100)}.input-wrapper[_ngcontent-%COMP%]   .chips[_ngcontent-%COMP%]{padding:5px}.input-wrapper[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{border:none;width:100%;height:24px;margin-top:3px;padding:0 6px}.input-wrapper[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none}.input-wrapper[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:disabled{background-color:var(--color-component-bg-100)}vdr-chip[_ngcontent-%COMP%]     .wrapper{margin:0 3px}vdr-chip.locked[_ngcontent-%COMP%]{opacity:.8}vdr-chip.selected[_ngcontent-%COMP%]     .wrapper{border-color:var(--color-warning-500)!important;box-shadow:0 0 1px 1px var(--color-warning-400);opacity:.6}vdr-chip[_ngcontent-%COMP%]   .option-name.editable[_ngcontent-%COMP%]:hover{outline:1px solid var(--color-component-bg-300);outline-offset:1px;border-radius:1px}vdr-chip[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:0!important;margin-top:-2px;margin-bottom:-2px}\"] });\r\nOptionValueInputComponent.ctorParameters = () => [\r\n    { type: ChangeDetectorRef }\r\n];\r\nOptionValueInputComponent.propDecorators = {\r\n    groupName: [{ type: Input }],\r\n    textArea: [{ type: ViewChild, args: ['textArea', { static: true },] }],\r\n    nameInputs: [{ type: ViewChildren, args: ['editNameInput', { read: ElementRef },] }],\r\n    options: [{ type: Input }],\r\n    add: [{ type: Output }],\r\n    remove: [{ type: Output }],\r\n    edit: [{ type: Output }],\r\n    disabled: [{ type: Input }]\r\n};\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ngcc0.setClassMetadata(OptionValueInputComponent, [{\n        type: Component,\n        args: [{\n                selector: 'vdr-option-value-input',\n                template: \"<div class=\\\"input-wrapper\\\" [class.focus]=\\\"isFocussed\\\" (click)=\\\"textArea.focus()\\\">\\r\\n    <div class=\\\"chips\\\" *ngIf=\\\"0 < optionValues.length\\\">\\r\\n        <vdr-chip\\r\\n            *ngFor=\\\"let option of optionValues; last as isLast; index as i\\\"\\r\\n            [icon]=\\\"option.locked ? 'lock' : 'times'\\\"\\r\\n            [class.selected]=\\\"isLast && lastSelected\\\"\\r\\n            [class.locked]=\\\"option.locked\\\"\\r\\n            [colorFrom]=\\\"groupName\\\"\\r\\n            (iconClick)=\\\"removeOption(option)\\\"\\r\\n        >\\r\\n            <span [hidden]=\\\"editingIndex !== i\\\">\\r\\n                <input\\r\\n                    #editNameInput\\r\\n                    type=\\\"text\\\"\\r\\n                    [ngModel]=\\\"option.name\\\"\\r\\n                    (blur)=\\\"updateOption(i, $event)\\\"\\r\\n                    (click)=\\\"$event.cancelBubble = true\\\"\\r\\n                />\\r\\n            </span>\\r\\n            <span\\r\\n                class=\\\"option-name\\\"\\r\\n                [class.editable]=\\\"!option.locked && !option.id\\\"\\r\\n                (click)=\\\"editName(i, $event)\\\" [hidden]=\\\"editingIndex === i\\\">{{ option.name }}</span>\\r\\n        </vdr-chip>\\r\\n    </div>\\r\\n    <textarea\\r\\n        #textArea\\r\\n        (keyup)=\\\"handleKey($event)\\\"\\r\\n        (focus)=\\\"isFocussed = true\\\"\\r\\n        (blur)=\\\"handleBlur()\\\"\\r\\n        [(ngModel)]=\\\"input\\\"\\r\\n        [disabled]=\\\"disabled\\\"\\r\\n    ></textarea>\\r\\n</div>\\r\\n\",\n                changeDetection: ChangeDetectionStrategy.Default,\n                providers: [OPTION_VALUE_INPUT_VALUE_ACCESSOR],\n                styles: [\".input-wrapper{background-color:#fff;border-radius:3px!important;border:1px solid var(--color-grey-300)!important;cursor:text}.input-wrapper.focus{border-color:var(--color-primary-500)!important;box-shadow:0 0 1px 1px var(--color-primary-100)}.input-wrapper .chips{padding:5px}.input-wrapper textarea{border:none;width:100%;height:24px;margin-top:3px;padding:0 6px}.input-wrapper textarea:focus{outline:none}.input-wrapper textarea:disabled{background-color:var(--color-component-bg-100)}vdr-chip ::ng-deep .wrapper{margin:0 3px}vdr-chip.locked{opacity:.8}vdr-chip.selected ::ng-deep .wrapper{border-color:var(--color-warning-500)!important;box-shadow:0 0 1px 1px var(--color-warning-400);opacity:.6}vdr-chip .option-name.editable:hover{outline:1px solid var(--color-component-bg-300);outline-offset:1px;border-radius:1px}vdr-chip input{padding:0!important;margin-top:-2px;margin-bottom:-2px}\\n\"]\n            }]\n    }], function () { return [{ type: ngcc0.ChangeDetectorRef }]; }, { groupName: [{\n            type: Input\n        }], add: [{\n            type: Output\n        }], remove: [{\n            type: Output\n        }], edit: [{\n            type: Output\n        }], disabled: [{\n            type: Input\n        }], textArea: [{\n            type: ViewChild,\n            args: ['textArea', { static: true }]\n        }], nameInputs: [{\n            type: ViewChildren,\n            args: ['editNameInput', { read: ElementRef }]\n        }], options: [{\n            type: Input\n        }] }); })();\n\nconst 0 = userPermissions => userPermissions.includes(Permission.DeleteProduct) ||\r\n    userPermissions.includes(Permission.DeleteCatalog), 1 = ({ injector, selection, hostComponent, clearSelection }) => {\r\n    const modalService = injector.get(ModalService);\r\n    const dataService = injector.get(DataService);\r\n    const notificationService = injector.get(NotificationService);\r\n    modalService\r\n        .dialog({\r\n        title: marker('catalog.confirm-bulk-delete-products'),\r\n        translationVars: {\r\n            count: selection.length,\r\n        },\r\n        buttons: [\r\n            { type: 'secondary', label: marker('common.cancel') },\r\n            { type: 'danger', label: marker('common.delete'), returnValue: true },\r\n        ],\r\n    })\r\n        .pipe(switchMap(response => response\r\n        ? dataService.product.deleteProducts(unique(selection.map(p => p.productId)))\r\n        : EMPTY))\r\n        .subscribe(result => {\r\n        let deleted = 0;\r\n        const errors = [];\r\n        for (const item of result.deleteProducts) {\r\n            if (item.result === DeletionResult.DELETED) {\r\n                deleted++;\r\n            }\r\n            else if (item.message) {\r\n                errors.push(item.message);\r\n            }\r\n        }\r\n        if (0 < deleted) {\r\n            notificationService.success(marker('catalog.notify-bulk-delete-products-success'), {\r\n                count: deleted,\r\n            });\r\n        }\r\n        if (0 < errors.length) {\r\n            notificationService.error(errors.join('\\n'));\r\n        }\r\n        hostComponent.refresh();\r\n        clearSelection();\r\n    });\r\n};\r\nconst deleteProductsBulkAction = {\r\n    location: 'product-list',\r\n    label: marker('common.delete'),\r\n    icon: 'trash',\r\n    iconClass: 'is-danger',\r\n    requiresPermission: 0,\r\n    onClick: 1,\r\n};\r\nconst 2 = userPermissions => userPermissions.includes(Permission.UpdateCatalog) ||\r\n    userPermissions.includes(Permission.UpdateProduct), 3 = ({ injector }) => isMultiChannel(injector.get(DataService)), 4 = ({ injector, selection, hostComponent, clearSelection }) => {\r\n    const modalService = injector.get(ModalService);\r\n    const dataService = injector.get(DataService);\r\n    const notificationService = injector.get(NotificationService);\r\n    modalService\r\n        .fromComponent(AssignProductsToChannelDialogComponent, {\r\n        size: 'lg',\r\n        locals: {\r\n            productIds: unique(selection.map(p => p.productId)),\r\n            currentChannelIds: [],\r\n        },\r\n    })\r\n        .subscribe(result => {\r\n        if (result) {\r\n            clearSelection();\r\n        }\r\n    });\r\n};\r\nconst assignProductsToChannelBulkAction = {\r\n    location: 'product-list',\r\n    label: marker('catalog.assign-to-channel'),\r\n    icon: 'layers',\r\n    requiresPermission: 2,\r\n    isVisible: 3,\r\n    onClick: 4,\r\n};\r\nconst 5 = userPermissions => userPermissions.includes(Permission.UpdateChannel) ||\r\n    userPermissions.includes(Permission.UpdateProduct), 6 = ({ injector }) => getChannelCodeFromUserStatus(injector.get(DataService)), 7 = ({ injector }) => currentChannelIsNotDefault(injector.get(DataService)), 8 = ({ injector, selection, hostComponent, clearSelection }) => {\r\n    const modalService = injector.get(ModalService);\r\n    const dataService = injector.get(DataService);\r\n    const notificationService = injector.get(NotificationService);\r\n    const activeChannelId$ = dataService.client\r\n        .userStatus()\r\n        .mapSingle(({ userStatus }) => userStatus.activeChannelId);\r\n    from(getChannelCodeFromUserStatus(injector.get(DataService)))\r\n        .pipe(switchMap(({ channelCode }) => modalService.dialog({\r\n        title: marker('catalog.remove-from-channel'),\r\n        translationVars: {\r\n            channelCode,\r\n        },\r\n        buttons: [\r\n            { type: 'secondary', label: marker('common.cancel') },\r\n            {\r\n                type: 'danger',\r\n                label: marker('common.remove'),\r\n                returnValue: true,\r\n            },\r\n        ],\r\n    })), switchMap(res => res\r\n        ? activeChannelId$.pipe(switchMap(activeChannelId => activeChannelId\r\n            ? dataService.product.removeProductsFromChannel({\r\n                channelId: activeChannelId,\r\n                productIds: selection.map(p => p.productId),\r\n            })\r\n            : EMPTY), mapTo(true))\r\n        : of(false)))\r\n        .subscribe(removed => {\r\n        if (removed) {\r\n            clearSelection();\r\n            notificationService.success(marker('common.notify-remove-products-from-channel-success'), {\r\n                count: selection.length,\r\n            });\r\n            setTimeout(() => hostComponent.refresh(), 1000);\r\n        }\r\n    });\r\n};\r\nconst removeProductsFromChannelBulkAction = {\r\n    location: 'product-list',\r\n    label: marker('catalog.remove-from-channel'),\r\n    requiresPermission: 5,\r\n    getTranslationVars: 6,\r\n    icon: 'layers',\r\n    iconClass: 'is-warning',\r\n    isVisible: 7,\r\n    onClick: 8,\r\n};\r\nconst 9 = userPermissions => userPermissions.includes(Permission.UpdateCatalog) ||\r\n    userPermissions.includes(Permission.UpdateProduct), 10 = ({ injector, selection, hostComponent, clearSelection }) => {\r\n    const modalService = injector.get(ModalService);\r\n    const dataService = injector.get(DataService);\r\n    const notificationService = injector.get(NotificationService);\r\n    const mode = hostComponent.groupByProduct ? 'product' : 'variant';\r\n    const ids = mode === 'product'\r\n        ? unique(selection.map(p => p.productId))\r\n        : unique(selection.map(p => p.productVariantId));\r\n    return dataService.facet\r\n        .getAllFacets()\r\n        .mapSingle(data => data.facets.items)\r\n        .pipe(switchMap(facets => modalService.fromComponent(BulkAddFacetValuesDialogComponent, {\r\n        size: 'xl',\r\n        locals: {\r\n            facets,\r\n            mode,\r\n            ids,\r\n        },\r\n    })))\r\n        .subscribe(result => {\r\n        if (result) {\r\n            notificationService.success(marker('common.notify-bulk-update-success'), {\r\n                count: selection.length,\r\n                entity: mode === 'product' ? 'Products' : 'ProductVariants',\r\n            });\r\n            clearSelection();\r\n        }\r\n    });\r\n};\r\nconst assignFacetValuesToProductsBulkAction = {\r\n    location: 'product-list',\r\n    label: marker('catalog.edit-facet-values'),\r\n    icon: 'tag',\r\n    requiresPermission: 9,\r\n    onClick: 10,\r\n};\n\nclass UpdateProductOptionDialogComponent {\r\n    constructor() {\r\n        this.updateVariantName = true;\r\n        this.codeInputTouched = false;\r\n    }\r\n    ngOnInit() {\r\n        var _a;\r\n        const currentTranslation = this.productOption.translations.find(t => t.languageCode === this.activeLanguage);\r\n        this.name = (_a = currentTranslation === null || currentTranslation === void 0 ? void 0 : currentTranslation.name) !== null && _a !== void 0 ? _a : '';\r\n        this.code = this.productOption.code;\r\n        this.customFieldsForm = new FormGroup({});\r\n        if (this.customFields) {\r\n            const cfCurrentTranslation = (currentTranslation && currentTranslation.customFields) || {};\r\n            for (const fieldDef of this.customFields) {\r\n                const key = fieldDef.name;\r\n                const value = fieldDef.type === 'localeString'\r\n                    ? cfCurrentTranslation[key]\r\n                    : this.productOption.customFields[key];\r\n                this.customFieldsForm.addControl(fieldDef.name, new FormControl(value));\r\n            }\r\n        }\r\n    }\r\n    update() {\r\n        const result = createUpdatedTranslatable({\r\n            translatable: this.productOption,\r\n            languageCode: this.activeLanguage,\r\n            updatedFields: {\r\n                code: this.code,\r\n                name: this.name,\r\n                customFields: this.customFieldsForm.value,\r\n            },\r\n            customFieldConfig: this.customFields,\r\n            defaultTranslation: {\r\n                languageCode: this.activeLanguage,\r\n                name: '',\r\n            },\r\n        });\r\n        this.resolveWith(Object.assign(Object.assign({}, result), { autoUpdate: this.updateVariantName }));\r\n    }\r\n    cancel() {\r\n        this.resolveWith();\r\n    }\r\n    updateCode(nameValue) {\r\n        if (!this.codeInputTouched && !this.productOption.code) {\r\n            this.code = normalizeString(nameValue, '-');\r\n        }\r\n    }\r\n}\nUpdateProductOptionDialogComponent.fac = function UpdateProductOptionDialogComponent_Factory(t) { return new (t || UpdateProductOptionDialogComponent)(); };\nUpdateProductOptionDialogComponent.cmp = /*@__PURE__*/ ngcc0.defineComponent({ type: UpdateProductOptionDialogComponent, selectors: [[\"vdr-update-product-option-dialog\"]], decls: 16, vars: 13, consts: [[\"vdrDialogTitle\", \"\"], [\"for\", \"name\", 3, \"label\"], [\"id\", \"name\", \"type\", \"text\", \"required\", \"\", 3, \"ngModel\", \"ngModelChange\", \"input\"], [\"nameInput\", \"ngModel\"], [\"for\", \"code\", 3, \"label\"], [\"id\", \"code\", \"type\", \"text\", \"required\", \"\", \"pattern\", \"[a-z0-9_-]+\", 3, \"ngModel\", \"ngModelChange\"], [\"codeInput\", \"ngModel\"], [\"type\", \"checkbox\", \"clrCheckbox\", \"\", 3, \"ngModel\", \"ngModelChange\"], [4, \"ngIf\"], [\"vdrDialogButtons\", \"\"], [\"entityName\", \"ProductOption\", 3, \"customFields\", \"customFieldsFormGroup\", \"readonly\"], [\"type\", \"button\", 1, \"btn\", 3, \"click\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", 3, \"disabled\", \"click\"]], template: function UpdateProductOptionDialogComponent_Template(rf, ctx) { if (rf & 1) {\n        ngcc0.template(0, UpdateProductOptionDialogComponent_ng_template_0_Template, 2, 3, \"ng-template\", 0);\n        ngcc0.elementStart(1, \"vdr-form-field\", 1);\n        ngcc0.pipe(2, \"translate\");\n        ngcc0.elementStart(3, \"input\", 2, 3);\n        ngcc0.listener(\"ngModelChange\", function UpdateProductOptionDialogComponent_Template_input_ngModelChange_3_listener($event) { return ctx.name = $event; })(\"input\", function UpdateProductOptionDialogComponent_Template_input_input_3_listener($event) { return ctx.updateCode($event.target.value); });\n        ngcc0.elementEnd();\n        ngcc0.elementEnd();\n        ngcc0.elementStart(5, \"vdr-form-field\", 4);\n        ngcc0.pipe(6, \"translate\");\n        ngcc0.elementStart(7, \"input\", 5, 6);\n        ngcc0.listener(\"ngModelChange\", function UpdateProductOptionDialogComponent_Template_input_ngModelChange_7_listener($event) { return ctx.code = $event; });\n        ngcc0.elementEnd();\n        ngcc0.elementEnd();\n        ngcc0.elementStart(9, \"clr-checkbox-wrapper\");\n        ngcc0.elementStart(10, \"input\", 7);\n        ngcc0.listener(\"ngModelChange\", function UpdateProductOptionDialogComponent_Template_input_ngModelChange_10_listener($event) { return ctx.updateVariantName = $event; });\n        ngcc0.elementEnd();\n        ngcc0.elementStart(11, \"label\");\n        ngcc0.text(12);\n        ngcc0.pipe(13, \"translate\");\n        ngcc0.elementEnd();\n        ngcc0.elementEnd();\n        ngcc0.template(14, UpdateProductOptionDialogComponent_section_14_Template, 6, 9, \"section\", 8);\n        ngcc0.template(15, UpdateProductOptionDialogComponent_ng_template_15_Template, 6, 7, \"ng-template\", 9);\n    } if (rf & 2) {\n        ngcc0.advance(1);\n        ngcc0.property(\"label\", ngcc0.pipeBind1(2, 7, \"catalog.option-name\"));\n        ngcc0.advance(2);\n        ngcc0.property(\"ngModel\", ctx.name);\n        ngcc0.advance(2);\n        ngcc0.property(\"label\", ngcc0.pipeBind1(6, 9, \"common.code\"));\n        ngcc0.advance(2);\n        ngcc0.property(\"ngModel\", ctx.code);\n        ngcc0.advance(3);\n        ngcc0.property(\"ngModel\", ctx.updateVariantName);\n        ngcc0.advance(2);\n        ngcc0.textInterpolate(ngcc0.pipeBind1(13, 11, \"catalog.auto-update-option-variant-name\"));\n        ngcc0.advance(2);\n        ngcc0.property(\"ngIf\", ctx.customFields.length);\n    } }, directives: [ngcc2.DialogTitleDirective, ngcc2.FormFieldComponent, ngcc2.FormFieldControlDirective, ngcc3.DefaultValueAccessor, ngcc3.RequiredValidator, ngcc3.NgControlStatus, ngcc3.NgModel, ngcc3.PatternValidator, ngcc7.ClrCheckboxWrapper, ngcc3.CheckboxControlValueAccessor, ngcc7.ClrCheckbox, ngcc7.ClrLabel, ngcc4.NgIf, ngcc2.DialogButtonsDirective, ngcc2.TabbedCustomFieldsComponent], pipes: [ngcc5.TranslatePipe, ngcc2.HasPermissionPipe], styles: [\"\"], changeDetection: 0 });\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ngcc0.setClassMetadata(UpdateProductOptionDialogComponent, [{\n        type: Component,\n        args: [{\n                selector: 'vdr-update-product-option-dialog',\n                template: \"<ng-template vdrDialogTitle>{{ 'catalog.update-product-option' | translate }}</ng-template>\\r\\n<vdr-form-field [label]=\\\"'catalog.option-name' | translate\\\" for=\\\"name\\\">\\r\\n    <input\\r\\n        id=\\\"name\\\"\\r\\n        type=\\\"text\\\"\\r\\n        #nameInput=\\\"ngModel\\\"\\r\\n        [(ngModel)]=\\\"name\\\"\\r\\n        required\\r\\n        (input)=\\\"updateCode($event.target.value)\\\"\\r\\n    />\\r\\n</vdr-form-field>\\r\\n<vdr-form-field [label]=\\\"'common.code' | translate\\\" for=\\\"code\\\">\\r\\n    <input id=\\\"code\\\" type=\\\"text\\\" #codeInput=\\\"ngModel\\\" required [(ngModel)]=\\\"code\\\" pattern=\\\"[a-z0-9_-]+\\\" />\\r\\n</vdr-form-field>\\r\\n<clr-checkbox-wrapper>\\r\\n    <input type=\\\"checkbox\\\" clrCheckbox [(ngModel)]=\\\"updateVariantName\\\" />\\r\\n    <label>{{ 'catalog.auto-update-option-variant-name' | translate }}</label>\\r\\n</clr-checkbox-wrapper>\\r\\n<section *ngIf=\\\"customFields.length\\\">\\r\\n    <label>{{ 'common.custom-fields' | translate }}</label>\\r\\n    <vdr-tabbed-custom-fields\\r\\n        entityName=\\\"ProductOption\\\"\\r\\n        [customFields]=\\\"customFields\\\"\\r\\n        [customFieldsFormGroup]=\\\"customFieldsForm\\\"\\r\\n        [readonly]=\\\"!(['UpdateCatalog', 'UpdateProduct'] | hasPermission)\\\"\\r\\n    ></vdr-tabbed-custom-fields>\\r\\n</section>\\r\\n\\r\\n<ng-template vdrDialogButtons>\\r\\n    <button type=\\\"button\\\" class=\\\"btn\\\" (click)=\\\"cancel()\\\">{{ 'common.cancel' | translate }}</button>\\r\\n    <button\\r\\n        type=\\\"submit\\\"\\r\\n        (click)=\\\"update()\\\"\\r\\n        [disabled]=\\\"\\r\\n            nameInput.invalid ||\\r\\n            codeInput.invalid ||\\r\\n            (nameInput.pristine && codeInput.pristine && customFieldsForm.pristine)\\r\\n        \\\"\\r\\n        class=\\\"btn btn-primary\\\"\\r\\n    >\\r\\n        {{ 'catalog.update-product-option' | translate }}\\r\\n    </button>\\r\\n</ng-template>\\r\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\"\"]\n            }]\n    }], function () { return []; }, null); })();\n\nclass ProductVariantsListComponent {\r\n    constructor(changeDetector, modalService, dataService) {\r\n        this.changeDetector = changeDetector;\r\n        this.modalService = modalService;\r\n        this.dataService = dataService;\r\n        this.assignToChannel = new EventEmitter();\r\n        this.removeFromChannel = new EventEmitter();\r\n        this.assetChange = new EventEmitter();\r\n        this.selectionChange = new EventEmitter();\r\n        this.selectFacetValueClick = new EventEmitter();\r\n        this.updateProductOption = new EventEmitter();\r\n        this.selectedVariantIds = [];\r\n        this.formGroupMap = new Map();\r\n        this.GlobalFlag = GlobalFlag;\r\n        this.updatePermission = [Permission.UpdateCatalog, Permission.UpdateProduct];\r\n    }\r\n    ngOnInit() {\r\n        this.dataService.settings.getGlobalSettings('cache-first').single$.subscribe(({ globalSettings }) => {\r\n            this.globalTrackInventory = globalSettings.trackInventory;\r\n            this.globalOutOfStockThreshold = globalSettings.outOfStockThreshold;\r\n            this.changeDetector.markForCheck();\r\n        });\r\n        this.subscription = this.formArray.valueChanges.subscribe(() => this.changeDetector.markForCheck());\r\n        this.subscription.add(this.formArray.valueChanges\r\n            .pipe(map(value => value.length), debounceTime(1), distinctUntilChanged())\r\n            .subscribe(() => {\r\n            this.buildFormGroupMap();\r\n        }));\r\n        this.buildFormGroupMap();\r\n    }\r\n    ngOnChanges(changes) {\r\n        if ('facets' in changes && !!changes['facets'].currentValue) {\r\n            this.facetValues = flattenFacetValues(this.facets);\r\n        }\r\n    }\r\n    ngOnDestroy() {\r\n        if (this.subscription) {\r\n            this.subscription.unsubscribe();\r\n        }\r\n    }\r\n    isDefaultChannel(channelCode) {\r\n        return channelCode === DEFAULT_CHANNEL_CODE;\r\n    }\r\n    trackById(index, item) {\r\n        return item.id;\r\n    }\r\n    inventoryIsNotTracked(formGroup) {\r\n        var _a;\r\n        const trackInventory = (_a = formGroup.get('trackInventory')) === null || _a === void 0 ? void 0 : _a.value;\r\n        return (trackInventory === GlobalFlag.FALSE ||\r\n            (trackInventory === GlobalFlag.INHERIT && this.globalTrackInventory === false));\r\n    }\r\n    getTaxCategoryName(group) {\r\n        const control = group.get(['taxCategoryId']);\r\n        if (control && this.taxCategories) {\r\n            const match = this.taxCategories.find(t => t.id === control.value);\r\n            return match ? match.name : '';\r\n        }\r\n        return '';\r\n    }\r\n    getStockOnHandMinValue(variant) {\r\n        var _a, _b;\r\n        const effectiveOutOfStockThreshold = ((_a = variant.get('useGlobalOutOfStockThreshold')) === null || _a === void 0 ? void 0 : _a.value)\r\n            ? this.globalOutOfStockThreshold\r\n            : (_b = variant.get('outOfStockThreshold')) === null || _b === void 0 ? void 0 : _b.value;\r\n        return effectiveOutOfStockThreshold;\r\n    }\r\n    getSaleableStockLevel(variant) {\r\n        const effectiveOutOfStockThreshold = variant.useGlobalOutOfStockThreshold\r\n            ? this.globalOutOfStockThreshold\r\n            : variant.outOfStockThreshold;\r\n        return variant.stockOnHand - variant.stockAllocated - effectiveOutOfStockThreshold;\r\n    }\r\n    areAllSelected() {\r\n        return !!this.variants && this.selectedVariantIds.length === this.variants.length;\r\n    }\r\n    onAssetChange(variantId, event) {\r\n        this.assetChange.emit(Object.assign({ variantId }, event));\r\n        const index = this.variants.findIndex(v => v.id === variantId);\r\n        this.formArray.at(index).markAsDirty();\r\n    }\r\n    toggleSelectAll() {\r\n        if (this.areAllSelected()) {\r\n            this.selectedVariantIds = [];\r\n        }\r\n        else {\r\n            this.selectedVariantIds = this.variants.map(v => v.id);\r\n        }\r\n        this.selectionChange.emit(this.selectedVariantIds);\r\n    }\r\n    toggleSelectVariant(variantId) {\r\n        const index = this.selectedVariantIds.indexOf(variantId);\r\n        if (-1 < index) {\r\n            this.selectedVariantIds.splice(index, 1);\r\n        }\r\n        else {\r\n            this.selectedVariantIds.push(variantId);\r\n        }\r\n        this.selectionChange.emit(this.selectedVariantIds);\r\n    }\r\n    optionGroupName(optionGroupId) {\r\n        var _a;\r\n        const group = this.optionGroups.find(g => g.id === optionGroupId);\r\n        if (group) {\r\n            const translation = (_a = group === null || group === void 0 ? void 0 : group.translations.find(t => t.languageCode === this.activeLanguage)) !== null && _a !== void 0 ? _a : group.translations[0];\r\n            return translation.name;\r\n        }\r\n    }\r\n    optionName(option) {\r\n        var _a;\r\n        const translation = (_a = option.translations.find(t => t.languageCode === this.activeLanguage)) !== null && _a !== void 0 ? _a : option.translations[0];\r\n        return translation.name;\r\n    }\r\n    pendingFacetValues(variant) {\r\n        if (this.facets) {\r\n            const formFacetValueIds = this.getFacetValueIds(variant.id);\r\n            const variantFacetValueIds = variant.facetValues.map(fv => fv.id);\r\n            return formFacetValueIds\r\n                .filter(x => !variantFacetValueIds.includes(x))\r\n                .map(id => this.facetValues.find(fv => fv.id === id))\r\n                .filter(notNullOrUndefined);\r\n        }\r\n        else {\r\n            return [];\r\n        }\r\n    }\r\n    existingFacetValues(variant) {\r\n        const formFacetValueIds = this.getFacetValueIds(variant.id);\r\n        const intersection = [...formFacetValueIds].filter(x => variant.facetValues.map(fv => fv.id).includes(x));\r\n        return intersection\r\n            .map(id => variant.facetValues.find(fv => fv.id === id))\r\n            .filter(notNullOrUndefined);\r\n    }\r\n    removeFacetValue(variant, facetValueId) {\r\n        const formGroup = this.formGroupMap.get(variant.id);\r\n        if (formGroup) {\r\n            const newValue = formGroup.value.facetValueIds.filter(id => id !== facetValueId);\r\n            formGroup.patchValue({\r\n                facetValueIds: newValue,\r\n            });\r\n            formGroup.markAsDirty();\r\n        }\r\n    }\r\n    isVariantSelected(variantId) {\r\n        return -1 < this.selectedVariantIds.indexOf(variantId);\r\n    }\r\n    editOption(option) {\r\n        this.modalService\r\n            .fromComponent(UpdateProductOptionDialogComponent, {\r\n            size: 'md',\r\n            locals: {\r\n                productOption: option,\r\n                activeLanguage: this.activeLanguage,\r\n                customFields: this.customOptionFields,\r\n            },\r\n        })\r\n            .subscribe(result => {\r\n            if (result) {\r\n                this.updateProductOption.emit(result);\r\n            }\r\n        });\r\n    }\r\n    buildFormGroupMap() {\r\n        this.formGroupMap.clear();\r\n        for (const controlGroup of this.formArray.controls) {\r\n            this.formGroupMap.set(controlGroup.value.id, controlGroup);\r\n        }\r\n        this.changeDetector.markForCheck();\r\n    }\r\n    getFacetValueIds(id) {\r\n        var _a;\r\n        const formValue = (_a = this.formGroupMap.get(id)) === null || _a === void 0 ? void 0 : _a.value;\r\n        return formValue.facetValueIds;\r\n    }\r\n}\nProductVariantsListComponent.fac = function ProductVariantsListComponent_Factory(t) { return new (t || ProductVariantsListComponent)(ngcc0.directiveInject(ngcc0.ChangeDetectorRef), ngcc0.directiveInject(ngcc2.ModalService), ngcc0.directiveInject(ngcc2.DataService)); };\nProductVariantsListComponent.cmp = /*@__PURE__*/ ngcc0.defineComponent({ type: ProductVariantsListComponent, selectors: [[\"vdr-product-variants-list\"]], inputs: { formArray: [\"productVariantsFormArray\", \"formArray\"], variants: \"variants\", paginationConfig: \"paginationConfig\", channelPriceIncludesTax: \"channelPriceIncludesTax\", taxCategories: \"taxCategories\", facets: \"facets\", optionGroups: \"optionGroups\", customFields: \"customFields\", customOptionFields: \"customOptionFields\", activeLanguage: \"activeLanguage\", pendingAssetChanges: \"pendingAssetChanges\" }, outputs: { assignToChannel: \"assignToChannel\", removeFromChannel: \"removeFromChannel\", assetChange: \"assetChange\", selectionChange: \"selectionChange\", selectFacetValueClick: \"selectFacetValueClick\", updateProductOption: \"updateProductOption\" }, features: [ngcc0.NgOnChangesFeature], decls: 3, vars: 6, consts: [[1, \"variants-list\"], [\"class\", \"variant-container card\", 3, \"disabled\", 4, \"ngFor\", \"ngForOf\", \"ngForTrackBy\"], [1, \"variant-container\", \"card\"], [3, \"formGroup\", 4, \"ngIf\"], [3, \"formGroup\"], [1, \"card-block\", \"header-row\"], [1, \"details\"], [1, \"sku\", 3, \"readonly\"], [\"clrInput\", \"\", \"type\", \"text\", \"formControlName\", \"sku\", 3, \"readonly\", \"placeholder\"], [1, \"name\", 3, \"readonly\"], [\"clrInput\", \"\", \"type\", \"text\", \"formControlName\", \"name\", 3, \"readonly\", \"placeholder\"], [1, \"right-controls\"], [4, \"vdrIfPermissions\"], [1, \"card-block\"], [1, \"variant-body\"], [1, \"assets\"], [3, \"compact\", \"assets\", \"featuredAsset\", \"updatePermissions\", \"change\"], [1, \"variant-form-inputs\"], [1, \"standard-fields\"], [1, \"variant-form-input-row\"], [1, \"tax-category\"], [4, \"vdrIfPermissions\", \"vdrIfPermissionsElse\"], [\"taxCategoryLabel\", \"\"], [1, \"price\"], [\"clrInput\", \"\", \"formControlName\", \"price\", 3, \"currencyCode\", \"readonly\", 4, \"ngIf\"], [\"clrInput\", \"\", \"formControlName\", \"priceWithTax\", 3, \"currencyCode\", \"readonly\", 4, \"ngIf\"], [3, \"price\", \"currencyCode\", \"priceIncludesTax\", \"taxCategoryId\"], [3, \"content\"], [\"clrInput\", \"\", \"type\", \"number\", \"step\", \"1\", \"formControlName\", \"stockOnHand\", 3, \"min\", \"readonly\", \"vdrDisabled\"], [1, \"clr-control-label\"], [1, \"value\"], [1, \"out-of-stock-threshold-wrapper\"], [1, \"flex\"], [\"clrInput\", \"\", \"type\", \"number\", 3, \"formControl\", \"readonly\", \"vdrDisabled\"], [\"type\", \"checkbox\", \"clrToggle\", \"\", \"name\", \"useGlobalOutOfStockThreshold\", \"formControlName\", \"useGlobalOutOfStockThreshold\", 3, \"vdrDisabled\"], [1, \"custom-fields\"], [\"formGroupName\", \"customFields\", 4, \"ngIf\"], [1, \"options-facets\"], [3, \"entity\"], [4, \"ngIf\"], [1, \"flex-spacer\"], [1, \"facets\"], [3, \"facetValue\", \"removable\", \"remove\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"btn btn-sm btn-secondary\", 3, \"click\", 4, \"vdrIfPermissions\"], [4, \"vdrIfMultichannel\"], [\"type\", \"checkbox\", \"clrToggle\", \"\", \"name\", \"enabled\", \"formControlName\", \"enabled\"], [\"clrSelect\", \"\", \"name\", \"options\", \"formControlName\", \"taxCategoryId\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [3, \"value\"], [1, \"tax-category-label\"], [\"clrInput\", \"\", \"formControlName\", \"price\", 3, \"currencyCode\", \"readonly\"], [\"clrInput\", \"\", \"formControlName\", \"priceWithTax\", 3, \"currencyCode\", \"readonly\"], [\"clrSelect\", \"\", \"name\", \"options\", \"formControlName\", \"trackInventory\"], [\"formGroupName\", \"customFields\"], [\"entityName\", \"ProductVariant\", 3, \"customFields\", \"compact\", \"customFieldsFormGroup\", \"readonly\"], [1, \"options\"], [3, \"colorFrom\", \"invert\", \"icon\", \"iconClick\", 4, \"ngFor\", \"ngForOf\"], [1, \"btn\", \"btn-link\", \"btn-sm\", 3, \"routerLink\"], [3, \"colorFrom\", \"invert\", \"icon\", \"iconClick\"], [1, \"option-group-name\"], [3, \"facetValue\", \"removable\", \"remove\"], [1, \"btn\", \"btn-sm\", \"btn-secondary\", 3, \"click\"], [\"shape\", \"plus\"], [\"class\", \"card-block\", 4, \"vdrIfDefaultChannelActive\"], [1, \"flex\", \"channel-assignment\"], [4, \"ngFor\", \"ngForOf\"], [1, \"btn\", \"btn-sm\", 3, \"click\"], [\"shape\", \"layers\"], [\"icon\", \"times-circle\", 3, \"title\", \"iconClick\", 4, \"ngIf\"], [\"icon\", \"times-circle\", 3, \"title\", \"iconClick\"], [3, \"channelCode\"]], template: function ProductVariantsListComponent_Template(rf, ctx) { if (rf & 1) {\n        ngcc0.elementStart(0, \"div\", 0);\n        ngcc0.template(1, ProductVariantsListComponent_div_1_Template, 2, 3, \"div\", 1);\n        ngcc0.pipe(2, \"paginate\");\n        ngcc0.elementEnd();\n    } if (rf & 2) {\n        ngcc0.advance(1);\n        ngcc0.property(\"ngForOf\", ngcc0.pipeBind2(2, 2, ctx.variants, ctx.paginationConfig || ngcc0.pureFunction0(5, _c39)))(\"ngForTrackBy\", ctx.trackById);\n    } }, directives: function () { return [ngcc4.NgForOf, ngcc7.ClrDatagridItemsTrackBy, ngcc4.NgIf, ngcc3.NgControlStatusGroup, ngcc3.FormGroupDirective, ngcc2.TitleInputComponent, ngcc7.ClrInputContainer, ngcc2.FormFieldControlDirective, ngcc3.DefaultValueAccessor, ngcc7.ClrInput, ngcc3.NgControlStatus, ngcc3.FormControlName, ngcc2.IfPermissionsDirective, AssetsComponent, ngcc7.ClrLabel, VariantPriceDetailComponent, ngcc2.HelpTooltipComponent, ngcc3.NumberValueAccessor, ngcc3.MinValidator, ngcc2.DisabledDirective, ngcc3.FormControlDirective, ngcc7.ClrCheckboxWrapper, ngcc3.CheckboxControlValueAccessor, ngcc7.ClrCheckbox, ngcc2.EntityInfoComponent, ngcc2.IfMultichannelDirective, ngcc7.ClrSelectContainer, ngcc3.SelectControlValueAccessor, ngcc7.ClrSelect, ngcc3.NgSelectOption, ngcc3.NgSelectMultipleOption, ngcc2.CurrencyInputComponent, ngcc3.FormGroupName, ngcc2.TabbedCustomFieldsComponent, ngcc1.RouterLinkWithHref, ngcc2.ChipComponent, ngcc2.FacetValueChipComponent, ngcc7.ClrIconCustomTag, ngcc2.IfDefaultChannelActiveDirective, ngcc2.ChannelBadgeComponent]; }, pipes: function () { return [ngcc6.PaginatePipe, ngcc2.HasPermissionPipe, ngcc5.TranslatePipe, ngcc2.SortPipe, ngcc2.ChannelLabelPipe]; }, styles: [\".with-selected[_ngcontent-%COMP%]{display:flex;min-height:52px;align-items:center;border:1px solid var(--color-component-border-100);border-radius:3px;padding:6px 18px}.with-selected[_ngcontent-%COMP%]   vdr-select-toggle[_ngcontent-%COMP%]{margin-right:12px}.with-selected[_ngcontent-%COMP%] > label[_ngcontent-%COMP%]{margin-right:12px}.variant-container[_ngcontent-%COMP%]{transition:background-color .2s;min-height:330px}.variant-container.disabled[_ngcontent-%COMP%]{background-color:var(--color-component-bg-200)}.variant-container[_ngcontent-%COMP%]   .header-row[_ngcontent-%COMP%]{display:flex;align-items:center;flex-wrap:wrap}.variant-container[_ngcontent-%COMP%]   .variant-body[_ngcontent-%COMP%]{display:flex;flex-direction:column}@media screen and (min-width: 768px){.variant-container[_ngcontent-%COMP%]   .variant-body[_ngcontent-%COMP%]{flex-direction:row}}.variant-container[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:1;margin-right:12px}@media screen and (min-width: 768px){.variant-container[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]{flex-direction:row;height:36px}}.variant-container[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{flex:1}.variant-container[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]     .clr-control-container{width:100%}.variant-container[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]     .clr-control-container input.clr-input{min-width:100%}.variant-container[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   .sku[_ngcontent-%COMP%]{width:160px;margin-right:20px;flex:0}.variant-container[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]     .name input{min-width:300px}.variant-container[_ngcontent-%COMP%]   .right-controls[_ngcontent-%COMP%]{display:flex}.variant-container[_ngcontent-%COMP%]   .tax-category-label[_ngcontent-%COMP%]{margin-top:3px}.variant-container[_ngcontent-%COMP%]   .variant-form-inputs[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column}@media screen and (min-width: 768px){.variant-container[_ngcontent-%COMP%]   .variant-form-inputs[_ngcontent-%COMP%]{flex-direction:row}}.variant-container[_ngcontent-%COMP%]   .variant-form-input-row[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}@media screen and (min-width: 768px){.variant-container[_ngcontent-%COMP%]   .variant-form-input-row[_ngcontent-%COMP%]{margin:0 6px 8px 24px}}.variant-container[_ngcontent-%COMP%]   .variant-form-input-row[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin-right:24px;margin-bottom:24px}.variant-container[_ngcontent-%COMP%]   .track-inventory-toggle[_ngcontent-%COMP%]{margin-top:22px}.variant-container[_ngcontent-%COMP%]   .clr-form-control[_ngcontent-%COMP%]{margin-top:0}.variant-container[_ngcontent-%COMP%]   .facets[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;align-items:center}.variant-container[_ngcontent-%COMP%]   .pricing[_ngcontent-%COMP%]{display:flex}.variant-container[_ngcontent-%COMP%]   .pricing[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{margin-right:12px}.variant-container[_ngcontent-%COMP%]   .option-group-name[_ngcontent-%COMP%]{color:var(--color-text-200);text-transform:uppercase;font-size:10px;margin-right:3px;height:11px}.variant-container[_ngcontent-%COMP%]   .options-facets[_ngcontent-%COMP%]{display:flex;color:var(--color-grey-400)}.variant-container[_ngcontent-%COMP%]     .clr-control-container{width:100%}.channel-assignment[_ngcontent-%COMP%]{justify-content:flex-end;flex-wrap:wrap;max-height:110px;overflow-y:auto}.channel-assignment[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin:6px 12px 6px 0}.out-of-stock-threshold-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column}.out-of-stock-threshold-wrapper[_ngcontent-%COMP%]   clr-toggle-wrapper[_ngcontent-%COMP%]{margin-left:24px}.inventory-untracked[_ngcontent-%COMP%]{opacity:.5}\"], changeDetection: 0 });\r\nProductVariantsListComponent.ctorParameters = () => [\r\n    { type: ChangeDetectorRef },\r\n    { type: ModalService },\r\n    { type: DataService }\r\n];\r\nProductVariantsListComponent.propDecorators = {\r\n    formArray: [{ type: Input, args: ['productVariantsFormArray',] }],\r\n    variants: [{ type: Input }],\r\n    paginationConfig: [{ type: Input }],\r\n    channelPriceIncludesTax: [{ type: Input }],\r\n    taxCategories: [{ type: Input }],\r\n    facets: [{ type: Input }],\r\n    optionGroups: [{ type: Input }],\r\n    customFields: [{ type: Input }],\r\n    customOptionFields: [{ type: Input }],\r\n    activeLanguage: [{ type: Input }],\r\n    pendingAssetChanges: [{ type: Input }],\r\n    assignToChannel: [{ type: Output }],\r\n    removeFromChannel: [{ type: Output }],\r\n    assetChange: [{ type: Output }],\r\n    selectionChange: [{ type: Output }],\r\n    selectFacetValueClick: [{ type: Output }],\r\n    updateProductOption: [{ type: Output }]\r\n};\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ngcc0.setClassMetadata(ProductVariantsListComponent, [{\n        type: Component,\n        args: [{\n                selector: 'vdr-product-variants-list',\n                template: \"<div class=\\\"variants-list\\\">\\r\\n    <div\\r\\n        class=\\\"variant-container card\\\"\\r\\n        *ngFor=\\\"\\r\\n            let variant of variants | paginate: paginationConfig || { itemsPerPage: 10, currentPage: 1 };\\r\\n            trackBy: trackById;\\r\\n            let i = index\\r\\n        \\\"\\r\\n        [class.disabled]=\\\"!formGroupMap.get(variant.id)?.get('enabled')?.value\\\"\\r\\n    >\\r\\n        <ng-container *ngIf=\\\"formGroupMap.get(variant.id) as formGroup\\\" [formGroup]=\\\"formGroup\\\">\\r\\n            <div class=\\\"card-block header-row\\\">\\r\\n                <div class=\\\"details\\\">\\r\\n                    <vdr-title-input class=\\\"sku\\\" [readonly]=\\\"!(updatePermission | hasPermission)\\\">\\r\\n                        <clr-input-container>\\r\\n                            <input\\r\\n                                clrInput\\r\\n                                type=\\\"text\\\"\\r\\n                                formControlName=\\\"sku\\\"\\r\\n                                [readonly]=\\\"!(updatePermission | hasPermission)\\\"\\r\\n                                [placeholder]=\\\"'catalog.sku' | translate\\\"\\r\\n                            />\\r\\n                        </clr-input-container>\\r\\n                    </vdr-title-input>\\r\\n                    <vdr-title-input class=\\\"name\\\" [readonly]=\\\"!(updatePermission | hasPermission)\\\">\\r\\n                        <clr-input-container>\\r\\n                            <input\\r\\n                                clrInput\\r\\n                                type=\\\"text\\\"\\r\\n                                formControlName=\\\"name\\\"\\r\\n                                [readonly]=\\\"!(updatePermission | hasPermission)\\\"\\r\\n                                [placeholder]=\\\"'common.name' | translate\\\"\\r\\n                            />\\r\\n                        </clr-input-container>\\r\\n                    </vdr-title-input>\\r\\n                </div>\\r\\n                <div class=\\\"right-controls\\\">\\r\\n                    <clr-toggle-wrapper *vdrIfPermissions=\\\"updatePermission\\\">\\r\\n                        <input type=\\\"checkbox\\\" clrToggle name=\\\"enabled\\\" formControlName=\\\"enabled\\\" />\\r\\n                        <label>{{ 'common.enabled' | translate }}</label>\\r\\n                    </clr-toggle-wrapper>\\r\\n                </div>\\r\\n            </div>\\r\\n            <div class=\\\"card-block\\\">\\r\\n                <div class=\\\"variant-body\\\">\\r\\n                    <div class=\\\"assets\\\">\\r\\n                        <vdr-assets\\r\\n                            [compact]=\\\"true\\\"\\r\\n                            [assets]=\\\"pendingAssetChanges[variant.id]?.assets || variant.assets\\\"\\r\\n                            [featuredAsset]=\\\"\\r\\n                                pendingAssetChanges[variant.id]?.featuredAsset || variant.featuredAsset\\r\\n                            \\\"\\r\\n                            [updatePermissions]=\\\"updatePermission\\\"\\r\\n                            (change)=\\\"onAssetChange(variant.id, $event)\\\"\\r\\n                        ></vdr-assets>\\r\\n                    </div>\\r\\n                    <div class=\\\"variant-form-inputs\\\">\\r\\n                        <div class=\\\"standard-fields\\\">\\r\\n                            <div class=\\\"variant-form-input-row\\\">\\r\\n                                <div class=\\\"tax-category\\\">\\r\\n                                    <clr-select-container\\r\\n                                        *vdrIfPermissions=\\\"updatePermission; else taxCategoryLabel\\\"\\r\\n                                    >\\r\\n                                        <label>{{ 'catalog.tax-category' | translate }}</label>\\r\\n                                        <select clrSelect name=\\\"options\\\" formControlName=\\\"taxCategoryId\\\">\\r\\n                                            <option\\r\\n                                                *ngFor=\\\"let taxCategory of taxCategories\\\"\\r\\n                                                [value]=\\\"taxCategory.id\\\"\\r\\n                                            >\\r\\n                                                {{ taxCategory.name }}\\r\\n                                            </option>\\r\\n                                        </select>\\r\\n                                    </clr-select-container>\\r\\n                                    <ng-template #taxCategoryLabel>\\r\\n                                        <label class=\\\"clr-control-label\\\">{{\\r\\n                                            'catalog.tax-category' | translate\\r\\n                                        }}</label>\\r\\n                                        <div class=\\\"tax-category-label\\\">\\r\\n                                            {{ getTaxCategoryName(formGroup) }}\\r\\n                                        </div>\\r\\n                                    </ng-template>\\r\\n                                </div>\\r\\n                                <div class=\\\"price\\\">\\r\\n                                    <clr-input-container>\\r\\n                                        <label>{{ 'catalog.price' | translate }}</label>\\r\\n                                        <vdr-currency-input\\r\\n                                            *ngIf=\\\"!channelPriceIncludesTax\\\"\\r\\n                                            clrInput\\r\\n                                            [currencyCode]=\\\"variant.currencyCode\\\"\\r\\n                                            [readonly]=\\\"!(updatePermission | hasPermission)\\\"\\r\\n                                            formControlName=\\\"price\\\"\\r\\n                                        ></vdr-currency-input>\\r\\n                                        <vdr-currency-input\\r\\n                                            *ngIf=\\\"channelPriceIncludesTax\\\"\\r\\n                                            clrInput\\r\\n                                            [currencyCode]=\\\"variant.currencyCode\\\"\\r\\n                                            [readonly]=\\\"!(updatePermission | hasPermission)\\\"\\r\\n                                            formControlName=\\\"priceWithTax\\\"\\r\\n                                        ></vdr-currency-input>\\r\\n                                    </clr-input-container>\\r\\n                                </div>\\r\\n                                <vdr-variant-price-detail\\r\\n                                    [price]=\\\"formGroup.get('price')!.value\\\"\\r\\n                                    [currencyCode]=\\\"variant.currencyCode\\\"\\r\\n                                    [priceIncludesTax]=\\\"channelPriceIncludesTax\\\"\\r\\n                                    [taxCategoryId]=\\\"formGroup.get('taxCategoryId')!.value\\\"\\r\\n                                ></vdr-variant-price-detail>\\r\\n                            </div>\\r\\n                            <div class=\\\"variant-form-input-row\\\">\\r\\n                                <clr-select-container *vdrIfPermissions=\\\"updatePermission\\\">\\r\\n                                    <label\\r\\n                                        >{{ 'catalog.track-inventory' | translate }}\\r\\n                                        <vdr-help-tooltip\\r\\n                                            [content]=\\\"'catalog.track-inventory-tooltip' | translate\\\"\\r\\n                                        ></vdr-help-tooltip>\\r\\n                                    </label>\\r\\n                                    <select clrSelect name=\\\"options\\\" formControlName=\\\"trackInventory\\\">\\r\\n                                        <option [value]=\\\"GlobalFlag.TRUE\\\">\\r\\n                                            {{ 'catalog.track-inventory-true' | translate }}\\r\\n                                        </option>\\r\\n                                        <option [value]=\\\"GlobalFlag.FALSE\\\">\\r\\n                                            {{ 'catalog.track-inventory-false' | translate }}\\r\\n                                        </option>\\r\\n                                        <option [value]=\\\"GlobalFlag.INHERIT\\\">\\r\\n                                            {{ 'catalog.track-inventory-inherit' | translate }}\\r\\n                                        </option>\\r\\n                                    </select>\\r\\n                                </clr-select-container>\\r\\n                                <clr-input-container>\\r\\n                                    <label\\r\\n                                        >{{ 'catalog.stock-on-hand' | translate }}\\r\\n                                        <vdr-help-tooltip\\r\\n                                            [content]=\\\"'catalog.stock-on-hand-tooltip' | translate\\\"\\r\\n                                        ></vdr-help-tooltip\\r\\n                                    ></label>\\r\\n                                    <input\\r\\n                                        [class.inventory-untracked]=\\\"inventoryIsNotTracked(formGroup)\\\"\\r\\n                                        clrInput\\r\\n                                        type=\\\"number\\\"\\r\\n                                        [min]=\\\"getStockOnHandMinValue(formGroup)\\\"\\r\\n                                        step=\\\"1\\\"\\r\\n                                        formControlName=\\\"stockOnHand\\\"\\r\\n                                        [readonly]=\\\"!(updatePermission | hasPermission)\\\"\\r\\n                                        [vdrDisabled]=\\\"inventoryIsNotTracked(formGroup)\\\"\\r\\n                                    />\\r\\n                                </clr-input-container>\\r\\n                                <div [class.inventory-untracked]=\\\"inventoryIsNotTracked(formGroup)\\\">\\r\\n                                    <label class=\\\"clr-control-label\\\"\\r\\n                                        >{{ 'catalog.stock-allocated' | translate }}\\r\\n                                        <vdr-help-tooltip\\r\\n                                            [content]=\\\"'catalog.stock-allocated-tooltip' | translate\\\"\\r\\n                                        ></vdr-help-tooltip\\r\\n                                    ></label>\\r\\n                                    <div class=\\\"value\\\">\\r\\n                                        {{ variant.stockAllocated }}\\r\\n                                    </div>\\r\\n                                </div>\\r\\n                                <div [class.inventory-untracked]=\\\"inventoryIsNotTracked(formGroup)\\\">\\r\\n                                    <label class=\\\"clr-control-label\\\"\\r\\n                                        >{{ 'catalog.stock-saleable' | translate }}\\r\\n                                        <vdr-help-tooltip\\r\\n                                            [content]=\\\"'catalog.stock-saleable-tooltip' | translate\\\"\\r\\n                                        ></vdr-help-tooltip\\r\\n                                    ></label>\\r\\n                                    <div class=\\\"value\\\">\\r\\n                                        {{ getSaleableStockLevel(variant) }}\\r\\n                                    </div>\\r\\n                                </div>\\r\\n                            </div>\\r\\n\\r\\n                            <div class=\\\"variant-form-input-row\\\">\\r\\n                                <div\\r\\n                                    class=\\\"out-of-stock-threshold-wrapper\\\"\\r\\n                                    [class.inventory-untracked]=\\\"inventoryIsNotTracked(formGroup)\\\"\\r\\n                                >\\r\\n                                    <label class=\\\"clr-control-label\\\"\\r\\n                                        >{{ 'catalog.out-of-stock-threshold' | translate\\r\\n                                        }}<vdr-help-tooltip\\r\\n                                            [content]=\\\"'catalog.out-of-stock-threshold-tooltip' | translate\\\"\\r\\n                                        ></vdr-help-tooltip\\r\\n                                    ></label>\\r\\n                                    <div class=\\\"flex\\\">\\r\\n                                        <clr-input-container>\\r\\n                                            <input\\r\\n                                                clrInput\\r\\n                                                type=\\\"number\\\"\\r\\n                                                [formControl]=\\\"formGroup.get('outOfStockThreshold')\\\"\\r\\n                                                [readonly]=\\\"!(updatePermission | hasPermission)\\\"\\r\\n                                                [vdrDisabled]=\\\"\\r\\n                                                    formGroup.get('useGlobalOutOfStockThreshold')?.value !==\\r\\n                                                        false || inventoryIsNotTracked(formGroup)\\r\\n                                                \\\"\\r\\n                                            />\\r\\n                                        </clr-input-container>\\r\\n                                        <clr-toggle-wrapper>\\r\\n                                            <input\\r\\n                                                type=\\\"checkbox\\\"\\r\\n                                                clrToggle\\r\\n                                                name=\\\"useGlobalOutOfStockThreshold\\\"\\r\\n                                                formControlName=\\\"useGlobalOutOfStockThreshold\\\"\\r\\n                                                [vdrDisabled]=\\\"\\r\\n                                                    !(updatePermission | hasPermission) ||\\r\\n                                                    inventoryIsNotTracked(formGroup)\\r\\n                                                \\\"\\r\\n                                            />\\r\\n                                            <label\\r\\n                                                >{{ 'catalog.use-global-value' | translate }} ({{\\r\\n                                                    globalOutOfStockThreshold\\r\\n                                                }})</label\\r\\n                                            >\\r\\n                                        </clr-toggle-wrapper>\\r\\n                                    </div>\\r\\n                                </div>\\r\\n                            </div>\\r\\n                        </div>\\r\\n                        <div class=\\\"custom-fields\\\">\\r\\n                            <div class=\\\"variant-form-input-row\\\">\\r\\n                                <section formGroupName=\\\"customFields\\\" *ngIf=\\\"customFields.length\\\">\\r\\n                                    <vdr-tabbed-custom-fields\\r\\n                                        entityName=\\\"ProductVariant\\\"\\r\\n                                        [customFields]=\\\"customFields\\\"\\r\\n                                        [compact]=\\\"true\\\"\\r\\n                                        [customFieldsFormGroup]=\\\"formGroup.get('customFields')\\\"\\r\\n                                        [readonly]=\\\"!(updatePermission | hasPermission)\\\"\\r\\n                                    ></vdr-tabbed-custom-fields>\\r\\n                                </section>\\r\\n                            </div>\\r\\n                        </div>\\r\\n                    </div>\\r\\n                </div>\\r\\n            </div>\\r\\n            <div class=\\\"card-block\\\">\\r\\n                <div class=\\\"options-facets\\\">\\r\\n                    <vdr-entity-info [entity]=\\\"variant\\\"></vdr-entity-info>\\r\\n                    <div *ngIf=\\\"variant.options.length\\\">\\r\\n                        <div class=\\\"options\\\">\\r\\n                            <vdr-chip\\r\\n                                *ngFor=\\\"let option of variant.options | sort: 'groupId'\\\"\\r\\n                                [colorFrom]=\\\"optionGroupName(option.groupId)\\\"\\r\\n                                [invert]=\\\"true\\\"\\r\\n                                (iconClick)=\\\"editOption(option)\\\"\\r\\n                                [icon]=\\\"(updatePermission | hasPermission) && 'pencil'\\\"\\r\\n                            >\\r\\n                                <span class=\\\"option-group-name\\\">{{ optionGroupName(option.groupId) }}</span>\\r\\n                                {{ optionName(option) }}\\r\\n                            </vdr-chip>\\r\\n                            <a [routerLink]=\\\"['./', 'options']\\\" class=\\\"btn btn-link btn-sm\\\"\\r\\n                                >{{ 'catalog.edit-options' | translate }}...</a\\r\\n                            >\\r\\n                        </div>\\r\\n                    </div>\\r\\n                    <div class=\\\"flex-spacer\\\"></div>\\r\\n                    <div class=\\\"facets\\\">\\r\\n                        <vdr-facet-value-chip\\r\\n                            *ngFor=\\\"let facetValue of existingFacetValues(variant)\\\"\\r\\n                            [facetValue]=\\\"facetValue\\\"\\r\\n                            [removable]=\\\"updatePermission | hasPermission\\\"\\r\\n                            (remove)=\\\"removeFacetValue(variant, facetValue.id)\\\"\\r\\n                        ></vdr-facet-value-chip>\\r\\n                        <vdr-facet-value-chip\\r\\n                            *ngFor=\\\"let facetValue of pendingFacetValues(variant)\\\"\\r\\n                            [facetValue]=\\\"facetValue\\\"\\r\\n                            [removable]=\\\"updatePermission | hasPermission\\\"\\r\\n                            (remove)=\\\"removeFacetValue(variant, facetValue.id)\\\"\\r\\n                        ></vdr-facet-value-chip>\\r\\n                        <button\\r\\n                            *vdrIfPermissions=\\\"updatePermission\\\"\\r\\n                            class=\\\"btn btn-sm btn-secondary\\\"\\r\\n                            (click)=\\\"selectFacetValueClick.emit([variant.id])\\\"\\r\\n                        >\\r\\n                            <clr-icon shape=\\\"plus\\\"></clr-icon>\\r\\n                            {{ 'catalog.add-facets' | translate }}\\r\\n                        </button>\\r\\n                    </div>\\r\\n                </div>\\r\\n            </div>\\r\\n            <ng-container *vdrIfMultichannel>\\r\\n                <div class=\\\"card-block\\\" *vdrIfDefaultChannelActive>\\r\\n                    <div class=\\\"flex channel-assignment\\\">\\r\\n                        <ng-container *ngFor=\\\"let channel of variant.channels\\\">\\r\\n                            <vdr-chip\\r\\n                                *ngIf=\\\"!isDefaultChannel(channel.code)\\\"\\r\\n                                icon=\\\"times-circle\\\"\\r\\n                                [title]=\\\"'catalog.remove-from-channel' | translate: { channelCode: channel.code }\\\"\\r\\n                                (iconClick)=\\\"\\r\\n                                    removeFromChannel.emit({ channelId: channel.id, variant: variant })\\r\\n                                \\\"\\r\\n                            >\\r\\n                                <vdr-channel-badge [channelCode]=\\\"channel.code\\\"></vdr-channel-badge>\\r\\n                                {{ channel.code | channelCodeToLabel }}\\r\\n                            </vdr-chip>\\r\\n                        </ng-container>\\r\\n                        <button class=\\\"btn btn-sm\\\" (click)=\\\"assignToChannel.emit(variant)\\\">\\r\\n                            <clr-icon shape=\\\"layers\\\"></clr-icon>\\r\\n                            {{ 'catalog.assign-to-channel' | translate }}\\r\\n                        </button>\\r\\n                    </div>\\r\\n                </div>\\r\\n            </ng-container>\\r\\n        </ng-container>\\r\\n    </div>\\r\\n</div>\\r\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\".with-selected{display:flex;min-height:52px;align-items:center;border:1px solid var(--color-component-border-100);border-radius:3px;padding:6px 18px}.with-selected vdr-select-toggle{margin-right:12px}.with-selected>label{margin-right:12px}.variant-container{transition:background-color .2s;min-height:330px}.variant-container.disabled{background-color:var(--color-component-bg-200)}.variant-container .header-row{display:flex;align-items:center;flex-wrap:wrap}.variant-container .variant-body{display:flex;flex-direction:column}@media screen and (min-width: 768px){.variant-container .variant-body{flex-direction:row}}.variant-container .details{display:flex;flex-direction:column;flex:1;margin-right:12px}@media screen and (min-width: 768px){.variant-container .details{flex-direction:row;height:36px}}.variant-container .details .name{flex:1}.variant-container .details .name ::ng-deep .clr-control-container{width:100%}.variant-container .details .name ::ng-deep .clr-control-container input.clr-input{min-width:100%}.variant-container .details .sku{width:160px;margin-right:20px;flex:0}.variant-container .details ::ng-deep .name input{min-width:300px}.variant-container .right-controls{display:flex}.variant-container .tax-category-label{margin-top:3px}.variant-container .variant-form-inputs{flex:1;display:flex;flex-direction:column}@media screen and (min-width: 768px){.variant-container .variant-form-inputs{flex-direction:row}}.variant-container .variant-form-input-row{display:flex;flex-wrap:wrap}@media screen and (min-width: 768px){.variant-container .variant-form-input-row{margin:0 6px 8px 24px}}.variant-container .variant-form-input-row>*{margin-right:24px;margin-bottom:24px}.variant-container .track-inventory-toggle{margin-top:22px}.variant-container .clr-form-control{margin-top:0}.variant-container .facets{display:flex;flex-wrap:wrap;align-items:center}.variant-container .pricing{display:flex}.variant-container .pricing>div{margin-right:12px}.variant-container .option-group-name{color:var(--color-text-200);text-transform:uppercase;font-size:10px;margin-right:3px;height:11px}.variant-container .options-facets{display:flex;color:var(--color-grey-400)}.variant-container ::ng-deep .clr-control-container{width:100%}.channel-assignment{justify-content:flex-end;flex-wrap:wrap;max-height:110px;overflow-y:auto}.channel-assignment .btn{margin:6px 12px 6px 0}.out-of-stock-threshold-wrapper{display:flex;flex-direction:column}.out-of-stock-threshold-wrapper clr-toggle-wrapper{margin-left:24px}.inventory-untracked{opacity:.5}\\n\"]\n            }]\n    }], function () { return [{ type: ngcc0.ChangeDetectorRef }, { type: ngcc2.ModalService }, { type: ngcc2.DataService }]; }, { assignToChannel: [{\n            type: Output\n        }], removeFromChannel: [{\n            type: Output\n        }], assetChange: [{\n            type: Output\n        }], selectionChange: [{\n            type: Output\n        }], selectFacetValueClick: [{\n            type: Output\n        }], updateProductOption: [{\n            type: Output\n        }], formArray: [{\n            type: Input,\n            args: ['productVariantsFormArray']\n        }], variants: [{\n            type: Input\n        }], paginationConfig: [{\n            type: Input\n        }], channelPriceIncludesTax: [{\n            type: Input\n        }], taxCategories: [{\n            type: Input\n        }], facets: [{\n            type: Input\n        }], optionGroups: [{\n            type: Input\n        }], customFields: [{\n            type: Input\n        }], customOptionFields: [{\n            type: Input\n        }], activeLanguage: [{\n            type: Input\n        }], pendingAssetChanges: [{\n            type: Input\n        }] }); })();\n\nclass ProductVariantsTableComponent {\r\n    constructor(changeDetector) {\r\n        this.changeDetector = changeDetector;\r\n        this.formGroupMap = new Map();\r\n        this.updatePermission = [Permission.UpdateCatalog, Permission.UpdateProduct];\r\n    }\r\n    ngOnInit() {\r\n        this.subscription = this.formArray.valueChanges\r\n            .pipe(map(value => value.length), debounceTime(1), distinctUntilChanged())\r\n            .subscribe(() => {\r\n            this.buildFormGroupMap();\r\n        });\r\n        this.buildFormGroupMap();\r\n    }\r\n    ngOnDestroy() {\r\n        if (this.subscription) {\r\n            this.subscription.unsubscribe();\r\n        }\r\n    }\r\n    trackByFn(index, item) {\r\n        if (item.id != null) {\r\n            return item.id;\r\n        }\r\n        else {\r\n            return index;\r\n        }\r\n    }\r\n    getFeaturedAsset(variant) {\r\n        var _a;\r\n        return ((_a = this.pendingAssetChanges[variant.id]) === null || _a === void 0 ? void 0 : _a.featuredAsset) || variant.featuredAsset;\r\n    }\r\n    optionGroupName(optionGroupId) {\r\n        const group = this.optionGroups.find(g => g.id === optionGroupId);\r\n        return group && group.name;\r\n    }\r\n    buildFormGroupMap() {\r\n        this.formGroupMap.clear();\r\n        for (const controlGroup of this.formArray.controls) {\r\n            this.formGroupMap.set(controlGroup.value.id, controlGroup);\r\n        }\r\n        this.changeDetector.markForCheck();\r\n    }\r\n}\nProductVariantsTableComponent.fac = function ProductVariantsTableComponent_Factory(t) { return new (t || ProductVariantsTableComponent)(ngcc0.directiveInject(ngcc0.ChangeDetectorRef)); };\nProductVariantsTableComponent.cmp = /*@__PURE__*/ ngcc0.defineComponent({ type: ProductVariantsTableComponent, selectors: [[\"vdr-product-variants-table\"]], inputs: { formArray: [\"productVariantsFormArray\", \"formArray\"], variants: \"variants\", paginationConfig: \"paginationConfig\", channelPriceIncludesTax: \"channelPriceIncludesTax\", optionGroups: \"optionGroups\", pendingAssetChanges: \"pendingAssetChanges\" }, decls: 24, vars: 24, consts: [[1, \"table\"], [4, \"ngFor\", \"ngForOf\"], [4, \"ngFor\", \"ngForOf\", \"ngForTrackBy\"], [3, \"formGroup\", 4, \"ngIf\"], [3, \"formGroup\"], [1, \"left\", \"align-middle\"], [1, \"card-img\"], [1, \"featured-asset\"], [3, \"src\", 4, \"ngIf\", \"ngIfElse\"], [\"placeholder\", \"\"], [\"clrInput\", \"\", \"type\", \"text\", \"formControlName\", \"name\", 3, \"readonly\", \"placeholder\"], [\"clrInput\", \"\", \"type\", \"text\", \"formControlName\", \"sku\", 3, \"readonly\", \"placeholder\"], [1, \"left\", \"align-middle\", \"price\"], [\"clrInput\", \"\", \"formControlName\", \"price\", 3, \"currencyCode\", \"readonly\", 4, \"ngIf\"], [\"clrInput\", \"\", \"formControlName\", \"priceWithTax\", 3, \"currencyCode\", \"readonly\", 4, \"ngIf\"], [1, \"left\", \"align-middle\", \"stock\"], [\"clrInput\", \"\", \"type\", \"number\", \"min\", \"0\", \"step\", \"1\", \"formControlName\", \"stockOnHand\", 3, \"readonly\"], [\"type\", \"checkbox\", \"clrToggle\", \"\", \"name\", \"enabled\", \"formControlName\", \"enabled\", 3, \"vdrDisabled\"], [3, \"src\"], [1, \"placeholder\"], [\"shape\", \"image\", \"size\", \"48\"], [\"clrInput\", \"\", \"formControlName\", \"price\", 3, \"currencyCode\", \"readonly\"], [\"clrInput\", \"\", \"formControlName\", \"priceWithTax\", 3, \"currencyCode\", \"readonly\"]], template: function ProductVariantsTableComponent_Template(rf, ctx) { if (rf & 1) {\n        ngcc0.elementStart(0, \"table\", 0);\n        ngcc0.elementStart(1, \"thead\");\n        ngcc0.elementStart(2, \"tr\");\n        ngcc0.element(3, \"th\");\n        ngcc0.elementStart(4, \"th\");\n        ngcc0.text(5);\n        ngcc0.pipe(6, \"translate\");\n        ngcc0.elementEnd();\n        ngcc0.elementStart(7, \"th\");\n        ngcc0.text(8);\n        ngcc0.pipe(9, \"translate\");\n        ngcc0.elementEnd();\n        ngcc0.template(10, ProductVariantsTableComponent_ng_container_10_Template, 3, 1, \"ng-container\", 1);\n        ngcc0.pipe(11, \"sort\");\n        ngcc0.elementStart(12, \"th\");\n        ngcc0.text(13);\n        ngcc0.pipe(14, \"translate\");\n        ngcc0.elementEnd();\n        ngcc0.elementStart(15, \"th\");\n        ngcc0.text(16);\n        ngcc0.pipe(17, \"translate\");\n        ngcc0.elementEnd();\n        ngcc0.elementStart(18, \"th\");\n        ngcc0.text(19);\n        ngcc0.pipe(20, \"translate\");\n        ngcc0.elementEnd();\n        ngcc0.elementEnd();\n        ngcc0.elementEnd();\n        ngcc0.elementStart(21, \"tbody\");\n        ngcc0.template(22, ProductVariantsTableComponent_tr_22_Template, 2, 1, \"tr\", 2);\n        ngcc0.pipe(23, \"paginate\");\n        ngcc0.elementEnd();\n        ngcc0.elementEnd();\n    } if (rf & 2) {\n        ngcc0.advance(5);\n        ngcc0.textInterpolate(ngcc0.pipeBind1(6, 8, \"common.name\"));\n        ngcc0.advance(3);\n        ngcc0.textInterpolate(ngcc0.pipeBind1(9, 10, \"catalog.sku\"));\n        ngcc0.advance(2);\n        ngcc0.property(\"ngForOf\", ngcc0.pipeBind2(11, 12, ctx.optionGroups, \"id\"));\n        ngcc0.advance(3);\n        ngcc0.textInterpolate(ngcc0.pipeBind1(14, 15, \"catalog.price\"));\n        ngcc0.advance(3);\n        ngcc0.textInterpolate(ngcc0.pipeBind1(17, 17, \"catalog.stock-on-hand\"));\n        ngcc0.advance(3);\n        ngcc0.textInterpolate(ngcc0.pipeBind1(20, 19, \"common.enabled\"));\n        ngcc0.advance(3);\n        ngcc0.property(\"ngForOf\", ngcc0.pipeBind2(23, 21, ctx.variants, ctx.paginationConfig))(\"ngForTrackBy\", ctx.trackByFn);\n    } }, directives: [ngcc4.NgForOf, ngcc7.ClrDatagridItemsTrackBy, ngcc4.NgIf, ngcc3.NgControlStatusGroup, ngcc3.FormGroupDirective, ngcc7.ClrInputContainer, ngcc2.FormFieldControlDirective, ngcc3.DefaultValueAccessor, ngcc7.ClrInput, ngcc3.NgControlStatus, ngcc3.FormControlName, ngcc3.MinValidator, ngcc3.NumberValueAccessor, ngcc7.ClrCheckboxWrapper, ngcc3.CheckboxControlValueAccessor, ngcc7.ClrCheckbox, ngcc2.DisabledDirective, ngcc7.ClrIconCustomTag, ngcc2.CurrencyInputComponent], pipes: [ngcc5.TranslatePipe, ngcc2.SortPipe, ngcc6.PaginatePipe, ngcc2.HasPermissionPipe, ngcc2.AssetPreviewPipe, ngcc2.StringToColorPipe], styles: [\".placeholder[_ngcontent-%COMP%]{color:var(--color-grey-300)}.stock[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .price[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{max-width:96px}td[_ngcontent-%COMP%]{transition:background-color .2s}td.disabled[_ngcontent-%COMP%]{background-color:var(--color-component-bg-200)}\"], changeDetection: 0 });\r\nProductVariantsTableComponent.ctorParameters = () => [\r\n    { type: ChangeDetectorRef }\r\n];\r\nProductVariantsTableComponent.propDecorators = {\r\n    formArray: [{ type: Input, args: ['productVariantsFormArray',] }],\r\n    variants: [{ type: Input }],\r\n    paginationConfig: [{ type: Input }],\r\n    channelPriceIncludesTax: [{ type: Input }],\r\n    optionGroups: [{ type: Input }],\r\n    pendingAssetChanges: [{ type: Input }]\r\n};\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ngcc0.setClassMetadata(ProductVariantsTableComponent, [{\n        type: Component,\n        args: [{\n                selector: 'vdr-product-variants-table',\n                template: \"<table class=\\\"table\\\">\\r\\n    <thead>\\r\\n        <tr>\\r\\n            <th></th>\\r\\n            <th>{{ 'common.name' | translate }}</th>\\r\\n            <th>{{ 'catalog.sku' | translate }}</th>\\r\\n            <ng-container *ngFor=\\\"let optionGroup of optionGroups | sort: 'id'\\\">\\r\\n                <th>{{ optionGroup.name }}</th>\\r\\n            </ng-container>\\r\\n            <th>{{ 'catalog.price' | translate }}</th>\\r\\n            <th>{{ 'catalog.stock-on-hand' | translate }}</th>\\r\\n            <th>{{ 'common.enabled' | translate }}</th>\\r\\n        </tr>\\r\\n    </thead>\\r\\n    <tbody>\\r\\n        <tr *ngFor=\\\"let variant of variants | paginate: paginationConfig; index as i; trackBy: trackByFn\\\">\\r\\n            <ng-container *ngIf=\\\"formGroupMap.get(variant.id) as formGroup\\\" [formGroup]=\\\"formGroup\\\">\\r\\n                <td class=\\\"left align-middle\\\" [class.disabled]=\\\"!formGroup.get('enabled')!.value\\\">\\r\\n                    <div class=\\\"card-img\\\">\\r\\n                        <div class=\\\"featured-asset\\\">\\r\\n                            <img\\r\\n                                *ngIf=\\\"getFeaturedAsset(variant) as featuredAsset; else placeholder\\\"\\r\\n                                [src]=\\\"featuredAsset | assetPreview: 'tiny'\\\"\\r\\n                            />\\r\\n                            <ng-template #placeholder>\\r\\n                                <div class=\\\"placeholder\\\">\\r\\n                                    <clr-icon shape=\\\"image\\\" size=\\\"48\\\"></clr-icon>\\r\\n                                </div>\\r\\n                            </ng-template>\\r\\n                        </div>\\r\\n                    </div>\\r\\n                </td>\\r\\n                <td class=\\\"left align-middle\\\" [class.disabled]=\\\"!formGroup.get('enabled')!.value\\\">\\r\\n                    <clr-input-container>\\r\\n                        <input\\r\\n                            clrInput\\r\\n                            type=\\\"text\\\"\\r\\n                            formControlName=\\\"name\\\"\\r\\n                            [readonly]=\\\"!(updatePermission | hasPermission)\\\"\\r\\n                            [placeholder]=\\\"'common.name' | translate\\\"\\r\\n                        />\\r\\n                    </clr-input-container>\\r\\n                </td>\\r\\n                <td class=\\\"left align-middle\\\" [class.disabled]=\\\"!formGroup.get('enabled')!.value\\\">\\r\\n                    <clr-input-container>\\r\\n                        <input\\r\\n                            clrInput\\r\\n                            type=\\\"text\\\"\\r\\n                            formControlName=\\\"sku\\\"\\r\\n                            [readonly]=\\\"!(updatePermission | hasPermission)\\\"\\r\\n                            [placeholder]=\\\"'catalog.sku' | translate\\\"\\r\\n                        />\\r\\n                    </clr-input-container>\\r\\n                </td>\\r\\n                <ng-container *ngFor=\\\"let option of variant.options | sort: 'groupId'\\\">\\r\\n                    <td\\r\\n                        class=\\\"left align-middle\\\"\\r\\n                        [class.disabled]=\\\"!formGroup.get('enabled')!.value\\\"\\r\\n                        [style.color]=\\\"optionGroupName(option.groupId) | stringToColor\\\"\\r\\n                    >\\r\\n                        {{ option.name }}\\r\\n                    </td>\\r\\n                </ng-container>\\r\\n                <td class=\\\"left align-middle price\\\" [class.disabled]=\\\"!formGroup.get('enabled')!.value\\\">\\r\\n                    <clr-input-container>\\r\\n                        <vdr-currency-input\\r\\n                            *ngIf=\\\"!channelPriceIncludesTax\\\"\\r\\n                            clrInput\\r\\n                            [currencyCode]=\\\"variant.currencyCode\\\"\\r\\n                            [readonly]=\\\"!(updatePermission | hasPermission)\\\"\\r\\n                            formControlName=\\\"price\\\"\\r\\n                        ></vdr-currency-input>\\r\\n                        <vdr-currency-input\\r\\n                            *ngIf=\\\"channelPriceIncludesTax\\\"\\r\\n                            clrInput\\r\\n                            [currencyCode]=\\\"variant.currencyCode\\\"\\r\\n                            [readonly]=\\\"!(updatePermission | hasPermission)\\\"\\r\\n                            formControlName=\\\"priceWithTax\\\"\\r\\n                        ></vdr-currency-input>\\r\\n                    </clr-input-container>\\r\\n                </td>\\r\\n                <td class=\\\"left align-middle stock\\\" [class.disabled]=\\\"!formGroup.get('enabled')!.value\\\">\\r\\n                    <clr-input-container>\\r\\n                        <input\\r\\n                            clrInput\\r\\n                            type=\\\"number\\\"\\r\\n                            min=\\\"0\\\"\\r\\n                            step=\\\"1\\\"\\r\\n                            formControlName=\\\"stockOnHand\\\"\\r\\n                            [readonly]=\\\"!(updatePermission | hasPermission)\\\"\\r\\n                        />\\r\\n                    </clr-input-container>\\r\\n                </td>\\r\\n                <td class=\\\"left align-middle stock\\\" [class.disabled]=\\\"!formGroup.get('enabled')!.value\\\">\\r\\n                    <clr-toggle-wrapper>\\r\\n                        <input\\r\\n                            type=\\\"checkbox\\\"\\r\\n                            clrToggle\\r\\n                            name=\\\"enabled\\\"\\r\\n                            formControlName=\\\"enabled\\\"\\r\\n                            [vdrDisabled]=\\\"!(updatePermission | hasPermission)\\\"\\r\\n                        />\\r\\n                    </clr-toggle-wrapper>\\r\\n                </td>\\r\\n            </ng-container>\\r\\n        </tr>\\r\\n    </tbody>\\r\\n</table>\\r\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\".placeholder{color:var(--color-grey-300)}.stock input,.price input{max-width:96px}td{transition:background-color .2s}td.disabled{background-color:var(--color-component-bg-200)}\\n\"]\n            }]\n    }], function () { return [{ type: ngcc0.ChangeDetectorRef }]; }, { formArray: [{\n            type: Input,\n            args: ['productVariantsFormArray']\n        }], variants: [{\n            type: Input\n        }], paginationConfig: [{\n            type: Input\n        }], channelPriceIncludesTax: [{\n            type: Input\n        }], optionGroups: [{\n            type: Input\n        }], pendingAssetChanges: [{\n            type: Input\n        }] }); })();\n\nclass VariantPriceDetailComponent {\r\n    constructor(dataService) {\r\n        this.dataService = dataService;\r\n        this.priceChange$ = new BehaviorSubject(0);\r\n        this.taxCategoryIdChange$ = new BehaviorSubject('');\r\n    }\r\n    ngOnInit() {\r\n        const taxRates$ = this.dataService.settings\r\n            .getTaxRatesSimple(999, 0, 'cache-first')\r\n            .mapStream(data => data.taxRates.items);\r\n        const activeChannel$ = this.dataService.settings\r\n            .getActiveChannel('cache-first')\r\n            .refetchOnChannelChange()\r\n            .mapStream(data => data.activeChannel);\r\n        this.taxRate$ = combineLatest(activeChannel$, taxRates$, this.taxCategoryIdChange$).pipe(map(([channel, taxRates, taxCategoryId]) => {\r\n            const defaultTaxZone = channel.defaultTaxZone;\r\n            if (!defaultTaxZone) {\r\n                return 0;\r\n            }\r\n            const applicableRate = taxRates.find(taxRate => taxRate.zone.id === defaultTaxZone.id && taxRate.category.id === taxCategoryId);\r\n            if (!applicableRate) {\r\n                return 0;\r\n            }\r\n            return applicableRate.value;\r\n        }));\r\n        this.grossPrice$ = combineLatest(this.taxRate$, this.priceChange$).pipe(map(([taxRate, price]) => {\r\n            return Math.round(price * ((100 + taxRate) / 100));\r\n        }));\r\n    }\r\n    ngOnChanges(changes) {\r\n        if ('price' in changes) {\r\n            this.priceChange$.next(changes.price.currentValue);\r\n        }\r\n        if ('taxCategoryId' in changes) {\r\n            this.taxCategoryIdChange$.next(changes.taxCategoryId.currentValue);\r\n        }\r\n    }\r\n}\nVariantPriceDetailComponent.fac = function VariantPriceDetailComponent_Factory(t) { return new (t || VariantPriceDetailComponent)(ngcc0.directiveInject(ngcc2.DataService)); };\nVariantPriceDetailComponent.cmp = /*@__PURE__*/ ngcc0.defineComponent({ type: VariantPriceDetailComponent, selectors: [[\"vdr-variant-price-detail\"]], inputs: { priceIncludesTax: \"priceIncludesTax\", price: \"price\", currencyCode: \"currencyCode\", taxCategoryId: \"taxCategoryId\" }, features: [ngcc0.NgOnChangesFeature], decls: 5, vars: 5, consts: [[1, \"clr-control-label\"], [\"class\", \"value\", 4, \"ngIf\"], [1, \"value\"]], template: function VariantPriceDetailComponent_Template(rf, ctx) { if (rf & 1) {\n        ngcc0.elementStart(0, \"label\", 0);\n        ngcc0.text(1);\n        ngcc0.pipe(2, \"translate\");\n        ngcc0.elementEnd();\n        ngcc0.template(3, VariantPriceDetailComponent_div_3_Template, 4, 8, \"div\", 1);\n        ngcc0.template(4, VariantPriceDetailComponent_div_4_Template, 6, 14, \"div\", 1);\n    } if (rf & 2) {\n        ngcc0.advance(1);\n        ngcc0.textInterpolate(ngcc0.pipeBind1(2, 3, \"catalog.taxes\"));\n        ngcc0.advance(2);\n        ngcc0.property(\"ngIf\", ctx.priceIncludesTax);\n        ngcc0.advance(1);\n        ngcc0.property(\"ngIf\", !ctx.priceIncludesTax);\n    } }, directives: [ngcc7.ClrLabel, ngcc4.NgIf], pipes: [ngcc5.TranslatePipe, ngcc4.AsyncPipe, ngcc2.LocaleCurrencyPipe], styles: [\"[_nghost-%COMP%]{display:flex;flex-direction:column}.value[_ngcontent-%COMP%]{margin-top:3px}\"], changeDetection: 0 });\r\nVariantPriceDetailComponent.ctorParameters = () => [\r\n    { type: DataService }\r\n];\r\nVariantPriceDetailComponent.propDecorators = {\r\n    priceIncludesTax: [{ type: Input }],\r\n    price: [{ type: Input }],\r\n    currencyCode: [{ type: Input }],\r\n    taxCategoryId: [{ type: Input }]\r\n};\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ngcc0.setClassMetadata(VariantPriceDetailComponent, [{\n        type: Component,\n        args: [{\n                selector: 'vdr-variant-price-detail',\n                template: \"<label class=\\\"clr-control-label\\\">{{ 'catalog.taxes' | translate }}</label>\\r\\n<div *ngIf=\\\"priceIncludesTax\\\" class=\\\"value\\\">\\r\\n    {{ 'catalog.price-includes-tax-at' | translate: { rate: taxRate$ | async } }}\\r\\n</div>\\r\\n<div *ngIf=\\\"!priceIncludesTax\\\" class=\\\"value\\\">\\r\\n    {{\\r\\n        'catalog.price-with-tax-in-default-zone'\\r\\n            | translate: { price: grossPrice$ | async | localeCurrency: currencyCode, rate: taxRate$ | async }\\r\\n    }}\\r\\n</div>\\r\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\":host{display:flex;flex-direction:column}.value{margin-top:3px}\\n\"]\n            }]\n    }], function () { return [{ type: ngcc2.DataService }]; }, { priceIncludesTax: [{\n            type: Input\n        }], price: [{\n            type: Input\n        }], currencyCode: [{\n            type: Input\n        }], taxCategoryId: [{\n            type: Input\n        }] }); })();\n\nconst CATALOG_COMPONENTS = [\r\n    ProductListComponent,\r\n    ProductDetailComponent,\r\n    FacetListComponent,\r\n    FacetDetailComponent,\r\n    GenerateProductVariantsComponent,\r\n    ProductVariantsListComponent,\r\n    ApplyFacetDialogComponent,\r\n    AssetListComponent,\r\n    AssetsComponent,\r\n    VariantPriceDetailComponent,\r\n    CollectionListComponent,\r\n    CollectionDetailComponent,\r\n    CollectionTreeComponent,\r\n    CollectionTreeNodeComponent,\r\n    CollectionContentsComponent,\r\n    ProductVariantsTableComponent,\r\n    OptionValueInputComponent,\r\n    UpdateProductOptionDialogComponent,\r\n    ProductVariantsEditorComponent,\r\n    AssignProductsToChannelDialogComponent,\r\n    AssetDetailComponent,\r\n    ConfirmVariantDeletionDialogComponent,\r\n    ProductOptionsEditorComponent,\r\n    BulkAddFacetValuesDialogComponent,\r\n    AssignToChannelDialogComponent,\r\n];\r\nclass CatalogModule {\r\n    constructor(bulkActionRegistryService) {\r\n        this.bulkActionRegistryService = bulkActionRegistryService;\r\n        bulkActionRegistryService.registerBulkAction(assignFacetValuesToProductsBulkAction);\r\n        bulkActionRegistryService.registerBulkAction(assignProductsToChannelBulkAction);\r\n        bulkActionRegistryService.registerBulkAction(removeProductsFromChannelBulkAction);\r\n        bulkActionRegistryService.registerBulkAction(deleteProductsBulkAction);\r\n        bulkActionRegistryService.registerBulkAction(assignFacetsToChannelBulkAction);\r\n        bulkActionRegistryService.registerBulkAction(removeFacetsFromChannelBulkAction);\r\n        bulkActionRegistryService.registerBulkAction(deleteFacetsBulkAction);\r\n        bulkActionRegistryService.registerBulkAction(assignCollectionsToChannelBulkAction);\r\n        bulkActionRegistryService.registerBulkAction(removeCollectionsFromChannelBulkAction);\r\n        bulkActionRegistryService.registerBulkAction(deleteCollectionsBulkAction);\r\n    }\r\n}\nCatalogModule.fac = function CatalogModule_Factory(t) { return new (t || CatalogModule)(ngcc0.inject(ngcc2.BulkActionRegistryService)); };\nCatalogModule.mod = /*@__PURE__*/ ngcc0.defineNgModule({ type: CatalogModule });\nCatalogModule.inj = /*@__PURE__*/ ngcc0.defineInjector({ imports: [[SharedModule, RouterModule.forChild(catalogRoutes)]] });\r\nCatalogModule.ctorParameters = () => [\r\n    { type: BulkActionRegistryService }\r\n];\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ngcc0.setClassMetadata(CatalogModule, [{\n        type: NgModule,\n        args: [{\n                imports: [SharedModule, RouterModule.forChild(catalogRoutes)],\n                exports: [...CATALOG_COMPONENTS],\n                declarations: [...CATALOG_COMPONENTS]\n            }]\n    }], function () { return [{ type: ngcc2.BulkActionRegistryService }]; }, null); })();\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ngcc0.setNgModuleScope(CatalogModule, { declarations: function () { return [ProductListComponent, ProductDetailComponent, FacetListComponent, FacetDetailComponent, GenerateProductVariantsComponent, ProductVariantsListComponent, ApplyFacetDialogComponent, AssetListComponent, AssetsComponent, VariantPriceDetailComponent, CollectionListComponent, CollectionDetailComponent, CollectionTreeComponent, CollectionTreeNodeComponent, CollectionContentsComponent, ProductVariantsTableComponent, OptionValueInputComponent, UpdateProductOptionDialogComponent, ProductVariantsEditorComponent, AssignProductsToChannelDialogComponent, AssetDetailComponent, ConfirmVariantDeletionDialogComponent, ProductOptionsEditorComponent, BulkAddFacetValuesDialogComponent, AssignToChannelDialogComponent]; }, imports: function () { return [SharedModule, ngcc1.RouterModule]; }, exports: function () { return [ProductListComponent, ProductDetailComponent, FacetListComponent, FacetDetailComponent, GenerateProductVariantsComponent, ProductVariantsListComponent, ApplyFacetDialogComponent, AssetListComponent, AssetsComponent, VariantPriceDetailComponent, CollectionListComponent, CollectionDetailComponent, CollectionTreeComponent, CollectionTreeNodeComponent, CollectionContentsComponent, ProductVariantsTableComponent, OptionValueInputComponent, UpdateProductOptionDialogComponent, ProductVariantsEditorComponent, AssignProductsToChannelDialogComponent, AssetDetailComponent, ConfirmVariantDeletionDialogComponent, ProductOptionsEditorComponent, BulkAddFacetValuesDialogComponent, AssignToChannelDialogComponent]; } }); })();\n\n// This file was generated by the build-public-api.ts script\n\n/**\r\n * Generated bundle index. Do not edit.\r\n */\n\nexport { ApplyFacetDialogComponent, AssetDetailComponent, AssetListComponent, AssetResolver, AssetsComponent, AssignProductsToChannelDialogComponent, AssignToChannelDialogComponent, BulkAddFacetValuesDialogComponent, CatalogModule, CollectionContentsComponent, CollectionDetailComponent, CollectionListComponent, CollectionResolver, CollectionTreeComponent, CollectionTreeNodeComponent, ConfirmVariantDeletionDialogComponent, FacetDetailComponent, FacetListComponent, FacetResolver, GET_PRODUCTS_WITH_FACET_VALUES_BY_IDS, GET_VARIANTS_WITH_FACET_VALUES_BY_IDS, GenerateProductVariantsComponent, GeneratedVariant, OPTION_VALUE_INPUT_VALUE_ACCESSOR, OptionValueInputComponent, ProductDetailComponent, ProductDetailService, ProductListComponent, ProductOptionsEditorComponent, ProductResolver, ProductVariantsEditorComponent, ProductVariantsListComponent, ProductVariantsResolver, ProductVariantsTableComponent, UPDATE_PRODUCTS_BULK, UPDATE_VARIANTS_BULK, UpdateProductOptionDialogComponent, VariantPriceDetailComponent, arrayToTree, assetBreadcrumb, assignCollectionsToChannelBulkAction, assignFacetValuesToProductsBulkAction, assignFacetsToChannelBulkAction, assignProductsToChannelBulkAction, catalogRoutes, collectionBreadcrumb, deleteCollectionsBulkAction, deleteFacetsBulkAction, deleteProductsBulkAction, facetBreadcrumb, productBreadcrumb, productOptionsEditorBreadcrumb, productVariantEditorBreadcrumb, removeCollectionsFromChannelBulkAction, removeFacetsFromChannelBulkAction, removeProductsFromChannelBulkAction, replaceLast, 10 };\n\n"]}