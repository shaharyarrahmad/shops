{"version":3,"mappings":"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","names":["constructor","this","call","De","super","error","o","i","t","xe","notifier","l","_unsubscribe","errors","n","notifyNext","e","cancel","submit","$implicit","lineQuantities","checkIfAllSelected","cancelAll","radioChanged","select","state","selectedAddress","useExisting","createNew","selectedCustomer","completeOrder","deleteOrder","oxw","applyCouponCode","removeCouponCode","ngIf","addItemToOrder","adjustOrderLine","removeOrderLine","setCustomer","setBillingAddress","setShippingAddress","setShippingMethod","updateCustomFields","quantity","addItemClick","fulfillmentQuantities","transitionState","total","count","editable","onUpdateClick","onCancelClick","min","amount","method","addManualPayment","transitionToState","transitionToModifying","cancelOrRefund","openStateDiagram","fulfillOrder","manuallyTransitionToState","settlePayment","transitionPaymentState","settleRefund","transitionFulfillment","addNote","updateNote","deleteNote","selectedPayment","refundNote","transitionToPriorState","index","updateLineQuantity","updateAddedItemQuantity","removeAddedItem","removeSurcharge","addItemSelectedVariant","rate","note","recalculateShipping","previewAndModify","from","selectFilterPreset","Yo","$o","CHM","c","payment","onMouseOver","onMouseOut","draftInputBlur","remove","lineId","d","transactionId","ngOnInit","getPaymentMethods","mapSingle","G","a","type","directives","O","pipes","_","p","styles","changeDetection","cancellationReasons","f","Object","orderId","lines","reason","cancelShipping","getLineInputs","map","orderLineId","filter","W","s","Je","v","couponCode","contains","single$","promotions","code","L","control","outputs","addCouponCode","decls","couponCodes","Ce","transitionToPreModifyingState","nextStates","message","cancellable","retry","Re","fromComponent","locals","closable","size","pipe","J","r","it","getPreModifyingState","getOrderHistory","eq","sort","createdAt","transitionToStateOrThrow","transitionOrderToState","b","factory","token","lt","fullName","company","streetLine1","streetLine2","city","province","postalCode","countryCode","phoneNumber","query","customerId","customer","A","I","getAvailableCountries","countries","trackByFn","addressIdFn","R","title","firstName","lastName","emailAddress","Me","Se","getCustomerList","mapStream","customers","T","z","methodIdFn","K","getDraftOrderEligibleShippingMethods","eligibleShippingMethodsForDraftOrder","ngOnDestroy","adjustDraftOrderLine","subscribe","getOrderAddressLines","setCustomerForDraftOrder","input","Q","currentAddress","tt","eligibleShippingMethods","currencyCode","currentSelectionId","updateOrderCustomFields","id","customFields","deleteDraftOrder","entity","hasId","setFormValues","j","h","Y","M","getProductVariant","productVariant","productVariantId","addItem","orderLineCustomFields","globalSettings","fulfillCount","getShippingMethodOperations","getFulfillableCount","trackInventory","getUnfulfilledCount","canSubmit","handler","X","nextSuggestedState","nextOtherStates","ee","fulfillment","D","order","ngOnChanges","name","buildCustomFieldsFormGroup","customFieldIsObject","E","fulfillmentId","features","N","te","getDeliveredCount","getFulfillmentStatus","getFulfillments","$","line","orderState","getRefundedCount","length","S","Ye","payments","added","getSurcharge","getAddedItems","getRemovedItems","getModifiedLines","getOrderLineAndItem","ne","modification","dialog","buttons","customFieldsConfig","updateClick","customFieldValues","re","H","reduce","lineCanBeRefundedOrCancelled","refund","handleZeroQuantity","isRefunding","isCancelling","shipping","adjustment","paymentId","getOrderLineInput","oe","Ze","relativeTo","q","activeState","cancelPayment","transitionPaymentToState","canAddFulfillment","hasUnsettledModifications","getOutstandingModificationAmount","outstandingPaymentAmount","y","m","outstandingAmount","metadata","addManualPaymentToOrder","Pe","result","addFulfillmentToOrder","transitionFulfillmentToState","addNoteToOrder","isPublic","displayPrivacyControls","noteIsPrivate","noteId","body","orderHasSettledPayments","cancelOrder","refundOrder","refetchOrder","ie","k","le","ce","P","refundPaymentId","Ae","dryRun","addItems","adjustOrderLines","surcharges","updateShippingAddress","updateBillingAddress","price","description","sku","priceIncludesTax","taxRate","taxDescription","ye","Fe","je","take","canPreviewChanges","isLineModified","trackByProductVariantId","getSelectedItemPrice","isMatchingAddItemRow","JSON","getSurchargePrices","Math","priceWithTax","addSurcharge","dt","modifyOrder","originalTotalWithTax","modifyOrderInput","u","x","addAddressCustomFieldsFormGroup","ae","getDisplayType","getTimelineIcon","isFeatured","getFulfillment","getPayment","getCancelledItems","getModification","getName","administrator","B","history","label","config","active","states","refetchOnChannelChange","replaceUrl","getOrderProcessStates","find","Qe","placedAtStart","placedAtEnd","applyCustomFilters","createQueryOptions","in","C","Z","between","start","end","after","before","customerLastName","options","skip","updatedAt","filterOperator","getShippingNames","de","refundHasMetadata","ue","pe","asObservable","qe","getStyle","transform","se","to","Le","getPos","w","node","ngAfterViewInit","setTimeout","getNodeFor","populateNodes","populateEdges","hostVars","inputs","initialState","nodeComponents","args","outerHeight","toggleOrderLineCustomFields","getLineDiscounts","getLineCustomFields","formGroup","value","getPromotionLink","getCouponCodeForAdjustment","isDraft","adjust","items","resolve","ke","getOrder","F","canActivate","createDraftOrder","U","breadcrumb","We","ze","Ke","Xe","path","component","data","canDeactivate","breadcrumbKey","route","Te","imports"],"sources":["webpack:///node_modules/rxjs/_esm2015/internal/operators/retryWhen.js","webpack:///node_modules/@vendure/admin-ui/__ivy_ngcc__/fesm2015/vendure-admin-ui-order.js"],"sourcesContent":["import { Subject } from '../Subject';\nimport { SimpleOuterSubscriber, innerSubscribe, SimpleInnerSubscriber } from '../innerSubscribe';\nexport function retryWhen(notifier) {\n    return (source) => source.lift(new RetryWhenOperator(notifier, source));\n}\nclass RetryWhenOperator {\n    constructor(notifier, source) {\n        this.notifier = notifier;\n        this.source = source;\n    }\n    call(subscriber, source) {\n        return source.subscribe(new RetryWhenSubscriber(subscriber, this.notifier, this.source));\n    }\n}\nclass RetryWhenSubscriber extends SimpleOuterSubscriber {\n    constructor(destination, notifier, source) {\n        super(destination);\n        this.notifier = notifier;\n        this.source = source;\n    }\n    error(err) {\n        if (!this.isStopped) {\n            let errors = this.errors;\n            let retries = this.retries;\n            let retriesSubscription = this.retriesSubscription;\n            if (!retries) {\n                errors = new Subject();\n                try {\n                    const { notifier } = this;\n                    retries = notifier(errors);\n                }\n                catch (e) {\n                    return super.error(e);\n                }\n                retriesSubscription = innerSubscribe(retries, new SimpleInnerSubscriber(this));\n            }\n            else {\n                this.errors = undefined;\n                this.retriesSubscription = undefined;\n            }\n            this._unsubscribeAndRecycle();\n            this.errors = errors;\n            this.retries = retries;\n            this.retriesSubscription = retriesSubscription;\n            errors.next(err);\n        }\n    }\n    _unsubscribe() {\n        const { errors, retriesSubscription } = this;\n        if (errors) {\n            errors.unsubscribe();\n            this.errors = undefined;\n        }\n        if (retriesSubscription) {\n            retriesSubscription.unsubscribe();\n            this.retriesSubscription = undefined;\n        }\n        this.retries = undefined;\n    }\n    notifyNext() {\n        const { _unsubscribe } = this;\n        this._unsubscribe = null;\n        this._unsubscribeAndRecycle();\n        this._unsubscribe = _unsubscribe;\n        this.source.subscribe(this);\n    }\n}\n","import * as i0 from '@angular/core';\nimport { Component, ChangeDetectionStrategy, EventEmitter, Input, Output, Injectable, ChangeDetectorRef, ElementRef, ViewChildren, HostBinding, NgModule } from '@angular/core';\nimport { FormGroup, FormControl, Validators, FormBuilder, FormArray } from '@angular/forms';\nimport * as i1 from '@vendure/admin-ui/core';\nimport { DataService, getAppConfig, I18nService, HistoryEntryType, SortOrder, ModalService, NotificationService, ADDRESS_FRAGMENT, BaseDetailComponent, DeletionResult, ServerConfigService, configurableDefinitionToInstance, GlobalFlag, configurableOperationValueIsValid, toConfigurableOperationInput, EditNoteDialogComponent, transformRelationCustomFieldInputs, BaseListComponent, LogicalOperator, LocalStorageService, AdjustmentType, CanDeactivateDetailGuard, detailBreadcrumb, SharedModule } from '@vendure/admin-ui/core';\nimport { marker } from '@biesbjerg/ngx-translate-extract-marker';\nimport { Subject, concat, EMPTY, of, combineLatest, merge, BehaviorSubject } from 'rxjs';\nimport { distinctUntilChanged, switchMap, map, startWith, catchError, retryWhen, delay, take, tap, debounceTime, mapTo, takeUntil, shareReplay, filter } from 'rxjs/operators';\nimport * as i1$1 from '@angular/router';\nimport { Router, ActivatedRoute, ActivationStart, RouterModule } from '@angular/router';\nimport { pick } from '@vendure/common/lib/pick';\nimport { gql } from 'apollo-angular';\nimport { isObject, summate, assertNever, notNullOrUndefined } from '@vendure/common/lib/shared-utils';\nimport { simpleDeepClone } from '@vendure/common/lib/simple-deep-clone';\n\nimport * as ngcc0 from '@angular/core';\nimport * as ngcc1 from '@vendure/admin-ui/core';\nimport * as ngcc2 from '@angular/forms';\nimport * as ngcc3 from '@ng-select/ng-select';\nimport * as ngcc4 from '@ngx-translate/core';\nimport * as ngcc5 from '@angular/common';\nimport * as ngcc6 from '@clr/angular';\nimport * as ngcc7 from '@angular/router';\nimport * as ngcc8 from '@angular/cdk/bidi';\n\nfunction AddManualPaymentDialogComponent_ng_template_0_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.text(0);\n    ngcc0.pipe(1, \"translate\");\n} if (rf & 2) {\n    ngcc0.textInterpolate(ngcc0.pipeBind1(1, 1, \"order.add-payment-to-order\"));\n} }\nfunction AddManualPaymentDialogComponent_ng_template_9_Template(rf, ctx) { if (rf & 1) {\n    const _r3 = ngcc0.getCurrentView();\n    ngcc0.elementStart(0, \"button\", 7);\n    ngcc0.listener(\"click\", function AddManualPaymentDialogComponent_ng_template_9_Template_button_click_0_listener() { ngcc0.restoreView(_r3); const ctx_r2 = ngcc0.nextContext(); return ctx_r2.cancel(); });\n    ngcc0.text(1);\n    ngcc0.pipe(2, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.elementStart(3, \"button\", 8);\n    ngcc0.listener(\"click\", function AddManualPaymentDialogComponent_ng_template_9_Template_button_click_3_listener() { ngcc0.restoreView(_r3); const ctx_r4 = ngcc0.nextContext(); return ctx_r4.submit(); });\n    ngcc0.text(4);\n    ngcc0.pipe(5, \"translate\");\n    ngcc0.pipe(6, \"localeCurrency\");\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const ctx_r1 = ngcc0.nextContext();\n    ngcc0.advance(1);\n    ngcc0.textInterpolate(ngcc0.pipeBind1(2, 4, \"common.cancel\"));\n    ngcc0.advance(2);\n    ngcc0.property(\"disabled\", ctx_r1.form.invalid || ctx_r1.form.pristine);\n    ngcc0.advance(1);\n    ngcc0.textInterpolate2(\" \", ngcc0.pipeBind1(5, 6, \"order.add-payment\"), \" (\", ngcc0.pipeBind2(6, 8, ctx_r1.outstandingAmount, ctx_r1.currencyCode), \") \");\n} }\nfunction CancelOrderDialogComponent_ng_template_0_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.text(0);\n    ngcc0.pipe(1, \"translate\");\n} if (rf & 2) {\n    ngcc0.textInterpolate(ngcc0.pipeBind1(1, 1, \"order.cancel-order\"));\n} }\nfunction CancelOrderDialogComponent_tr_22_input_14_Template(rf, ctx) { if (rf & 1) {\n    const _r9 = ngcc0.getCurrentView();\n    ngcc0.elementStart(0, \"input\", 19);\n    ngcc0.listener(\"ngModelChange\", function CancelOrderDialogComponent_tr_22_input_14_Template_input_ngModelChange_0_listener($event) { ngcc0.restoreView(_r9); const line_r4 = ngcc0.nextContext().$implicit; const ctx_r8 = ngcc0.nextContext(); return (ctx_r8.lineQuantities[line_r4.id] = $event); })(\"input\", function CancelOrderDialogComponent_tr_22_input_14_Template_input_input_0_listener() { ngcc0.restoreView(_r9); const ctx_r11 = ngcc0.nextContext(2); return ctx_r11.checkIfAllSelected(); });\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const line_r4 = ngcc0.nextContext().$implicit;\n    const ctx_r5 = ngcc0.nextContext();\n    ngcc0.property(\"ngModel\", ctx_r5.lineQuantities[line_r4.id])(\"disabled\", ctx_r5.cancelAll)(\"max\", line_r4.quantity);\n} }\nfunction CancelOrderDialogComponent_tr_22_ng_template_15_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.text(0);\n} if (rf & 2) {\n    const line_r4 = ngcc0.nextContext().$implicit;\n    ngcc0.textInterpolate(line_r4.quantity);\n} }\nfunction CancelOrderDialogComponent_tr_22_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementStart(0, \"tr\", 10);\n    ngcc0.elementStart(1, \"td\", 11);\n    ngcc0.element(2, \"img\", 12);\n    ngcc0.pipe(3, \"assetPreview\");\n    ngcc0.elementEnd();\n    ngcc0.elementStart(4, \"td\", 13);\n    ngcc0.text(5);\n    ngcc0.elementEnd();\n    ngcc0.elementStart(6, \"td\", 14);\n    ngcc0.text(7);\n    ngcc0.elementEnd();\n    ngcc0.elementStart(8, \"td\", 15);\n    ngcc0.text(9);\n    ngcc0.elementEnd();\n    ngcc0.elementStart(10, \"td\", 15);\n    ngcc0.text(11);\n    ngcc0.pipe(12, \"localeCurrency\");\n    ngcc0.elementEnd();\n    ngcc0.elementStart(13, \"td\", 16);\n    ngcc0.template(14, CancelOrderDialogComponent_tr_22_input_14_Template, 1, 3, \"input\", 17);\n    ngcc0.template(15, CancelOrderDialogComponent_tr_22_ng_template_15_Template, 1, 1, \"ng-template\", null, 18, ngcc0.templateRefExtractor);\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const line_r4 = ctx.$implicit;\n    const _r6 = ngcc0.reference(16);\n    const ctx_r1 = ngcc0.nextContext();\n    ngcc0.classProp(\"is-disabled\", ctx_r1.cancelAll)(\"is-cancelled\", line_r4.quantity === 0);\n    ngcc0.advance(2);\n    ngcc0.property(\"src\", ngcc0.pipeBind2(3, 11, line_r4.featuredAsset, \"tiny\"), ngcc0.sanitizeUrl);\n    ngcc0.advance(3);\n    ngcc0.textInterpolate(line_r4.productVariant.name);\n    ngcc0.advance(2);\n    ngcc0.textInterpolate(line_r4.productVariant.sku);\n    ngcc0.advance(2);\n    ngcc0.textInterpolate(line_r4.quantity);\n    ngcc0.advance(2);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind2(12, 14, line_r4.unitPriceWithTax, ctx_r1.order.currencyCode), \" \");\n    ngcc0.advance(3);\n    ngcc0.property(\"ngIf\", line_r4.quantity > 0 && !ctx_r1.order.active)(\"ngIfElse\", _r6);\n} }\nfunction CancelOrderDialogComponent_ng_container_24_Template(rf, ctx) { if (rf & 1) {\n    const _r15 = ngcc0.getCurrentView();\n    ngcc0.elementContainerStart(0);\n    ngcc0.elementStart(1, \"clr-radio-wrapper\");\n    ngcc0.elementStart(2, \"input\", 20);\n    ngcc0.listener(\"ngModelChange\", function CancelOrderDialogComponent_ng_container_24_Template_input_ngModelChange_2_listener($event) { ngcc0.restoreView(_r15); const ctx_r14 = ngcc0.nextContext(); return ctx_r14.cancelAll = $event; })(\"ngModelChange\", function CancelOrderDialogComponent_ng_container_24_Template_input_ngModelChange_2_listener() { ngcc0.restoreView(_r15); const ctx_r16 = ngcc0.nextContext(); return ctx_r16.radioChanged(); });\n    ngcc0.elementEnd();\n    ngcc0.elementStart(3, \"label\");\n    ngcc0.text(4);\n    ngcc0.pipe(5, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementStart(6, \"clr-radio-wrapper\");\n    ngcc0.elementStart(7, \"input\", 20);\n    ngcc0.listener(\"ngModelChange\", function CancelOrderDialogComponent_ng_container_24_Template_input_ngModelChange_7_listener($event) { ngcc0.restoreView(_r15); const ctx_r17 = ngcc0.nextContext(); return ctx_r17.cancelAll = $event; })(\"ngModelChange\", function CancelOrderDialogComponent_ng_container_24_Template_input_ngModelChange_7_listener() { ngcc0.restoreView(_r15); const ctx_r18 = ngcc0.nextContext(); return ctx_r18.radioChanged(); });\n    ngcc0.elementEnd();\n    ngcc0.elementStart(8, \"label\");\n    ngcc0.text(9);\n    ngcc0.pipe(10, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementContainerEnd();\n} if (rf & 2) {\n    const ctx_r2 = ngcc0.nextContext();\n    ngcc0.advance(2);\n    ngcc0.property(\"value\", true)(\"ngModel\", ctx_r2.cancelAll);\n    ngcc0.advance(2);\n    ngcc0.textInterpolate(ngcc0.pipeBind1(5, 6, \"order.cancel-entire-order\"));\n    ngcc0.advance(3);\n    ngcc0.property(\"value\", false)(\"ngModel\", ctx_r2.cancelAll);\n    ngcc0.advance(2);\n    ngcc0.textInterpolate(ngcc0.pipeBind1(10, 8, \"order.cancel-specified-items\"));\n} }\nfunction CancelOrderDialogComponent_ng_template_29_ng_container_4_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementContainerStart(0);\n    ngcc0.text(1);\n    ngcc0.pipe(2, \"translate\");\n    ngcc0.elementContainerEnd();\n} if (rf & 2) {\n    ngcc0.advance(1);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(2, 1, \"order.cancel-selected-items\"), \" \");\n} }\nfunction CancelOrderDialogComponent_ng_template_29_ng_container_5_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementContainerStart(0);\n    ngcc0.text(1);\n    ngcc0.pipe(2, \"translate\");\n    ngcc0.elementContainerEnd();\n} if (rf & 2) {\n    ngcc0.advance(1);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(2, 1, \"order.cancel-order\"), \" \");\n} }\nfunction CancelOrderDialogComponent_ng_template_29_Template(rf, ctx) { if (rf & 1) {\n    const _r22 = ngcc0.getCurrentView();\n    ngcc0.elementStart(0, \"button\", 21);\n    ngcc0.listener(\"click\", function CancelOrderDialogComponent_ng_template_29_Template_button_click_0_listener() { ngcc0.restoreView(_r22); const ctx_r21 = ngcc0.nextContext(); return ctx_r21.cancel(); });\n    ngcc0.text(1);\n    ngcc0.pipe(2, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.elementStart(3, \"button\", 22);\n    ngcc0.listener(\"click\", function CancelOrderDialogComponent_ng_template_29_Template_button_click_3_listener() { ngcc0.restoreView(_r22); const ctx_r23 = ngcc0.nextContext(); return ctx_r23.select(); });\n    ngcc0.template(4, CancelOrderDialogComponent_ng_template_29_ng_container_4_Template, 3, 3, \"ng-container\", 6);\n    ngcc0.template(5, CancelOrderDialogComponent_ng_template_29_ng_container_5_Template, 3, 3, \"ng-container\", 6);\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const ctx_r3 = ngcc0.nextContext();\n    ngcc0.advance(1);\n    ngcc0.textInterpolate(ngcc0.pipeBind1(2, 4, \"common.cancel\"));\n    ngcc0.advance(2);\n    ngcc0.property(\"disabled\", !ctx_r3.reason || !ctx_r3.order.active && ctx_r3.selectionCount === 0);\n    ngcc0.advance(1);\n    ngcc0.property(\"ngIf\", !ctx_r3.order.active);\n    ngcc0.advance(1);\n    ngcc0.property(\"ngIf\", ctx_r3.order.active);\n} }\nfunction CouponCodeSelectorComponent_ng_template_2_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementStart(0, \"vdr-chip\");\n    ngcc0.text(1);\n    ngcc0.elementEnd();\n    ngcc0.text(2);\n} if (rf & 2) {\n    const item_r1 = ctx.item;\n    ngcc0.advance(1);\n    ngcc0.textInterpolate(item_r1.code);\n    ngcc0.advance(1);\n    ngcc0.textInterpolate1(\" \", item_r1.promotionName, \" \");\n} }\nfunction OrderStateSelectDialogComponent_ng_template_0_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.text(0);\n    ngcc0.pipe(1, \"translate\");\n} if (rf & 2) {\n    ngcc0.textInterpolate(ngcc0.pipeBind1(1, 1, \"order.select-state\"));\n} }\nfunction OrderStateSelectDialogComponent_option_6_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementStart(0, \"option\", 4);\n    ngcc0.text(1);\n    ngcc0.pipe(2, \"translate\");\n    ngcc0.pipe(3, \"stateI18nToken\");\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const state_r3 = ctx.$implicit;\n    ngcc0.property(\"value\", state_r3);\n    ngcc0.advance(1);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(2, 2, ngcc0.pipeBind1(3, 4, state_r3)), \" \");\n} }\nfunction OrderStateSelectDialogComponent_ng_template_7_button_0_Template(rf, ctx) { if (rf & 1) {\n    const _r6 = ngcc0.getCurrentView();\n    ngcc0.elementStart(0, \"button\", 7);\n    ngcc0.listener(\"click\", function OrderStateSelectDialogComponent_ng_template_7_button_0_Template_button_click_0_listener() { ngcc0.restoreView(_r6); const ctx_r5 = ngcc0.nextContext(2); return ctx_r5.cancel(); });\n    ngcc0.text(1);\n    ngcc0.pipe(2, \"translate\");\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    ngcc0.advance(1);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(2, 1, \"common.cancel\"), \" \");\n} }\nconst _c0 = function (a0) { return { state: a0 }; };\nfunction OrderStateSelectDialogComponent_ng_template_7_Template(rf, ctx) { if (rf & 1) {\n    const _r8 = ngcc0.getCurrentView();\n    ngcc0.template(0, OrderStateSelectDialogComponent_ng_template_7_button_0_Template, 3, 3, \"button\", 5);\n    ngcc0.elementStart(1, \"button\", 6);\n    ngcc0.listener(\"click\", function OrderStateSelectDialogComponent_ng_template_7_Template_button_click_1_listener() { ngcc0.restoreView(_r8); const ctx_r7 = ngcc0.nextContext(); return ctx_r7.select(); });\n    ngcc0.text(2);\n    ngcc0.pipe(3, \"translate\");\n    ngcc0.pipe(4, \"translate\");\n    ngcc0.pipe(5, \"stateI18nToken\");\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const ctx_r2 = ngcc0.nextContext();\n    ngcc0.property(\"ngIf\", ctx_r2.cancellable);\n    ngcc0.advance(1);\n    ngcc0.property(\"disabled\", !ctx_r2.selectedState);\n    ngcc0.advance(1);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind2(3, 3, \"order.transition-to-state\", ngcc0.pureFunction1(10, _c0, ngcc0.pipeBind1(4, 6, ngcc0.pipeBind1(5, 8, ctx_r2.selectedState)))), \" \");\n} }\nfunction SelectAddressDialogComponent_ng_template_0_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.text(0);\n    ngcc0.pipe(1, \"translate\");\n} if (rf & 2) {\n    ngcc0.textInterpolate(ngcc0.pipeBind1(1, 1, \"order.select-address\"));\n} }\nfunction SelectAddressDialogComponent_clr_tabs_1_clr_tab_1_ng_template_4_vdr_radio_card_2_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementStart(0, \"vdr-radio-card\", 7);\n    ngcc0.element(1, \"vdr-formatted-address\", 8);\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const address_r8 = ctx.$implicit;\n    ngcc0.property(\"item\", address_r8);\n    ngcc0.advance(1);\n    ngcc0.property(\"address\", address_r8);\n} }\nfunction SelectAddressDialogComponent_clr_tabs_1_clr_tab_1_ng_template_4_Template(rf, ctx) { if (rf & 1) {\n    const _r10 = ngcc0.getCurrentView();\n    ngcc0.elementStart(0, \"clr-tab-content\");\n    ngcc0.elementStart(1, \"vdr-radio-card-fieldset\", 5);\n    ngcc0.listener(\"selectItem\", function SelectAddressDialogComponent_clr_tabs_1_clr_tab_1_ng_template_4_Template_vdr_radio_card_fieldset_selectItem_1_listener($event) { ngcc0.restoreView(_r10); const ctx_r9 = ngcc0.nextContext(3); return ctx_r9.selectedAddress = $event; });\n    ngcc0.template(2, SelectAddressDialogComponent_clr_tabs_1_clr_tab_1_ng_template_4_vdr_radio_card_2_Template, 2, 2, \"vdr-radio-card\", 6);\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const addresses_r3 = ngcc0.nextContext(2).ngIf;\n    const ctx_r6 = ngcc0.nextContext();\n    ngcc0.advance(1);\n    ngcc0.property(\"idFn\", ctx_r6.addressIdFn)(\"selectedItemId\", ctx_r6.selectedAddress && ctx_r6.addressIdFn(ctx_r6.selectedAddress));\n    ngcc0.advance(1);\n    ngcc0.property(\"ngForOf\", addresses_r3);\n} }\nfunction SelectAddressDialogComponent_clr_tabs_1_clr_tab_1_Template(rf, ctx) { if (rf & 1) {\n    const _r13 = ngcc0.getCurrentView();\n    ngcc0.elementStart(0, \"clr-tab\");\n    ngcc0.elementStart(1, \"button\", 3);\n    ngcc0.text(2);\n    ngcc0.pipe(3, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.template(4, SelectAddressDialogComponent_clr_tabs_1_clr_tab_1_ng_template_4_Template, 3, 3, \"ng-template\", 4);\n    ngcc0.listener(\"clrIfActiveChange\", function SelectAddressDialogComponent_clr_tabs_1_clr_tab_1_Template_ng_template_clrIfActiveChange_4_listener($event) { ngcc0.restoreView(_r13); const ctx_r12 = ngcc0.nextContext(2); return ctx_r12.useExisting = $event; });\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const ctx_r4 = ngcc0.nextContext(2);\n    ngcc0.advance(2);\n    ngcc0.textInterpolate(ngcc0.pipeBind1(3, 2, \"order.existing-address\"));\n    ngcc0.advance(2);\n    ngcc0.property(\"clrIfActive\", ctx_r4.useExisting);\n} }\nfunction SelectAddressDialogComponent_clr_tabs_1_ng_template_6_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementStart(0, \"clr-tab-content\");\n    ngcc0.element(1, \"vdr-address-form\", 9);\n    ngcc0.pipe(2, \"async\");\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const ctx_r5 = ngcc0.nextContext(2);\n    ngcc0.advance(1);\n    ngcc0.property(\"formGroup\", ctx_r5.addressForm)(\"availableCountries\", ngcc0.pipeBind1(2, 2, ctx_r5.availableCountries$));\n} }\nfunction SelectAddressDialogComponent_clr_tabs_1_Template(rf, ctx) { if (rf & 1) {\n    const _r15 = ngcc0.getCurrentView();\n    ngcc0.elementStart(0, \"clr-tabs\");\n    ngcc0.template(1, SelectAddressDialogComponent_clr_tabs_1_clr_tab_1_Template, 5, 4, \"clr-tab\", 1);\n    ngcc0.elementStart(2, \"clr-tab\");\n    ngcc0.elementStart(3, \"button\", 3);\n    ngcc0.text(4);\n    ngcc0.pipe(5, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.template(6, SelectAddressDialogComponent_clr_tabs_1_ng_template_6_Template, 3, 4, \"ng-template\", 4);\n    ngcc0.listener(\"clrIfActiveChange\", function SelectAddressDialogComponent_clr_tabs_1_Template_ng_template_clrIfActiveChange_6_listener($event) { ngcc0.restoreView(_r15); const ctx_r14 = ngcc0.nextContext(); return ctx_r14.createNew = $event; });\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const addresses_r3 = ctx.ngIf;\n    const ctx_r1 = ngcc0.nextContext();\n    ngcc0.advance(1);\n    ngcc0.property(\"ngIf\", ctx_r1.customerId && addresses_r3.length);\n    ngcc0.advance(3);\n    ngcc0.textInterpolate(ngcc0.pipeBind1(5, 3, \"customer.create-new-address\"));\n    ngcc0.advance(2);\n    ngcc0.property(\"clrIfActive\", ctx_r1.createNew);\n} }\nfunction SelectAddressDialogComponent_ng_template_3_Template(rf, ctx) { if (rf & 1) {\n    const _r17 = ngcc0.getCurrentView();\n    ngcc0.elementStart(0, \"button\", 10);\n    ngcc0.listener(\"click\", function SelectAddressDialogComponent_ng_template_3_Template_button_click_0_listener() { ngcc0.restoreView(_r17); const ctx_r16 = ngcc0.nextContext(); return ctx_r16.cancel(); });\n    ngcc0.text(1);\n    ngcc0.pipe(2, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.elementStart(3, \"button\", 11);\n    ngcc0.listener(\"click\", function SelectAddressDialogComponent_ng_template_3_Template_button_click_3_listener() { ngcc0.restoreView(_r17); const ctx_r18 = ngcc0.nextContext(); return ctx_r18.select(); });\n    ngcc0.text(4);\n    ngcc0.pipe(5, \"translate\");\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const ctx_r2 = ngcc0.nextContext();\n    ngcc0.advance(1);\n    ngcc0.textInterpolate(ngcc0.pipeBind1(2, 3, \"common.cancel\"));\n    ngcc0.advance(2);\n    ngcc0.property(\"disabled\", ctx_r2.useExisting && !ctx_r2.selectedAddress || ctx_r2.createNew && ctx_r2.addressForm.invalid);\n    ngcc0.advance(1);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(5, 5, \"common.okay\"), \" \");\n} }\nfunction SelectCustomerDialogComponent_ng_template_0_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.text(0);\n    ngcc0.pipe(1, \"translate\");\n} if (rf & 2) {\n    ngcc0.textInterpolate(ngcc0.pipeBind1(1, 1, \"order.set-customer-for-order\"));\n} }\nfunction SelectCustomerDialogComponent_ng_template_6_ng_template_3_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.element(0, \"clr-icon\", 7);\n    ngcc0.elementStart(1, \"span\", 8);\n    ngcc0.text(2);\n    ngcc0.elementEnd();\n    ngcc0.elementStart(3, \"vdr-chip\");\n    ngcc0.text(4);\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const item_r6 = ctx.item;\n    ngcc0.advance(2);\n    ngcc0.textInterpolate2(\"\", item_r6.firstName, \" \", item_r6.lastName, \"\");\n    ngcc0.advance(2);\n    ngcc0.textInterpolate(item_r6.emailAddress);\n} }\nfunction SelectCustomerDialogComponent_ng_template_6_ng_template_4_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.element(0, \"clr-icon\", 7);\n    ngcc0.elementStart(1, \"span\", 8);\n    ngcc0.text(2);\n    ngcc0.elementEnd();\n    ngcc0.elementStart(3, \"vdr-chip\");\n    ngcc0.text(4);\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const item_r8 = ctx.item;\n    ngcc0.advance(2);\n    ngcc0.textInterpolate2(\"\", item_r8.firstName, \" \", item_r8.lastName, \"\");\n    ngcc0.advance(2);\n    ngcc0.textInterpolate(item_r8.emailAddress);\n} }\nfunction SelectCustomerDialogComponent_ng_template_6_Template(rf, ctx) { if (rf & 1) {\n    const _r10 = ngcc0.getCurrentView();\n    ngcc0.elementStart(0, \"clr-tab-content\");\n    ngcc0.elementStart(1, \"ng-select\", 4);\n    ngcc0.listener(\"ngModelChange\", function SelectCustomerDialogComponent_ng_template_6_Template_ng_select_ngModelChange_1_listener($event) { ngcc0.restoreView(_r10); const ctx_r9 = ngcc0.nextContext(); return ctx_r9.selectedCustomer = $event; });\n    ngcc0.pipe(2, \"async\");\n    ngcc0.template(3, SelectCustomerDialogComponent_ng_template_6_ng_template_3_Template, 5, 3, \"ng-template\", 5);\n    ngcc0.template(4, SelectCustomerDialogComponent_ng_template_6_ng_template_4_Template, 5, 3, \"ng-template\", 6);\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const ctx_r1 = ngcc0.nextContext();\n    ngcc0.advance(1);\n    ngcc0.property(\"items\", ngcc0.pipeBind1(2, 9, ctx_r1.customers$))(\"addTag\", false)(\"multiple\", true)(\"hideSelected\", true)(\"trackByFn\", ctx_r1.trackByFn)(\"minTermLength\", 2)(\"loading\", ctx_r1.isLoading)(\"typeahead\", ctx_r1.input$)(\"ngModel\", ctx_r1.selectedCustomer);\n} }\nfunction SelectCustomerDialogComponent_ng_template_11_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementStart(0, \"clr-tab-content\");\n    ngcc0.elementStart(1, \"form\", 9);\n    ngcc0.elementStart(2, \"vdr-form-field\", 10);\n    ngcc0.pipe(3, \"translate\");\n    ngcc0.element(4, \"input\", 11);\n    ngcc0.elementEnd();\n    ngcc0.elementStart(5, \"vdr-form-field\", 12);\n    ngcc0.pipe(6, \"translate\");\n    ngcc0.element(7, \"input\", 13);\n    ngcc0.elementEnd();\n    ngcc0.elementStart(8, \"vdr-form-field\", 14);\n    ngcc0.pipe(9, \"translate\");\n    ngcc0.element(10, \"input\", 15);\n    ngcc0.elementEnd();\n    ngcc0.elementStart(11, \"vdr-form-field\", 16);\n    ngcc0.pipe(12, \"translate\");\n    ngcc0.element(13, \"input\", 17);\n    ngcc0.elementEnd();\n    ngcc0.elementStart(14, \"vdr-form-field\", 18);\n    ngcc0.pipe(15, \"translate\");\n    ngcc0.element(16, \"input\", 19);\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const ctx_r2 = ngcc0.nextContext();\n    ngcc0.advance(1);\n    ngcc0.property(\"formGroup\", ctx_r2.customerForm);\n    ngcc0.advance(1);\n    ngcc0.property(\"label\", ngcc0.pipeBind1(3, 6, \"customer.title\"));\n    ngcc0.advance(3);\n    ngcc0.property(\"label\", ngcc0.pipeBind1(6, 8, \"customer.first-name\"));\n    ngcc0.advance(3);\n    ngcc0.property(\"label\", ngcc0.pipeBind1(9, 10, \"customer.last-name\"));\n    ngcc0.advance(3);\n    ngcc0.property(\"label\", ngcc0.pipeBind1(12, 12, \"customer.email-address\"));\n    ngcc0.advance(3);\n    ngcc0.property(\"label\", ngcc0.pipeBind1(15, 14, \"customer.phone-number\"));\n} }\nfunction SelectCustomerDialogComponent_ng_template_12_Template(rf, ctx) { if (rf & 1) {\n    const _r12 = ngcc0.getCurrentView();\n    ngcc0.elementStart(0, \"button\", 20);\n    ngcc0.listener(\"click\", function SelectCustomerDialogComponent_ng_template_12_Template_button_click_0_listener() { ngcc0.restoreView(_r12); const ctx_r11 = ngcc0.nextContext(); return ctx_r11.cancel(); });\n    ngcc0.text(1);\n    ngcc0.pipe(2, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.elementStart(3, \"button\", 21);\n    ngcc0.listener(\"click\", function SelectCustomerDialogComponent_ng_template_12_Template_button_click_3_listener() { ngcc0.restoreView(_r12); const ctx_r13 = ngcc0.nextContext(); return ctx_r13.select(); });\n    ngcc0.text(4);\n    ngcc0.pipe(5, \"translate\");\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const ctx_r3 = ngcc0.nextContext();\n    ngcc0.advance(1);\n    ngcc0.textInterpolate(ngcc0.pipeBind1(2, 3, \"common.cancel\"));\n    ngcc0.advance(2);\n    ngcc0.property(\"disabled\", ctx_r3.useExisting && ctx_r3.selectedCustomer.length === 0 || ctx_r3.createNew && ctx_r3.customerForm.invalid);\n    ngcc0.advance(1);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(5, 5, \"common.okay\"), \" \");\n} }\nfunction SelectShippingMethodDialogComponent_ng_template_0_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.text(0);\n    ngcc0.pipe(1, \"translate\");\n} if (rf & 2) {\n    ngcc0.textInterpolate(ngcc0.pipeBind1(1, 1, \"order.select-shipping-method\"));\n} }\nfunction SelectShippingMethodDialogComponent_vdr_radio_card_2_vdr_object_tree_14_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.element(0, \"vdr-object-tree\", 9);\n} if (rf & 2) {\n    const quote_r3 = ngcc0.nextContext().$implicit;\n    ngcc0.property(\"value\", quote_r3.metadata);\n} }\nfunction SelectShippingMethodDialogComponent_vdr_radio_card_2_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementStart(0, \"vdr-radio-card\", 4);\n    ngcc0.elementStart(1, \"div\", 5);\n    ngcc0.elementStart(2, \"vdr-labeled-data\", 6);\n    ngcc0.pipe(3, \"translate\");\n    ngcc0.text(4);\n    ngcc0.elementEnd();\n    ngcc0.elementStart(5, \"div\", 7);\n    ngcc0.elementStart(6, \"vdr-labeled-data\", 6);\n    ngcc0.pipe(7, \"translate\");\n    ngcc0.text(8);\n    ngcc0.pipe(9, \"localeCurrency\");\n    ngcc0.elementEnd();\n    ngcc0.elementStart(10, \"vdr-labeled-data\", 6);\n    ngcc0.pipe(11, \"translate\");\n    ngcc0.text(12);\n    ngcc0.pipe(13, \"localeCurrency\");\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.template(14, SelectShippingMethodDialogComponent_vdr_radio_card_2_vdr_object_tree_14_Template, 1, 1, \"vdr-object-tree\", 8);\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const quote_r3 = ctx.$implicit;\n    const ctx_r1 = ngcc0.nextContext();\n    ngcc0.property(\"item\", quote_r3);\n    ngcc0.advance(2);\n    ngcc0.property(\"label\", ngcc0.pipeBind1(3, 8, \"settings.shipping-method\"));\n    ngcc0.advance(2);\n    ngcc0.textInterpolate1(\" \", quote_r3.name, \" \");\n    ngcc0.advance(2);\n    ngcc0.property(\"label\", ngcc0.pipeBind1(7, 10, \"common.price\"));\n    ngcc0.advance(2);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind2(9, 12, quote_r3.price, ctx_r1.currencyCode), \" \");\n    ngcc0.advance(2);\n    ngcc0.property(\"label\", ngcc0.pipeBind1(11, 15, \"common.price-with-tax\"));\n    ngcc0.advance(2);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind2(13, 17, quote_r3.priceWithTax, ctx_r1.currencyCode), \" \");\n    ngcc0.advance(2);\n    ngcc0.property(\"ngIf\", quote_r3.metadata);\n} }\nfunction SelectShippingMethodDialogComponent_ng_template_3_Template(rf, ctx) { if (rf & 1) {\n    const _r7 = ngcc0.getCurrentView();\n    ngcc0.elementStart(0, \"button\", 10);\n    ngcc0.listener(\"click\", function SelectShippingMethodDialogComponent_ng_template_3_Template_button_click_0_listener() { ngcc0.restoreView(_r7); const ctx_r6 = ngcc0.nextContext(); return ctx_r6.cancel(); });\n    ngcc0.text(1);\n    ngcc0.pipe(2, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.elementStart(3, \"button\", 11);\n    ngcc0.listener(\"click\", function SelectShippingMethodDialogComponent_ng_template_3_Template_button_click_3_listener() { ngcc0.restoreView(_r7); const ctx_r8 = ngcc0.nextContext(); return ctx_r8.select(); });\n    ngcc0.text(4);\n    ngcc0.pipe(5, \"translate\");\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const ctx_r2 = ngcc0.nextContext();\n    ngcc0.advance(1);\n    ngcc0.textInterpolate(ngcc0.pipeBind1(2, 3, \"common.cancel\"));\n    ngcc0.advance(2);\n    ngcc0.property(\"disabled\", !ctx_r2.selectedMethod);\n    ngcc0.advance(1);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(5, 5, \"common.okay\"), \" \");\n} }\nfunction DraftOrderDetailComponent_vdr_action_bar_0_Template(rf, ctx) { if (rf & 1) {\n    const _r4 = ngcc0.getCurrentView();\n    ngcc0.elementStart(0, \"vdr-action-bar\");\n    ngcc0.elementStart(1, \"vdr-ab-left\");\n    ngcc0.elementStart(2, \"div\", 1);\n    ngcc0.element(3, \"vdr-entity-info\", 2);\n    ngcc0.pipe(4, \"async\");\n    ngcc0.element(5, \"vdr-order-state-label\", 3);\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementStart(6, \"vdr-ab-right\");\n    ngcc0.elementStart(7, \"button\", 4);\n    ngcc0.listener(\"click\", function DraftOrderDetailComponent_vdr_action_bar_0_Template_button_click_7_listener() { ngcc0.restoreView(_r4); const ctx_r3 = ngcc0.nextContext(); return ctx_r3.completeOrder(); });\n    ngcc0.element(8, \"clr-icon\", 5);\n    ngcc0.text(9);\n    ngcc0.pipe(10, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.elementStart(11, \"vdr-dropdown\");\n    ngcc0.elementStart(12, \"button\", 6);\n    ngcc0.element(13, \"clr-icon\", 7);\n    ngcc0.elementEnd();\n    ngcc0.elementStart(14, \"vdr-dropdown-menu\", 8);\n    ngcc0.elementStart(15, \"button\", 9);\n    ngcc0.listener(\"click\", function DraftOrderDetailComponent_vdr_action_bar_0_Template_button_click_15_listener() { ngcc0.restoreView(_r4); const ctx_r5 = ngcc0.nextContext(); return ctx_r5.deleteOrder(); });\n    ngcc0.element(16, \"clr-icon\", 10);\n    ngcc0.text(17);\n    ngcc0.pipe(18, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const order_r2 = ctx.ngIf;\n    const ctx_r0 = ngcc0.nextContext();\n    ngcc0.advance(3);\n    ngcc0.property(\"entity\", ngcc0.pipeBind1(4, 5, ctx_r0.entity$));\n    ngcc0.advance(2);\n    ngcc0.property(\"state\", order_r2.state);\n    ngcc0.advance(2);\n    ngcc0.property(\"disabled\", !order_r2.customer || !order_r2.lines.length || !order_r2.shippingLines.length);\n    ngcc0.advance(2);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(10, 7, \"order.complete-draft-order\"), \" \");\n    ngcc0.advance(8);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(18, 9, \"order.delete-draft-order\"), \" \");\n} }\nfunction DraftOrderDetailComponent_div_2_button_6_Template(rf, ctx) { if (rf & 1) {\n    const _r21 = ngcc0.getCurrentView();\n    ngcc0.elementStart(0, \"button\", 30);\n    ngcc0.listener(\"click\", function DraftOrderDetailComponent_div_2_button_6_Template_button_click_0_listener() { ngcc0.restoreView(_r21); const ctx_r20 = ngcc0.nextContext(2); return ctx_r20.displayCouponCodeInput = !ctx_r20.displayCouponCodeInput; });\n    ngcc0.text(1);\n    ngcc0.pipe(2, \"translate\");\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    ngcc0.advance(1);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(2, 1, \"order.set-coupon-codes\"), \" \");\n} }\nfunction DraftOrderDetailComponent_div_2_div_7_Template(rf, ctx) { if (rf & 1) {\n    const _r23 = ngcc0.getCurrentView();\n    ngcc0.elementStart(0, \"div\");\n    ngcc0.elementStart(1, \"label\");\n    ngcc0.text(2);\n    ngcc0.pipe(3, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.elementStart(4, \"vdr-coupon-code-selector\", 31);\n    ngcc0.listener(\"addCouponCode\", function DraftOrderDetailComponent_div_2_div_7_Template_vdr_coupon_code_selector_addCouponCode_4_listener($event) { ngcc0.restoreView(_r23); const ctx_r22 = ngcc0.nextContext(2); return ctx_r22.applyCouponCode($event); })(\"removeCouponCode\", function DraftOrderDetailComponent_div_2_div_7_Template_vdr_coupon_code_selector_removeCouponCode_4_listener($event) { ngcc0.restoreView(_r23); const ctx_r24 = ngcc0.nextContext(2); return ctx_r24.removeCouponCode($event); });\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const order_r6 = ngcc0.nextContext().ngIf;\n    ngcc0.advance(2);\n    ngcc0.textInterpolate(ngcc0.pipeBind1(3, 2, \"order.set-coupon-codes\"));\n    ngcc0.advance(2);\n    ngcc0.property(\"couponCodes\", order_r6.couponCodes);\n} }\nfunction DraftOrderDetailComponent_div_2_ng_container_8_tr_20_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementStart(0, \"tr\");\n    ngcc0.elementStart(1, \"td\");\n    ngcc0.text(2);\n    ngcc0.elementEnd();\n    ngcc0.elementStart(3, \"td\");\n    ngcc0.text(4);\n    ngcc0.pipe(5, \"percent\");\n    ngcc0.elementEnd();\n    ngcc0.elementStart(6, \"td\");\n    ngcc0.text(7);\n    ngcc0.pipe(8, \"localeCurrency\");\n    ngcc0.elementEnd();\n    ngcc0.elementStart(9, \"td\");\n    ngcc0.text(10);\n    ngcc0.pipe(11, \"localeCurrency\");\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const row_r27 = ctx.$implicit;\n    const order_r6 = ngcc0.nextContext(2).ngIf;\n    ngcc0.advance(2);\n    ngcc0.textInterpolate(row_r27.description);\n    ngcc0.advance(2);\n    ngcc0.textInterpolate(ngcc0.pipeBind1(5, 4, row_r27.taxRate / 100));\n    ngcc0.advance(3);\n    ngcc0.textInterpolate(ngcc0.pipeBind2(8, 6, row_r27.taxBase, order_r6.currencyCode));\n    ngcc0.advance(3);\n    ngcc0.textInterpolate(ngcc0.pipeBind2(11, 9, row_r27.taxTotal, order_r6.currencyCode));\n} }\nfunction DraftOrderDetailComponent_div_2_ng_container_8_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementContainerStart(0);\n    ngcc0.elementStart(1, \"h4\");\n    ngcc0.text(2);\n    ngcc0.pipe(3, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.elementStart(4, \"table\", 32);\n    ngcc0.elementStart(5, \"thead\");\n    ngcc0.elementStart(6, \"tr\");\n    ngcc0.elementStart(7, \"th\");\n    ngcc0.text(8);\n    ngcc0.pipe(9, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.elementStart(10, \"th\");\n    ngcc0.text(11);\n    ngcc0.pipe(12, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.elementStart(13, \"th\");\n    ngcc0.text(14);\n    ngcc0.pipe(15, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.elementStart(16, \"th\");\n    ngcc0.text(17);\n    ngcc0.pipe(18, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementStart(19, \"tbody\");\n    ngcc0.template(20, DraftOrderDetailComponent_div_2_ng_container_8_tr_20_Template, 12, 12, \"tr\", 28);\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementContainerEnd();\n} if (rf & 2) {\n    const order_r6 = ngcc0.nextContext().ngIf;\n    ngcc0.advance(2);\n    ngcc0.textInterpolate(ngcc0.pipeBind1(3, 6, \"order.tax-summary\"));\n    ngcc0.advance(6);\n    ngcc0.textInterpolate(ngcc0.pipeBind1(9, 8, \"common.description\"));\n    ngcc0.advance(3);\n    ngcc0.textInterpolate(ngcc0.pipeBind1(12, 10, \"order.tax-rate\"));\n    ngcc0.advance(3);\n    ngcc0.textInterpolate(ngcc0.pipeBind1(15, 12, \"order.tax-base\"));\n    ngcc0.advance(3);\n    ngcc0.textInterpolate(ngcc0.pipeBind1(18, 14, \"order.tax-total\"));\n    ngcc0.advance(3);\n    ngcc0.property(\"ngForOf\", order_r6.taxSummary);\n} }\nfunction DraftOrderDetailComponent_div_2_clr_icon_12_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.element(0, \"clr-icon\", 33);\n} }\nfunction DraftOrderDetailComponent_div_2_clr_icon_13_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.element(0, \"clr-icon\", 34);\n} }\nfunction DraftOrderDetailComponent_div_2_vdr_customer_label_18_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.element(0, \"vdr-customer-label\", 35);\n} if (rf & 2) {\n    const order_r6 = ngcc0.nextContext().ngIf;\n    ngcc0.property(\"customer\", order_r6.customer);\n} }\nfunction DraftOrderDetailComponent_div_2_clr_icon_24_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.element(0, \"clr-icon\", 33);\n} }\nfunction DraftOrderDetailComponent_div_2_clr_icon_25_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.element(0, \"clr-icon\", 34);\n} }\nfunction DraftOrderDetailComponent_div_2_vdr_formatted_address_29_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.element(0, \"vdr-formatted-address\", 36);\n} if (rf & 2) {\n    const order_r6 = ngcc0.nextContext().ngIf;\n    ngcc0.property(\"address\", order_r6.billingAddress);\n} }\nfunction DraftOrderDetailComponent_div_2_clr_icon_35_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.element(0, \"clr-icon\", 33);\n} }\nfunction DraftOrderDetailComponent_div_2_clr_icon_36_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.element(0, \"clr-icon\", 34);\n} }\nfunction DraftOrderDetailComponent_div_2_vdr_formatted_address_41_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.element(0, \"vdr-formatted-address\", 36);\n} if (rf & 2) {\n    const order_r6 = ngcc0.nextContext().ngIf;\n    ngcc0.property(\"address\", order_r6.shippingAddress);\n} }\nfunction DraftOrderDetailComponent_div_2_div_47_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementStart(0, \"div\");\n    ngcc0.text(1);\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const shippingLine_r33 = ctx.$implicit;\n    ngcc0.advance(1);\n    ngcc0.textInterpolate1(\" \", shippingLine_r33.shippingMethod.name, \" \");\n} }\nfunction DraftOrderDetailComponent_div_2_Template(rf, ctx) { if (rf & 1) {\n    const _r35 = ngcc0.getCurrentView();\n    ngcc0.elementStart(0, \"div\");\n    ngcc0.elementStart(1, \"div\", 11);\n    ngcc0.elementStart(2, \"div\", 12);\n    ngcc0.elementStart(3, \"vdr-draft-order-variant-selector\", 13);\n    ngcc0.listener(\"addItem\", function DraftOrderDetailComponent_div_2_Template_vdr_draft_order_variant_selector_addItem_3_listener($event) { ngcc0.restoreView(_r35); const ctx_r34 = ngcc0.nextContext(); return ctx_r34.addItemToOrder($event); });\n    ngcc0.elementEnd();\n    ngcc0.elementStart(4, \"vdr-order-table\", 14);\n    ngcc0.listener(\"adjust\", function DraftOrderDetailComponent_div_2_Template_vdr_order_table_adjust_4_listener($event) { ngcc0.restoreView(_r35); const ctx_r36 = ngcc0.nextContext(); return ctx_r36.adjustOrderLine($event); })(\"remove\", function DraftOrderDetailComponent_div_2_Template_vdr_order_table_remove_4_listener($event) { ngcc0.restoreView(_r35); const ctx_r37 = ngcc0.nextContext(); return ctx_r37.removeOrderLine($event); });\n    ngcc0.elementEnd();\n    ngcc0.elementStart(5, \"div\", 15);\n    ngcc0.template(6, DraftOrderDetailComponent_div_2_button_6_Template, 3, 3, \"button\", 16);\n    ngcc0.template(7, DraftOrderDetailComponent_div_2_div_7_Template, 5, 4, \"div\", 0);\n    ngcc0.elementEnd();\n    ngcc0.template(8, DraftOrderDetailComponent_div_2_ng_container_8_Template, 21, 16, \"ng-container\", 0);\n    ngcc0.elementEnd();\n    ngcc0.elementStart(9, \"div\", 17);\n    ngcc0.elementStart(10, \"div\", 18);\n    ngcc0.elementStart(11, \"div\", 19);\n    ngcc0.template(12, DraftOrderDetailComponent_div_2_clr_icon_12_Template, 1, 0, \"clr-icon\", 20);\n    ngcc0.template(13, DraftOrderDetailComponent_div_2_clr_icon_13_Template, 1, 0, \"clr-icon\", 21);\n    ngcc0.text(14);\n    ngcc0.pipe(15, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.elementStart(16, \"div\", 22);\n    ngcc0.elementStart(17, \"div\", 23);\n    ngcc0.template(18, DraftOrderDetailComponent_div_2_vdr_customer_label_18_Template, 1, 1, \"vdr-customer-label\", 24);\n    ngcc0.elementStart(19, \"button\", 25);\n    ngcc0.listener(\"click\", function DraftOrderDetailComponent_div_2_Template_button_click_19_listener() { ngcc0.restoreView(_r35); const ctx_r38 = ngcc0.nextContext(); return ctx_r38.setCustomer(); });\n    ngcc0.text(20);\n    ngcc0.pipe(21, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementStart(22, \"div\", 22);\n    ngcc0.elementStart(23, \"h4\", 26);\n    ngcc0.template(24, DraftOrderDetailComponent_div_2_clr_icon_24_Template, 1, 0, \"clr-icon\", 20);\n    ngcc0.template(25, DraftOrderDetailComponent_div_2_clr_icon_25_Template, 1, 0, \"clr-icon\", 21);\n    ngcc0.text(26);\n    ngcc0.pipe(27, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.elementStart(28, \"div\", 23);\n    ngcc0.template(29, DraftOrderDetailComponent_div_2_vdr_formatted_address_29_Template, 1, 1, \"vdr-formatted-address\", 27);\n    ngcc0.elementStart(30, \"button\", 25);\n    ngcc0.listener(\"click\", function DraftOrderDetailComponent_div_2_Template_button_click_30_listener() { ngcc0.restoreView(_r35); const ctx_r39 = ngcc0.nextContext(); return ctx_r39.setBillingAddress(); });\n    ngcc0.text(31);\n    ngcc0.pipe(32, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementStart(33, \"div\", 18);\n    ngcc0.elementStart(34, \"div\", 19);\n    ngcc0.template(35, DraftOrderDetailComponent_div_2_clr_icon_35_Template, 1, 0, \"clr-icon\", 20);\n    ngcc0.template(36, DraftOrderDetailComponent_div_2_clr_icon_36_Template, 1, 0, \"clr-icon\", 21);\n    ngcc0.text(37);\n    ngcc0.pipe(38, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.elementStart(39, \"div\", 22);\n    ngcc0.elementStart(40, \"div\", 23);\n    ngcc0.template(41, DraftOrderDetailComponent_div_2_vdr_formatted_address_41_Template, 1, 1, \"vdr-formatted-address\", 27);\n    ngcc0.elementStart(42, \"button\", 25);\n    ngcc0.listener(\"click\", function DraftOrderDetailComponent_div_2_Template_button_click_42_listener() { ngcc0.restoreView(_r35); const ctx_r40 = ngcc0.nextContext(); return ctx_r40.setShippingAddress(); });\n    ngcc0.text(43);\n    ngcc0.pipe(44, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementStart(45, \"div\", 22);\n    ngcc0.elementStart(46, \"div\", 23);\n    ngcc0.template(47, DraftOrderDetailComponent_div_2_div_47_Template, 2, 1, \"div\", 28);\n    ngcc0.elementStart(48, \"button\", 25);\n    ngcc0.listener(\"click\", function DraftOrderDetailComponent_div_2_Template_button_click_48_listener() { ngcc0.restoreView(_r35); const ctx_r41 = ngcc0.nextContext(); return ctx_r41.setShippingMethod(); });\n    ngcc0.text(49);\n    ngcc0.pipe(50, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementStart(51, \"vdr-order-custom-fields-card\", 29);\n    ngcc0.listener(\"updateClick\", function DraftOrderDetailComponent_div_2_Template_vdr_order_custom_fields_card_updateClick_51_listener($event) { ngcc0.restoreView(_r35); const ctx_r42 = ngcc0.nextContext(); return ctx_r42.updateCustomFields($event); });\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const order_r6 = ctx.ngIf;\n    const ctx_r1 = ngcc0.nextContext();\n    ngcc0.advance(3);\n    ngcc0.property(\"orderLineCustomFields\", ctx_r1.orderLineCustomFields)(\"currencyCode\", order_r6.currencyCode);\n    ngcc0.advance(1);\n    ngcc0.property(\"order\", order_r6)(\"orderLineCustomFields\", ctx_r1.orderLineCustomFields)(\"isDraft\", true);\n    ngcc0.advance(2);\n    ngcc0.property(\"ngIf\", order_r6.couponCodes.length === 0 && !ctx_r1.displayCouponCodeInput);\n    ngcc0.advance(1);\n    ngcc0.property(\"ngIf\", order_r6.couponCodes.length || ctx_r1.displayCouponCodeInput);\n    ngcc0.advance(1);\n    ngcc0.property(\"ngIf\", order_r6.taxSummary.length);\n    ngcc0.advance(4);\n    ngcc0.property(\"ngIf\", !order_r6.customer);\n    ngcc0.advance(1);\n    ngcc0.property(\"ngIf\", order_r6.customer);\n    ngcc0.advance(1);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(15, 27, \"order.customer\"), \" \");\n    ngcc0.advance(4);\n    ngcc0.property(\"ngIf\", order_r6.customer);\n    ngcc0.advance(2);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(21, 29, \"order.set-customer-for-order\"), \" \");\n    ngcc0.advance(4);\n    ngcc0.property(\"ngIf\", !order_r6.billingAddress.streetLine1);\n    ngcc0.advance(1);\n    ngcc0.property(\"ngIf\", order_r6.billingAddress.streetLine1);\n    ngcc0.advance(1);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(27, 31, \"order.billing-address\"), \" \");\n    ngcc0.advance(3);\n    ngcc0.property(\"ngIf\", order_r6.billingAddress);\n    ngcc0.advance(2);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(32, 33, \"order.set-billing-address\"), \" \");\n    ngcc0.advance(4);\n    ngcc0.property(\"ngIf\", !order_r6.shippingAddress.streetLine1 || !order_r6.shippingLines.length);\n    ngcc0.advance(1);\n    ngcc0.property(\"ngIf\", order_r6.shippingAddress.streetLine1 && order_r6.shippingLines.length);\n    ngcc0.advance(1);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(38, 35, \"order.shipping\"), \" \");\n    ngcc0.advance(4);\n    ngcc0.property(\"ngIf\", order_r6.shippingAddress);\n    ngcc0.advance(2);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(44, 37, \"order.set-shipping-address\"), \" \");\n    ngcc0.advance(4);\n    ngcc0.property(\"ngForOf\", order_r6.shippingLines);\n    ngcc0.advance(2);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(50, 39, \"order.set-shipping-method\"), \" \");\n    ngcc0.advance(2);\n    ngcc0.property(\"customFieldsConfig\", ctx_r1.customFields)(\"customFieldValues\", order_r6.customFields);\n} }\nfunction DraftOrderVariantSelectorComponent_div_6_ng_container_30_div_1_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementStart(0, \"div\", 16);\n    ngcc0.element(1, \"vdr-custom-field-control\", 17);\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const field_r4 = ctx.$implicit;\n    const ctx_r3 = ngcc0.nextContext(3);\n    ngcc0.advance(1);\n    ngcc0.property(\"compact\", true)(\"readonly\", false)(\"customField\", field_r4)(\"customFieldsFormGroup\", ctx_r3.customFieldsFormGroup);\n} }\nfunction DraftOrderVariantSelectorComponent_div_6_ng_container_30_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementContainerStart(0);\n    ngcc0.template(1, DraftOrderVariantSelectorComponent_div_6_ng_container_30_div_1_Template, 2, 4, \"div\", 15);\n    ngcc0.elementContainerEnd();\n} if (rf & 2) {\n    const ctx_r2 = ngcc0.nextContext(2);\n    ngcc0.advance(1);\n    ngcc0.property(\"ngForOf\", ctx_r2.orderLineCustomFields);\n} }\nfunction DraftOrderVariantSelectorComponent_div_6_Template(rf, ctx) { if (rf & 1) {\n    const _r6 = ngcc0.getCurrentView();\n    ngcc0.elementStart(0, \"div\", 1);\n    ngcc0.elementStart(1, \"div\", 5);\n    ngcc0.element(2, \"img\", 6);\n    ngcc0.pipe(3, \"assetPreview\");\n    ngcc0.elementStart(4, \"div\", 7);\n    ngcc0.elementStart(5, \"div\");\n    ngcc0.text(6);\n    ngcc0.elementEnd();\n    ngcc0.elementStart(7, \"div\", 8);\n    ngcc0.text(8);\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementStart(9, \"div\", 9);\n    ngcc0.elementStart(10, \"div\", 8);\n    ngcc0.text(11);\n    ngcc0.pipe(12, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.elementStart(13, \"div\", 8);\n    ngcc0.text(14);\n    ngcc0.pipe(15, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.element(16, \"div\", 10);\n    ngcc0.elementStart(17, \"div\", 7);\n    ngcc0.elementStart(18, \"div\");\n    ngcc0.text(19);\n    ngcc0.pipe(20, \"localeCurrency\");\n    ngcc0.elementEnd();\n    ngcc0.elementStart(21, \"div\", 11);\n    ngcc0.pipe(22, \"translate\");\n    ngcc0.text(23);\n    ngcc0.pipe(24, \"localeCurrency\");\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementStart(25, \"div\");\n    ngcc0.elementStart(26, \"input\", 12);\n    ngcc0.listener(\"ngModelChange\", function DraftOrderVariantSelectorComponent_div_6_Template_input_ngModelChange_26_listener($event) { ngcc0.restoreView(_r6); const ctx_r5 = ngcc0.nextContext(); return ctx_r5.quantity = $event; });\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementStart(27, \"button\", 13);\n    ngcc0.listener(\"click\", function DraftOrderVariantSelectorComponent_div_6_Template_button_click_27_listener() { const restoredCtx = ngcc0.restoreView(_r6); const selectedVariant_r1 = restoredCtx.ngIf; const ctx_r7 = ngcc0.nextContext(); return ctx_r7.addItemClick(selectedVariant_r1); });\n    ngcc0.text(28);\n    ngcc0.pipe(29, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.template(30, DraftOrderVariantSelectorComponent_div_6_ng_container_30_Template, 2, 1, \"ng-container\", 14);\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const selectedVariant_r1 = ctx.ngIf;\n    const ctx_r0 = ngcc0.nextContext();\n    ngcc0.advance(2);\n    ngcc0.property(\"src\", ngcc0.pipeBind2(3, 15, selectedVariant_r1.featuredAsset || selectedVariant_r1.product.featuredAsset, 32), ngcc0.sanitizeUrl);\n    ngcc0.advance(4);\n    ngcc0.textInterpolate(selectedVariant_r1 == null ? null : selectedVariant_r1.name);\n    ngcc0.advance(2);\n    ngcc0.textInterpolate(selectedVariant_r1 == null ? null : selectedVariant_r1.sku);\n    ngcc0.advance(3);\n    ngcc0.textInterpolate2(\" \", ngcc0.pipeBind1(12, 18, \"catalog.stock-on-hand\"), \": \", selectedVariant_r1.stockOnHand, \" \");\n    ngcc0.advance(3);\n    ngcc0.textInterpolate2(\" \", ngcc0.pipeBind1(15, 20, \"catalog.stock-allocated\"), \": \", selectedVariant_r1.stockAllocated, \" \");\n    ngcc0.advance(5);\n    ngcc0.textInterpolate(ngcc0.pipeBind2(20, 22, selectedVariant_r1 == null ? null : selectedVariant_r1.priceWithTax, ctx_r0.currencyCode));\n    ngcc0.advance(2);\n    ngcc0.property(\"title\", ngcc0.pipeBind1(22, 25, \"order.net-price\"));\n    ngcc0.advance(2);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind2(24, 27, selectedVariant_r1 == null ? null : selectedVariant_r1.price, ctx_r0.currencyCode), \" \");\n    ngcc0.advance(3);\n    ngcc0.property(\"disabled\", !selectedVariant_r1)(\"ngModel\", ctx_r0.quantity);\n    ngcc0.advance(1);\n    ngcc0.property(\"disabled\", !selectedVariant_r1);\n    ngcc0.advance(1);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(29, 30, \"order.add-item-to-order\"), \" \");\n    ngcc0.advance(2);\n    ngcc0.property(\"ngIf\", ctx_r0.orderLineCustomFields.length);\n} }\nfunction FulfillOrderDialogComponent_ng_template_0_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.text(0);\n    ngcc0.pipe(1, \"translate\");\n} if (rf & 2) {\n    ngcc0.textInterpolate(ngcc0.pipeBind1(1, 1, \"order.fulfill-order\"));\n} }\nfunction FulfillOrderDialogComponent_tr_22_img_2_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.element(0, \"img\", 17);\n    ngcc0.pipe(1, \"assetPreview\");\n} if (rf & 2) {\n    const line_r3 = ngcc0.nextContext().$implicit;\n    ngcc0.property(\"src\", ngcc0.pipeBind2(1, 1, line_r3.featuredAsset, \"tiny\"), ngcc0.sanitizeUrl);\n} }\nfunction FulfillOrderDialogComponent_tr_22_input_12_Template(rf, ctx) { if (rf & 1) {\n    const _r8 = ngcc0.getCurrentView();\n    ngcc0.elementStart(0, \"input\", 18);\n    ngcc0.listener(\"ngModelChange\", function FulfillOrderDialogComponent_tr_22_input_12_Template_input_ngModelChange_0_listener($event) { ngcc0.restoreView(_r8); const line_r3 = ngcc0.nextContext().$implicit; const ctx_r7 = ngcc0.nextContext(); return ctx_r7.fulfillmentQuantities[line_r3.id].fulfillCount = $event; });\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const line_r3 = ngcc0.nextContext().$implicit;\n    const ctx_r5 = ngcc0.nextContext();\n    ngcc0.property(\"disabled\", ctx_r5.getUnfulfilledCount(line_r3) === 0)(\"ngModel\", ctx_r5.fulfillmentQuantities[line_r3.id].fulfillCount)(\"max\", ctx_r5.fulfillmentQuantities[line_r3.id].max);\n} }\nfunction FulfillOrderDialogComponent_tr_22_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementStart(0, \"tr\", 9);\n    ngcc0.elementStart(1, \"td\", 10);\n    ngcc0.template(2, FulfillOrderDialogComponent_tr_22_img_2_Template, 2, 4, \"img\", 11);\n    ngcc0.elementEnd();\n    ngcc0.elementStart(3, \"td\", 12);\n    ngcc0.text(4);\n    ngcc0.elementEnd();\n    ngcc0.elementStart(5, \"td\", 13);\n    ngcc0.text(6);\n    ngcc0.elementEnd();\n    ngcc0.elementStart(7, \"td\", 14);\n    ngcc0.text(8);\n    ngcc0.elementEnd();\n    ngcc0.elementStart(9, \"td\", 14);\n    ngcc0.text(10);\n    ngcc0.elementEnd();\n    ngcc0.elementStart(11, \"td\", 15);\n    ngcc0.template(12, FulfillOrderDialogComponent_tr_22_input_12_Template, 1, 3, \"input\", 16);\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const line_r3 = ctx.$implicit;\n    const ctx_r1 = ngcc0.nextContext();\n    ngcc0.classProp(\"ignore\", ctx_r1.getUnfulfilledCount(line_r3) === 0);\n    ngcc0.advance(2);\n    ngcc0.property(\"ngIf\", line_r3.featuredAsset);\n    ngcc0.advance(2);\n    ngcc0.textInterpolate(line_r3.productVariant.name);\n    ngcc0.advance(2);\n    ngcc0.textInterpolate(line_r3.productVariant.sku);\n    ngcc0.advance(2);\n    ngcc0.textInterpolate(ctx_r1.getUnfulfilledCount(line_r3));\n    ngcc0.advance(2);\n    ngcc0.textInterpolate(line_r3.productVariant.stockOnHand);\n    ngcc0.advance(2);\n    ngcc0.property(\"ngIf\", ctx_r1.fulfillmentQuantities[line_r3.id]);\n} }\nfunction FulfillOrderDialogComponent_ng_template_33_Template(rf, ctx) { if (rf & 1) {\n    const _r12 = ngcc0.getCurrentView();\n    ngcc0.elementStart(0, \"button\", 19);\n    ngcc0.listener(\"click\", function FulfillOrderDialogComponent_ng_template_33_Template_button_click_0_listener() { ngcc0.restoreView(_r12); const ctx_r11 = ngcc0.nextContext(); return ctx_r11.cancel(); });\n    ngcc0.text(1);\n    ngcc0.pipe(2, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.elementStart(3, \"button\", 20);\n    ngcc0.listener(\"click\", function FulfillOrderDialogComponent_ng_template_33_Template_button_click_3_listener() { ngcc0.restoreView(_r12); const ctx_r13 = ngcc0.nextContext(); return ctx_r13.select(); });\n    ngcc0.text(4);\n    ngcc0.pipe(5, \"translate\");\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const ctx_r2 = ngcc0.nextContext();\n    ngcc0.advance(1);\n    ngcc0.textInterpolate(ngcc0.pipeBind1(2, 3, \"common.cancel\"));\n    ngcc0.advance(2);\n    ngcc0.property(\"disabled\", !ctx_r2.canSubmit());\n    ngcc0.advance(1);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(5, 5, \"order.create-fulfillment\"), \" \");\n} }\nfunction FulfillmentCardComponent_vdr_fulfillment_detail_8_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.element(0, \"vdr-fulfillment-detail\", 7);\n} if (rf & 2) {\n    const ctx_r0 = ngcc0.nextContext();\n    ngcc0.property(\"fulfillmentId\", ctx_r0.fulfillment == null ? null : ctx_r0.fulfillment.id)(\"order\", ctx_r0.order);\n} }\nfunction FulfillmentCardComponent_div_9_ng_container_1_Template(rf, ctx) { if (rf & 1) {\n    const _r6 = ngcc0.getCurrentView();\n    ngcc0.elementContainerStart(0);\n    ngcc0.elementStart(1, \"button\", 14);\n    ngcc0.listener(\"click\", function FulfillmentCardComponent_div_9_ng_container_1_Template_button_click_1_listener() { const restoredCtx = ngcc0.restoreView(_r6); const suggestedState_r4 = restoredCtx.ngIf; const ctx_r5 = ngcc0.nextContext(2); return ctx_r5.transitionState.emit(suggestedState_r4); });\n    ngcc0.text(2);\n    ngcc0.pipe(3, \"translate\");\n    ngcc0.pipe(4, \"translate\");\n    ngcc0.pipe(5, \"stateI18nToken\");\n    ngcc0.elementEnd();\n    ngcc0.elementContainerEnd();\n} if (rf & 2) {\n    const suggestedState_r4 = ctx.ngIf;\n    ngcc0.advance(2);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind2(3, 1, \"order.set-fulfillment-state\", ngcc0.pureFunction1(8, _c0, ngcc0.pipeBind1(4, 4, ngcc0.pipeBind1(5, 6, suggestedState_r4)))), \" \");\n} }\nfunction FulfillmentCardComponent_div_9_ng_container_6_ng_container_2_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementContainerStart(0);\n    ngcc0.element(1, \"clr-icon\", 18);\n    ngcc0.text(2);\n    ngcc0.pipe(3, \"translate\");\n    ngcc0.pipe(4, \"translate\");\n    ngcc0.pipe(5, \"stateI18nToken\");\n    ngcc0.elementContainerEnd();\n} if (rf & 2) {\n    const nextState_r7 = ngcc0.nextContext().$implicit;\n    ngcc0.advance(2);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind2(3, 1, \"order.transition-to-state\", ngcc0.pureFunction1(8, _c0, ngcc0.pipeBind1(4, 4, ngcc0.pipeBind1(5, 6, nextState_r7)))), \" \");\n} }\nfunction FulfillmentCardComponent_div_9_ng_container_6_ng_template_3_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.element(0, \"clr-icon\", 19);\n    ngcc0.text(1);\n    ngcc0.pipe(2, \"translate\");\n} if (rf & 2) {\n    ngcc0.advance(1);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(2, 1, \"order.cancel-fulfillment\"), \" \");\n} }\nfunction FulfillmentCardComponent_div_9_ng_container_6_Template(rf, ctx) { if (rf & 1) {\n    const _r13 = ngcc0.getCurrentView();\n    ngcc0.elementContainerStart(0);\n    ngcc0.elementStart(1, \"button\", 15);\n    ngcc0.listener(\"click\", function FulfillmentCardComponent_div_9_ng_container_6_Template_button_click_1_listener() { const restoredCtx = ngcc0.restoreView(_r13); const nextState_r7 = restoredCtx.$implicit; const ctx_r12 = ngcc0.nextContext(2); return ctx_r12.transitionState.emit(nextState_r7); });\n    ngcc0.template(2, FulfillmentCardComponent_div_9_ng_container_6_ng_container_2_Template, 6, 10, \"ng-container\", 16);\n    ngcc0.template(3, FulfillmentCardComponent_div_9_ng_container_6_ng_template_3_Template, 3, 3, \"ng-template\", null, 17, ngcc0.templateRefExtractor);\n    ngcc0.elementEnd();\n    ngcc0.elementContainerEnd();\n} if (rf & 2) {\n    const nextState_r7 = ctx.$implicit;\n    const _r9 = ngcc0.reference(4);\n    ngcc0.advance(2);\n    ngcc0.property(\"ngIf\", nextState_r7 !== \"Cancelled\")(\"ngIfElse\", _r9);\n} }\nfunction FulfillmentCardComponent_div_9_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementStart(0, \"div\", 8);\n    ngcc0.template(1, FulfillmentCardComponent_div_9_ng_container_1_Template, 6, 10, \"ng-container\", 9);\n    ngcc0.elementStart(2, \"vdr-dropdown\");\n    ngcc0.elementStart(3, \"button\", 10);\n    ngcc0.element(4, \"clr-icon\", 11);\n    ngcc0.elementEnd();\n    ngcc0.elementStart(5, \"vdr-dropdown-menu\", 12);\n    ngcc0.template(6, FulfillmentCardComponent_div_9_ng_container_6_Template, 5, 2, \"ng-container\", 13);\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const ctx_r1 = ngcc0.nextContext();\n    ngcc0.advance(1);\n    ngcc0.property(\"ngIf\", ctx_r1.nextSuggestedState());\n    ngcc0.advance(5);\n    ngcc0.property(\"ngForOf\", ctx_r1.nextOtherStates());\n} }\nfunction FulfillmentDetailComponent_vdr_labeled_data_7_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementStart(0, \"vdr-labeled-data\", 0);\n    ngcc0.pipe(1, \"translate\");\n    ngcc0.text(2);\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const ctx_r0 = ngcc0.nextContext();\n    ngcc0.property(\"label\", ngcc0.pipeBind1(1, 2, \"order.tracking-code\"));\n    ngcc0.advance(2);\n    ngcc0.textInterpolate1(\" \", ctx_r0.fulfillment == null ? null : ctx_r0.fulfillment.trackingCode, \"\\n\");\n} }\nfunction FulfillmentDetailComponent_ng_container_11_vdr_custom_field_control_1_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.element(0, \"vdr-custom-field-control\", 5);\n} if (rf & 2) {\n    const customField_r2 = ngcc0.nextContext().$implicit;\n    const ctx_r3 = ngcc0.nextContext();\n    ngcc0.property(\"readonly\", true)(\"compact\", true)(\"customField\", customField_r2)(\"customFieldsFormGroup\", ctx_r3.customFieldFormGroup);\n} }\nfunction FulfillmentDetailComponent_ng_container_11_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementContainerStart(0);\n    ngcc0.template(1, FulfillmentDetailComponent_ng_container_11_vdr_custom_field_control_1_Template, 1, 4, \"vdr-custom-field-control\", 4);\n    ngcc0.elementContainerEnd();\n} if (rf & 2) {\n    const customField_r2 = ctx.$implicit;\n    const ctx_r1 = ngcc0.nextContext();\n    ngcc0.advance(1);\n    ngcc0.property(\"ngIf\", ctx_r1.customFieldFormGroup.get(customField_r2.name));\n} }\nfunction FulfillmentStateLabelComponent_clr_icon_2_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.element(0, \"clr-icon\", 2);\n} }\nfunction LineFulfillmentComponent_vdr_dropdown_0_clr_icon_2_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.element(0, \"clr-icon\", 9);\n} }\nfunction LineFulfillmentComponent_vdr_dropdown_0_clr_icon_3_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.element(0, \"clr-icon\", 10);\n} }\nfunction LineFulfillmentComponent_vdr_dropdown_0_clr_icon_4_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.element(0, \"clr-icon\", 11);\n} }\nfunction LineFulfillmentComponent_vdr_dropdown_0_label_6_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementStart(0, \"label\", 12);\n    ngcc0.text(1);\n    ngcc0.pipe(2, \"translate\");\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    ngcc0.advance(1);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(2, 1, \"order.line-fulfillment-all\"), \" \");\n} }\nconst _c1 = function (a0, a1) { return { total: a0, count: a1 }; };\nfunction LineFulfillmentComponent_vdr_dropdown_0_label_7_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementStart(0, \"label\", 12);\n    ngcc0.text(1);\n    ngcc0.pipe(2, \"translate\");\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const ctx_r5 = ngcc0.nextContext(2);\n    ngcc0.advance(1);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind2(2, 1, \"order.line-fulfillment-partial\", ngcc0.pureFunction2(4, _c1, ctx_r5.line.quantity, ctx_r5.fulfilledCount)), \" \");\n} }\nfunction LineFulfillmentComponent_vdr_dropdown_0_label_8_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementStart(0, \"label\", 12);\n    ngcc0.text(1);\n    ngcc0.pipe(2, \"translate\");\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    ngcc0.advance(1);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(2, 1, \"order.line-fulfillment-none\"), \" \");\n} }\nfunction LineFulfillmentComponent_vdr_dropdown_0_div_9_vdr_labeled_data_12_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementStart(0, \"vdr-labeled-data\", 15);\n    ngcc0.pipe(1, \"translate\");\n    ngcc0.text(2);\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const item_r8 = ngcc0.nextContext().$implicit;\n    ngcc0.property(\"label\", ngcc0.pipeBind1(1, 2, \"order.tracking-code\"));\n    ngcc0.advance(2);\n    ngcc0.textInterpolate1(\" \", item_r8.fulfillment.trackingCode, \" \");\n} }\nconst _c2 = function (a0) { return { count: a0 }; };\nfunction LineFulfillmentComponent_vdr_dropdown_0_div_9_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementStart(0, \"div\", 13);\n    ngcc0.elementStart(1, \"div\", 14);\n    ngcc0.text(2);\n    ngcc0.pipe(3, \"translate\");\n    ngcc0.pipe(4, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.elementStart(5, \"vdr-labeled-data\", 15);\n    ngcc0.pipe(6, \"translate\");\n    ngcc0.text(7);\n    ngcc0.pipe(8, \"localeDate\");\n    ngcc0.elementEnd();\n    ngcc0.elementStart(9, \"vdr-labeled-data\", 15);\n    ngcc0.pipe(10, \"translate\");\n    ngcc0.text(11);\n    ngcc0.elementEnd();\n    ngcc0.template(12, LineFulfillmentComponent_vdr_dropdown_0_div_9_vdr_labeled_data_12_Template, 3, 4, \"vdr-labeled-data\", 16);\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const item_r8 = ctx.$implicit;\n    ngcc0.advance(2);\n    ngcc0.textInterpolate3(\" \", ngcc0.pipeBind1(3, 8, \"order.fulfillment\"), \" #\", item_r8.fulfillment.id, \" (\", ngcc0.pipeBind2(4, 10, \"order.item-count\", ngcc0.pureFunction1(20, _c2, item_r8.count)), \") \");\n    ngcc0.advance(3);\n    ngcc0.property(\"label\", ngcc0.pipeBind1(6, 13, \"common.created-at\"));\n    ngcc0.advance(2);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind2(8, 15, item_r8.fulfillment.createdAt, \"medium\"), \" \");\n    ngcc0.advance(2);\n    ngcc0.property(\"label\", ngcc0.pipeBind1(10, 18, \"order.fulfillment-method\"));\n    ngcc0.advance(2);\n    ngcc0.textInterpolate1(\" \", item_r8.fulfillment.method, \" \");\n    ngcc0.advance(1);\n    ngcc0.property(\"ngIf\", item_r8.fulfillment.trackingCode);\n} }\nfunction LineFulfillmentComponent_vdr_dropdown_0_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementStart(0, \"vdr-dropdown\", 1);\n    ngcc0.elementStart(1, \"button\", 2);\n    ngcc0.template(2, LineFulfillmentComponent_vdr_dropdown_0_clr_icon_2_Template, 1, 0, \"clr-icon\", 3);\n    ngcc0.template(3, LineFulfillmentComponent_vdr_dropdown_0_clr_icon_3_Template, 1, 0, \"clr-icon\", 4);\n    ngcc0.template(4, LineFulfillmentComponent_vdr_dropdown_0_clr_icon_4_Template, 1, 0, \"clr-icon\", 5);\n    ngcc0.elementEnd();\n    ngcc0.elementStart(5, \"vdr-dropdown-menu\", 6);\n    ngcc0.template(6, LineFulfillmentComponent_vdr_dropdown_0_label_6_Template, 3, 3, \"label\", 7);\n    ngcc0.template(7, LineFulfillmentComponent_vdr_dropdown_0_label_7_Template, 3, 7, \"label\", 7);\n    ngcc0.template(8, LineFulfillmentComponent_vdr_dropdown_0_label_8_Template, 3, 3, \"label\", 7);\n    ngcc0.template(9, LineFulfillmentComponent_vdr_dropdown_0_div_9_Template, 13, 22, \"div\", 8);\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const ctx_r0 = ngcc0.nextContext();\n    ngcc0.advance(2);\n    ngcc0.property(\"ngIf\", ctx_r0.fulfillmentStatus === \"full\");\n    ngcc0.advance(1);\n    ngcc0.property(\"ngIf\", ctx_r0.fulfillmentStatus === \"partial\");\n    ngcc0.advance(1);\n    ngcc0.property(\"ngIf\", ctx_r0.fulfillmentStatus === \"none\");\n    ngcc0.advance(2);\n    ngcc0.property(\"ngIf\", ctx_r0.fulfillmentStatus === \"full\");\n    ngcc0.advance(1);\n    ngcc0.property(\"ngIf\", ctx_r0.fulfillmentStatus === \"partial\");\n    ngcc0.advance(1);\n    ngcc0.property(\"ngIf\", ctx_r0.fulfillmentStatus === \"none\");\n    ngcc0.advance(1);\n    ngcc0.property(\"ngForOf\", ctx_r0.fulfillments);\n} }\nfunction LineRefundsComponent_span_0_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementStart(0, \"span\", 1);\n    ngcc0.pipe(1, \"translate\");\n    ngcc0.element(2, \"clr-icon\", 2);\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const ctx_r0 = ngcc0.nextContext();\n    ngcc0.property(\"title\", ngcc0.pipeBind2(1, 1, \"order.refunded-count\", ngcc0.pureFunction1(4, _c2, ctx_r0.getRefundedCount())));\n} }\nfunction ModificationDetailComponent_vdr_labeled_data_3_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementStart(0, \"vdr-labeled-data\", 0);\n    ngcc0.pipe(1, \"translate\");\n    ngcc0.text(2);\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const ctx_r0 = ngcc0.nextContext();\n    ngcc0.property(\"label\", ngcc0.pipeBind1(1, 2, \"order.note\"));\n    ngcc0.advance(2);\n    ngcc0.textInterpolate(ctx_r0.modification.note);\n} }\nfunction ModificationDetailComponent_vdr_labeled_data_4_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementStart(0, \"vdr-labeled-data\", 0);\n    ngcc0.pipe(1, \"translate\");\n    ngcc0.text(2);\n    ngcc0.pipe(3, \"localeCurrency\");\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const surcharge_r4 = ctx.$implicit;\n    const ctx_r1 = ngcc0.nextContext();\n    let tmp_1_0;\n    ngcc0.property(\"label\", ngcc0.pipeBind1(1, 3, \"order.surcharges\"));\n    ngcc0.advance(2);\n    ngcc0.textInterpolate2(\" \", (tmp_1_0 = ctx_r1.getSurcharge(surcharge_r4.id)) == null ? null : tmp_1_0.description, \" \", ngcc0.pipeBind2(3, 5, (tmp_1_0 = ctx_r1.getSurcharge(surcharge_r4.id)) == null ? null : tmp_1_0.priceWithTax, ctx_r1.order.currencyCode), \"\");\n} }\nfunction ModificationDetailComponent_vdr_labeled_data_5_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementStart(0, \"vdr-labeled-data\", 0);\n    ngcc0.pipe(1, \"translate\");\n    ngcc0.element(2, \"vdr-simple-item-list\", 3);\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const ctx_r2 = ngcc0.nextContext();\n    ngcc0.property(\"label\", ngcc0.pipeBind1(1, 2, \"order.added-items\"));\n    ngcc0.advance(2);\n    ngcc0.property(\"items\", ctx_r2.getAddedItems());\n} }\nfunction ModificationDetailComponent_vdr_labeled_data_6_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementStart(0, \"vdr-labeled-data\", 0);\n    ngcc0.pipe(1, \"translate\");\n    ngcc0.element(2, \"vdr-simple-item-list\", 3);\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const ctx_r3 = ngcc0.nextContext();\n    ngcc0.property(\"label\", ngcc0.pipeBind1(1, 2, \"order.removed-items\"));\n    ngcc0.advance(2);\n    ngcc0.property(\"items\", ctx_r3.getRemovedItems());\n} }\nfunction OrderCustomFieldsCardComponent_div_0_button_8_Template(rf, ctx) { if (rf & 1) {\n    const _r5 = ngcc0.getCurrentView();\n    ngcc0.elementStart(0, \"button\", 9);\n    ngcc0.listener(\"click\", function OrderCustomFieldsCardComponent_div_0_button_8_Template_button_click_0_listener() { ngcc0.restoreView(_r5); const ctx_r4 = ngcc0.nextContext(2); return ctx_r4.editable = true; });\n    ngcc0.element(1, \"clr-icon\", 10);\n    ngcc0.text(2);\n    ngcc0.pipe(3, \"translate\");\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    ngcc0.advance(2);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(3, 1, \"common.edit\"), \" \");\n} }\nfunction OrderCustomFieldsCardComponent_div_0_button_9_Template(rf, ctx) { if (rf & 1) {\n    const _r7 = ngcc0.getCurrentView();\n    ngcc0.elementStart(0, \"button\", 11);\n    ngcc0.listener(\"click\", function OrderCustomFieldsCardComponent_div_0_button_9_Template_button_click_0_listener() { ngcc0.restoreView(_r7); const ctx_r6 = ngcc0.nextContext(2); return ctx_r6.onUpdateClick(); });\n    ngcc0.element(1, \"clr-icon\", 12);\n    ngcc0.text(2);\n    ngcc0.pipe(3, \"translate\");\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const ctx_r2 = ngcc0.nextContext(2);\n    ngcc0.property(\"disabled\", ctx_r2.customFieldForm.pristine || ctx_r2.customFieldForm.invalid);\n    ngcc0.advance(2);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(3, 2, \"common.update\"), \" \");\n} }\nfunction OrderCustomFieldsCardComponent_div_0_button_10_Template(rf, ctx) { if (rf & 1) {\n    const _r9 = ngcc0.getCurrentView();\n    ngcc0.elementStart(0, \"button\", 9);\n    ngcc0.listener(\"click\", function OrderCustomFieldsCardComponent_div_0_button_10_Template_button_click_0_listener() { ngcc0.restoreView(_r9); const ctx_r8 = ngcc0.nextContext(2); return ctx_r8.onCancelClick(); });\n    ngcc0.element(1, \"clr-icon\", 13);\n    ngcc0.text(2);\n    ngcc0.pipe(3, \"translate\");\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    ngcc0.advance(2);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(3, 1, \"common.cancel\"), \" \");\n} }\nfunction OrderCustomFieldsCardComponent_div_0_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementStart(0, \"div\", 1);\n    ngcc0.elementStart(1, \"div\", 2);\n    ngcc0.text(2);\n    ngcc0.pipe(3, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.elementStart(4, \"div\", 3);\n    ngcc0.elementStart(5, \"div\", 4);\n    ngcc0.element(6, \"vdr-tabbed-custom-fields\", 5);\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementStart(7, \"div\", 6);\n    ngcc0.template(8, OrderCustomFieldsCardComponent_div_0_button_8_Template, 4, 3, \"button\", 7);\n    ngcc0.template(9, OrderCustomFieldsCardComponent_div_0_button_9_Template, 4, 4, \"button\", 8);\n    ngcc0.template(10, OrderCustomFieldsCardComponent_div_0_button_10_Template, 4, 3, \"button\", 7);\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const ctx_r0 = ngcc0.nextContext();\n    ngcc0.advance(2);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(3, 10, \"common.custom-fields\"), \" \");\n    ngcc0.advance(3);\n    ngcc0.classProp(\"editable\", ctx_r0.editable);\n    ngcc0.advance(1);\n    ngcc0.property(\"customFields\", ctx_r0.customFieldsConfig)(\"customFieldsFormGroup\", ctx_r0.customFieldForm)(\"readonly\", !ctx_r0.editable)(\"compact\", true);\n    ngcc0.advance(2);\n    ngcc0.property(\"ngIf\", !ctx_r0.editable);\n    ngcc0.advance(1);\n    ngcc0.property(\"ngIf\", ctx_r0.editable);\n    ngcc0.advance(1);\n    ngcc0.property(\"ngIf\", ctx_r0.editable);\n} }\nfunction OrderProcessGraphDialogComponent_ng_template_0_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.text(0);\n    ngcc0.pipe(1, \"translate\");\n} if (rf & 2) {\n    ngcc0.textInterpolate(ngcc0.pipeBind1(1, 1, \"order.order-state-diagram\"));\n} }\nfunction RefundOrderDialogComponent_ng_template_0_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.text(0);\n    ngcc0.pipe(1, \"translate\");\n} if (rf & 2) {\n    ngcc0.textInterpolate(ngcc0.pipeBind1(1, 1, \"order.refund-and-cancel-order\"));\n} }\nfunction RefundOrderDialogComponent_tr_31_ng_container_18_vdr_dropdown_1_div_5_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementStart(0, \"div\", 36);\n    ngcc0.text(1);\n    ngcc0.elementStart(2, \"div\", 37);\n    ngcc0.text(3);\n    ngcc0.pipe(4, \"currency\");\n    ngcc0.pipe(5, \"number\");\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const discount_r14 = ctx.$implicit;\n    const line_r6 = ngcc0.nextContext(3).$implicit;\n    const ctx_r13 = ngcc0.nextContext();\n    ngcc0.advance(1);\n    ngcc0.textInterpolate1(\" \", discount_r14.description, \" \");\n    ngcc0.advance(2);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind2(4, 2, ngcc0.pipeBind2(5, 5, discount_r14.amount / 100 / line_r6.quantity, \"1.0-2\"), ctx_r13.order.currencyCode), \" \");\n} }\nfunction RefundOrderDialogComponent_tr_31_ng_container_18_vdr_dropdown_1_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementStart(0, \"vdr-dropdown\");\n    ngcc0.elementStart(1, \"div\", 32);\n    ngcc0.elementStart(2, \"button\", 33);\n    ngcc0.element(3, \"clr-icon\", 34);\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementStart(4, \"vdr-dropdown-menu\");\n    ngcc0.template(5, RefundOrderDialogComponent_tr_31_ng_container_18_vdr_dropdown_1_div_5_Template, 6, 8, \"div\", 35);\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const discounts_r11 = ngcc0.nextContext().ngIf;\n    ngcc0.advance(5);\n    ngcc0.property(\"ngForOf\", discounts_r11);\n} }\nfunction RefundOrderDialogComponent_tr_31_ng_container_18_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementContainerStart(0);\n    ngcc0.template(1, RefundOrderDialogComponent_tr_31_ng_container_18_vdr_dropdown_1_Template, 6, 1, \"vdr-dropdown\", 26);\n    ngcc0.elementContainerEnd();\n} if (rf & 2) {\n    const discounts_r11 = ctx.ngIf;\n    ngcc0.advance(1);\n    ngcc0.property(\"ngIf\", discounts_r11.length);\n} }\nfunction RefundOrderDialogComponent_tr_31_input_20_Template(rf, ctx) { if (rf & 1) {\n    const _r18 = ngcc0.getCurrentView();\n    ngcc0.elementStart(0, \"input\", 38);\n    ngcc0.listener(\"ngModelChange\", function RefundOrderDialogComponent_tr_31_input_20_Template_input_ngModelChange_0_listener($event) { ngcc0.restoreView(_r18); const line_r6 = ngcc0.nextContext().$implicit; const ctx_r17 = ngcc0.nextContext(); return ctx_r17.lineQuantities[line_r6.id].quantity = $event; })(\"input\", function RefundOrderDialogComponent_tr_31_input_20_Template_input_input_0_listener() { ngcc0.restoreView(_r18); const line_r6 = ngcc0.nextContext().$implicit; const ctx_r20 = ngcc0.nextContext(); return ctx_r20.handleZeroQuantity(ctx_r20.lineQuantities[line_r6.id]); });\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const line_r6 = ngcc0.nextContext().$implicit;\n    const ctx_r8 = ngcc0.nextContext();\n    ngcc0.property(\"ngModel\", ctx_r8.lineQuantities[line_r6.id].quantity)(\"max\", line_r6.quantity);\n} }\nfunction RefundOrderDialogComponent_tr_31_input_23_Template(rf, ctx) { if (rf & 1) {\n    const _r24 = ngcc0.getCurrentView();\n    ngcc0.elementStart(0, \"input\", 39);\n    ngcc0.listener(\"ngModelChange\", function RefundOrderDialogComponent_tr_31_input_23_Template_input_ngModelChange_0_listener($event) { ngcc0.restoreView(_r24); const line_r6 = ngcc0.nextContext().$implicit; const ctx_r23 = ngcc0.nextContext(); return ctx_r23.lineQuantities[line_r6.id].refund = $event; });\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const line_r6 = ngcc0.nextContext().$implicit;\n    const ctx_r9 = ngcc0.nextContext();\n    ngcc0.property(\"disabled\", 0 === ctx_r9.lineQuantities[line_r6.id].quantity)(\"ngModel\", ctx_r9.lineQuantities[line_r6.id].refund);\n} }\nfunction RefundOrderDialogComponent_tr_31_input_26_Template(rf, ctx) { if (rf & 1) {\n    const _r28 = ngcc0.getCurrentView();\n    ngcc0.elementStart(0, \"input\", 39);\n    ngcc0.listener(\"ngModelChange\", function RefundOrderDialogComponent_tr_31_input_26_Template_input_ngModelChange_0_listener($event) { ngcc0.restoreView(_r28); const line_r6 = ngcc0.nextContext().$implicit; const ctx_r27 = ngcc0.nextContext(); return ctx_r27.lineQuantities[line_r6.id].cancel = $event; });\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const line_r6 = ngcc0.nextContext().$implicit;\n    const ctx_r10 = ngcc0.nextContext();\n    ngcc0.property(\"disabled\", 0 === ctx_r10.lineQuantities[line_r6.id].quantity)(\"ngModel\", ctx_r10.lineQuantities[line_r6.id].cancel);\n} }\nfunction RefundOrderDialogComponent_tr_31_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementStart(0, \"tr\", 18);\n    ngcc0.elementStart(1, \"td\", 19);\n    ngcc0.element(2, \"img\", 20);\n    ngcc0.pipe(3, \"assetPreview\");\n    ngcc0.elementEnd();\n    ngcc0.elementStart(4, \"td\", 21);\n    ngcc0.text(5);\n    ngcc0.elementEnd();\n    ngcc0.elementStart(6, \"td\", 22);\n    ngcc0.text(7);\n    ngcc0.elementEnd();\n    ngcc0.elementStart(8, \"td\", 23);\n    ngcc0.text(9);\n    ngcc0.element(10, \"vdr-line-refunds\", 24);\n    ngcc0.elementEnd();\n    ngcc0.elementStart(11, \"td\", 23);\n    ngcc0.text(12);\n    ngcc0.pipe(13, \"localeCurrency\");\n    ngcc0.elementEnd();\n    ngcc0.elementStart(14, \"td\", 23);\n    ngcc0.elementStart(15, \"div\", 25);\n    ngcc0.text(16);\n    ngcc0.pipe(17, \"localeCurrency\");\n    ngcc0.template(18, RefundOrderDialogComponent_tr_31_ng_container_18_Template, 2, 1, \"ng-container\", 26);\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementStart(19, \"td\", 27);\n    ngcc0.template(20, RefundOrderDialogComponent_tr_31_input_20_Template, 1, 2, \"input\", 28);\n    ngcc0.elementEnd();\n    ngcc0.elementStart(21, \"td\", 29);\n    ngcc0.elementStart(22, \"div\", 30);\n    ngcc0.template(23, RefundOrderDialogComponent_tr_31_input_23_Template, 1, 2, \"input\", 31);\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementStart(24, \"td\", 29);\n    ngcc0.elementStart(25, \"div\", 30);\n    ngcc0.template(26, RefundOrderDialogComponent_tr_31_input_26_Template, 1, 2, \"input\", 31);\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const line_r6 = ctx.$implicit;\n    const ctx_r1 = ngcc0.nextContext();\n    ngcc0.advance(2);\n    ngcc0.property(\"src\", ngcc0.pipeBind2(3, 12, line_r6.featuredAsset, \"tiny\"), ngcc0.sanitizeUrl);\n    ngcc0.advance(3);\n    ngcc0.textInterpolate(line_r6.productVariant.name);\n    ngcc0.advance(2);\n    ngcc0.textInterpolate(line_r6.productVariant.sku);\n    ngcc0.advance(2);\n    ngcc0.textInterpolate1(\" \", line_r6.quantity, \" \");\n    ngcc0.advance(1);\n    ngcc0.property(\"line\", line_r6)(\"payments\", ctx_r1.order.payments);\n    ngcc0.advance(2);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind2(13, 15, line_r6.unitPriceWithTax, ctx_r1.order.currencyCode), \" \");\n    ngcc0.advance(4);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind2(17, 18, line_r6.proratedUnitPriceWithTax, ctx_r1.order.currencyCode), \" \");\n    ngcc0.advance(2);\n    ngcc0.property(\"ngIf\", line_r6.discounts);\n    ngcc0.advance(2);\n    ngcc0.property(\"ngIf\", ctx_r1.lineCanBeRefundedOrCancelled(line_r6));\n    ngcc0.advance(3);\n    ngcc0.property(\"ngIf\", ctx_r1.lineCanBeRefundedOrCancelled(line_r6));\n    ngcc0.advance(3);\n    ngcc0.property(\"ngIf\", ctx_r1.lineCanBeRefundedOrCancelled(line_r6));\n} }\nfunction RefundOrderDialogComponent_option_45_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementStart(0, \"option\", 40);\n    ngcc0.text(1);\n    ngcc0.pipe(2, \"localeCurrency\");\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const payment_r31 = ctx.$implicit;\n    const ctx_r2 = ngcc0.nextContext();\n    ngcc0.property(\"ngValue\", payment_r31)(\"disabled\", payment_r31.state !== \"Settled\");\n    ngcc0.advance(1);\n    ngcc0.textInterpolate3(\" #\", payment_r31.id, \" \", payment_r31.method, \": \", ngcc0.pipeBind2(2, 5, payment_r31.amount, ctx_r2.order.currencyCode), \" \");\n} }\nconst _c3 = function (a0, a1) { return { min: a0, max: a1 }; };\nfunction RefundOrderDialogComponent_div_66_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementStart(0, \"div\", 41);\n    ngcc0.text(1);\n    ngcc0.pipe(2, \"translate\");\n    ngcc0.pipe(3, \"currency\");\n    ngcc0.pipe(4, \"localeCurrency\");\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const ctx_r3 = ngcc0.nextContext();\n    ngcc0.advance(1);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind2(2, 1, \"order.refund-total-error\", ngcc0.pureFunction2(10, _c3, ngcc0.pipeBind2(3, 4, 0, ctx_r3.order.currencyCode), ngcc0.pipeBind2(4, 7, ctx_r3.settledPaymentsTotal, ctx_r3.order.currencyCode))), \" \");\n} }\nfunction RefundOrderDialogComponent_div_67_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementStart(0, \"div\", 42);\n    ngcc0.text(1);\n    ngcc0.pipe(2, \"translate\");\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    ngcc0.advance(1);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(2, 1, \"order.refund-total-warning\"), \" \");\n} }\nconst _c4 = function (a0) { return { amount: a0 }; };\nfunction RefundOrderDialogComponent_ng_template_68_ng_container_4_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementContainerStart(0);\n    ngcc0.text(1);\n    ngcc0.pipe(2, \"translate\");\n    ngcc0.pipe(3, \"localeCurrency\");\n    ngcc0.elementContainerEnd();\n} if (rf & 2) {\n    const ctx_r32 = ngcc0.nextContext(2);\n    ngcc0.advance(1);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind2(2, 1, \"order.refund-with-amount\", ngcc0.pureFunction1(7, _c4, ngcc0.pipeBind2(3, 4, ctx_r32.refundTotal, ctx_r32.order.currencyCode))), \" \");\n} }\nfunction RefundOrderDialogComponent_ng_template_68_ng_template_5_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.text(0);\n    ngcc0.pipe(1, \"translate\");\n} if (rf & 2) {\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(1, 1, \"order.cancel-selected-items\"), \" \");\n} }\nfunction RefundOrderDialogComponent_ng_template_68_Template(rf, ctx) { if (rf & 1) {\n    const _r36 = ngcc0.getCurrentView();\n    ngcc0.elementStart(0, \"button\", 43);\n    ngcc0.listener(\"click\", function RefundOrderDialogComponent_ng_template_68_Template_button_click_0_listener() { ngcc0.restoreView(_r36); const ctx_r35 = ngcc0.nextContext(); return ctx_r35.cancel(); });\n    ngcc0.text(1);\n    ngcc0.pipe(2, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.elementStart(3, \"button\", 44);\n    ngcc0.listener(\"click\", function RefundOrderDialogComponent_ng_template_68_Template_button_click_3_listener() { ngcc0.restoreView(_r36); const ctx_r37 = ngcc0.nextContext(); return ctx_r37.select(); });\n    ngcc0.template(4, RefundOrderDialogComponent_ng_template_68_ng_container_4_Template, 4, 9, \"ng-container\", 45);\n    ngcc0.template(5, RefundOrderDialogComponent_ng_template_68_ng_template_5_Template, 2, 3, \"ng-template\", null, 46, ngcc0.templateRefExtractor);\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const _r33 = ngcc0.reference(6);\n    const ctx_r5 = ngcc0.nextContext();\n    ngcc0.advance(1);\n    ngcc0.textInterpolate(ngcc0.pipeBind1(2, 4, \"common.cancel\"));\n    ngcc0.advance(2);\n    ngcc0.property(\"disabled\", !ctx_r5.canSubmit());\n    ngcc0.advance(1);\n    ngcc0.property(\"ngIf\", ctx_r5.isRefunding())(\"ngIfElse\", _r33);\n} }\nfunction SettleRefundDialogComponent_ng_template_0_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.text(0);\n    ngcc0.pipe(1, \"translate\");\n} if (rf & 2) {\n    ngcc0.textInterpolate(ngcc0.pipeBind1(1, 1, \"order.settle-refund\"));\n} }\nfunction SettleRefundDialogComponent_ng_template_9_Template(rf, ctx) { if (rf & 1) {\n    const _r3 = ngcc0.getCurrentView();\n    ngcc0.elementStart(0, \"button\", 4);\n    ngcc0.listener(\"click\", function SettleRefundDialogComponent_ng_template_9_Template_button_click_0_listener() { ngcc0.restoreView(_r3); const ctx_r2 = ngcc0.nextContext(); return ctx_r2.cancel(); });\n    ngcc0.text(1);\n    ngcc0.pipe(2, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.elementStart(3, \"button\", 5);\n    ngcc0.listener(\"click\", function SettleRefundDialogComponent_ng_template_9_Template_button_click_3_listener() { ngcc0.restoreView(_r3); const ctx_r4 = ngcc0.nextContext(); return ctx_r4.submit(); });\n    ngcc0.text(4);\n    ngcc0.pipe(5, \"translate\");\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const ctx_r1 = ngcc0.nextContext();\n    ngcc0.advance(1);\n    ngcc0.textInterpolate(ngcc0.pipeBind1(2, 3, \"common.cancel\"));\n    ngcc0.advance(2);\n    ngcc0.property(\"disabled\", !ctx_r1.transactionId);\n    ngcc0.advance(1);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(5, 5, \"order.settle-refund\"), \" \");\n} }\nconst _c5 = function (a0) { return { method: a0 }; };\nfunction OrderDetailComponent_vdr_action_bar_0_button_11_Template(rf, ctx) { if (rf & 1) {\n    const _r10 = ngcc0.getCurrentView();\n    ngcc0.elementStart(0, \"button\", 16);\n    ngcc0.listener(\"click\", function OrderDetailComponent_vdr_action_bar_0_button_11_Template_button_click_0_listener() { ngcc0.restoreView(_r10); const order_r2 = ngcc0.nextContext().ngIf; const ctx_r8 = ngcc0.nextContext(); return ctx_r8.addManualPayment(order_r2); });\n    ngcc0.text(1);\n    ngcc0.pipe(2, \"translate\");\n    ngcc0.pipe(3, \"localeCurrency\");\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const order_r2 = ngcc0.nextContext().ngIf;\n    const ctx_r3 = ngcc0.nextContext();\n    ngcc0.advance(1);\n    ngcc0.textInterpolate2(\" \", ngcc0.pipeBind1(2, 2, \"order.add-payment-to-order\"), \" (\", ngcc0.pipeBind2(3, 4, ctx_r3.outstandingPaymentAmount(order_r2), order_r2.currencyCode), \") \");\n} }\nfunction OrderDetailComponent_vdr_action_bar_0_button_12_Template(rf, ctx) { if (rf & 1) {\n    const _r13 = ngcc0.getCurrentView();\n    ngcc0.elementStart(0, \"button\", 16);\n    ngcc0.listener(\"click\", function OrderDetailComponent_vdr_action_bar_0_button_12_Template_button_click_0_listener() { ngcc0.restoreView(_r13); const ctx_r12 = ngcc0.nextContext(2); return ctx_r12.transitionToState(\"ArrangingAdditionalPayment\"); });\n    ngcc0.text(1);\n    ngcc0.pipe(2, \"translate\");\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    ngcc0.advance(1);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(2, 1, \"order.arrange-additional-payment\"), \" \");\n} }\nfunction OrderDetailComponent_vdr_action_bar_0_ng_container_20_Template(rf, ctx) { if (rf & 1) {\n    const _r15 = ngcc0.getCurrentView();\n    ngcc0.elementContainerStart(0);\n    ngcc0.elementStart(1, \"button\", 14);\n    ngcc0.listener(\"click\", function OrderDetailComponent_vdr_action_bar_0_ng_container_20_Template_button_click_1_listener() { ngcc0.restoreView(_r15); const ctx_r14 = ngcc0.nextContext(2); return ctx_r14.transitionToModifying(); });\n    ngcc0.element(2, \"clr-icon\", 17);\n    ngcc0.text(3);\n    ngcc0.pipe(4, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.element(5, \"div\", 13);\n    ngcc0.elementContainerEnd();\n} if (rf & 2) {\n    ngcc0.advance(3);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(4, 1, \"order.modify-order\"), \" \");\n} }\nfunction OrderDetailComponent_vdr_action_bar_0_button_21_ng_container_2_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementContainerStart(0);\n    ngcc0.text(1);\n    ngcc0.pipe(2, \"translate\");\n    ngcc0.elementContainerEnd();\n} if (rf & 2) {\n    ngcc0.advance(1);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(2, 1, \"order.refund-and-cancel-order\"), \" \");\n} }\nfunction OrderDetailComponent_vdr_action_bar_0_button_21_ng_template_3_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.text(0);\n    ngcc0.pipe(1, \"translate\");\n} if (rf & 2) {\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(1, 1, \"order.cancel-order\"), \" \");\n} }\nfunction OrderDetailComponent_vdr_action_bar_0_button_21_Template(rf, ctx) { if (rf & 1) {\n    const _r21 = ngcc0.getCurrentView();\n    ngcc0.elementStart(0, \"button\", 14);\n    ngcc0.listener(\"click\", function OrderDetailComponent_vdr_action_bar_0_button_21_Template_button_click_0_listener() { ngcc0.restoreView(_r21); const order_r2 = ngcc0.nextContext().ngIf; const ctx_r19 = ngcc0.nextContext(); return ctx_r19.cancelOrRefund(order_r2); });\n    ngcc0.element(1, \"clr-icon\", 18);\n    ngcc0.template(2, OrderDetailComponent_vdr_action_bar_0_button_21_ng_container_2_Template, 3, 3, \"ng-container\", 19);\n    ngcc0.template(3, OrderDetailComponent_vdr_action_bar_0_button_21_ng_template_3_Template, 2, 3, \"ng-template\", null, 20, ngcc0.templateRefExtractor);\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const _r17 = ngcc0.reference(4);\n    const order_r2 = ngcc0.nextContext().ngIf;\n    const ctx_r6 = ngcc0.nextContext();\n    ngcc0.advance(2);\n    ngcc0.property(\"ngIf\", ctx_r6.orderHasSettledPayments(order_r2))(\"ngIfElse\", _r17);\n} }\nfunction OrderDetailComponent_vdr_action_bar_0_ng_container_22_button_2_Template(rf, ctx) { if (rf & 1) {\n    const _r26 = ngcc0.getCurrentView();\n    ngcc0.elementStart(0, \"button\", 14);\n    ngcc0.listener(\"click\", function OrderDetailComponent_vdr_action_bar_0_ng_container_22_button_2_Template_button_click_0_listener() { const restoredCtx = ngcc0.restoreView(_r26); const nextState_r24 = restoredCtx.$implicit; const ctx_r25 = ngcc0.nextContext(3); return ctx_r25.transitionToState(nextState_r24); });\n    ngcc0.element(1, \"clr-icon\", 22);\n    ngcc0.text(2);\n    ngcc0.pipe(3, \"translate\");\n    ngcc0.pipe(4, \"translate\");\n    ngcc0.pipe(5, \"stateI18nToken\");\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const nextState_r24 = ctx.$implicit;\n    ngcc0.advance(2);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind2(3, 1, \"order.transition-to-state\", ngcc0.pureFunction1(8, _c0, ngcc0.pipeBind1(4, 4, ngcc0.pipeBind1(5, 6, nextState_r24)))), \" \");\n} }\nfunction OrderDetailComponent_vdr_action_bar_0_ng_container_22_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementContainerStart(0);\n    ngcc0.element(1, \"div\", 13);\n    ngcc0.template(2, OrderDetailComponent_vdr_action_bar_0_ng_container_22_button_2_Template, 6, 10, \"button\", 21);\n    ngcc0.pipe(3, \"async\");\n    ngcc0.elementContainerEnd();\n} if (rf & 2) {\n    const ctx_r7 = ngcc0.nextContext(2);\n    ngcc0.advance(2);\n    ngcc0.property(\"ngForOf\", ngcc0.pipeBind1(3, 1, ctx_r7.nextStates$));\n} }\nfunction OrderDetailComponent_vdr_action_bar_0_Template(rf, ctx) { if (rf & 1) {\n    const _r28 = ngcc0.getCurrentView();\n    ngcc0.elementStart(0, \"vdr-action-bar\");\n    ngcc0.elementStart(1, \"vdr-ab-left\");\n    ngcc0.elementStart(2, \"div\", 1);\n    ngcc0.element(3, \"vdr-entity-info\", 2);\n    ngcc0.pipe(4, \"async\");\n    ngcc0.elementStart(5, \"vdr-order-state-label\", 3);\n    ngcc0.elementStart(6, \"button\", 4);\n    ngcc0.listener(\"click\", function OrderDetailComponent_vdr_action_bar_0_Template_button_click_6_listener() { ngcc0.restoreView(_r28); const ctx_r27 = ngcc0.nextContext(); return ctx_r27.openStateDiagram(); });\n    ngcc0.pipe(7, \"translate\");\n    ngcc0.element(8, \"clr-icon\", 5);\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementStart(9, \"vdr-ab-right\");\n    ngcc0.element(10, \"vdr-action-bar-items\", 6);\n    ngcc0.template(11, OrderDetailComponent_vdr_action_bar_0_button_11_Template, 4, 7, \"button\", 7);\n    ngcc0.template(12, OrderDetailComponent_vdr_action_bar_0_button_12_Template, 3, 3, \"button\", 7);\n    ngcc0.elementStart(13, \"button\", 8);\n    ngcc0.listener(\"click\", function OrderDetailComponent_vdr_action_bar_0_Template_button_click_13_listener() { ngcc0.restoreView(_r28); const ctx_r29 = ngcc0.nextContext(); return ctx_r29.fulfillOrder(); });\n    ngcc0.text(14);\n    ngcc0.pipe(15, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.elementStart(16, \"vdr-dropdown\");\n    ngcc0.elementStart(17, \"button\", 9);\n    ngcc0.element(18, \"clr-icon\", 10);\n    ngcc0.elementEnd();\n    ngcc0.elementStart(19, \"vdr-dropdown-menu\", 11);\n    ngcc0.template(20, OrderDetailComponent_vdr_action_bar_0_ng_container_20_Template, 6, 3, \"ng-container\", 0);\n    ngcc0.template(21, OrderDetailComponent_vdr_action_bar_0_button_21_Template, 5, 2, \"button\", 12);\n    ngcc0.template(22, OrderDetailComponent_vdr_action_bar_0_ng_container_22_Template, 4, 3, \"ng-container\", 0);\n    ngcc0.pipe(23, \"async\");\n    ngcc0.element(24, \"div\", 13);\n    ngcc0.elementStart(25, \"button\", 14);\n    ngcc0.listener(\"click\", function OrderDetailComponent_vdr_action_bar_0_Template_button_click_25_listener() { const restoredCtx = ngcc0.restoreView(_r28); const order_r2 = restoredCtx.ngIf; const ctx_r30 = ngcc0.nextContext(); return ctx_r30.manuallyTransitionToState(order_r2); });\n    ngcc0.element(26, \"clr-icon\", 15);\n    ngcc0.text(27);\n    ngcc0.pipe(28, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const order_r2 = ctx.ngIf;\n    const ctx_r0 = ngcc0.nextContext();\n    let tmp_9_0;\n    ngcc0.advance(3);\n    ngcc0.property(\"entity\", ngcc0.pipeBind1(4, 11, ctx_r0.entity$));\n    ngcc0.advance(2);\n    ngcc0.property(\"state\", order_r2.state);\n    ngcc0.advance(1);\n    ngcc0.property(\"title\", ngcc0.pipeBind1(7, 13, \"order.order-state-diagram\"));\n    ngcc0.advance(5);\n    ngcc0.property(\"ngIf\", (order_r2.state === \"ArrangingPayment\" || order_r2.state === \"ArrangingAdditionalPayment\") && (ctx_r0.hasUnsettledModifications(order_r2) || 0 < ctx_r0.outstandingPaymentAmount(order_r2)));\n    ngcc0.advance(1);\n    ngcc0.property(\"ngIf\", order_r2.active === false && order_r2.state !== \"ArrangingAdditionalPayment\" && order_r2.state !== \"ArrangingPayment\" && 0 < ctx_r0.outstandingPaymentAmount(order_r2));\n    ngcc0.advance(1);\n    ngcc0.property(\"disabled\", !ctx_r0.canAddFulfillment(order_r2));\n    ngcc0.advance(1);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(15, 15, \"order.fulfill-order\"), \" \");\n    ngcc0.advance(6);\n    ngcc0.property(\"ngIf\", order_r2.nextStates.includes(\"Modifying\"));\n    ngcc0.advance(1);\n    ngcc0.property(\"ngIf\", order_r2.nextStates.includes(\"Cancelled\"));\n    ngcc0.advance(1);\n    ngcc0.property(\"ngIf\", (tmp_9_0 = ngcc0.pipeBind1(23, 17, ctx_r0.nextStates$)) == null ? null : tmp_9_0.length);\n    ngcc0.advance(5);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(28, 19, \"order.manually-transition-to-state\"), \" \");\n} }\nfunction OrderDetailComponent_div_2_tr_23_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementStart(0, \"tr\");\n    ngcc0.elementStart(1, \"td\");\n    ngcc0.text(2);\n    ngcc0.elementEnd();\n    ngcc0.elementStart(3, \"td\");\n    ngcc0.text(4);\n    ngcc0.pipe(5, \"percent\");\n    ngcc0.elementEnd();\n    ngcc0.elementStart(6, \"td\");\n    ngcc0.text(7);\n    ngcc0.pipe(8, \"localeCurrency\");\n    ngcc0.elementEnd();\n    ngcc0.elementStart(9, \"td\");\n    ngcc0.text(10);\n    ngcc0.pipe(11, \"localeCurrency\");\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const row_r37 = ctx.$implicit;\n    const order_r31 = ngcc0.nextContext().ngIf;\n    ngcc0.advance(2);\n    ngcc0.textInterpolate(row_r37.description);\n    ngcc0.advance(2);\n    ngcc0.textInterpolate(ngcc0.pipeBind1(5, 4, row_r37.taxRate / 100));\n    ngcc0.advance(3);\n    ngcc0.textInterpolate(ngcc0.pipeBind2(8, 6, row_r37.taxBase, order_r31.currencyCode));\n    ngcc0.advance(3);\n    ngcc0.textInterpolate(ngcc0.pipeBind2(11, 9, row_r37.taxTotal, order_r31.currencyCode));\n} }\nfunction OrderDetailComponent_div_2_h6_36_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementStart(0, \"h6\");\n    ngcc0.text(1);\n    ngcc0.pipe(2, \"translate\");\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    ngcc0.advance(1);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(2, 1, \"order.shipping-address\"), \" \");\n} }\nfunction OrderDetailComponent_div_2_h6_38_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementStart(0, \"h6\");\n    ngcc0.text(1);\n    ngcc0.pipe(2, \"translate\");\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    ngcc0.advance(1);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(2, 1, \"order.billing-address\"), \" \");\n} }\nfunction OrderDetailComponent_div_2_ng_container_40_vdr_order_payment_card_1_Template(rf, ctx) { if (rf & 1) {\n    const _r42 = ngcc0.getCurrentView();\n    ngcc0.elementStart(0, \"vdr-order-payment-card\", 39);\n    ngcc0.listener(\"settlePayment\", function OrderDetailComponent_div_2_ng_container_40_vdr_order_payment_card_1_Template_vdr_order_payment_card_settlePayment_0_listener($event) { ngcc0.restoreView(_r42); const ctx_r41 = ngcc0.nextContext(3); return ctx_r41.settlePayment($event); })(\"transitionPaymentState\", function OrderDetailComponent_div_2_ng_container_40_vdr_order_payment_card_1_Template_vdr_order_payment_card_transitionPaymentState_0_listener($event) { ngcc0.restoreView(_r42); const ctx_r43 = ngcc0.nextContext(3); return ctx_r43.transitionPaymentState($event); })(\"settleRefund\", function OrderDetailComponent_div_2_ng_container_40_vdr_order_payment_card_1_Template_vdr_order_payment_card_settleRefund_0_listener($event) { ngcc0.restoreView(_r42); const ctx_r44 = ngcc0.nextContext(3); return ctx_r44.settleRefund($event); });\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const payment_r40 = ctx.$implicit;\n    const order_r31 = ngcc0.nextContext(2).ngIf;\n    ngcc0.property(\"currencyCode\", order_r31.currencyCode)(\"payment\", payment_r40);\n} }\nfunction OrderDetailComponent_div_2_ng_container_40_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementContainerStart(0);\n    ngcc0.template(1, OrderDetailComponent_div_2_ng_container_40_vdr_order_payment_card_1_Template, 1, 2, \"vdr-order-payment-card\", 38);\n    ngcc0.elementContainerEnd();\n} if (rf & 2) {\n    const order_r31 = ngcc0.nextContext().ngIf;\n    ngcc0.advance(1);\n    ngcc0.property(\"ngForOf\", order_r31.payments);\n} }\nfunction OrderDetailComponent_div_2_ng_container_41_Template(rf, ctx) { if (rf & 1) {\n    const _r49 = ngcc0.getCurrentView();\n    ngcc0.elementContainerStart(0);\n    ngcc0.elementStart(1, \"vdr-fulfillment-card\", 40);\n    ngcc0.listener(\"transitionState\", function OrderDetailComponent_div_2_ng_container_41_Template_vdr_fulfillment_card_transitionState_1_listener($event) { const restoredCtx = ngcc0.restoreView(_r49); const fulfillment_r47 = restoredCtx.$implicit; const ctx_r48 = ngcc0.nextContext(2); return ctx_r48.transitionFulfillment(fulfillment_r47.id, $event); });\n    ngcc0.elementEnd();\n    ngcc0.elementContainerEnd();\n} if (rf & 2) {\n    const fulfillment_r47 = ctx.$implicit;\n    const order_r31 = ngcc0.nextContext().ngIf;\n    ngcc0.advance(1);\n    ngcc0.property(\"fulfillment\", fulfillment_r47)(\"order\", order_r31);\n} }\nfunction OrderDetailComponent_div_2_Template(rf, ctx) { if (rf & 1) {\n    const _r52 = ngcc0.getCurrentView();\n    ngcc0.elementStart(0, \"div\");\n    ngcc0.elementStart(1, \"div\", 23);\n    ngcc0.elementStart(2, \"div\", 24);\n    ngcc0.element(3, \"vdr-order-table\", 25);\n    ngcc0.elementStart(4, \"h4\");\n    ngcc0.text(5);\n    ngcc0.pipe(6, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.elementStart(7, \"table\", 26);\n    ngcc0.elementStart(8, \"thead\");\n    ngcc0.elementStart(9, \"tr\");\n    ngcc0.elementStart(10, \"th\");\n    ngcc0.text(11);\n    ngcc0.pipe(12, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.elementStart(13, \"th\");\n    ngcc0.text(14);\n    ngcc0.pipe(15, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.elementStart(16, \"th\");\n    ngcc0.text(17);\n    ngcc0.pipe(18, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.elementStart(19, \"th\");\n    ngcc0.text(20);\n    ngcc0.pipe(21, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementStart(22, \"tbody\");\n    ngcc0.template(23, OrderDetailComponent_div_2_tr_23_Template, 12, 12, \"tr\", 27);\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.element(24, \"vdr-custom-detail-component-host\", 28);\n    ngcc0.elementStart(25, \"vdr-order-history\", 29);\n    ngcc0.listener(\"addNote\", function OrderDetailComponent_div_2_Template_vdr_order_history_addNote_25_listener($event) { ngcc0.restoreView(_r52); const ctx_r51 = ngcc0.nextContext(); return ctx_r51.addNote($event); })(\"updateNote\", function OrderDetailComponent_div_2_Template_vdr_order_history_updateNote_25_listener($event) { ngcc0.restoreView(_r52); const ctx_r53 = ngcc0.nextContext(); return ctx_r53.updateNote($event); })(\"deleteNote\", function OrderDetailComponent_div_2_Template_vdr_order_history_deleteNote_25_listener($event) { ngcc0.restoreView(_r52); const ctx_r54 = ngcc0.nextContext(); return ctx_r54.deleteNote($event); });\n    ngcc0.pipe(26, \"async\");\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementStart(27, \"div\", 30);\n    ngcc0.elementStart(28, \"vdr-order-custom-fields-card\", 31);\n    ngcc0.listener(\"updateClick\", function OrderDetailComponent_div_2_Template_vdr_order_custom_fields_card_updateClick_28_listener($event) { ngcc0.restoreView(_r52); const ctx_r55 = ngcc0.nextContext(); return ctx_r55.updateCustomFields($event); });\n    ngcc0.elementEnd();\n    ngcc0.elementStart(29, \"div\", 32);\n    ngcc0.elementStart(30, \"div\", 33);\n    ngcc0.text(31);\n    ngcc0.pipe(32, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.elementStart(33, \"div\", 34);\n    ngcc0.elementStart(34, \"div\", 35);\n    ngcc0.element(35, \"vdr-customer-label\", 36);\n    ngcc0.template(36, OrderDetailComponent_div_2_h6_36_Template, 3, 3, \"h6\", 0);\n    ngcc0.element(37, \"vdr-formatted-address\", 37);\n    ngcc0.template(38, OrderDetailComponent_div_2_h6_38_Template, 3, 3, \"h6\", 0);\n    ngcc0.element(39, \"vdr-formatted-address\", 37);\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.template(40, OrderDetailComponent_div_2_ng_container_40_Template, 2, 1, \"ng-container\", 0);\n    ngcc0.template(41, OrderDetailComponent_div_2_ng_container_41_Template, 2, 2, \"ng-container\", 27);\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const order_r31 = ctx.ngIf;\n    const ctx_r1 = ngcc0.nextContext();\n    ngcc0.advance(3);\n    ngcc0.property(\"order\", order_r31)(\"orderLineCustomFields\", ctx_r1.orderLineCustomFields);\n    ngcc0.advance(2);\n    ngcc0.textInterpolate(ngcc0.pipeBind1(6, 22, \"order.tax-summary\"));\n    ngcc0.advance(6);\n    ngcc0.textInterpolate(ngcc0.pipeBind1(12, 24, \"common.description\"));\n    ngcc0.advance(3);\n    ngcc0.textInterpolate(ngcc0.pipeBind1(15, 26, \"order.tax-rate\"));\n    ngcc0.advance(3);\n    ngcc0.textInterpolate(ngcc0.pipeBind1(18, 28, \"order.tax-base\"));\n    ngcc0.advance(3);\n    ngcc0.textInterpolate(ngcc0.pipeBind1(21, 30, \"order.tax-total\"));\n    ngcc0.advance(3);\n    ngcc0.property(\"ngForOf\", order_r31.taxSummary);\n    ngcc0.advance(1);\n    ngcc0.property(\"entity$\", ctx_r1.entity$)(\"detailForm\", ctx_r1.detailForm);\n    ngcc0.advance(1);\n    ngcc0.property(\"order\", order_r31)(\"history\", ngcc0.pipeBind1(26, 32, ctx_r1.history$));\n    ngcc0.advance(3);\n    ngcc0.property(\"customFieldsConfig\", ctx_r1.customFields)(\"customFieldValues\", order_r31.customFields);\n    ngcc0.advance(3);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(32, 34, \"order.customer\"), \" \");\n    ngcc0.advance(4);\n    ngcc0.property(\"customer\", order_r31.customer);\n    ngcc0.advance(1);\n    ngcc0.property(\"ngIf\", ctx_r1.getOrderAddressLines(order_r31.shippingAddress).length);\n    ngcc0.advance(1);\n    ngcc0.property(\"address\", order_r31.shippingAddress);\n    ngcc0.advance(1);\n    ngcc0.property(\"ngIf\", ctx_r1.getOrderAddressLines(order_r31.billingAddress).length);\n    ngcc0.advance(1);\n    ngcc0.property(\"address\", order_r31.billingAddress);\n    ngcc0.advance(1);\n    ngcc0.property(\"ngIf\", order_r31.payments && order_r31.payments.length);\n    ngcc0.advance(1);\n    ngcc0.property(\"ngForOf\", order_r31.fulfillments);\n} }\nfunction OrderEditsPreviewDialogComponent_ng_template_0_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.text(0);\n    ngcc0.pipe(1, \"translate\");\n} if (rf & 2) {\n    ngcc0.textInterpolate(ngcc0.pipeBind1(1, 1, \"order.confirm-modifications\"));\n} }\nfunction OrderEditsPreviewDialogComponent_div_8_option_6_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementStart(0, \"option\", 9);\n    ngcc0.text(1);\n    ngcc0.pipe(2, \"localeCurrency\");\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const payment_r4 = ctx.$implicit;\n    const ctx_r3 = ngcc0.nextContext(2);\n    ngcc0.property(\"ngValue\", payment_r4);\n    ngcc0.advance(1);\n    ngcc0.textInterpolate3(\" #\", payment_r4.id, \" \", payment_r4.method, \": \", ngcc0.pipeBind2(2, 4, payment_r4.amount, ctx_r3.order.currencyCode), \" \");\n} }\nfunction OrderEditsPreviewDialogComponent_div_8_Template(rf, ctx) { if (rf & 1) {\n    const _r6 = ngcc0.getCurrentView();\n    ngcc0.elementStart(0, \"div\");\n    ngcc0.elementStart(1, \"clr-select-container\");\n    ngcc0.elementStart(2, \"label\");\n    ngcc0.text(3);\n    ngcc0.pipe(4, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.elementStart(5, \"select\", 5);\n    ngcc0.listener(\"ngModelChange\", function OrderEditsPreviewDialogComponent_div_8_Template_select_ngModelChange_5_listener($event) { ngcc0.restoreView(_r6); const ctx_r5 = ngcc0.nextContext(); return ctx_r5.selectedPayment = $event; });\n    ngcc0.template(6, OrderEditsPreviewDialogComponent_div_8_option_6_Template, 3, 7, \"option\", 6);\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementStart(7, \"label\", 7);\n    ngcc0.text(8);\n    ngcc0.pipe(9, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.elementStart(10, \"textarea\", 8);\n    ngcc0.listener(\"ngModelChange\", function OrderEditsPreviewDialogComponent_div_8_Template_textarea_ngModelChange_10_listener($event) { ngcc0.restoreView(_r6); const ctx_r7 = ngcc0.nextContext(); return ctx_r7.refundNote = $event; });\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const ctx_r1 = ngcc0.nextContext();\n    ngcc0.advance(3);\n    ngcc0.textInterpolate(ngcc0.pipeBind1(4, 5, \"order.payment-to-refund\"));\n    ngcc0.advance(2);\n    ngcc0.property(\"ngModel\", ctx_r1.selectedPayment);\n    ngcc0.advance(1);\n    ngcc0.property(\"ngForOf\", ctx_r1.order.payments);\n    ngcc0.advance(2);\n    ngcc0.textInterpolate(ngcc0.pipeBind1(9, 7, \"order.refund-cancellation-reason\"));\n    ngcc0.advance(2);\n    ngcc0.property(\"ngModel\", ctx_r1.refundNote);\n} }\nfunction OrderEditsPreviewDialogComponent_ng_template_9_Template(rf, ctx) { if (rf & 1) {\n    const _r9 = ngcc0.getCurrentView();\n    ngcc0.elementStart(0, \"button\", 10);\n    ngcc0.listener(\"click\", function OrderEditsPreviewDialogComponent_ng_template_9_Template_button_click_0_listener() { ngcc0.restoreView(_r9); const ctx_r8 = ngcc0.nextContext(); return ctx_r8.cancel(); });\n    ngcc0.text(1);\n    ngcc0.pipe(2, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.elementStart(3, \"button\", 11);\n    ngcc0.listener(\"click\", function OrderEditsPreviewDialogComponent_ng_template_9_Template_button_click_3_listener() { ngcc0.restoreView(_r9); const ctx_r10 = ngcc0.nextContext(); return ctx_r10.submit(); });\n    ngcc0.text(4);\n    ngcc0.pipe(5, \"translate\");\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const ctx_r2 = ngcc0.nextContext();\n    ngcc0.advance(1);\n    ngcc0.textInterpolate(ngcc0.pipeBind1(2, 3, \"common.cancel\"));\n    ngcc0.advance(2);\n    ngcc0.property(\"disabled\", ctx_r2.priceDifference < 0 && !ctx_r2.selectedPayment);\n    ngcc0.advance(1);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(5, 5, \"common.confirm\"), \" \");\n} }\nfunction OrderEditorComponent_vdr_action_bar_0_Template(rf, ctx) { if (rf & 1) {\n    const _r4 = ngcc0.getCurrentView();\n    ngcc0.elementStart(0, \"vdr-action-bar\");\n    ngcc0.elementStart(1, \"vdr-ab-left\");\n    ngcc0.elementStart(2, \"div\", 1);\n    ngcc0.element(3, \"vdr-entity-info\", 2);\n    ngcc0.pipe(4, \"async\");\n    ngcc0.element(5, \"vdr-order-state-label\", 3);\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementStart(6, \"vdr-ab-right\");\n    ngcc0.elementStart(7, \"button\", 4);\n    ngcc0.listener(\"click\", function OrderEditorComponent_vdr_action_bar_0_Template_button_click_7_listener() { const restoredCtx = ngcc0.restoreView(_r4); const order_r2 = restoredCtx.ngIf; const ctx_r3 = ngcc0.nextContext(); return ctx_r3.transitionToPriorState(order_r2); });\n    ngcc0.text(8);\n    ngcc0.pipe(9, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const order_r2 = ctx.ngIf;\n    const ctx_r0 = ngcc0.nextContext();\n    ngcc0.advance(3);\n    ngcc0.property(\"entity\", ngcc0.pipeBind1(4, 3, ctx_r0.entity$));\n    ngcc0.advance(2);\n    ngcc0.property(\"state\", order_r2.state);\n    ngcc0.advance(3);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(9, 5, \"order.cancel-modification\"), \" \");\n} }\nfunction OrderEditorComponent_div_2_th_19_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementStart(0, \"th\");\n    ngcc0.text(1);\n    ngcc0.pipe(2, \"translate\");\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    ngcc0.advance(1);\n    ngcc0.textInterpolate(ngcc0.pipeBind1(2, 1, \"common.custom-fields\"));\n} }\nfunction OrderEditorComponent_div_2_tr_24_img_2_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.element(0, \"img\", 41);\n    ngcc0.pipe(1, \"assetPreview\");\n} if (rf & 2) {\n    const line_r22 = ngcc0.nextContext().$implicit;\n    ngcc0.property(\"src\", ngcc0.pipeBind2(1, 1, line_r22.featuredAsset, \"tiny\"), ngcc0.sanitizeUrl);\n} }\nconst _c6 = function (a0) { return [a0]; };\nfunction OrderEditorComponent_div_2_tr_24_td_18_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementStart(0, \"td\", 42);\n    ngcc0.element(1, \"vdr-tabbed-custom-fields\", 43);\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const i_r23 = ngcc0.nextContext().index;\n    const ctx_r25 = ngcc0.nextContext(2);\n    ngcc0.advance(1);\n    ngcc0.property(\"customFields\", ctx_r25.orderLineCustomFields)(\"customFieldsFormGroup\", ctx_r25.orderLineCustomFieldsFormArray.get(ngcc0.pureFunction1(3, _c6, i_r23)))(\"compact\", true);\n} }\nfunction OrderEditorComponent_div_2_tr_24_Template(rf, ctx) { if (rf & 1) {\n    const _r29 = ngcc0.getCurrentView();\n    ngcc0.elementStart(0, \"tr\", 29);\n    ngcc0.elementStart(1, \"td\", 30);\n    ngcc0.template(2, OrderEditorComponent_div_2_tr_24_img_2_Template, 2, 4, \"img\", 31);\n    ngcc0.elementEnd();\n    ngcc0.elementStart(3, \"td\", 32);\n    ngcc0.text(4);\n    ngcc0.elementEnd();\n    ngcc0.elementStart(5, \"td\", 33);\n    ngcc0.text(6);\n    ngcc0.elementEnd();\n    ngcc0.elementStart(7, \"td\", 34);\n    ngcc0.text(8);\n    ngcc0.pipe(9, \"localeCurrency\");\n    ngcc0.elementStart(10, \"div\", 16);\n    ngcc0.pipe(11, \"translate\");\n    ngcc0.text(12);\n    ngcc0.pipe(13, \"localeCurrency\");\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementStart(14, \"td\", 35);\n    ngcc0.elementStart(15, \"input\", 36);\n    ngcc0.listener(\"input\", function OrderEditorComponent_div_2_tr_24_Template_input_input_15_listener($event) { const restoredCtx = ngcc0.restoreView(_r29); const line_r22 = restoredCtx.$implicit; const ctx_r28 = ngcc0.nextContext(2); return ctx_r28.updateLineQuantity(line_r22, $event.target.value); });\n    ngcc0.elementEnd();\n    ngcc0.element(16, \"vdr-line-refunds\", 37);\n    ngcc0.element(17, \"vdr-line-fulfillment\", 38);\n    ngcc0.elementEnd();\n    ngcc0.template(18, OrderEditorComponent_div_2_tr_24_td_18_Template, 2, 5, \"td\", 39);\n    ngcc0.elementStart(19, \"td\", 40);\n    ngcc0.text(20);\n    ngcc0.pipe(21, \"localeCurrency\");\n    ngcc0.elementStart(22, \"div\", 16);\n    ngcc0.pipe(23, \"translate\");\n    ngcc0.text(24);\n    ngcc0.pipe(25, \"localeCurrency\");\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const line_r22 = ctx.$implicit;\n    const order_r5 = ngcc0.nextContext().ngIf;\n    const ctx_r7 = ngcc0.nextContext();\n    ngcc0.classProp(\"is-cancelled\", line_r22.quantity === 0)(\"modified\", ctx_r7.isLineModified(line_r22));\n    ngcc0.advance(2);\n    ngcc0.property(\"ngIf\", line_r22.featuredAsset);\n    ngcc0.advance(2);\n    ngcc0.textInterpolate(line_r22.productVariant.name);\n    ngcc0.advance(2);\n    ngcc0.textInterpolate(line_r22.productVariant.sku);\n    ngcc0.advance(2);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind2(9, 19, line_r22.unitPriceWithTax, order_r5.currencyCode), \" \");\n    ngcc0.advance(2);\n    ngcc0.property(\"title\", ngcc0.pipeBind1(11, 22, \"order.net-price\"));\n    ngcc0.advance(2);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind2(13, 24, line_r22.unitPrice, order_r5.currencyCode), \" \");\n    ngcc0.advance(3);\n    ngcc0.property(\"value\", line_r22.quantity);\n    ngcc0.advance(1);\n    ngcc0.property(\"line\", line_r22)(\"payments\", order_r5.payments);\n    ngcc0.advance(1);\n    ngcc0.property(\"line\", line_r22)(\"orderState\", order_r5.state);\n    ngcc0.advance(1);\n    ngcc0.property(\"ngIf\", ctx_r7.orderLineCustomFields.length);\n    ngcc0.advance(2);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind2(21, 27, line_r22.linePriceWithTax, order_r5.currencyCode), \" \");\n    ngcc0.advance(2);\n    ngcc0.property(\"title\", ngcc0.pipeBind1(23, 30, \"order.net-price\"));\n    ngcc0.advance(2);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind2(25, 32, line_r22.linePrice, order_r5.currencyCode), \" \");\n} }\nfunction OrderEditorComponent_div_2_tr_25_img_2_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.element(0, \"img\", 41);\n    ngcc0.pipe(1, \"assetPreview\");\n} if (rf & 2) {\n    const addedLine_r31 = ngcc0.nextContext().$implicit;\n    ngcc0.property(\"src\", ngcc0.pipeBind2(1, 1, addedLine_r31.productAsset, \"tiny\"), ngcc0.sanitizeUrl);\n} }\nfunction OrderEditorComponent_div_2_tr_25_td_18_ng_container_1_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementContainerStart(0);\n    ngcc0.element(1, \"vdr-custom-field-control\", 48);\n    ngcc0.elementContainerEnd();\n} if (rf & 2) {\n    const customField_r37 = ctx.$implicit;\n    const i_r32 = ngcc0.nextContext(2).index;\n    const ctx_r36 = ngcc0.nextContext(2);\n    ngcc0.advance(1);\n    ngcc0.property(\"customField\", customField_r37)(\"customFieldsFormGroup\", ctx_r36.addItemCustomFieldsFormArray.get(ngcc0.pureFunction1(3, _c6, i_r32)))(\"compact\", true);\n} }\nfunction OrderEditorComponent_div_2_tr_25_td_18_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementStart(0, \"td\", 42);\n    ngcc0.template(1, OrderEditorComponent_div_2_tr_25_td_18_ng_container_1_Template, 2, 5, \"ng-container\", 47);\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const ctx_r34 = ngcc0.nextContext(3);\n    ngcc0.advance(1);\n    ngcc0.property(\"ngForOf\", ctx_r34.orderLineCustomFields);\n} }\nfunction OrderEditorComponent_div_2_tr_25_Template(rf, ctx) { if (rf & 1) {\n    const _r40 = ngcc0.getCurrentView();\n    ngcc0.elementStart(0, \"tr\", 44);\n    ngcc0.elementStart(1, \"td\", 30);\n    ngcc0.template(2, OrderEditorComponent_div_2_tr_25_img_2_Template, 2, 4, \"img\", 31);\n    ngcc0.elementEnd();\n    ngcc0.elementStart(3, \"td\", 32);\n    ngcc0.text(4);\n    ngcc0.elementEnd();\n    ngcc0.elementStart(5, \"td\", 33);\n    ngcc0.text(6);\n    ngcc0.elementEnd();\n    ngcc0.elementStart(7, \"td\", 34);\n    ngcc0.text(8);\n    ngcc0.pipe(9, \"localeCurrency\");\n    ngcc0.elementStart(10, \"div\", 16);\n    ngcc0.pipe(11, \"translate\");\n    ngcc0.text(12);\n    ngcc0.pipe(13, \"localeCurrency\");\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementStart(14, \"td\", 35);\n    ngcc0.elementStart(15, \"input\", 36);\n    ngcc0.listener(\"input\", function OrderEditorComponent_div_2_tr_25_Template_input_input_15_listener($event) { const restoredCtx = ngcc0.restoreView(_r40); const addedLine_r31 = restoredCtx.$implicit; const ctx_r39 = ngcc0.nextContext(2); return ctx_r39.updateAddedItemQuantity(addedLine_r31, $event.target.value); });\n    ngcc0.elementEnd();\n    ngcc0.elementStart(16, \"button\", 45);\n    ngcc0.listener(\"click\", function OrderEditorComponent_div_2_tr_25_Template_button_click_16_listener() { const restoredCtx = ngcc0.restoreView(_r40); const i_r32 = restoredCtx.index; const ctx_r41 = ngcc0.nextContext(2); return ctx_r41.removeAddedItem(i_r32); });\n    ngcc0.element(17, \"clr-icon\", 46);\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.template(18, OrderEditorComponent_div_2_tr_25_td_18_Template, 2, 1, \"td\", 39);\n    ngcc0.elementStart(19, \"td\", 40);\n    ngcc0.text(20);\n    ngcc0.pipe(21, \"currency\");\n    ngcc0.elementStart(22, \"div\", 16);\n    ngcc0.pipe(23, \"translate\");\n    ngcc0.text(24);\n    ngcc0.pipe(25, \"currency\");\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const addedLine_r31 = ctx.$implicit;\n    const order_r5 = ngcc0.nextContext().ngIf;\n    const ctx_r8 = ngcc0.nextContext();\n    ngcc0.advance(2);\n    ngcc0.property(\"ngIf\", addedLine_r31.productAsset);\n    ngcc0.advance(2);\n    ngcc0.textInterpolate(addedLine_r31.productVariantName);\n    ngcc0.advance(2);\n    ngcc0.textInterpolate(addedLine_r31.sku);\n    ngcc0.advance(2);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind2(9, 11, addedLine_r31.priceWithTax, order_r5.currencyCode), \" \");\n    ngcc0.advance(2);\n    ngcc0.property(\"title\", ngcc0.pipeBind1(11, 14, \"order.net-price\"));\n    ngcc0.advance(2);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind2(13, 16, addedLine_r31.price, order_r5.currencyCode), \" \");\n    ngcc0.advance(3);\n    ngcc0.property(\"value\", addedLine_r31.quantity);\n    ngcc0.advance(3);\n    ngcc0.property(\"ngIf\", ctx_r8.orderLineCustomFields.length);\n    ngcc0.advance(2);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind2(21, 19, addedLine_r31.priceWithTax * addedLine_r31.quantity / 100, order_r5.currencyCode), \" \");\n    ngcc0.advance(2);\n    ngcc0.property(\"title\", ngcc0.pipeBind1(23, 22, \"order.net-price\"));\n    ngcc0.advance(2);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind2(25, 24, addedLine_r31.price * addedLine_r31.quantity / 100, order_r5.currencyCode), \" \");\n} }\nfunction OrderEditorComponent_div_2_tr_26_td_7_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.element(0, \"td\");\n} }\nfunction OrderEditorComponent_div_2_tr_26_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementStart(0, \"tr\", 49);\n    ngcc0.elementStart(1, \"td\", 50);\n    ngcc0.text(2);\n    ngcc0.elementEnd();\n    ngcc0.elementStart(3, \"td\", 33);\n    ngcc0.text(4);\n    ngcc0.elementEnd();\n    ngcc0.element(5, \"td\", 51);\n    ngcc0.element(6, \"td\");\n    ngcc0.template(7, OrderEditorComponent_div_2_tr_26_td_7_Template, 1, 0, \"td\", 0);\n    ngcc0.elementStart(8, \"td\", 40);\n    ngcc0.text(9);\n    ngcc0.pipe(10, \"localeCurrency\");\n    ngcc0.elementStart(11, \"div\", 16);\n    ngcc0.pipe(12, \"translate\");\n    ngcc0.text(13);\n    ngcc0.pipe(14, \"localeCurrency\");\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const surcharge_r43 = ctx.$implicit;\n    const order_r5 = ngcc0.nextContext().ngIf;\n    const ctx_r9 = ngcc0.nextContext();\n    ngcc0.advance(2);\n    ngcc0.textInterpolate(surcharge_r43.description);\n    ngcc0.advance(2);\n    ngcc0.textInterpolate(surcharge_r43.sku);\n    ngcc0.advance(3);\n    ngcc0.property(\"ngIf\", ctx_r9.orderLineCustomFields.length);\n    ngcc0.advance(2);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind2(10, 6, surcharge_r43.priceWithTax, order_r5.currencyCode), \" \");\n    ngcc0.advance(2);\n    ngcc0.property(\"title\", ngcc0.pipeBind1(12, 9, \"order.net-price\"));\n    ngcc0.advance(2);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind2(14, 11, surcharge_r43.price, order_r5.currencyCode), \" \");\n} }\nfunction OrderEditorComponent_div_2_tr_27_td_9_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.element(0, \"td\");\n} }\nfunction OrderEditorComponent_div_2_tr_27_ng_container_11_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementContainerStart(0);\n    ngcc0.text(1);\n    ngcc0.pipe(2, \"localeCurrency\");\n    ngcc0.elementStart(3, \"div\", 16);\n    ngcc0.pipe(4, \"translate\");\n    ngcc0.text(5);\n    ngcc0.pipe(6, \"localeCurrency\");\n    ngcc0.elementEnd();\n    ngcc0.elementContainerEnd();\n} if (rf & 2) {\n    const surchargePrice_r50 = ctx.ngIf;\n    const order_r5 = ngcc0.nextContext(2).ngIf;\n    ngcc0.advance(1);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind2(2, 3, surchargePrice_r50.priceWithTax, order_r5.currencyCode), \" \");\n    ngcc0.advance(2);\n    ngcc0.property(\"title\", ngcc0.pipeBind1(4, 6, \"order.net-price\"));\n    ngcc0.advance(2);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind2(6, 8, surchargePrice_r50.price, order_r5.currencyCode), \" \");\n} }\nfunction OrderEditorComponent_div_2_tr_27_Template(rf, ctx) { if (rf & 1) {\n    const _r53 = ngcc0.getCurrentView();\n    ngcc0.elementStart(0, \"tr\", 52);\n    ngcc0.elementStart(1, \"td\", 50);\n    ngcc0.text(2);\n    ngcc0.elementStart(3, \"button\", 45);\n    ngcc0.listener(\"click\", function OrderEditorComponent_div_2_tr_27_Template_button_click_3_listener() { const restoredCtx = ngcc0.restoreView(_r53); const i_r47 = restoredCtx.index; const ctx_r52 = ngcc0.nextContext(2); return ctx_r52.removeSurcharge(i_r47); });\n    ngcc0.element(4, \"clr-icon\", 46);\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementStart(5, \"td\", 33);\n    ngcc0.text(6);\n    ngcc0.elementEnd();\n    ngcc0.element(7, \"td\", 51);\n    ngcc0.element(8, \"td\");\n    ngcc0.template(9, OrderEditorComponent_div_2_tr_27_td_9_Template, 1, 0, \"td\", 0);\n    ngcc0.elementStart(10, \"td\", 40);\n    ngcc0.template(11, OrderEditorComponent_div_2_tr_27_ng_container_11_Template, 7, 11, \"ng-container\", 0);\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const surcharge_r46 = ctx.$implicit;\n    const ctx_r10 = ngcc0.nextContext(2);\n    ngcc0.advance(2);\n    ngcc0.textInterpolate1(\" \", surcharge_r46.description, \" \");\n    ngcc0.advance(4);\n    ngcc0.textInterpolate(surcharge_r46.sku);\n    ngcc0.advance(3);\n    ngcc0.property(\"ngIf\", ctx_r10.orderLineCustomFields.length);\n    ngcc0.advance(2);\n    ngcc0.property(\"ngIf\", ctx_r10.getSurchargePrices(surcharge_r46));\n} }\nfunction OrderEditorComponent_div_2_td_35_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.element(0, \"td\");\n} }\nfunction OrderEditorComponent_div_2_clr_accordion_content_51_div_2_img_1_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.element(0, \"img\", 59);\n    ngcc0.pipe(1, \"assetPreview\");\n} if (rf & 2) {\n    const asset_r57 = ctx.ngIf;\n    ngcc0.property(\"src\", ngcc0.pipeBind2(1, 1, asset_r57, \"tiny\"), ngcc0.sanitizeUrl);\n} }\nfunction OrderEditorComponent_div_2_clr_accordion_content_51_div_2_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementStart(0, \"div\", 56);\n    ngcc0.template(1, OrderEditorComponent_div_2_clr_accordion_content_51_div_2_img_1_Template, 2, 4, \"img\", 57);\n    ngcc0.elementStart(2, \"div\");\n    ngcc0.elementStart(3, \"strong\", 58);\n    ngcc0.text(4);\n    ngcc0.elementEnd();\n    ngcc0.elementStart(5, \"small\");\n    ngcc0.text(6);\n    ngcc0.elementEnd();\n    ngcc0.elementStart(7, \"div\");\n    ngcc0.text(8);\n    ngcc0.pipe(9, \"localeCurrency\");\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const order_r5 = ngcc0.nextContext(2).ngIf;\n    const ctx_r54 = ngcc0.nextContext();\n    ngcc0.advance(1);\n    ngcc0.property(\"ngIf\", ctx_r54.addItemSelectedVariant.productAsset);\n    ngcc0.advance(3);\n    ngcc0.textInterpolate(ctx_r54.addItemSelectedVariant.productVariantName);\n    ngcc0.advance(2);\n    ngcc0.textInterpolate(ctx_r54.addItemSelectedVariant.sku);\n    ngcc0.advance(2);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind2(9, 4, ctx_r54.getSelectedItemPrice(ctx_r54.addItemSelectedVariant), order_r5.currencyCode), \" \");\n} }\nfunction OrderEditorComponent_div_2_clr_accordion_content_51_ng_container_3_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementContainerStart(0);\n    ngcc0.element(1, \"vdr-custom-field-control\", 60);\n    ngcc0.elementContainerEnd();\n} if (rf & 2) {\n    const customField_r59 = ctx.$implicit;\n    const ctx_r55 = ngcc0.nextContext(3);\n    ngcc0.advance(1);\n    ngcc0.property(\"readonly\", !ctx_r55.addItemSelectedVariant)(\"customField\", customField_r59)(\"customFieldsFormGroup\", ctx_r55.addItemCustomFieldsForm)(\"compact\", true);\n} }\nfunction OrderEditorComponent_div_2_clr_accordion_content_51_Template(rf, ctx) { if (rf & 1) {\n    const _r61 = ngcc0.getCurrentView();\n    ngcc0.elementStart(0, \"clr-accordion-content\");\n    ngcc0.elementStart(1, \"vdr-product-selector\", 53);\n    ngcc0.listener(\"productSelected\", function OrderEditorComponent_div_2_clr_accordion_content_51_Template_vdr_product_selector_productSelected_1_listener($event) { ngcc0.restoreView(_r61); const ctx_r60 = ngcc0.nextContext(2); return ctx_r60.addItemSelectedVariant = $event; });\n    ngcc0.elementEnd();\n    ngcc0.template(2, OrderEditorComponent_div_2_clr_accordion_content_51_div_2_Template, 10, 7, \"div\", 54);\n    ngcc0.template(3, OrderEditorComponent_div_2_clr_accordion_content_51_ng_container_3_Template, 2, 4, \"ng-container\", 47);\n    ngcc0.elementStart(4, \"button\", 55);\n    ngcc0.listener(\"click\", function OrderEditorComponent_div_2_clr_accordion_content_51_Template_button_click_4_listener() { ngcc0.restoreView(_r61); const ctx_r62 = ngcc0.nextContext(2); return ctx_r62.addItemToOrder(ctx_r62.addItemSelectedVariant); });\n    ngcc0.text(5);\n    ngcc0.pipe(6, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const ctx_r12 = ngcc0.nextContext(2);\n    ngcc0.advance(2);\n    ngcc0.property(\"ngIf\", ctx_r12.addItemSelectedVariant);\n    ngcc0.advance(1);\n    ngcc0.property(\"ngForOf\", ctx_r12.orderLineCustomFields);\n    ngcc0.advance(1);\n    ngcc0.property(\"disabled\", !ctx_r12.addItemSelectedVariant || ctx_r12.addItemCustomFieldsForm.invalid);\n    ngcc0.advance(1);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(6, 4, \"order.add-item-to-order\"), \" \");\n} }\nfunction OrderEditorComponent_div_2_clr_accordion_content_56_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementStart(0, \"clr-accordion-content\");\n    ngcc0.element(1, \"vdr-coupon-code-selector\", 61);\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const ctx_r13 = ngcc0.nextContext(2);\n    ngcc0.advance(1);\n    ngcc0.property(\"control\", ctx_r13.couponCodesControl);\n} }\nconst _c7 = function (a0) { return { rate: a0 }; };\nfunction OrderEditorComponent_div_2_clr_accordion_content_61_Template(rf, ctx) { if (rf & 1) {\n    const _r64 = ngcc0.getCurrentView();\n    ngcc0.elementStart(0, \"clr-accordion-content\");\n    ngcc0.elementStart(1, \"form\", 62);\n    ngcc0.listener(\"submit\", function OrderEditorComponent_div_2_clr_accordion_content_61_Template_form_submit_1_listener() { ngcc0.restoreView(_r64); const ctx_r63 = ngcc0.nextContext(2); return ctx_r63.addSurcharge(ctx_r63.surchargeForm.value); });\n    ngcc0.elementStart(2, \"vdr-form-field\", 63);\n    ngcc0.pipe(3, \"translate\");\n    ngcc0.element(4, \"input\", 64);\n    ngcc0.elementEnd();\n    ngcc0.elementStart(5, \"vdr-form-field\", 65);\n    ngcc0.pipe(6, \"translate\");\n    ngcc0.element(7, \"input\", 66);\n    ngcc0.elementEnd();\n    ngcc0.elementStart(8, \"vdr-form-field\", 67);\n    ngcc0.pipe(9, \"translate\");\n    ngcc0.element(10, \"vdr-currency-input\", 68);\n    ngcc0.elementEnd();\n    ngcc0.elementStart(11, \"vdr-form-field\", 69);\n    ngcc0.pipe(12, \"translate\");\n    ngcc0.element(13, \"input\", 70);\n    ngcc0.elementEnd();\n    ngcc0.elementStart(14, \"vdr-form-field\", 71);\n    ngcc0.pipe(15, \"translate\");\n    ngcc0.elementStart(16, \"vdr-affixed-input\", 72);\n    ngcc0.element(17, \"input\", 73);\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementStart(18, \"vdr-form-field\", 74);\n    ngcc0.pipe(19, \"translate\");\n    ngcc0.element(20, \"input\", 75);\n    ngcc0.elementEnd();\n    ngcc0.elementStart(21, \"button\", 76);\n    ngcc0.text(22);\n    ngcc0.pipe(23, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const order_r5 = ngcc0.nextContext().ngIf;\n    const ctx_r14 = ngcc0.nextContext();\n    let tmp_5_0;\n    let tmp_8_0;\n    ngcc0.advance(1);\n    ngcc0.property(\"formGroup\", ctx_r14.surchargeForm);\n    ngcc0.advance(1);\n    ngcc0.property(\"label\", ngcc0.pipeBind1(3, 10, \"common.description\"));\n    ngcc0.advance(3);\n    ngcc0.property(\"label\", ngcc0.pipeBind1(6, 12, \"order.product-sku\"));\n    ngcc0.advance(3);\n    ngcc0.property(\"label\", ngcc0.pipeBind1(9, 14, \"common.price\"));\n    ngcc0.advance(2);\n    ngcc0.property(\"currencyCode\", order_r5.currencyCode);\n    ngcc0.advance(1);\n    ngcc0.property(\"label\", ngcc0.pipeBind2(12, 16, \"catalog.price-includes-tax-at\", ngcc0.pureFunction1(25, _c7, (tmp_5_0 = ctx_r14.surchargeForm.get(\"taxRate\")) == null ? null : tmp_5_0.value)));\n    ngcc0.advance(3);\n    ngcc0.property(\"label\", ngcc0.pipeBind1(15, 19, \"order.tax-rate\"));\n    ngcc0.advance(4);\n    ngcc0.property(\"label\", ngcc0.pipeBind1(19, 21, \"order.tax-description\"));\n    ngcc0.advance(3);\n    ngcc0.property(\"disabled\", ctx_r14.surchargeForm.invalid || ctx_r14.surchargeForm.pristine || ((tmp_8_0 = ctx_r14.surchargeForm.get(\"price\")) == null ? null : tmp_8_0.value) === 0);\n    ngcc0.advance(1);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(23, 23, \"order.add-surcharge\"), \" \");\n} }\nfunction OrderEditorComponent_div_2_clr_accordion_content_66_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementStart(0, \"clr-accordion-content\");\n    ngcc0.element(1, \"vdr-address-form\", 77);\n    ngcc0.pipe(2, \"async\");\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const ctx_r15 = ngcc0.nextContext(2);\n    ngcc0.advance(1);\n    ngcc0.property(\"formGroup\", ctx_r15.shippingAddressForm)(\"availableCountries\", ngcc0.pipeBind1(2, 3, ctx_r15.availableCountries$))(\"customFields\", ctx_r15.addressCustomFields);\n} }\nfunction OrderEditorComponent_div_2_clr_accordion_content_71_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementStart(0, \"clr-accordion-content\");\n    ngcc0.element(1, \"vdr-address-form\", 77);\n    ngcc0.pipe(2, \"async\");\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const ctx_r16 = ngcc0.nextContext(2);\n    ngcc0.advance(1);\n    ngcc0.property(\"formGroup\", ctx_r16.billingAddressForm)(\"availableCountries\", ngcc0.pipeBind1(2, 3, ctx_r16.availableCountries$))(\"customFields\", ctx_r16.addressCustomFields);\n} }\nfunction OrderEditorComponent_div_2_li_79_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementStart(0, \"li\");\n    ngcc0.text(1);\n    ngcc0.pipe(2, \"translate\");\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const ctx_r17 = ngcc0.nextContext(2);\n    ngcc0.advance(1);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind2(2, 1, \"order.modification-adding-items\", ngcc0.pureFunction1(4, _c2, ctx_r17.modifyOrderInput.addItems == null ? null : ctx_r17.modifyOrderInput.addItems.length)), \" \");\n} }\nfunction OrderEditorComponent_div_2_li_80_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementStart(0, \"li\");\n    ngcc0.text(1);\n    ngcc0.pipe(2, \"translate\");\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const ctx_r18 = ngcc0.nextContext(2);\n    ngcc0.advance(1);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind2(2, 1, \"order.modification-adjusting-lines\", ngcc0.pureFunction1(4, _c2, ctx_r18.modifyOrderInput.adjustOrderLines == null ? null : ctx_r18.modifyOrderInput.adjustOrderLines.length)), \" \");\n} }\nfunction OrderEditorComponent_div_2_li_81_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementStart(0, \"li\");\n    ngcc0.text(1);\n    ngcc0.pipe(2, \"translate\");\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const ctx_r19 = ngcc0.nextContext(2);\n    ngcc0.advance(1);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind2(2, 1, \"order.modification-adding-surcharges\", ngcc0.pureFunction1(4, _c2, ctx_r19.modifyOrderInput.surcharges == null ? null : ctx_r19.modifyOrderInput.surcharges.length)), \" \");\n} }\nfunction OrderEditorComponent_div_2_li_82_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementStart(0, \"li\");\n    ngcc0.text(1);\n    ngcc0.pipe(2, \"translate\");\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    ngcc0.advance(1);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(2, 1, \"order.modification-updating-shipping-address\"), \" \");\n} }\nfunction OrderEditorComponent_div_2_li_83_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementStart(0, \"li\");\n    ngcc0.text(1);\n    ngcc0.pipe(2, \"translate\");\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    ngcc0.advance(1);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(2, 1, \"order.modification-updating-billing-address\"), \" \");\n} }\nfunction OrderEditorComponent_div_2_Template(rf, ctx) { if (rf & 1) {\n    const _r67 = ngcc0.getCurrentView();\n    ngcc0.elementStart(0, \"div\");\n    ngcc0.elementStart(1, \"div\", 5);\n    ngcc0.elementStart(2, \"div\", 6);\n    ngcc0.elementStart(3, \"table\", 7);\n    ngcc0.elementStart(4, \"thead\");\n    ngcc0.elementStart(5, \"tr\");\n    ngcc0.element(6, \"th\");\n    ngcc0.elementStart(7, \"th\");\n    ngcc0.text(8);\n    ngcc0.pipe(9, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.elementStart(10, \"th\");\n    ngcc0.text(11);\n    ngcc0.pipe(12, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.elementStart(13, \"th\");\n    ngcc0.text(14);\n    ngcc0.pipe(15, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.elementStart(16, \"th\");\n    ngcc0.text(17);\n    ngcc0.pipe(18, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.template(19, OrderEditorComponent_div_2_th_19_Template, 3, 3, \"th\", 0);\n    ngcc0.elementStart(20, \"th\");\n    ngcc0.text(21);\n    ngcc0.pipe(22, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementStart(23, \"tbody\");\n    ngcc0.template(24, OrderEditorComponent_div_2_tr_24_Template, 26, 35, \"tr\", 8);\n    ngcc0.template(25, OrderEditorComponent_div_2_tr_25_Template, 26, 27, \"tr\", 9);\n    ngcc0.template(26, OrderEditorComponent_div_2_tr_26_Template, 15, 14, \"tr\", 10);\n    ngcc0.template(27, OrderEditorComponent_div_2_tr_27_Template, 12, 4, \"tr\", 11);\n    ngcc0.elementStart(28, \"tr\", 12);\n    ngcc0.elementStart(29, \"td\", 13);\n    ngcc0.text(30);\n    ngcc0.pipe(31, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.elementStart(32, \"td\", 14);\n    ngcc0.text(33);\n    ngcc0.elementEnd();\n    ngcc0.element(34, \"td\", 15);\n    ngcc0.template(35, OrderEditorComponent_div_2_td_35_Template, 1, 0, \"td\", 0);\n    ngcc0.elementStart(36, \"td\", 14);\n    ngcc0.text(37);\n    ngcc0.pipe(38, \"localeCurrency\");\n    ngcc0.elementStart(39, \"div\", 16);\n    ngcc0.pipe(40, \"translate\");\n    ngcc0.text(41);\n    ngcc0.pipe(42, \"localeCurrency\");\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementStart(43, \"h4\", 17);\n    ngcc0.text(44);\n    ngcc0.pipe(45, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.elementStart(46, \"clr-accordion\");\n    ngcc0.elementStart(47, \"clr-accordion-panel\");\n    ngcc0.elementStart(48, \"clr-accordion-title\");\n    ngcc0.text(49);\n    ngcc0.pipe(50, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.template(51, OrderEditorComponent_div_2_clr_accordion_content_51_Template, 7, 6, \"clr-accordion-content\", 18);\n    ngcc0.elementEnd();\n    ngcc0.elementStart(52, \"clr-accordion-panel\");\n    ngcc0.elementStart(53, \"clr-accordion-title\");\n    ngcc0.text(54);\n    ngcc0.pipe(55, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.template(56, OrderEditorComponent_div_2_clr_accordion_content_56_Template, 2, 1, \"clr-accordion-content\", 18);\n    ngcc0.elementEnd();\n    ngcc0.elementStart(57, \"clr-accordion-panel\");\n    ngcc0.elementStart(58, \"clr-accordion-title\");\n    ngcc0.text(59);\n    ngcc0.pipe(60, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.template(61, OrderEditorComponent_div_2_clr_accordion_content_61_Template, 24, 27, \"clr-accordion-content\", 18);\n    ngcc0.elementEnd();\n    ngcc0.elementStart(62, \"clr-accordion-panel\");\n    ngcc0.elementStart(63, \"clr-accordion-title\");\n    ngcc0.text(64);\n    ngcc0.pipe(65, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.template(66, OrderEditorComponent_div_2_clr_accordion_content_66_Template, 3, 5, \"clr-accordion-content\", 18);\n    ngcc0.elementEnd();\n    ngcc0.elementStart(67, \"clr-accordion-panel\");\n    ngcc0.elementStart(68, \"clr-accordion-title\");\n    ngcc0.text(69);\n    ngcc0.pipe(70, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.template(71, OrderEditorComponent_div_2_clr_accordion_content_71_Template, 3, 5, \"clr-accordion-content\", 18);\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementStart(72, \"div\", 19);\n    ngcc0.elementStart(73, \"div\", 20);\n    ngcc0.elementStart(74, \"div\", 21);\n    ngcc0.text(75);\n    ngcc0.pipe(76, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.elementStart(77, \"div\", 22);\n    ngcc0.elementStart(78, \"ul\");\n    ngcc0.template(79, OrderEditorComponent_div_2_li_79_Template, 3, 6, \"li\", 0);\n    ngcc0.template(80, OrderEditorComponent_div_2_li_80_Template, 3, 6, \"li\", 0);\n    ngcc0.template(81, OrderEditorComponent_div_2_li_81_Template, 3, 6, \"li\", 0);\n    ngcc0.template(82, OrderEditorComponent_div_2_li_82_Template, 3, 3, \"li\", 0);\n    ngcc0.template(83, OrderEditorComponent_div_2_li_83_Template, 3, 3, \"li\", 0);\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementStart(84, \"div\", 22);\n    ngcc0.elementStart(85, \"label\", 23);\n    ngcc0.text(86);\n    ngcc0.pipe(87, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.elementStart(88, \"textarea\", 24);\n    ngcc0.listener(\"ngModelChange\", function OrderEditorComponent_div_2_Template_textarea_ngModelChange_88_listener($event) { ngcc0.restoreView(_r67); const ctx_r66 = ngcc0.nextContext(); return ctx_r66.note = $event; });\n    ngcc0.elementEnd();\n    ngcc0.elementStart(89, \"clr-checkbox-wrapper\", 25);\n    ngcc0.elementStart(90, \"input\", 26);\n    ngcc0.listener(\"ngModelChange\", function OrderEditorComponent_div_2_Template_input_ngModelChange_90_listener($event) { ngcc0.restoreView(_r67); const ctx_r68 = ngcc0.nextContext(); return ctx_r68.recalculateShipping = $event; });\n    ngcc0.elementEnd();\n    ngcc0.elementStart(91, \"label\");\n    ngcc0.text(92);\n    ngcc0.pipe(93, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementStart(94, \"div\", 27);\n    ngcc0.elementStart(95, \"button\", 28);\n    ngcc0.listener(\"click\", function OrderEditorComponent_div_2_Template_button_click_95_listener() { const restoredCtx = ngcc0.restoreView(_r67); const order_r5 = restoredCtx.ngIf; const ctx_r69 = ngcc0.nextContext(); return ctx_r69.previewAndModify(order_r5); });\n    ngcc0.text(96);\n    ngcc0.pipe(97, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const order_r5 = ctx.ngIf;\n    const ctx_r1 = ngcc0.nextContext();\n    ngcc0.advance(8);\n    ngcc0.textInterpolate(ngcc0.pipeBind1(9, 35, \"order.product-name\"));\n    ngcc0.advance(3);\n    ngcc0.textInterpolate(ngcc0.pipeBind1(12, 37, \"order.product-sku\"));\n    ngcc0.advance(3);\n    ngcc0.textInterpolate(ngcc0.pipeBind1(15, 39, \"order.unit-price\"));\n    ngcc0.advance(3);\n    ngcc0.textInterpolate(ngcc0.pipeBind1(18, 41, \"order.quantity\"));\n    ngcc0.advance(2);\n    ngcc0.property(\"ngIf\", ctx_r1.orderLineCustomFields.length);\n    ngcc0.advance(2);\n    ngcc0.textInterpolate(ngcc0.pipeBind1(22, 43, \"order.total\"));\n    ngcc0.advance(3);\n    ngcc0.property(\"ngForOf\", order_r5.lines);\n    ngcc0.advance(1);\n    ngcc0.property(\"ngForOf\", ctx_r1.addedLines)(\"ngForTrackBy\", ctx_r1.trackByProductVariantId);\n    ngcc0.advance(1);\n    ngcc0.property(\"ngForOf\", order_r5.surcharges);\n    ngcc0.advance(1);\n    ngcc0.property(\"ngForOf\", ctx_r1.modifyOrderInput.surcharges);\n    ngcc0.advance(3);\n    ngcc0.textInterpolate(ngcc0.pipeBind1(31, 45, \"order.shipping\"));\n    ngcc0.advance(3);\n    ngcc0.textInterpolate(order_r5.shippingLines[0] == null ? null : order_r5.shippingLines[0].shippingMethod == null ? null : order_r5.shippingLines[0].shippingMethod.name);\n    ngcc0.advance(2);\n    ngcc0.property(\"ngIf\", ctx_r1.orderLineCustomFields.length);\n    ngcc0.advance(2);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind2(38, 47, order_r5.shippingWithTax, order_r5.currencyCode), \" \");\n    ngcc0.advance(2);\n    ngcc0.property(\"title\", ngcc0.pipeBind1(40, 50, \"order.net-price\"));\n    ngcc0.advance(2);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind2(42, 52, order_r5.shipping, order_r5.currencyCode), \" \");\n    ngcc0.advance(3);\n    ngcc0.textInterpolate(ngcc0.pipeBind1(45, 55, \"order.modifications\"));\n    ngcc0.advance(5);\n    ngcc0.textInterpolate(ngcc0.pipeBind1(50, 57, \"order.add-item-to-order\"));\n    ngcc0.advance(5);\n    ngcc0.textInterpolate(ngcc0.pipeBind1(55, 59, \"order.set-coupon-codes\"));\n    ngcc0.advance(5);\n    ngcc0.textInterpolate(ngcc0.pipeBind1(60, 61, \"order.add-surcharge\"));\n    ngcc0.advance(5);\n    ngcc0.textInterpolate(ngcc0.pipeBind1(65, 63, \"order.edit-shipping-address\"));\n    ngcc0.advance(5);\n    ngcc0.textInterpolate(ngcc0.pipeBind1(70, 65, \"order.edit-billing-address\"));\n    ngcc0.advance(6);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(76, 67, \"order.modification-summary\"), \" \");\n    ngcc0.advance(4);\n    ngcc0.property(\"ngIf\", ctx_r1.modifyOrderInput.addItems == null ? null : ctx_r1.modifyOrderInput.addItems.length);\n    ngcc0.advance(1);\n    ngcc0.property(\"ngIf\", ctx_r1.modifyOrderInput.adjustOrderLines == null ? null : ctx_r1.modifyOrderInput.adjustOrderLines.length);\n    ngcc0.advance(1);\n    ngcc0.property(\"ngIf\", ctx_r1.modifyOrderInput.surcharges == null ? null : ctx_r1.modifyOrderInput.surcharges.length);\n    ngcc0.advance(1);\n    ngcc0.property(\"ngIf\", ctx_r1.shippingAddressForm.dirty);\n    ngcc0.advance(1);\n    ngcc0.property(\"ngIf\", ctx_r1.billingAddressForm.dirty);\n    ngcc0.advance(3);\n    ngcc0.textInterpolate(ngcc0.pipeBind1(87, 69, \"order.note\"));\n    ngcc0.advance(2);\n    ngcc0.property(\"ngModel\", ctx_r1.note);\n    ngcc0.advance(2);\n    ngcc0.property(\"ngModel\", ctx_r1.recalculateShipping);\n    ngcc0.advance(2);\n    ngcc0.textInterpolate(ngcc0.pipeBind1(93, 71, \"order.modification-recalculate-shipping\"));\n    ngcc0.advance(3);\n    ngcc0.property(\"disabled\", !ctx_r1.canPreviewChanges());\n    ngcc0.advance(1);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(97, 73, \"order.preview-changes\"), \" \");\n} }\nfunction OrderHistoryComponent_span_16_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementStart(0, \"span\", 12);\n    ngcc0.text(1);\n    ngcc0.pipe(2, \"translate\");\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    ngcc0.advance(1);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(2, 1, \"order.note-only-visible-to-administrators\"), \" \");\n} }\nfunction OrderHistoryComponent_span_17_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementStart(0, \"span\", 13);\n    ngcc0.text(1);\n    ngcc0.pipe(2, \"translate\");\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    ngcc0.advance(1);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(2, 1, \"order.note-visible-to-customer\"), \" \");\n} }\nfunction OrderHistoryComponent_vdr_timeline_entry_18_ng_container_2_div_1_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementStart(0, \"div\", 11);\n    ngcc0.text(1);\n    ngcc0.pipe(2, \"translate\");\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    ngcc0.advance(1);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(2, 1, \"order.history-order-fulfilled\"), \" \");\n} }\nfunction OrderHistoryComponent_vdr_timeline_entry_18_ng_container_2_div_2_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementStart(0, \"div\", 11);\n    ngcc0.text(1);\n    ngcc0.pipe(2, \"translate\");\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    ngcc0.advance(1);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(2, 1, \"order.history-order-cancelled\"), \" \");\n} }\nconst _c8 = function (a0, a1) { return { from: a0, to: a1 }; };\nfunction OrderHistoryComponent_vdr_timeline_entry_18_ng_container_2_ng_template_3_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.text(0);\n    ngcc0.pipe(1, \"translate\");\n} if (rf & 2) {\n    const entry_r3 = ngcc0.nextContext(2).$implicit;\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind2(1, 1, \"order.history-order-transition\", ngcc0.pureFunction2(4, _c8, entry_r3.data.from, entry_r3.data.to)), \" \");\n} }\nfunction OrderHistoryComponent_vdr_timeline_entry_18_ng_container_2_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementContainerStart(0);\n    ngcc0.template(1, OrderHistoryComponent_vdr_timeline_entry_18_ng_container_2_div_1_Template, 3, 3, \"div\", 17);\n    ngcc0.template(2, OrderHistoryComponent_vdr_timeline_entry_18_ng_container_2_div_2_Template, 3, 3, \"div\", 17);\n    ngcc0.template(3, OrderHistoryComponent_vdr_timeline_entry_18_ng_container_2_ng_template_3_Template, 2, 7, \"ng-template\", 18);\n    ngcc0.elementContainerEnd();\n} if (rf & 2) {\n    const entry_r3 = ngcc0.nextContext().$implicit;\n    ngcc0.advance(1);\n    ngcc0.property(\"ngIf\", entry_r3.data.to === \"Delivered\");\n    ngcc0.advance(1);\n    ngcc0.property(\"ngIf\", entry_r3.data.to === \"Cancelled\");\n    ngcc0.advance(1);\n    ngcc0.property(\"ngIf\", entry_r3.data.to !== \"Cancelled\" && entry_r3.data.to !== \"Delivered\");\n} }\nfunction OrderHistoryComponent_vdr_timeline_entry_18_ng_container_3_ng_container_4_vdr_chip_6_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementStart(0, \"vdr-chip\", 23);\n    ngcc0.text(1);\n    ngcc0.pipe(2, \"translate\");\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    ngcc0.advance(1);\n    ngcc0.textInterpolate(ngcc0.pipeBind1(2, 1, \"order.modification-settled\"));\n} }\nfunction OrderHistoryComponent_vdr_timeline_entry_18_ng_container_3_ng_container_4_vdr_chip_7_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementStart(0, \"vdr-chip\", 24);\n    ngcc0.text(1);\n    ngcc0.pipe(2, \"translate\");\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    ngcc0.advance(1);\n    ngcc0.textInterpolate(ngcc0.pipeBind1(2, 1, \"order.modification-not-settled\"));\n} }\nfunction OrderHistoryComponent_vdr_timeline_entry_18_ng_container_3_ng_container_4_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementContainerStart(0);\n    ngcc0.text(1);\n    ngcc0.pipe(2, \"translate\");\n    ngcc0.elementStart(3, \"strong\");\n    ngcc0.text(4);\n    ngcc0.pipe(5, \"localeCurrency\");\n    ngcc0.elementEnd();\n    ngcc0.template(6, OrderHistoryComponent_vdr_timeline_entry_18_ng_container_3_ng_container_4_vdr_chip_6_Template, 3, 3, \"vdr-chip\", 20);\n    ngcc0.template(7, OrderHistoryComponent_vdr_timeline_entry_18_ng_container_3_ng_container_4_vdr_chip_7_Template, 3, 3, \"vdr-chip\", 21);\n    ngcc0.elementStart(8, \"vdr-history-entry-detail\");\n    ngcc0.element(9, \"vdr-modification-detail\", 22);\n    ngcc0.elementEnd();\n    ngcc0.elementContainerEnd();\n} if (rf & 2) {\n    const modification_r20 = ctx.ngIf;\n    const ctx_r19 = ngcc0.nextContext(3);\n    ngcc0.advance(1);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(2, 6, \"order.modify-order-price-difference\"), \": \");\n    ngcc0.advance(3);\n    ngcc0.textInterpolate(ngcc0.pipeBind2(5, 8, modification_r20.priceChange, ctx_r19.order.currencyCode));\n    ngcc0.advance(2);\n    ngcc0.property(\"ngIf\", modification_r20.isSettled);\n    ngcc0.advance(1);\n    ngcc0.property(\"ngIf\", !modification_r20.isSettled);\n    ngcc0.advance(2);\n    ngcc0.property(\"order\", ctx_r19.order)(\"modification\", modification_r20);\n} }\nfunction OrderHistoryComponent_vdr_timeline_entry_18_ng_container_3_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementContainerStart(0);\n    ngcc0.elementStart(1, \"div\", 11);\n    ngcc0.text(2);\n    ngcc0.pipe(3, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.template(4, OrderHistoryComponent_vdr_timeline_entry_18_ng_container_3_ng_container_4_Template, 10, 11, \"ng-container\", 19);\n    ngcc0.elementContainerEnd();\n} if (rf & 2) {\n    const entry_r3 = ngcc0.nextContext().$implicit;\n    const ctx_r5 = ngcc0.nextContext();\n    ngcc0.advance(2);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(3, 2, \"order.history-order-modified\"), \" \");\n    ngcc0.advance(2);\n    ngcc0.property(\"ngIf\", ctx_r5.getModification(entry_r3.data.modificationId));\n} }\nfunction OrderHistoryComponent_vdr_timeline_entry_18_ng_container_4_ng_container_1_vdr_history_entry_detail_6_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementStart(0, \"vdr-history-entry-detail\");\n    ngcc0.element(1, \"vdr-payment-detail\", 27);\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const payment_r28 = ctx.ngIf;\n    const ctx_r27 = ngcc0.nextContext(4);\n    ngcc0.advance(1);\n    ngcc0.property(\"payment\", payment_r28)(\"currencyCode\", ctx_r27.order.currencyCode);\n} }\nfunction OrderHistoryComponent_vdr_timeline_entry_18_ng_container_4_ng_container_1_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementContainerStart(0);\n    ngcc0.elementStart(1, \"div\", 11);\n    ngcc0.text(2);\n    ngcc0.pipe(3, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.text(4);\n    ngcc0.pipe(5, \"translate\");\n    ngcc0.template(6, OrderHistoryComponent_vdr_timeline_entry_18_ng_container_4_ng_container_1_vdr_history_entry_detail_6_Template, 2, 2, \"vdr-history-entry-detail\", 19);\n    ngcc0.elementContainerEnd();\n} if (rf & 2) {\n    const entry_r3 = ngcc0.nextContext(2).$implicit;\n    const ctx_r24 = ngcc0.nextContext();\n    let tmp_1_0;\n    ngcc0.advance(2);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(3, 4, \"order.history-payment-settled\"), \" \");\n    ngcc0.advance(2);\n    ngcc0.textInterpolate2(\" \", ngcc0.pipeBind1(5, 6, \"order.transaction-id\"), \": \", (tmp_1_0 = ctx_r24.getPayment(entry_r3)) == null ? null : tmp_1_0.transactionId, \" \");\n    ngcc0.advance(2);\n    ngcc0.property(\"ngIf\", ctx_r24.getPayment(entry_r3));\n} }\nconst _c9 = function (a0, a1, a2) { return { from: a0, to: a1, id: a2 }; };\nfunction OrderHistoryComponent_vdr_timeline_entry_18_ng_container_4_ng_template_2_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.text(0);\n    ngcc0.pipe(1, \"translate\");\n} if (rf & 2) {\n    const entry_r3 = ngcc0.nextContext(2).$implicit;\n    const ctx_r26 = ngcc0.nextContext();\n    let tmp_0_0;\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind2(1, 1, \"order.history-payment-transition\", ngcc0.pureFunction3(4, _c9, entry_r3.data.from, entry_r3.data.to, (tmp_0_0 = ctx_r26.getPayment(entry_r3)) == null ? null : tmp_0_0.transactionId)), \" \");\n} }\nfunction OrderHistoryComponent_vdr_timeline_entry_18_ng_container_4_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementContainerStart(0);\n    ngcc0.template(1, OrderHistoryComponent_vdr_timeline_entry_18_ng_container_4_ng_container_1_Template, 7, 8, \"ng-container\", 25);\n    ngcc0.template(2, OrderHistoryComponent_vdr_timeline_entry_18_ng_container_4_ng_template_2_Template, 2, 8, \"ng-template\", null, 26, ngcc0.templateRefExtractor);\n    ngcc0.elementContainerEnd();\n} if (rf & 2) {\n    const _r25 = ngcc0.reference(3);\n    const entry_r3 = ngcc0.nextContext().$implicit;\n    ngcc0.advance(1);\n    ngcc0.property(\"ngIf\", entry_r3.data.to === \"Settled\")(\"ngIfElse\", _r25);\n} }\nfunction OrderHistoryComponent_vdr_timeline_entry_18_ng_container_5_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementContainerStart(0);\n    ngcc0.text(1);\n    ngcc0.pipe(2, \"translate\");\n    ngcc0.elementContainerEnd();\n} if (rf & 2) {\n    const entry_r3 = ngcc0.nextContext().$implicit;\n    ngcc0.advance(1);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind2(2, 1, \"order.history-refund-transition\", ngcc0.pureFunction3(4, _c9, entry_r3.data.from, entry_r3.data.to, entry_r3.data.refundId)), \" \");\n} }\nfunction OrderHistoryComponent_vdr_timeline_entry_18_ng_container_6_vdr_history_entry_detail_3_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementStart(0, \"vdr-history-entry-detail\");\n    ngcc0.elementStart(1, \"vdr-labeled-data\", 28);\n    ngcc0.pipe(2, \"translate\");\n    ngcc0.text(3);\n    ngcc0.elementEnd();\n    ngcc0.elementStart(4, \"vdr-labeled-data\", 28);\n    ngcc0.pipe(5, \"translate\");\n    ngcc0.element(6, \"vdr-simple-item-list\", 29);\n    ngcc0.elementEnd();\n    ngcc0.elementStart(7, \"vdr-labeled-data\", 28);\n    ngcc0.pipe(8, \"translate\");\n    ngcc0.text(9);\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const items_r34 = ctx.ngIf;\n    const entry_r3 = ngcc0.nextContext(2).$implicit;\n    ngcc0.advance(1);\n    ngcc0.property(\"label\", ngcc0.pipeBind1(2, 6, \"order.cancellation-reason\"));\n    ngcc0.advance(2);\n    ngcc0.textInterpolate1(\" \", entry_r3.data.reason, \" \");\n    ngcc0.advance(1);\n    ngcc0.property(\"label\", ngcc0.pipeBind1(5, 8, \"order.contents\"));\n    ngcc0.advance(2);\n    ngcc0.property(\"items\", items_r34);\n    ngcc0.advance(1);\n    ngcc0.property(\"label\", ngcc0.pipeBind1(8, 10, \"order.shipping-cancelled\"));\n    ngcc0.advance(2);\n    ngcc0.textInterpolate1(\" \", entry_r3.data.shippingCancelled, \" \");\n} }\nfunction OrderHistoryComponent_vdr_timeline_entry_18_ng_container_6_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementContainerStart(0);\n    ngcc0.text(1);\n    ngcc0.pipe(2, \"translate\");\n    ngcc0.template(3, OrderHistoryComponent_vdr_timeline_entry_18_ng_container_6_vdr_history_entry_detail_3_Template, 10, 12, \"vdr-history-entry-detail\", 19);\n    ngcc0.elementContainerEnd();\n} if (rf & 2) {\n    const entry_r3 = ngcc0.nextContext().$implicit;\n    const ctx_r8 = ngcc0.nextContext();\n    ngcc0.advance(1);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind2(2, 2, \"order.history-items-cancelled\", ngcc0.pureFunction1(5, _c2, entry_r3.data.orderItemIds.length)), \" \");\n    ngcc0.advance(2);\n    ngcc0.property(\"ngIf\", ctx_r8.getCancelledItems(entry_r3));\n} }\nfunction OrderHistoryComponent_vdr_timeline_entry_18_ng_container_7_vdr_history_entry_detail_3_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementStart(0, \"vdr-history-entry-detail\");\n    ngcc0.element(1, \"vdr-fulfillment-detail\", 30);\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const fulfillment_r38 = ctx.ngIf;\n    const ctx_r37 = ngcc0.nextContext(3);\n    ngcc0.advance(1);\n    ngcc0.property(\"fulfillmentId\", fulfillment_r38.id)(\"order\", ctx_r37.order);\n} }\nfunction OrderHistoryComponent_vdr_timeline_entry_18_ng_container_7_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementContainerStart(0);\n    ngcc0.text(1);\n    ngcc0.pipe(2, \"translate\");\n    ngcc0.template(3, OrderHistoryComponent_vdr_timeline_entry_18_ng_container_7_vdr_history_entry_detail_3_Template, 2, 2, \"vdr-history-entry-detail\", 19);\n    ngcc0.elementContainerEnd();\n} if (rf & 2) {\n    const entry_r3 = ngcc0.nextContext().$implicit;\n    const ctx_r9 = ngcc0.nextContext();\n    ngcc0.advance(1);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(2, 2, \"order.history-fulfillment-created\"), \" \");\n    ngcc0.advance(2);\n    ngcc0.property(\"ngIf\", ctx_r9.getFulfillment(entry_r3));\n} }\nfunction OrderHistoryComponent_vdr_timeline_entry_18_ng_container_8_ng_container_1_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementContainerStart(0);\n    ngcc0.elementStart(1, \"div\", 11);\n    ngcc0.text(2);\n    ngcc0.pipe(3, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.text(4);\n    ngcc0.pipe(5, \"translate\");\n    ngcc0.elementContainerEnd();\n} if (rf & 2) {\n    const entry_r3 = ngcc0.nextContext(2).$implicit;\n    const ctx_r40 = ngcc0.nextContext();\n    let tmp_1_0;\n    ngcc0.advance(2);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(3, 3, \"order.history-fulfillment-delivered\"), \" \");\n    ngcc0.advance(2);\n    ngcc0.textInterpolate2(\" \", ngcc0.pipeBind1(5, 5, \"order.tracking-code\"), \": \", (tmp_1_0 = ctx_r40.getFulfillment(entry_r3)) == null ? null : tmp_1_0.trackingCode, \" \");\n} }\nfunction OrderHistoryComponent_vdr_timeline_entry_18_ng_container_8_ng_container_2_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementContainerStart(0);\n    ngcc0.elementStart(1, \"div\", 11);\n    ngcc0.text(2);\n    ngcc0.pipe(3, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.text(4);\n    ngcc0.pipe(5, \"translate\");\n    ngcc0.elementContainerEnd();\n} if (rf & 2) {\n    const entry_r3 = ngcc0.nextContext(2).$implicit;\n    const ctx_r41 = ngcc0.nextContext();\n    let tmp_1_0;\n    ngcc0.advance(2);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(3, 3, \"order.history-fulfillment-shipped\"), \" \");\n    ngcc0.advance(2);\n    ngcc0.textInterpolate2(\" \", ngcc0.pipeBind1(5, 5, \"order.tracking-code\"), \": \", (tmp_1_0 = ctx_r41.getFulfillment(entry_r3)) == null ? null : tmp_1_0.trackingCode, \" \");\n} }\nfunction OrderHistoryComponent_vdr_timeline_entry_18_ng_container_8_ng_container_3_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementContainerStart(0);\n    ngcc0.text(1);\n    ngcc0.pipe(2, \"translate\");\n    ngcc0.elementContainerEnd();\n} if (rf & 2) {\n    const entry_r3 = ngcc0.nextContext(2).$implicit;\n    ngcc0.advance(1);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind2(2, 1, \"order.history-fulfillment-transition\", ngcc0.pureFunction2(4, _c8, entry_r3.data.from, entry_r3.data.to)), \" \");\n} }\nfunction OrderHistoryComponent_vdr_timeline_entry_18_ng_container_8_vdr_history_entry_detail_4_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementStart(0, \"vdr-history-entry-detail\");\n    ngcc0.element(1, \"vdr-fulfillment-detail\", 30);\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const fulfillment_r47 = ctx.ngIf;\n    const ctx_r43 = ngcc0.nextContext(3);\n    ngcc0.advance(1);\n    ngcc0.property(\"fulfillmentId\", fulfillment_r47.id)(\"order\", ctx_r43.order);\n} }\nfunction OrderHistoryComponent_vdr_timeline_entry_18_ng_container_8_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementContainerStart(0);\n    ngcc0.template(1, OrderHistoryComponent_vdr_timeline_entry_18_ng_container_8_ng_container_1_Template, 6, 7, \"ng-container\", 19);\n    ngcc0.template(2, OrderHistoryComponent_vdr_timeline_entry_18_ng_container_8_ng_container_2_Template, 6, 7, \"ng-container\", 19);\n    ngcc0.template(3, OrderHistoryComponent_vdr_timeline_entry_18_ng_container_8_ng_container_3_Template, 3, 7, \"ng-container\", 19);\n    ngcc0.template(4, OrderHistoryComponent_vdr_timeline_entry_18_ng_container_8_vdr_history_entry_detail_4_Template, 2, 2, \"vdr-history-entry-detail\", 19);\n    ngcc0.elementContainerEnd();\n} if (rf & 2) {\n    const entry_r3 = ngcc0.nextContext().$implicit;\n    const ctx_r10 = ngcc0.nextContext();\n    ngcc0.advance(1);\n    ngcc0.property(\"ngIf\", entry_r3.data.to === \"Delivered\");\n    ngcc0.advance(1);\n    ngcc0.property(\"ngIf\", entry_r3.data.to === \"Shipped\");\n    ngcc0.advance(1);\n    ngcc0.property(\"ngIf\", entry_r3.data.to !== \"Delivered\" && entry_r3.data.to !== \"Shipped\");\n    ngcc0.advance(1);\n    ngcc0.property(\"ngIf\", ctx_r10.getFulfillment(entry_r3));\n} }\nfunction OrderHistoryComponent_vdr_timeline_entry_18_ng_container_9_span_3_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementStart(0, \"span\", 43);\n    ngcc0.text(1);\n    ngcc0.pipe(2, \"translate\");\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    ngcc0.advance(1);\n    ngcc0.textInterpolate(ngcc0.pipeBind1(2, 1, \"common.public\"));\n} }\nfunction OrderHistoryComponent_vdr_timeline_entry_18_ng_container_9_span_4_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementStart(0, \"span\", 44);\n    ngcc0.text(1);\n    ngcc0.pipe(2, \"translate\");\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    ngcc0.advance(1);\n    ngcc0.textInterpolate(ngcc0.pipeBind1(2, 1, \"common.private\"));\n} }\nfunction OrderHistoryComponent_vdr_timeline_entry_18_ng_container_9_Template(rf, ctx) { if (rf & 1) {\n    const _r53 = ngcc0.getCurrentView();\n    ngcc0.elementContainerStart(0);\n    ngcc0.elementStart(1, \"div\", 31);\n    ngcc0.elementStart(2, \"div\", 32);\n    ngcc0.template(3, OrderHistoryComponent_vdr_timeline_entry_18_ng_container_9_span_3_Template, 3, 3, \"span\", 33);\n    ngcc0.template(4, OrderHistoryComponent_vdr_timeline_entry_18_ng_container_9_span_4_Template, 3, 3, \"span\", 34);\n    ngcc0.text(5);\n    ngcc0.elementEnd();\n    ngcc0.element(6, \"div\", 35);\n    ngcc0.elementStart(7, \"vdr-dropdown\");\n    ngcc0.elementStart(8, \"button\", 36);\n    ngcc0.element(9, \"clr-icon\", 37);\n    ngcc0.elementEnd();\n    ngcc0.elementStart(10, \"vdr-dropdown-menu\", 38);\n    ngcc0.elementStart(11, \"button\", 39);\n    ngcc0.listener(\"click\", function OrderHistoryComponent_vdr_timeline_entry_18_ng_container_9_Template_button_click_11_listener() { ngcc0.restoreView(_r53); const entry_r3 = ngcc0.nextContext().$implicit; const ctx_r51 = ngcc0.nextContext(); return ctx_r51.updateNote.emit(entry_r3); });\n    ngcc0.pipe(12, \"hasPermission\");\n    ngcc0.element(13, \"clr-icon\", 40);\n    ngcc0.text(14);\n    ngcc0.pipe(15, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.element(16, \"div\", 41);\n    ngcc0.elementStart(17, \"button\", 39);\n    ngcc0.listener(\"click\", function OrderHistoryComponent_vdr_timeline_entry_18_ng_container_9_Template_button_click_17_listener() { ngcc0.restoreView(_r53); const entry_r3 = ngcc0.nextContext().$implicit; const ctx_r54 = ngcc0.nextContext(); return ctx_r54.deleteNote.emit(entry_r3); });\n    ngcc0.pipe(18, \"hasPermission\");\n    ngcc0.element(19, \"clr-icon\", 42);\n    ngcc0.text(20);\n    ngcc0.pipe(21, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementContainerEnd();\n} if (rf & 2) {\n    const entry_r3 = ngcc0.nextContext().$implicit;\n    ngcc0.advance(3);\n    ngcc0.property(\"ngIf\", entry_r3.isPublic);\n    ngcc0.advance(1);\n    ngcc0.property(\"ngIf\", !entry_r3.isPublic);\n    ngcc0.advance(1);\n    ngcc0.textInterpolate1(\" \", entry_r3.data.note, \" \");\n    ngcc0.advance(6);\n    ngcc0.property(\"disabled\", !ngcc0.pipeBind1(12, 7, \"UpdateOrder\"));\n    ngcc0.advance(3);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(15, 9, \"common.edit\"), \" \");\n    ngcc0.advance(3);\n    ngcc0.property(\"disabled\", !ngcc0.pipeBind1(18, 11, \"UpdateOrder\"));\n    ngcc0.advance(3);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(21, 13, \"common.delete\"), \" \");\n} }\nconst _c10 = function (a2) { return [\"/marketing\", \"promotions\", a2]; };\nfunction OrderHistoryComponent_vdr_timeline_entry_18_ng_container_10_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementContainerStart(0);\n    ngcc0.text(1);\n    ngcc0.pipe(2, \"translate\");\n    ngcc0.elementStart(3, \"vdr-chip\");\n    ngcc0.elementStart(4, \"a\", 45);\n    ngcc0.text(5);\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementContainerEnd();\n} if (rf & 2) {\n    const entry_r3 = ngcc0.nextContext().$implicit;\n    ngcc0.advance(1);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(2, 3, \"order.history-coupon-code-applied\"), \": \");\n    ngcc0.advance(3);\n    ngcc0.property(\"routerLink\", ngcc0.pureFunction1(5, _c10, entry_r3.data.promotionId));\n    ngcc0.advance(1);\n    ngcc0.textInterpolate(entry_r3.data.couponCode);\n} }\nfunction OrderHistoryComponent_vdr_timeline_entry_18_ng_container_11_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementContainerStart(0);\n    ngcc0.text(1);\n    ngcc0.pipe(2, \"translate\");\n    ngcc0.elementStart(3, \"vdr-chip\");\n    ngcc0.elementStart(4, \"span\", 46);\n    ngcc0.text(5);\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementContainerEnd();\n} if (rf & 2) {\n    const entry_r3 = ngcc0.nextContext().$implicit;\n    ngcc0.advance(1);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(2, 2, \"order.history-coupon-code-removed\"), \": \");\n    ngcc0.advance(4);\n    ngcc0.textInterpolate(entry_r3.data.couponCode);\n} }\nfunction OrderHistoryComponent_vdr_timeline_entry_18_Template(rf, ctx) { if (rf & 1) {\n    const _r60 = ngcc0.getCurrentView();\n    ngcc0.elementStart(0, \"vdr-timeline-entry\", 14);\n    ngcc0.listener(\"expandClick\", function OrderHistoryComponent_vdr_timeline_entry_18_Template_vdr_timeline_entry_expandClick_0_listener() { ngcc0.restoreView(_r60); const ctx_r59 = ngcc0.nextContext(); return ctx_r59.expanded = !ctx_r59.expanded; });\n    ngcc0.elementContainerStart(1, 15);\n    ngcc0.template(2, OrderHistoryComponent_vdr_timeline_entry_18_ng_container_2_Template, 4, 3, \"ng-container\", 16);\n    ngcc0.template(3, OrderHistoryComponent_vdr_timeline_entry_18_ng_container_3_Template, 5, 4, \"ng-container\", 16);\n    ngcc0.template(4, OrderHistoryComponent_vdr_timeline_entry_18_ng_container_4_Template, 4, 2, \"ng-container\", 16);\n    ngcc0.template(5, OrderHistoryComponent_vdr_timeline_entry_18_ng_container_5_Template, 3, 8, \"ng-container\", 16);\n    ngcc0.template(6, OrderHistoryComponent_vdr_timeline_entry_18_ng_container_6_Template, 4, 7, \"ng-container\", 16);\n    ngcc0.template(7, OrderHistoryComponent_vdr_timeline_entry_18_ng_container_7_Template, 4, 4, \"ng-container\", 16);\n    ngcc0.template(8, OrderHistoryComponent_vdr_timeline_entry_18_ng_container_8_Template, 5, 4, \"ng-container\", 16);\n    ngcc0.template(9, OrderHistoryComponent_vdr_timeline_entry_18_ng_container_9_Template, 22, 15, \"ng-container\", 16);\n    ngcc0.template(10, OrderHistoryComponent_vdr_timeline_entry_18_ng_container_10_Template, 6, 7, \"ng-container\", 16);\n    ngcc0.template(11, OrderHistoryComponent_vdr_timeline_entry_18_ng_container_11_Template, 6, 4, \"ng-container\", 16);\n    ngcc0.elementContainerEnd();\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const entry_r3 = ctx.$implicit;\n    const ctx_r2 = ngcc0.nextContext();\n    ngcc0.property(\"displayType\", ctx_r2.getDisplayType(entry_r3))(\"iconShape\", ctx_r2.getTimelineIcon(entry_r3))(\"createdAt\", entry_r3.createdAt)(\"name\", ctx_r2.getName(entry_r3))(\"featured\", ctx_r2.isFeatured(entry_r3))(\"collapsed\", !ctx_r2.expanded && !ctx_r2.isFeatured(entry_r3));\n    ngcc0.advance(1);\n    ngcc0.property(\"ngSwitch\", entry_r3.type);\n    ngcc0.advance(1);\n    ngcc0.property(\"ngSwitchCase\", ctx_r2.type.ORDER_STATE_TRANSITION);\n    ngcc0.advance(1);\n    ngcc0.property(\"ngSwitchCase\", ctx_r2.type.ORDER_MODIFIED);\n    ngcc0.advance(1);\n    ngcc0.property(\"ngSwitchCase\", ctx_r2.type.ORDER_PAYMENT_TRANSITION);\n    ngcc0.advance(1);\n    ngcc0.property(\"ngSwitchCase\", ctx_r2.type.ORDER_REFUND_TRANSITION);\n    ngcc0.advance(1);\n    ngcc0.property(\"ngSwitchCase\", ctx_r2.type.ORDER_CANCELLATION);\n    ngcc0.advance(1);\n    ngcc0.property(\"ngSwitchCase\", ctx_r2.type.ORDER_FULFILLMENT);\n    ngcc0.advance(1);\n    ngcc0.property(\"ngSwitchCase\", ctx_r2.type.ORDER_FULFILLMENT_TRANSITION);\n    ngcc0.advance(1);\n    ngcc0.property(\"ngSwitchCase\", ctx_r2.type.ORDER_NOTE);\n    ngcc0.advance(1);\n    ngcc0.property(\"ngSwitchCase\", ctx_r2.type.ORDER_COUPON_APPLIED);\n    ngcc0.advance(1);\n    ngcc0.property(\"ngSwitchCase\", ctx_r2.type.ORDER_COUPON_REMOVED);\n} }\nfunction OrderListComponent_div_3_button_1_Template(rf, ctx) { if (rf & 1) {\n    const _r9 = ngcc0.getCurrentView();\n    ngcc0.elementStart(0, \"button\", 19);\n    ngcc0.listener(\"click\", function OrderListComponent_div_3_button_1_Template_button_click_0_listener() { const restoredCtx = ngcc0.restoreView(_r9); const preset_r7 = restoredCtx.$implicit; const ctx_r8 = ngcc0.nextContext(2); return ctx_r8.selectFilterPreset(preset_r7.name); });\n    ngcc0.text(1);\n    ngcc0.pipe(2, \"translate\");\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const preset_r7 = ctx.$implicit;\n    const activePreset_r5 = ngcc0.nextContext().ngIf;\n    ngcc0.classProp(\"btn-primary\", activePreset_r5 === preset_r7.name);\n    ngcc0.advance(1);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(2, 3, preset_r7.label), \" \");\n} }\nfunction OrderListComponent_div_3_Template(rf, ctx) { if (rf & 1) {\n    const _r12 = ngcc0.getCurrentView();\n    ngcc0.elementStart(0, \"div\", 17);\n    ngcc0.template(1, OrderListComponent_div_3_button_1_Template, 3, 5, \"button\", 18);\n    ngcc0.elementStart(2, \"button\", 19);\n    ngcc0.listener(\"click\", function OrderListComponent_div_3_Template_button_click_2_listener() { ngcc0.restoreView(_r12); const ctx_r11 = ngcc0.nextContext(); return ctx_r11.selectFilterPreset(\"custom\"); });\n    ngcc0.text(3);\n    ngcc0.pipe(4, \"translate\");\n    ngcc0.element(5, \"clr-icon\", 20);\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const activePreset_r5 = ctx.ngIf;\n    const ctx_r0 = ngcc0.nextContext();\n    ngcc0.advance(1);\n    ngcc0.property(\"ngForOf\", ctx_r0.filterPresets);\n    ngcc0.advance(1);\n    ngcc0.classProp(\"btn-primary\", activePreset_r5 === \"custom\");\n    ngcc0.advance(1);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(4, 4, \"order.filter-custom\"), \" \");\n} }\nfunction OrderListComponent_ng_template_13_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.text(0);\n    ngcc0.pipe(1, \"translate\");\n    ngcc0.pipe(2, \"stateI18nToken\");\n} if (rf & 2) {\n    const item_r13 = ctx.item;\n    ngcc0.textInterpolate(ngcc0.pipeBind1(1, 1, ngcc0.pipeBind1(2, 3, item_r13)));\n} }\nfunction OrderListComponent_ng_template_14_Template(rf, ctx) { if (rf & 1) {\n    const _r17 = ngcc0.getCurrentView();\n    ngcc0.elementStart(0, \"span\", 21);\n    ngcc0.text(1);\n    ngcc0.pipe(2, \"translate\");\n    ngcc0.pipe(3, \"stateI18nToken\");\n    ngcc0.elementEnd();\n    ngcc0.elementStart(4, \"span\", 22);\n    ngcc0.listener(\"click\", function OrderListComponent_ng_template_14_Template_span_click_4_listener() { const restoredCtx = ngcc0.restoreView(_r17); const item_r14 = restoredCtx.item; const clear_r15 = restoredCtx.clear; return clear_r15(item_r14); });\n    ngcc0.text(5, \"\\u00D7\");\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const item_r14 = ctx.item;\n    ngcc0.advance(1);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(2, 1, ngcc0.pipeBind1(3, 3, item_r14)), \"\");\n} }\nconst _c11 = function () { return [\"./draft/create\"]; };\nfunction OrderListComponent_ng_container_32_a_1_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementStart(0, \"a\", 24);\n    ngcc0.element(1, \"clr-icon\", 25);\n    ngcc0.text(2);\n    ngcc0.pipe(3, \"translate\");\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    ngcc0.property(\"routerLink\", ngcc0.pureFunction0(4, _c11));\n    ngcc0.advance(2);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(3, 2, \"catalog.create-draft-order\"), \" \");\n} }\nconst _c12 = function () { return [\"CreateOrder\"]; };\nfunction OrderListComponent_ng_container_32_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementContainerStart(0);\n    ngcc0.template(1, OrderListComponent_ng_container_32_a_1_Template, 4, 5, \"a\", 23);\n    ngcc0.elementContainerEnd();\n} if (rf & 2) {\n    ngcc0.advance(1);\n    ngcc0.property(\"vdrIfPermissions\", ngcc0.pureFunction0(1, _c12));\n} }\nconst _c13 = function (a1) { return [\"./\", a1, \"modify\"]; };\nconst _c14 = function (a1) { return [\"./draft\", a1]; };\nconst _c15 = function (a1) { return [\"./\", a1]; };\nfunction OrderListComponent_ng_template_60_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementStart(0, \"td\", 26);\n    ngcc0.text(1);\n    ngcc0.elementEnd();\n    ngcc0.elementStart(2, \"td\", 26);\n    ngcc0.element(3, \"vdr-customer-label\", 27);\n    ngcc0.elementEnd();\n    ngcc0.elementStart(4, \"td\", 26);\n    ngcc0.element(5, \"vdr-order-state-label\", 28);\n    ngcc0.elementEnd();\n    ngcc0.elementStart(6, \"td\", 26);\n    ngcc0.text(7);\n    ngcc0.pipe(8, \"localeCurrency\");\n    ngcc0.elementEnd();\n    ngcc0.elementStart(9, \"td\", 26);\n    ngcc0.text(10);\n    ngcc0.pipe(11, \"timeAgo\");\n    ngcc0.elementEnd();\n    ngcc0.elementStart(12, \"td\", 26);\n    ngcc0.text(13);\n    ngcc0.pipe(14, \"localeDate\");\n    ngcc0.elementEnd();\n    ngcc0.elementStart(15, \"td\", 26);\n    ngcc0.text(16);\n    ngcc0.elementEnd();\n    ngcc0.elementStart(17, \"td\", 29);\n    ngcc0.element(18, \"vdr-table-row-action\", 30);\n    ngcc0.pipe(19, \"translate\");\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const order_r19 = ctx.item;\n    const ctx_r4 = ngcc0.nextContext();\n    ngcc0.advance(1);\n    ngcc0.textInterpolate(order_r19.code);\n    ngcc0.advance(2);\n    ngcc0.property(\"customer\", order_r19.customer);\n    ngcc0.advance(2);\n    ngcc0.property(\"state\", order_r19.state);\n    ngcc0.advance(2);\n    ngcc0.textInterpolate(ngcc0.pipeBind2(8, 9, order_r19.totalWithTax, order_r19.currencyCode));\n    ngcc0.advance(3);\n    ngcc0.textInterpolate(ngcc0.pipeBind1(11, 12, order_r19.updatedAt));\n    ngcc0.advance(3);\n    ngcc0.textInterpolate(ngcc0.pipeBind2(14, 14, order_r19.orderPlacedAt, \"medium\"));\n    ngcc0.advance(3);\n    ngcc0.textInterpolate(ctx_r4.getShippingNames(order_r19));\n    ngcc0.advance(2);\n    ngcc0.property(\"label\", ngcc0.pipeBind1(19, 17, \"common.open\"))(\"linkTo\", order_r19.state === \"Modifying\" ? ngcc0.pureFunction1(19, _c13, order_r19.id) : order_r19.state === \"Draft\" ? ngcc0.pureFunction1(21, _c14, order_r19.id) : ngcc0.pureFunction1(23, _c15, order_r19.id));\n} }\nfunction OrderPaymentCardComponent_ng_container_5_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementContainerStart(0);\n    ngcc0.text(1);\n    ngcc0.elementContainerEnd();\n} if (rf & 2) {\n    const ctx_r0 = ngcc0.nextContext();\n    ngcc0.advance(1);\n    ngcc0.textInterpolate1(\"#\", ctx_r0.payment.transactionId, \"\");\n} }\nfunction OrderPaymentCardComponent_ng_container_10_vdr_labeled_data_16_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementStart(0, \"vdr-labeled-data\", 11);\n    ngcc0.pipe(1, \"translate\");\n    ngcc0.text(2);\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const refund_r3 = ngcc0.nextContext().$implicit;\n    ngcc0.property(\"label\", ngcc0.pipeBind1(1, 2, \"order.transaction-id\"));\n    ngcc0.advance(2);\n    ngcc0.textInterpolate1(\" \", refund_r3.transactionId, \" \");\n} }\nfunction OrderPaymentCardComponent_ng_container_10_vdr_labeled_data_17_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementStart(0, \"vdr-labeled-data\", 11);\n    ngcc0.pipe(1, \"translate\");\n    ngcc0.text(2);\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const refund_r3 = ngcc0.nextContext().$implicit;\n    ngcc0.property(\"label\", ngcc0.pipeBind1(1, 2, \"order.refund-reason\"));\n    ngcc0.advance(2);\n    ngcc0.textInterpolate1(\" \", refund_r3.reason, \" \");\n} }\nfunction OrderPaymentCardComponent_ng_container_10_vdr_labeled_data_18_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementStart(0, \"vdr-labeled-data\", 11);\n    ngcc0.pipe(1, \"translate\");\n    ngcc0.element(2, \"vdr-object-tree\", 13);\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const refund_r3 = ngcc0.nextContext().$implicit;\n    ngcc0.property(\"label\", ngcc0.pipeBind1(1, 2, \"order.refund-metadata\"));\n    ngcc0.advance(2);\n    ngcc0.property(\"value\", refund_r3.metadata);\n} }\nfunction OrderPaymentCardComponent_ng_container_10_div_19_Template(rf, ctx) { if (rf & 1) {\n    const _r13 = ngcc0.getCurrentView();\n    ngcc0.elementStart(0, \"div\", 14);\n    ngcc0.elementStart(1, \"button\", 15);\n    ngcc0.listener(\"click\", function OrderPaymentCardComponent_ng_container_10_div_19_Template_button_click_1_listener() { ngcc0.restoreView(_r13); const refund_r3 = ngcc0.nextContext().$implicit; const ctx_r11 = ngcc0.nextContext(); return ctx_r11.settleRefund.emit(refund_r3); });\n    ngcc0.text(2);\n    ngcc0.pipe(3, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    ngcc0.advance(2);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(3, 1, \"order.settle-refund\"), \" \");\n} }\nfunction OrderPaymentCardComponent_ng_container_10_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementContainerStart(0);\n    ngcc0.elementStart(1, \"div\", 1);\n    ngcc0.element(2, \"clr-icon\", 9);\n    ngcc0.text(3);\n    ngcc0.pipe(4, \"translate\");\n    ngcc0.element(5, \"div\", 10);\n    ngcc0.element(6, \"vdr-refund-state-label\", 4);\n    ngcc0.elementEnd();\n    ngcc0.elementStart(7, \"div\", 5);\n    ngcc0.elementStart(8, \"vdr-labeled-data\", 11);\n    ngcc0.pipe(9, \"translate\");\n    ngcc0.text(10);\n    ngcc0.pipe(11, \"localeDate\");\n    ngcc0.elementEnd();\n    ngcc0.elementStart(12, \"vdr-labeled-data\", 11);\n    ngcc0.pipe(13, \"translate\");\n    ngcc0.text(14);\n    ngcc0.pipe(15, \"localeCurrency\");\n    ngcc0.elementEnd();\n    ngcc0.template(16, OrderPaymentCardComponent_ng_container_10_vdr_labeled_data_16_Template, 3, 4, \"vdr-labeled-data\", 12);\n    ngcc0.template(17, OrderPaymentCardComponent_ng_container_10_vdr_labeled_data_17_Template, 3, 4, \"vdr-labeled-data\", 12);\n    ngcc0.template(18, OrderPaymentCardComponent_ng_container_10_vdr_labeled_data_18_Template, 3, 4, \"vdr-labeled-data\", 12);\n    ngcc0.elementEnd();\n    ngcc0.template(19, OrderPaymentCardComponent_ng_container_10_div_19_Template, 4, 3, \"div\", 8);\n    ngcc0.elementContainerEnd();\n} if (rf & 2) {\n    const refund_r3 = ctx.$implicit;\n    const ctx_r1 = ngcc0.nextContext();\n    ngcc0.advance(3);\n    ngcc0.textInterpolate2(\" \", ngcc0.pipeBind1(4, 11, \"order.refund\"), \" #\", refund_r3.id, \" \");\n    ngcc0.advance(3);\n    ngcc0.property(\"state\", refund_r3.state);\n    ngcc0.advance(2);\n    ngcc0.property(\"label\", ngcc0.pipeBind1(9, 13, \"common.created-at\"));\n    ngcc0.advance(2);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind2(11, 15, refund_r3.createdAt, \"medium\"), \" \");\n    ngcc0.advance(2);\n    ngcc0.property(\"label\", ngcc0.pipeBind1(13, 18, \"order.refund-total\"));\n    ngcc0.advance(2);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind2(15, 20, refund_r3.total, ctx_r1.currencyCode), \" \");\n    ngcc0.advance(2);\n    ngcc0.property(\"ngIf\", refund_r3.transactionId);\n    ngcc0.advance(1);\n    ngcc0.property(\"ngIf\", refund_r3.reason);\n    ngcc0.advance(1);\n    ngcc0.property(\"ngIf\", ctx_r1.refundHasMetadata(refund_r3));\n    ngcc0.advance(1);\n    ngcc0.property(\"ngIf\", refund_r3.state === \"Pending\");\n} }\nfunction OrderPaymentCardComponent_div_11_button_1_Template(rf, ctx) { if (rf & 1) {\n    const _r17 = ngcc0.getCurrentView();\n    ngcc0.elementStart(0, \"button\", 15);\n    ngcc0.listener(\"click\", function OrderPaymentCardComponent_div_11_button_1_Template_button_click_0_listener() { ngcc0.restoreView(_r17); const ctx_r16 = ngcc0.nextContext(2); return ctx_r16.settlePayment.emit(ctx_r16.payment); });\n    ngcc0.text(1);\n    ngcc0.pipe(2, \"translate\");\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    ngcc0.advance(1);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(2, 1, \"order.settle-payment\"), \" \");\n} }\nfunction OrderPaymentCardComponent_div_11_ng_container_6_ng_container_2_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementContainerStart(0);\n    ngcc0.element(1, \"clr-icon\", 23);\n    ngcc0.text(2);\n    ngcc0.pipe(3, \"translate\");\n    ngcc0.pipe(4, \"translate\");\n    ngcc0.pipe(5, \"stateI18nToken\");\n    ngcc0.elementContainerEnd();\n} if (rf & 2) {\n    const nextState_r18 = ngcc0.nextContext().$implicit;\n    ngcc0.advance(2);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind2(3, 1, \"order.transition-to-state\", ngcc0.pureFunction1(8, _c0, ngcc0.pipeBind1(4, 4, ngcc0.pipeBind1(5, 6, nextState_r18)))), \" \");\n} }\nfunction OrderPaymentCardComponent_div_11_ng_container_6_ng_template_3_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.element(0, \"clr-icon\", 24);\n    ngcc0.text(1);\n    ngcc0.pipe(2, \"translate\");\n} if (rf & 2) {\n    ngcc0.advance(1);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(2, 1, \"order.cancel-payment\"), \" \");\n} }\nfunction OrderPaymentCardComponent_div_11_ng_container_6_Template(rf, ctx) { if (rf & 1) {\n    const _r24 = ngcc0.getCurrentView();\n    ngcc0.elementContainerStart(0);\n    ngcc0.elementStart(1, \"button\", 20);\n    ngcc0.listener(\"click\", function OrderPaymentCardComponent_div_11_ng_container_6_Template_button_click_1_listener() { const restoredCtx = ngcc0.restoreView(_r24); const nextState_r18 = restoredCtx.$implicit; const ctx_r23 = ngcc0.nextContext(2); return ctx_r23.transitionPaymentState.emit({ payment: ctx_r23.payment, state: nextState_r18 }); });\n    ngcc0.template(2, OrderPaymentCardComponent_div_11_ng_container_6_ng_container_2_Template, 6, 10, \"ng-container\", 21);\n    ngcc0.template(3, OrderPaymentCardComponent_div_11_ng_container_6_ng_template_3_Template, 3, 3, \"ng-template\", null, 22, ngcc0.templateRefExtractor);\n    ngcc0.elementEnd();\n    ngcc0.elementContainerEnd();\n} if (rf & 2) {\n    const nextState_r18 = ctx.$implicit;\n    const _r20 = ngcc0.reference(4);\n    ngcc0.advance(2);\n    ngcc0.property(\"ngIf\", nextState_r18 !== \"Cancelled\")(\"ngIfElse\", _r20);\n} }\nfunction OrderPaymentCardComponent_div_11_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementStart(0, \"div\", 14);\n    ngcc0.template(1, OrderPaymentCardComponent_div_11_button_1_Template, 3, 3, \"button\", 16);\n    ngcc0.elementStart(2, \"vdr-dropdown\");\n    ngcc0.elementStart(3, \"button\", 17);\n    ngcc0.element(4, \"clr-icon\", 18);\n    ngcc0.elementEnd();\n    ngcc0.elementStart(5, \"vdr-dropdown-menu\", 19);\n    ngcc0.template(6, OrderPaymentCardComponent_div_11_ng_container_6_Template, 5, 2, \"ng-container\", 7);\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const ctx_r2 = ngcc0.nextContext();\n    ngcc0.advance(1);\n    ngcc0.property(\"ngIf\", ctx_r2.payment.nextStates.includes(\"Settled\"));\n    ngcc0.advance(5);\n    ngcc0.property(\"ngForOf\", ctx_r2.nextOtherStates());\n} }\nfunction OrderProcessNodeComponent_div_7_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementStart(0, \"div\", 3);\n    ngcc0.element(1, \"div\", 4);\n    ngcc0.element(2, \"clr-icon\", 5);\n    ngcc0.elementStart(3, \"div\", 6);\n    ngcc0.text(4);\n    ngcc0.pipe(5, \"translate\");\n    ngcc0.pipe(6, \"stateI18nToken\");\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const ctx_r0 = ngcc0.nextContext();\n    ngcc0.advance(4);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(5, 1, ngcc0.pipeBind1(6, 3, ctx_r0.cancelledState)), \" \");\n} }\nfunction OrderProcessGraphComponent_ng_container_0_Template(rf, ctx) { if (rf & 1) {\n    const _r5 = ngcc0.getCurrentView();\n    ngcc0.elementContainerStart(0);\n    ngcc0.elementStart(1, \"vdr-order-process-node\", 1);\n    ngcc0.listener(\"mouseenter\", function OrderProcessGraphComponent_ng_container_0_Template_vdr_order_process_node_mouseenter_1_listener() { const restoredCtx = ngcc0.restoreView(_r5); const state_r2 = restoredCtx.$implicit; const ctx_r4 = ngcc0.nextContext(); return ctx_r4.onMouseOver(state_r2.name); })(\"mouseleave\", function OrderProcessGraphComponent_ng_container_0_Template_vdr_order_process_node_mouseleave_1_listener() { ngcc0.restoreView(_r5); const ctx_r6 = ngcc0.nextContext(); return ctx_r6.onMouseOut(); });\n    ngcc0.pipe(2, \"async\");\n    ngcc0.elementEnd();\n    ngcc0.elementContainerEnd();\n} if (rf & 2) {\n    const state_r2 = ctx.$implicit;\n    const i_r3 = ctx.index;\n    const ctx_r0 = ngcc0.nextContext();\n    ngcc0.advance(1);\n    ngcc0.property(\"node\", state_r2)(\"index\", i_r3)(\"active\", ngcc0.pipeBind1(2, 3, ctx_r0.activeState$) === state_r2.name);\n} }\nfunction OrderProcessGraphComponent_ng_container_1_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementContainerStart(0);\n    ngcc0.element(1, \"vdr-order-process-edge\", 2);\n    ngcc0.elementContainerEnd();\n} if (rf & 2) {\n    const edge_r7 = ctx.$implicit;\n    ngcc0.advance(1);\n    ngcc0.property(\"from\", edge_r7.from)(\"to\", edge_r7.to)(\"index\", edge_r7.index);\n} }\nfunction OrderTableComponent_ng_container_20_img_3_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.element(0, \"img\", 24);\n    ngcc0.pipe(1, \"assetPreview\");\n} if (rf & 2) {\n    const line_r3 = ngcc0.nextContext().$implicit;\n    ngcc0.property(\"src\", ngcc0.pipeBind2(1, 1, line_r3.featuredAsset, \"tiny\"), ngcc0.sanitizeUrl);\n} }\nfunction OrderTableComponent_ng_container_20_ng_container_16_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementContainerStart(0);\n    ngcc0.text(1);\n    ngcc0.elementContainerEnd();\n} if (rf & 2) {\n    const line_r3 = ngcc0.nextContext().$implicit;\n    ngcc0.advance(1);\n    ngcc0.textInterpolate1(\" \", line_r3.quantity, \" \");\n} }\nfunction OrderTableComponent_ng_container_20_ng_template_17_Template(rf, ctx) { if (rf & 1) {\n    const _r15 = ngcc0.getCurrentView();\n    ngcc0.elementStart(0, \"div\", 25);\n    ngcc0.elementStart(1, \"input\", 26, 27);\n    ngcc0.listener(\"blur\", function OrderTableComponent_ng_container_20_ng_template_17_Template_input_blur_1_listener() { ngcc0.restoreView(_r15); const _r12 = ngcc0.reference(2); const line_r3 = ngcc0.nextContext().$implicit; const ctx_r13 = ngcc0.nextContext(); return ctx_r13.draftInputBlur(line_r3, _r12.valueAsNumber); });\n    ngcc0.elementEnd();\n    ngcc0.elementStart(3, \"button\", 28);\n    ngcc0.listener(\"click\", function OrderTableComponent_ng_container_20_ng_template_17_Template_button_click_3_listener() { ngcc0.restoreView(_r15); const line_r3 = ngcc0.nextContext().$implicit; const ctx_r16 = ngcc0.nextContext(); return ctx_r16.remove.emit({ lineId: line_r3.id }); });\n    ngcc0.element(4, \"clr-icon\", 29);\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const line_r3 = ngcc0.nextContext().$implicit;\n    ngcc0.advance(1);\n    ngcc0.property(\"value\", line_r3.quantity);\n} }\nfunction OrderTableComponent_ng_container_20_ng_container_28_vdr_dropdown_1_div_5_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementStart(0, \"div\", 32);\n    ngcc0.elementStart(1, \"a\", 33);\n    ngcc0.text(2);\n    ngcc0.elementEnd();\n    ngcc0.elementStart(3, \"div\", 34);\n    ngcc0.text(4);\n    ngcc0.pipe(5, \"localeCurrency\");\n    ngcc0.elementStart(6, \"div\", 7);\n    ngcc0.pipe(7, \"translate\");\n    ngcc0.text(8);\n    ngcc0.pipe(9, \"localeCurrency\");\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const discount_r22 = ctx.$implicit;\n    const ctx_r21 = ngcc0.nextContext(4);\n    ngcc0.advance(1);\n    ngcc0.property(\"routerLink\", ctx_r21.getPromotionLink(discount_r22));\n    ngcc0.advance(1);\n    ngcc0.textInterpolate(discount_r22.description);\n    ngcc0.advance(2);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind2(5, 5, discount_r22.amountWithTax, ctx_r21.order.currencyCode), \" \");\n    ngcc0.advance(2);\n    ngcc0.property(\"title\", ngcc0.pipeBind1(7, 8, \"order.net-price\"));\n    ngcc0.advance(2);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind2(9, 10, discount_r22.amount, ctx_r21.order.currencyCode), \" \");\n} }\nfunction OrderTableComponent_ng_container_20_ng_container_28_vdr_dropdown_1_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementStart(0, \"vdr-dropdown\");\n    ngcc0.elementStart(1, \"div\", 30);\n    ngcc0.text(2);\n    ngcc0.pipe(3, \"translate\");\n    ngcc0.elementEnd();\n    ngcc0.elementStart(4, \"vdr-dropdown-menu\");\n    ngcc0.template(5, OrderTableComponent_ng_container_20_ng_container_28_vdr_dropdown_1_div_5_Template, 10, 13, \"div\", 31);\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const discounts_r19 = ngcc0.nextContext().ngIf;\n    ngcc0.advance(2);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(3, 2, \"order.promotions-applied\"), \" \");\n    ngcc0.advance(3);\n    ngcc0.property(\"ngForOf\", discounts_r19);\n} }\nfunction OrderTableComponent_ng_container_20_ng_container_28_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementContainerStart(0);\n    ngcc0.template(1, OrderTableComponent_ng_container_20_ng_container_28_vdr_dropdown_1_Template, 6, 4, \"vdr-dropdown\", 23);\n    ngcc0.elementContainerEnd();\n} if (rf & 2) {\n    const discounts_r19 = ctx.ngIf;\n    ngcc0.advance(1);\n    ngcc0.property(\"ngIf\", discounts_r19.length);\n} }\nfunction OrderTableComponent_ng_container_20_ng_container_29_tr_1_div_3_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementStart(0, \"div\", 38);\n    ngcc0.element(1, \"vdr-custom-field-control\", 39);\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const field_r27 = ctx.$implicit;\n    ngcc0.advance(1);\n    ngcc0.property(\"compact\", true)(\"readonly\", true)(\"customField\", field_r27.config)(\"customFieldsFormGroup\", field_r27.formGroup);\n} }\nfunction OrderTableComponent_ng_container_20_ng_container_29_tr_1_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementStart(0, \"tr\");\n    ngcc0.elementStart(1, \"td\", 35);\n    ngcc0.elementStart(2, \"div\", 36);\n    ngcc0.template(3, OrderTableComponent_ng_container_20_ng_container_29_tr_1_div_3_Template, 2, 4, \"div\", 37);\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const customFields_r24 = ngcc0.nextContext().ngIf;\n    ngcc0.advance(3);\n    ngcc0.property(\"ngForOf\", customFields_r24);\n} }\nfunction OrderTableComponent_ng_container_20_ng_container_29_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementContainerStart(0);\n    ngcc0.template(1, OrderTableComponent_ng_container_20_ng_container_29_tr_1_Template, 4, 1, \"tr\", 23);\n    ngcc0.elementContainerEnd();\n} if (rf & 2) {\n    const customFields_r24 = ctx.ngIf;\n    ngcc0.advance(1);\n    ngcc0.property(\"ngIf\", customFields_r24.length);\n} }\nfunction OrderTableComponent_ng_container_20_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementContainerStart(0);\n    ngcc0.elementStart(1, \"tr\", 11);\n    ngcc0.elementStart(2, \"td\", 12);\n    ngcc0.template(3, OrderTableComponent_ng_container_20_img_3_Template, 2, 4, \"img\", 13);\n    ngcc0.elementEnd();\n    ngcc0.elementStart(4, \"td\", 14);\n    ngcc0.text(5);\n    ngcc0.elementEnd();\n    ngcc0.elementStart(6, \"td\", 15);\n    ngcc0.text(7);\n    ngcc0.elementEnd();\n    ngcc0.elementStart(8, \"td\", 16);\n    ngcc0.text(9);\n    ngcc0.pipe(10, \"localeCurrency\");\n    ngcc0.elementStart(11, \"div\", 7);\n    ngcc0.pipe(12, \"translate\");\n    ngcc0.text(13);\n    ngcc0.pipe(14, \"localeCurrency\");\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementStart(15, \"td\", 17);\n    ngcc0.template(16, OrderTableComponent_ng_container_20_ng_container_16_Template, 2, 1, \"ng-container\", 18);\n    ngcc0.template(17, OrderTableComponent_ng_container_20_ng_template_17_Template, 5, 1, \"ng-template\", null, 19, ngcc0.templateRefExtractor);\n    ngcc0.element(19, \"vdr-line-refunds\", 20);\n    ngcc0.element(20, \"vdr-line-fulfillment\", 21);\n    ngcc0.elementEnd();\n    ngcc0.elementStart(21, \"td\", 22);\n    ngcc0.text(22);\n    ngcc0.pipe(23, \"localeCurrency\");\n    ngcc0.elementStart(24, \"div\", 7);\n    ngcc0.pipe(25, \"translate\");\n    ngcc0.text(26);\n    ngcc0.pipe(27, \"localeCurrency\");\n    ngcc0.elementEnd();\n    ngcc0.template(28, OrderTableComponent_ng_container_20_ng_container_28_Template, 2, 1, \"ng-container\", 23);\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.template(29, OrderTableComponent_ng_container_20_ng_container_29_Template, 2, 1, \"ng-container\", 23);\n    ngcc0.elementContainerEnd();\n} if (rf & 2) {\n    const line_r3 = ctx.$implicit;\n    const _r6 = ngcc0.reference(18);\n    const ctx_r0 = ngcc0.nextContext();\n    ngcc0.advance(1);\n    ngcc0.classProp(\"is-cancelled\", line_r3.quantity === 0);\n    ngcc0.advance(2);\n    ngcc0.property(\"ngIf\", line_r3.featuredAsset);\n    ngcc0.advance(2);\n    ngcc0.textInterpolate(line_r3.productVariant.name);\n    ngcc0.advance(2);\n    ngcc0.textInterpolate(line_r3.productVariant.sku);\n    ngcc0.advance(2);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind2(10, 19, line_r3.unitPriceWithTax, ctx_r0.order.currencyCode), \" \");\n    ngcc0.advance(2);\n    ngcc0.property(\"title\", ngcc0.pipeBind1(12, 22, \"order.net-price\"));\n    ngcc0.advance(2);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind2(14, 24, line_r3.unitPrice, ctx_r0.order.currencyCode), \" \");\n    ngcc0.advance(3);\n    ngcc0.property(\"ngIf\", !ctx_r0.isDraft)(\"ngIfElse\", _r6);\n    ngcc0.advance(3);\n    ngcc0.property(\"line\", line_r3)(\"payments\", ctx_r0.order.payments);\n    ngcc0.advance(1);\n    ngcc0.property(\"line\", line_r3)(\"orderState\", ctx_r0.order.state);\n    ngcc0.advance(2);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind2(23, 27, line_r3.linePriceWithTax, ctx_r0.order.currencyCode), \" \");\n    ngcc0.advance(2);\n    ngcc0.property(\"title\", ngcc0.pipeBind1(25, 30, \"order.net-price\"));\n    ngcc0.advance(2);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind2(27, 32, line_r3.linePrice, ctx_r0.order.currencyCode), \" \");\n    ngcc0.advance(2);\n    ngcc0.property(\"ngIf\", ctx_r0.getLineDiscounts(line_r3));\n    ngcc0.advance(1);\n    ngcc0.property(\"ngIf\", ctx_r0.customFieldsForLine[line_r3.id]);\n} }\nfunction OrderTableComponent_tr_21_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementStart(0, \"tr\", 40);\n    ngcc0.elementStart(1, \"td\", 41);\n    ngcc0.text(2);\n    ngcc0.elementEnd();\n    ngcc0.elementStart(3, \"td\", 15);\n    ngcc0.text(4);\n    ngcc0.elementEnd();\n    ngcc0.element(5, \"td\", 42);\n    ngcc0.elementStart(6, \"td\", 22);\n    ngcc0.text(7);\n    ngcc0.pipe(8, \"localeCurrency\");\n    ngcc0.elementStart(9, \"div\", 7);\n    ngcc0.pipe(10, \"translate\");\n    ngcc0.text(11);\n    ngcc0.pipe(12, \"localeCurrency\");\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const surcharge_r29 = ctx.$implicit;\n    const ctx_r1 = ngcc0.nextContext();\n    ngcc0.advance(2);\n    ngcc0.textInterpolate(surcharge_r29.description);\n    ngcc0.advance(2);\n    ngcc0.textInterpolate(surcharge_r29.sku);\n    ngcc0.advance(3);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind2(8, 5, surcharge_r29.priceWithTax, ctx_r1.order.currencyCode), \" \");\n    ngcc0.advance(2);\n    ngcc0.property(\"title\", ngcc0.pipeBind1(10, 8, \"order.net-price\"));\n    ngcc0.advance(2);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind2(12, 10, surcharge_r29.price, ctx_r1.order.currencyCode), \" \");\n} }\nfunction OrderTableComponent_ng_container_22_tr_1_vdr_chip_4_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementStart(0, \"vdr-chip\");\n    ngcc0.text(1);\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const couponCode_r33 = ctx.ngIf;\n    ngcc0.advance(1);\n    ngcc0.textInterpolate(couponCode_r33);\n} }\nfunction OrderTableComponent_ng_container_22_tr_1_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementStart(0, \"tr\", 44);\n    ngcc0.elementStart(1, \"td\", 45);\n    ngcc0.elementStart(2, \"a\", 46);\n    ngcc0.text(3);\n    ngcc0.elementEnd();\n    ngcc0.template(4, OrderTableComponent_ng_container_22_tr_1_vdr_chip_4_Template, 2, 1, \"vdr-chip\", 23);\n    ngcc0.elementEnd();\n    ngcc0.elementStart(5, \"td\", 6);\n    ngcc0.text(6);\n    ngcc0.pipe(7, \"localeCurrency\");\n    ngcc0.elementStart(8, \"div\", 7);\n    ngcc0.pipe(9, \"translate\");\n    ngcc0.text(10);\n    ngcc0.pipe(11, \"localeCurrency\");\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const discount_r30 = ngcc0.nextContext().$implicit;\n    const ctx_r31 = ngcc0.nextContext();\n    ngcc0.advance(2);\n    ngcc0.property(\"routerLink\", ctx_r31.getPromotionLink(discount_r30));\n    ngcc0.advance(1);\n    ngcc0.textInterpolate(discount_r30.description);\n    ngcc0.advance(1);\n    ngcc0.property(\"ngIf\", ctx_r31.getCouponCodeForAdjustment(ctx_r31.order, discount_r30));\n    ngcc0.advance(2);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind2(7, 6, discount_r30.amountWithTax, ctx_r31.order.currencyCode), \" \");\n    ngcc0.advance(2);\n    ngcc0.property(\"title\", ngcc0.pipeBind1(9, 9, \"order.net-price\"));\n    ngcc0.advance(2);\n    ngcc0.textInterpolate1(\" \", ngcc0.pipeBind2(11, 11, discount_r30.amount, ctx_r31.order.currencyCode), \" \");\n} }\nfunction OrderTableComponent_ng_container_22_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementContainerStart(0);\n    ngcc0.template(1, OrderTableComponent_ng_container_22_tr_1_Template, 12, 14, \"tr\", 43);\n    ngcc0.elementContainerEnd();\n} if (rf & 2) {\n    const discount_r30 = ctx.$implicit;\n    ngcc0.advance(1);\n    ngcc0.property(\"ngIf\", discount_r30.type !== \"OTHER\");\n} }\nfunction PaymentDetailComponent_vdr_labeled_data_7_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementStart(0, \"vdr-labeled-data\", 0);\n    ngcc0.pipe(1, \"translate\");\n    ngcc0.text(2);\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const ctx_r0 = ngcc0.nextContext();\n    ngcc0.property(\"label\", ngcc0.pipeBind1(1, 2, \"order.error-message\"));\n    ngcc0.advance(2);\n    ngcc0.textInterpolate1(\" \", ctx_r0.payment.errorMessage, \"\\n\");\n} }\nfunction PaymentDetailComponent_vdr_labeled_data_8_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementStart(0, \"vdr-labeled-data\", 0);\n    ngcc0.pipe(1, \"translate\");\n    ngcc0.text(2);\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const ctx_r1 = ngcc0.nextContext();\n    ngcc0.property(\"label\", ngcc0.pipeBind1(1, 2, \"order.transaction-id\"));\n    ngcc0.advance(2);\n    ngcc0.textInterpolate1(\" \", ctx_r1.payment.transactionId, \"\\n\");\n} }\nfunction PaymentStateLabelComponent_clr_icon_2_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.element(0, \"clr-icon\", 2);\n} }\nfunction RefundStateLabelComponent_clr_icon_2_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.element(0, \"clr-icon\", 2);\n} }\nfunction SimpleItemListComponent_li_2_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementStart(0, \"li\", 2);\n    ngcc0.elementStart(1, \"div\", 3);\n    ngcc0.text(2);\n    ngcc0.elementEnd();\n    ngcc0.element(3, \"clr-icon\", 4);\n    ngcc0.text(4);\n    ngcc0.elementEnd();\n} if (rf & 2) {\n    const item_r1 = ctx.$implicit;\n    ngcc0.property(\"title\", item_r1.name);\n    ngcc0.advance(2);\n    ngcc0.textInterpolate(item_r1.quantity);\n    ngcc0.advance(2);\n    ngcc0.textInterpolate1(\" \", item_r1.name, \" \");\n} }\nclass AddManualPaymentDialogComponent {\r\n    constructor(dataService) {\r\n        this.dataService = dataService;\r\n        this.form = new FormGroup({\r\n            method: new FormControl('', Validators.required),\r\n            transactionId: new FormControl('', Validators.required),\r\n        });\r\n    }\r\n    ngOnInit() {\r\n        this.paymentMethods$ = this.dataService.settings\r\n            .getPaymentMethods(999)\r\n            .mapSingle(data => data.paymentMethods.items);\r\n    }\r\n    submit() {\r\n        const formValue = this.form.value;\r\n        this.resolveWith({\r\n            method: formValue.method,\r\n            transactionId: formValue.transactionId,\r\n        });\r\n    }\r\n    cancel() {\r\n        this.resolveWith();\r\n    }\r\n}\nAddManualPaymentDialogComponent.fac = function AddManualPaymentDialogComponent_Factory(t) { return new (t || AddManualPaymentDialogComponent)(ngcc0.directiveInject(ngcc1.DataService)); };\nAddManualPaymentDialogComponent.cmp = /*@__PURE__*/ ngcc0.defineComponent({ type: AddManualPaymentDialogComponent, selectors: [[\"vdr-add-manual-payment-dialog\"]], decls: 10, vars: 11, consts: [[\"vdrDialogTitle\", \"\"], [3, \"formGroup\"], [\"for\", \"method\", 3, \"label\"], [\"bindLabel\", \"code\", \"autofocus\", \"\", \"bindValue\", \"code\", \"formControlName\", \"method\", 3, \"items\", \"addTag\"], [\"for\", \"transactionId\", 3, \"label\"], [\"id\", \"transactionId\", \"type\", \"text\", \"formControlName\", \"transactionId\"], [\"vdrDialogButtons\", \"\"], [\"type\", \"button\", 1, \"btn\", 3, \"click\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", 3, \"disabled\", \"click\"]], template: function AddManualPaymentDialogComponent_Template(rf, ctx) { if (rf & 1) {\n        ngcc0.template(0, AddManualPaymentDialogComponent_ng_template_0_Template, 2, 3, \"ng-template\", 0);\n        ngcc0.elementStart(1, \"form\", 1);\n        ngcc0.elementStart(2, \"vdr-form-field\", 2);\n        ngcc0.pipe(3, \"translate\");\n        ngcc0.element(4, \"ng-select\", 3);\n        ngcc0.pipe(5, \"async\");\n        ngcc0.elementEnd();\n        ngcc0.elementStart(6, \"vdr-form-field\", 4);\n        ngcc0.pipe(7, \"translate\");\n        ngcc0.element(8, \"input\", 5);\n        ngcc0.elementEnd();\n        ngcc0.elementEnd();\n        ngcc0.template(9, AddManualPaymentDialogComponent_ng_template_9_Template, 7, 11, \"ng-template\", 6);\n    } if (rf & 2) {\n        ngcc0.advance(1);\n        ngcc0.property(\"formGroup\", ctx.form);\n        ngcc0.advance(1);\n        ngcc0.property(\"label\", ngcc0.pipeBind1(3, 5, \"order.payment-method\"));\n        ngcc0.advance(2);\n        ngcc0.property(\"items\", ngcc0.pipeBind1(5, 7, ctx.paymentMethods$))(\"addTag\", true);\n        ngcc0.advance(2);\n        ngcc0.property(\"label\", ngcc0.pipeBind1(7, 9, \"order.transaction-id\"));\n    } }, directives: [ngcc1.DialogTitleDirective, ngcc2.NgNoValidate, ngcc2.NgControlStatusGroup, ngcc2.FormGroupDirective, ngcc1.FormFieldComponent, ngcc3.NgSelectComponent, ngcc2.NgControlStatus, ngcc2.FormControlName, ngcc1.FormFieldControlDirective, ngcc2.DefaultValueAccessor, ngcc1.DialogButtonsDirective], pipes: [ngcc4.TranslatePipe, ngcc5.AsyncPipe, ngcc1.LocaleCurrencyPipe], styles: [\".ng-select[_ngcontent-%COMP%]{min-width:100%}\"], changeDetection: 0 });\r\nAddManualPaymentDialogComponent.ctorParameters = () => [\r\n    { type: DataService }\r\n];\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ngcc0.setClassMetadata(AddManualPaymentDialogComponent, [{\n        type: Component,\n        args: [{\n                selector: 'vdr-add-manual-payment-dialog',\n                template: \"<ng-template vdrDialogTitle>{{ 'order.add-payment-to-order' | translate }}</ng-template>\\r\\n<form [formGroup]=\\\"form\\\">\\r\\n    <vdr-form-field [label]=\\\"'order.payment-method' | translate\\\" for=\\\"method\\\">\\r\\n        <ng-select\\r\\n            [items]=\\\"paymentMethods$ | async\\\"\\r\\n            bindLabel=\\\"code\\\"\\r\\n            autofocus\\r\\n            bindValue=\\\"code\\\"\\r\\n            [addTag]=\\\"true\\\"\\r\\n            formControlName=\\\"method\\\"\\r\\n        ></ng-select>\\r\\n    </vdr-form-field>\\r\\n    <vdr-form-field [label]=\\\"'order.transaction-id' | translate\\\" for=\\\"transactionId\\\">\\r\\n        <input id=\\\"transactionId\\\" type=\\\"text\\\" formControlName=\\\"transactionId\\\" />\\r\\n    </vdr-form-field>\\r\\n</form>\\r\\n<ng-template vdrDialogButtons>\\r\\n    <button type=\\\"button\\\" class=\\\"btn\\\" (click)=\\\"cancel()\\\">{{ 'common.cancel' | translate }}</button>\\r\\n    <button type=\\\"submit\\\" (click)=\\\"submit()\\\" class=\\\"btn btn-primary\\\" [disabled]=\\\"form.invalid || form.pristine\\\">\\r\\n        {{ 'order.add-payment' | translate }}  ({{ outstandingAmount | localeCurrency: currencyCode }})\\r\\n    </button>\\r\\n</ng-template>\\r\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\".ng-select{min-width:100%}\\n\"]\n            }]\n    }], function () { return [{ type: ngcc1.DataService }]; }, null); })();\n\nclass CancelOrderDialogComponent {\r\n    constructor(i18nService) {\r\n        var _a;\r\n        this.i18nService = i18nService;\r\n        this.cancelAll = true;\r\n        this.lineQuantities = {};\r\n        this.reasons = (_a = getAppConfig().cancellationReasons) !== null && _a !== void 0 ? _a : [\r\n            marker('order.cancel-reason-customer-request'),\r\n            marker('order.cancel-reason-not-available'),\r\n        ];\r\n        this.reasons = this.reasons.map(r => this.i18nService.translate(r));\r\n    }\r\n    get selectionCount() {\r\n        return Object.values(this.lineQuantities).reduce((sum, n) => sum + n, 0);\r\n    }\r\n    ngOnInit() {\r\n        this.lineQuantities = this.order.lines.reduce((result, line) => {\r\n            return Object.assign(Object.assign({}, result), { [line.id]: line.quantity });\r\n        }, {});\r\n    }\r\n    radioChanged() {\r\n        if (this.cancelAll) {\r\n            for (const line of this.order.lines) {\r\n                this.lineQuantities[line.id] = line.quantity;\r\n            }\r\n        }\r\n        else {\r\n            for (const line of this.order.lines) {\r\n                this.lineQuantities[line.id] = 0;\r\n            }\r\n        }\r\n    }\r\n    checkIfAllSelected() {\r\n        var _a;\r\n        for (const [lineId, quantity] of Object.entries(this.lineQuantities)) {\r\n            const quantityInOrder = (_a = this.order.lines.find(line => line.id === lineId)) === null || _a === void 0 ? void 0 : _a.quantity;\r\n            if (quantityInOrder && quantity < quantityInOrder) {\r\n                return;\r\n            }\r\n        }\r\n        // If we got here, all of the selected quantities are equal to the order\r\n        // line quantities, i.e. everything is selected.\r\n        this.cancelAll = true;\r\n    }\r\n    select() {\r\n        this.resolveWith({\r\n            orderId: this.order.id,\r\n            lines: this.getLineInputs(),\r\n            reason: this.reason,\r\n            cancelShipping: this.cancelAll,\r\n        });\r\n    }\r\n    cancel() {\r\n        this.resolveWith();\r\n    }\r\n    getLineInputs() {\r\n        if (this.order.active) {\r\n            return;\r\n        }\r\n        return Object.entries(this.lineQuantities)\r\n            .map(([orderLineId, quantity]) => ({\r\n            orderLineId,\r\n            quantity,\r\n        }))\r\n            .filter(l => 0 < l.quantity);\r\n    }\r\n}\nCancelOrderDialogComponent.fac = function CancelOrderDialogComponent_Factory(t) { return new (t || CancelOrderDialogComponent)(ngcc0.directiveInject(ngcc1.I18nService)); };\nCancelOrderDialogComponent.cmp = /*@__PURE__*/ ngcc0.defineComponent({ type: CancelOrderDialogComponent, selectors: [[\"vdr-cancel-order-dialog\"]], decls: 30, vars: 23, consts: [[\"vdrDialogTitle\", \"\"], [1, \"fulfillment-wrapper\"], [1, \"order-lines\"], [1, \"table\"], [\"class\", \"order-line\", 3, \"is-disabled\", \"is-cancelled\", 4, \"ngFor\", \"ngForOf\"], [1, \"cancellation-details\"], [4, \"ngIf\"], [1, \"clr-control-label\"], [\"bindLabel\", \"name\", \"autofocus\", \"\", \"bindValue\", \"id\", 3, \"items\", \"addTag\", \"ngModel\", \"ngModelChange\"], [\"vdrDialogButtons\", \"\"], [1, \"order-line\"], [1, \"align-middle\", \"thumb\"], [3, \"src\"], [1, \"align-middle\", \"name\"], [1, \"align-middle\", \"sku\"], [1, \"align-middle\", \"quantity\"], [1, \"align-middle\", \"fulfil\"], [\"type\", \"number\", \"min\", \"0\", 3, \"ngModel\", \"disabled\", \"max\", \"ngModelChange\", \"input\", 4, \"ngIf\", \"ngIfElse\"], [\"nonEditable\", \"\"], [\"type\", \"number\", \"min\", \"0\", 3, \"ngModel\", \"disabled\", \"max\", \"ngModelChange\", \"input\"], [\"type\", \"radio\", \"clrRadio\", \"\", \"name\", \"options\", 3, \"value\", \"ngModel\", \"ngModelChange\"], [\"type\", \"button\", 1, \"btn\", 3, \"click\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", 3, \"disabled\", \"click\"]], template: function CancelOrderDialogComponent_Template(rf, ctx) { if (rf & 1) {\n        ngcc0.template(0, CancelOrderDialogComponent_ng_template_0_Template, 2, 3, \"ng-template\", 0);\n        ngcc0.elementStart(1, \"div\", 1);\n        ngcc0.elementStart(2, \"div\", 2);\n        ngcc0.elementStart(3, \"table\", 3);\n        ngcc0.elementStart(4, \"thead\");\n        ngcc0.elementStart(5, \"tr\");\n        ngcc0.element(6, \"th\");\n        ngcc0.elementStart(7, \"th\");\n        ngcc0.text(8);\n        ngcc0.pipe(9, \"translate\");\n        ngcc0.elementEnd();\n        ngcc0.elementStart(10, \"th\");\n        ngcc0.text(11);\n        ngcc0.pipe(12, \"translate\");\n        ngcc0.elementEnd();\n        ngcc0.elementStart(13, \"th\");\n        ngcc0.text(14);\n        ngcc0.pipe(15, \"translate\");\n        ngcc0.elementEnd();\n        ngcc0.elementStart(16, \"th\");\n        ngcc0.text(17);\n        ngcc0.pipe(18, \"translate\");\n        ngcc0.elementEnd();\n        ngcc0.elementStart(19, \"th\");\n        ngcc0.text(20);\n        ngcc0.pipe(21, \"translate\");\n        ngcc0.elementEnd();\n        ngcc0.elementEnd();\n        ngcc0.elementEnd();\n        ngcc0.template(22, CancelOrderDialogComponent_tr_22_Template, 17, 17, \"tr\", 4);\n        ngcc0.elementEnd();\n        ngcc0.elementEnd();\n        ngcc0.elementStart(23, \"div\", 5);\n        ngcc0.template(24, CancelOrderDialogComponent_ng_container_24_Template, 11, 10, \"ng-container\", 6);\n        ngcc0.elementStart(25, \"label\", 7);\n        ngcc0.text(26);\n        ngcc0.pipe(27, \"translate\");\n        ngcc0.elementEnd();\n        ngcc0.elementStart(28, \"ng-select\", 8);\n        ngcc0.listener(\"ngModelChange\", function CancelOrderDialogComponent_Template_ng_select_ngModelChange_28_listener($event) { return ctx.reason = $event; });\n        ngcc0.elementEnd();\n        ngcc0.elementEnd();\n        ngcc0.elementEnd();\n        ngcc0.template(29, CancelOrderDialogComponent_ng_template_29_Template, 6, 6, \"ng-template\", 9);\n    } if (rf & 2) {\n        ngcc0.advance(8);\n        ngcc0.textInterpolate(ngcc0.pipeBind1(9, 11, \"order.product-name\"));\n        ngcc0.advance(3);\n        ngcc0.textInterpolate(ngcc0.pipeBind1(12, 13, \"order.product-sku\"));\n        ngcc0.advance(3);\n        ngcc0.textInterpolate(ngcc0.pipeBind1(15, 15, \"order.quantity\"));\n        ngcc0.advance(3);\n        ngcc0.textInterpolate(ngcc0.pipeBind1(18, 17, \"order.unit-price\"));\n        ngcc0.advance(3);\n        ngcc0.textInterpolate(ngcc0.pipeBind1(21, 19, \"order.cancel\"));\n        ngcc0.advance(2);\n        ngcc0.property(\"ngForOf\", ctx.order.lines);\n        ngcc0.advance(2);\n        ngcc0.property(\"ngIf\", ctx.order.active !== true);\n        ngcc0.advance(2);\n        ngcc0.textInterpolate(ngcc0.pipeBind1(27, 21, \"order.cancellation-reason\"));\n        ngcc0.advance(2);\n        ngcc0.property(\"items\", ctx.reasons)(\"addTag\", true)(\"ngModel\", ctx.reason);\n    } }, directives: [ngcc1.DialogTitleDirective, ngcc5.NgForOf, ngcc5.NgIf, ngcc6.ClrLabel, ngcc3.NgSelectComponent, ngcc2.NgControlStatus, ngcc2.NgModel, ngcc1.DialogButtonsDirective, ngcc1.FormFieldControlDirective, ngcc2.MinValidator, ngcc2.NumberValueAccessor, ngcc2.MaxValidator, ngcc2.DefaultValueAccessor, ngcc6.ClrRadioWrapper, ngcc2.RadioControlValueAccessor, ngcc6.ClrRadio], pipes: [ngcc4.TranslatePipe, ngcc1.AssetPreviewPipe, ngcc1.LocaleCurrencyPipe], styles: [\"[_nghost-%COMP%]{height:100%;display:flex;min-height:64vh}.fulfillment-wrapper[_ngcontent-%COMP%]{flex:1}@media screen and (min-width: 768px){.fulfillment-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:row}}@media screen and (min-width: 768px){.fulfillment-wrapper[_ngcontent-%COMP%]   .cancellation-details[_ngcontent-%COMP%]{margin-top:0;margin-left:24px;width:250px}}.fulfillment-wrapper[_ngcontent-%COMP%]   .order-lines[_ngcontent-%COMP%]{flex:1;overflow-y:auto}.fulfillment-wrapper[_ngcontent-%COMP%]   .order-lines[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{margin-top:0}.fulfillment-wrapper[_ngcontent-%COMP%]   tr.ignore[_ngcontent-%COMP%]{color:var(--color-grey-300)}.fulfillment-wrapper[_ngcontent-%COMP%]   .is-cancelled[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-decoration:line-through;background-color:var(--color-component-bg-200)}.fulfillment-wrapper[_ngcontent-%COMP%]   .is-disabled[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .fulfillment-wrapper[_ngcontent-%COMP%]   .is-disabled[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background-color:var(--color-component-bg-200)}\"], changeDetection: 0 });\r\nCancelOrderDialogComponent.ctorParameters = () => [\r\n    { type: I18nService }\r\n];\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ngcc0.setClassMetadata(CancelOrderDialogComponent, [{\n        type: Component,\n        args: [{\n                selector: 'vdr-cancel-order-dialog',\n                template: \"<ng-template vdrDialogTitle>{{ 'order.cancel-order' | translate }}</ng-template>\\r\\n\\r\\n<div class=\\\"fulfillment-wrapper\\\">\\r\\n    <div class=\\\"order-lines\\\">\\r\\n        <table class=\\\"table\\\">\\r\\n            <thead>\\r\\n                <tr>\\r\\n                    <th></th>\\r\\n                    <th>{{ 'order.product-name' | translate }}</th>\\r\\n                    <th>{{ 'order.product-sku' | translate }}</th>\\r\\n                    <th>{{ 'order.quantity' | translate }}</th>\\r\\n                    <th>{{ 'order.unit-price' | translate }}</th>\\r\\n                    <th>{{ 'order.cancel' | translate }}</th>\\r\\n                </tr>\\r\\n            </thead>\\r\\n            <tr\\r\\n                *ngFor=\\\"let line of order.lines\\\"\\r\\n                class=\\\"order-line\\\"\\r\\n                [class.is-disabled]=\\\"cancelAll\\\"\\r\\n                [class.is-cancelled]=\\\"line.quantity === 0\\\"\\r\\n            >\\r\\n                <td class=\\\"align-middle thumb\\\">\\r\\n                    <img [src]=\\\"line.featuredAsset | assetPreview: 'tiny'\\\" />\\r\\n                </td>\\r\\n                <td class=\\\"align-middle name\\\">{{ line.productVariant.name }}</td>\\r\\n                <td class=\\\"align-middle sku\\\">{{ line.productVariant.sku }}</td>\\r\\n                <td class=\\\"align-middle quantity\\\">{{ line.quantity }}</td>\\r\\n                <td class=\\\"align-middle quantity\\\">\\r\\n                    {{ line.unitPriceWithTax | localeCurrency: order.currencyCode }}\\r\\n                </td>\\r\\n                <td class=\\\"align-middle fulfil\\\">\\r\\n                    <input\\r\\n                        *ngIf=\\\"line.quantity > 0 && !order.active; else nonEditable\\\"\\r\\n                        [(ngModel)]=\\\"lineQuantities[line.id]\\\"\\r\\n                        (input)=\\\"checkIfAllSelected()\\\"\\r\\n                        [disabled]=\\\"cancelAll\\\"\\r\\n                        type=\\\"number\\\"\\r\\n                        [max]=\\\"line.quantity\\\"\\r\\n                        min=\\\"0\\\"\\r\\n                    />\\r\\n                    <ng-template #nonEditable>{{ line.quantity }}</ng-template>\\r\\n                </td>\\r\\n            </tr>\\r\\n        </table>\\r\\n    </div>\\r\\n    <div class=\\\"cancellation-details\\\">\\r\\n        <ng-container *ngIf=\\\"order.active !== true\\\">\\r\\n            <clr-radio-wrapper>\\r\\n                <input\\r\\n                    type=\\\"radio\\\"\\r\\n                    clrRadio\\r\\n                    [value]=\\\"true\\\"\\r\\n                    [(ngModel)]=\\\"cancelAll\\\"\\r\\n                    name=\\\"options\\\"\\r\\n                    (ngModelChange)=\\\"radioChanged()\\\"\\r\\n                />\\r\\n                <label>{{ 'order.cancel-entire-order' | translate }}</label>\\r\\n            </clr-radio-wrapper>\\r\\n            <clr-radio-wrapper>\\r\\n                <input\\r\\n                    type=\\\"radio\\\"\\r\\n                    clrRadio\\r\\n                    [value]=\\\"false\\\"\\r\\n                    [(ngModel)]=\\\"cancelAll\\\"\\r\\n                    name=\\\"options\\\"\\r\\n                    (ngModelChange)=\\\"radioChanged()\\\"\\r\\n                />\\r\\n                <label>{{ 'order.cancel-specified-items' | translate }}</label>\\r\\n            </clr-radio-wrapper>\\r\\n        </ng-container>\\r\\n        <label class=\\\"clr-control-label\\\">{{ 'order.cancellation-reason' | translate }}</label>\\r\\n        <ng-select\\r\\n            [items]=\\\"reasons\\\"\\r\\n            bindLabel=\\\"name\\\"\\r\\n            autofocus\\r\\n            bindValue=\\\"id\\\"\\r\\n            [addTag]=\\\"true\\\"\\r\\n            [(ngModel)]=\\\"reason\\\"\\r\\n        ></ng-select>\\r\\n    </div>\\r\\n</div>\\r\\n\\r\\n<ng-template vdrDialogButtons>\\r\\n    <button type=\\\"button\\\" class=\\\"btn\\\" (click)=\\\"cancel()\\\">{{ 'common.cancel' | translate }}</button>\\r\\n    <button\\r\\n        type=\\\"submit\\\"\\r\\n        (click)=\\\"select()\\\"\\r\\n        [disabled]=\\\"!reason || (!order.active && selectionCount === 0)\\\"\\r\\n        class=\\\"btn btn-primary\\\"\\r\\n    >\\r\\n        <ng-container *ngIf=\\\"!order.active\\\">\\r\\n            {{ 'order.cancel-selected-items' | translate }}\\r\\n        </ng-container>\\r\\n        <ng-container *ngIf=\\\"order.active\\\">\\r\\n            {{ 'order.cancel-order' | translate }}\\r\\n        </ng-container>\\r\\n    </button>\\r\\n</ng-template>\\r\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\":host{height:100%;display:flex;min-height:64vh}.fulfillment-wrapper{flex:1}@media screen and (min-width: 768px){.fulfillment-wrapper{display:flex;flex-direction:row}}@media screen and (min-width: 768px){.fulfillment-wrapper .cancellation-details{margin-top:0;margin-left:24px;width:250px}}.fulfillment-wrapper .order-lines{flex:1;overflow-y:auto}.fulfillment-wrapper .order-lines table{margin-top:0}.fulfillment-wrapper tr.ignore{color:var(--color-grey-300)}.fulfillment-wrapper .is-cancelled td{text-decoration:line-through;background-color:var(--color-component-bg-200)}.fulfillment-wrapper .is-disabled td,.fulfillment-wrapper .is-disabled td input{background-color:var(--color-component-bg-200)}\\n\"]\n            }]\n    }], function () { return [{ type: ngcc1.I18nService }]; }, null); })();\n\nclass CouponCodeSelectorComponent {\r\n    constructor(dataService) {\r\n        this.dataService = dataService;\r\n        this.addCouponCode = new EventEmitter();\r\n        this.removeCouponCode = new EventEmitter();\r\n        this.couponCodeInput$ = new Subject();\r\n    }\r\n    ngOnInit() {\r\n        var _a;\r\n        this.availableCouponCodes$ = concat(this.couponCodeInput$.pipe(distinctUntilChanged(), switchMap(term => this.dataService.promotion.getPromotions(10, 0, {\r\n            couponCode: { contains: term },\r\n        }).single$), map(({ promotions }) => \r\n        // tslint:disable-next-line:no-non-null-assertion\r\n        promotions.items.map(p => ({ code: p.couponCode, promotionName: p.name }))), startWith([])));\r\n        if (!this.control) {\r\n            this.control = new FormControl((_a = this.couponCodes) !== null && _a !== void 0 ? _a : []);\r\n        }\r\n    }\r\n}\nCouponCodeSelectorComponent.fac = function CouponCodeSelectorComponent_Factory(t) { return new (t || CouponCodeSelectorComponent)(ngcc0.directiveInject(ngcc1.DataService)); };\nCouponCodeSelectorComponent.cmp = /*@__PURE__*/ ngcc0.defineComponent({ type: CouponCodeSelectorComponent, selectors: [[\"vdr-coupon-code-selector\"]], inputs: { control: \"control\", couponCodes: \"couponCodes\" }, outputs: { addCouponCode: \"addCouponCode\", removeCouponCode: \"removeCouponCode\" }, decls: 3, vars: 9, consts: [[\"appendTo\", \"body\", \"bindLabel\", \"code\", \"bindValue\", \"code\", \"typeToSearchText\", \"\", 3, \"items\", \"addTag\", \"multiple\", \"hideSelected\", \"minTermLength\", \"typeahead\", \"formControl\", \"add\", \"remove\"], [\"ng-option-tmp\", \"\"]], template: function CouponCodeSelectorComponent_Template(rf, ctx) { if (rf & 1) {\n        ngcc0.elementStart(0, \"ng-select\", 0);\n        ngcc0.listener(\"add\", function CouponCodeSelectorComponent_Template_ng_select_add_0_listener($event) { return ctx.addCouponCode.emit($event.code); })(\"remove\", function CouponCodeSelectorComponent_Template_ng_select_remove_0_listener($event) { return ctx.removeCouponCode.emit($event.value == null ? null : $event.value.code); });\n        ngcc0.pipe(1, \"async\");\n        ngcc0.template(2, CouponCodeSelectorComponent_ng_template_2_Template, 3, 2, \"ng-template\", 1);\n        ngcc0.elementEnd();\n    } if (rf & 2) {\n        ngcc0.property(\"items\", ngcc0.pipeBind1(1, 7, ctx.availableCouponCodes$))(\"addTag\", false)(\"multiple\", true)(\"hideSelected\", true)(\"minTermLength\", 2)(\"typeahead\", ctx.couponCodeInput$)(\"formControl\", ctx.control);\n    } }, directives: [ngcc3.NgSelectComponent, ngcc2.NgControlStatus, ngcc2.FormControlDirective, ngcc3.f, ngcc1.ChipComponent], pipes: [ngcc5.AsyncPipe], styles: [\"\"], changeDetection: 0 });\r\nCouponCodeSelectorComponent.ctorParameters = () => [\r\n    { type: DataService }\r\n];\r\nCouponCodeSelectorComponent.propDecorators = {\r\n    couponCodes: [{ type: Input }],\r\n    control: [{ type: Input }],\r\n    addCouponCode: [{ type: Output }],\r\n    removeCouponCode: [{ type: Output }]\r\n};\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ngcc0.setClassMetadata(CouponCodeSelectorComponent, [{\n        type: Component,\n        args: [{\n                selector: 'vdr-coupon-code-selector',\n                template: \"<ng-select\\r\\n    [items]=\\\"availableCouponCodes$ | async\\\"\\r\\n    appendTo=\\\"body\\\"\\r\\n    bindLabel=\\\"code\\\"\\r\\n    bindValue=\\\"code\\\"\\r\\n    [addTag]=\\\"false\\\"\\r\\n    [multiple]=\\\"true\\\"\\r\\n    [hideSelected]=\\\"true\\\"\\r\\n    [minTermLength]=\\\"2\\\"\\r\\n    typeToSearchText=\\\"\\\"\\r\\n    [typeahead]=\\\"couponCodeInput$\\\"\\r\\n    [formControl]=\\\"control\\\"\\r\\n    (add)=\\\"addCouponCode.emit($event.code)\\\"\\r\\n    (remove)=\\\"removeCouponCode.emit($event.value?.code)\\\"\\r\\n>\\r\\n    <ng-template ng-option-tmp let-item=\\\"item\\\">\\r\\n        <vdr-chip>{{ item.code }}</vdr-chip>\\r\\n        {{ item.promotionName }}\\r\\n    </ng-template>\\r\\n</ng-select>\\r\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\"\"]\n            }]\n    }], function () { return [{ type: ngcc1.DataService }]; }, { addCouponCode: [{\n            type: Output\n        }], removeCouponCode: [{\n            type: Output\n        }], control: [{\n            type: Input\n        }], couponCodes: [{\n            type: Input\n        }] }); })();\n\nclass OrderStateSelectDialogComponent {\r\n    constructor() {\r\n        this.nextStates = [];\r\n        this.message = '';\r\n        this.selectedState = '';\r\n    }\r\n    select() {\r\n        if (this.selectedState) {\r\n            this.resolveWith(this.selectedState);\r\n        }\r\n    }\r\n    cancel() {\r\n        this.resolveWith();\r\n    }\r\n}\nOrderStateSelectDialogComponent.fac = function OrderStateSelectDialogComponent_Factory(t) { return new (t || OrderStateSelectDialogComponent)(); };\nOrderStateSelectDialogComponent.cmp = /*@__PURE__*/ ngcc0.defineComponent({ type: OrderStateSelectDialogComponent, selectors: [[\"vdr-order-state-select-dialog\"]], decls: 8, vars: 5, consts: [[\"vdrDialogTitle\", \"\"], [\"clrSelect\", \"\", \"name\", \"state\", 3, \"ngModel\", \"ngModelChange\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"vdrDialogButtons\", \"\"], [3, \"value\"], [\"type\", \"submit\", \"class\", \"btn btn-secondary\", 3, \"click\", 4, \"ngIf\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", 3, \"disabled\", \"click\"], [\"type\", \"submit\", 1, \"btn\", \"btn-secondary\", 3, \"click\"]], template: function OrderStateSelectDialogComponent_Template(rf, ctx) { if (rf & 1) {\n        ngcc0.template(0, OrderStateSelectDialogComponent_ng_template_0_Template, 2, 3, \"ng-template\", 0);\n        ngcc0.elementStart(1, \"p\");\n        ngcc0.text(2);\n        ngcc0.pipe(3, \"translate\");\n        ngcc0.elementEnd();\n        ngcc0.elementStart(4, \"clr-select-container\");\n        ngcc0.elementStart(5, \"select\", 1);\n        ngcc0.listener(\"ngModelChange\", function OrderStateSelectDialogComponent_Template_select_ngModelChange_5_listener($event) { return ctx.selectedState = $event; });\n        ngcc0.template(6, OrderStateSelectDialogComponent_option_6_Template, 4, 6, \"option\", 2);\n        ngcc0.elementEnd();\n        ngcc0.elementEnd();\n        ngcc0.template(7, OrderStateSelectDialogComponent_ng_template_7_Template, 6, 12, \"ng-template\", 3);\n    } if (rf & 2) {\n        ngcc0.advance(2);\n        ngcc0.textInterpolate(ngcc0.pipeBind1(3, 3, ctx.message));\n        ngcc0.advance(3);\n        ngcc0.property(\"ngModel\", ctx.selectedState);\n        ngcc0.advance(1);\n        ngcc0.property(\"ngForOf\", ctx.nextStates);\n    } }, directives: [ngcc1.DialogTitleDirective, ngcc6.ClrSelectContainer, ngcc1.FormFieldControlDirective, ngcc2.SelectControlValueAccessor, ngcc6.ClrSelect, ngcc2.NgControlStatus, ngcc2.NgModel, ngcc5.NgForOf, ngcc1.DialogButtonsDirective, ngcc2.NgSelectOption, ngcc2.NgSelectMultipleOption, ngcc5.NgIf], pipes: [ngcc4.TranslatePipe, ngcc1.StateI18nTokenPipe], styles: [\"\"], changeDetection: 0 });\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ngcc0.setClassMetadata(OrderStateSelectDialogComponent, [{\n        type: Component,\n        args: [{\n                selector: 'vdr-order-state-select-dialog',\n                template: \"<ng-template vdrDialogTitle>{{ 'order.select-state' | translate }}</ng-template>\\r\\n<p>{{ message | translate }}</p>\\r\\n<clr-select-container>\\r\\n    <select clrSelect name=\\\"state\\\" [(ngModel)]=\\\"selectedState\\\">\\r\\n        <option *ngFor=\\\"let state of nextStates\\\" [value]=\\\"state\\\">\\r\\n            {{ state | stateI18nToken | translate }}\\r\\n        </option>\\r\\n    </select>\\r\\n</clr-select-container>\\r\\n<ng-template vdrDialogButtons>\\r\\n    <button type=\\\"submit\\\" *ngIf=\\\"cancellable\\\" (click)=\\\"cancel()\\\" class=\\\"btn btn-secondary\\\">\\r\\n        {{ 'common.cancel' | translate }}\\r\\n    </button>\\r\\n    <button type=\\\"submit\\\" (click)=\\\"select()\\\" class=\\\"btn btn-primary\\\" [disabled]=\\\"!selectedState\\\">\\r\\n        {{ 'order.transition-to-state' | translate: { state: (selectedState | stateI18nToken | translate) } }}\\r\\n    </button>\\r\\n</ng-template>\\r\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\"\"]\n            }]\n    }], function () { return []; }, null); })();\n\nclass OrderTransitionService {\r\n    constructor(dataService, modalService, notificationService, i18nService) {\r\n        this.dataService = dataService;\r\n        this.modalService = modalService;\r\n        this.notificationService = notificationService;\r\n        this.i18nService = i18nService;\r\n    }\r\n    /**\r\n     * Attempts to transition the Order to the last state it was in before it was transitioned\r\n     * to the \"Modifying\" state. If this fails, a manual prompt is used.\r\n     */\r\n    transitionToPreModifyingState(orderId, nextStates) {\r\n        return this.getPreModifyingState(orderId).pipe(switchMap(state => {\r\n            const manualTransitionOptions = {\r\n                orderId,\r\n                nextStates,\r\n                message: this.i18nService.translate(marker('order.unable-to-transition-to-state-try-another'), { state }),\r\n                cancellable: false,\r\n                retry: 10,\r\n            };\r\n            if (state) {\r\n                return this.transitionToStateOrThrow(orderId, state).pipe(catchError(err => this.manuallyTransitionToState(manualTransitionOptions)));\r\n            }\r\n            else {\r\n                return this.manuallyTransitionToState(manualTransitionOptions);\r\n            }\r\n        }));\r\n    }\r\n    /**\r\n     * Displays a modal for manually selecting the next state.\r\n     */\r\n    manuallyTransitionToState(options) {\r\n        return this.modalService\r\n            .fromComponent(OrderStateSelectDialogComponent, {\r\n            locals: {\r\n                nextStates: options.nextStates,\r\n                cancellable: options.cancellable,\r\n                message: options.message,\r\n            },\r\n            closable: false,\r\n            size: 'md',\r\n        })\r\n            .pipe(switchMap(result => {\r\n            if (result) {\r\n                return this.transitionToStateOrThrow(options.orderId, result);\r\n            }\r\n            else {\r\n                if (!options.cancellable) {\r\n                    throw new Error(`An order state must be selected`);\r\n                }\r\n                else {\r\n                    return EMPTY;\r\n                }\r\n            }\r\n        }), retryWhen(errors => errors.pipe(delay(2000), take(options.retry))));\r\n    }\r\n    /**\r\n     * Attempts to get the last state the Order was in before it was transitioned\r\n     * to the \"Modifying\" state.\r\n     */\r\n    getPreModifyingState(orderId) {\r\n        return this.dataService.order\r\n            .getOrderHistory(orderId, {\r\n            filter: {\r\n                type: {\r\n                    eq: HistoryEntryType.ORDER_STATE_TRANSITION,\r\n                },\r\n            },\r\n            sort: {\r\n                createdAt: SortOrder.DESC,\r\n            },\r\n        })\r\n            .mapSingle(result => result.order)\r\n            .pipe(map(result => {\r\n            const item = result === null || result === void 0 ? void 0 : result.history.items.find(i => i.data.to === 'Modifying');\r\n            if (item) {\r\n                return item.data.from;\r\n            }\r\n            else {\r\n                return;\r\n            }\r\n        }));\r\n    }\r\n    transitionToStateOrThrow(orderId, state) {\r\n        return this.dataService.order.transitionToState(orderId, state).pipe(map(({ transitionOrderToState }) => {\r\n            switch (transitionOrderToState === null || transitionOrderToState === void 0 ? void 0 : transitionOrderToState.__typename) {\r\n                case 'Order':\r\n                    return transitionOrderToState === null || transitionOrderToState === void 0 ? void 0 : transitionOrderToState.state;\r\n                case 'OrderStateTransitionError':\r\n                    this.notificationService.error(transitionOrderToState === null || transitionOrderToState === void 0 ? void 0 : transitionOrderToState.transitionError);\r\n                    throw new Error(transitionOrderToState === null || transitionOrderToState === void 0 ? void 0 : transitionOrderToState.transitionError);\r\n            }\r\n        }));\r\n    }\r\n}\nOrderTransitionService.fac = function OrderTransitionService_Factory(t) { return new (t || OrderTransitionService)(ngcc0.inject(ngcc1.DataService), ngcc0.inject(ngcc1.ModalService), ngcc0.inject(ngcc1.NotificationService), ngcc0.inject(ngcc1.I18nService)); };\r\nOrderTransitionService.prov = i0.defineInjectable({ factory: function OrderTransitionService_Factory() { return new OrderTransitionService(i0.inject(i1.DataService), i0.inject(i1.ModalService), i0.inject(i1.NotificationService), i0.inject(i1.I18nService)); }, token: OrderTransitionService, providedIn: \"root\" });\r\nOrderTransitionService.ctorParameters = () => [\r\n    { type: DataService },\r\n    { type: ModalService },\r\n    { type: NotificationService },\r\n    { type: I18nService }\r\n];\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ngcc0.setClassMetadata(OrderTransitionService, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: ngcc1.DataService }, { type: ngcc1.ModalService }, { type: ngcc1.NotificationService }, { type: ngcc1.I18nService }]; }, null); })();\n\nconst GET_CUSTOMER_ADDRESSES = gql `\r\n    query GetCustomerAddresses($customerId: ID!) {\r\n        customer(id: $customerId) {\r\n            id\r\n            addresses {\r\n                ...Address\r\n            }\r\n        }\r\n    }\r\n    ${ADDRESS_FRAGMENT}\r\n`;\n\nclass SelectAddressDialogComponent {\r\n    constructor(dataService, formBuilder) {\r\n        this.dataService = dataService;\r\n        this.formBuilder = formBuilder;\r\n        this.useExisting = true;\r\n        this.createNew = false;\r\n    }\r\n    ngOnInit() {\r\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q, _r, _s, _t;\r\n        this.addressForm = this.formBuilder.group({\r\n            fullName: [(_b = (_a = this.currentAddress) === null || _a === void 0 ? void 0 : _a.fullName) !== null && _b !== void 0 ? _b : ''],\r\n            company: [(_d = (_c = this.currentAddress) === null || _c === void 0 ? void 0 : _c.company) !== null && _d !== void 0 ? _d : ''],\r\n            streetLine1: [(_f = (_e = this.currentAddress) === null || _e === void 0 ? void 0 : _e.streetLine1) !== null && _f !== void 0 ? _f : '', Validators.required],\r\n            streetLine2: [(_h = (_g = this.currentAddress) === null || _g === void 0 ? void 0 : _g.streetLine2) !== null && _h !== void 0 ? _h : ''],\r\n            city: [(_k = (_j = this.currentAddress) === null || _j === void 0 ? void 0 : _j.city) !== null && _k !== void 0 ? _k : '', Validators.required],\r\n            province: [(_m = (_l = this.currentAddress) === null || _l === void 0 ? void 0 : _l.province) !== null && _m !== void 0 ? _m : ''],\r\n            postalCode: [(_p = (_o = this.currentAddress) === null || _o === void 0 ? void 0 : _o.postalCode) !== null && _p !== void 0 ? _p : '', Validators.required],\r\n            countryCode: [(_r = (_q = this.currentAddress) === null || _q === void 0 ? void 0 : _q.countryCode) !== null && _r !== void 0 ? _r : '', Validators.required],\r\n            phoneNumber: [(_t = (_s = this.currentAddress) === null || _s === void 0 ? void 0 : _s.phoneNumber) !== null && _t !== void 0 ? _t : ''],\r\n        });\r\n        this.useExisting = !!this.customerId;\r\n        this.addresses$ = this.customerId\r\n            ? this.dataService\r\n                .query(GET_CUSTOMER_ADDRESSES, { customerId: this.customerId })\r\n                .mapSingle(({ customer }) => { var _a; return (_a = customer === null || customer === void 0 ? void 0 : customer.addresses) !== null && _a !== void 0 ? _a : []; })\r\n                .pipe(tap(addresses => {\r\n                if (this.currentAddress) {\r\n                    this.selectedAddress = addresses.find(a => {\r\n                        var _a, _b;\r\n                        return a.streetLine1 === ((_a = this.currentAddress) === null || _a === void 0 ? void 0 : _a.streetLine1) &&\r\n                            a.postalCode === ((_b = this.currentAddress) === null || _b === void 0 ? void 0 : _b.postalCode);\r\n                    });\r\n                }\r\n                if (addresses.length === 0) {\r\n                    this.createNew = true;\r\n                    this.useExisting = false;\r\n                }\r\n            }))\r\n            : of([]);\r\n        this.availableCountries$ = this.dataService.settings\r\n            .getAvailableCountries()\r\n            .mapSingle(({ countries }) => countries.items);\r\n    }\r\n    trackByFn(item) {\r\n        return item.id;\r\n    }\r\n    addressIdFn(item) {\r\n        return item.streetLine1 + item.postalCode;\r\n    }\r\n    cancel() {\r\n        this.resolveWith();\r\n    }\r\n    select() {\r\n        if (this.useExisting && this.selectedAddress) {\r\n            this.resolveWith(Object.assign(Object.assign({}, pick(this.selectedAddress, [\r\n                'fullName',\r\n                'company',\r\n                'streetLine1',\r\n                'streetLine2',\r\n                'city',\r\n                'province',\r\n                'phoneNumber',\r\n                'postalCode',\r\n            ])), { countryCode: this.selectedAddress.country.code }));\r\n        }\r\n        if (this.createNew && this.addressForm.valid) {\r\n            const formValue = this.addressForm.value;\r\n            this.resolveWith(formValue);\r\n        }\r\n    }\r\n}\nSelectAddressDialogComponent.fac = function SelectAddressDialogComponent_Factory(t) { return new (t || SelectAddressDialogComponent)(ngcc0.directiveInject(ngcc1.DataService), ngcc0.directiveInject(ngcc2.FormBuilder)); };\nSelectAddressDialogComponent.cmp = /*@__PURE__*/ ngcc0.defineComponent({ type: SelectAddressDialogComponent, selectors: [[\"vdr-select-address-dialog\"]], decls: 4, vars: 3, consts: [[\"vdrDialogTitle\", \"\"], [4, \"ngIf\"], [\"vdrDialogButtons\", \"\"], [\"clrTabLink\", \"\"], [3, \"clrIfActive\", \"clrIfActiveChange\"], [1, \"block\", \"mt4\", 3, \"idFn\", \"selectedItemId\", \"selectItem\"], [3, \"item\", 4, \"ngFor\", \"ngForOf\"], [3, \"item\"], [3, \"address\"], [3, \"formGroup\", \"availableCountries\"], [\"type\", \"button\", 1, \"btn\", 3, \"click\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", 3, \"disabled\", \"click\"]], template: function SelectAddressDialogComponent_Template(rf, ctx) { if (rf & 1) {\n        ngcc0.template(0, SelectAddressDialogComponent_ng_template_0_Template, 2, 3, \"ng-template\", 0);\n        ngcc0.template(1, SelectAddressDialogComponent_clr_tabs_1_Template, 7, 5, \"clr-tabs\", 1);\n        ngcc0.pipe(2, \"async\");\n        ngcc0.template(3, SelectAddressDialogComponent_ng_template_3_Template, 6, 7, \"ng-template\", 2);\n    } if (rf & 2) {\n        ngcc0.advance(1);\n        ngcc0.property(\"ngIf\", ngcc0.pipeBind1(2, 1, ctx.addresses$));\n    } }, directives: [ngcc1.DialogTitleDirective, ngcc5.NgIf, ngcc1.DialogButtonsDirective, ngcc6.ClrTabs, ngcc6.lrTabsWillyWonka, ngcc6.ClrTab, ngcc6.ClrTabLink, ngcc6.lrActiveOompaLoompa, ngcc6.ClrIfActive, ngcc6.ClrTabContent, ngcc1.RadioCardFieldsetComponent, ngcc5.NgForOf, ngcc1.RadioCardComponent, ngcc1.FormattedAddressComponent, ngcc1.AddressFormComponent, ngcc2.NgControlStatusGroup, ngcc2.FormGroupDirective], pipes: [ngcc5.AsyncPipe, ngcc4.TranslatePipe], styles: [\"\"], changeDetection: 0 });\r\nSelectAddressDialogComponent.ctorParameters = () => [\r\n    { type: DataService },\r\n    { type: FormBuilder }\r\n];\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ngcc0.setClassMetadata(SelectAddressDialogComponent, [{\n        type: Component,\n        args: [{\n                selector: 'vdr-select-address-dialog',\n                template: \"<ng-template vdrDialogTitle>{{ 'order.select-address' | translate }}</ng-template>\\r\\n\\r\\n<clr-tabs *ngIf=\\\"addresses$ | async as addresses\\\">\\r\\n    <clr-tab *ngIf=\\\"customerId && addresses.length\\\">\\r\\n        <button clrTabLink>{{ 'order.existing-address' | translate }}</button>\\r\\n        <ng-template [(clrIfActive)]=\\\"useExisting\\\">\\r\\n            <clr-tab-content>\\r\\n                <vdr-radio-card-fieldset\\r\\n                    class=\\\"block mt4\\\"\\r\\n                    [idFn]=\\\"addressIdFn\\\"\\r\\n                    [selectedItemId]=\\\"selectedAddress && addressIdFn(selectedAddress)\\\"\\r\\n                    (selectItem)=\\\"selectedAddress = $event\\\"\\r\\n                >\\r\\n                    <vdr-radio-card *ngFor=\\\"let address of addresses\\\" [item]=\\\"address\\\">\\r\\n                        <vdr-formatted-address [address]=\\\"address\\\"></vdr-formatted-address>\\r\\n                    </vdr-radio-card>\\r\\n                </vdr-radio-card-fieldset>\\r\\n            </clr-tab-content>\\r\\n        </ng-template>\\r\\n    </clr-tab>\\r\\n    <clr-tab>\\r\\n        <button clrTabLink>{{ 'customer.create-new-address' | translate }}</button>\\r\\n\\r\\n        <ng-template [(clrIfActive)]=\\\"createNew\\\">\\r\\n            <clr-tab-content>\\r\\n                <vdr-address-form\\r\\n                    [formGroup]=\\\"addressForm\\\"\\r\\n                    [availableCountries]=\\\"availableCountries$ | async\\\"\\r\\n                ></vdr-address-form>\\r\\n            </clr-tab-content>\\r\\n        </ng-template>\\r\\n    </clr-tab>\\r\\n</clr-tabs>\\r\\n\\r\\n<ng-template vdrDialogButtons>\\r\\n    <button type=\\\"button\\\" class=\\\"btn\\\" (click)=\\\"cancel()\\\">{{ 'common.cancel' | translate }}</button>\\r\\n    <button\\r\\n        type=\\\"submit\\\"\\r\\n        (click)=\\\"select()\\\"\\r\\n        [disabled]=\\\"(useExisting && !selectedAddress) || (createNew && addressForm.invalid)\\\"\\r\\n        class=\\\"btn btn-primary\\\"\\r\\n    >\\r\\n        {{ 'common.okay' | translate }}\\r\\n    </button>\\r\\n</ng-template>\\r\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\"\"]\n            }]\n    }], function () { return [{ type: ngcc1.DataService }, { type: ngcc2.FormBuilder }]; }, null); })();\n\nclass SelectCustomerDialogComponent {\r\n    constructor(dataService, formBuilder) {\r\n        this.dataService = dataService;\r\n        this.formBuilder = formBuilder;\r\n        this.isLoading = false;\r\n        this.input$ = new Subject();\r\n        this.selectedCustomer = [];\r\n        this.useExisting = true;\r\n        this.createNew = false;\r\n        this.customerForm = this.formBuilder.group({\r\n            title: '',\r\n            firstName: ['', Validators.required],\r\n            lastName: ['', Validators.required],\r\n            phoneNumber: '',\r\n            emailAddress: ['', [Validators.required, Validators.email]],\r\n        });\r\n    }\r\n    ngOnInit() {\r\n        this.customers$ = concat(of([]), // default items\r\n        this.input$.pipe(debounceTime(200), distinctUntilChanged(), tap(() => (this.isLoading = true)), switchMap(term => this.dataService.customer\r\n            .getCustomerList(10, 0, term)\r\n            .mapStream(({ customers }) => customers.items)\r\n            .pipe(catchError(() => of([])), // empty list on error\r\n        tap(() => (this.isLoading = false))))));\r\n    }\r\n    trackByFn(item) {\r\n        return item.id;\r\n    }\r\n    cancel() {\r\n        this.resolveWith();\r\n    }\r\n    select() {\r\n        if (this.useExisting && this.selectedCustomer.length === 1) {\r\n            this.resolveWith(this.selectedCustomer[0]);\r\n        }\r\n        if (this.createNew && this.customerForm.valid) {\r\n            const formValue = this.customerForm.value;\r\n            this.resolveWith(formValue);\r\n        }\r\n    }\r\n}\nSelectCustomerDialogComponent.fac = function SelectCustomerDialogComponent_Factory(t) { return new (t || SelectCustomerDialogComponent)(ngcc0.directiveInject(ngcc1.DataService), ngcc0.directiveInject(ngcc2.FormBuilder)); };\nSelectCustomerDialogComponent.cmp = /*@__PURE__*/ ngcc0.defineComponent({ type: SelectCustomerDialogComponent, selectors: [[\"vdr-select-customer-dialog\"]], decls: 13, vars: 8, consts: [[\"vdrDialogTitle\", \"\"], [\"clrTabLink\", \"\"], [3, \"clrIfActive\", \"clrIfActiveChange\"], [\"vdrDialogButtons\", \"\"], [\"appendTo\", \"body\", \"bindLabel\", \"name\", 1, \"mt4\", 3, \"items\", \"addTag\", \"multiple\", \"hideSelected\", \"trackByFn\", \"minTermLength\", \"loading\", \"typeahead\", \"ngModel\", \"ngModelChange\"], [\"ng-label-tmp\", \"\"], [\"ng-option-tmp\", \"\"], [\"shape\", \"user\", 1, \"is-solid\"], [1, \"ml2\", \"mr2\"], [3, \"formGroup\"], [\"for\", \"title\", 3, \"label\"], [\"id\", \"title\", \"type\", \"text\", \"formControlName\", \"title\"], [\"for\", \"firstName\", 3, \"label\"], [\"id\", \"firstName\", \"type\", \"text\", \"formControlName\", \"firstName\"], [\"for\", \"lastName\", 3, \"label\"], [\"id\", \"lastName\", \"type\", \"text\", \"formControlName\", \"lastName\"], [\"for\", \"emailAddress\", 3, \"label\"], [\"id\", \"emailAddress\", \"type\", \"text\", \"formControlName\", \"emailAddress\"], [\"for\", \"phoneNumber\", 3, \"label\"], [\"id\", \"phoneNumber\", \"type\", \"text\", \"formControlName\", \"phoneNumber\"], [\"type\", \"button\", 1, \"btn\", 3, \"click\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", 3, \"disabled\", \"click\"]], template: function SelectCustomerDialogComponent_Template(rf, ctx) { if (rf & 1) {\n        ngcc0.template(0, SelectCustomerDialogComponent_ng_template_0_Template, 2, 3, \"ng-template\", 0);\n        ngcc0.elementStart(1, \"clr-tabs\");\n        ngcc0.elementStart(2, \"clr-tab\");\n        ngcc0.elementStart(3, \"button\", 1);\n        ngcc0.text(4);\n        ngcc0.pipe(5, \"translate\");\n        ngcc0.elementEnd();\n        ngcc0.template(6, SelectCustomerDialogComponent_ng_template_6_Template, 5, 11, \"ng-template\", 2);\n        ngcc0.listener(\"clrIfActiveChange\", function SelectCustomerDialogComponent_Template_ng_template_clrIfActiveChange_6_listener($event) { return ctx.useExisting = $event; });\n        ngcc0.elementEnd();\n        ngcc0.elementStart(7, \"clr-tab\");\n        ngcc0.elementStart(8, \"button\", 1);\n        ngcc0.text(9);\n        ngcc0.pipe(10, \"translate\");\n        ngcc0.elementEnd();\n        ngcc0.template(11, SelectCustomerDialogComponent_ng_template_11_Template, 17, 16, \"ng-template\", 2);\n        ngcc0.listener(\"clrIfActiveChange\", function SelectCustomerDialogComponent_Template_ng_template_clrIfActiveChange_11_listener($event) { return ctx.createNew = $event; });\n        ngcc0.elementEnd();\n        ngcc0.elementEnd();\n        ngcc0.template(12, SelectCustomerDialogComponent_ng_template_12_Template, 6, 7, \"ng-template\", 3);\n    } if (rf & 2) {\n        ngcc0.advance(4);\n        ngcc0.textInterpolate(ngcc0.pipeBind1(5, 4, \"order.existing-customer\"));\n        ngcc0.advance(2);\n        ngcc0.property(\"clrIfActive\", ctx.useExisting);\n        ngcc0.advance(3);\n        ngcc0.textInterpolate(ngcc0.pipeBind1(10, 6, \"customer.create-new-customer\"));\n        ngcc0.advance(2);\n        ngcc0.property(\"clrIfActive\", ctx.createNew);\n    } }, directives: [ngcc1.DialogTitleDirective, ngcc6.ClrTabs, ngcc6.lrTabsWillyWonka, ngcc6.ClrTab, ngcc6.ClrTabLink, ngcc6.lrActiveOompaLoompa, ngcc6.ClrIfActive, ngcc1.DialogButtonsDirective, ngcc6.ClrTabContent, ngcc3.NgSelectComponent, ngcc2.NgControlStatus, ngcc2.NgModel, ngcc3.h, ngcc3.f, ngcc6.ClrIconCustomTag, ngcc1.ChipComponent, ngcc2.NgNoValidate, ngcc2.NgControlStatusGroup, ngcc2.FormGroupDirective, ngcc1.FormFieldComponent, ngcc1.FormFieldControlDirective, ngcc2.DefaultValueAccessor, ngcc2.FormControlName], pipes: [ngcc4.TranslatePipe, ngcc5.AsyncPipe], styles: [\"\"], changeDetection: 0 });\r\nSelectCustomerDialogComponent.ctorParameters = () => [\r\n    { type: DataService },\r\n    { type: FormBuilder }\r\n];\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ngcc0.setClassMetadata(SelectCustomerDialogComponent, [{\n        type: Component,\n        args: [{\n                selector: 'vdr-select-customer-dialog',\n                template: \"<ng-template vdrDialogTitle>{{ 'order.set-customer-for-order' | translate }}</ng-template>\\r\\n\\r\\n<clr-tabs>\\r\\n    <clr-tab>\\r\\n        <button clrTabLink>{{ 'order.existing-customer' | translate }}</button>\\r\\n\\r\\n        <ng-template [(clrIfActive)]=\\\"useExisting\\\">\\r\\n            <clr-tab-content>\\r\\n                <ng-select\\r\\n                    [items]=\\\"customers$ | async\\\"\\r\\n                    appendTo=\\\"body\\\"\\r\\n                    bindLabel=\\\"name\\\"\\r\\n                    [addTag]=\\\"false\\\"\\r\\n                    [multiple]=\\\"true\\\"\\r\\n                    [hideSelected]=\\\"true\\\"\\r\\n                    [trackByFn]=\\\"trackByFn\\\"\\r\\n                    [minTermLength]=\\\"2\\\"\\r\\n                    [loading]=\\\"isLoading\\\"\\r\\n                    [typeahead]=\\\"input$\\\"\\r\\n                    [(ngModel)]=\\\"selectedCustomer\\\"\\r\\n                    class=\\\"mt4\\\"\\r\\n                >\\r\\n                    <ng-template ng-label-tmp let-item=\\\"item\\\" let-clear=\\\"clear\\\">\\r\\n                        <clr-icon shape=\\\"user\\\" class=\\\"is-solid\\\"></clr-icon\\r\\n                        ><span class=\\\"ml2 mr2\\\">{{ item.firstName }} {{ item.lastName }}</span>\\r\\n                        <vdr-chip>{{ item.emailAddress }}</vdr-chip>\\r\\n                    </ng-template>\\r\\n                    <ng-template ng-option-tmp let-item=\\\"item\\\">\\r\\n                        <clr-icon shape=\\\"user\\\" class=\\\"is-solid\\\"></clr-icon\\r\\n                        ><span class=\\\"ml2 mr2\\\">{{ item.firstName }} {{ item.lastName }}</span>\\r\\n                        <vdr-chip>{{ item.emailAddress }}</vdr-chip>\\r\\n                    </ng-template>\\r\\n                </ng-select>\\r\\n            </clr-tab-content>\\r\\n        </ng-template>\\r\\n    </clr-tab>\\r\\n    <clr-tab>\\r\\n        <button clrTabLink>{{ 'customer.create-new-customer' | translate }}</button>\\r\\n\\r\\n        <ng-template [(clrIfActive)]=\\\"createNew\\\">\\r\\n            <clr-tab-content>\\r\\n                <form [formGroup]=\\\"customerForm\\\">\\r\\n                <vdr-form-field [label]=\\\"'customer.title' | translate\\\" for=\\\"title\\\">\\r\\n                    <input id=\\\"title\\\" type=\\\"text\\\" formControlName=\\\"title\\\" />\\r\\n                </vdr-form-field>\\r\\n                <vdr-form-field [label]=\\\"'customer.first-name' | translate\\\" for=\\\"firstName\\\">\\r\\n                    <input id=\\\"firstName\\\" type=\\\"text\\\" formControlName=\\\"firstName\\\" />\\r\\n                </vdr-form-field>\\r\\n                <vdr-form-field [label]=\\\"'customer.last-name' | translate\\\" for=\\\"lastName\\\">\\r\\n                    <input id=\\\"lastName\\\" type=\\\"text\\\" formControlName=\\\"lastName\\\" />\\r\\n                </vdr-form-field>\\r\\n                <vdr-form-field [label]=\\\"'customer.email-address' | translate\\\" for=\\\"emailAddress\\\">\\r\\n                    <input id=\\\"emailAddress\\\" type=\\\"text\\\" formControlName=\\\"emailAddress\\\" />\\r\\n                </vdr-form-field>\\r\\n                <vdr-form-field [label]=\\\"'customer.phone-number' | translate\\\" for=\\\"phoneNumber\\\">\\r\\n                    <input id=\\\"phoneNumber\\\" type=\\\"text\\\" formControlName=\\\"phoneNumber\\\" />\\r\\n                </vdr-form-field>\\r\\n                </form>\\r\\n            </clr-tab-content>\\r\\n        </ng-template>\\r\\n    </clr-tab>\\r\\n</clr-tabs>\\r\\n\\r\\n<ng-template vdrDialogButtons>\\r\\n    <button type=\\\"button\\\" class=\\\"btn\\\" (click)=\\\"cancel()\\\">{{ 'common.cancel' | translate }}</button>\\r\\n    <button\\r\\n        type=\\\"submit\\\"\\r\\n        (click)=\\\"select()\\\"\\r\\n        [disabled]=\\\"(useExisting && selectedCustomer.length === 0) || (createNew && customerForm.invalid)\\\"\\r\\n        class=\\\"btn btn-primary\\\"\\r\\n    >\\r\\n        {{ 'common.okay' | translate }}\\r\\n    </button>\\r\\n</ng-template>\\r\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\"\"]\n            }]\n    }], function () { return [{ type: ngcc1.DataService }, { type: ngcc2.FormBuilder }]; }, null); })();\n\nclass SelectShippingMethodDialogComponent {\r\n    constructor() { }\r\n    ngOnInit() {\r\n        if (this.currentSelectionId) {\r\n            this.selectedMethod = this.eligibleShippingMethods.find(m => m.id === this.currentSelectionId);\r\n        }\r\n    }\r\n    methodIdFn(item) {\r\n        return item.id;\r\n    }\r\n    cancel() {\r\n        this.resolveWith();\r\n    }\r\n    select() {\r\n        if (this.selectedMethod) {\r\n            this.resolveWith(this.selectedMethod.id);\r\n        }\r\n    }\r\n}\nSelectShippingMethodDialogComponent.fac = function SelectShippingMethodDialogComponent_Factory(t) { return new (t || SelectShippingMethodDialogComponent)(); };\nSelectShippingMethodDialogComponent.cmp = /*@__PURE__*/ ngcc0.defineComponent({ type: SelectShippingMethodDialogComponent, selectors: [[\"vdr-select-shipping-method-dialog\"]], decls: 4, vars: 3, consts: [[\"vdrDialogTitle\", \"\"], [3, \"idFn\", \"selectedItemId\", \"selectItem\"], [3, \"item\", 4, \"ngFor\", \"ngForOf\"], [\"vdrDialogButtons\", \"\"], [3, \"item\"], [1, \"result-details\"], [3, \"label\"], [1, \"price-row\"], [3, \"value\", 4, \"ngIf\"], [3, \"value\"], [\"type\", \"button\", 1, \"btn\", 3, \"click\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", 3, \"disabled\", \"click\"]], template: function SelectShippingMethodDialogComponent_Template(rf, ctx) { if (rf & 1) {\n        ngcc0.template(0, SelectShippingMethodDialogComponent_ng_template_0_Template, 2, 3, \"ng-template\", 0);\n        ngcc0.elementStart(1, \"vdr-radio-card-fieldset\", 1);\n        ngcc0.listener(\"selectItem\", function SelectShippingMethodDialogComponent_Template_vdr_radio_card_fieldset_selectItem_1_listener($event) { return ctx.selectedMethod = $event; });\n        ngcc0.template(2, SelectShippingMethodDialogComponent_vdr_radio_card_2_Template, 15, 20, \"vdr-radio-card\", 2);\n        ngcc0.elementEnd();\n        ngcc0.template(3, SelectShippingMethodDialogComponent_ng_template_3_Template, 6, 7, \"ng-template\", 3);\n    } if (rf & 2) {\n        ngcc0.advance(1);\n        ngcc0.property(\"idFn\", ctx.methodIdFn)(\"selectedItemId\", ctx.selectedMethod == null ? null : ctx.selectedMethod.id);\n        ngcc0.advance(1);\n        ngcc0.property(\"ngForOf\", ctx.eligibleShippingMethods);\n    } }, directives: [ngcc1.DialogTitleDirective, ngcc1.RadioCardFieldsetComponent, ngcc5.NgForOf, ngcc1.DialogButtonsDirective, ngcc1.RadioCardComponent, ngcc1.LabeledDataComponent, ngcc5.NgIf, ngcc1.ObjectTreeComponent], pipes: [ngcc4.TranslatePipe, ngcc1.LocaleCurrencyPipe], styles: [\"\"], changeDetection: 0 });\r\nSelectShippingMethodDialogComponent.ctorParameters = () => [];\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ngcc0.setClassMetadata(SelectShippingMethodDialogComponent, [{\n        type: Component,\n        args: [{\n                selector: 'vdr-select-shipping-method-dialog',\n                template: \"<ng-template vdrDialogTitle>{{ 'order.select-shipping-method' | translate }}</ng-template>\\r\\n<vdr-radio-card-fieldset\\r\\n    [idFn]=\\\"methodIdFn\\\"\\r\\n    [selectedItemId]=\\\"selectedMethod?.id\\\"\\r\\n    (selectItem)=\\\"selectedMethod = $event\\\"\\r\\n>\\r\\n    <vdr-radio-card *ngFor=\\\"let quote of eligibleShippingMethods\\\" [item]=\\\"quote\\\">\\r\\n        <div class=\\\"result-details\\\">\\r\\n            <vdr-labeled-data [label]=\\\"'settings.shipping-method' | translate\\\">\\r\\n                {{ quote.name }}\\r\\n            </vdr-labeled-data>\\r\\n            <div class=\\\"price-row\\\">\\r\\n                <vdr-labeled-data [label]=\\\"'common.price' | translate\\\">\\r\\n                    {{ quote.price | localeCurrency: currencyCode }}\\r\\n                </vdr-labeled-data>\\r\\n                <vdr-labeled-data [label]=\\\"'common.price-with-tax' | translate\\\">\\r\\n                    {{ quote.priceWithTax | localeCurrency: currencyCode }}\\r\\n                </vdr-labeled-data>\\r\\n            </div>\\r\\n            <vdr-object-tree *ngIf=\\\"quote.metadata\\\" [value]=\\\"quote.metadata\\\"></vdr-object-tree>\\r\\n        </div>\\r\\n    </vdr-radio-card>\\r\\n</vdr-radio-card-fieldset>\\r\\n\\r\\n<ng-template vdrDialogButtons>\\r\\n    <button type=\\\"button\\\" class=\\\"btn\\\" (click)=\\\"cancel()\\\">{{ 'common.cancel' | translate }}</button>\\r\\n    <button\\r\\n        type=\\\"submit\\\"\\r\\n        (click)=\\\"select()\\\"\\r\\n        [disabled]=\\\"!selectedMethod\\\"\\r\\n        class=\\\"btn btn-primary\\\"\\r\\n    >\\r\\n        {{ 'common.okay' | translate }}\\r\\n    </button>\\r\\n</ng-template>\\r\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\"\"]\n            }]\n    }], function () { return []; }, null); })();\n\nclass DraftOrderDetailComponent extends BaseDetailComponent {\r\n    constructor(router, route, serverConfigService, changeDetector, dataService, notificationService, modalService, orderTransitionService) {\r\n        super(route, router, serverConfigService, dataService);\r\n        this.changeDetector = changeDetector;\r\n        this.dataService = dataService;\r\n        this.notificationService = notificationService;\r\n        this.modalService = modalService;\r\n        this.orderTransitionService = orderTransitionService;\r\n        this.detailForm = new FormGroup({});\r\n        this.fetchHistory = new Subject();\r\n        this.displayCouponCodeInput = false;\r\n    }\r\n    ngOnInit() {\r\n        this.init();\r\n        this.orderLineCustomFields = this.getCustomFieldConfig('OrderLine');\r\n        this.eligibleShippingMethods$ = this.entity$.pipe(switchMap(order => this.dataService.order\r\n            .getDraftOrderEligibleShippingMethods(order.id)\r\n            .mapSingle(({ eligibleShippingMethodsForDraftOrder }) => eligibleShippingMethodsForDraftOrder)));\r\n        this.customFields = this.getCustomFieldConfig('Order');\r\n        this.orderLineCustomFields = this.getCustomFieldConfig('OrderLine');\r\n    }\r\n    ngOnDestroy() {\r\n        this.destroy();\r\n    }\r\n    addItemToOrder(event) {\r\n        this.dataService.order.addItemToDraftOrder(this.id, event).subscribe(result => {\r\n            if (result.addItemToDraftOrder.__typename !== 'Order') {\r\n                this.notificationService.error(result.addItemToDraftOrder.message);\r\n            }\r\n        });\r\n    }\r\n    adjustOrderLine(event) {\r\n        this.dataService.order\r\n            .adjustDraftOrderLine(this.id, { orderLineId: event.lineId, quantity: event.quantity })\r\n            .subscribe(result => {\r\n            if (result.adjustDraftOrderLine.__typename !== 'Order') {\r\n                this.notificationService.error(result.adjustDraftOrderLine.message);\r\n            }\r\n        });\r\n    }\r\n    removeOrderLine(event) {\r\n        this.dataService.order.removeDraftOrderLine(this.id, event.lineId).subscribe(result => {\r\n            if (result.removeDraftOrderLine.__typename !== 'Order') {\r\n                this.notificationService.error(result.removeDraftOrderLine.message);\r\n            }\r\n        });\r\n    }\r\n    getOrderAddressLines(orderAddress) {\r\n        if (!orderAddress) {\r\n            return [];\r\n        }\r\n        return Object.values(orderAddress)\r\n            .filter(val => val !== 'OrderAddress')\r\n            .filter(line => !!line);\r\n    }\r\n    setCustomer() {\r\n        this.modalService.fromComponent(SelectCustomerDialogComponent).subscribe(result => {\r\n            if (this.hasId(result)) {\r\n                this.dataService.order\r\n                    .setCustomerForDraftOrder(this.id, { customerId: result.id })\r\n                    .subscribe();\r\n            }\r\n            else if (result) {\r\n                this.dataService.order.setCustomerForDraftOrder(this.id, { input: result }).subscribe();\r\n            }\r\n        });\r\n    }\r\n    setShippingAddress() {\r\n        this.entity$\r\n            .pipe(take(1), switchMap(order => {\r\n            var _a, _b;\r\n            return this.modalService.fromComponent(SelectAddressDialogComponent, {\r\n                locals: {\r\n                    customerId: (_a = order.customer) === null || _a === void 0 ? void 0 : _a.id,\r\n                    currentAddress: (_b = order.shippingAddress) !== null && _b !== void 0 ? _b : undefined,\r\n                },\r\n            });\r\n        }))\r\n            .subscribe(result => {\r\n            if (result) {\r\n                this.dataService.order.setDraftOrderShippingAddress(this.id, result).subscribe();\r\n            }\r\n        });\r\n    }\r\n    setBillingAddress() {\r\n        this.entity$\r\n            .pipe(take(1), switchMap(order => {\r\n            var _a, _b;\r\n            return this.modalService.fromComponent(SelectAddressDialogComponent, {\r\n                locals: {\r\n                    customerId: (_a = order.customer) === null || _a === void 0 ? void 0 : _a.id,\r\n                    currentAddress: (_b = order.billingAddress) !== null && _b !== void 0 ? _b : undefined,\r\n                },\r\n            });\r\n        }))\r\n            .subscribe(result => {\r\n            if (result) {\r\n                this.dataService.order.setDraftOrderBillingAddress(this.id, result).subscribe();\r\n            }\r\n        });\r\n    }\r\n    applyCouponCode(couponCode) {\r\n        this.dataService.order.applyCouponCodeToDraftOrder(this.id, couponCode).subscribe();\r\n    }\r\n    removeCouponCode(couponCode) {\r\n        this.dataService.order.removeCouponCodeFromDraftOrder(this.id, couponCode).subscribe();\r\n    }\r\n    setShippingMethod() {\r\n        combineLatest(this.entity$, this.eligibleShippingMethods$)\r\n            .pipe(take(1), switchMap(([order, methods]) => {\r\n            var _a, _b;\r\n            return this.modalService.fromComponent(SelectShippingMethodDialogComponent, {\r\n                locals: {\r\n                    eligibleShippingMethods: methods,\r\n                    currencyCode: order.currencyCode,\r\n                    currentSelectionId: (_b = (_a = order.shippingLines) === null || _a === void 0 ? void 0 : _a[0]) === null || _b === void 0 ? void 0 : _b.shippingMethod.id,\r\n                },\r\n            });\r\n        }))\r\n            .subscribe(result => {\r\n            if (result) {\r\n                this.dataService.order.setDraftOrderShippingMethod(this.id, result).subscribe();\r\n            }\r\n        });\r\n    }\r\n    updateCustomFields(customFieldsValue) {\r\n        this.dataService.order\r\n            .updateOrderCustomFields({\r\n            id: this.id,\r\n            customFields: customFieldsValue,\r\n        })\r\n            .subscribe();\r\n    }\r\n    deleteOrder() {\r\n        this.dataService.order.deleteDraftOrder(this.id).subscribe(({ deleteDraftOrder }) => {\r\n            if (deleteDraftOrder.result === DeletionResult.DELETED) {\r\n                this.notificationService.success(marker('common.notify-delete-success'), {\r\n                    entity: 'Order',\r\n                });\r\n                this.router.navigate(['/orders']);\r\n            }\r\n            else if (deleteDraftOrder.message) {\r\n                this.notificationService.error(deleteDraftOrder.message);\r\n            }\r\n        });\r\n    }\r\n    completeOrder() {\r\n        this.dataService.order\r\n            .transitionToState(this.id, 'ArrangingPayment')\r\n            .subscribe(({ transitionOrderToState }) => {\r\n            if ((transitionOrderToState === null || transitionOrderToState === void 0 ? void 0 : transitionOrderToState.__typename) === 'Order') {\r\n                this.router.navigate(['/orders', this.id]);\r\n            }\r\n            else if ((transitionOrderToState === null || transitionOrderToState === void 0 ? void 0 : transitionOrderToState.__typename) === 'OrderStateTransitionError') {\r\n                this.notificationService.error(transitionOrderToState.transitionError);\r\n            }\r\n        });\r\n    }\r\n    hasId(input) {\r\n        return typeof input === 'object' && !!input.id;\r\n    }\r\n    setFormValues(entity) {\r\n        // empty\r\n    }\r\n}\nDraftOrderDetailComponent.fac = function DraftOrderDetailComponent_Factory(t) { return new (t || DraftOrderDetailComponent)(ngcc0.directiveInject(ngcc7.Router), ngcc0.directiveInject(ngcc7.ActivatedRoute), ngcc0.directiveInject(ngcc1.ServerConfigService), ngcc0.directiveInject(ngcc0.ChangeDetectorRef), ngcc0.directiveInject(ngcc1.DataService), ngcc0.directiveInject(ngcc1.NotificationService), ngcc0.directiveInject(ngcc1.ModalService), ngcc0.directiveInject(OrderTransitionService)); };\nDraftOrderDetailComponent.cmp = /*@__PURE__*/ ngcc0.defineComponent({ type: DraftOrderDetailComponent, selectors: [[\"vdr-draft-order-detail\"]], features: [ngcc0.InheritDefinitionFeature], decls: 4, vars: 6, consts: [[4, \"ngIf\"], [1, \"flex\", \"clr-align-items-center\"], [3, \"entity\"], [3, \"state\"], [1, \"btn\", \"btn-primary\", 3, \"disabled\", \"click\"], [\"shape\", \"check\"], [\"vdrDropdownTrigger\", \"\", 1, \"icon-button\"], [\"shape\", \"ellipsis-vertical\"], [\"vdrPosition\", \"bottom-right\"], [\"type\", \"button\", \"vdrDropdownItem\", \"\", 1, \"btn\", 3, \"click\"], [\"shape\", \"trash\", 1, \"is-danger\"], [1, \"clr-row\"], [1, \"clr-col-lg-8\"], [3, \"orderLineCustomFields\", \"currencyCode\", \"addItem\"], [3, \"order\", \"orderLineCustomFields\", \"isDraft\", \"adjust\", \"remove\"], [1, \"flex\"], [\"class\", \"btn btn-link btn-sm mr2\", 3, \"click\", 4, \"ngIf\"], [1, \"clr-col-lg-4\", \"order-cards\"], [1, \"card\"], [1, \"card-header\"], [\"shape\", \"unknown-status\", \"class\", \"is-warning\", 4, \"ngIf\"], [\"shape\", \"check\", \"class\", \"is-success\", 4, \"ngIf\"], [1, \"card-block\"], [1, \"card-text\"], [\"class\", \"block mb2\", 3, \"customer\", 4, \"ngIf\"], [1, \"btn\", \"btn-link\", \"btn-sm\", 3, \"click\"], [1, \"card-title\"], [\"class\", \"block mb2\", 3, \"address\", 4, \"ngIf\"], [4, \"ngFor\", \"ngForOf\"], [3, \"customFieldsConfig\", \"customFieldValues\", \"updateClick\"], [1, \"btn\", \"btn-link\", \"btn-sm\", \"mr2\", 3, \"click\"], [3, \"couponCodes\", \"addCouponCode\", \"removeCouponCode\"], [1, \"table\"], [\"shape\", \"unknown-status\", 1, \"is-warning\"], [\"shape\", \"check\", 1, \"is-success\"], [1, \"block\", \"mb2\", 3, \"customer\"], [1, \"block\", \"mb2\", 3, \"address\"]], template: function DraftOrderDetailComponent_Template(rf, ctx) { if (rf & 1) {\n        ngcc0.template(0, DraftOrderDetailComponent_vdr_action_bar_0_Template, 19, 11, \"vdr-action-bar\", 0);\n        ngcc0.pipe(1, \"async\");\n        ngcc0.template(2, DraftOrderDetailComponent_div_2_Template, 52, 41, \"div\", 0);\n        ngcc0.pipe(3, \"async\");\n    } if (rf & 2) {\n        ngcc0.property(\"ngIf\", ngcc0.pipeBind1(1, 2, ctx.entity$));\n        ngcc0.advance(2);\n        ngcc0.property(\"ngIf\", ngcc0.pipeBind1(3, 4, ctx.entity$));\n    } }, directives: function () { return [ngcc5.NgIf, ngcc1.ActionBarComponent, ngcc1.ActionBarLeftComponent, ngcc1.EntityInfoComponent, ngcc1.OrderStateLabelComponent, ngcc1.ActionBarRightComponent, ngcc6.ClrIconCustomTag, ngcc1.DropdownComponent, ngcc1.DropdownTriggerDirective, ngcc1.DropdownMenuComponent, ngcc1.DropdownItemDirective, DraftOrderVariantSelectorComponent, OrderTableComponent, ngcc5.NgForOf, OrderCustomFieldsCardComponent, ngcc6.ClrLabel, CouponCodeSelectorComponent, ngcc1.CustomerLabelComponent, ngcc1.FormattedAddressComponent]; }, pipes: function () { return [ngcc5.AsyncPipe, ngcc4.TranslatePipe, ngcc5.PercentPipe, ngcc1.LocaleCurrencyPipe]; }, styles: [\"\"], changeDetection: 0 });\r\nDraftOrderDetailComponent.ctorParameters = () => [\r\n    { type: Router },\r\n    { type: ActivatedRoute },\r\n    { type: ServerConfigService },\r\n    { type: ChangeDetectorRef },\r\n    { type: DataService },\r\n    { type: NotificationService },\r\n    { type: ModalService },\r\n    { type: OrderTransitionService }\r\n];\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ngcc0.setClassMetadata(DraftOrderDetailComponent, [{\n        type: Component,\n        args: [{\n                selector: 'vdr-draft-order-detail',\n                template: \"<vdr-action-bar *ngIf=\\\"entity$ | async as order\\\">\\r\\n    <vdr-ab-left>\\r\\n        <div class=\\\"flex clr-align-items-center\\\">\\r\\n            <vdr-entity-info [entity]=\\\"entity$ | async\\\"></vdr-entity-info>\\r\\n            <vdr-order-state-label [state]=\\\"order.state\\\"></vdr-order-state-label>\\r\\n        </div>\\r\\n    </vdr-ab-left>\\r\\n\\r\\n    <vdr-ab-right>\\r\\n        <button\\r\\n            class=\\\"btn btn-primary\\\"\\r\\n            (click)=\\\"completeOrder()\\\"\\r\\n            [disabled]=\\\"!order.customer || !order.lines.length || !order.shippingLines.length\\\"\\r\\n        >\\r\\n            <clr-icon shape=\\\"check\\\"></clr-icon>\\r\\n            {{ 'order.complete-draft-order' | translate }}\\r\\n        </button>\\r\\n        <vdr-dropdown>\\r\\n            <button class=\\\"icon-button\\\" vdrDropdownTrigger>\\r\\n                <clr-icon shape=\\\"ellipsis-vertical\\\"></clr-icon>\\r\\n            </button>\\r\\n            <vdr-dropdown-menu vdrPosition=\\\"bottom-right\\\">\\r\\n                <button type=\\\"button\\\" class=\\\"btn\\\" vdrDropdownItem (click)=\\\"deleteOrder()\\\">\\r\\n                    <clr-icon shape=\\\"trash\\\" class=\\\"is-danger\\\"></clr-icon>\\r\\n                    {{ 'order.delete-draft-order' | translate }}\\r\\n                </button>\\r\\n            </vdr-dropdown-menu>\\r\\n        </vdr-dropdown>\\r\\n    </vdr-ab-right>\\r\\n</vdr-action-bar>\\r\\n\\r\\n<div *ngIf=\\\"entity$ | async as order\\\">\\r\\n    <div class=\\\"clr-row\\\">\\r\\n        <div class=\\\"clr-col-lg-8\\\">\\r\\n            <vdr-draft-order-variant-selector\\r\\n                [orderLineCustomFields]=\\\"orderLineCustomFields\\\"\\r\\n                [currencyCode]=\\\"order.currencyCode\\\"\\r\\n                (addItem)=\\\"addItemToOrder($event)\\\"\\r\\n            ></vdr-draft-order-variant-selector>\\r\\n            <vdr-order-table\\r\\n                [order]=\\\"order\\\"\\r\\n                [orderLineCustomFields]=\\\"orderLineCustomFields\\\"\\r\\n                [isDraft]=\\\"true\\\"\\r\\n                (adjust)=\\\"adjustOrderLine($event)\\\"\\r\\n                (remove)=\\\"removeOrderLine($event)\\\"\\r\\n            ></vdr-order-table>\\r\\n            <div class=\\\"flex\\\">\\r\\n                <button\\r\\n                    *ngIf=\\\"order.couponCodes.length === 0 && !displayCouponCodeInput\\\"\\r\\n                    class=\\\"btn btn-link btn-sm mr2\\\"\\r\\n                    (click)=\\\"displayCouponCodeInput = !displayCouponCodeInput\\\"\\r\\n                >\\r\\n                    {{ 'order.set-coupon-codes' | translate }}\\r\\n                </button>\\r\\n                <div *ngIf=\\\"order.couponCodes.length || displayCouponCodeInput\\\">\\r\\n                    <label>{{ 'order.set-coupon-codes' | translate }}</label>\\r\\n                    <vdr-coupon-code-selector\\r\\n                        [couponCodes]=\\\"order.couponCodes\\\"\\r\\n                        (addCouponCode)=\\\"applyCouponCode($event)\\\"\\r\\n                        (removeCouponCode)=\\\"removeCouponCode($event)\\\"\\r\\n                    ></vdr-coupon-code-selector>\\r\\n                </div>\\r\\n            </div>\\r\\n            <ng-container *ngIf=\\\"order.taxSummary.length\\\">\\r\\n                <h4>{{ 'order.tax-summary' | translate }}</h4>\\r\\n                <table class=\\\"table\\\">\\r\\n                    <thead>\\r\\n                        <tr>\\r\\n                            <th>{{ 'common.description' | translate }}</th>\\r\\n                            <th>{{ 'order.tax-rate' | translate }}</th>\\r\\n                            <th>{{ 'order.tax-base' | translate }}</th>\\r\\n                            <th>{{ 'order.tax-total' | translate }}</th>\\r\\n                        </tr>\\r\\n                    </thead>\\r\\n                    <tbody>\\r\\n                        <tr *ngFor=\\\"let row of order.taxSummary\\\">\\r\\n                            <td>{{ row.description }}</td>\\r\\n                            <td>{{ row.taxRate / 100 | percent }}</td>\\r\\n                            <td>{{ row.taxBase | localeCurrency: order.currencyCode }}</td>\\r\\n                            <td>{{ row.taxTotal | localeCurrency: order.currencyCode }}</td>\\r\\n                        </tr>\\r\\n                    </tbody>\\r\\n                </table>\\r\\n            </ng-container>\\r\\n        </div>\\r\\n        <div class=\\\"clr-col-lg-4 order-cards\\\">\\r\\n            <div class=\\\"card\\\">\\r\\n                <div class=\\\"card-header\\\">\\r\\n                    <clr-icon *ngIf=\\\"!order.customer\\\" shape=\\\"unknown-status\\\" class=\\\"is-warning\\\"></clr-icon>\\r\\n                    <clr-icon *ngIf=\\\"order.customer\\\" shape=\\\"check\\\" class=\\\"is-success\\\"></clr-icon>\\r\\n                    {{ 'order.customer' | translate }}\\r\\n                </div>\\r\\n                <div class=\\\"card-block\\\">\\r\\n                    <div class=\\\"card-text\\\">\\r\\n                        <vdr-customer-label\\r\\n                            class=\\\"block mb2\\\"\\r\\n                            *ngIf=\\\"order.customer\\\"\\r\\n                            [customer]=\\\"order.customer\\\"\\r\\n                        ></vdr-customer-label>\\r\\n                        <button class=\\\"btn btn-link btn-sm\\\" (click)=\\\"setCustomer()\\\">\\r\\n                            {{ 'order.set-customer-for-order' | translate }}\\r\\n                        </button>\\r\\n                    </div>\\r\\n                </div>\\r\\n                <div class=\\\"card-block\\\">\\r\\n                    <h4 class=\\\"card-title\\\">\\r\\n                        <clr-icon\\r\\n                            *ngIf=\\\"!order.billingAddress.streetLine1\\\"\\r\\n                            shape=\\\"unknown-status\\\"\\r\\n                            class=\\\"is-warning\\\"\\r\\n                        ></clr-icon>\\r\\n                        <clr-icon\\r\\n                            *ngIf=\\\"order.billingAddress.streetLine1\\\"\\r\\n                            shape=\\\"check\\\"\\r\\n                            class=\\\"is-success\\\"\\r\\n                        ></clr-icon>\\r\\n                        {{ 'order.billing-address' | translate }}\\r\\n                    </h4>\\r\\n                    <div class=\\\"card-text\\\">\\r\\n                        <vdr-formatted-address\\r\\n                            class=\\\"block mb2\\\"\\r\\n                            *ngIf=\\\"order.billingAddress\\\"\\r\\n                            [address]=\\\"order.billingAddress\\\"\\r\\n                        ></vdr-formatted-address>\\r\\n                        <button class=\\\"btn btn-link btn-sm\\\" (click)=\\\"setBillingAddress()\\\">\\r\\n                            {{ 'order.set-billing-address' | translate }}\\r\\n                        </button>\\r\\n                    </div>\\r\\n                </div>\\r\\n            </div>\\r\\n            <div class=\\\"card\\\">\\r\\n                <div class=\\\"card-header\\\">\\r\\n                    <clr-icon\\r\\n                        *ngIf=\\\"!order.shippingAddress.streetLine1 || !order.shippingLines.length\\\"\\r\\n                        shape=\\\"unknown-status\\\"\\r\\n                        class=\\\"is-warning\\\"\\r\\n                    ></clr-icon>\\r\\n                    <clr-icon\\r\\n                        *ngIf=\\\"order.shippingAddress.streetLine1 && order.shippingLines.length\\\"\\r\\n                        shape=\\\"check\\\"\\r\\n                        class=\\\"is-success\\\"\\r\\n                    ></clr-icon>\\r\\n                    {{ 'order.shipping' | translate }}\\r\\n                </div>\\r\\n                <div class=\\\"card-block\\\">\\r\\n                    <div class=\\\"card-text\\\">\\r\\n                        <vdr-formatted-address\\r\\n                            class=\\\"block mb2\\\"\\r\\n                            *ngIf=\\\"order.shippingAddress\\\"\\r\\n                            [address]=\\\"order.shippingAddress\\\"\\r\\n                        ></vdr-formatted-address>\\r\\n                        <button class=\\\"btn btn-link btn-sm\\\" (click)=\\\"setShippingAddress()\\\">\\r\\n                            {{ 'order.set-shipping-address' | translate }}\\r\\n                        </button>\\r\\n                    </div>\\r\\n                </div>\\r\\n                <div class=\\\"card-block\\\">\\r\\n                    <div class=\\\"card-text\\\">\\r\\n                        <div *ngFor=\\\"let shippingLine of order.shippingLines\\\">\\r\\n                            {{ shippingLine.shippingMethod.name }}\\r\\n                        </div>\\r\\n                        <button class=\\\"btn btn-link btn-sm\\\" (click)=\\\"setShippingMethod()\\\">\\r\\n                            {{ 'order.set-shipping-method' | translate }}\\r\\n                        </button>\\r\\n                    </div>\\r\\n                </div>\\r\\n            </div>\\r\\n            <vdr-order-custom-fields-card\\r\\n                [customFieldsConfig]=\\\"customFields\\\"\\r\\n                [customFieldValues]=\\\"order.customFields\\\"\\r\\n                (updateClick)=\\\"updateCustomFields($event)\\\"\\r\\n            ></vdr-order-custom-fields-card>\\r\\n        </div>\\r\\n    </div>\\r\\n</div>\\r\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\"\"]\n            }]\n    }], function () { return [{ type: ngcc7.Router }, { type: ngcc7.ActivatedRoute }, { type: ngcc1.ServerConfigService }, { type: ngcc0.ChangeDetectorRef }, { type: ngcc1.DataService }, { type: ngcc1.NotificationService }, { type: ngcc1.ModalService }, { type: OrderTransitionService }]; }, null); })();\n\nclass DraftOrderVariantSelectorComponent {\r\n    constructor(dataService) {\r\n        this.dataService = dataService;\r\n        this.addItem = new EventEmitter();\r\n        this.customFieldsFormGroup = new FormGroup({});\r\n        this.selectedVariantId$ = new Subject();\r\n        this.quantity = 1;\r\n    }\r\n    ngOnInit() {\r\n        this.selectedVariant$ = this.selectedVariantId$.pipe(switchMap(id => {\r\n            if (id) {\r\n                return this.dataService.product\r\n                    .getProductVariant(id)\r\n                    .mapSingle(({ productVariant }) => productVariant);\r\n            }\r\n            else {\r\n                return [undefined];\r\n            }\r\n        }));\r\n        for (const customField of this.orderLineCustomFields) {\r\n            this.customFieldsFormGroup.addControl(customField.name, new FormControl(''));\r\n        }\r\n    }\r\n    addItemClick(selectedVariant) {\r\n        if (selectedVariant) {\r\n            this.addItem.emit({\r\n                productVariantId: selectedVariant.id,\r\n                quantity: this.quantity,\r\n                customFields: this.orderLineCustomFields.length\r\n                    ? this.customFieldsFormGroup.value\r\n                    : undefined,\r\n            });\r\n            this.selectedVariantId$.next(undefined);\r\n            this.customFieldsFormGroup.reset();\r\n        }\r\n    }\r\n}\nDraftOrderVariantSelectorComponent.fac = function DraftOrderVariantSelectorComponent_Factory(t) { return new (t || DraftOrderVariantSelectorComponent)(ngcc0.directiveInject(ngcc1.DataService)); };\nDraftOrderVariantSelectorComponent.cmp = /*@__PURE__*/ ngcc0.defineComponent({ type: DraftOrderVariantSelectorComponent, selectors: [[\"vdr-draft-order-variant-selector\"]], inputs: { currencyCode: \"currencyCode\", orderLineCustomFields: \"orderLineCustomFields\" }, outputs: { addItem: \"addItem\" }, decls: 8, vars: 6, consts: [[1, \"card\"], [1, \"card-block\"], [1, \"card-title\"], [3, \"productSelected\"], [\"class\", \"card-block\", 4, \"ngIf\"], [1, \"variant-details\"], [1, \"mr2\", 3, \"src\"], [1, \"details\"], [1, \"small\"], [1, \"details\", \"ml4\"], [1, \"flex-spacer\"], [1, \"small\", 3, \"title\"], [\"type\", \"number\", \"min\", \"0\", 3, \"disabled\", \"ngModel\", \"ngModelChange\"], [1, \"btn\", \"btn-small\", \"btn-primary\", 3, \"disabled\", \"click\"], [4, \"ngIf\"], [\"class\", \"custom-field\", 4, \"ngFor\", \"ngForOf\"], [1, \"custom-field\"], [3, \"compact\", \"readonly\", \"customField\", \"customFieldsFormGroup\"]], template: function DraftOrderVariantSelectorComponent_Template(rf, ctx) { if (rf & 1) {\n        ngcc0.elementStart(0, \"div\", 0);\n        ngcc0.elementStart(1, \"div\", 1);\n        ngcc0.elementStart(2, \"h4\", 2);\n        ngcc0.text(3);\n        ngcc0.pipe(4, \"translate\");\n        ngcc0.elementEnd();\n        ngcc0.elementStart(5, \"vdr-product-selector\", 3);\n        ngcc0.listener(\"productSelected\", function DraftOrderVariantSelectorComponent_Template_vdr_product_selector_productSelected_5_listener($event) { return ctx.selectedVariantId$.next($event.productVariantId); });\n        ngcc0.elementEnd();\n        ngcc0.elementEnd();\n        ngcc0.template(6, DraftOrderVariantSelectorComponent_div_6_Template, 31, 32, \"div\", 4);\n        ngcc0.pipe(7, \"async\");\n        ngcc0.elementEnd();\n    } if (rf & 2) {\n        ngcc0.advance(3);\n        ngcc0.textInterpolate(ngcc0.pipeBind1(4, 2, \"order.add-item-to-order\"));\n        ngcc0.advance(3);\n        ngcc0.property(\"ngIf\", ngcc0.pipeBind1(7, 4, ctx.selectedVariant$));\n    } }, directives: [ngcc1.ProductSelectorComponent, ngcc5.NgIf, ngcc1.FormFieldControlDirective, ngcc2.MinValidator, ngcc2.NumberValueAccessor, ngcc2.DefaultValueAccessor, ngcc2.NgControlStatus, ngcc2.NgModel, ngcc5.NgForOf, ngcc1.CustomFieldControlComponent], pipes: [ngcc4.TranslatePipe, ngcc5.AsyncPipe, ngcc1.AssetPreviewPipe, ngcc1.LocaleCurrencyPipe], styles: [\".variant-details[_ngcontent-%COMP%]{display:flex;align-items:center}.variant-details[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:var(--border-radius-img);width:32px;height:32px}.variant-details[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]{font-size:.65rem;line-height:.7rem}.variant-details[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:48px;margin:0 6px}.variant-details[_ngcontent-%COMP%]   .small[_ngcontent-%COMP%]{font-size:11px;color:var(--color-text-300)}\"], changeDetection: 0 });\r\nDraftOrderVariantSelectorComponent.ctorParameters = () => [\r\n    { type: DataService }\r\n];\r\nDraftOrderVariantSelectorComponent.propDecorators = {\r\n    currencyCode: [{ type: Input }],\r\n    orderLineCustomFields: [{ type: Input }],\r\n    addItem: [{ type: Output }]\r\n};\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ngcc0.setClassMetadata(DraftOrderVariantSelectorComponent, [{\n        type: Component,\n        args: [{\n                selector: 'vdr-draft-order-variant-selector',\n                template: \"<div class=\\\"card\\\">\\r\\n    <div class=\\\"card-block\\\">\\r\\n        <h4 class=\\\"card-title\\\">{{ 'order.add-item-to-order' | translate }}</h4>\\r\\n        <vdr-product-selector\\r\\n            (productSelected)=\\\"selectedVariantId$.next($event.productVariantId)\\\"\\r\\n        ></vdr-product-selector>\\r\\n    </div>\\r\\n    <div class=\\\"card-block\\\" *ngIf=\\\"selectedVariant$ | async as selectedVariant\\\">\\r\\n        <div class=\\\"variant-details\\\">\\r\\n            <img class=\\\"mr2\\\" [src]=\\\"selectedVariant.featuredAsset || selectedVariant.product.featuredAsset | assetPreview: 32\\\">\\r\\n            <div class=\\\"details\\\">\\r\\n                <div>{{ selectedVariant?.name }}</div>\\r\\n                <div class=\\\"small\\\">{{ selectedVariant?.sku }}</div>\\r\\n            </div>\\r\\n            <div class=\\\"details ml4\\\">\\r\\n                <div class=\\\"small\\\">\\r\\n                    {{ 'catalog.stock-on-hand' | translate }}: {{ selectedVariant.stockOnHand }}\\r\\n                </div>\\r\\n                <div class=\\\"small\\\">\\r\\n                    {{ 'catalog.stock-allocated' | translate }}: {{ selectedVariant.stockAllocated }}\\r\\n                </div>\\r\\n            </div>\\r\\n            <div class=\\\"flex-spacer\\\"></div>\\r\\n            <div class=\\\"details\\\">\\r\\n                <div>{{ selectedVariant?.priceWithTax | localeCurrency: currencyCode }}</div>\\r\\n                <div class=\\\"small\\\" [title]=\\\"'order.net-price' | translate\\\">\\r\\n                    {{ selectedVariant?.price | localeCurrency: currencyCode }}\\r\\n                </div>\\r\\n            </div>\\r\\n            <div>\\r\\n                <input [disabled]=\\\"!selectedVariant\\\" type=\\\"number\\\" min=\\\"0\\\" [(ngModel)]=\\\"quantity\\\" />\\r\\n            </div>\\r\\n            <button\\r\\n                [disabled]=\\\"!selectedVariant\\\"\\r\\n                class=\\\"btn btn-small btn-primary\\\"\\r\\n                (click)=\\\"addItemClick(selectedVariant)\\\"\\r\\n            >\\r\\n                {{ 'order.add-item-to-order' | translate }}\\r\\n            </button>\\r\\n        </div>\\r\\n        <ng-container *ngIf=\\\"orderLineCustomFields.length\\\">\\r\\n            <div class=\\\"custom-field\\\" *ngFor=\\\"let field of orderLineCustomFields\\\">\\r\\n                <vdr-custom-field-control\\r\\n                    [compact]=\\\"true\\\"\\r\\n                    [readonly]=\\\"false\\\"\\r\\n                    [customField]=\\\"field\\\"\\r\\n                    [customFieldsFormGroup]=\\\"customFieldsFormGroup\\\"\\r\\n                ></vdr-custom-field-control>\\r\\n            </div>\\r\\n        </ng-container>\\r\\n    </div>\\r\\n</div>\\r\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\".variant-details{display:flex;align-items:center}.variant-details img{border-radius:var(--border-radius-img);width:32px;height:32px}.variant-details .details{font-size:.65rem;line-height:.7rem}.variant-details input{width:48px;margin:0 6px}.variant-details .small{font-size:11px;color:var(--color-text-300)}\\n\"]\n            }]\n    }], function () { return [{ type: ngcc1.DataService }]; }, { addItem: [{\n            type: Output\n        }], currencyCode: [{\n            type: Input\n        }], orderLineCustomFields: [{\n            type: Input\n        }] }); })();\n\nclass FulfillOrderDialogComponent {\r\n    constructor(dataService, changeDetector) {\r\n        this.dataService = dataService;\r\n        this.changeDetector = changeDetector;\r\n        this.fulfillmentHandlerControl = new FormControl();\r\n        this.fulfillmentQuantities = {};\r\n    }\r\n    ngOnInit() {\r\n        this.dataService.settings.getGlobalSettings().single$.subscribe(({ globalSettings }) => {\r\n            this.fulfillmentQuantities = this.order.lines.reduce((result, line) => {\r\n                const fulfillCount = this.getFulfillableCount(line, globalSettings.trackInventory);\r\n                return Object.assign(Object.assign({}, result), { [line.id]: { fulfillCount, max: fulfillCount } });\r\n            }, {});\r\n            this.changeDetector.markForCheck();\r\n        });\r\n        this.dataService.shippingMethod\r\n            .getShippingMethodOperations()\r\n            .mapSingle(data => data.fulfillmentHandlers)\r\n            .subscribe(handlers => {\r\n            this.fulfillmentHandlerDef =\r\n                handlers.find(h => { var _a, _b; return h.code === ((_b = (_a = this.order.shippingLines[0]) === null || _a === void 0 ? void 0 : _a.shippingMethod) === null || _b === void 0 ? void 0 : _b.fulfillmentHandlerCode); }) || handlers[0];\r\n            this.fulfillmentHandler = configurableDefinitionToInstance(this.fulfillmentHandlerDef);\r\n            this.fulfillmentHandlerControl.patchValue(this.fulfillmentHandler);\r\n            this.changeDetector.markForCheck();\r\n        });\r\n    }\r\n    getFulfillableCount(line, globalTrackInventory) {\r\n        const { trackInventory, stockOnHand } = line.productVariant;\r\n        const effectiveTracInventory = trackInventory === GlobalFlag.INHERIT ? globalTrackInventory : trackInventory === GlobalFlag.TRUE;\r\n        const unfulfilledCount = this.getUnfulfilledCount(line);\r\n        return effectiveTracInventory ? Math.min(unfulfilledCount, stockOnHand) : unfulfilledCount;\r\n    }\r\n    getUnfulfilledCount(line) {\r\n        var _a, _b;\r\n        const fulfilled = (_b = (_a = line.fulfillments) === null || _a === void 0 ? void 0 : _a.map(f => f.summary).flat().filter(row => row.orderLine.id === line.id).reduce((sum, row) => sum + row.quantity, 0)) !== null && _b !== void 0 ? _b : 0;\r\n        return line.quantity - fulfilled;\r\n    }\r\n    canSubmit() {\r\n        const totalCount = Object.values(this.fulfillmentQuantities).reduce((total, { fulfillCount }) => total + fulfillCount, 0);\r\n        const formIsValid = configurableOperationValueIsValid(this.fulfillmentHandlerDef, this.fulfillmentHandlerControl.value) && this.fulfillmentHandlerControl.valid;\r\n        return formIsValid && 0 < totalCount;\r\n    }\r\n    select() {\r\n        const lines = Object.entries(this.fulfillmentQuantities).map(([orderLineId, { fulfillCount }]) => ({\r\n            orderLineId,\r\n            quantity: fulfillCount,\r\n        }));\r\n        this.resolveWith({\r\n            lines,\r\n            handler: toConfigurableOperationInput(this.fulfillmentHandler, this.fulfillmentHandlerControl.value),\r\n        });\r\n    }\r\n    cancel() {\r\n        this.resolveWith();\r\n    }\r\n}\nFulfillOrderDialogComponent.fac = function FulfillOrderDialogComponent_Factory(t) { return new (t || FulfillOrderDialogComponent)(ngcc0.directiveInject(ngcc1.DataService), ngcc0.directiveInject(ngcc0.ChangeDetectorRef)); };\nFulfillOrderDialogComponent.cmp = /*@__PURE__*/ ngcc0.defineComponent({ type: FulfillOrderDialogComponent, selectors: [[\"vdr-fulfill-order-dialog\"]], decls: 34, vars: 29, consts: [[\"vdrDialogTitle\", \"\"], [1, \"fulfillment-wrapper\"], [1, \"order-table\"], [1, \"table\"], [\"class\", \"order-line\", 3, \"ignore\", 4, \"ngFor\", \"ngForOf\"], [1, \"shipping-details\"], [3, \"address\"], [3, \"operationDefinition\", \"operation\", \"formControl\", \"removable\"], [\"vdrDialogButtons\", \"\"], [1, \"order-line\"], [1, \"align-middle\", \"thumb\"], [3, \"src\", 4, \"ngIf\"], [1, \"align-middle\", \"name\"], [1, \"align-middle\", \"sku\"], [1, \"align-middle\", \"quantity\"], [1, \"align-middle\", \"fulfil\"], [\"type\", \"number\", \"min\", \"0\", 3, \"disabled\", \"ngModel\", \"max\", \"ngModelChange\", 4, \"ngIf\"], [3, \"src\"], [\"type\", \"number\", \"min\", \"0\", 3, \"disabled\", \"ngModel\", \"max\", \"ngModelChange\"], [\"type\", \"button\", 1, \"btn\", 3, \"click\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", 3, \"disabled\", \"click\"]], template: function FulfillOrderDialogComponent_Template(rf, ctx) { if (rf & 1) {\n        ngcc0.template(0, FulfillOrderDialogComponent_ng_template_0_Template, 2, 3, \"ng-template\", 0);\n        ngcc0.elementStart(1, \"div\", 1);\n        ngcc0.elementStart(2, \"div\", 2);\n        ngcc0.elementStart(3, \"table\", 3);\n        ngcc0.elementStart(4, \"thead\");\n        ngcc0.elementStart(5, \"tr\");\n        ngcc0.element(6, \"th\");\n        ngcc0.elementStart(7, \"th\");\n        ngcc0.text(8);\n        ngcc0.pipe(9, \"translate\");\n        ngcc0.elementEnd();\n        ngcc0.elementStart(10, \"th\");\n        ngcc0.text(11);\n        ngcc0.pipe(12, \"translate\");\n        ngcc0.elementEnd();\n        ngcc0.elementStart(13, \"th\");\n        ngcc0.text(14);\n        ngcc0.pipe(15, \"translate\");\n        ngcc0.elementEnd();\n        ngcc0.elementStart(16, \"th\");\n        ngcc0.text(17);\n        ngcc0.pipe(18, \"translate\");\n        ngcc0.elementEnd();\n        ngcc0.elementStart(19, \"th\");\n        ngcc0.text(20);\n        ngcc0.pipe(21, \"translate\");\n        ngcc0.elementEnd();\n        ngcc0.elementEnd();\n        ngcc0.elementEnd();\n        ngcc0.template(22, FulfillOrderDialogComponent_tr_22_Template, 13, 8, \"tr\", 4);\n        ngcc0.elementEnd();\n        ngcc0.elementEnd();\n        ngcc0.elementStart(23, \"div\", 5);\n        ngcc0.element(24, \"vdr-formatted-address\", 6);\n        ngcc0.elementStart(25, \"h6\");\n        ngcc0.text(26);\n        ngcc0.pipe(27, \"translate\");\n        ngcc0.elementEnd();\n        ngcc0.text(28);\n        ngcc0.elementStart(29, \"strong\");\n        ngcc0.text(30);\n        ngcc0.pipe(31, \"localeCurrency\");\n        ngcc0.elementEnd();\n        ngcc0.element(32, \"vdr-configurable-input\", 7);\n        ngcc0.elementEnd();\n        ngcc0.elementEnd();\n        ngcc0.template(33, FulfillOrderDialogComponent_ng_template_33_Template, 6, 7, \"ng-template\", 8);\n    } if (rf & 2) {\n        ngcc0.advance(8);\n        ngcc0.textInterpolate(ngcc0.pipeBind1(9, 14, \"order.product-name\"));\n        ngcc0.advance(3);\n        ngcc0.textInterpolate(ngcc0.pipeBind1(12, 16, \"order.product-sku\"));\n        ngcc0.advance(3);\n        ngcc0.textInterpolate(ngcc0.pipeBind1(15, 18, \"order.unfulfilled\"));\n        ngcc0.advance(3);\n        ngcc0.textInterpolate(ngcc0.pipeBind1(18, 20, \"catalog.stock-on-hand\"));\n        ngcc0.advance(3);\n        ngcc0.textInterpolate(ngcc0.pipeBind1(21, 22, \"order.fulfill\"));\n        ngcc0.advance(2);\n        ngcc0.property(\"ngForOf\", ctx.order.lines);\n        ngcc0.advance(2);\n        ngcc0.property(\"address\", ctx.order.shippingAddress);\n        ngcc0.advance(2);\n        ngcc0.textInterpolate(ngcc0.pipeBind1(27, 24, \"order.shipping-method\"));\n        ngcc0.advance(2);\n        ngcc0.textInterpolate1(\" \", ctx.order.shippingLines[0] == null ? null : ctx.order.shippingLines[0].shippingMethod == null ? null : ctx.order.shippingLines[0].shippingMethod.name, \" \");\n        ngcc0.advance(2);\n        ngcc0.textInterpolate(ngcc0.pipeBind2(31, 26, ctx.order.shipping, ctx.order.currencyCode));\n        ngcc0.advance(2);\n        ngcc0.property(\"operationDefinition\", ctx.fulfillmentHandlerDef)(\"operation\", ctx.fulfillmentHandler)(\"formControl\", ctx.fulfillmentHandlerControl)(\"removable\", false);\n    } }, directives: [ngcc1.DialogTitleDirective, ngcc5.NgForOf, ngcc1.FormattedAddressComponent, ngcc1.ConfigurableInputComponent, ngcc2.NgControlStatus, ngcc2.FormControlDirective, ngcc1.DialogButtonsDirective, ngcc5.NgIf, ngcc1.FormFieldControlDirective, ngcc2.MinValidator, ngcc2.NumberValueAccessor, ngcc2.MaxValidator, ngcc2.DefaultValueAccessor, ngcc2.NgModel], pipes: [ngcc4.TranslatePipe, ngcc1.LocaleCurrencyPipe, ngcc1.AssetPreviewPipe], styles: [\"[_nghost-%COMP%]{height:100%;display:flex;min-height:64vh}.fulfillment-wrapper[_ngcontent-%COMP%]{flex:1}@media screen and (min-width: 768px){.fulfillment-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:row}}.fulfillment-wrapper[_ngcontent-%COMP%]   .shipping-details[_ngcontent-%COMP%]{margin-top:24px}@media screen and (min-width: 768px){.fulfillment-wrapper[_ngcontent-%COMP%]   .shipping-details[_ngcontent-%COMP%]{margin-top:0;margin-left:24px;width:250px}}.fulfillment-wrapper[_ngcontent-%COMP%]   .shipping-details[_ngcontent-%COMP%]   clr-input-container[_ngcontent-%COMP%]{margin-top:24px}.fulfillment-wrapper[_ngcontent-%COMP%]   .order-table[_ngcontent-%COMP%]{flex:1;overflow-y:auto}.fulfillment-wrapper[_ngcontent-%COMP%]   .order-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{margin-top:0}.fulfillment-wrapper[_ngcontent-%COMP%]   tr.ignore[_ngcontent-%COMP%]{color:var(--color-grey-300)}\"], changeDetection: 0 });\r\nFulfillOrderDialogComponent.ctorParameters = () => [\r\n    { type: DataService },\r\n    { type: ChangeDetectorRef }\r\n];\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ngcc0.setClassMetadata(FulfillOrderDialogComponent, [{\n        type: Component,\n        args: [{\n                selector: 'vdr-fulfill-order-dialog',\n                template: \"<ng-template vdrDialogTitle>{{ 'order.fulfill-order' | translate }}</ng-template>\\r\\n\\r\\n<div class=\\\"fulfillment-wrapper\\\">\\r\\n    <div class=\\\"order-table\\\">\\r\\n        <table class=\\\"table\\\">\\r\\n            <thead>\\r\\n                <tr>\\r\\n                    <th></th>\\r\\n                    <th>{{ 'order.product-name' | translate }}</th>\\r\\n                    <th>{{ 'order.product-sku' | translate }}</th>\\r\\n                    <th>{{ 'order.unfulfilled' | translate }}</th>\\r\\n                    <th>{{ 'catalog.stock-on-hand' | translate }}</th>\\r\\n                    <th>{{ 'order.fulfill' | translate }}</th>\\r\\n                </tr>\\r\\n            </thead>\\r\\n            <tr\\r\\n                *ngFor=\\\"let line of order.lines\\\"\\r\\n                class=\\\"order-line\\\"\\r\\n                [class.ignore]=\\\"getUnfulfilledCount(line) === 0\\\"\\r\\n            >\\r\\n                <td class=\\\"align-middle thumb\\\">\\r\\n                    <img *ngIf=\\\"line.featuredAsset\\\" [src]=\\\"line.featuredAsset | assetPreview: 'tiny'\\\" />\\r\\n                </td>\\r\\n                <td class=\\\"align-middle name\\\">{{ line.productVariant.name }}</td>\\r\\n                <td class=\\\"align-middle sku\\\">{{ line.productVariant.sku }}</td>\\r\\n                <td class=\\\"align-middle quantity\\\">{{ getUnfulfilledCount(line) }}</td>\\r\\n                <td class=\\\"align-middle quantity\\\">{{ line.productVariant.stockOnHand }}</td>\\r\\n                <td class=\\\"align-middle fulfil\\\">\\r\\n                    <input\\r\\n                        *ngIf=\\\"fulfillmentQuantities[line.id]\\\"\\r\\n                        [disabled]=\\\"getUnfulfilledCount(line) === 0\\\"\\r\\n                        [(ngModel)]=\\\"fulfillmentQuantities[line.id].fulfillCount\\\"\\r\\n                        type=\\\"number\\\"\\r\\n                        [max]=\\\"fulfillmentQuantities[line.id].max\\\"\\r\\n                        min=\\\"0\\\"\\r\\n                    />\\r\\n                </td>\\r\\n            </tr>\\r\\n        </table>\\r\\n    </div>\\r\\n    <div class=\\\"shipping-details\\\">\\r\\n        <vdr-formatted-address [address]=\\\"order.shippingAddress\\\"></vdr-formatted-address>\\r\\n        <h6>{{ 'order.shipping-method' | translate }}</h6>\\r\\n        {{ order.shippingLines[0]?.shippingMethod?.name }}\\r\\n        <strong>{{ order.shipping | localeCurrency: order.currencyCode }}</strong>\\r\\n        <vdr-configurable-input\\r\\n            [operationDefinition]=\\\"fulfillmentHandlerDef\\\"\\r\\n            [operation]=\\\"fulfillmentHandler\\\"\\r\\n            [formControl]=\\\"fulfillmentHandlerControl\\\"\\r\\n            [removable]=\\\"false\\\"\\r\\n        ></vdr-configurable-input>\\r\\n    </div>\\r\\n</div>\\r\\n\\r\\n<ng-template vdrDialogButtons>\\r\\n    <button type=\\\"button\\\" class=\\\"btn\\\" (click)=\\\"cancel()\\\">{{ 'common.cancel' | translate }}</button>\\r\\n    <button type=\\\"submit\\\" (click)=\\\"select()\\\" [disabled]=\\\"!canSubmit()\\\" class=\\\"btn btn-primary\\\">\\r\\n        {{ 'order.create-fulfillment' | translate }}\\r\\n    </button>\\r\\n</ng-template>\\r\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\":host{height:100%;display:flex;min-height:64vh}.fulfillment-wrapper{flex:1}@media screen and (min-width: 768px){.fulfillment-wrapper{display:flex;flex-direction:row}}.fulfillment-wrapper .shipping-details{margin-top:24px}@media screen and (min-width: 768px){.fulfillment-wrapper .shipping-details{margin-top:0;margin-left:24px;width:250px}}.fulfillment-wrapper .shipping-details clr-input-container{margin-top:24px}.fulfillment-wrapper .order-table{flex:1;overflow-y:auto}.fulfillment-wrapper .order-table table{margin-top:0}.fulfillment-wrapper tr.ignore{color:var(--color-grey-300)}\\n\"]\n            }]\n    }], function () { return [{ type: ngcc1.DataService }, { type: ngcc0.ChangeDetectorRef }]; }, null); })();\n\nclass FulfillmentCardComponent {\r\n    constructor() {\r\n        this.transitionState = new EventEmitter();\r\n    }\r\n    nextSuggestedState() {\r\n        var _a;\r\n        if (!this.fulfillment) {\r\n            return;\r\n        }\r\n        const { nextStates } = this.fulfillment;\r\n        const namedStateOrDefault = (targetState) => nextStates.includes(targetState) ? targetState : nextStates[0];\r\n        switch ((_a = this.fulfillment) === null || _a === void 0 ? void 0 : _a.state) {\r\n            case 'Pending':\r\n                return namedStateOrDefault('Shipped');\r\n            case 'Shipped':\r\n                return namedStateOrDefault('Delivered');\r\n            default:\r\n                return nextStates.find(s => s !== 'Cancelled');\r\n        }\r\n    }\r\n    nextOtherStates() {\r\n        if (!this.fulfillment) {\r\n            return [];\r\n        }\r\n        const suggested = this.nextSuggestedState();\r\n        return this.fulfillment.nextStates.filter(s => s !== suggested);\r\n    }\r\n}\nFulfillmentCardComponent.fac = function FulfillmentCardComponent_Factory(t) { return new (t || FulfillmentCardComponent)(); };\nFulfillmentCardComponent.cmp = /*@__PURE__*/ ngcc0.defineComponent({ type: FulfillmentCardComponent, selectors: [[\"vdr-fulfillment-card\"]], inputs: { fulfillment: \"fulfillment\", order: \"order\" }, outputs: { transitionState: \"transitionState\" }, decls: 10, vars: 6, consts: [[1, \"card\"], [1, \"card-header\", \"fulfillment-header\"], [1, \"fulfillment-state\"], [3, \"state\"], [1, \"card-block\"], [3, \"fulfillmentId\", \"order\", 4, \"ngIf\"], [\"class\", \"card-footer\", 4, \"ngIf\"], [3, \"fulfillmentId\", \"order\"], [1, \"card-footer\"], [4, \"ngIf\"], [\"vdrDropdownTrigger\", \"\", 1, \"icon-button\"], [\"shape\", \"ellipsis-vertical\"], [\"vdrPosition\", \"bottom-right\"], [4, \"ngFor\", \"ngForOf\"], [1, \"btn\", \"btn-sm\", \"btn-primary\", 3, \"click\"], [\"type\", \"button\", \"vdrDropdownItem\", \"\", 1, \"btn\", 3, \"click\"], [4, \"ngIf\", \"ngIfElse\"], [\"cancel\", \"\"], [\"shape\", \"step-forward-2\"], [\"shape\", \"error-standard\", 1, \"is-error\"]], template: function FulfillmentCardComponent_Template(rf, ctx) { if (rf & 1) {\n        ngcc0.elementStart(0, \"div\", 0);\n        ngcc0.elementStart(1, \"div\", 1);\n        ngcc0.elementStart(2, \"div\");\n        ngcc0.text(3);\n        ngcc0.pipe(4, \"translate\");\n        ngcc0.elementEnd();\n        ngcc0.elementStart(5, \"div\", 2);\n        ngcc0.element(6, \"vdr-fulfillment-state-label\", 3);\n        ngcc0.elementEnd();\n        ngcc0.elementEnd();\n        ngcc0.elementStart(7, \"div\", 4);\n        ngcc0.template(8, FulfillmentCardComponent_vdr_fulfillment_detail_8_Template, 1, 2, \"vdr-fulfillment-detail\", 5);\n        ngcc0.elementEnd();\n        ngcc0.template(9, FulfillmentCardComponent_div_9_Template, 7, 2, \"div\", 6);\n        ngcc0.elementEnd();\n    } if (rf & 2) {\n        ngcc0.advance(3);\n        ngcc0.textInterpolate(ngcc0.pipeBind1(4, 4, \"order.fulfillment\"));\n        ngcc0.advance(3);\n        ngcc0.property(\"state\", ctx.fulfillment == null ? null : ctx.fulfillment.state);\n        ngcc0.advance(2);\n        ngcc0.property(\"ngIf\", !!ctx.fulfillment);\n        ngcc0.advance(1);\n        ngcc0.property(\"ngIf\", ctx.fulfillment == null ? null : ctx.fulfillment.nextStates.length);\n    } }, directives: function () { return [FulfillmentStateLabelComponent, ngcc5.NgIf, FulfillmentDetailComponent, ngcc1.DropdownComponent, ngcc1.DropdownTriggerDirective, ngcc6.ClrIconCustomTag, ngcc1.DropdownMenuComponent, ngcc5.NgForOf, ngcc1.DropdownItemDirective]; }, pipes: function () { return [ngcc4.TranslatePipe, ngcc1.StateI18nTokenPipe]; }, styles: [\".fulfillment-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.card-footer[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-end}\"], changeDetection: 0 });\r\nFulfillmentCardComponent.propDecorators = {\r\n    fulfillment: [{ type: Input }],\r\n    order: [{ type: Input }],\r\n    transitionState: [{ type: Output }]\r\n};\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ngcc0.setClassMetadata(FulfillmentCardComponent, [{\n        type: Component,\n        args: [{\n                selector: 'vdr-fulfillment-card',\n                template: \"<div class=\\\"card\\\">\\r\\n    <div class=\\\"card-header fulfillment-header\\\">\\r\\n        <div>{{ 'order.fulfillment' | translate }}</div>\\r\\n        <div class=\\\"fulfillment-state\\\">\\r\\n            <vdr-fulfillment-state-label [state]=\\\"fulfillment?.state\\\"></vdr-fulfillment-state-label>\\r\\n        </div>\\r\\n    </div>\\r\\n    <div class=\\\"card-block\\\">\\r\\n        <vdr-fulfillment-detail\\r\\n            *ngIf=\\\"!!fulfillment\\\"\\r\\n            [fulfillmentId]=\\\"fulfillment?.id\\\"\\r\\n            [order]=\\\"order\\\"\\r\\n        ></vdr-fulfillment-detail>\\r\\n    </div>\\r\\n    <div class=\\\"card-footer\\\" *ngIf=\\\"fulfillment?.nextStates.length\\\">\\r\\n        <ng-container *ngIf=\\\"nextSuggestedState() as suggestedState\\\">\\r\\n            <button class=\\\"btn btn-sm btn-primary\\\" (click)=\\\"transitionState.emit(suggestedState)\\\">\\r\\n                {{ 'order.set-fulfillment-state' | translate: { state: (suggestedState | stateI18nToken | translate) } }}\\r\\n            </button>\\r\\n        </ng-container>\\r\\n        <vdr-dropdown>\\r\\n            <button class=\\\"icon-button\\\" vdrDropdownTrigger>\\r\\n                <clr-icon shape=\\\"ellipsis-vertical\\\"></clr-icon>\\r\\n            </button>\\r\\n            <vdr-dropdown-menu vdrPosition=\\\"bottom-right\\\">\\r\\n                <ng-container *ngFor=\\\"let nextState of nextOtherStates()\\\">\\r\\n                    <button\\r\\n                        type=\\\"button\\\"\\r\\n                        class=\\\"btn\\\"\\r\\n                        vdrDropdownItem\\r\\n                        (click)=\\\"transitionState.emit(nextState)\\\"\\r\\n                    >\\r\\n                        <ng-container *ngIf=\\\"nextState !== 'Cancelled'; else cancel\\\">\\r\\n                            <clr-icon shape=\\\"step-forward-2\\\"></clr-icon>\\r\\n                            {{ 'order.transition-to-state' | translate: { state: (nextState | stateI18nToken | translate) } }}\\r\\n                        </ng-container>\\r\\n                        <ng-template #cancel>\\r\\n                            <clr-icon shape=\\\"error-standard\\\" class=\\\"is-error\\\"></clr-icon>\\r\\n                            {{ 'order.cancel-fulfillment' | translate }}\\r\\n                        </ng-template>\\r\\n                    </button>\\r\\n                </ng-container>\\r\\n            </vdr-dropdown-menu>\\r\\n        </vdr-dropdown>\\r\\n    </div>\\r\\n</div>\\r\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\".fulfillment-header{display:flex;justify-content:space-between;align-items:center}.card-footer{display:flex;align-items:center;justify-content:flex-end}\\n\"]\n            }]\n    }], function () { return []; }, { transitionState: [{\n            type: Output\n        }], fulfillment: [{\n            type: Input\n        }], order: [{\n            type: Input\n        }] }); })();\n\nclass FulfillmentDetailComponent {\r\n    constructor(serverConfigService) {\r\n        this.serverConfigService = serverConfigService;\r\n        this.customFieldConfig = [];\r\n        this.customFieldFormGroup = new FormGroup({});\r\n    }\r\n    ngOnInit() {\r\n        this.customFieldConfig = this.serverConfigService.getCustomFieldsFor('Fulfillment');\r\n    }\r\n    ngOnChanges(changes) {\r\n        this.buildCustomFieldsFormGroup();\r\n    }\r\n    get fulfillment() {\r\n        return this.order.fulfillments && this.order.fulfillments.find(f => f.id === this.fulfillmentId);\r\n    }\r\n    get items() {\r\n        var _a, _b;\r\n        return ((_b = (_a = this.fulfillment) === null || _a === void 0 ? void 0 : _a.summary.map(row => {\r\n            var _a, _b;\r\n            return {\r\n                name: (_b = (_a = this.order.lines.find(line => line.id === row.orderLine.id)) === null || _a === void 0 ? void 0 : _a.productVariant.name) !== null && _b !== void 0 ? _b : '',\r\n                quantity: row.quantity,\r\n            };\r\n        })) !== null && _b !== void 0 ? _b : []);\r\n    }\r\n    buildCustomFieldsFormGroup() {\r\n        const customFields = this.fulfillment.customFields;\r\n        for (const fieldDef of this.serverConfigService.getCustomFieldsFor('Fulfillment')) {\r\n            this.customFieldFormGroup.addControl(fieldDef.name, new FormControl(customFields[fieldDef.name]));\r\n        }\r\n    }\r\n    customFieldIsObject(customField) {\r\n        return Array.isArray(customField) || isObject(customField);\r\n    }\r\n}\nFulfillmentDetailComponent.fac = function FulfillmentDetailComponent_Factory(t) { return new (t || FulfillmentDetailComponent)(ngcc0.directiveInject(ngcc1.ServerConfigService)); };\nFulfillmentDetailComponent.cmp = /*@__PURE__*/ ngcc0.defineComponent({ type: FulfillmentDetailComponent, selectors: [[\"vdr-fulfillment-detail\"]], inputs: { fulfillmentId: \"fulfillmentId\", order: \"order\" }, features: [ngcc0.NgOnChangesFeature], decls: 12, vars: 17, consts: [[3, \"label\"], [3, \"label\", 4, \"ngIf\"], [3, \"items\"], [4, \"ngFor\", \"ngForOf\"], [3, \"readonly\", \"compact\", \"customField\", \"customFieldsFormGroup\", 4, \"ngIf\"], [3, \"readonly\", \"compact\", \"customField\", \"customFieldsFormGroup\"]], template: function FulfillmentDetailComponent_Template(rf, ctx) { if (rf & 1) {\n        ngcc0.elementStart(0, \"vdr-labeled-data\", 0);\n        ngcc0.pipe(1, \"translate\");\n        ngcc0.text(2);\n        ngcc0.pipe(3, \"localeDate\");\n        ngcc0.elementEnd();\n        ngcc0.elementStart(4, \"vdr-labeled-data\", 0);\n        ngcc0.pipe(5, \"translate\");\n        ngcc0.text(6);\n        ngcc0.elementEnd();\n        ngcc0.template(7, FulfillmentDetailComponent_vdr_labeled_data_7_Template, 3, 4, \"vdr-labeled-data\", 1);\n        ngcc0.elementStart(8, \"vdr-labeled-data\", 0);\n        ngcc0.pipe(9, \"translate\");\n        ngcc0.element(10, \"vdr-simple-item-list\", 2);\n        ngcc0.elementEnd();\n        ngcc0.template(11, FulfillmentDetailComponent_ng_container_11_Template, 2, 1, \"ng-container\", 3);\n    } if (rf & 2) {\n        ngcc0.property(\"label\", ngcc0.pipeBind1(1, 8, \"common.created-at\"));\n        ngcc0.advance(2);\n        ngcc0.textInterpolate1(\" \", ngcc0.pipeBind2(3, 10, ctx.fulfillment == null ? null : ctx.fulfillment.createdAt, \"medium\"), \"\\n\");\n        ngcc0.advance(2);\n        ngcc0.property(\"label\", ngcc0.pipeBind1(5, 13, \"order.fulfillment-method\"));\n        ngcc0.advance(2);\n        ngcc0.textInterpolate1(\" \", ctx.fulfillment == null ? null : ctx.fulfillment.method, \"\\n\");\n        ngcc0.advance(1);\n        ngcc0.property(\"ngIf\", ctx.fulfillment == null ? null : ctx.fulfillment.trackingCode);\n        ngcc0.advance(1);\n        ngcc0.property(\"label\", ngcc0.pipeBind1(9, 15, \"order.contents\"));\n        ngcc0.advance(2);\n        ngcc0.property(\"items\", ctx.items);\n        ngcc0.advance(1);\n        ngcc0.property(\"ngForOf\", ctx.customFieldConfig);\n    } }, directives: function () { return [ngcc1.LabeledDataComponent, ngcc5.NgIf, SimpleItemListComponent, ngcc5.NgForOf, ngcc1.CustomFieldControlComponent]; }, pipes: function () { return [ngcc4.TranslatePipe, ngcc1.LocaleDatePipe]; }, styles: [\"\"], changeDetection: 0 });\r\nFulfillmentDetailComponent.ctorParameters = () => [\r\n    { type: ServerConfigService }\r\n];\r\nFulfillmentDetailComponent.propDecorators = {\r\n    fulfillmentId: [{ type: Input }],\r\n    order: [{ type: Input }]\r\n};\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ngcc0.setClassMetadata(FulfillmentDetailComponent, [{\n        type: Component,\n        args: [{\n                selector: 'vdr-fulfillment-detail',\n                template: \"<vdr-labeled-data [label]=\\\"'common.created-at' | translate\\\">\\r\\n    {{ fulfillment?.createdAt | localeDate: 'medium' }}\\r\\n</vdr-labeled-data>\\r\\n<vdr-labeled-data [label]=\\\"'order.fulfillment-method' | translate\\\">\\r\\n    {{ fulfillment?.method }}\\r\\n</vdr-labeled-data>\\r\\n<vdr-labeled-data *ngIf=\\\"fulfillment?.trackingCode\\\" [label]=\\\"'order.tracking-code' | translate\\\">\\r\\n    {{ fulfillment?.trackingCode }}\\r\\n</vdr-labeled-data>\\r\\n<vdr-labeled-data [label]=\\\"'order.contents' | translate\\\">\\r\\n    <vdr-simple-item-list [items]=\\\"items\\\"></vdr-simple-item-list>\\r\\n</vdr-labeled-data>\\r\\n<ng-container *ngFor=\\\"let customField of customFieldConfig\\\">\\r\\n    <vdr-custom-field-control\\r\\n        *ngIf=\\\"customFieldFormGroup.get(customField.name)\\\"\\r\\n        [readonly]=\\\"true\\\"\\r\\n        [compact]=\\\"true\\\"\\r\\n        [customField]=\\\"customField\\\"\\r\\n        [customFieldsFormGroup]=\\\"customFieldFormGroup\\\"\\r\\n    ></vdr-custom-field-control>\\r\\n</ng-container>\\r\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\"\"]\n            }]\n    }], function () { return [{ type: ngcc1.ServerConfigService }]; }, { fulfillmentId: [{\n            type: Input\n        }], order: [{\n            type: Input\n        }] }); })();\n\nclass FulfillmentStateLabelComponent {\r\n    get chipColorType() {\r\n        switch (this.state) {\r\n            case 'Pending':\r\n            case 'Shipped':\r\n                return 'warning';\r\n            case 'Delivered':\r\n                return 'success';\r\n            case 'Cancelled':\r\n                return 'error';\r\n        }\r\n    }\r\n}\nFulfillmentStateLabelComponent.fac = function FulfillmentStateLabelComponent_Factory(t) { return new (t || FulfillmentStateLabelComponent)(); };\nFulfillmentStateLabelComponent.cmp = /*@__PURE__*/ ngcc0.defineComponent({ type: FulfillmentStateLabelComponent, selectors: [[\"vdr-fulfillment-state-label\"]], inputs: { state: \"state\" }, decls: 6, vars: 10, consts: [[3, \"title\", \"colorType\"], [\"shape\", \"check-circle\", 4, \"ngIf\"], [\"shape\", \"check-circle\"]], template: function FulfillmentStateLabelComponent_Template(rf, ctx) { if (rf & 1) {\n        ngcc0.elementStart(0, \"vdr-chip\", 0);\n        ngcc0.pipe(1, \"translate\");\n        ngcc0.template(2, FulfillmentStateLabelComponent_clr_icon_2_Template, 1, 0, \"clr-icon\", 1);\n        ngcc0.text(3);\n        ngcc0.pipe(4, \"translate\");\n        ngcc0.pipe(5, \"stateI18nToken\");\n        ngcc0.elementEnd();\n    } if (rf & 2) {\n        ngcc0.property(\"title\", ngcc0.pipeBind1(1, 4, \"order.payment-state\"))(\"colorType\", ctx.chipColorType);\n        ngcc0.advance(2);\n        ngcc0.property(\"ngIf\", ctx.state === \"Delivered\");\n        ngcc0.advance(1);\n        ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(4, 6, ngcc0.pipeBind1(5, 8, ctx.state)), \"\\n\");\n    } }, directives: [ngcc1.ChipComponent, ngcc5.NgIf, ngcc6.ClrIconCustomTag], pipes: [ngcc4.TranslatePipe, ngcc1.StateI18nTokenPipe], styles: [\"[_nghost-%COMP%]{font-size:14px}\"], changeDetection: 0 });\r\nFulfillmentStateLabelComponent.propDecorators = {\r\n    state: [{ type: Input }]\r\n};\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ngcc0.setClassMetadata(FulfillmentStateLabelComponent, [{\n        type: Component,\n        args: [{\n                selector: 'vdr-fulfillment-state-label',\n                template: \"<vdr-chip [title]=\\\"'order.payment-state' | translate\\\" [colorType]=\\\"chipColorType\\\">\\r\\n    <clr-icon shape=\\\"check-circle\\\" *ngIf=\\\"state === 'Delivered'\\\"></clr-icon>\\r\\n    {{ state | stateI18nToken | translate }}\\r\\n</vdr-chip>\\r\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\":host{font-size:14px}\\n\"]\n            }]\n    }], null, { state: [{\n            type: Input\n        }] }); })();\n\nclass LineFulfillmentComponent {\r\n    constructor() {\r\n        this.fulfilledCount = 0;\r\n        this.fulfillments = [];\r\n    }\r\n    ngOnChanges(changes) {\r\n        if (this.line) {\r\n            this.fulfilledCount = this.getDeliveredCount(this.line);\r\n            this.fulfillmentStatus = this.getFulfillmentStatus(this.fulfilledCount, this.line.items.length);\r\n            this.fulfillments = this.getFulfillments(this.line);\r\n        }\r\n    }\r\n    /**\r\n     * Returns the number of items in an OrderLine which are fulfilled.\r\n     */\r\n    getDeliveredCount(line) {\r\n        var _a, _b;\r\n        return ((_b = (_a = line.fulfillments) === null || _a === void 0 ? void 0 : _a.reduce((sum, fulfillment) => { var _a, _b; return sum + ((_b = (_a = fulfillment.summary.find(s => s.orderLine.id === line.id)) === null || _a === void 0 ? void 0 : _a.quantity) !== null && _b !== void 0 ? _b : 0); }, 0)) !== null && _b !== void 0 ? _b : 0);\r\n    }\r\n    getFulfillmentStatus(fulfilledCount, lineQuantity) {\r\n        if (fulfilledCount === lineQuantity) {\r\n            return 'full';\r\n        }\r\n        if (0 < fulfilledCount && fulfilledCount < lineQuantity) {\r\n            return 'partial';\r\n        }\r\n        return 'none';\r\n    }\r\n    getFulfillments(line) {\r\n        var _a, _b;\r\n        return ((_b = (_a = line.fulfillments) === null || _a === void 0 ? void 0 : _a.map(fulfillment => {\r\n            var _a;\r\n            const summaryLine = fulfillment.summary.find(s => s.orderLine.id === line.id);\r\n            return {\r\n                count: (_a = summaryLine === null || summaryLine === void 0 ? void 0 : summaryLine.quantity) !== null && _a !== void 0 ? _a : 0,\r\n                fulfillment,\r\n            };\r\n        })) !== null && _b !== void 0 ? _b : []);\r\n    }\r\n}\nLineFulfillmentComponent.fac = function LineFulfillmentComponent_Factory(t) { return new (t || LineFulfillmentComponent)(); };\nLineFulfillmentComponent.cmp = /*@__PURE__*/ ngcc0.defineComponent({ type: LineFulfillmentComponent, selectors: [[\"vdr-line-fulfillment\"]], inputs: { line: \"line\", orderState: \"orderState\" }, features: [ngcc0.NgOnChangesFeature], decls: 1, vars: 1, consts: [[\"class\", \"search-settings-menu\", 4, \"ngIf\"], [1, \"search-settings-menu\"], [\"type\", \"button\", \"vdrDropdownTrigger\", \"\", 1, \"icon-button\"], [\"class\", \"item-fulfilled\", \"shape\", \"check-circle\", 4, \"ngIf\"], [\"class\", \"item-partially-fulfilled\", \"shape\", \"check-circle\", 4, \"ngIf\"], [\"class\", \"item-not-fulfilled\", \"shape\", \"exclamation-circle\", 4, \"ngIf\"], [\"vdrPosition\", \"bottom-right\"], [\"class\", \"dropdown-header\", 4, \"ngIf\"], [\"class\", \"fulfillment-detail\", 4, \"ngFor\", \"ngForOf\"], [\"shape\", \"check-circle\", 1, \"item-fulfilled\"], [\"shape\", \"check-circle\", 1, \"item-partially-fulfilled\"], [\"shape\", \"exclamation-circle\", 1, \"item-not-fulfilled\"], [1, \"dropdown-header\"], [1, \"fulfillment-detail\"], [1, \"fulfillment-title\"], [3, \"label\"], [3, \"label\", 4, \"ngIf\"]], template: function LineFulfillmentComponent_Template(rf, ctx) { if (rf & 1) {\n        ngcc0.template(0, LineFulfillmentComponent_vdr_dropdown_0_Template, 10, 7, \"vdr-dropdown\", 0);\n    } if (rf & 2) {\n        ngcc0.property(\"ngIf\", ctx.fulfilledCount || ctx.orderState === \"PartiallyDelivered\");\n    } }, directives: [ngcc5.NgIf, ngcc1.DropdownComponent, ngcc1.DropdownTriggerDirective, ngcc1.DropdownMenuComponent, ngcc5.NgForOf, ngcc6.ClrIconCustomTag, ngcc6.ClrLabel, ngcc1.LabeledDataComponent], pipes: [ngcc4.TranslatePipe, ngcc1.LocaleDatePipe], styles: [\".item-fulfilled[_ngcontent-%COMP%]{color:var(--color-success-500)}.item-partially-fulfilled[_ngcontent-%COMP%]{color:var(--color-warning-500)}.item-not-fulfilled[_ngcontent-%COMP%]{color:var(--color-error-500)}.fulfillment-detail[_ngcontent-%COMP%]{margin:6px 12px}.fulfillment-detail[_ngcontent-%COMP%]:not(:last-of-type){border-bottom:1px dashed var(--color-component-border-200)}\"], changeDetection: 0 });\r\nLineFulfillmentComponent.propDecorators = {\r\n    line: [{ type: Input }],\r\n    orderState: [{ type: Input }]\r\n};\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ngcc0.setClassMetadata(LineFulfillmentComponent, [{\n        type: Component,\n        args: [{\n                selector: 'vdr-line-fulfillment',\n                template: \"<vdr-dropdown class=\\\"search-settings-menu\\\" *ngIf=\\\"fulfilledCount || orderState === 'PartiallyDelivered'\\\">\\r\\n    <button type=\\\"button\\\" class=\\\"icon-button\\\" vdrDropdownTrigger>\\r\\n        <clr-icon *ngIf=\\\"fulfillmentStatus === 'full'\\\" class=\\\"item-fulfilled\\\" shape=\\\"check-circle\\\"></clr-icon>\\r\\n        <clr-icon\\r\\n            *ngIf=\\\"fulfillmentStatus === 'partial'\\\"\\r\\n            class=\\\"item-partially-fulfilled\\\"\\r\\n            shape=\\\"check-circle\\\"\\r\\n        ></clr-icon>\\r\\n        <clr-icon\\r\\n            *ngIf=\\\"fulfillmentStatus === 'none'\\\"\\r\\n            class=\\\"item-not-fulfilled\\\"\\r\\n            shape=\\\"exclamation-circle\\\"\\r\\n        ></clr-icon>\\r\\n    </button>\\r\\n    <vdr-dropdown-menu vdrPosition=\\\"bottom-right\\\">\\r\\n        <label class=\\\"dropdown-header\\\" *ngIf=\\\"fulfillmentStatus === 'full'\\\">\\r\\n            {{ 'order.line-fulfillment-all' | translate }}\\r\\n        </label>\\r\\n        <label class=\\\"dropdown-header\\\" *ngIf=\\\"fulfillmentStatus === 'partial'\\\">\\r\\n            {{\\r\\n                'order.line-fulfillment-partial' | translate: { total: line.quantity, count: fulfilledCount }\\r\\n            }}\\r\\n        </label>\\r\\n        <label class=\\\"dropdown-header\\\" *ngIf=\\\"fulfillmentStatus === 'none'\\\">\\r\\n            {{ 'order.line-fulfillment-none' | translate }}\\r\\n        </label>\\r\\n        <div class=\\\"fulfillment-detail\\\" *ngFor=\\\"let item of fulfillments\\\">\\r\\n            <div class=\\\"fulfillment-title\\\">\\r\\n                {{ 'order.fulfillment' | translate }} #{{ item.fulfillment.id }} ({{\\r\\n                    'order.item-count' | translate: { count: item.count }\\r\\n                }})\\r\\n            </div>\\r\\n            <vdr-labeled-data [label]=\\\"'common.created-at' | translate\\\">\\r\\n                {{ item.fulfillment.createdAt | localeDate: 'medium' }}\\r\\n            </vdr-labeled-data>\\r\\n            <vdr-labeled-data [label]=\\\"'order.fulfillment-method' | translate\\\">\\r\\n                {{ item.fulfillment.method }}\\r\\n            </vdr-labeled-data>\\r\\n            <vdr-labeled-data\\r\\n                *ngIf=\\\"item.fulfillment.trackingCode\\\"\\r\\n                [label]=\\\"'order.tracking-code' | translate\\\"\\r\\n            >\\r\\n                {{ item.fulfillment.trackingCode }}\\r\\n            </vdr-labeled-data>\\r\\n        </div>\\r\\n    </vdr-dropdown-menu>\\r\\n</vdr-dropdown>\\r\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\".item-fulfilled{color:var(--color-success-500)}.item-partially-fulfilled{color:var(--color-warning-500)}.item-not-fulfilled{color:var(--color-error-500)}.fulfillment-detail{margin:6px 12px}.fulfillment-detail:not(:last-of-type){border-bottom:1px dashed var(--color-component-border-200)}\\n\"]\n            }]\n    }], function () { return []; }, { line: [{\n            type: Input\n        }], orderState: [{\n            type: Input\n        }] }); })();\n\nclass LineRefundsComponent {\r\n    getRefundedCount() {\r\n        var _a, _b;\r\n        const refunds = (_b = (_a = this.payments) === null || _a === void 0 ? void 0 : _a.reduce((all, payment) => [...all, ...payment.refunds], [])) !== null && _b !== void 0 ? _b : [];\r\n        return this.line.items.filter(i => {\r\n            if (i.refundId === null && !i.cancelled) {\r\n                return false;\r\n            }\r\n            if (i.refundId) {\r\n                const refund = refunds.find(r => r.id === i.refundId);\r\n                if ((refund === null || refund === void 0 ? void 0 : refund.state) === 'Failed') {\r\n                    return false;\r\n                }\r\n                else {\r\n                    return true;\r\n                }\r\n            }\r\n            return false;\r\n        }).length;\r\n    }\r\n}\nLineRefundsComponent.fac = function LineRefundsComponent_Factory(t) { return new (t || LineRefundsComponent)(); };\nLineRefundsComponent.cmp = /*@__PURE__*/ ngcc0.defineComponent({ type: LineRefundsComponent, selectors: [[\"vdr-line-refunds\"]], inputs: { line: \"line\", payments: \"payments\" }, decls: 1, vars: 1, consts: [[3, \"title\", 4, \"ngIf\"], [3, \"title\"], [\"shape\", \"redo\", \"dir\", \"down\", 1, \"is-solid\"]], template: function LineRefundsComponent_Template(rf, ctx) { if (rf & 1) {\n        ngcc0.template(0, LineRefundsComponent_span_0_Template, 3, 6, \"span\", 0);\n    } if (rf & 2) {\n        ngcc0.property(\"ngIf\", ctx.getRefundedCount());\n    } }, directives: [ngcc5.NgIf, ngcc6.ClrIconCustomTag, ngcc8.Dir], pipes: [ngcc4.TranslatePipe], styles: [\"[_nghost-%COMP%]{color:var(--color-error-500)}\"], changeDetection: 0 });\r\nLineRefundsComponent.propDecorators = {\r\n    line: [{ type: Input }],\r\n    payments: [{ type: Input }]\r\n};\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ngcc0.setClassMetadata(LineRefundsComponent, [{\n        type: Component,\n        args: [{\n                selector: 'vdr-line-refunds',\n                template: \"<span *ngIf=\\\"getRefundedCount()\\\" [title]=\\\"'order.refunded-count' | translate: { count: getRefundedCount() }\\\">\\r\\n    <clr-icon shape=\\\"redo\\\" class=\\\"is-solid\\\" dir=\\\"down\\\"></clr-icon>\\r\\n</span>\\r\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\":host{color:var(--color-error-500)}\\n\"]\n            }]\n    }], null, { line: [{\n            type: Input\n        }], payments: [{\n            type: Input\n        }] }); })();\n\nclass ModificationDetailComponent {\r\n    constructor() {\r\n        this.addedItems = new Map();\r\n        this.removedItems = new Map();\r\n    }\r\n    ngOnChanges() {\r\n        const { added, removed } = this.getModifiedLines();\r\n        this.addedItems = added;\r\n        this.removedItems = removed;\r\n    }\r\n    getSurcharge(id) {\r\n        return this.order.surcharges.find(m => m.id === id);\r\n    }\r\n    getAddedItems() {\r\n        return [...this.addedItems.entries()].map(([line, count]) => {\r\n            return { name: line.productVariant.name, quantity: count };\r\n        });\r\n    }\r\n    getRemovedItems() {\r\n        return [...this.removedItems.entries()].map(([line, count]) => {\r\n            return { name: line.productVariant.name, quantity: count };\r\n        });\r\n    }\r\n    getModifiedLines() {\r\n        var _a, _b;\r\n        const added = new Map();\r\n        const removed = new Map();\r\n        for (const _item of this.modification.orderItems || []) {\r\n            const result = this.getOrderLineAndItem(_item.id);\r\n            if (result) {\r\n                const { line, item } = result;\r\n                if (item.cancelled) {\r\n                    const count = (_a = removed.get(line)) !== null && _a !== void 0 ? _a : 0;\r\n                    removed.set(line, count + 1);\r\n                }\r\n                else {\r\n                    const count = (_b = added.get(line)) !== null && _b !== void 0 ? _b : 0;\r\n                    added.set(line, count + 1);\r\n                }\r\n            }\r\n        }\r\n        return { added, removed };\r\n    }\r\n    getOrderLineAndItem(itemId) {\r\n        for (const line of this.order.lines) {\r\n            const item = line.items.find(i => i.id === itemId);\r\n            if (item) {\r\n                return { line, item };\r\n            }\r\n        }\r\n    }\r\n}\nModificationDetailComponent.fac = function ModificationDetailComponent_Factory(t) { return new (t || ModificationDetailComponent)(); };\nModificationDetailComponent.cmp = /*@__PURE__*/ ngcc0.defineComponent({ type: ModificationDetailComponent, selectors: [[\"vdr-modification-detail\"]], inputs: { order: \"order\", modification: \"modification\" }, features: [ngcc0.NgOnChangesFeature], decls: 7, vars: 8, consts: [[3, \"label\"], [3, \"label\", 4, \"ngIf\"], [3, \"label\", 4, \"ngFor\", \"ngForOf\"], [3, \"items\"]], template: function ModificationDetailComponent_Template(rf, ctx) { if (rf & 1) {\n        ngcc0.elementStart(0, \"vdr-labeled-data\", 0);\n        ngcc0.pipe(1, \"translate\");\n        ngcc0.text(2);\n        ngcc0.elementEnd();\n        ngcc0.template(3, ModificationDetailComponent_vdr_labeled_data_3_Template, 3, 4, \"vdr-labeled-data\", 1);\n        ngcc0.template(4, ModificationDetailComponent_vdr_labeled_data_4_Template, 4, 8, \"vdr-labeled-data\", 2);\n        ngcc0.template(5, ModificationDetailComponent_vdr_labeled_data_5_Template, 3, 4, \"vdr-labeled-data\", 1);\n        ngcc0.template(6, ModificationDetailComponent_vdr_labeled_data_6_Template, 3, 4, \"vdr-labeled-data\", 1);\n    } if (rf & 2) {\n        ngcc0.property(\"label\", ngcc0.pipeBind1(1, 6, \"common.ID\"));\n        ngcc0.advance(2);\n        ngcc0.textInterpolate(ctx.modification.id);\n        ngcc0.advance(1);\n        ngcc0.property(\"ngIf\", ctx.modification.note);\n        ngcc0.advance(1);\n        ngcc0.property(\"ngForOf\", ctx.modification.surcharges);\n        ngcc0.advance(1);\n        ngcc0.property(\"ngIf\", ctx.getAddedItems().length);\n        ngcc0.advance(1);\n        ngcc0.property(\"ngIf\", ctx.getRemovedItems().length);\n    } }, directives: function () { return [ngcc1.LabeledDataComponent, ngcc5.NgIf, ngcc5.NgForOf, SimpleItemListComponent]; }, pipes: function () { return [ngcc4.TranslatePipe, ngcc1.LocaleCurrencyPipe]; }, styles: [\"\"], changeDetection: 0 });\r\nModificationDetailComponent.propDecorators = {\r\n    order: [{ type: Input }],\r\n    modification: [{ type: Input }]\r\n};\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ngcc0.setClassMetadata(ModificationDetailComponent, [{\n        type: Component,\n        args: [{\n                selector: 'vdr-modification-detail',\n                template: \"<vdr-labeled-data [label]=\\\"'common.ID' | translate\\\">{{ modification.id }}</vdr-labeled-data>\\r\\n<vdr-labeled-data *ngIf=\\\"modification.note\\\" [label]=\\\"'order.note' | translate\\\">{{\\r\\n    modification.note\\r\\n}}</vdr-labeled-data>\\r\\n<vdr-labeled-data *ngFor=\\\"let surcharge of modification.surcharges\\\" [label]=\\\"'order.surcharges' | translate\\\">\\r\\n    {{ getSurcharge(surcharge.id)?.description }}\\r\\n    {{ getSurcharge(surcharge.id)?.priceWithTax | localeCurrency: order.currencyCode }}</vdr-labeled-data\\r\\n>\\r\\n<vdr-labeled-data *ngIf=\\\"getAddedItems().length\\\" [label]=\\\"'order.added-items' | translate\\\">\\r\\n    <vdr-simple-item-list [items]=\\\"getAddedItems()\\\"></vdr-simple-item-list>\\r\\n</vdr-labeled-data>\\r\\n<vdr-labeled-data *ngIf=\\\"getRemovedItems().length\\\" [label]=\\\"'order.removed-items' | translate\\\">\\r\\n    <vdr-simple-item-list [items]=\\\"getRemovedItems()\\\"></vdr-simple-item-list>\\r\\n</vdr-labeled-data>\\r\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\"\"]\n            }]\n    }], function () { return []; }, { order: [{\n            type: Input\n        }], modification: [{\n            type: Input\n        }] }); })();\n\nclass OrderCustomFieldsCardComponent {\r\n    constructor(formBuilder, modalService) {\r\n        this.formBuilder = formBuilder;\r\n        this.modalService = modalService;\r\n        this.customFieldsConfig = [];\r\n        this.customFieldValues = {};\r\n        this.updateClick = new EventEmitter();\r\n        this.editable = false;\r\n    }\r\n    ngOnInit() {\r\n        this.customFieldForm = this.formBuilder.group({});\r\n        for (const field of this.customFieldsConfig) {\r\n            this.customFieldForm.addControl(field.name, this.formBuilder.control(this.customFieldValues[field.name]));\r\n        }\r\n    }\r\n    onUpdateClick() {\r\n        this.updateClick.emit(this.customFieldForm.value);\r\n        this.customFieldForm.markAsPristine();\r\n        this.editable = false;\r\n    }\r\n    onCancelClick() {\r\n        if (this.customFieldForm.dirty) {\r\n            this.modalService\r\n                .dialog({\r\n                title: marker('catalog.confirm-cancel'),\r\n                buttons: [\r\n                    { type: 'secondary', label: marker('common.keep-editing') },\r\n                    { type: 'danger', label: marker('common.discard-changes'), returnValue: true },\r\n                ],\r\n            })\r\n                .subscribe(result => {\r\n                if (result) {\r\n                    this.customFieldForm.reset();\r\n                    this.customFieldForm.markAsPristine();\r\n                    this.editable = false;\r\n                }\r\n            });\r\n        }\r\n        else {\r\n            this.editable = false;\r\n        }\r\n    }\r\n}\nOrderCustomFieldsCardComponent.fac = function OrderCustomFieldsCardComponent_Factory(t) { return new (t || OrderCustomFieldsCardComponent)(ngcc0.directiveInject(ngcc2.FormBuilder), ngcc0.directiveInject(ngcc1.ModalService)); };\nOrderCustomFieldsCardComponent.cmp = /*@__PURE__*/ ngcc0.defineComponent({ type: OrderCustomFieldsCardComponent, selectors: [[\"vdr-order-custom-fields-card\"]], inputs: { customFieldsConfig: \"customFieldsConfig\", customFieldValues: \"customFieldValues\" }, outputs: { updateClick: \"updateClick\" }, decls: 1, vars: 1, consts: [[\"class\", \"card\", 4, \"ngIf\"], [1, \"card\"], [1, \"card-header\"], [1, \"card-block\"], [1, \"card-text\", \"custom-field-form\"], [\"entityName\", \"Order\", 3, \"customFields\", \"customFieldsFormGroup\", \"readonly\", \"compact\"], [1, \"card-footer\"], [\"class\", \"btn btn-sm btn-secondary\", 3, \"click\", 4, \"ngIf\"], [\"class\", \"btn btn-sm btn-primary\", 3, \"disabled\", \"click\", 4, \"ngIf\"], [1, \"btn\", \"btn-sm\", \"btn-secondary\", 3, \"click\"], [\"shape\", \"pencil\"], [1, \"btn\", \"btn-sm\", \"btn-primary\", 3, \"disabled\", \"click\"], [\"shape\", \"check\"], [\"shape\", \"times\"]], template: function OrderCustomFieldsCardComponent_Template(rf, ctx) { if (rf & 1) {\n        ngcc0.template(0, OrderCustomFieldsCardComponent_div_0_Template, 11, 12, \"div\", 0);\n    } if (rf & 2) {\n        ngcc0.property(\"ngIf\", ctx.customFieldsConfig.length);\n    } }, directives: [ngcc5.NgIf, ngcc1.TabbedCustomFieldsComponent, ngcc6.ClrIconCustomTag], pipes: [ngcc4.TranslatePipe], styles: [\"vdr-custom-field-control[_ngcontent-%COMP%]{margin-bottom:6px;display:block}.custom-field-form[_ngcontent-%COMP%]     .clr-control-label{color:var(--color-grey-400)}.custom-field-form.editable[_ngcontent-%COMP%]     .clr-control-label{color:inherit}\"], changeDetection: 0 });\r\nOrderCustomFieldsCardComponent.ctorParameters = () => [\r\n    { type: FormBuilder },\r\n    { type: ModalService }\r\n];\r\nOrderCustomFieldsCardComponent.propDecorators = {\r\n    customFieldsConfig: [{ type: Input }],\r\n    customFieldValues: [{ type: Input }],\r\n    updateClick: [{ type: Output }]\r\n};\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ngcc0.setClassMetadata(OrderCustomFieldsCardComponent, [{\n        type: Component,\n        args: [{\n                selector: 'vdr-order-custom-fields-card',\n                template: \"<div class=\\\"card\\\" *ngIf=\\\"customFieldsConfig.length\\\">\\r\\n    <div class=\\\"card-header\\\">\\r\\n        {{ 'common.custom-fields' | translate }}\\r\\n    </div>\\r\\n    <div class=\\\"card-block\\\">\\r\\n        <div class=\\\"card-text custom-field-form\\\" [class.editable]=\\\"editable\\\">\\r\\n            <vdr-tabbed-custom-fields\\r\\n                entityName=\\\"Order\\\"\\r\\n                [customFields]=\\\"customFieldsConfig\\\"\\r\\n                [customFieldsFormGroup]=\\\"customFieldForm\\\"\\r\\n                [readonly]=\\\"!editable\\\"\\r\\n                [compact]=\\\"true\\\"\\r\\n            ></vdr-tabbed-custom-fields>\\r\\n        </div>\\r\\n    </div>\\r\\n    <div class=\\\"card-footer\\\">\\r\\n        <button class=\\\"btn btn-sm btn-secondary\\\" (click)=\\\"editable = true\\\" *ngIf=\\\"!editable\\\">\\r\\n            <clr-icon shape=\\\"pencil\\\"></clr-icon>\\r\\n            {{ 'common.edit' | translate }}\\r\\n        </button>\\r\\n        <button\\r\\n            class=\\\"btn btn-sm btn-primary\\\"\\r\\n            (click)=\\\"onUpdateClick()\\\"\\r\\n            *ngIf=\\\"editable\\\"\\r\\n            [disabled]=\\\"customFieldForm.pristine || customFieldForm.invalid\\\"\\r\\n        >\\r\\n            <clr-icon shape=\\\"check\\\"></clr-icon>\\r\\n            {{ 'common.update' | translate }}\\r\\n        </button>\\r\\n        <button\\r\\n            class=\\\"btn btn-sm btn-secondary\\\"\\r\\n            (click)=\\\"onCancelClick()\\\"\\r\\n            *ngIf=\\\"editable\\\"\\r\\n        >\\r\\n            <clr-icon shape=\\\"times\\\"></clr-icon>\\r\\n            {{ 'common.cancel' | translate }}\\r\\n        </button>\\r\\n    </div>\\r\\n</div>\\r\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\"vdr-custom-field-control{margin-bottom:6px;display:block}.custom-field-form ::ng-deep .clr-control-label{color:var(--color-grey-400)}.custom-field-form.editable ::ng-deep .clr-control-label{color:inherit}\\n\"]\n            }]\n    }], function () { return [{ type: ngcc2.FormBuilder }, { type: ngcc1.ModalService }]; }, { customFieldsConfig: [{\n            type: Input\n        }], customFieldValues: [{\n            type: Input\n        }], updateClick: [{\n            type: Output\n        }] }); })();\n\nclass OrderProcessGraphDialogComponent {\r\n    constructor(serverConfigService) {\r\n        this.serverConfigService = serverConfigService;\r\n        this.states = [];\r\n    }\r\n    ngOnInit() {\r\n        this.states = this.serverConfigService.getOrderProcessStates();\r\n    }\r\n}\nOrderProcessGraphDialogComponent.fac = function OrderProcessGraphDialogComponent_Factory(t) { return new (t || OrderProcessGraphDialogComponent)(ngcc0.directiveInject(ngcc1.ServerConfigService)); };\nOrderProcessGraphDialogComponent.cmp = /*@__PURE__*/ ngcc0.defineComponent({ type: OrderProcessGraphDialogComponent, selectors: [[\"vdr-order-process-graph-dialog\"]], decls: 2, vars: 2, consts: [[\"vdrDialogTitle\", \"\"], [3, \"states\", \"initialState\"]], template: function OrderProcessGraphDialogComponent_Template(rf, ctx) { if (rf & 1) {\n        ngcc0.template(0, OrderProcessGraphDialogComponent_ng_template_0_Template, 2, 3, \"ng-template\", 0);\n        ngcc0.element(1, \"vdr-order-process-graph\", 1);\n    } if (rf & 2) {\n        ngcc0.advance(1);\n        ngcc0.property(\"states\", ctx.states)(\"initialState\", ctx.activeState);\n    } }, directives: function () { return [ngcc1.DialogTitleDirective, OrderProcessGraphComponent]; }, pipes: function () { return [ngcc4.TranslatePipe]; }, styles: [\"\"], changeDetection: 0 });\r\nOrderProcessGraphDialogComponent.ctorParameters = () => [\r\n    { type: ServerConfigService }\r\n];\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ngcc0.setClassMetadata(OrderProcessGraphDialogComponent, [{\n        type: Component,\n        args: [{\n                selector: 'vdr-order-process-graph-dialog',\n                template: \"<ng-template vdrDialogTitle>{{ 'order.order-state-diagram' | translate }}</ng-template>\\r\\n\\r\\n<vdr-order-process-graph [states]=\\\"states\\\" [initialState]=\\\"activeState\\\"></vdr-order-process-graph>\\r\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\"\"]\n            }]\n    }], function () { return [{ type: ngcc1.ServerConfigService }]; }, null); })();\n\nclass RefundOrderDialogComponent {\r\n    constructor(i18nService) {\r\n        var _a;\r\n        this.i18nService = i18nService;\r\n        this.lineQuantities = {};\r\n        this.refundShipping = false;\r\n        this.adjustment = 0;\r\n        this.reasons = (_a = getAppConfig().cancellationReasons) !== null && _a !== void 0 ? _a : [\r\n            marker('order.refund-reason-customer-request'),\r\n            marker('order.refund-reason-not-available'),\r\n        ];\r\n        this.reasons = this.reasons.map(r => this.i18nService.translate(r));\r\n    }\r\n    get refundTotal() {\r\n        const itemTotal = this.order.lines.reduce((total, line) => {\r\n            const lineRef = this.lineQuantities[line.id];\r\n            const refundCount = (lineRef.refund && lineRef.quantity) || 0;\r\n            return total + line.proratedUnitPriceWithTax * refundCount;\r\n        }, 0);\r\n        return itemTotal + (this.refundShipping ? this.order.shippingWithTax : 0) + this.adjustment;\r\n    }\r\n    get settledPaymentsTotal() {\r\n        return this.settledPayments\r\n            .map(payment => {\r\n            const paymentTotal = payment.amount;\r\n            const alreadyRefundedTotal = summate(payment.refunds.filter(r => r.state !== 'Failed'), 'total');\r\n            return paymentTotal - alreadyRefundedTotal;\r\n        })\r\n            .reduce((sum, amount) => sum + amount, 0);\r\n    }\r\n    lineCanBeRefundedOrCancelled(line) {\r\n        var _a, _b;\r\n        const refunds = (_b = (_a = this.order.payments) === null || _a === void 0 ? void 0 : _a.reduce((all, payment) => [...all, ...payment.refunds], [])) !== null && _b !== void 0 ? _b : [];\r\n        const refundable = line.items.filter(i => {\r\n            if (i.cancelled) {\r\n                return false;\r\n            }\r\n            if (i.refundId == null) {\r\n                return true;\r\n            }\r\n            const refund = refunds.find(r => r.id === i.refundId);\r\n            return (refund === null || refund === void 0 ? void 0 : refund.state) === 'Failed';\r\n        });\r\n        return 0 < refundable.length;\r\n    }\r\n    ngOnInit() {\r\n        this.lineQuantities = this.order.lines.reduce((result, line) => {\r\n            return Object.assign(Object.assign({}, result), { [line.id]: {\r\n                    quantity: 0,\r\n                    refund: false,\r\n                    cancel: false,\r\n                } });\r\n        }, {});\r\n        this.settledPayments = (this.order.payments || []).filter(p => p.state === 'Settled');\r\n        if (this.settledPayments.length) {\r\n            this.selectedPayment = this.settledPayments[0];\r\n        }\r\n    }\r\n    handleZeroQuantity(line) {\r\n        if ((line === null || line === void 0 ? void 0 : line.quantity) === 0) {\r\n            line.cancel = false;\r\n            line.refund = false;\r\n        }\r\n    }\r\n    isRefunding() {\r\n        const result = Object.values(this.lineQuantities).reduce((isRefunding, line) => {\r\n            return isRefunding || (0 < line.quantity && line.refund);\r\n        }, false);\r\n        return result;\r\n    }\r\n    isCancelling() {\r\n        const result = Object.values(this.lineQuantities).reduce((isCancelling, line) => {\r\n            return isCancelling || (0 < line.quantity && line.cancel);\r\n        }, false);\r\n        return result;\r\n    }\r\n    canSubmit() {\r\n        if (this.isRefunding()) {\r\n            return !!(this.selectedPayment &&\r\n                this.reason &&\r\n                0 < this.refundTotal &&\r\n                this.refundTotal <= this.settledPaymentsTotal);\r\n        }\r\n        else if (this.isCancelling()) {\r\n            return !!this.reason;\r\n        }\r\n        return false;\r\n    }\r\n    select() {\r\n        const payment = this.selectedPayment;\r\n        if (payment) {\r\n            const refundLines = this.getOrderLineInput(line => line.refund);\r\n            const cancelLines = this.getOrderLineInput(line => line.cancel);\r\n            this.resolveWith({\r\n                refund: {\r\n                    lines: refundLines,\r\n                    reason: this.reason,\r\n                    shipping: this.refundShipping ? this.order.shippingWithTax : 0,\r\n                    adjustment: this.adjustment,\r\n                    paymentId: payment.id,\r\n                },\r\n                cancel: {\r\n                    lines: cancelLines,\r\n                    orderId: this.order.id,\r\n                    reason: this.reason,\r\n                    cancelShipping: this.refundShipping,\r\n                },\r\n            });\r\n        }\r\n    }\r\n    cancel() {\r\n        this.resolveWith();\r\n    }\r\n    getOrderLineInput(filterFn) {\r\n        return Object.entries(this.lineQuantities)\r\n            .filter(([orderLineId, line]) => 0 < line.quantity && filterFn(line))\r\n            .map(([orderLineId, line]) => ({\r\n            orderLineId,\r\n            quantity: line.quantity,\r\n        }));\r\n    }\r\n}\nRefundOrderDialogComponent.fac = function RefundOrderDialogComponent_Factory(t) { return new (t || RefundOrderDialogComponent)(ngcc0.directiveInject(ngcc1.I18nService)); };\nRefundOrderDialogComponent.cmp = /*@__PURE__*/ ngcc0.defineComponent({ type: RefundOrderDialogComponent, selectors: [[\"vdr-refund-order-dialog\"]], decls: 69, vars: 76, consts: [[\"vdrDialogTitle\", \"\"], [1, \"refund-wrapper\"], [1, \"order-table\"], [1, \"table\"], [\"class\", \"order-line\", 4, \"ngFor\", \"ngForOf\"], [1, \"refund-details\", \"mt4\"], [1, \"clr-control-label\"], [\"bindLabel\", \"name\", \"autofocus\", \"\", \"bindValue\", \"id\", 3, \"disabled\", \"items\", \"placeholder\", \"addTag\", \"ngModel\", \"ngModelChange\"], [\"clrSelect\", \"\", \"name\", \"options\", 3, \"ngModel\", \"disabled\", \"ngModelChange\"], [3, \"ngValue\", \"disabled\", 4, \"ngFor\", \"ngForOf\"], [\"type\", \"checkbox\", \"clrCheckbox\", \"\", 3, \"ngModel\", \"disabled\", \"ngModelChange\"], [\"clrInput\", \"\", 3, \"disabled\", \"currencyCode\", \"ngModel\", \"ngModelChange\"], [1, \"totals\"], [1, \"order-total\"], [1, \"refund-total\"], [\"class\", \"refund-total-error\", 4, \"ngIf\"], [\"class\", \"refund-total-warning\", 4, \"ngIf\"], [\"vdrDialogButtons\", \"\"], [1, \"order-line\"], [1, \"align-middle\", \"thumb\"], [3, \"src\"], [1, \"align-middle\", \"name\"], [1, \"align-middle\", \"sku\"], [1, \"align-middle\", \"quantity\"], [3, \"line\", \"payments\"], [1, \"prorated-wrapper\"], [4, \"ngIf\"], [1, \"align-middle\", \"quantity-col\"], [\"type\", \"number\", \"min\", \"0\", 3, \"ngModel\", \"max\", \"ngModelChange\", \"input\", 4, \"ngIf\"], [1, \"align-middle\"], [1, \"cancel-checkbox-wrapper\"], [\"type\", \"checkbox\", \"clrCheckbox\", \"\", 3, \"disabled\", \"ngModel\", \"ngModelChange\", 4, \"ngIf\"], [\"vdrDropdownTrigger\", \"\", 1, \"promotions-label\"], [1, \"icon-button\"], [\"shape\", \"info\"], [\"class\", \"line-promotion\", 4, \"ngFor\", \"ngForOf\"], [1, \"line-promotion\"], [1, \"promotion-amount\"], [\"type\", \"number\", \"min\", \"0\", 3, \"ngModel\", \"max\", \"ngModelChange\", \"input\"], [\"type\", \"checkbox\", \"clrCheckbox\", \"\", 3, \"disabled\", \"ngModel\", \"ngModelChange\"], [3, \"ngValue\", \"disabled\"], [1, \"refund-total-error\"], [1, \"refund-total-warning\"], [\"type\", \"button\", 1, \"btn\", 3, \"click\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", 3, \"disabled\", \"click\"], [4, \"ngIf\", \"ngIfElse\"], [\"cancelling\", \"\"]], template: function RefundOrderDialogComponent_Template(rf, ctx) { if (rf & 1) {\n        ngcc0.template(0, RefundOrderDialogComponent_ng_template_0_Template, 2, 3, \"ng-template\", 0);\n        ngcc0.elementStart(1, \"div\", 1);\n        ngcc0.elementStart(2, \"div\", 2);\n        ngcc0.elementStart(3, \"table\", 3);\n        ngcc0.elementStart(4, \"thead\");\n        ngcc0.elementStart(5, \"tr\");\n        ngcc0.element(6, \"th\");\n        ngcc0.elementStart(7, \"th\");\n        ngcc0.text(8);\n        ngcc0.pipe(9, \"translate\");\n        ngcc0.elementEnd();\n        ngcc0.elementStart(10, \"th\");\n        ngcc0.text(11);\n        ngcc0.pipe(12, \"translate\");\n        ngcc0.elementEnd();\n        ngcc0.elementStart(13, \"th\");\n        ngcc0.text(14);\n        ngcc0.pipe(15, \"translate\");\n        ngcc0.elementEnd();\n        ngcc0.elementStart(16, \"th\");\n        ngcc0.text(17);\n        ngcc0.pipe(18, \"translate\");\n        ngcc0.elementEnd();\n        ngcc0.elementStart(19, \"th\");\n        ngcc0.text(20);\n        ngcc0.pipe(21, \"translate\");\n        ngcc0.elementEnd();\n        ngcc0.elementStart(22, \"th\");\n        ngcc0.text(23);\n        ngcc0.pipe(24, \"translate\");\n        ngcc0.elementEnd();\n        ngcc0.elementStart(25, \"th\");\n        ngcc0.text(26);\n        ngcc0.pipe(27, \"translate\");\n        ngcc0.elementEnd();\n        ngcc0.elementStart(28, \"th\");\n        ngcc0.text(29);\n        ngcc0.pipe(30, \"translate\");\n        ngcc0.elementEnd();\n        ngcc0.elementEnd();\n        ngcc0.elementEnd();\n        ngcc0.template(31, RefundOrderDialogComponent_tr_31_Template, 27, 21, \"tr\", 4);\n        ngcc0.elementEnd();\n        ngcc0.elementEnd();\n        ngcc0.elementStart(32, \"div\", 5);\n        ngcc0.elementStart(33, \"div\");\n        ngcc0.elementStart(34, \"label\", 6);\n        ngcc0.text(35);\n        ngcc0.pipe(36, \"translate\");\n        ngcc0.elementEnd();\n        ngcc0.elementStart(37, \"ng-select\", 7);\n        ngcc0.listener(\"ngModelChange\", function RefundOrderDialogComponent_Template_ng_select_ngModelChange_37_listener($event) { return ctx.reason = $event; });\n        ngcc0.pipe(38, \"translate\");\n        ngcc0.elementEnd();\n        ngcc0.elementEnd();\n        ngcc0.elementStart(39, \"div\");\n        ngcc0.elementStart(40, \"clr-select-container\");\n        ngcc0.elementStart(41, \"label\");\n        ngcc0.text(42);\n        ngcc0.pipe(43, \"translate\");\n        ngcc0.elementEnd();\n        ngcc0.elementStart(44, \"select\", 8);\n        ngcc0.listener(\"ngModelChange\", function RefundOrderDialogComponent_Template_select_ngModelChange_44_listener($event) { return ctx.selectedPayment = $event; });\n        ngcc0.template(45, RefundOrderDialogComponent_option_45_Template, 3, 8, \"option\", 9);\n        ngcc0.elementEnd();\n        ngcc0.elementEnd();\n        ngcc0.elementStart(46, \"clr-checkbox-wrapper\");\n        ngcc0.elementStart(47, \"input\", 10);\n        ngcc0.listener(\"ngModelChange\", function RefundOrderDialogComponent_Template_input_ngModelChange_47_listener($event) { return ctx.refundShipping = $event; });\n        ngcc0.elementEnd();\n        ngcc0.elementStart(48, \"label\");\n        ngcc0.text(49);\n        ngcc0.pipe(50, \"translate\");\n        ngcc0.pipe(51, \"localeCurrency\");\n        ngcc0.elementEnd();\n        ngcc0.elementEnd();\n        ngcc0.elementStart(52, \"clr-input-container\");\n        ngcc0.elementStart(53, \"label\");\n        ngcc0.text(54);\n        ngcc0.pipe(55, \"translate\");\n        ngcc0.elementEnd();\n        ngcc0.elementStart(56, \"vdr-currency-input\", 11);\n        ngcc0.listener(\"ngModelChange\", function RefundOrderDialogComponent_Template_vdr_currency_input_ngModelChange_56_listener($event) { return ctx.adjustment = $event; });\n        ngcc0.elementEnd();\n        ngcc0.elementEnd();\n        ngcc0.elementStart(57, \"div\", 12);\n        ngcc0.elementStart(58, \"div\", 13);\n        ngcc0.text(59);\n        ngcc0.pipe(60, \"translate\");\n        ngcc0.pipe(61, \"localeCurrency\");\n        ngcc0.elementEnd();\n        ngcc0.elementStart(62, \"div\", 14);\n        ngcc0.text(63);\n        ngcc0.pipe(64, \"translate\");\n        ngcc0.pipe(65, \"localeCurrency\");\n        ngcc0.elementEnd();\n        ngcc0.template(66, RefundOrderDialogComponent_div_66_Template, 5, 13, \"div\", 15);\n        ngcc0.template(67, RefundOrderDialogComponent_div_67_Template, 3, 3, \"div\", 16);\n        ngcc0.elementEnd();\n        ngcc0.elementEnd();\n        ngcc0.elementEnd();\n        ngcc0.elementEnd();\n        ngcc0.template(68, RefundOrderDialogComponent_ng_template_68_Template, 7, 6, \"ng-template\", 17);\n    } if (rf & 2) {\n        ngcc0.advance(8);\n        ngcc0.textInterpolate(ngcc0.pipeBind1(9, 37, \"order.product-name\"));\n        ngcc0.advance(3);\n        ngcc0.textInterpolate(ngcc0.pipeBind1(12, 39, \"order.product-sku\"));\n        ngcc0.advance(3);\n        ngcc0.textInterpolate(ngcc0.pipeBind1(15, 41, \"order.quantity\"));\n        ngcc0.advance(3);\n        ngcc0.textInterpolate(ngcc0.pipeBind1(18, 43, \"order.unit-price\"));\n        ngcc0.advance(3);\n        ngcc0.textInterpolate(ngcc0.pipeBind1(21, 45, \"order.prorated-unit-price\"));\n        ngcc0.advance(3);\n        ngcc0.textInterpolate(ngcc0.pipeBind1(24, 47, \"order.quantity\"));\n        ngcc0.advance(3);\n        ngcc0.textInterpolate(ngcc0.pipeBind1(27, 49, \"order.refund\"));\n        ngcc0.advance(3);\n        ngcc0.textInterpolate(ngcc0.pipeBind1(30, 51, \"order.cancel\"));\n        ngcc0.advance(2);\n        ngcc0.property(\"ngForOf\", ctx.order.lines);\n        ngcc0.advance(1);\n        ngcc0.classProp(\"faded\", !ctx.isRefunding() && !ctx.isCancelling());\n        ngcc0.advance(3);\n        ngcc0.textInterpolate(ngcc0.pipeBind1(36, 53, \"order.refund-cancellation-reason\"));\n        ngcc0.advance(2);\n        ngcc0.property(\"disabled\", !ctx.isRefunding() && !ctx.isCancelling())(\"items\", ctx.reasons)(\"placeholder\", ngcc0.pipeBind1(38, 55, \"order.refund-cancellation-reason-required\"))(\"addTag\", true)(\"ngModel\", ctx.reason);\n        ngcc0.advance(5);\n        ngcc0.textInterpolate(ngcc0.pipeBind1(43, 57, \"order.payment-to-refund\"));\n        ngcc0.advance(2);\n        ngcc0.property(\"ngModel\", ctx.selectedPayment)(\"disabled\", !ctx.isRefunding());\n        ngcc0.advance(1);\n        ngcc0.property(\"ngForOf\", ctx.settledPayments);\n        ngcc0.advance(2);\n        ngcc0.property(\"ngModel\", ctx.refundShipping)(\"disabled\", !ctx.isRefunding());\n        ngcc0.advance(2);\n        ngcc0.textInterpolate2(\" \", ngcc0.pipeBind1(50, 59, \"order.refund-shipping\"), \" (\", ngcc0.pipeBind2(51, 61, ctx.order.shippingWithTax, ctx.order.currencyCode), \") \");\n        ngcc0.advance(5);\n        ngcc0.textInterpolate(ngcc0.pipeBind1(55, 64, \"order.refund-adjustment\"));\n        ngcc0.advance(2);\n        ngcc0.property(\"disabled\", !ctx.isRefunding())(\"currencyCode\", ctx.order.currencyCode)(\"ngModel\", ctx.adjustment);\n        ngcc0.advance(1);\n        ngcc0.classProp(\"disabled\", !ctx.isRefunding());\n        ngcc0.advance(2);\n        ngcc0.textInterpolate2(\" \", ngcc0.pipeBind1(60, 66, \"order.payment-amount\"), \": \", ngcc0.pipeBind2(61, 68, ctx.selectedPayment.amount, ctx.order.currencyCode), \" \");\n        ngcc0.advance(4);\n        ngcc0.textInterpolate2(\" \", ngcc0.pipeBind1(64, 71, \"order.refund-total\"), \": \", ngcc0.pipeBind2(65, 73, ctx.refundTotal, ctx.order.currencyCode), \" \");\n        ngcc0.advance(3);\n        ngcc0.property(\"ngIf\", ctx.refundTotal < 0 || ctx.settledPaymentsTotal < ctx.refundTotal);\n        ngcc0.advance(1);\n        ngcc0.property(\"ngIf\", ctx.selectedPayment.amount < ctx.refundTotal);\n    } }, directives: [ngcc1.DialogTitleDirective, ngcc5.NgForOf, ngcc6.ClrLabel, ngcc3.NgSelectComponent, ngcc2.NgControlStatus, ngcc2.NgModel, ngcc6.ClrSelectContainer, ngcc1.FormFieldControlDirective, ngcc2.SelectControlValueAccessor, ngcc6.ClrSelect, ngcc6.ClrCheckboxWrapper, ngcc2.CheckboxControlValueAccessor, ngcc6.ClrCheckbox, ngcc6.ClrInputContainer, ngcc1.CurrencyInputComponent, ngcc6.ClrInput, ngcc5.NgIf, ngcc1.DialogButtonsDirective, LineRefundsComponent, ngcc1.DropdownComponent, ngcc1.DropdownTriggerDirective, ngcc6.ClrIconCustomTag, ngcc1.DropdownMenuComponent, ngcc2.MinValidator, ngcc2.NumberValueAccessor, ngcc2.MaxValidator, ngcc2.DefaultValueAccessor, ngcc2.NgSelectOption, ngcc2.NgSelectMultipleOption], pipes: [ngcc4.TranslatePipe, ngcc1.LocaleCurrencyPipe, ngcc1.AssetPreviewPipe, ngcc5.CurrencyPipe, ngcc5.DecimalPipe], styles: [\"[_nghost-%COMP%]{height:100%;display:flex;min-height:64vh}.refund-wrapper[_ngcontent-%COMP%]{flex:1;flex-direction:column}.refund-wrapper[_ngcontent-%COMP%]   .order-table[_ngcontent-%COMP%]{flex:1;overflow-y:auto}.refund-wrapper[_ngcontent-%COMP%]   .order-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{margin-top:0}.refund-wrapper[_ngcontent-%COMP%]   tr.ignore[_ngcontent-%COMP%]{color:var(--color-grey-300)}.quantity-col[_ngcontent-%COMP%]{background-color:var(--color-warning-100)}.cancel-checkbox-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}clr-checkbox-wrapper[_ngcontent-%COMP%]{margin-top:12px;margin-bottom:12px;display:block}.refund-details[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.refund-details.faded[_ngcontent-%COMP%]{opacity:.5}.totals[_ngcontent-%COMP%]{margin-top:48px}.totals[_ngcontent-%COMP%]   .refund-total[_ngcontent-%COMP%]{font-size:18px}.totals[_ngcontent-%COMP%]   .refund-total-error[_ngcontent-%COMP%]{color:var(--color-error-500)}.totals[_ngcontent-%COMP%]   .refund-total-warning[_ngcontent-%COMP%]{color:var(--color-warning-600);max-width:250px}.totals.disabled[_ngcontent-%COMP%]{color:var(--color-grey-300)}.prorated-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center}.line-promotion[_ngcontent-%COMP%]{display:flex;justify-content:space-between;font-size:12px;padding:3px 6px}.line-promotion[_ngcontent-%COMP%]   .promotion-amount[_ngcontent-%COMP%]{margin-left:12px}\"], changeDetection: 0 });\r\nRefundOrderDialogComponent.ctorParameters = () => [\r\n    { type: I18nService }\r\n];\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ngcc0.setClassMetadata(RefundOrderDialogComponent, [{\n        type: Component,\n        args: [{\n                selector: 'vdr-refund-order-dialog',\n                template: \"<ng-template vdrDialogTitle>{{ 'order.refund-and-cancel-order' | translate }}</ng-template>\\r\\n\\r\\n<div class=\\\"refund-wrapper\\\">\\r\\n    <div class=\\\"order-table\\\">\\r\\n        <table class=\\\"table\\\">\\r\\n            <thead>\\r\\n                <tr>\\r\\n                    <th></th>\\r\\n                    <th>{{ 'order.product-name' | translate }}</th>\\r\\n                    <th>{{ 'order.product-sku' | translate }}</th>\\r\\n                    <th>{{ 'order.quantity' | translate }}</th>\\r\\n                    <th>{{ 'order.unit-price' | translate }}</th>\\r\\n                    <th>{{ 'order.prorated-unit-price' | translate }}</th>\\r\\n                    <th>{{ 'order.quantity' | translate }}</th>\\r\\n                    <th>{{ 'order.refund' | translate }}</th>\\r\\n                    <th>{{ 'order.cancel' | translate }}</th>\\r\\n                </tr>\\r\\n            </thead>\\r\\n            <tr *ngFor=\\\"let line of order.lines\\\" class=\\\"order-line\\\">\\r\\n                <td class=\\\"align-middle thumb\\\">\\r\\n                    <img [src]=\\\"line.featuredAsset | assetPreview: 'tiny'\\\" />\\r\\n                </td>\\r\\n                <td class=\\\"align-middle name\\\">{{ line.productVariant.name }}</td>\\r\\n                <td class=\\\"align-middle sku\\\">{{ line.productVariant.sku }}</td>\\r\\n                <td class=\\\"align-middle quantity\\\">\\r\\n                    {{ line.quantity }}\\r\\n                    <vdr-line-refunds [line]=\\\"line\\\" [payments]=\\\"order.payments\\\"></vdr-line-refunds>\\r\\n                </td>\\r\\n                <td class=\\\"align-middle quantity\\\">\\r\\n                    {{ line.unitPriceWithTax | localeCurrency: order.currencyCode }}\\r\\n                </td>\\r\\n                <td class=\\\"align-middle quantity\\\">\\r\\n                    <div class=\\\"prorated-wrapper\\\">\\r\\n                        {{ line.proratedUnitPriceWithTax | localeCurrency: order.currencyCode }}\\r\\n                        <ng-container *ngIf=\\\"line.discounts as discounts\\\">\\r\\n                            <vdr-dropdown *ngIf=\\\"discounts.length\\\">\\r\\n                                <div class=\\\"promotions-label\\\" vdrDropdownTrigger>\\r\\n                                    <button class=\\\"icon-button\\\"><clr-icon shape=\\\"info\\\"></clr-icon></button>\\r\\n                                </div>\\r\\n                                <vdr-dropdown-menu>\\r\\n                                    <div class=\\\"line-promotion\\\" *ngFor=\\\"let discount of discounts\\\">\\r\\n                                        {{ discount.description }}\\r\\n                                        <div class=\\\"promotion-amount\\\">\\r\\n                                            {{\\r\\n                                                discount.amount / 100 / line.quantity\\r\\n                                                    | number: '1.0-2'\\r\\n                                                    | currency: order.currencyCode\\r\\n                                            }}\\r\\n                                        </div>\\r\\n                                    </div>\\r\\n                                </vdr-dropdown-menu>\\r\\n                            </vdr-dropdown>\\r\\n                        </ng-container>\\r\\n                    </div>\\r\\n                </td>\\r\\n                <td class=\\\"align-middle quantity-col\\\">\\r\\n                    <input\\r\\n                        *ngIf=\\\"lineCanBeRefundedOrCancelled(line)\\\"\\r\\n                        [(ngModel)]=\\\"lineQuantities[line.id].quantity\\\"\\r\\n                        type=\\\"number\\\"\\r\\n                        [max]=\\\"line.quantity\\\"\\r\\n                        min=\\\"0\\\"\\r\\n                        (input)=\\\"handleZeroQuantity(lineQuantities[line.id])\\\"\\r\\n                    />\\r\\n                </td>\\r\\n                <td class=\\\"align-middle\\\">\\r\\n                    <div class=\\\"cancel-checkbox-wrapper\\\">\\r\\n                        <input\\r\\n                            type=\\\"checkbox\\\"\\r\\n                            *ngIf=\\\"lineCanBeRefundedOrCancelled(line)\\\"\\r\\n                            clrCheckbox\\r\\n                            [disabled]=\\\"0 === lineQuantities[line.id].quantity\\\"\\r\\n                            [(ngModel)]=\\\"lineQuantities[line.id].refund\\\"\\r\\n                        />\\r\\n                    </div>\\r\\n                </td>\\r\\n                <td class=\\\"align-middle\\\">\\r\\n                    <div class=\\\"cancel-checkbox-wrapper\\\">\\r\\n                        <input\\r\\n                            type=\\\"checkbox\\\"\\r\\n                            *ngIf=\\\"lineCanBeRefundedOrCancelled(line)\\\"\\r\\n                            clrCheckbox\\r\\n                            [disabled]=\\\"0 === lineQuantities[line.id].quantity\\\"\\r\\n                            [(ngModel)]=\\\"lineQuantities[line.id].cancel\\\"\\r\\n                        />\\r\\n                    </div>\\r\\n                </td>\\r\\n            </tr>\\r\\n        </table>\\r\\n    </div>\\r\\n    <div class=\\\"refund-details mt4\\\" [class.faded]=\\\"!isRefunding() && !isCancelling()\\\">\\r\\n        <div>\\r\\n            <label class=\\\"clr-control-label\\\">{{ 'order.refund-cancellation-reason' | translate }}</label>\\r\\n            <ng-select\\r\\n                [disabled]=\\\"!isRefunding() && !isCancelling()\\\"\\r\\n                [items]=\\\"reasons\\\"\\r\\n                bindLabel=\\\"name\\\"\\r\\n                autofocus\\r\\n                [placeholder]=\\\"'order.refund-cancellation-reason-required' | translate\\\"\\r\\n                bindValue=\\\"id\\\"\\r\\n                [addTag]=\\\"true\\\"\\r\\n                [(ngModel)]=\\\"reason\\\"\\r\\n            ></ng-select>\\r\\n        </div>\\r\\n\\r\\n        <div>\\r\\n            <clr-select-container>\\r\\n                <label>{{ 'order.payment-to-refund' | translate }}</label>\\r\\n                <select clrSelect name=\\\"options\\\" [(ngModel)]=\\\"selectedPayment\\\" [disabled]=\\\"!isRefunding()\\\">\\r\\n                    <option\\r\\n                        *ngFor=\\\"let payment of settledPayments\\\"\\r\\n                        [ngValue]=\\\"payment\\\"\\r\\n                        [disabled]=\\\"payment.state !== 'Settled'\\\"\\r\\n                    >\\r\\n                        #{{ payment.id }} {{ payment.method }}:\\r\\n                        {{ payment.amount | localeCurrency: order.currencyCode }}\\r\\n                    </option>\\r\\n                </select>\\r\\n            </clr-select-container>\\r\\n\\r\\n            <clr-checkbox-wrapper>\\r\\n                <input type=\\\"checkbox\\\" clrCheckbox [(ngModel)]=\\\"refundShipping\\\" [disabled]=\\\"!isRefunding()\\\" />\\r\\n                <label>\\r\\n                    {{ 'order.refund-shipping' | translate }} ({{\\r\\n                        order.shippingWithTax | localeCurrency: order.currencyCode\\r\\n                    }})\\r\\n                </label>\\r\\n            </clr-checkbox-wrapper>\\r\\n            <clr-input-container>\\r\\n                <label>{{ 'order.refund-adjustment' | translate }}</label>\\r\\n                <vdr-currency-input\\r\\n                    clrInput\\r\\n                    [disabled]=\\\"!isRefunding()\\\"\\r\\n                    [currencyCode]=\\\"order.currencyCode\\\"\\r\\n                    [(ngModel)]=\\\"adjustment\\\"\\r\\n                ></vdr-currency-input>\\r\\n            </clr-input-container>\\r\\n            <div class=\\\"totals\\\" [class.disabled]=\\\"!isRefunding()\\\">\\r\\n                <div class=\\\"order-total\\\">\\r\\n                    {{ 'order.payment-amount' | translate }}:\\r\\n                    {{ selectedPayment.amount | localeCurrency: order.currencyCode }}\\r\\n                </div>\\r\\n                <div class=\\\"refund-total\\\">\\r\\n                    {{ 'order.refund-total' | translate }}:\\r\\n                    {{ refundTotal | localeCurrency: order.currencyCode }}\\r\\n                </div>\\r\\n                <div class=\\\"refund-total-error\\\" *ngIf=\\\"refundTotal < 0 || settledPaymentsTotal < refundTotal\\\">\\r\\n                    {{\\r\\n                        'order.refund-total-error'\\r\\n                            | translate\\r\\n                                : {\\r\\n                                      min: 0 | currency: order.currencyCode,\\r\\n                                      max: settledPaymentsTotal | localeCurrency: order.currencyCode\\r\\n                                  }\\r\\n                    }}\\r\\n                </div>\\r\\n                <div class=\\\"refund-total-warning\\\" *ngIf=\\\"selectedPayment.amount < refundTotal\\\">\\r\\n                    {{ 'order.refund-total-warning' | translate }}\\r\\n                </div>\\r\\n            </div>\\r\\n        </div>\\r\\n    </div>\\r\\n</div>\\r\\n\\r\\n<ng-template vdrDialogButtons>\\r\\n    <button type=\\\"button\\\" class=\\\"btn\\\" (click)=\\\"cancel()\\\">{{ 'common.cancel' | translate }}</button>\\r\\n    <button type=\\\"submit\\\" (click)=\\\"select()\\\" [disabled]=\\\"!canSubmit()\\\" class=\\\"btn btn-primary\\\">\\r\\n        <ng-container *ngIf=\\\"isRefunding(); else cancelling\\\">\\r\\n            {{\\r\\n                'order.refund-with-amount'\\r\\n                    | translate: { amount: refundTotal | localeCurrency: order.currencyCode }\\r\\n            }}\\r\\n        </ng-container>\\r\\n        <ng-template #cancelling>\\r\\n            {{ 'order.cancel-selected-items' | translate }}\\r\\n        </ng-template>\\r\\n    </button>\\r\\n</ng-template>\\r\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\":host{height:100%;display:flex;min-height:64vh}.refund-wrapper{flex:1;flex-direction:column}.refund-wrapper .order-table{flex:1;overflow-y:auto}.refund-wrapper .order-table table{margin-top:0}.refund-wrapper tr.ignore{color:var(--color-grey-300)}.quantity-col{background-color:var(--color-warning-100)}.cancel-checkbox-wrapper{display:flex;align-items:center;justify-content:center}clr-checkbox-wrapper{margin-top:12px;margin-bottom:12px;display:block}.refund-details{display:flex;justify-content:space-between}.refund-details.faded{opacity:.5}.totals{margin-top:48px}.totals .refund-total{font-size:18px}.totals .refund-total-error{color:var(--color-error-500)}.totals .refund-total-warning{color:var(--color-warning-600);max-width:250px}.totals.disabled{color:var(--color-grey-300)}.prorated-wrapper{display:flex;justify-content:center}.line-promotion{display:flex;justify-content:space-between;font-size:12px;padding:3px 6px}.line-promotion .promotion-amount{margin-left:12px}\\n\"]\n            }]\n    }], function () { return [{ type: ngcc1.I18nService }]; }, null); })();\n\nclass SettleRefundDialogComponent {\r\n    constructor() {\r\n        this.transactionId = '';\r\n    }\r\n    submit() {\r\n        this.resolveWith(this.transactionId);\r\n    }\r\n    cancel() {\r\n        this.resolveWith();\r\n    }\r\n}\nSettleRefundDialogComponent.fac = function SettleRefundDialogComponent_Factory(t) { return new (t || SettleRefundDialogComponent)(); };\nSettleRefundDialogComponent.cmp = /*@__PURE__*/ ngcc0.defineComponent({ type: SettleRefundDialogComponent, selectors: [[\"vdr-settle-refund-dialog\"]], decls: 10, vars: 10, consts: [[\"vdrDialogTitle\", \"\"], [1, \"instruction\"], [\"clrInput\", \"\", \"name\", \"transactionId\", 3, \"ngModel\", \"ngModelChange\"], [\"vdrDialogButtons\", \"\"], [\"type\", \"button\", 1, \"btn\", 3, \"click\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", 3, \"disabled\", \"click\"]], template: function SettleRefundDialogComponent_Template(rf, ctx) { if (rf & 1) {\n        ngcc0.template(0, SettleRefundDialogComponent_ng_template_0_Template, 2, 3, \"ng-template\", 0);\n        ngcc0.elementStart(1, \"p\", 1);\n        ngcc0.text(2);\n        ngcc0.pipe(3, \"translate\");\n        ngcc0.elementEnd();\n        ngcc0.elementStart(4, \"clr-input-container\");\n        ngcc0.elementStart(5, \"label\");\n        ngcc0.text(6);\n        ngcc0.pipe(7, \"translate\");\n        ngcc0.elementEnd();\n        ngcc0.elementStart(8, \"input\", 2);\n        ngcc0.listener(\"ngModelChange\", function SettleRefundDialogComponent_Template_input_ngModelChange_8_listener($event) { return ctx.transactionId = $event; });\n        ngcc0.elementEnd();\n        ngcc0.elementEnd();\n        ngcc0.template(9, SettleRefundDialogComponent_ng_template_9_Template, 6, 7, \"ng-template\", 3);\n    } if (rf & 2) {\n        ngcc0.advance(2);\n        ngcc0.textInterpolate1(\" \", ngcc0.pipeBind2(3, 3, \"order.settle-refund-manual-instructions\", ngcc0.pureFunction1(8, _c5, ctx.refund.method)), \"\\n\");\n        ngcc0.advance(4);\n        ngcc0.textInterpolate(ngcc0.pipeBind1(7, 6, \"order.transaction-id\"));\n        ngcc0.advance(2);\n        ngcc0.property(\"ngModel\", ctx.transactionId);\n    } }, directives: [ngcc1.DialogTitleDirective, ngcc6.ClrInputContainer, ngcc6.ClrLabel, ngcc1.FormFieldControlDirective, ngcc2.DefaultValueAccessor, ngcc6.ClrInput, ngcc2.NgControlStatus, ngcc2.NgModel, ngcc1.DialogButtonsDirective], pipes: [ngcc4.TranslatePipe], styles: [\"[_nghost-%COMP%]{padding-bottom:32px}.instruction[_ngcontent-%COMP%]{margin-top:0;margin-bottom:24px}\"], changeDetection: 0 });\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ngcc0.setClassMetadata(SettleRefundDialogComponent, [{\n        type: Component,\n        args: [{\n                selector: 'vdr-settle-refund-dialog',\n                template: \"<ng-template vdrDialogTitle>{{ 'order.settle-refund' | translate }}</ng-template>\\r\\n<p class=\\\"instruction\\\">\\r\\n    {{ 'order.settle-refund-manual-instructions' | translate: { method: refund.method } }}\\r\\n</p>\\r\\n<clr-input-container>\\r\\n    <label>{{ 'order.transaction-id' | translate }}</label>\\r\\n    <input clrInput name=\\\"transactionId\\\" [(ngModel)]=\\\"transactionId\\\" />\\r\\n</clr-input-container>\\r\\n\\r\\n<ng-template vdrDialogButtons>\\r\\n    <button type=\\\"button\\\" class=\\\"btn\\\" (click)=\\\"cancel()\\\">{{ 'common.cancel' | translate }}</button>\\r\\n    <button type=\\\"submit\\\" (click)=\\\"submit()\\\" [disabled]=\\\"!transactionId\\\" class=\\\"btn btn-primary\\\">\\r\\n        {{ 'order.settle-refund' | translate }}\\r\\n    </button>\\r\\n</ng-template>\\r\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\":host{padding-bottom:32px}.instruction{margin-top:0;margin-bottom:24px}\\n\"]\n            }]\n    }], function () { return []; }, null); })();\n\nclass OrderDetailComponent extends BaseDetailComponent {\r\n    constructor(router, route, serverConfigService, changeDetector, dataService, notificationService, modalService, orderTransitionService) {\r\n        super(route, router, serverConfigService, dataService);\r\n        this.changeDetector = changeDetector;\r\n        this.dataService = dataService;\r\n        this.notificationService = notificationService;\r\n        this.modalService = modalService;\r\n        this.orderTransitionService = orderTransitionService;\r\n        this.detailForm = new FormGroup({});\r\n        this.fetchHistory = new Subject();\r\n        this.defaultStates = [\r\n            'AddingItems',\r\n            'ArrangingPayment',\r\n            'PaymentAuthorized',\r\n            'PaymentSettled',\r\n            'PartiallyShipped',\r\n            'Shipped',\r\n            'PartiallyDelivered',\r\n            'Delivered',\r\n            'Cancelled',\r\n            'Modifying',\r\n            'ArrangingAdditionalPayment',\r\n        ];\r\n    }\r\n    ngOnInit() {\r\n        this.init();\r\n        this.entity$.pipe(take(1)).subscribe(order => {\r\n            if (order.state === 'Modifying') {\r\n                this.router.navigate(['./', 'modify'], { relativeTo: this.route });\r\n            }\r\n        });\r\n        this.customFields = this.getCustomFieldConfig('Order');\r\n        this.orderLineCustomFields = this.getCustomFieldConfig('OrderLine');\r\n        this.history$ = this.fetchHistory.pipe(startWith(null), switchMap(() => {\r\n            return this.dataService.order\r\n                .getOrderHistory(this.id, {\r\n                sort: {\r\n                    createdAt: SortOrder.DESC,\r\n                },\r\n            })\r\n                .mapStream(data => { var _a; return (_a = data.order) === null || _a === void 0 ? void 0 : _a.history.items; });\r\n        }));\r\n        this.nextStates$ = this.entity$.pipe(map(order => {\r\n            const isInCustomState = !this.defaultStates.includes(order.state);\r\n            return isInCustomState\r\n                ? order.nextStates\r\n                : order.nextStates.filter(s => !this.defaultStates.includes(s));\r\n        }));\r\n    }\r\n    ngOnDestroy() {\r\n        this.destroy();\r\n    }\r\n    openStateDiagram() {\r\n        this.entity$\r\n            .pipe(take(1), switchMap(order => this.modalService.fromComponent(OrderProcessGraphDialogComponent, {\r\n            closable: true,\r\n            locals: {\r\n                activeState: order.state,\r\n            },\r\n        })))\r\n            .subscribe();\r\n    }\r\n    transitionToState(state) {\r\n        this.dataService.order.transitionToState(this.id, state).subscribe(({ transitionOrderToState }) => {\r\n            switch (transitionOrderToState === null || transitionOrderToState === void 0 ? void 0 : transitionOrderToState.__typename) {\r\n                case 'Order':\r\n                    this.notificationService.success(marker('order.transitioned-to-state-success'), { state });\r\n                    this.fetchHistory.next();\r\n                    break;\r\n                case 'OrderStateTransitionError':\r\n                    this.notificationService.error(transitionOrderToState.transitionError);\r\n            }\r\n        });\r\n    }\r\n    manuallyTransitionToState(order) {\r\n        this.orderTransitionService\r\n            .manuallyTransitionToState({\r\n            orderId: order.id,\r\n            nextStates: order.nextStates,\r\n            cancellable: true,\r\n            message: marker('order.manually-transition-to-state-message'),\r\n            retry: 0,\r\n        })\r\n            .subscribe();\r\n    }\r\n    transitionToModifying() {\r\n        this.dataService.order\r\n            .transitionToState(this.id, 'Modifying')\r\n            .subscribe(({ transitionOrderToState }) => {\r\n            switch (transitionOrderToState === null || transitionOrderToState === void 0 ? void 0 : transitionOrderToState.__typename) {\r\n                case 'Order':\r\n                    this.router.navigate(['./modify'], { relativeTo: this.route });\r\n                    break;\r\n                case 'OrderStateTransitionError':\r\n                    this.notificationService.error(transitionOrderToState.transitionError);\r\n            }\r\n        });\r\n    }\r\n    updateCustomFields(customFieldsValue) {\r\n        this.dataService.order\r\n            .updateOrderCustomFields({\r\n            id: this.id,\r\n            customFields: customFieldsValue,\r\n        })\r\n            .subscribe(() => {\r\n            this.notificationService.success(marker('common.notify-update-success'), { entity: 'Order' });\r\n        });\r\n    }\r\n    getOrderAddressLines(orderAddress) {\r\n        if (!orderAddress) {\r\n            return [];\r\n        }\r\n        return Object.values(orderAddress)\r\n            .filter(val => val !== 'OrderAddress')\r\n            .filter(line => !!line);\r\n    }\r\n    settlePayment(payment) {\r\n        this.dataService.order.settlePayment(payment.id).subscribe(({ settlePayment }) => {\r\n            switch (settlePayment.__typename) {\r\n                case 'Payment':\r\n                    if (settlePayment.state === 'Settled') {\r\n                        this.notificationService.success(marker('order.settle-payment-success'));\r\n                    }\r\n                    else {\r\n                        this.notificationService.error(marker('order.settle-payment-error'));\r\n                    }\r\n                    this.dataService.order.getOrder(this.id).single$.subscribe();\r\n                    this.fetchHistory.next();\r\n                    break;\r\n                case 'OrderStateTransitionError':\r\n                case 'PaymentStateTransitionError':\r\n                case 'SettlePaymentError':\r\n                    this.notificationService.error(settlePayment.message);\r\n            }\r\n        });\r\n    }\r\n    transitionPaymentState({ payment, state }) {\r\n        if (state === 'Cancelled') {\r\n            this.dataService.order.cancelPayment(payment.id).subscribe(({ cancelPayment }) => {\r\n                switch (cancelPayment.__typename) {\r\n                    case 'Payment':\r\n                        this.notificationService.success(marker('order.transitioned-payment-to-state-success'), {\r\n                            state,\r\n                        });\r\n                        this.dataService.order.getOrder(this.id).single$.subscribe();\r\n                        this.fetchHistory.next();\r\n                        break;\r\n                    case 'PaymentStateTransitionError':\r\n                        this.notificationService.error(cancelPayment.transitionError);\r\n                        break;\r\n                    case 'CancelPaymentError':\r\n                        this.notificationService.error(cancelPayment.paymentErrorMessage);\r\n                        break;\r\n                }\r\n            });\r\n        }\r\n        else {\r\n            this.dataService.order\r\n                .transitionPaymentToState(payment.id, state)\r\n                .subscribe(({ transitionPaymentToState }) => {\r\n                switch (transitionPaymentToState.__typename) {\r\n                    case 'Payment':\r\n                        this.notificationService.success(marker('order.transitioned-payment-to-state-success'), {\r\n                            state,\r\n                        });\r\n                        this.dataService.order.getOrder(this.id).single$.subscribe();\r\n                        this.fetchHistory.next();\r\n                        break;\r\n                    case 'PaymentStateTransitionError':\r\n                        this.notificationService.error(transitionPaymentToState.message);\r\n                        break;\r\n                }\r\n            });\r\n        }\r\n    }\r\n    canAddFulfillment(order) {\r\n        var _a;\r\n        const allFulfillmentSummaryRows = ((_a = order.fulfillments) !== null && _a !== void 0 ? _a : []).reduce((all, fulfillment) => [...all, ...fulfillment.summary], []);\r\n        let allItemsFulfilled = true;\r\n        for (const line of order.lines) {\r\n            const totalFulfilledCount = allFulfillmentSummaryRows\r\n                .filter(row => row.orderLine.id === line.id)\r\n                .reduce((sum, row) => sum + row.quantity, 0);\r\n            if (totalFulfilledCount < line.quantity) {\r\n                allItemsFulfilled = false;\r\n            }\r\n        }\r\n        return (!allItemsFulfilled &&\r\n            !this.hasUnsettledModifications(order) &&\r\n            this.outstandingPaymentAmount(order) === 0 &&\r\n            (order.nextStates.includes('Shipped') ||\r\n                order.nextStates.includes('PartiallyShipped') ||\r\n                order.nextStates.includes('Delivered')));\r\n    }\r\n    hasUnsettledModifications(order) {\r\n        return 0 < order.modifications.filter(m => !m.isSettled).length;\r\n    }\r\n    getOutstandingModificationAmount(order) {\r\n        return summate(order.modifications.filter(m => !m.isSettled), 'priceChange');\r\n    }\r\n    outstandingPaymentAmount(order) {\r\n        var _a, _b, _c;\r\n        const paymentIsValid = (p) => p.state !== 'Cancelled' && p.state !== 'Declined' && p.state !== 'Error';\r\n        let amountCovered = 0;\r\n        for (const payment of (_b = (_a = order.payments) === null || _a === void 0 ? void 0 : _a.filter(paymentIsValid)) !== null && _b !== void 0 ? _b : []) {\r\n            const refunds = (_c = payment.refunds.filter(r => r.state !== 'Failed')) !== null && _c !== void 0 ? _c : [];\r\n            const refundsTotal = summate(refunds, 'total');\r\n            amountCovered += payment.amount - refundsTotal;\r\n        }\r\n        return order.totalWithTax - amountCovered;\r\n    }\r\n    addManualPayment(order) {\r\n        const priorState = order.state;\r\n        this.modalService\r\n            .fromComponent(AddManualPaymentDialogComponent, {\r\n            closable: true,\r\n            locals: {\r\n                outstandingAmount: this.outstandingPaymentAmount(order),\r\n                currencyCode: order.currencyCode,\r\n            },\r\n        })\r\n            .pipe(switchMap(result => {\r\n            if (result) {\r\n                return this.dataService.order.addManualPaymentToOrder({\r\n                    orderId: this.id,\r\n                    transactionId: result.transactionId,\r\n                    method: result.method,\r\n                    metadata: result.metadata || {},\r\n                });\r\n            }\r\n            else {\r\n                return EMPTY;\r\n            }\r\n        }), switchMap(({ addManualPaymentToOrder }) => {\r\n            switch (addManualPaymentToOrder.__typename) {\r\n                case 'Order':\r\n                    this.notificationService.success(marker('order.add-payment-to-order-success'));\r\n                    if (priorState === 'ArrangingAdditionalPayment') {\r\n                        return this.orderTransitionService.transitionToPreModifyingState(order.id, order.nextStates);\r\n                    }\r\n                    else {\r\n                        return this.dataService.order\r\n                            .transitionToState(this.id, 'PaymentSettled')\r\n                            .pipe(mapTo('PaymentSettled'));\r\n                    }\r\n                case 'ManualPaymentStateError':\r\n                    this.notificationService.error(addManualPaymentToOrder.message);\r\n                    return EMPTY;\r\n                default:\r\n                    return EMPTY;\r\n            }\r\n        }))\r\n            .subscribe(result => {\r\n            if (result) {\r\n                this.refetchOrder({ result });\r\n            }\r\n        });\r\n    }\r\n    fulfillOrder() {\r\n        this.entity$\r\n            .pipe(take(1), switchMap(order => {\r\n            return this.modalService.fromComponent(FulfillOrderDialogComponent, {\r\n                size: 'xl',\r\n                locals: {\r\n                    order,\r\n                },\r\n            });\r\n        }), switchMap(input => {\r\n            if (input) {\r\n                return this.dataService.order.createFulfillment(input);\r\n            }\r\n            else {\r\n                return of(undefined);\r\n            }\r\n        }), switchMap(result => this.refetchOrder(result).pipe(mapTo(result))))\r\n            .subscribe(result => {\r\n            if (result) {\r\n                const { addFulfillmentToOrder } = result;\r\n                switch (addFulfillmentToOrder.__typename) {\r\n                    case 'Fulfillment':\r\n                        this.notificationService.success(marker('order.create-fulfillment-success'));\r\n                        break;\r\n                    case 'EmptyOrderLineSelectionError':\r\n                    case 'InsufficientStockOnHandError':\r\n                    case 'ItemsAlreadyFulfilledError':\r\n                    case 'InvalidFulfillmentHandlerError':\r\n                        this.notificationService.error(addFulfillmentToOrder.message);\r\n                        break;\r\n                    case 'FulfillmentStateTransitionError':\r\n                        this.notificationService.error(addFulfillmentToOrder.transitionError);\r\n                        break;\r\n                    case 'CreateFulfillmentError':\r\n                        this.notificationService.error(addFulfillmentToOrder.fulfillmentHandlerError);\r\n                        break;\r\n                    case undefined:\r\n                        this.notificationService.error(JSON.stringify(addFulfillmentToOrder));\r\n                        break;\r\n                    default:\r\n                        assertNever(addFulfillmentToOrder);\r\n                }\r\n            }\r\n        });\r\n    }\r\n    transitionFulfillment(id, state) {\r\n        this.dataService.order\r\n            .transitionFulfillmentToState(id, state)\r\n            .pipe(switchMap(result => this.refetchOrder(result)))\r\n            .subscribe(() => {\r\n            this.notificationService.success(marker('order.successfully-updated-fulfillment'));\r\n        });\r\n    }\r\n    cancelOrRefund(order) {\r\n        const isRefundable = this.orderHasSettledPayments(order);\r\n        if (order.state === 'PaymentAuthorized' || order.active === true || !isRefundable) {\r\n            this.cancelOrder(order);\r\n        }\r\n        else {\r\n            this.refundOrder(order);\r\n        }\r\n    }\r\n    settleRefund(refund) {\r\n        this.modalService\r\n            .fromComponent(SettleRefundDialogComponent, {\r\n            size: 'md',\r\n            locals: {\r\n                refund,\r\n            },\r\n        })\r\n            .pipe(switchMap(transactionId => {\r\n            if (transactionId) {\r\n                return this.dataService.order.settleRefund({\r\n                    transactionId,\r\n                    id: refund.id,\r\n                }, this.id);\r\n            }\r\n            else {\r\n                return of(undefined);\r\n            }\r\n        }))\r\n            .subscribe(result => {\r\n            if (result) {\r\n                this.notificationService.success(marker('order.settle-refund-success'));\r\n            }\r\n        });\r\n    }\r\n    addNote(event) {\r\n        const { note, isPublic } = event;\r\n        this.dataService.order\r\n            .addNoteToOrder({\r\n            id: this.id,\r\n            note,\r\n            isPublic,\r\n        })\r\n            .pipe(switchMap(result => this.refetchOrder(result)))\r\n            .subscribe(result => {\r\n            this.notificationService.success(marker('common.notify-create-success'), {\r\n                entity: 'Note',\r\n            });\r\n        });\r\n    }\r\n    updateNote(entry) {\r\n        this.modalService\r\n            .fromComponent(EditNoteDialogComponent, {\r\n            closable: true,\r\n            locals: {\r\n                displayPrivacyControls: true,\r\n                note: entry.data.note,\r\n                noteIsPrivate: !entry.isPublic,\r\n            },\r\n        })\r\n            .pipe(switchMap(result => {\r\n            if (result) {\r\n                return this.dataService.order.updateOrderNote({\r\n                    noteId: entry.id,\r\n                    isPublic: !result.isPrivate,\r\n                    note: result.note,\r\n                });\r\n            }\r\n            else {\r\n                return EMPTY;\r\n            }\r\n        }))\r\n            .subscribe(result => {\r\n            this.fetchHistory.next();\r\n            this.notificationService.success(marker('common.notify-update-success'), {\r\n                entity: 'Note',\r\n            });\r\n        });\r\n    }\r\n    deleteNote(entry) {\r\n        return this.modalService\r\n            .dialog({\r\n            title: marker('common.confirm-delete-note'),\r\n            body: entry.data.note,\r\n            buttons: [\r\n                { type: 'secondary', label: marker('common.cancel') },\r\n                { type: 'danger', label: marker('common.delete'), returnValue: true },\r\n            ],\r\n        })\r\n            .pipe(switchMap(res => (res ? this.dataService.order.deleteOrderNote(entry.id) : EMPTY)))\r\n            .subscribe(() => {\r\n            this.fetchHistory.next();\r\n            this.notificationService.success(marker('common.notify-delete-success'), {\r\n                entity: 'Note',\r\n            });\r\n        });\r\n    }\r\n    orderHasSettledPayments(order) {\r\n        var _a;\r\n        return !!((_a = order.payments) === null || _a === void 0 ? void 0 : _a.find(p => p.state === 'Settled'));\r\n    }\r\n    cancelOrder(order) {\r\n        this.modalService\r\n            .fromComponent(CancelOrderDialogComponent, {\r\n            size: 'xl',\r\n            locals: {\r\n                order,\r\n            },\r\n        })\r\n            .pipe(switchMap(input => {\r\n            if (input) {\r\n                return this.dataService.order.cancelOrder(input);\r\n            }\r\n            else {\r\n                return of(undefined);\r\n            }\r\n        }), switchMap(result => this.refetchOrder(result)))\r\n            .subscribe(result => {\r\n            if (result) {\r\n                this.notificationService.success(marker('order.cancelled-order-success'));\r\n            }\r\n        });\r\n    }\r\n    refundOrder(order) {\r\n        this.modalService\r\n            .fromComponent(RefundOrderDialogComponent, {\r\n            size: 'xl',\r\n            locals: {\r\n                order,\r\n            },\r\n        })\r\n            .pipe(switchMap(input => {\r\n            var _a;\r\n            if (!input) {\r\n                return of(undefined);\r\n            }\r\n            if ((_a = input.cancel.lines) === null || _a === void 0 ? void 0 : _a.length) {\r\n                return this.dataService.order.cancelOrder(input.cancel).pipe(map(res => {\r\n                    const result = res.cancelOrder;\r\n                    switch (result.__typename) {\r\n                        case 'Order':\r\n                            this.refetchOrder(result).subscribe();\r\n                            this.notificationService.success(marker('order.cancelled-order-success'));\r\n                            return input;\r\n                        case 'CancelActiveOrderError':\r\n                        case 'QuantityTooGreatError':\r\n                        case 'MultipleOrderError':\r\n                        case 'OrderStateTransitionError':\r\n                        case 'EmptyOrderLineSelectionError':\r\n                            this.notificationService.error(result.message);\r\n                            return undefined;\r\n                    }\r\n                }));\r\n            }\r\n            else {\r\n                return [input];\r\n            }\r\n        }), switchMap(input => {\r\n            if (!input) {\r\n                return of(undefined);\r\n            }\r\n            if (input.refund.lines.length) {\r\n                return this.dataService.order\r\n                    .refundOrder(input.refund)\r\n                    .pipe(map(res => res.refundOrder));\r\n            }\r\n            else {\r\n                return [undefined];\r\n            }\r\n        }))\r\n            .subscribe(result => {\r\n            if (result) {\r\n                switch (result.__typename) {\r\n                    case 'Refund':\r\n                        this.refetchOrder(result).subscribe();\r\n                        if (result.state === 'Failed') {\r\n                            this.notificationService.error(marker('order.refund-order-failed'));\r\n                        }\r\n                        else {\r\n                            this.notificationService.success(marker('order.refund-order-success'));\r\n                        }\r\n                        break;\r\n                    case 'AlreadyRefundedError':\r\n                    case 'NothingToRefundError':\r\n                    case 'PaymentOrderMismatchError':\r\n                    case 'RefundOrderStateError':\r\n                    case 'RefundStateTransitionError':\r\n                        this.notificationService.error(result.message);\r\n                        break;\r\n                }\r\n            }\r\n        });\r\n    }\r\n    refetchOrder(result) {\r\n        this.fetchHistory.next();\r\n        if (result) {\r\n            return this.dataService.order.getOrder(this.id).single$;\r\n        }\r\n        else {\r\n            return of(undefined);\r\n        }\r\n    }\r\n    setFormValues(entity) {\r\n        // empty\r\n    }\r\n}\nOrderDetailComponent.fac = function OrderDetailComponent_Factory(t) { return new (t || OrderDetailComponent)(ngcc0.directiveInject(ngcc7.Router), ngcc0.directiveInject(ngcc7.ActivatedRoute), ngcc0.directiveInject(ngcc1.ServerConfigService), ngcc0.directiveInject(ngcc0.ChangeDetectorRef), ngcc0.directiveInject(ngcc1.DataService), ngcc0.directiveInject(ngcc1.NotificationService), ngcc0.directiveInject(ngcc1.ModalService), ngcc0.directiveInject(OrderTransitionService)); };\nOrderDetailComponent.cmp = /*@__PURE__*/ ngcc0.defineComponent({ type: OrderDetailComponent, selectors: [[\"vdr-order-detail\"]], features: [ngcc0.InheritDefinitionFeature], decls: 4, vars: 6, consts: [[4, \"ngIf\"], [1, \"flex\", \"clr-align-items-center\"], [3, \"entity\"], [3, \"state\"], [1, \"icon-button\", 3, \"title\", \"click\"], [\"shape\", \"list\"], [\"locationId\", \"order-detail\"], [\"class\", \"btn btn-primary\", 3, \"click\", 4, \"ngIf\"], [1, \"btn\", \"btn-primary\", 3, \"disabled\", \"click\"], [\"vdrDropdownTrigger\", \"\", 1, \"icon-button\"], [\"shape\", \"ellipsis-vertical\"], [\"vdrPosition\", \"bottom-right\"], [\"type\", \"button\", \"class\", \"btn\", \"vdrDropdownItem\", \"\", 3, \"click\", 4, \"ngIf\"], [1, \"dropdown-divider\"], [\"type\", \"button\", \"vdrDropdownItem\", \"\", 1, \"btn\", 3, \"click\"], [\"shape\", \"step-forward-2\", 1, \"is-warning\"], [1, \"btn\", \"btn-primary\", 3, \"click\"], [\"shape\", \"pencil\"], [\"shape\", \"error-standard\", 1, \"is-error\"], [4, \"ngIf\", \"ngIfElse\"], [\"cancelOnly\", \"\"], [\"type\", \"button\", \"class\", \"btn\", \"vdrDropdownItem\", \"\", 3, \"click\", 4, \"ngFor\", \"ngForOf\"], [\"shape\", \"step-forward-2\"], [1, \"clr-row\"], [1, \"clr-col-lg-8\"], [3, \"order\", \"orderLineCustomFields\"], [1, \"table\"], [4, \"ngFor\", \"ngForOf\"], [\"locationId\", \"order-detail\", 3, \"entity$\", \"detailForm\"], [3, \"order\", \"history\", \"addNote\", \"updateNote\", \"deleteNote\"], [1, \"clr-col-lg-4\", \"order-cards\"], [3, \"customFieldsConfig\", \"customFieldValues\", \"updateClick\"], [1, \"card\"], [1, \"card-header\"], [1, \"card-block\"], [1, \"card-text\"], [3, \"customer\"], [3, \"address\"], [3, \"currencyCode\", \"payment\", \"settlePayment\", \"transitionPaymentState\", \"settleRefund\", 4, \"ngFor\", \"ngForOf\"], [3, \"currencyCode\", \"payment\", \"settlePayment\", \"transitionPaymentState\", \"settleRefund\"], [3, \"fulfillment\", \"order\", \"transitionState\"]], template: function OrderDetailComponent_Template(rf, ctx) { if (rf & 1) {\n        ngcc0.template(0, OrderDetailComponent_vdr_action_bar_0_Template, 29, 21, \"vdr-action-bar\", 0);\n        ngcc0.pipe(1, \"async\");\n        ngcc0.template(2, OrderDetailComponent_div_2_Template, 42, 36, \"div\", 0);\n        ngcc0.pipe(3, \"async\");\n    } if (rf & 2) {\n        ngcc0.property(\"ngIf\", ngcc0.pipeBind1(1, 2, ctx.entity$));\n        ngcc0.advance(2);\n        ngcc0.property(\"ngIf\", ngcc0.pipeBind1(3, 4, ctx.entity$));\n    } }, directives: function () { return [ngcc5.NgIf, ngcc1.ActionBarComponent, ngcc1.ActionBarLeftComponent, ngcc1.EntityInfoComponent, ngcc1.OrderStateLabelComponent, ngcc6.ClrIconCustomTag, ngcc1.ActionBarRightComponent, ngcc1.ActionBarItemsComponent, ngcc1.DropdownComponent, ngcc1.DropdownTriggerDirective, ngcc1.DropdownMenuComponent, ngcc1.DropdownItemDirective, ngcc5.NgForOf, OrderTableComponent, ngcc1.CustomDetailComponentHostComponent, OrderHistoryComponent, OrderCustomFieldsCardComponent, ngcc1.CustomerLabelComponent, ngcc1.FormattedAddressComponent, OrderPaymentCardComponent, FulfillmentCardComponent]; }, pipes: function () { return [ngcc5.AsyncPipe, ngcc4.TranslatePipe, ngcc1.LocaleCurrencyPipe, ngcc1.StateI18nTokenPipe, ngcc5.PercentPipe]; }, styles: [\".shipping-address[_ngcontent-%COMP%]{list-style-type:none;line-height:1.3em}.order-cards[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{margin-top:6px;color:var(--color-text-200)}\"], changeDetection: 0 });\r\nOrderDetailComponent.ctorParameters = () => [\r\n    { type: Router },\r\n    { type: ActivatedRoute },\r\n    { type: ServerConfigService },\r\n    { type: ChangeDetectorRef },\r\n    { type: DataService },\r\n    { type: NotificationService },\r\n    { type: ModalService },\r\n    { type: OrderTransitionService }\r\n];\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ngcc0.setClassMetadata(OrderDetailComponent, [{\n        type: Component,\n        args: [{\n                selector: 'vdr-order-detail',\n                template: \"<vdr-action-bar *ngIf=\\\"entity$ | async as order\\\">\\r\\n    <vdr-ab-left>\\r\\n        <div class=\\\"flex clr-align-items-center\\\">\\r\\n            <vdr-entity-info [entity]=\\\"entity$ | async\\\"></vdr-entity-info>\\r\\n            <vdr-order-state-label [state]=\\\"order.state\\\">\\r\\n                <button\\r\\n                    class=\\\"icon-button\\\"\\r\\n                    (click)=\\\"openStateDiagram()\\\"\\r\\n                    [title]=\\\"'order.order-state-diagram' | translate\\\"\\r\\n                >\\r\\n                    <clr-icon shape=\\\"list\\\"></clr-icon>\\r\\n                </button>\\r\\n            </vdr-order-state-label>\\r\\n        </div>\\r\\n    </vdr-ab-left>\\r\\n\\r\\n    <vdr-ab-right>\\r\\n        <vdr-action-bar-items locationId=\\\"order-detail\\\"></vdr-action-bar-items>\\r\\n        <button\\r\\n            class=\\\"btn btn-primary\\\"\\r\\n            *ngIf=\\\"\\r\\n                (order.state === 'ArrangingPayment' || order.state === 'ArrangingAdditionalPayment') &&\\r\\n                (hasUnsettledModifications(order) || 0 < outstandingPaymentAmount(order))\\r\\n            \\\"\\r\\n            (click)=\\\"addManualPayment(order)\\\"\\r\\n        >\\r\\n            {{ 'order.add-payment-to-order' | translate }}\\r\\n            ({{ outstandingPaymentAmount(order) | localeCurrency: order.currencyCode }})\\r\\n        </button>\\r\\n        <button\\r\\n            class=\\\"btn btn-primary\\\"\\r\\n            *ngIf=\\\"\\r\\n                order.active === false &&\\r\\n                order.state !== 'ArrangingAdditionalPayment' &&\\r\\n                order.state !== 'ArrangingPayment' &&\\r\\n                0 < outstandingPaymentAmount(order)\\r\\n            \\\"\\r\\n            (click)=\\\"transitionToState('ArrangingAdditionalPayment')\\\"\\r\\n        >\\r\\n            {{ 'order.arrange-additional-payment' | translate }}\\r\\n        </button>\\r\\n        <button class=\\\"btn btn-primary\\\" (click)=\\\"fulfillOrder()\\\" [disabled]=\\\"!canAddFulfillment(order)\\\">\\r\\n            {{ 'order.fulfill-order' | translate }}\\r\\n        </button>\\r\\n        <vdr-dropdown>\\r\\n            <button class=\\\"icon-button\\\" vdrDropdownTrigger>\\r\\n                <clr-icon shape=\\\"ellipsis-vertical\\\"></clr-icon>\\r\\n            </button>\\r\\n            <vdr-dropdown-menu vdrPosition=\\\"bottom-right\\\">\\r\\n                <ng-container *ngIf=\\\"order.nextStates.includes('Modifying')\\\">\\r\\n                    <button type=\\\"button\\\" class=\\\"btn\\\" vdrDropdownItem (click)=\\\"transitionToModifying()\\\">\\r\\n                        <clr-icon shape=\\\"pencil\\\"></clr-icon>\\r\\n                        {{ 'order.modify-order' | translate }}\\r\\n                    </button>\\r\\n                    <div class=\\\"dropdown-divider\\\"></div>\\r\\n                </ng-container>\\r\\n                <button\\r\\n                    type=\\\"button\\\"\\r\\n                    class=\\\"btn\\\"\\r\\n                    vdrDropdownItem\\r\\n                    *ngIf=\\\"order.nextStates.includes('Cancelled')\\\"\\r\\n                    (click)=\\\"cancelOrRefund(order)\\\"\\r\\n                >\\r\\n                    <clr-icon shape=\\\"error-standard\\\" class=\\\"is-error\\\"></clr-icon>\\r\\n                    <ng-container *ngIf=\\\"orderHasSettledPayments(order); else cancelOnly\\\">\\r\\n                        {{ 'order.refund-and-cancel-order' | translate }}\\r\\n                    </ng-container>\\r\\n                    <ng-template #cancelOnly>\\r\\n                        {{ 'order.cancel-order' | translate }}\\r\\n                    </ng-template>\\r\\n                </button>\\r\\n\\r\\n                <ng-container *ngIf=\\\"(nextStates$ | async)?.length\\\">\\r\\n                    <div class=\\\"dropdown-divider\\\"></div>\\r\\n                    <button\\r\\n                        *ngFor=\\\"let nextState of nextStates$ | async\\\"\\r\\n                        type=\\\"button\\\"\\r\\n                        class=\\\"btn\\\"\\r\\n                        vdrDropdownItem\\r\\n                        (click)=\\\"transitionToState(nextState)\\\"\\r\\n                    >\\r\\n                        <clr-icon shape=\\\"step-forward-2\\\"></clr-icon>\\r\\n                        {{\\r\\n                            'order.transition-to-state'\\r\\n                                | translate: { state: (nextState | stateI18nToken | translate) }\\r\\n                        }}\\r\\n                    </button>\\r\\n                </ng-container>\\r\\n                <div class=\\\"dropdown-divider\\\"></div>\\r\\n                <button type=\\\"button\\\" class=\\\"btn\\\" vdrDropdownItem (click)=\\\"manuallyTransitionToState(order)\\\">\\r\\n                    <clr-icon shape=\\\"step-forward-2\\\" class=\\\"is-warning\\\"></clr-icon>\\r\\n                    {{ 'order.manually-transition-to-state' | translate }}\\r\\n                </button>\\r\\n            </vdr-dropdown-menu>\\r\\n        </vdr-dropdown>\\r\\n    </vdr-ab-right>\\r\\n</vdr-action-bar>\\r\\n\\r\\n<div *ngIf=\\\"entity$ | async as order\\\">\\r\\n    <div class=\\\"clr-row\\\">\\r\\n        <div class=\\\"clr-col-lg-8\\\">\\r\\n            <vdr-order-table\\r\\n                [order]=\\\"order\\\"\\r\\n                [orderLineCustomFields]=\\\"orderLineCustomFields\\\"\\r\\n            ></vdr-order-table>\\r\\n            <h4>{{ 'order.tax-summary' | translate }}</h4>\\r\\n            <table class=\\\"table\\\">\\r\\n                <thead>\\r\\n                    <tr>\\r\\n                        <th>{{ 'common.description' | translate }}</th>\\r\\n                        <th>{{ 'order.tax-rate' | translate }}</th>\\r\\n                        <th>{{ 'order.tax-base' | translate }}</th>\\r\\n                        <th>{{ 'order.tax-total' | translate }}</th>\\r\\n                    </tr>\\r\\n                </thead>\\r\\n                <tbody>\\r\\n                    <tr *ngFor=\\\"let row of order.taxSummary\\\">\\r\\n                        <td>{{ row.description }}</td>\\r\\n                        <td>{{ row.taxRate / 100 | percent }}</td>\\r\\n                        <td>{{ row.taxBase | localeCurrency: order.currencyCode }}</td>\\r\\n                        <td>{{ row.taxTotal | localeCurrency: order.currencyCode }}</td>\\r\\n                    </tr>\\r\\n                </tbody>\\r\\n            </table>\\r\\n\\r\\n            <vdr-custom-detail-component-host\\r\\n                locationId=\\\"order-detail\\\"\\r\\n                [entity$]=\\\"entity$\\\"\\r\\n                [detailForm]=\\\"detailForm\\\"\\r\\n            ></vdr-custom-detail-component-host>\\r\\n\\r\\n            <vdr-order-history\\r\\n                [order]=\\\"order\\\"\\r\\n                [history]=\\\"history$ | async\\\"\\r\\n                (addNote)=\\\"addNote($event)\\\"\\r\\n                (updateNote)=\\\"updateNote($event)\\\"\\r\\n                (deleteNote)=\\\"deleteNote($event)\\\"\\r\\n            ></vdr-order-history>\\r\\n        </div>\\r\\n        <div class=\\\"clr-col-lg-4 order-cards\\\">\\r\\n            <vdr-order-custom-fields-card\\r\\n                [customFieldsConfig]=\\\"customFields\\\"\\r\\n                [customFieldValues]=\\\"order.customFields\\\"\\r\\n                (updateClick)=\\\"updateCustomFields($event)\\\"\\r\\n            ></vdr-order-custom-fields-card>\\r\\n            <div class=\\\"card\\\">\\r\\n                <div class=\\\"card-header\\\">\\r\\n                    {{ 'order.customer' | translate }}\\r\\n                </div>\\r\\n                <div class=\\\"card-block\\\">\\r\\n                    <div class=\\\"card-text\\\">\\r\\n                        <vdr-customer-label [customer]=\\\"order.customer\\\"></vdr-customer-label>\\r\\n                        <h6 *ngIf=\\\"getOrderAddressLines(order.shippingAddress).length\\\">\\r\\n                            {{ 'order.shipping-address' | translate }}\\r\\n                        </h6>\\r\\n                        <vdr-formatted-address [address]=\\\"order.shippingAddress\\\"></vdr-formatted-address>\\r\\n                        <h6 *ngIf=\\\"getOrderAddressLines(order.billingAddress).length\\\">\\r\\n                            {{ 'order.billing-address' | translate }}\\r\\n                        </h6>\\r\\n                        <vdr-formatted-address [address]=\\\"order.billingAddress\\\"></vdr-formatted-address>\\r\\n                    </div>\\r\\n                </div>\\r\\n            </div>\\r\\n            <ng-container *ngIf=\\\"order.payments && order.payments.length\\\">\\r\\n                <vdr-order-payment-card\\r\\n                    *ngFor=\\\"let payment of order.payments\\\"\\r\\n                    [currencyCode]=\\\"order.currencyCode\\\"\\r\\n                    [payment]=\\\"payment\\\"\\r\\n                    (settlePayment)=\\\"settlePayment($event)\\\"\\r\\n                    (transitionPaymentState)=\\\"transitionPaymentState($event)\\\"\\r\\n                    (settleRefund)=\\\"settleRefund($event)\\\"\\r\\n                ></vdr-order-payment-card>\\r\\n            </ng-container>\\r\\n            <ng-container *ngFor=\\\"let fulfillment of order.fulfillments\\\">\\r\\n                <vdr-fulfillment-card\\r\\n                    [fulfillment]=\\\"fulfillment\\\"\\r\\n                    [order]=\\\"order\\\"\\r\\n                    (transitionState)=\\\"transitionFulfillment(fulfillment.id, $event)\\\"\\r\\n                ></vdr-fulfillment-card>\\r\\n            </ng-container>\\r\\n        </div>\\r\\n    </div>\\r\\n</div>\\r\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\".shipping-address{list-style-type:none;line-height:1.3em}.order-cards h6{margin-top:6px;color:var(--color-text-200)}\\n\"]\n            }]\n    }], function () { return [{ type: ngcc7.Router }, { type: ngcc7.ActivatedRoute }, { type: ngcc1.ServerConfigService }, { type: ngcc0.ChangeDetectorRef }, { type: ngcc1.DataService }, { type: ngcc1.NotificationService }, { type: ngcc1.ModalService }, { type: OrderTransitionService }]; }, null); })();\n\nvar OrderEditResultType;\r\n(function (OrderEditResultType) {\r\n    OrderEditResultType[OrderEditResultType[\"Refund\"] = 0] = \"Refund\";\r\n    OrderEditResultType[OrderEditResultType[\"Payment\"] = 1] = \"Payment\";\r\n    OrderEditResultType[OrderEditResultType[\"PriceUnchanged\"] = 2] = \"PriceUnchanged\";\r\n    OrderEditResultType[OrderEditResultType[\"Cancel\"] = 3] = \"Cancel\";\r\n})(OrderEditResultType || (OrderEditResultType = {}));\r\nclass OrderEditsPreviewDialogComponent {\r\n    get priceDifference() {\r\n        return this.order.totalWithTax - this.originalTotalWithTax;\r\n    }\r\n    ngOnInit() {\r\n        this.refundNote = this.modifyOrderInput.note || '';\r\n    }\r\n    cancel() {\r\n        this.resolveWith({\r\n            result: OrderEditResultType.Cancel,\r\n        });\r\n    }\r\n    submit() {\r\n        if (0 < this.priceDifference) {\r\n            this.resolveWith({\r\n                result: OrderEditResultType.Payment,\r\n            });\r\n        }\r\n        else if (this.priceDifference < 0) {\r\n            this.resolveWith({\r\n                result: OrderEditResultType.Refund,\r\n                // tslint:disable-next-line:no-non-null-assertion\r\n                refundPaymentId: this.selectedPayment.id,\r\n                refundNote: this.refundNote,\r\n            });\r\n        }\r\n        else {\r\n            this.resolveWith({\r\n                result: OrderEditResultType.PriceUnchanged,\r\n            });\r\n        }\r\n    }\r\n}\nOrderEditsPreviewDialogComponent.fac = function OrderEditsPreviewDialogComponent_Factory(t) { return new (t || OrderEditsPreviewDialogComponent)(); };\nOrderEditsPreviewDialogComponent.cmp = /*@__PURE__*/ ngcc0.defineComponent({ type: OrderEditsPreviewDialogComponent, selectors: [[\"vdr-order-edits-preview-dialog\"]], decls: 10, vars: 10, consts: [[\"vdrDialogTitle\", \"\"], [3, \"order\", \"orderLineCustomFields\"], [1, \"h4\"], [4, \"ngIf\"], [\"vdrDialogButtons\", \"\"], [\"clrSelect\", \"\", \"name\", \"options\", 3, \"ngModel\", \"ngModelChange\"], [3, \"ngValue\", 4, \"ngFor\", \"ngForOf\"], [1, \"clr-control-label\"], [\"name\", \"refundNote\", \"clrTextarea\", \"\", \"required\", \"\", 3, \"ngModel\", \"ngModelChange\"], [3, \"ngValue\"], [\"type\", \"button\", 1, \"btn\", 3, \"click\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", 3, \"disabled\", \"click\"]], template: function OrderEditsPreviewDialogComponent_Template(rf, ctx) { if (rf & 1) {\n        ngcc0.template(0, OrderEditsPreviewDialogComponent_ng_template_0_Template, 2, 3, \"ng-template\", 0);\n        ngcc0.element(1, \"vdr-order-table\", 1);\n        ngcc0.elementStart(2, \"h4\", 2);\n        ngcc0.text(3);\n        ngcc0.pipe(4, \"translate\");\n        ngcc0.elementStart(5, \"strong\");\n        ngcc0.text(6);\n        ngcc0.pipe(7, \"localeCurrency\");\n        ngcc0.elementEnd();\n        ngcc0.elementEnd();\n        ngcc0.template(8, OrderEditsPreviewDialogComponent_div_8_Template, 11, 9, \"div\", 3);\n        ngcc0.template(9, OrderEditsPreviewDialogComponent_ng_template_9_Template, 6, 7, \"ng-template\", 4);\n    } if (rf & 2) {\n        ngcc0.advance(1);\n        ngcc0.property(\"order\", ctx.order)(\"orderLineCustomFields\", ctx.orderLineCustomFields);\n        ngcc0.advance(2);\n        ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(4, 5, \"order.modify-order-price-difference\"), \": \");\n        ngcc0.advance(3);\n        ngcc0.textInterpolate(ngcc0.pipeBind2(7, 7, ctx.priceDifference, ctx.order.currencyCode));\n        ngcc0.advance(2);\n        ngcc0.property(\"ngIf\", ctx.priceDifference < 0);\n    } }, directives: function () { return [ngcc1.DialogTitleDirective, OrderTableComponent, ngcc5.NgIf, ngcc1.DialogButtonsDirective, ngcc6.ClrSelectContainer, ngcc6.ClrLabel, ngcc1.FormFieldControlDirective, ngcc2.SelectControlValueAccessor, ngcc6.ClrSelect, ngcc2.NgControlStatus, ngcc2.NgModel, ngcc5.NgForOf, ngcc2.DefaultValueAccessor, ngcc6.ClrTextarea, ngcc2.RequiredValidator, ngcc2.NgSelectOption, ngcc2.NgSelectMultipleOption]; }, pipes: function () { return [ngcc4.TranslatePipe, ngcc1.LocaleCurrencyPipe]; }, styles: [\"\"], changeDetection: 0 });\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ngcc0.setClassMetadata(OrderEditsPreviewDialogComponent, [{\n        type: Component,\n        args: [{\n                selector: 'vdr-order-edits-preview-dialog',\n                template: \"<ng-template vdrDialogTitle>{{ 'order.confirm-modifications' | translate }}</ng-template>\\r\\n<vdr-order-table [order]=\\\"order\\\" [orderLineCustomFields]=\\\"orderLineCustomFields\\\"></vdr-order-table>\\r\\n\\r\\n<h4 class=\\\"h4\\\">\\r\\n    {{ 'order.modify-order-price-difference' | translate }}:\\r\\n    <strong>{{ priceDifference | localeCurrency: order.currencyCode }}</strong>\\r\\n</h4>\\r\\n<div *ngIf=\\\"priceDifference < 0\\\">\\r\\n<clr-select-container>\\r\\n    <label>{{ 'order.payment-to-refund' | translate }}</label>\\r\\n    <select clrSelect name=\\\"options\\\" [(ngModel)]=\\\"selectedPayment\\\">\\r\\n        <option\\r\\n            *ngFor=\\\"let payment of order.payments\\\"\\r\\n            [ngValue]=\\\"payment\\\"\\r\\n        >\\r\\n            #{{ payment.id }} {{ payment.method }}:\\r\\n            {{ payment.amount | localeCurrency: order.currencyCode }}\\r\\n        </option>\\r\\n    </select>\\r\\n</clr-select-container>\\r\\n    <label class=\\\"clr-control-label\\\">{{ 'order.refund-cancellation-reason' | translate }}</label>\\r\\n    <textarea [(ngModel)]=\\\"refundNote\\\" name=\\\"refundNote\\\" clrTextarea required></textarea>\\r\\n</div>\\r\\n<ng-template vdrDialogButtons>\\r\\n    <button type=\\\"button\\\" class=\\\"btn\\\" (click)=\\\"cancel()\\\">{{ 'common.cancel' | translate }}</button>\\r\\n    <button type=\\\"submit\\\" (click)=\\\"submit()\\\" [disabled]=\\\"priceDifference < 0 && !selectedPayment\\\" class=\\\"btn btn-primary\\\">\\r\\n        {{ 'common.confirm' | translate }}\\r\\n    </button>\\r\\n</ng-template>\\r\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\"\"]\n            }]\n    }], null, null); })();\n\nclass OrderEditorComponent extends BaseDetailComponent {\r\n    constructor(router, route, serverConfigService, changeDetector, dataService, notificationService, modalService, orderTransitionService) {\r\n        super(route, router, serverConfigService, dataService);\r\n        this.changeDetector = changeDetector;\r\n        this.dataService = dataService;\r\n        this.notificationService = notificationService;\r\n        this.modalService = modalService;\r\n        this.orderTransitionService = orderTransitionService;\r\n        this.detailForm = new FormGroup({});\r\n        this.couponCodesControl = new FormControl();\r\n        this.modifyOrderInput = {\r\n            dryRun: true,\r\n            orderId: '',\r\n            addItems: [],\r\n            adjustOrderLines: [],\r\n            surcharges: [],\r\n            note: '',\r\n            updateShippingAddress: {},\r\n            updateBillingAddress: {},\r\n        };\r\n        this.note = '';\r\n        this.recalculateShipping = true;\r\n        this.addedVariants = new Map();\r\n    }\r\n    get addedLines() {\r\n        const getSinglePriceValue = (price) => price.__typename === 'SinglePrice' ? price.value : 0;\r\n        return (this.modifyOrderInput.addItems || [])\r\n            .map(row => {\r\n            const variantInfo = this.addedVariants.get(row.productVariantId);\r\n            if (variantInfo) {\r\n                return Object.assign(Object.assign({}, variantInfo), { price: getSinglePriceValue(variantInfo.price), priceWithTax: getSinglePriceValue(variantInfo.priceWithTax), quantity: row.quantity });\r\n            }\r\n        })\r\n            .filter(notNullOrUndefined);\r\n    }\r\n    ngOnInit() {\r\n        this.init();\r\n        this.dataService.promotion.getPromotions();\r\n        this.addressCustomFields = this.getCustomFieldConfig('Address');\r\n        this.modifyOrderInput.orderId = this.route.snapshot.paramMap.get('id');\r\n        this.orderLineCustomFields = this.getCustomFieldConfig('OrderLine');\r\n        this.entity$.pipe(takeUntil(this.destroy$)).subscribe(order => {\r\n            var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q, _r, _s, _t;\r\n            if (order.couponCodes.length) {\r\n                this.couponCodesControl.setValue(order.couponCodes);\r\n            }\r\n            this.surchargeForm = new FormGroup({\r\n                description: new FormControl('', Validators.required),\r\n                sku: new FormControl(''),\r\n                price: new FormControl(0, Validators.required),\r\n                priceIncludesTax: new FormControl(true),\r\n                taxRate: new FormControl(0),\r\n                taxDescription: new FormControl(''),\r\n            });\r\n            if (!this.shippingAddressForm) {\r\n                this.shippingAddressForm = new FormGroup({\r\n                    fullName: new FormControl((_a = order.shippingAddress) === null || _a === void 0 ? void 0 : _a.fullName),\r\n                    company: new FormControl((_b = order.shippingAddress) === null || _b === void 0 ? void 0 : _b.company),\r\n                    streetLine1: new FormControl((_c = order.shippingAddress) === null || _c === void 0 ? void 0 : _c.streetLine1),\r\n                    streetLine2: new FormControl((_d = order.shippingAddress) === null || _d === void 0 ? void 0 : _d.streetLine2),\r\n                    city: new FormControl((_e = order.shippingAddress) === null || _e === void 0 ? void 0 : _e.city),\r\n                    province: new FormControl((_f = order.shippingAddress) === null || _f === void 0 ? void 0 : _f.province),\r\n                    postalCode: new FormControl((_g = order.shippingAddress) === null || _g === void 0 ? void 0 : _g.postalCode),\r\n                    countryCode: new FormControl((_h = order.shippingAddress) === null || _h === void 0 ? void 0 : _h.countryCode),\r\n                    phoneNumber: new FormControl((_j = order.shippingAddress) === null || _j === void 0 ? void 0 : _j.phoneNumber),\r\n                });\r\n                this.addAddressCustomFieldsFormGroup(this.shippingAddressForm, order.shippingAddress);\r\n            }\r\n            if (!this.billingAddressForm) {\r\n                this.billingAddressForm = new FormGroup({\r\n                    fullName: new FormControl((_k = order.billingAddress) === null || _k === void 0 ? void 0 : _k.fullName),\r\n                    company: new FormControl((_l = order.billingAddress) === null || _l === void 0 ? void 0 : _l.company),\r\n                    streetLine1: new FormControl((_m = order.billingAddress) === null || _m === void 0 ? void 0 : _m.streetLine1),\r\n                    streetLine2: new FormControl((_o = order.billingAddress) === null || _o === void 0 ? void 0 : _o.streetLine2),\r\n                    city: new FormControl((_p = order.billingAddress) === null || _p === void 0 ? void 0 : _p.city),\r\n                    province: new FormControl((_q = order.billingAddress) === null || _q === void 0 ? void 0 : _q.province),\r\n                    postalCode: new FormControl((_r = order.billingAddress) === null || _r === void 0 ? void 0 : _r.postalCode),\r\n                    countryCode: new FormControl((_s = order.billingAddress) === null || _s === void 0 ? void 0 : _s.countryCode),\r\n                    phoneNumber: new FormControl((_t = order.billingAddress) === null || _t === void 0 ? void 0 : _t.phoneNumber),\r\n                });\r\n                this.addAddressCustomFieldsFormGroup(this.billingAddressForm, order.billingAddress);\r\n            }\r\n            this.orderLineCustomFieldsFormArray = new FormArray([]);\r\n            for (const line of order.lines) {\r\n                const formGroup = new FormGroup({});\r\n                for (const { name } of this.orderLineCustomFields) {\r\n                    formGroup.addControl(name, new FormControl(line.customFields[name]));\r\n                }\r\n                formGroup.valueChanges.pipe(takeUntil(this.destroy$)).subscribe(value => {\r\n                    let modifyRow = this.modifyOrderInput.adjustOrderLines.find(l => l.orderLineId === line.id);\r\n                    if (!modifyRow) {\r\n                        modifyRow = {\r\n                            orderLineId: line.id,\r\n                            quantity: line.quantity,\r\n                        };\r\n                        this.modifyOrderInput.adjustOrderLines.push(modifyRow);\r\n                    }\r\n                    if (this.orderLineCustomFields.length) {\r\n                        modifyRow.customFields = value;\r\n                    }\r\n                });\r\n                this.orderLineCustomFieldsFormArray.push(formGroup);\r\n            }\r\n        });\r\n        this.addItemCustomFieldsFormArray = new FormArray([]);\r\n        this.addItemCustomFieldsForm = new FormGroup({});\r\n        for (const customField of this.orderLineCustomFields) {\r\n            this.addItemCustomFieldsForm.addControl(customField.name, new FormControl());\r\n        }\r\n        this.availableCountries$ = this.dataService.settings\r\n            .getAvailableCountries()\r\n            .mapSingle(result => result.countries.items)\r\n            .pipe(shareReplay(1));\r\n        this.dataService.order\r\n            .getOrderHistory(this.id, {\r\n            take: 1,\r\n            sort: {\r\n                createdAt: SortOrder.DESC,\r\n            },\r\n            filter: { type: { eq: HistoryEntryType.ORDER_STATE_TRANSITION } },\r\n        })\r\n            .single$.subscribe(({ order }) => {\r\n            this.previousState = order === null || order === void 0 ? void 0 : order.history.items[0].data.from;\r\n        });\r\n    }\r\n    ngOnDestroy() {\r\n        this.destroy();\r\n    }\r\n    transitionToPriorState(order) {\r\n        this.orderTransitionService\r\n            .transitionToPreModifyingState(order.id, order.nextStates)\r\n            .subscribe(result => {\r\n            this.router.navigate(['..'], { relativeTo: this.route });\r\n        });\r\n    }\r\n    canPreviewChanges() {\r\n        const { addItems, adjustOrderLines, surcharges } = this.modifyOrderInput;\r\n        return (!!(addItems === null || addItems === void 0 ? void 0 : addItems.length) ||\r\n            !!(surcharges === null || surcharges === void 0 ? void 0 : surcharges.length) ||\r\n            !!(adjustOrderLines === null || adjustOrderLines === void 0 ? void 0 : adjustOrderLines.length) ||\r\n            (this.shippingAddressForm.dirty && this.shippingAddressForm.valid) ||\r\n            (this.billingAddressForm.dirty && this.billingAddressForm.valid) ||\r\n            this.couponCodesControl.dirty);\r\n    }\r\n    isLineModified(line) {\r\n        var _a;\r\n        return !!((_a = this.modifyOrderInput.adjustOrderLines) === null || _a === void 0 ? void 0 : _a.find(l => l.orderLineId === line.id && l.quantity !== line.quantity));\r\n    }\r\n    updateLineQuantity(line, quantity) {\r\n        const { adjustOrderLines } = this.modifyOrderInput;\r\n        let row = adjustOrderLines === null || adjustOrderLines === void 0 ? void 0 : adjustOrderLines.find(l => l.orderLineId === line.id);\r\n        if (row && +quantity === line.quantity) {\r\n            // Remove the modification if the quantity is the same as\r\n            // the original order\r\n            adjustOrderLines === null || adjustOrderLines === void 0 ? void 0 : adjustOrderLines.splice(adjustOrderLines === null || adjustOrderLines === void 0 ? void 0 : adjustOrderLines.indexOf(row), 1);\r\n        }\r\n        if (!row) {\r\n            row = { orderLineId: line.id, quantity: +quantity };\r\n            adjustOrderLines === null || adjustOrderLines === void 0 ? void 0 : adjustOrderLines.push(row);\r\n        }\r\n        row.quantity = +quantity;\r\n    }\r\n    updateAddedItemQuantity(item, quantity) {\r\n        var _a;\r\n        const row = (_a = this.modifyOrderInput.addItems) === null || _a === void 0 ? void 0 : _a.find(l => l.productVariantId === item.productVariantId);\r\n        if (row) {\r\n            row.quantity = +quantity;\r\n        }\r\n    }\r\n    trackByProductVariantId(index, item) {\r\n        return item.productVariantId;\r\n    }\r\n    getSelectedItemPrice(result) {\r\n        switch (result === null || result === void 0 ? void 0 : result.priceWithTax.__typename) {\r\n            case 'SinglePrice':\r\n                return result.priceWithTax.value;\r\n            default:\r\n                return 0;\r\n        }\r\n    }\r\n    addItemToOrder(result) {\r\n        var _a, _b;\r\n        if (!result) {\r\n            return;\r\n        }\r\n        const customFields = this.orderLineCustomFields.length\r\n            ? this.addItemCustomFieldsForm.value\r\n            : undefined;\r\n        let row = (_a = this.modifyOrderInput.addItems) === null || _a === void 0 ? void 0 : _a.find(l => this.isMatchingAddItemRow(l, result, customFields));\r\n        if (!row) {\r\n            row = { productVariantId: result.productVariantId, quantity: 1 };\r\n            if (customFields) {\r\n                row.customFields = customFields;\r\n            }\r\n            (_b = this.modifyOrderInput.addItems) === null || _b === void 0 ? void 0 : _b.push(row);\r\n        }\r\n        else {\r\n            row.quantity++;\r\n        }\r\n        if (customFields) {\r\n            const formGroup = new FormGroup({});\r\n            for (const [key, value] of Object.entries(customFields)) {\r\n                formGroup.addControl(key, new FormControl(value));\r\n            }\r\n            this.addItemCustomFieldsFormArray.push(formGroup);\r\n            formGroup.valueChanges.pipe(takeUntil(this.destroy$)).subscribe(value => {\r\n                if (row) {\r\n                    row.customFields = value;\r\n                }\r\n            });\r\n        }\r\n        this.addItemCustomFieldsForm.reset({});\r\n        this.addItemSelectedVariant = undefined;\r\n        this.addedVariants.set(result.productVariantId, result);\r\n    }\r\n    isMatchingAddItemRow(row, result, customFields) {\r\n        return (row.productVariantId === result.productVariantId &&\r\n            JSON.stringify(row.customFields) === JSON.stringify(customFields));\r\n    }\r\n    removeAddedItem(index) {\r\n        this.modifyOrderInput.addItems.splice(index, 1);\r\n        if (-1 < index) {\r\n            this.addItemCustomFieldsFormArray.removeAt(index);\r\n        }\r\n    }\r\n    getSurchargePrices(surcharge) {\r\n        const priceWithTax = surcharge.priceIncludesTax\r\n            ? surcharge.price\r\n            : Math.round(surcharge.price * ((100 + (surcharge.taxRate || 0)) / 100));\r\n        const price = surcharge.priceIncludesTax\r\n            ? Math.round(surcharge.price / ((100 + (surcharge.taxRate || 0)) / 100))\r\n            : surcharge.price;\r\n        return {\r\n            price,\r\n            priceWithTax,\r\n        };\r\n    }\r\n    addSurcharge(value) {\r\n        var _a;\r\n        (_a = this.modifyOrderInput.surcharges) === null || _a === void 0 ? void 0 : _a.push(value);\r\n        this.surchargeForm.reset({\r\n            price: 0,\r\n            priceIncludesTax: true,\r\n            taxRate: 0,\r\n        });\r\n    }\r\n    removeSurcharge(index) {\r\n        var _a;\r\n        (_a = this.modifyOrderInput.surcharges) === null || _a === void 0 ? void 0 : _a.splice(index, 1);\r\n    }\r\n    previewAndModify(order) {\r\n        var _a;\r\n        const modifyOrderInput = Object.assign(Object.assign({}, this.modifyOrderInput), { adjustOrderLines: this.modifyOrderInput.adjustOrderLines.map(line => {\r\n                return transformRelationCustomFieldInputs(simpleDeepClone(line), this.orderLineCustomFields);\r\n            }) });\r\n        const input = Object.assign(Object.assign(Object.assign(Object.assign({}, modifyOrderInput), (this.billingAddressForm.dirty ? { updateBillingAddress: this.billingAddressForm.value } : {})), (this.shippingAddressForm.dirty\r\n            ? { updateShippingAddress: this.shippingAddressForm.value }\r\n            : {})), { dryRun: true, couponCodes: this.couponCodesControl.dirty ? this.couponCodesControl.value : undefined, note: (_a = this.note) !== null && _a !== void 0 ? _a : '', options: {\r\n                recalculateShipping: this.recalculateShipping,\r\n            } });\r\n        const originalTotalWithTax = order.totalWithTax;\r\n        this.dataService.order\r\n            .modifyOrder(input)\r\n            .pipe(switchMap(({ modifyOrder }) => {\r\n            switch (modifyOrder.__typename) {\r\n                case 'Order':\r\n                    return this.modalService.fromComponent(OrderEditsPreviewDialogComponent, {\r\n                        size: 'xl',\r\n                        closable: false,\r\n                        locals: {\r\n                            originalTotalWithTax,\r\n                            order: modifyOrder,\r\n                            orderLineCustomFields: this.orderLineCustomFields,\r\n                            modifyOrderInput: input,\r\n                        },\r\n                    });\r\n                case 'InsufficientStockError':\r\n                case 'NegativeQuantityError':\r\n                case 'NoChangesSpecifiedError':\r\n                case 'OrderLimitError':\r\n                case 'OrderModificationStateError':\r\n                case 'PaymentMethodMissingError':\r\n                case 'RefundPaymentIdMissingError':\r\n                case 'CouponCodeLimitError':\r\n                case 'CouponCodeExpiredError':\r\n                case 'CouponCodeInvalidError': {\r\n                    this.notificationService.error(modifyOrder.message);\r\n                    return of(false);\r\n                }\r\n                case null:\r\n                case undefined:\r\n                    return of(false);\r\n                default:\r\n                    assertNever(modifyOrder);\r\n            }\r\n        }), switchMap(result => {\r\n            if (!result || result.result === OrderEditResultType.Cancel) {\r\n                // re-fetch so that the preview values get overwritten in the cache.\r\n                return this.dataService.order.getOrder(this.id).mapSingle(() => false);\r\n            }\r\n            else {\r\n                // Do the modification\r\n                const wetRunInput = Object.assign(Object.assign({}, input), { dryRun: false });\r\n                if (result.result === OrderEditResultType.Refund) {\r\n                    wetRunInput.refund = {\r\n                        paymentId: result.refundPaymentId,\r\n                        reason: result.refundNote,\r\n                    };\r\n                }\r\n                return this.dataService.order.modifyOrder(wetRunInput).pipe(switchMap(({ modifyOrder }) => {\r\n                    if (modifyOrder.__typename === 'Order') {\r\n                        const priceDelta = modifyOrder.totalWithTax - originalTotalWithTax;\r\n                        const nextState = 0 < priceDelta ? 'ArrangingAdditionalPayment' : this.previousState;\r\n                        return this.dataService.order\r\n                            .transitionToState(order.id, nextState)\r\n                            .pipe(mapTo(true));\r\n                    }\r\n                    else {\r\n                        this.notificationService.error(modifyOrder.message);\r\n                        return EMPTY;\r\n                    }\r\n                }));\r\n            }\r\n        }))\r\n            .subscribe(result => {\r\n            if (result) {\r\n                this.router.navigate(['../'], { relativeTo: this.route });\r\n            }\r\n        });\r\n    }\r\n    addAddressCustomFieldsFormGroup(parentFormGroup, address) {\r\n        var _a;\r\n        if (address && this.addressCustomFields.length) {\r\n            const addressCustomFieldsFormGroup = new FormGroup({});\r\n            for (const customFieldDef of this.addressCustomFields) {\r\n                const name = customFieldDef.name;\r\n                const value = (_a = address.customFields) === null || _a === void 0 ? void 0 : _a[name];\r\n                addressCustomFieldsFormGroup.addControl(name, new FormControl(value));\r\n            }\r\n            parentFormGroup.addControl('customFields', addressCustomFieldsFormGroup);\r\n        }\r\n    }\r\n    setFormValues(entity, languageCode) {\r\n        /* not used */\r\n    }\r\n}\nOrderEditorComponent.fac = function OrderEditorComponent_Factory(t) { return new (t || OrderEditorComponent)(ngcc0.directiveInject(ngcc7.Router), ngcc0.directiveInject(ngcc7.ActivatedRoute), ngcc0.directiveInject(ngcc1.ServerConfigService), ngcc0.directiveInject(ngcc0.ChangeDetectorRef), ngcc0.directiveInject(ngcc1.DataService), ngcc0.directiveInject(ngcc1.NotificationService), ngcc0.directiveInject(ngcc1.ModalService), ngcc0.directiveInject(OrderTransitionService)); };\nOrderEditorComponent.cmp = /*@__PURE__*/ ngcc0.defineComponent({ type: OrderEditorComponent, selectors: [[\"vdr-order-editor\"]], features: [ngcc0.InheritDefinitionFeature], decls: 4, vars: 6, consts: [[4, \"ngIf\"], [1, \"flex\", \"clr-align-items-center\"], [3, \"entity\"], [3, \"state\"], [1, \"btn\", \"btn-secondary\", 3, \"click\"], [1, \"clr-row\"], [1, \"clr-col-lg-8\"], [1, \"order-table\", \"table\"], [\"class\", \"order-line\", 3, \"is-cancelled\", \"modified\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"modified\", 4, \"ngFor\", \"ngForOf\", \"ngForTrackBy\"], [\"class\", \"surcharge\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"surcharge modified\", 4, \"ngFor\", \"ngForOf\"], [1, \"shipping\"], [1, \"left\", \"clr-align-middle\"], [1, \"clr-align-middle\"], [\"colspan\", \"3\"], [1, \"net-price\", 3, \"title\"], [1, \"mb2\"], [4, \"clrIfExpanded\"], [1, \"clr-col-lg-4\", \"order-cards\"], [1, \"card\"], [1, \"card-header\"], [1, \"card-block\"], [1, \"clr-control-label\"], [\"name\", \"note\", \"clrTextarea\", \"\", \"required\", \"\", 3, \"ngModel\", \"ngModelChange\"], [1, \"\"], [\"type\", \"checkbox\", \"clrCheckbox\", \"\", 3, \"ngModel\", \"ngModelChange\"], [1, \"card-footer\"], [1, \"btn\", \"btn-primary\", 3, \"disabled\", \"click\"], [1, \"order-line\"], [1, \"align-middle\", \"thumb\"], [3, \"src\", 4, \"ngIf\"], [1, \"align-middle\", \"name\"], [1, \"align-middle\", \"sku\"], [1, \"align-middle\", \"unit-price\"], [1, \"align-middle\", \"quantity\"], [\"type\", \"number\", \"min\", \"0\", 3, \"value\", \"input\"], [3, \"line\", \"payments\"], [3, \"line\", \"orderState\"], [\"class\", \"order-line-custom-field align-middle\", 4, \"ngIf\"], [1, \"align-middle\", \"total\"], [3, \"src\"], [1, \"order-line-custom-field\", \"align-middle\"], [\"entityName\", \"OrderLine\", 3, \"customFields\", \"customFieldsFormGroup\", \"compact\"], [1, \"modified\"], [1, \"icon-button\", 3, \"click\"], [\"shape\", \"trash\"], [4, \"ngFor\", \"ngForOf\"], [\"entityName\", \"OrderLine\", 3, \"customField\", \"customFieldsFormGroup\", \"compact\"], [1, \"surcharge\"], [\"colspan\", \"2\", 1, \"align-middle\", \"name\", \"left\"], [1, \"align-middle\"], [1, \"surcharge\", \"modified\"], [1, \"mb4\", 3, \"productSelected\"], [\"class\", \"flex mb4\", 4, \"ngIf\"], [1, \"btn\", \"btn-secondary\", 3, \"disabled\", \"click\"], [1, \"flex\", \"mb4\"], [\"class\", \"mr4\", 3, \"src\", 4, \"ngIf\"], [1, \"mr4\"], [1, \"mr4\", 3, \"src\"], [\"entityName\", \"OrderLine\", 3, \"readonly\", \"customField\", \"customFieldsFormGroup\", \"compact\"], [3, \"control\"], [3, \"formGroup\", \"submit\"], [\"for\", \"description\", 3, \"label\"], [\"id\", \"description\", \"type\", \"text\", \"formControlName\", \"description\"], [\"for\", \"sku\", 3, \"label\"], [\"id\", \"sku\", \"type\", \"text\", \"formControlName\", \"sku\"], [\"for\", \"price\", 3, \"label\"], [\"id\", \"price\", \"formControlName\", \"price\", 3, \"currencyCode\"], [\"for\", \"priceIncludesTax\", 3, \"label\"], [\"id\", \"priceIncludesTax\", \"type\", \"checkbox\", \"clrCheckbox\", \"\", \"formControlName\", \"priceIncludesTax\"], [\"for\", \"taxRate\", 3, \"label\"], [\"suffix\", \"%\"], [\"id\", \"taxRate\", \"type\", \"number\", \"min\", \"0\", \"max\", \"100\", \"formControlName\", \"taxRate\"], [\"for\", \"taxDescription\", 3, \"label\"], [\"id\", \"taxDescription\", \"type\", \"text\", \"formControlName\", \"taxDescription\"], [1, \"btn\", \"btn-secondary\", 3, \"disabled\"], [3, \"formGroup\", \"availableCountries\", \"customFields\"]], template: function OrderEditorComponent_Template(rf, ctx) { if (rf & 1) {\n        ngcc0.template(0, OrderEditorComponent_vdr_action_bar_0_Template, 10, 7, \"vdr-action-bar\", 0);\n        ngcc0.pipe(1, \"async\");\n        ngcc0.template(2, OrderEditorComponent_div_2_Template, 98, 75, \"div\", 0);\n        ngcc0.pipe(3, \"async\");\n    } if (rf & 2) {\n        ngcc0.property(\"ngIf\", ngcc0.pipeBind1(1, 2, ctx.entity$));\n        ngcc0.advance(2);\n        ngcc0.property(\"ngIf\", ngcc0.pipeBind1(3, 4, ctx.entity$));\n    } }, directives: [ngcc5.NgIf, ngcc1.ActionBarComponent, ngcc1.ActionBarLeftComponent, ngcc1.EntityInfoComponent, ngcc1.OrderStateLabelComponent, ngcc1.ActionBarRightComponent, ngcc5.NgForOf, ngcc6.ClrDatagridItemsTrackBy, ngcc6.ClrAccordion, ngcc6.lrAccordionWillyWonka, ngcc6.ClrAccordionPanel, ngcc6.lrAccordionOompaLoompa, ngcc6.ClrAccordionTitle, ngcc6.lrDatagridDetailRegisterer, ngcc6.ClrIfExpanded, ngcc6.ClrLabel, ngcc1.FormFieldControlDirective, ngcc2.DefaultValueAccessor, ngcc6.ClrTextarea, ngcc2.RequiredValidator, ngcc2.NgControlStatus, ngcc2.NgModel, ngcc6.ClrCheckboxWrapper, ngcc2.CheckboxControlValueAccessor, ngcc6.ClrCheckbox, LineRefundsComponent, LineFulfillmentComponent, ngcc1.TabbedCustomFieldsComponent, ngcc6.ClrIconCustomTag, ngcc1.CustomFieldControlComponent, ngcc6.ClrAccordionContent, ngcc1.ProductSelectorComponent, CouponCodeSelectorComponent, ngcc2.NgNoValidate, ngcc2.NgControlStatusGroup, ngcc2.FormGroupDirective, ngcc1.FormFieldComponent, ngcc2.FormControlName, ngcc1.CurrencyInputComponent, ngcc1.AffixedInputComponent, ngcc2.MinValidator, ngcc2.MaxValidator, ngcc2.NumberValueAccessor, ngcc1.AddressFormComponent], pipes: [ngcc5.AsyncPipe, ngcc4.TranslatePipe, ngcc1.LocaleCurrencyPipe, ngcc1.AssetPreviewPipe, ngcc5.CurrencyPipe], styles: [\".order-table[_ngcontent-%COMP%]   .is-cancelled[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-decoration:line-through;background-color:var(--color-component-bg-200)}.order-table[_ngcontent-%COMP%]   .sub-total[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-top:1px dashed var(--color-component-border-200)}.order-table[_ngcontent-%COMP%]   .total[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-weight:bold;border-top:1px dashed var(--color-component-border-200)}.order-table[_ngcontent-%COMP%]   td.custom-fields-row[_ngcontent-%COMP%]{border-top-style:dashed;border-top-color:var(--color-grey-200)}.order-table[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:var(--border-radius-img)}.order-table[_ngcontent-%COMP%]   .order-line-custom-fields[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}.order-table[_ngcontent-%COMP%]   .order-line-custom-fields[_ngcontent-%COMP%]   .custom-field[_ngcontent-%COMP%]{text-align:start;max-width:200px;overflow:hidden;text-overflow:ellipsis;margin-bottom:6px;margin-right:18px}.order-table[_ngcontent-%COMP%]   .draft-qty[_ngcontent-%COMP%]{max-width:48px}.order-table[_ngcontent-%COMP%]   .order-line-custom-field[_ngcontent-%COMP%]{background-color:var(--color-component-bg-100)}.order-table[_ngcontent-%COMP%]   .order-line-custom-field[_ngcontent-%COMP%]   .custom-field-ellipsis[_ngcontent-%COMP%]{color:var(--color-text-300)}.order-table[_ngcontent-%COMP%]   .net-price[_ngcontent-%COMP%]{font-size:11px;color:var(--color-text-300)}.order-table[_ngcontent-%COMP%]   .promotions-label[_ngcontent-%COMP%]{-webkit-text-decoration:underline dotted var(--color-text-200);text-decoration:underline dotted var(--color-text-200);font-size:11px;margin-top:6px;cursor:pointer;text-transform:lowercase}.order-table[_ngcontent-%COMP%]   .thumb[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:50px;height:50px}.order-table[_ngcontent-%COMP%]   tr.modified[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background-color:var(--color-warning-100)}.order-table[_ngcontent-%COMP%]   .order-line-custom-field[_ngcontent-%COMP%]{text-align:start}\"], changeDetection: 0 });\r\nOrderEditorComponent.ctorParameters = () => [\r\n    { type: Router },\r\n    { type: ActivatedRoute },\r\n    { type: ServerConfigService },\r\n    { type: ChangeDetectorRef },\r\n    { type: DataService },\r\n    { type: NotificationService },\r\n    { type: ModalService },\r\n    { type: OrderTransitionService }\r\n];\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ngcc0.setClassMetadata(OrderEditorComponent, [{\n        type: Component,\n        args: [{\n                selector: 'vdr-order-editor',\n                template: \"<vdr-action-bar *ngIf=\\\"entity$ | async as order\\\">\\r\\n    <vdr-ab-left>\\r\\n        <div class=\\\"flex clr-align-items-center\\\">\\r\\n            <vdr-entity-info [entity]=\\\"entity$ | async\\\"></vdr-entity-info>\\r\\n            <vdr-order-state-label [state]=\\\"order.state\\\"></vdr-order-state-label>\\r\\n        </div>\\r\\n    </vdr-ab-left>\\r\\n\\r\\n    <vdr-ab-right>\\r\\n        <button class=\\\"btn btn-secondary\\\" (click)=\\\"transitionToPriorState(order)\\\">\\r\\n            {{ 'order.cancel-modification' | translate }}\\r\\n        </button>\\r\\n    </vdr-ab-right>\\r\\n</vdr-action-bar>\\r\\n\\r\\n<div *ngIf=\\\"entity$ | async as order\\\">\\r\\n    <div class=\\\"clr-row\\\">\\r\\n        <div class=\\\"clr-col-lg-8\\\">\\r\\n            <table class=\\\"order-table table\\\">\\r\\n                <thead>\\r\\n                    <tr>\\r\\n                        <th></th>\\r\\n                        <th>{{ 'order.product-name' | translate }}</th>\\r\\n                        <th>{{ 'order.product-sku' | translate }}</th>\\r\\n                        <th>{{ 'order.unit-price' | translate }}</th>\\r\\n                        <th>{{ 'order.quantity' | translate }}</th>\\r\\n                        <th *ngIf=\\\"orderLineCustomFields.length\\\">{{ 'common.custom-fields' | translate }}</th>\\r\\n                        <th>{{ 'order.total' | translate }}</th>\\r\\n                    </tr>\\r\\n                </thead>\\r\\n                <tbody>\\r\\n                    <tr\\r\\n                        *ngFor=\\\"let line of order.lines; let i = index\\\"\\r\\n                        class=\\\"order-line\\\"\\r\\n                        [class.is-cancelled]=\\\"line.quantity === 0\\\"\\r\\n                        [class.modified]=\\\"isLineModified(line)\\\"\\r\\n                    >\\r\\n                        <td class=\\\"align-middle thumb\\\">\\r\\n                            <img\\r\\n                                *ngIf=\\\"line.featuredAsset\\\"\\r\\n                                [src]=\\\"line.featuredAsset | assetPreview: 'tiny'\\\"\\r\\n                            />\\r\\n                        </td>\\r\\n                        <td class=\\\"align-middle name\\\">{{ line.productVariant.name }}</td>\\r\\n                        <td class=\\\"align-middle sku\\\">{{ line.productVariant.sku }}</td>\\r\\n                        <td class=\\\"align-middle unit-price\\\">\\r\\n                            {{ line.unitPriceWithTax | localeCurrency: order.currencyCode }}\\r\\n                            <div class=\\\"net-price\\\" [title]=\\\"'order.net-price' | translate\\\">\\r\\n                                {{ line.unitPrice | localeCurrency: order.currencyCode }}\\r\\n                            </div>\\r\\n                        </td>\\r\\n                        <td class=\\\"align-middle quantity\\\">\\r\\n                            <input\\r\\n                                type=\\\"number\\\"\\r\\n                                min=\\\"0\\\"\\r\\n                                [value]=\\\"line.quantity\\\"\\r\\n                                (input)=\\\"updateLineQuantity(line, $event.target.value)\\\"\\r\\n                            />\\r\\n                            <vdr-line-refunds [line]=\\\"line\\\" [payments]=\\\"order.payments\\\"></vdr-line-refunds>\\r\\n                            <vdr-line-fulfillment\\r\\n                                [line]=\\\"line\\\"\\r\\n                                [orderState]=\\\"order.state\\\"\\r\\n                            ></vdr-line-fulfillment>\\r\\n                        </td>\\r\\n                        <td *ngIf=\\\"orderLineCustomFields.length\\\" class=\\\"order-line-custom-field align-middle\\\">\\r\\n                            <vdr-tabbed-custom-fields\\r\\n                                entityName=\\\"OrderLine\\\"\\r\\n                                [customFields]=\\\"orderLineCustomFields\\\"\\r\\n                                [customFieldsFormGroup]=\\\"orderLineCustomFieldsFormArray.get([i])\\\"\\r\\n                                [compact]=\\\"true\\\"\\r\\n                            ></vdr-tabbed-custom-fields>\\r\\n                        </td>\\r\\n                        <td class=\\\"align-middle total\\\">\\r\\n                            {{ line.linePriceWithTax | localeCurrency: order.currencyCode }}\\r\\n                            <div class=\\\"net-price\\\" [title]=\\\"'order.net-price' | translate\\\">\\r\\n                                {{ line.linePrice | localeCurrency: order.currencyCode }}\\r\\n                            </div>\\r\\n                        </td>\\r\\n                    </tr>\\r\\n                    <tr\\r\\n                        *ngFor=\\\"let addedLine of addedLines; trackBy: trackByProductVariantId; let i = index\\\"\\r\\n                        class=\\\"modified\\\"\\r\\n                    >\\r\\n                        <td class=\\\"align-middle thumb\\\">\\r\\n                            <img\\r\\n                                *ngIf=\\\"addedLine.productAsset\\\"\\r\\n                                [src]=\\\"addedLine.productAsset | assetPreview: 'tiny'\\\"\\r\\n                            />\\r\\n                        </td>\\r\\n                        <td class=\\\"align-middle name\\\">{{ addedLine.productVariantName }}</td>\\r\\n                        <td class=\\\"align-middle sku\\\">{{ addedLine.sku }}</td>\\r\\n                        <td class=\\\"align-middle unit-price\\\">\\r\\n                            {{ addedLine.priceWithTax | localeCurrency: order.currencyCode }}\\r\\n                            <div class=\\\"net-price\\\" [title]=\\\"'order.net-price' | translate\\\">\\r\\n                                {{ addedLine.price | localeCurrency: order.currencyCode }}\\r\\n                            </div>\\r\\n                        </td>\\r\\n                        <td class=\\\"align-middle quantity\\\">\\r\\n                            <input\\r\\n                                type=\\\"number\\\"\\r\\n                                min=\\\"0\\\"\\r\\n                                [value]=\\\"addedLine.quantity\\\"\\r\\n                                (input)=\\\"updateAddedItemQuantity(addedLine, $event.target.value)\\\"\\r\\n                            />\\r\\n                            <button class=\\\"icon-button\\\" (click)=\\\"removeAddedItem(i)\\\">\\r\\n                                <clr-icon shape=\\\"trash\\\"></clr-icon>\\r\\n                            </button>\\r\\n                        </td>\\r\\n                        <td *ngIf=\\\"orderLineCustomFields.length\\\" class=\\\"order-line-custom-field align-middle\\\">\\r\\n                            <ng-container *ngFor=\\\"let customField of orderLineCustomFields\\\">\\r\\n                                <vdr-custom-field-control\\r\\n                                    [customField]=\\\"customField\\\"\\r\\n                                    [customFieldsFormGroup]=\\\"addItemCustomFieldsFormArray.get([i])\\\"\\r\\n                                    entityName=\\\"OrderLine\\\"\\r\\n                                    [compact]=\\\"true\\\"\\r\\n                                ></vdr-custom-field-control>\\r\\n                            </ng-container>\\r\\n                        </td>\\r\\n                        <td class=\\\"align-middle total\\\">\\r\\n                            {{\\r\\n                                (addedLine.priceWithTax * addedLine.quantity) / 100\\r\\n                                    | currency: order.currencyCode\\r\\n                            }}\\r\\n                            <div class=\\\"net-price\\\" [title]=\\\"'order.net-price' | translate\\\">\\r\\n                                {{\\r\\n                                    (addedLine.price * addedLine.quantity) / 100\\r\\n                                        | currency: order.currencyCode\\r\\n                                }}\\r\\n                            </div>\\r\\n                        </td>\\r\\n                    </tr>\\r\\n                    <tr class=\\\"surcharge\\\" *ngFor=\\\"let surcharge of order.surcharges\\\">\\r\\n                        <td class=\\\"align-middle name left\\\" colspan=\\\"2\\\">{{ surcharge.description }}</td>\\r\\n                        <td class=\\\"align-middle sku\\\">{{ surcharge.sku }}</td>\\r\\n                        <td class=\\\"align-middle\\\"></td>\\r\\n                        <td></td>\\r\\n                        <td *ngIf=\\\"orderLineCustomFields.length\\\"></td>\\r\\n                        <td class=\\\"align-middle total\\\">\\r\\n                            {{ surcharge.priceWithTax | localeCurrency: order.currencyCode }}\\r\\n                            <div class=\\\"net-price\\\" [title]=\\\"'order.net-price' | translate\\\">\\r\\n                                {{ surcharge.price | localeCurrency: order.currencyCode }}\\r\\n                            </div>\\r\\n                        </td>\\r\\n                    </tr>\\r\\n                    <tr\\r\\n                        class=\\\"surcharge modified\\\"\\r\\n                        *ngFor=\\\"let surcharge of modifyOrderInput.surcharges; let i = index\\\"\\r\\n                    >\\r\\n                        <td class=\\\"align-middle name left\\\" colspan=\\\"2\\\">\\r\\n                            {{ surcharge.description }}\\r\\n                            <button class=\\\"icon-button\\\" (click)=\\\"removeSurcharge(i)\\\">\\r\\n                                <clr-icon shape=\\\"trash\\\"></clr-icon>\\r\\n                            </button>\\r\\n                        </td>\\r\\n                        <td class=\\\"align-middle sku\\\">{{ surcharge.sku }}</td>\\r\\n                        <td class=\\\"align-middle\\\"></td>\\r\\n                        <td></td>\\r\\n                        <td *ngIf=\\\"orderLineCustomFields.length\\\"></td>\\r\\n                        <td class=\\\"align-middle total\\\">\\r\\n                            <ng-container *ngIf=\\\"getSurchargePrices(surcharge) as surchargePrice\\\">\\r\\n                                {{ surchargePrice.priceWithTax | localeCurrency: order.currencyCode }}\\r\\n                                <div class=\\\"net-price\\\" [title]=\\\"'order.net-price' | translate\\\">\\r\\n                                    {{ surchargePrice.price | localeCurrency: order.currencyCode }}\\r\\n                                </div>\\r\\n                            </ng-container>\\r\\n                        </td>\\r\\n                    </tr>\\r\\n                    <tr class=\\\"shipping\\\">\\r\\n                        <td class=\\\"left clr-align-middle\\\">{{ 'order.shipping' | translate }}</td>\\r\\n                        <td class=\\\"clr-align-middle\\\">{{ order.shippingLines[0]?.shippingMethod?.name }}</td>\\r\\n                        <td colspan=\\\"3\\\"></td>\\r\\n                        <td *ngIf=\\\"orderLineCustomFields.length\\\"></td>\\r\\n                        <td class=\\\"clr-align-middle\\\">\\r\\n                            {{ order.shippingWithTax | localeCurrency: order.currencyCode }}\\r\\n                            <div class=\\\"net-price\\\" [title]=\\\"'order.net-price' | translate\\\">\\r\\n                                {{ order.shipping | localeCurrency: order.currencyCode }}\\r\\n                            </div>\\r\\n                        </td>\\r\\n                    </tr>\\r\\n                </tbody>\\r\\n            </table>\\r\\n\\r\\n            <h4 class=\\\"mb2\\\">{{ 'order.modifications' | translate }}</h4>\\r\\n            <clr-accordion>\\r\\n                <clr-accordion-panel>\\r\\n                    <clr-accordion-title>{{ 'order.add-item-to-order' | translate }}</clr-accordion-title>\\r\\n                    <clr-accordion-content *clrIfExpanded>\\r\\n                        <vdr-product-selector class=\\\"mb4\\\" (productSelected)=\\\"addItemSelectedVariant = $event\\\">\\r\\n                        </vdr-product-selector>\\r\\n                        <div *ngIf=\\\"addItemSelectedVariant\\\" class=\\\"flex mb4\\\">\\r\\n                            <img\\r\\n                                *ngIf=\\\"addItemSelectedVariant.productAsset as asset\\\"\\r\\n                                [src]=\\\"asset | assetPreview: 'tiny'\\\"\\r\\n                                class=\\\"mr4\\\"\\r\\n                            />\\r\\n                            <div>\\r\\n                                <strong class=\\\"mr4\\\">{{ addItemSelectedVariant.productVariantName }}</strong>\\r\\n                                <small>{{ addItemSelectedVariant.sku }}</small>\\r\\n                                <div>\\r\\n                                    {{\\r\\n                                        getSelectedItemPrice(addItemSelectedVariant)\\r\\n                                            | localeCurrency: order.currencyCode\\r\\n                                    }}\\r\\n                                </div>\\r\\n                            </div>\\r\\n                        </div>\\r\\n                        <ng-container *ngFor=\\\"let customField of orderLineCustomFields\\\">\\r\\n                            <vdr-custom-field-control\\r\\n                                [readonly]=\\\"!addItemSelectedVariant\\\"\\r\\n                                [customField]=\\\"customField\\\"\\r\\n                                [customFieldsFormGroup]=\\\"addItemCustomFieldsForm\\\"\\r\\n                                entityName=\\\"OrderLine\\\"\\r\\n                                [compact]=\\\"true\\\"\\r\\n                            ></vdr-custom-field-control>\\r\\n                        </ng-container>\\r\\n                        <button\\r\\n                            class=\\\"btn btn-secondary\\\"\\r\\n                            [disabled]=\\\"!addItemSelectedVariant || addItemCustomFieldsForm.invalid\\\"\\r\\n                            (click)=\\\"addItemToOrder(addItemSelectedVariant)\\\"\\r\\n                        >\\r\\n                            {{ 'order.add-item-to-order' | translate }}\\r\\n                        </button>\\r\\n                    </clr-accordion-content>\\r\\n                </clr-accordion-panel>\\r\\n                <clr-accordion-panel>\\r\\n                    <clr-accordion-title>{{ 'order.set-coupon-codes' | translate }}</clr-accordion-title>\\r\\n                    <clr-accordion-content *clrIfExpanded>\\r\\n                        <vdr-coupon-code-selector\\r\\n                            [control]=\\\"couponCodesControl\\\"\\r\\n                        ></vdr-coupon-code-selector>\\r\\n                    </clr-accordion-content>\\r\\n                </clr-accordion-panel>\\r\\n\\r\\n                <clr-accordion-panel>\\r\\n                    <clr-accordion-title>{{ 'order.add-surcharge' | translate }}</clr-accordion-title>\\r\\n                    <clr-accordion-content *clrIfExpanded>\\r\\n                        <form [formGroup]=\\\"surchargeForm\\\" (submit)=\\\"addSurcharge(surchargeForm.value)\\\">\\r\\n                            <vdr-form-field [label]=\\\"'common.description' | translate\\\" for=\\\"description\\\"\\r\\n                                ><input id=\\\"description\\\" type=\\\"text\\\" formControlName=\\\"description\\\"\\r\\n                            /></vdr-form-field>\\r\\n                            <vdr-form-field [label]=\\\"'order.product-sku' | translate\\\" for=\\\"sku\\\"\\r\\n                                ><input id=\\\"sku\\\" type=\\\"text\\\" formControlName=\\\"sku\\\"\\r\\n                            /></vdr-form-field>\\r\\n                            <vdr-form-field [label]=\\\"'common.price' | translate\\\" for=\\\"price\\\">\\r\\n                                <vdr-currency-input\\r\\n                                    [currencyCode]=\\\"order.currencyCode\\\"\\r\\n                                    id=\\\"price\\\"\\r\\n                                    formControlName=\\\"price\\\"\\r\\n                                ></vdr-currency-input>\\r\\n                            </vdr-form-field>\\r\\n                            <vdr-form-field\\r\\n                                [label]=\\\"\\r\\n                                    'catalog.price-includes-tax-at'\\r\\n                                        | translate: { rate: surchargeForm.get('taxRate')?.value }\\r\\n                                \\\"\\r\\n                                for=\\\"priceIncludesTax\\\"\\r\\n                                ><input\\r\\n                                    id=\\\"priceIncludesTax\\\"\\r\\n                                    type=\\\"checkbox\\\"\\r\\n                                    clrCheckbox\\r\\n                                    formControlName=\\\"priceIncludesTax\\\"\\r\\n                            /></vdr-form-field>\\r\\n                            <vdr-form-field [label]=\\\"'order.tax-rate' | translate\\\" for=\\\"taxRate\\\">\\r\\n                                <vdr-affixed-input suffix=\\\"%\\\"\\r\\n                                    ><input\\r\\n                                        id=\\\"taxRate\\\"\\r\\n                                        type=\\\"number\\\"\\r\\n                                        min=\\\"0\\\"\\r\\n                                        max=\\\"100\\\"\\r\\n                                        formControlName=\\\"taxRate\\\"\\r\\n                                /></vdr-affixed-input>\\r\\n                            </vdr-form-field>\\r\\n                            <vdr-form-field [label]=\\\"'order.tax-description' | translate\\\" for=\\\"taxDescription\\\"\\r\\n                                ><input id=\\\"taxDescription\\\" type=\\\"text\\\" formControlName=\\\"taxDescription\\\"\\r\\n                            /></vdr-form-field>\\r\\n                            <button\\r\\n                                class=\\\"btn btn-secondary\\\"\\r\\n                                [disabled]=\\\"\\r\\n                                    surchargeForm.invalid ||\\r\\n                                    surchargeForm.pristine ||\\r\\n                                    surchargeForm.get('price')?.value === 0\\r\\n                                \\\"\\r\\n                            >\\r\\n                                {{ 'order.add-surcharge' | translate }}\\r\\n                            </button>\\r\\n                        </form>\\r\\n                    </clr-accordion-content>\\r\\n                </clr-accordion-panel>\\r\\n                <clr-accordion-panel>\\r\\n                    <clr-accordion-title>{{ 'order.edit-shipping-address' | translate }}</clr-accordion-title>\\r\\n                    <clr-accordion-content *clrIfExpanded>\\r\\n                        <vdr-address-form\\r\\n                            [formGroup]=\\\"shippingAddressForm\\\"\\r\\n                            [availableCountries]=\\\"availableCountries$ | async\\\"\\r\\n                            [customFields]=\\\"addressCustomFields\\\"\\r\\n                        ></vdr-address-form>\\r\\n                    </clr-accordion-content>\\r\\n                </clr-accordion-panel>\\r\\n                <clr-accordion-panel>\\r\\n                    <clr-accordion-title>{{ 'order.edit-billing-address' | translate }}</clr-accordion-title>\\r\\n                    <clr-accordion-content *clrIfExpanded>\\r\\n                        <vdr-address-form\\r\\n                            [formGroup]=\\\"billingAddressForm\\\"\\r\\n                            [availableCountries]=\\\"availableCountries$ | async\\\"\\r\\n                            [customFields]=\\\"addressCustomFields\\\"\\r\\n                        ></vdr-address-form>\\r\\n                    </clr-accordion-content>\\r\\n                </clr-accordion-panel>\\r\\n            </clr-accordion>\\r\\n        </div>\\r\\n        <div class=\\\"clr-col-lg-4 order-cards\\\">\\r\\n            <div class=\\\"card\\\">\\r\\n                <div class=\\\"card-header\\\">\\r\\n                    {{ 'order.modification-summary' | translate }}\\r\\n                </div>\\r\\n                <div class=\\\"card-block\\\">\\r\\n                    <ul>\\r\\n                        <li *ngIf=\\\"modifyOrderInput.addItems?.length\\\">\\r\\n                            {{\\r\\n                                'order.modification-adding-items'\\r\\n                                    | translate: { count: modifyOrderInput.addItems?.length }\\r\\n                            }}\\r\\n                        </li>\\r\\n                        <li *ngIf=\\\"modifyOrderInput.adjustOrderLines?.length\\\">\\r\\n                            {{\\r\\n                                'order.modification-adjusting-lines'\\r\\n                                    | translate: { count: modifyOrderInput.adjustOrderLines?.length }\\r\\n                            }}\\r\\n                        </li>\\r\\n                        <li *ngIf=\\\"modifyOrderInput.surcharges?.length\\\">\\r\\n                            {{\\r\\n                                'order.modification-adding-surcharges'\\r\\n                                    | translate: { count: modifyOrderInput.surcharges?.length }\\r\\n                            }}\\r\\n                        </li>\\r\\n                        <li *ngIf=\\\"shippingAddressForm.dirty\\\">\\r\\n                            {{ 'order.modification-updating-shipping-address' | translate }}\\r\\n                        </li>\\r\\n                        <li *ngIf=\\\"billingAddressForm.dirty\\\">\\r\\n                            {{ 'order.modification-updating-billing-address' | translate }}\\r\\n                        </li>\\r\\n                    </ul>\\r\\n                </div>\\r\\n                <div class=\\\"card-block\\\">\\r\\n                    <label class=\\\"clr-control-label\\\">{{ 'order.note' | translate }}</label>\\r\\n                    <textarea [(ngModel)]=\\\"note\\\" name=\\\"note\\\" clrTextarea required></textarea>\\r\\n                    <clr-checkbox-wrapper class=\\\"\\\">\\r\\n                        <input type=\\\"checkbox\\\" clrCheckbox [(ngModel)]=\\\"recalculateShipping\\\" />\\r\\n                        <label>{{ 'order.modification-recalculate-shipping' | translate }}</label>\\r\\n                    </clr-checkbox-wrapper>\\r\\n                </div>\\r\\n                <div class=\\\"card-footer\\\">\\r\\n                    <button\\r\\n                        class=\\\"btn btn-primary\\\"\\r\\n                        [disabled]=\\\"!canPreviewChanges()\\\"\\r\\n                        (click)=\\\"previewAndModify(order)\\\"\\r\\n                    >\\r\\n                        {{ 'order.preview-changes' | translate }}\\r\\n                    </button>\\r\\n                </div>\\r\\n            </div>\\r\\n        </div>\\r\\n    </div>\\r\\n</div>\\r\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\".order-table .is-cancelled td{text-decoration:line-through;background-color:var(--color-component-bg-200)}.order-table .sub-total td{border-top:1px dashed var(--color-component-border-200)}.order-table .total td{font-weight:bold;border-top:1px dashed var(--color-component-border-200)}.order-table td.custom-fields-row{border-top-style:dashed;border-top-color:var(--color-grey-200)}.order-table img{border-radius:var(--border-radius-img)}.order-table .order-line-custom-fields{display:flex;flex-wrap:wrap}.order-table .order-line-custom-fields .custom-field{text-align:start;max-width:200px;overflow:hidden;text-overflow:ellipsis;margin-bottom:6px;margin-right:18px}.order-table .draft-qty{max-width:48px}.order-table .order-line-custom-field{background-color:var(--color-component-bg-100)}.order-table .order-line-custom-field .custom-field-ellipsis{color:var(--color-text-300)}.order-table .net-price{font-size:11px;color:var(--color-text-300)}.order-table .promotions-label{-webkit-text-decoration:underline dotted var(--color-text-200);text-decoration:underline dotted var(--color-text-200);font-size:11px;margin-top:6px;cursor:pointer;text-transform:lowercase}.order-table .thumb img{width:50px;height:50px}.order-table tr.modified td{background-color:var(--color-warning-100)}.order-table .order-line-custom-field{text-align:start}\\n\"]\n            }]\n    }], function () { return [{ type: ngcc7.Router }, { type: ngcc7.ActivatedRoute }, { type: ngcc1.ServerConfigService }, { type: ngcc0.ChangeDetectorRef }, { type: ngcc1.DataService }, { type: ngcc1.NotificationService }, { type: ngcc1.ModalService }, { type: OrderTransitionService }]; }, null); })();\n\nclass OrderHistoryComponent {\r\n    constructor() {\r\n        this.addNote = new EventEmitter();\r\n        this.updateNote = new EventEmitter();\r\n        this.deleteNote = new EventEmitter();\r\n        this.note = '';\r\n        this.noteIsPrivate = true;\r\n        this.expanded = false;\r\n        this.type = HistoryEntryType;\r\n    }\r\n    getDisplayType(entry) {\r\n        if (entry.type === HistoryEntryType.ORDER_STATE_TRANSITION) {\r\n            if (entry.data.to === 'Delivered') {\r\n                return 'success';\r\n            }\r\n            if (entry.data.to === 'Cancelled') {\r\n                return 'error';\r\n            }\r\n        }\r\n        if (entry.type === HistoryEntryType.ORDER_FULFILLMENT_TRANSITION) {\r\n            if (entry.data.to === 'Delivered') {\r\n                return 'success';\r\n            }\r\n        }\r\n        if (entry.type === HistoryEntryType.ORDER_PAYMENT_TRANSITION) {\r\n            if (entry.data.to === 'Declined' || entry.data.to === 'Cancelled') {\r\n                return 'error';\r\n            }\r\n        }\r\n        if (entry.type === HistoryEntryType.ORDER_CANCELLATION) {\r\n            return 'error';\r\n        }\r\n        if (entry.type === HistoryEntryType.ORDER_REFUND_TRANSITION) {\r\n            return 'warning';\r\n        }\r\n        return 'default';\r\n    }\r\n    getTimelineIcon(entry) {\r\n        if (entry.type === HistoryEntryType.ORDER_STATE_TRANSITION) {\r\n            if (entry.data.to === 'Delivered') {\r\n                return ['success-standard', 'is-solid'];\r\n            }\r\n            if (entry.data.to === 'Cancelled') {\r\n                return 'ban';\r\n            }\r\n        }\r\n        if (entry.type === HistoryEntryType.ORDER_PAYMENT_TRANSITION) {\r\n            if (entry.data.to === 'Settled') {\r\n                return 'credit-card';\r\n            }\r\n        }\r\n        if (entry.type === HistoryEntryType.ORDER_NOTE) {\r\n            return 'note';\r\n        }\r\n        if (entry.type === HistoryEntryType.ORDER_MODIFIED) {\r\n            return 'pencil';\r\n        }\r\n        if (entry.type === HistoryEntryType.ORDER_FULFILLMENT_TRANSITION) {\r\n            if (entry.data.to === 'Shipped') {\r\n                return 'truck';\r\n            }\r\n            if (entry.data.to === 'Delivered') {\r\n                return 'truck';\r\n            }\r\n        }\r\n    }\r\n    isFeatured(entry) {\r\n        switch (entry.type) {\r\n            case HistoryEntryType.ORDER_STATE_TRANSITION: {\r\n                return (entry.data.to === 'Delivered' ||\r\n                    entry.data.to === 'Cancelled' ||\r\n                    entry.data.to === 'Settled');\r\n            }\r\n            case HistoryEntryType.ORDER_PAYMENT_TRANSITION:\r\n                return entry.data.to === 'Settled' || entry.data.to === 'Cancelled';\r\n            case HistoryEntryType.ORDER_FULFILLMENT_TRANSITION:\r\n                return entry.data.to === 'Delivered' || entry.data.to === 'Shipped';\r\n            case HistoryEntryType.ORDER_NOTE:\r\n            case HistoryEntryType.ORDER_MODIFIED:\r\n                return true;\r\n            default:\r\n                return false;\r\n        }\r\n    }\r\n    getFulfillment(entry) {\r\n        if ((entry.type === HistoryEntryType.ORDER_FULFILLMENT ||\r\n            entry.type === HistoryEntryType.ORDER_FULFILLMENT_TRANSITION) &&\r\n            this.order.fulfillments) {\r\n            return this.order.fulfillments.find(f => f.id === entry.data.fulfillmentId);\r\n        }\r\n    }\r\n    getPayment(entry) {\r\n        if (entry.type === HistoryEntryType.ORDER_PAYMENT_TRANSITION && this.order.payments) {\r\n            return this.order.payments.find(p => p.id === entry.data.paymentId);\r\n        }\r\n    }\r\n    getCancelledItems(entry) {\r\n        const itemMap = new Map();\r\n        const cancelledItemIds = entry.data.orderItemIds;\r\n        for (const line of this.order.lines) {\r\n            for (const item of line.items) {\r\n                if (cancelledItemIds.includes(item.id)) {\r\n                    const count = itemMap.get(line.productVariant.name);\r\n                    if (count != null) {\r\n                        itemMap.set(line.productVariant.name, count + 1);\r\n                    }\r\n                    else {\r\n                        itemMap.set(line.productVariant.name, 1);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return Array.from(itemMap.entries()).map(([name, quantity]) => ({ name, quantity }));\r\n    }\r\n    getModification(id) {\r\n        return this.order.modifications.find(m => m.id === id);\r\n    }\r\n    getName(entry) {\r\n        const { administrator } = entry;\r\n        if (administrator) {\r\n            return `${administrator.firstName} ${administrator.lastName}`;\r\n        }\r\n        else {\r\n            const customer = this.order.customer;\r\n            if (customer) {\r\n                return `${customer.firstName} ${customer.lastName}`;\r\n            }\r\n        }\r\n        return '';\r\n    }\r\n    addNoteToOrder() {\r\n        this.addNote.emit({ note: this.note, isPublic: !this.noteIsPrivate });\r\n        this.note = '';\r\n        this.noteIsPrivate = true;\r\n    }\r\n}\nOrderHistoryComponent.fac = function OrderHistoryComponent_Factory(t) { return new (t || OrderHistoryComponent)(); };\nOrderHistoryComponent.cmp = /*@__PURE__*/ ngcc0.defineComponent({ type: OrderHistoryComponent, selectors: [[\"vdr-order-history\"]], inputs: { order: \"order\", history: \"history\" }, outputs: { addNote: \"addNote\", updateNote: \"updateNote\", deleteNote: \"deleteNote\" }, decls: 23, vars: 24, consts: [[1, \"entry-list\"], [\"iconShape\", \"note\", \"displayType\", \"muted\", 3, \"featured\"], [1, \"note-entry\"], [\"name\", \"note\", 1, \"note\", 3, \"ngModel\", \"ngModelChange\"], [1, \"btn\", \"btn-secondary\", 3, \"disabled\", \"click\"], [1, \"visibility-select\"], [\"type\", \"checkbox\", \"clrCheckbox\", \"\", 3, \"ngModel\", \"ngModelChange\"], [\"class\", \"private\", 4, \"ngIf\"], [\"class\", \"public\", 4, \"ngIf\"], [3, \"displayType\", \"iconShape\", \"createdAt\", \"name\", \"featured\", \"collapsed\", \"expandClick\", 4, \"ngFor\", \"ngForOf\"], [3, \"isLast\", \"createdAt\", \"featured\"], [1, \"title\"], [1, \"private\"], [1, \"public\"], [3, \"displayType\", \"iconShape\", \"createdAt\", \"name\", \"featured\", \"collapsed\", \"expandClick\"], [3, \"ngSwitch\"], [4, \"ngSwitchCase\"], [\"class\", \"title\", 4, \"ngIf\"], [3, \"ngIf\"], [4, \"ngIf\"], [\"colorType\", \"success\", 4, \"ngIf\"], [\"colorType\", \"error\", 4, \"ngIf\"], [3, \"order\", \"modification\"], [\"colorType\", \"success\"], [\"colorType\", \"error\"], [4, \"ngIf\", \"ngIfElse\"], [\"regularPaymentTransition\", \"\"], [3, \"payment\", \"currencyCode\"], [3, \"label\"], [3, \"items\"], [3, \"fulfillmentId\", \"order\"], [1, \"flex\"], [1, \"note-text\"], [\"class\", \"note-visibility public\", 4, \"ngIf\"], [\"class\", \"note-visibility private\", 4, \"ngIf\"], [1, \"flex-spacer\"], [\"vdrDropdownTrigger\", \"\", 1, \"icon-button\"], [\"shape\", \"ellipsis-vertical\"], [\"vdrPosition\", \"bottom-right\"], [\"vdrDropdownItem\", \"\", 1, \"button\", 3, \"disabled\", \"click\"], [\"shape\", \"edit\"], [1, \"dropdown-divider\"], [\"shape\", \"trash\", 1, \"is-danger\"], [1, \"note-visibility\", \"public\"], [1, \"note-visibility\", \"private\"], [3, \"routerLink\"], [1, \"cancelled-coupon-code\"]], template: function OrderHistoryComponent_Template(rf, ctx) { if (rf & 1) {\n        ngcc0.elementStart(0, \"h4\");\n        ngcc0.text(1);\n        ngcc0.pipe(2, \"translate\");\n        ngcc0.elementEnd();\n        ngcc0.elementStart(3, \"div\", 0);\n        ngcc0.elementStart(4, \"vdr-timeline-entry\", 1);\n        ngcc0.elementStart(5, \"div\", 2);\n        ngcc0.elementStart(6, \"textarea\", 3);\n        ngcc0.listener(\"ngModelChange\", function OrderHistoryComponent_Template_textarea_ngModelChange_6_listener($event) { return ctx.note = $event; });\n        ngcc0.elementEnd();\n        ngcc0.elementStart(7, \"button\", 4);\n        ngcc0.listener(\"click\", function OrderHistoryComponent_Template_button_click_7_listener() { return ctx.addNoteToOrder(); });\n        ngcc0.text(8);\n        ngcc0.pipe(9, \"translate\");\n        ngcc0.elementEnd();\n        ngcc0.elementEnd();\n        ngcc0.elementStart(10, \"div\", 5);\n        ngcc0.elementStart(11, \"clr-checkbox-wrapper\");\n        ngcc0.elementStart(12, \"input\", 6);\n        ngcc0.listener(\"ngModelChange\", function OrderHistoryComponent_Template_input_ngModelChange_12_listener($event) { return ctx.noteIsPrivate = $event; });\n        ngcc0.elementEnd();\n        ngcc0.elementStart(13, \"label\");\n        ngcc0.text(14);\n        ngcc0.pipe(15, \"translate\");\n        ngcc0.elementEnd();\n        ngcc0.elementEnd();\n        ngcc0.template(16, OrderHistoryComponent_span_16_Template, 3, 3, \"span\", 7);\n        ngcc0.template(17, OrderHistoryComponent_span_17_Template, 3, 3, \"span\", 8);\n        ngcc0.elementEnd();\n        ngcc0.elementEnd();\n        ngcc0.template(18, OrderHistoryComponent_vdr_timeline_entry_18_Template, 12, 17, \"vdr-timeline-entry\", 9);\n        ngcc0.elementStart(19, \"vdr-timeline-entry\", 10);\n        ngcc0.elementStart(20, \"div\", 11);\n        ngcc0.text(21);\n        ngcc0.pipe(22, \"translate\");\n        ngcc0.elementEnd();\n        ngcc0.elementEnd();\n        ngcc0.elementEnd();\n    } if (rf & 2) {\n        ngcc0.advance(1);\n        ngcc0.textInterpolate(ngcc0.pipeBind1(2, 16, \"order.order-history\"));\n        ngcc0.advance(2);\n        ngcc0.classProp(\"expanded\", ctx.expanded);\n        ngcc0.advance(1);\n        ngcc0.property(\"featured\", true);\n        ngcc0.advance(2);\n        ngcc0.property(\"ngModel\", ctx.note);\n        ngcc0.advance(1);\n        ngcc0.property(\"disabled\", !ctx.note);\n        ngcc0.advance(1);\n        ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(9, 18, \"common.add-note\"), \" \");\n        ngcc0.advance(4);\n        ngcc0.property(\"ngModel\", ctx.noteIsPrivate);\n        ngcc0.advance(2);\n        ngcc0.textInterpolate(ngcc0.pipeBind1(15, 20, \"order.note-is-private\"));\n        ngcc0.advance(2);\n        ngcc0.property(\"ngIf\", ctx.noteIsPrivate);\n        ngcc0.advance(1);\n        ngcc0.property(\"ngIf\", !ctx.noteIsPrivate);\n        ngcc0.advance(1);\n        ngcc0.property(\"ngForOf\", ctx.history);\n        ngcc0.advance(1);\n        ngcc0.property(\"isLast\", true)(\"createdAt\", ctx.order.createdAt)(\"featured\", true);\n        ngcc0.advance(2);\n        ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(22, 22, \"order.history-order-created\"), \" \");\n    } }, directives: function () { return [ngcc1.TimelineEntryComponent, ngcc1.FormFieldControlDirective, ngcc2.DefaultValueAccessor, ngcc2.NgControlStatus, ngcc2.NgModel, ngcc6.ClrCheckboxWrapper, ngcc2.CheckboxControlValueAccessor, ngcc6.ClrCheckbox, ngcc6.ClrLabel, ngcc5.NgIf, ngcc5.NgForOf, ngcc5.NgSwitch, ngcc5.NgSwitchCase, ngcc1.HistoryEntryDetailComponent, ModificationDetailComponent, ngcc1.ChipComponent, PaymentDetailComponent, ngcc1.LabeledDataComponent, SimpleItemListComponent, FulfillmentDetailComponent, ngcc1.DropdownComponent, ngcc1.DropdownTriggerDirective, ngcc6.ClrIconCustomTag, ngcc1.DropdownMenuComponent, ngcc1.DropdownItemDirective, ngcc7.RouterLinkWithHref]; }, pipes: function () { return [ngcc4.TranslatePipe, ngcc1.LocaleCurrencyPipe, ngcc1.HasPermissionPipe]; }, styles: [\"[_nghost-%COMP%]{margin-top:48px;display:block}.entry-list[_ngcontent-%COMP%]{margin-top:24px;margin-left:24px;margin-right:12px}.note-entry[_ngcontent-%COMP%]{display:flex;align-items:center}.note-entry[_ngcontent-%COMP%]   .note[_ngcontent-%COMP%]{flex:1}.note-entry[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:0}.visibility-select[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:baseline}.visibility-select[_ngcontent-%COMP%]   .public[_ngcontent-%COMP%]{color:var(--color-warning-500)}.visibility-select[_ngcontent-%COMP%]   .private[_ngcontent-%COMP%]{color:var(--color-success-500)}textarea.note[_ngcontent-%COMP%]{flex:1;height:36px;border-radius:3px;margin-right:6px}.note-text[_ngcontent-%COMP%]{color:var(--color-grey-800);white-space:pre-wrap}.cancelled-coupon-code[_ngcontent-%COMP%]{text-decoration:line-through}.note-visibility[_ngcontent-%COMP%]{text-transform:lowercase}.note-visibility.public[_ngcontent-%COMP%]{color:var(--color-warning-500)}.note-visibility.private[_ngcontent-%COMP%]{color:var(--color-success-500)}\"], changeDetection: 0 });\r\nOrderHistoryComponent.propDecorators = {\r\n    order: [{ type: Input }],\r\n    history: [{ type: Input }],\r\n    addNote: [{ type: Output }],\r\n    updateNote: [{ type: Output }],\r\n    deleteNote: [{ type: Output }]\r\n};\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ngcc0.setClassMetadata(OrderHistoryComponent, [{\n        type: Component,\n        args: [{\n                selector: 'vdr-order-history',\n                template: \"<h4>{{ 'order.order-history' | translate }}</h4>\\r\\n<div class=\\\"entry-list\\\" [class.expanded]=\\\"expanded\\\">\\r\\n    <vdr-timeline-entry iconShape=\\\"note\\\" displayType=\\\"muted\\\" [featured]=\\\"true\\\">\\r\\n        <div class=\\\"note-entry\\\">\\r\\n            <textarea [(ngModel)]=\\\"note\\\" name=\\\"note\\\" class=\\\"note\\\"></textarea>\\r\\n            <button class=\\\"btn btn-secondary\\\" [disabled]=\\\"!note\\\" (click)=\\\"addNoteToOrder()\\\">\\r\\n                {{ 'common.add-note' | translate }}\\r\\n            </button>\\r\\n        </div>\\r\\n        <div class=\\\"visibility-select\\\">\\r\\n            <clr-checkbox-wrapper>\\r\\n                <input type=\\\"checkbox\\\" clrCheckbox [(ngModel)]=\\\"noteIsPrivate\\\" />\\r\\n                <label>{{ 'order.note-is-private' | translate }}</label>\\r\\n            </clr-checkbox-wrapper>\\r\\n            <span *ngIf=\\\"noteIsPrivate\\\" class=\\\"private\\\">\\r\\n                {{ 'order.note-only-visible-to-administrators' | translate }}\\r\\n            </span>\\r\\n            <span *ngIf=\\\"!noteIsPrivate\\\" class=\\\"public\\\">\\r\\n                {{ 'order.note-visible-to-customer' | translate }}\\r\\n            </span>\\r\\n        </div>\\r\\n    </vdr-timeline-entry>\\r\\n    <vdr-timeline-entry\\r\\n        *ngFor=\\\"let entry of history\\\"\\r\\n        [displayType]=\\\"getDisplayType(entry)\\\"\\r\\n        [iconShape]=\\\"getTimelineIcon(entry)\\\"\\r\\n        [createdAt]=\\\"entry.createdAt\\\"\\r\\n        [name]=\\\"getName(entry)\\\"\\r\\n        [featured]=\\\"isFeatured(entry)\\\"\\r\\n        [collapsed]=\\\"!expanded && !isFeatured(entry)\\\"\\r\\n        (expandClick)=\\\"expanded = !expanded\\\"\\r\\n    >\\r\\n        <ng-container [ngSwitch]=\\\"entry.type\\\">\\r\\n            <ng-container *ngSwitchCase=\\\"type.ORDER_STATE_TRANSITION\\\">\\r\\n                <div class=\\\"title\\\" *ngIf=\\\"entry.data.to === 'Delivered'\\\">\\r\\n                    {{ 'order.history-order-fulfilled' | translate }}\\r\\n                </div>\\r\\n                <div class=\\\"title\\\" *ngIf=\\\"entry.data.to === 'Cancelled'\\\">\\r\\n                    {{ 'order.history-order-cancelled' | translate }}\\r\\n                </div>\\r\\n                <ng-template [ngIf]=\\\"entry.data.to !== 'Cancelled' && entry.data.to !== 'Delivered'\\\">\\r\\n                    {{\\r\\n                        'order.history-order-transition'\\r\\n                            | translate: { from: entry.data.from, to: entry.data.to }\\r\\n                    }}\\r\\n                </ng-template>\\r\\n            </ng-container>\\r\\n            <ng-container *ngSwitchCase=\\\"type.ORDER_MODIFIED\\\">\\r\\n                <div class=\\\"title\\\">\\r\\n                    {{ 'order.history-order-modified' | translate }}\\r\\n                </div>\\r\\n                <ng-container *ngIf=\\\"getModification(entry.data.modificationId) as modification\\\">\\r\\n                    {{ 'order.modify-order-price-difference' | translate }}:\\r\\n                    <strong>{{ modification.priceChange | localeCurrency: order.currencyCode }}</strong>\\r\\n                    <vdr-chip colorType=\\\"success\\\" *ngIf=\\\"modification.isSettled\\\">{{\\r\\n                        'order.modification-settled' | translate\\r\\n                    }}</vdr-chip>\\r\\n                    <vdr-chip colorType=\\\"error\\\" *ngIf=\\\"!modification.isSettled\\\">{{\\r\\n                        'order.modification-not-settled' | translate\\r\\n                    }}</vdr-chip>\\r\\n                    <vdr-history-entry-detail>\\r\\n                        <vdr-modification-detail\\r\\n                            [order]=\\\"order\\\"\\r\\n                            [modification]=\\\"modification\\\"\\r\\n                        ></vdr-modification-detail>\\r\\n                    </vdr-history-entry-detail>\\r\\n                </ng-container>\\r\\n            </ng-container>\\r\\n            <ng-container *ngSwitchCase=\\\"type.ORDER_PAYMENT_TRANSITION\\\">\\r\\n                <ng-container *ngIf=\\\"entry.data.to === 'Settled'; else regularPaymentTransition\\\">\\r\\n                    <div class=\\\"title\\\">\\r\\n                        {{ 'order.history-payment-settled' | translate }}\\r\\n                    </div>\\r\\n                    {{ 'order.transaction-id' | translate }}: {{ getPayment(entry)?.transactionId }}\\r\\n                    <vdr-history-entry-detail *ngIf=\\\"getPayment(entry) as payment\\\">\\r\\n                        <vdr-payment-detail\\r\\n                            [payment]=\\\"payment\\\"\\r\\n                            [currencyCode]=\\\"order.currencyCode\\\"\\r\\n                        ></vdr-payment-detail>\\r\\n                    </vdr-history-entry-detail>\\r\\n                </ng-container>\\r\\n                <ng-template #regularPaymentTransition>\\r\\n                    {{\\r\\n                        'order.history-payment-transition'\\r\\n                            | translate\\r\\n                                : {\\r\\n                                      from: entry.data.from,\\r\\n                                      to: entry.data.to,\\r\\n                                      id: getPayment(entry)?.transactionId\\r\\n                                  }\\r\\n                    }}\\r\\n                </ng-template>\\r\\n            </ng-container>\\r\\n            <ng-container *ngSwitchCase=\\\"type.ORDER_REFUND_TRANSITION\\\">\\r\\n                {{\\r\\n                    'order.history-refund-transition'\\r\\n                        | translate: { from: entry.data.from, to: entry.data.to, id: entry.data.refundId }\\r\\n                }}\\r\\n            </ng-container>\\r\\n            <ng-container *ngSwitchCase=\\\"type.ORDER_CANCELLATION\\\">\\r\\n                {{ 'order.history-items-cancelled' | translate: { count: entry.data.orderItemIds.length } }}\\r\\n                <vdr-history-entry-detail *ngIf=\\\"getCancelledItems(entry) as items\\\">\\r\\n                    <vdr-labeled-data [label]=\\\"'order.cancellation-reason' | translate\\\">\\r\\n                        {{ entry.data.reason }}\\r\\n                    </vdr-labeled-data>\\r\\n                    <vdr-labeled-data [label]=\\\"'order.contents' | translate\\\">\\r\\n                        <vdr-simple-item-list [items]=\\\"items\\\"></vdr-simple-item-list>\\r\\n                    </vdr-labeled-data>\\r\\n                    <vdr-labeled-data [label]=\\\"'order.shipping-cancelled' | translate\\\">\\r\\n                        {{ entry.data.shippingCancelled }}\\r\\n                    </vdr-labeled-data>\\r\\n                </vdr-history-entry-detail>\\r\\n            </ng-container>\\r\\n            <ng-container *ngSwitchCase=\\\"type.ORDER_FULFILLMENT\\\">\\r\\n                {{ 'order.history-fulfillment-created' | translate }}\\r\\n                <vdr-history-entry-detail *ngIf=\\\"getFulfillment(entry) as fulfillment\\\">\\r\\n                    <vdr-fulfillment-detail\\r\\n                        [fulfillmentId]=\\\"fulfillment.id\\\"\\r\\n                        [order]=\\\"order\\\"\\r\\n                    ></vdr-fulfillment-detail>\\r\\n                </vdr-history-entry-detail>\\r\\n            </ng-container>\\r\\n            <ng-container *ngSwitchCase=\\\"type.ORDER_FULFILLMENT_TRANSITION\\\">\\r\\n                <ng-container *ngIf=\\\"entry.data.to === 'Delivered'\\\">\\r\\n                    <div class=\\\"title\\\">\\r\\n                        {{ 'order.history-fulfillment-delivered' | translate }}\\r\\n                    </div>\\r\\n                    {{ 'order.tracking-code' | translate }}: {{ getFulfillment(entry)?.trackingCode }}\\r\\n                </ng-container>\\r\\n                <ng-container *ngIf=\\\"entry.data.to === 'Shipped'\\\">\\r\\n                    <div class=\\\"title\\\">\\r\\n                        {{ 'order.history-fulfillment-shipped' | translate }}\\r\\n                    </div>\\r\\n                    {{ 'order.tracking-code' | translate }}: {{ getFulfillment(entry)?.trackingCode }}\\r\\n                </ng-container>\\r\\n                <ng-container *ngIf=\\\"entry.data.to !== 'Delivered' && entry.data.to !== 'Shipped'\\\">\\r\\n                    {{\\r\\n                        'order.history-fulfillment-transition'\\r\\n                            | translate: { from: entry.data.from, to: entry.data.to }\\r\\n                    }}\\r\\n                </ng-container>\\r\\n                <vdr-history-entry-detail *ngIf=\\\"getFulfillment(entry) as fulfillment\\\">\\r\\n                    <vdr-fulfillment-detail\\r\\n                        [fulfillmentId]=\\\"fulfillment.id\\\"\\r\\n                        [order]=\\\"order\\\"\\r\\n                    ></vdr-fulfillment-detail>\\r\\n                </vdr-history-entry-detail>\\r\\n            </ng-container>\\r\\n            <ng-container *ngSwitchCase=\\\"type.ORDER_NOTE\\\">\\r\\n                <div class=\\\"flex\\\">\\r\\n                    <div class=\\\"note-text\\\">\\r\\n                        <span *ngIf=\\\"entry.isPublic\\\" class=\\\"note-visibility public\\\">{{\\r\\n                            'common.public' | translate\\r\\n                        }}</span>\\r\\n                        <span *ngIf=\\\"!entry.isPublic\\\" class=\\\"note-visibility private\\\">{{\\r\\n                            'common.private' | translate\\r\\n                        }}</span>\\r\\n                        {{ entry.data.note }}\\r\\n                    </div>\\r\\n                    <div class=\\\"flex-spacer\\\"></div>\\r\\n                    <vdr-dropdown>\\r\\n                        <button class=\\\"icon-button\\\" vdrDropdownTrigger>\\r\\n                            <clr-icon shape=\\\"ellipsis-vertical\\\"></clr-icon>\\r\\n                        </button>\\r\\n                        <vdr-dropdown-menu vdrPosition=\\\"bottom-right\\\">\\r\\n                            <button\\r\\n                                class=\\\"button\\\"\\r\\n                                vdrDropdownItem\\r\\n                                (click)=\\\"updateNote.emit(entry)\\\"\\r\\n                                [disabled]=\\\"!('UpdateOrder' | hasPermission)\\\"\\r\\n                            >\\r\\n                                <clr-icon shape=\\\"edit\\\"></clr-icon>\\r\\n                                {{ 'common.edit' | translate }}\\r\\n                            </button>\\r\\n                            <div class=\\\"dropdown-divider\\\"></div>\\r\\n                            <button\\r\\n                                class=\\\"button\\\"\\r\\n                                vdrDropdownItem\\r\\n                                (click)=\\\"deleteNote.emit(entry)\\\"\\r\\n                                [disabled]=\\\"!('UpdateOrder' | hasPermission)\\\"\\r\\n                            >\\r\\n                                <clr-icon shape=\\\"trash\\\" class=\\\"is-danger\\\"></clr-icon>\\r\\n                                {{ 'common.delete' | translate }}\\r\\n                            </button>\\r\\n                        </vdr-dropdown-menu>\\r\\n                    </vdr-dropdown>\\r\\n                </div>\\r\\n            </ng-container>\\r\\n            <ng-container *ngSwitchCase=\\\"type.ORDER_COUPON_APPLIED\\\">\\r\\n                {{ 'order.history-coupon-code-applied' | translate }}:\\r\\n                <vdr-chip>\\r\\n                    <a [routerLink]=\\\"['/marketing', 'promotions', entry.data.promotionId]\\\">{{\\r\\n                        entry.data.couponCode\\r\\n                    }}</a>\\r\\n                </vdr-chip>\\r\\n            </ng-container>\\r\\n            <ng-container *ngSwitchCase=\\\"type.ORDER_COUPON_REMOVED\\\">\\r\\n                {{ 'order.history-coupon-code-removed' | translate }}:\\r\\n                <vdr-chip\\r\\n                    ><span class=\\\"cancelled-coupon-code\\\">{{ entry.data.couponCode }}</span></vdr-chip\\r\\n                >\\r\\n            </ng-container>\\r\\n        </ng-container>\\r\\n    </vdr-timeline-entry>\\r\\n    <vdr-timeline-entry [isLast]=\\\"true\\\" [createdAt]=\\\"order.createdAt\\\" [featured]=\\\"true\\\">\\r\\n        <div class=\\\"title\\\">\\r\\n            {{ 'order.history-order-created' | translate }}\\r\\n        </div>\\r\\n    </vdr-timeline-entry>\\r\\n</div>\\r\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\":host{margin-top:48px;display:block}.entry-list{margin-top:24px;margin-left:24px;margin-right:12px}.note-entry{display:flex;align-items:center}.note-entry .note{flex:1}.note-entry button{margin:0}.visibility-select{display:flex;justify-content:space-between;align-items:baseline}.visibility-select .public{color:var(--color-warning-500)}.visibility-select .private{color:var(--color-success-500)}textarea.note{flex:1;height:36px;border-radius:3px;margin-right:6px}.note-text{color:var(--color-grey-800);white-space:pre-wrap}.cancelled-coupon-code{text-decoration:line-through}.note-visibility{text-transform:lowercase}.note-visibility.public{color:var(--color-warning-500)}.note-visibility.private{color:var(--color-success-500)}\\n\"]\n            }]\n    }], function () { return []; }, { addNote: [{\n            type: Output\n        }], updateNote: [{\n            type: Output\n        }], deleteNote: [{\n            type: Output\n        }], order: [{\n            type: Input\n        }], history: [{\n            type: Input\n        }] }); })();\n\nclass OrderListComponent extends BaseListComponent {\r\n    constructor(serverConfigService, dataService, localStorageService, router, route) {\r\n        var _a;\r\n        super(router, route);\r\n        this.serverConfigService = serverConfigService;\r\n        this.dataService = dataService;\r\n        this.localStorageService = localStorageService;\r\n        this.searchControl = new FormControl('');\r\n        this.searchOrderCodeControl = new FormControl('');\r\n        this.searchLastNameControl = new FormControl('');\r\n        this.orderStates = this.serverConfigService.getOrderProcessStates().map(item => item.name);\r\n        this.filterPresets = [\r\n            {\r\n                name: 'open',\r\n                label: marker('order.filter-preset-open'),\r\n                config: {\r\n                    active: false,\r\n                    states: this.orderStates.filter(s => s !== 'Delivered' && s !== 'Cancelled' && s !== 'Shipped' && s !== 'Draft'),\r\n                },\r\n            },\r\n            {\r\n                name: 'shipped',\r\n                label: marker('order.filter-preset-shipped'),\r\n                config: {\r\n                    active: false,\r\n                    states: ['Shipped'],\r\n                },\r\n            },\r\n            {\r\n                name: 'completed',\r\n                label: marker('order.filter-preset-completed'),\r\n                config: {\r\n                    active: false,\r\n                    states: ['Delivered', 'Cancelled'],\r\n                },\r\n            },\r\n            {\r\n                name: 'active',\r\n                label: marker('order.filter-preset-active'),\r\n                config: {\r\n                    active: true,\r\n                },\r\n            },\r\n            {\r\n                name: 'draft',\r\n                label: marker('order.filter-preset-draft'),\r\n                config: {\r\n                    active: false,\r\n                    states: ['Draft'],\r\n                },\r\n            },\r\n        ];\r\n        this.canCreateDraftOrder = false;\r\n        super.setQueryFn(\r\n        // tslint:disable-next-line:no-shadowed-variable\r\n        (take, skip) => this.dataService.order.getOrders({ take, skip }).refetchOnChannelChange(), data => data.orders, \r\n        // tslint:disable-next-line:no-shadowed-variable\r\n        (skip, take) => this.createQueryOptions(skip, take, this.searchControl.value, this.route.snapshot.queryParamMap.get('filter') || 'open'));\r\n        const lastFilters = this.localStorageService.get('orderListLastCustomFilters');\r\n        if (lastFilters) {\r\n            this.setQueryParam(lastFilters, { replaceUrl: true });\r\n        }\r\n        this.canCreateDraftOrder = !!((_a = this.serverConfigService\r\n            .getOrderProcessStates()\r\n            .find(state => state.name === 'Created')) === null || _a === void 0 ? void 0 : _a.to.includes('Draft'));\r\n        if (!this.canCreateDraftOrder) {\r\n            this.filterPresets = this.filterPresets.filter(p => p.name !== 'draft');\r\n        }\r\n    }\r\n    ngOnInit() {\r\n        var _a;\r\n        super.ngOnInit();\r\n        this.activePreset$ = this.route.queryParamMap.pipe(map(qpm => qpm.get('filter') || 'open'), distinctUntilChanged());\r\n        const searchTerms$ = merge(this.searchControl.valueChanges).pipe(filter(value => 2 < value.length || value.length === 0), debounceTime(250));\r\n        merge(searchTerms$, this.route.queryParamMap)\r\n            .pipe(takeUntil(this.destroy$))\r\n            .subscribe(val => {\r\n            this.refresh();\r\n        });\r\n        const queryParamMap = this.route.snapshot.queryParamMap;\r\n        this.customFilterForm = new FormGroup({\r\n            states: new FormControl((_a = queryParamMap.getAll('states')) !== null && _a !== void 0 ? _a : []),\r\n            placedAtStart: new FormControl(queryParamMap.get('placedAtStart')),\r\n            placedAtEnd: new FormControl(queryParamMap.get('placedAtEnd')),\r\n        });\r\n    }\r\n    selectFilterPreset(presetName) {\r\n        var _a;\r\n        const lastCustomFilters = (_a = this.localStorageService.get('orderListLastCustomFilters')) !== null && _a !== void 0 ? _a : {};\r\n        const emptyCustomFilters = { states: undefined, placedAtStart: undefined, placedAtEnd: undefined };\r\n        const filters = presetName === 'custom' ? lastCustomFilters : emptyCustomFilters;\r\n        this.setQueryParam(Object.assign({ filter: presetName, page: 1 }, filters), { replaceUrl: true });\r\n    }\r\n    applyCustomFilters() {\r\n        const formValue = this.customFilterForm.value;\r\n        const customFilters = {\r\n            states: formValue.states,\r\n            placedAtStart: formValue.placedAtStart,\r\n            placedAtEnd: formValue.placedAtEnd,\r\n        };\r\n        this.setQueryParam(Object.assign({ filter: 'custom' }, customFilters));\r\n        this.customFilterForm.markAsPristine();\r\n        this.localStorageService.set('orderListLastCustomFilters', customFilters);\r\n    }\r\n    createQueryOptions(\r\n    // tslint:disable-next-line:no-shadowed-variable\r\n    skip, take, searchTerm, activeFilterPreset) {\r\n        var _a;\r\n        const filterConfig = this.filterPresets.find(p => p.name === activeFilterPreset);\r\n        // tslint:disable-next-line:no-shadowed-variable\r\n        let filter = {};\r\n        let filterOperator = LogicalOperator.AND;\r\n        if (filterConfig) {\r\n            if (filterConfig.config.active != null) {\r\n                filter.active = {\r\n                    eq: filterConfig.config.active,\r\n                };\r\n            }\r\n            if (filterConfig.config.states) {\r\n                filter.state = {\r\n                    in: filterConfig.config.states,\r\n                };\r\n            }\r\n        }\r\n        else if (activeFilterPreset === 'custom') {\r\n            const queryParams = this.route.snapshot.queryParamMap;\r\n            const states = (_a = queryParams.getAll('states')) !== null && _a !== void 0 ? _a : [];\r\n            const placedAtStart = queryParams.get('placedAtStart');\r\n            const placedAtEnd = queryParams.get('placedAtEnd');\r\n            if (states.length) {\r\n                filter.state = {\r\n                    in: states,\r\n                };\r\n            }\r\n            if (placedAtStart && placedAtEnd) {\r\n                filter.orderPlacedAt = {\r\n                    between: {\r\n                        start: placedAtStart,\r\n                        end: placedAtEnd,\r\n                    },\r\n                };\r\n            }\r\n            else if (placedAtStart) {\r\n                filter.orderPlacedAt = {\r\n                    after: placedAtStart,\r\n                };\r\n            }\r\n            else if (placedAtEnd) {\r\n                filter.orderPlacedAt = {\r\n                    before: placedAtEnd,\r\n                };\r\n            }\r\n        }\r\n        if (searchTerm) {\r\n            filter = {\r\n                customerLastName: {\r\n                    contains: searchTerm,\r\n                },\r\n                transactionId: {\r\n                    contains: searchTerm,\r\n                },\r\n                code: {\r\n                    contains: searchTerm,\r\n                },\r\n            };\r\n            filterOperator = LogicalOperator.OR;\r\n        }\r\n        return {\r\n            options: {\r\n                skip,\r\n                take,\r\n                filter: Object.assign({}, (filter !== null && filter !== void 0 ? filter : {})),\r\n                sort: {\r\n                    updatedAt: SortOrder.DESC,\r\n                },\r\n                filterOperator,\r\n            },\r\n        };\r\n    }\r\n    getShippingNames(order) {\r\n        if (order.shippingLines.length) {\r\n            return order.shippingLines.map(shippingLine => shippingLine.shippingMethod.name).join(', ');\r\n        }\r\n        else {\r\n            return '';\r\n        }\r\n    }\r\n}\nOrderListComponent.fac = function OrderListComponent_Factory(t) { return new (t || OrderListComponent)(ngcc0.directiveInject(ngcc1.ServerConfigService), ngcc0.directiveInject(ngcc1.DataService), ngcc0.directiveInject(ngcc1.LocalStorageService), ngcc0.directiveInject(ngcc7.Router), ngcc0.directiveInject(ngcc7.ActivatedRoute)); };\nOrderListComponent.cmp = /*@__PURE__*/ ngcc0.defineComponent({ type: OrderListComponent, selectors: [[\"vdr-order-list\"]], features: [ngcc0.InheritDefinitionFeature], decls: 61, vars: 64, consts: [[1, \"search-form\"], [\"class\", \"filter-presets btn-group btn-outline-primary\", 4, \"ngIf\"], [\"type\", \"text\", \"name\", \"searchTerm\", 1, \"search-input\", 3, \"formControl\", \"placeholder\"], [1, \"custom-filters\"], [3, \"formGroup\"], [1, \"flex\", \"align-center\"], [\"appendTo\", \"body\", \"formControlName\", \"states\", 3, \"items\", \"addTag\", \"multiple\", \"placeholder\", \"clearable\", \"searchable\"], [\"ng-option-tmp\", \"\"], [\"ng-label-tmp\", \"\"], [1, \"btn\", \"btn-secondary\", 3, \"disabled\", \"click\"], [\"shape\", \"filter\"], [1, \"flex\"], [\"formControlName\", \"placedAtStart\"], [\"formControlName\", \"placedAtEnd\"], [\"locationId\", \"order-list\"], [4, \"ngIf\"], [3, \"items\", \"itemsPerPage\", \"totalItems\", \"currentPage\", \"pageChange\", \"itemsPerPageChange\"], [1, \"filter-presets\", \"btn-group\", \"btn-outline-primary\"], [\"class\", \"btn\", 3, \"btn-primary\", \"click\", 4, \"ngFor\", \"ngForOf\"], [1, \"btn\", 3, \"click\"], [\"shape\", \"angle down\"], [1, \"ng-value-label\"], [\"aria-hidden\", \"true\", 1, \"ng-value-icon\", \"right\", 3, \"click\"], [\"class\", \"btn btn-primary mt1\", 3, \"routerLink\", 4, \"vdrIfPermissions\"], [1, \"btn\", \"btn-primary\", \"mt1\", 3, \"routerLink\"], [\"shape\", \"plus\"], [1, \"left\", \"align-middle\"], [3, \"customer\"], [3, \"state\"], [1, \"right\", \"align-middle\"], [\"iconShape\", \"shopping-cart\", 3, \"label\", \"linkTo\"]], template: function OrderListComponent_Template(rf, ctx) { if (rf & 1) {\n        ngcc0.elementStart(0, \"vdr-action-bar\");\n        ngcc0.elementStart(1, \"vdr-ab-left\");\n        ngcc0.elementStart(2, \"div\", 0);\n        ngcc0.template(3, OrderListComponent_div_3_Template, 6, 6, \"div\", 1);\n        ngcc0.pipe(4, \"async\");\n        ngcc0.element(5, \"input\", 2);\n        ngcc0.pipe(6, \"translate\");\n        ngcc0.elementEnd();\n        ngcc0.elementStart(7, \"div\", 3);\n        ngcc0.pipe(8, \"async\");\n        ngcc0.elementStart(9, \"form\", 4);\n        ngcc0.elementStart(10, \"div\", 5);\n        ngcc0.elementStart(11, \"ng-select\", 6);\n        ngcc0.pipe(12, \"translate\");\n        ngcc0.template(13, OrderListComponent_ng_template_13_Template, 3, 5, \"ng-template\", 7);\n        ngcc0.template(14, OrderListComponent_ng_template_14_Template, 6, 5, \"ng-template\", 8);\n        ngcc0.elementEnd();\n        ngcc0.elementStart(15, \"button\", 9);\n        ngcc0.listener(\"click\", function OrderListComponent_Template_button_click_15_listener() { return ctx.applyCustomFilters(); });\n        ngcc0.text(16);\n        ngcc0.pipe(17, \"translate\");\n        ngcc0.element(18, \"clr-icon\", 10);\n        ngcc0.elementEnd();\n        ngcc0.elementEnd();\n        ngcc0.elementStart(19, \"div\", 11);\n        ngcc0.elementStart(20, \"div\");\n        ngcc0.elementStart(21, \"label\");\n        ngcc0.text(22);\n        ngcc0.pipe(23, \"translate\");\n        ngcc0.elementEnd();\n        ngcc0.element(24, \"vdr-datetime-picker\", 12);\n        ngcc0.elementEnd();\n        ngcc0.elementStart(25, \"div\");\n        ngcc0.elementStart(26, \"label\");\n        ngcc0.text(27);\n        ngcc0.pipe(28, \"translate\");\n        ngcc0.elementEnd();\n        ngcc0.element(29, \"vdr-datetime-picker\", 13);\n        ngcc0.elementEnd();\n        ngcc0.elementEnd();\n        ngcc0.elementEnd();\n        ngcc0.elementEnd();\n        ngcc0.elementEnd();\n        ngcc0.elementStart(30, \"vdr-ab-right\");\n        ngcc0.element(31, \"vdr-action-bar-items\", 14);\n        ngcc0.template(32, OrderListComponent_ng_container_32_Template, 2, 2, \"ng-container\", 15);\n        ngcc0.elementEnd();\n        ngcc0.elementEnd();\n        ngcc0.elementStart(33, \"vdr-data-table\", 16);\n        ngcc0.listener(\"pageChange\", function OrderListComponent_Template_vdr_data_table_pageChange_33_listener($event) { return ctx.setPageNumber($event); })(\"itemsPerPageChange\", function OrderListComponent_Template_vdr_data_table_itemsPerPageChange_33_listener($event) { return ctx.setItemsPerPage($event); });\n        ngcc0.pipe(34, \"async\");\n        ngcc0.pipe(35, \"async\");\n        ngcc0.pipe(36, \"async\");\n        ngcc0.pipe(37, \"async\");\n        ngcc0.elementStart(38, \"vdr-dt-column\");\n        ngcc0.text(39);\n        ngcc0.pipe(40, \"translate\");\n        ngcc0.elementEnd();\n        ngcc0.elementStart(41, \"vdr-dt-column\");\n        ngcc0.text(42);\n        ngcc0.pipe(43, \"translate\");\n        ngcc0.elementEnd();\n        ngcc0.elementStart(44, \"vdr-dt-column\");\n        ngcc0.text(45);\n        ngcc0.pipe(46, \"translate\");\n        ngcc0.elementEnd();\n        ngcc0.elementStart(47, \"vdr-dt-column\");\n        ngcc0.text(48);\n        ngcc0.pipe(49, \"translate\");\n        ngcc0.elementEnd();\n        ngcc0.elementStart(50, \"vdr-dt-column\");\n        ngcc0.text(51);\n        ngcc0.pipe(52, \"translate\");\n        ngcc0.elementEnd();\n        ngcc0.elementStart(53, \"vdr-dt-column\");\n        ngcc0.text(54);\n        ngcc0.pipe(55, \"translate\");\n        ngcc0.elementEnd();\n        ngcc0.elementStart(56, \"vdr-dt-column\");\n        ngcc0.text(57);\n        ngcc0.pipe(58, \"translate\");\n        ngcc0.elementEnd();\n        ngcc0.element(59, \"vdr-dt-column\");\n        ngcc0.template(60, OrderListComponent_ng_template_60_Template, 20, 25, \"ng-template\");\n        ngcc0.elementEnd();\n    } if (rf & 2) {\n        ngcc0.advance(3);\n        ngcc0.property(\"ngIf\", ngcc0.pipeBind1(4, 28, ctx.activePreset$));\n        ngcc0.advance(2);\n        ngcc0.property(\"formControl\", ctx.searchControl)(\"placeholder\", ngcc0.pipeBind1(6, 30, \"order.search-by-order-filters\"));\n        ngcc0.advance(2);\n        ngcc0.classProp(\"expanded\", ngcc0.pipeBind1(8, 32, ctx.activePreset$) === \"custom\");\n        ngcc0.advance(2);\n        ngcc0.property(\"formGroup\", ctx.customFilterForm);\n        ngcc0.advance(2);\n        ngcc0.property(\"items\", ctx.orderStates)(\"addTag\", false)(\"multiple\", true)(\"placeholder\", ngcc0.pipeBind1(12, 34, \"state.all-orders\"))(\"clearable\", true)(\"searchable\", false);\n        ngcc0.advance(4);\n        ngcc0.property(\"disabled\", ctx.customFilterForm.pristine);\n        ngcc0.advance(1);\n        ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(17, 36, \"order.apply-filters\"), \" \");\n        ngcc0.advance(6);\n        ngcc0.textInterpolate(ngcc0.pipeBind1(23, 38, \"order.placed-at-start\"));\n        ngcc0.advance(5);\n        ngcc0.textInterpolate(ngcc0.pipeBind1(28, 40, \"order.placed-at-end\"));\n        ngcc0.advance(5);\n        ngcc0.property(\"ngIf\", ctx.canCreateDraftOrder);\n        ngcc0.advance(1);\n        ngcc0.property(\"items\", ngcc0.pipeBind1(34, 42, ctx.items$))(\"itemsPerPage\", ngcc0.pipeBind1(35, 44, ctx.itemsPerPage$))(\"totalItems\", ngcc0.pipeBind1(36, 46, ctx.totalItems$))(\"currentPage\", ngcc0.pipeBind1(37, 48, ctx.currentPage$));\n        ngcc0.advance(6);\n        ngcc0.textInterpolate(ngcc0.pipeBind1(40, 50, \"common.code\"));\n        ngcc0.advance(3);\n        ngcc0.textInterpolate(ngcc0.pipeBind1(43, 52, \"order.customer\"));\n        ngcc0.advance(3);\n        ngcc0.textInterpolate(ngcc0.pipeBind1(46, 54, \"order.state\"));\n        ngcc0.advance(3);\n        ngcc0.textInterpolate(ngcc0.pipeBind1(49, 56, \"order.total\"));\n        ngcc0.advance(3);\n        ngcc0.textInterpolate(ngcc0.pipeBind1(52, 58, \"common.updated-at\"));\n        ngcc0.advance(3);\n        ngcc0.textInterpolate(ngcc0.pipeBind1(55, 60, \"order.placed-at\"));\n        ngcc0.advance(3);\n        ngcc0.textInterpolate(ngcc0.pipeBind1(58, 62, \"order.shipping\"));\n    } }, directives: [ngcc1.ActionBarComponent, ngcc1.ActionBarLeftComponent, ngcc5.NgIf, ngcc1.FormFieldControlDirective, ngcc2.DefaultValueAccessor, ngcc2.NgControlStatus, ngcc2.FormControlDirective, ngcc2.NgNoValidate, ngcc2.NgControlStatusGroup, ngcc2.FormGroupDirective, ngcc3.NgSelectComponent, ngcc2.FormControlName, ngcc3.f, ngcc3.h, ngcc6.ClrIconCustomTag, ngcc6.ClrLabel, ngcc1.DatetimePickerComponent, ngcc1.ActionBarRightComponent, ngcc1.ActionBarItemsComponent, ngcc1.DataTableComponent, ngcc1.DataTableColumnComponent, ngcc5.NgForOf, ngcc1.IfPermissionsDirective, ngcc7.RouterLinkWithHref, ngcc1.CustomerLabelComponent, ngcc1.OrderStateLabelComponent, ngcc1.TableRowActionComponent], pipes: [ngcc5.AsyncPipe, ngcc4.TranslatePipe, ngcc1.StateI18nTokenPipe, ngcc1.LocaleCurrencyPipe, ngcc1.TimeAgoPipe, ngcc1.LocaleDatePipe], styles: [\".search-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:baseline;width:100%;max-width:100vw;margin-bottom:6px}.filter-presets[_ngcontent-%COMP%]{max-width:90vw;overflow-x:auto}.search-input[_ngcontent-%COMP%]{margin-top:6px;min-width:300px}.custom-filters[_ngcontent-%COMP%]{overflow:hidden;max-height:0;padding-bottom:6px}.custom-filters.expanded[_ngcontent-%COMP%]{max-height:initial}.custom-filters[_ngcontent-%COMP%] > form[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.custom-filters[_ngcontent-%COMP%] > form[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:100%}ng-select[_ngcontent-%COMP%]{flex:1;min-width:200px;height:36px}ng-select[_ngcontent-%COMP%]     .ng-select-container{height:36px}\"], changeDetection: 0 });\r\nOrderListComponent.ctorParameters = () => [\r\n    { type: ServerConfigService },\r\n    { type: DataService },\r\n    { type: LocalStorageService },\r\n    { type: Router },\r\n    { type: ActivatedRoute }\r\n];\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ngcc0.setClassMetadata(OrderListComponent, [{\n        type: Component,\n        args: [{\n                selector: 'vdr-order-list',\n                template: \"<vdr-action-bar>\\r\\n    <vdr-ab-left>\\r\\n        <div class=\\\"search-form\\\">\\r\\n            <div class=\\\"filter-presets btn-group btn-outline-primary\\\" *ngIf=\\\"activePreset$ | async as activePreset\\\">\\r\\n                <button\\r\\n                    class=\\\"btn\\\"\\r\\n                    *ngFor=\\\"let preset of filterPresets\\\"\\r\\n                    [class.btn-primary]=\\\"activePreset === preset.name\\\"\\r\\n                    (click)=\\\"selectFilterPreset(preset.name)\\\"\\r\\n                >\\r\\n                    {{ preset.label | translate }}\\r\\n                </button>\\r\\n                <button\\r\\n                    class=\\\"btn\\\"\\r\\n                    [class.btn-primary]=\\\"activePreset === 'custom'\\\"\\r\\n                    (click)=\\\"selectFilterPreset('custom')\\\"\\r\\n                >\\r\\n                    {{ 'order.filter-custom' | translate }}\\r\\n                    <clr-icon shape=\\\"angle down\\\"></clr-icon>\\r\\n                </button>\\r\\n            </div>\\r\\n            <input\\r\\n                type=\\\"text\\\"\\r\\n                name=\\\"searchTerm\\\"\\r\\n                [formControl]=\\\"searchControl\\\"\\r\\n                [placeholder]=\\\"'order.search-by-order-filters' | translate\\\"\\r\\n                class=\\\"search-input\\\"\\r\\n            />\\r\\n        </div>\\r\\n        <div class=\\\"custom-filters\\\" [class.expanded]=\\\"(activePreset$ | async) === 'custom'\\\">\\r\\n            <form [formGroup]=\\\"customFilterForm\\\">\\r\\n                <div class=\\\"flex align-center\\\">\\r\\n                    <ng-select\\r\\n                        [items]=\\\"orderStates\\\"\\r\\n                        appendTo=\\\"body\\\"\\r\\n                        [addTag]=\\\"false\\\"\\r\\n                        [multiple]=\\\"true\\\"\\r\\n                        formControlName=\\\"states\\\"\\r\\n                        [placeholder]=\\\"'state.all-orders' | translate\\\"\\r\\n                        [clearable]=\\\"true\\\"\\r\\n                        [searchable]=\\\"false\\\"\\r\\n                    >\\r\\n                        <ng-template ng-option-tmp let-item=\\\"item\\\">{{\\r\\n                            item | stateI18nToken | translate\\r\\n                        }}</ng-template>\\r\\n                        <ng-template ng-label-tmp let-item=\\\"item\\\" let-clear=\\\"clear\\\">\\r\\n                            <span class=\\\"ng-value-label\\\"> {{ item | stateI18nToken | translate }}</span>\\r\\n                            <span class=\\\"ng-value-icon right\\\" (click)=\\\"clear(item)\\\" aria-hidden=\\\"true\\\"\\r\\n                                >\\u00D7</span\\r\\n                            >\\r\\n                        </ng-template>\\r\\n                    </ng-select>\\r\\n                    <button\\r\\n                        class=\\\"btn btn-secondary\\\"\\r\\n                        [disabled]=\\\"customFilterForm.pristine\\\"\\r\\n                        (click)=\\\"applyCustomFilters()\\\"\\r\\n                    >\\r\\n                        {{ 'order.apply-filters' | translate }}\\r\\n                        <clr-icon shape=\\\"filter\\\"></clr-icon>\\r\\n                    </button>\\r\\n                </div>\\r\\n                <div class=\\\"flex\\\">\\r\\n                    <div>\\r\\n                        <label>{{ 'order.placed-at-start' | translate }}</label>\\r\\n                        <vdr-datetime-picker formControlName=\\\"placedAtStart\\\"></vdr-datetime-picker>\\r\\n                    </div>\\r\\n                    <div>\\r\\n                        <label>{{ 'order.placed-at-end' | translate }}</label>\\r\\n                        <vdr-datetime-picker formControlName=\\\"placedAtEnd\\\"></vdr-datetime-picker>\\r\\n                    </div>\\r\\n                </div>\\r\\n            </form>\\r\\n        </div>\\r\\n    </vdr-ab-left>\\r\\n    <vdr-ab-right>\\r\\n        <vdr-action-bar-items locationId=\\\"order-list\\\"></vdr-action-bar-items>\\r\\n        <ng-container *ngIf=\\\"canCreateDraftOrder\\\">\\r\\n            <a class=\\\"btn btn-primary mt1\\\" *vdrIfPermissions=\\\"['CreateOrder']\\\" [routerLink]=\\\"['./draft/create']\\\">\\r\\n                <clr-icon shape=\\\"plus\\\"></clr-icon>\\r\\n                {{ 'catalog.create-draft-order' | translate }}\\r\\n            </a>\\r\\n        </ng-container>\\r\\n    </vdr-ab-right>\\r\\n</vdr-action-bar>\\r\\n\\r\\n<vdr-data-table\\r\\n    [items]=\\\"items$ | async\\\"\\r\\n    [itemsPerPage]=\\\"itemsPerPage$ | async\\\"\\r\\n    [totalItems]=\\\"totalItems$ | async\\\"\\r\\n    [currentPage]=\\\"currentPage$ | async\\\"\\r\\n    (pageChange)=\\\"setPageNumber($event)\\\"\\r\\n    (itemsPerPageChange)=\\\"setItemsPerPage($event)\\\"\\r\\n>\\r\\n    <vdr-dt-column>{{ 'common.code' | translate }}</vdr-dt-column>\\r\\n    <vdr-dt-column>{{ 'order.customer' | translate }}</vdr-dt-column>\\r\\n    <vdr-dt-column>{{ 'order.state' | translate }}</vdr-dt-column>\\r\\n    <vdr-dt-column>{{ 'order.total' | translate }}</vdr-dt-column>\\r\\n    <vdr-dt-column>{{ 'common.updated-at' | translate }}</vdr-dt-column>\\r\\n    <vdr-dt-column>{{ 'order.placed-at' | translate }}</vdr-dt-column>\\r\\n    <vdr-dt-column>{{ 'order.shipping' | translate }}</vdr-dt-column>\\r\\n    <vdr-dt-column></vdr-dt-column>\\r\\n    <ng-template let-order=\\\"item\\\">\\r\\n        <td class=\\\"left align-middle\\\">{{ order.code }}</td>\\r\\n        <td class=\\\"left align-middle\\\">\\r\\n            <vdr-customer-label [customer]=\\\"order.customer\\\"></vdr-customer-label>\\r\\n        </td>\\r\\n        <td class=\\\"left align-middle\\\">\\r\\n            <vdr-order-state-label [state]=\\\"order.state\\\"></vdr-order-state-label>\\r\\n        </td>\\r\\n        <td class=\\\"left align-middle\\\">{{ order.totalWithTax | localeCurrency: order.currencyCode }}</td>\\r\\n        <td class=\\\"left align-middle\\\">{{ order.updatedAt | timeAgo }}</td>\\r\\n        <td class=\\\"left align-middle\\\">{{ order.orderPlacedAt | localeDate: 'medium' }}</td>\\r\\n        <td class=\\\"left align-middle\\\">{{ getShippingNames(order) }}</td>\\r\\n        <td class=\\\"right align-middle\\\">\\r\\n            <vdr-table-row-action\\r\\n                iconShape=\\\"shopping-cart\\\"\\r\\n                [label]=\\\"'common.open' | translate\\\"\\r\\n                [linkTo]=\\\"\\r\\n                    order.state === 'Modifying'\\r\\n                        ? ['./', order.id, 'modify']\\r\\n                        : order.state === 'Draft'\\r\\n                        ? ['./draft', order.id]\\r\\n                        : ['./', order.id]\\r\\n                \\\"\\r\\n            ></vdr-table-row-action>\\r\\n        </td>\\r\\n    </ng-template>\\r\\n</vdr-data-table>\\r\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\".search-form{display:flex;flex-direction:column;align-items:baseline;width:100%;max-width:100vw;margin-bottom:6px}.filter-presets{max-width:90vw;overflow-x:auto}.search-input{margin-top:6px;min-width:300px}.custom-filters{overflow:hidden;max-height:0;padding-bottom:6px}.custom-filters.expanded{max-height:initial}.custom-filters>form{display:flex;flex-direction:column;align-items:center}.custom-filters>form>div{width:100%}ng-select{flex:1;min-width:200px;height:36px}ng-select ::ng-deep .ng-select-container{height:36px}\\n\"]\n            }]\n    }], function () { return [{ type: ngcc1.ServerConfigService }, { type: ngcc1.DataService }, { type: ngcc1.LocalStorageService }, { type: ngcc7.Router }, { type: ngcc7.ActivatedRoute }]; }, null); })();\n\nclass OrderPaymentCardComponent {\r\n    constructor() {\r\n        this.settlePayment = new EventEmitter();\r\n        this.transitionPaymentState = new EventEmitter();\r\n        this.settleRefund = new EventEmitter();\r\n    }\r\n    refundHasMetadata(refund) {\r\n        return !!refund && Object.keys(refund.metadata).length > 0;\r\n    }\r\n    nextOtherStates() {\r\n        if (!this.payment) {\r\n            return [];\r\n        }\r\n        return this.payment.nextStates.filter(s => s !== 'Settled' && s !== 'Error');\r\n    }\r\n}\nOrderPaymentCardComponent.fac = function OrderPaymentCardComponent_Factory(t) { return new (t || OrderPaymentCardComponent)(); };\nOrderPaymentCardComponent.cmp = /*@__PURE__*/ ngcc0.defineComponent({ type: OrderPaymentCardComponent, selectors: [[\"vdr-order-payment-card\"]], inputs: { payment: \"payment\", currencyCode: \"currencyCode\" }, outputs: { settlePayment: \"settlePayment\", transitionPaymentState: \"transitionPaymentState\", settleRefund: \"settleRefund\" }, decls: 12, vars: 9, consts: [[1, \"card\"], [1, \"card-header\", \"payment-header\"], [4, \"ngIf\"], [1, \"payment-state\"], [3, \"state\"], [1, \"card-block\"], [3, \"payment\", \"currencyCode\"], [4, \"ngFor\", \"ngForOf\"], [\"class\", \"card-footer\", 4, \"ngIf\"], [\"shape\", \"redo\", \"dir\", \"down\", 1, \"refund-icon\"], [1, \"clr-flex-fill\"], [3, \"label\"], [3, \"label\", 4, \"ngIf\"], [3, \"value\"], [1, \"card-footer\"], [1, \"btn\", \"btn-sm\", \"btn-primary\", 3, \"click\"], [\"class\", \"btn btn-sm btn-primary\", 3, \"click\", 4, \"ngIf\"], [\"vdrDropdownTrigger\", \"\", 1, \"icon-button\"], [\"shape\", \"ellipsis-vertical\"], [\"vdrPosition\", \"bottom-right\"], [\"type\", \"button\", \"vdrDropdownItem\", \"\", 1, \"btn\", 3, \"click\"], [4, \"ngIf\", \"ngIfElse\"], [\"cancel\", \"\"], [\"shape\", \"step-forward-2\"], [\"shape\", \"error-standard\", 1, \"is-error\"]], template: function OrderPaymentCardComponent_Template(rf, ctx) { if (rf & 1) {\n        ngcc0.elementStart(0, \"div\", 0);\n        ngcc0.elementStart(1, \"div\", 1);\n        ngcc0.elementStart(2, \"div\");\n        ngcc0.text(3);\n        ngcc0.pipe(4, \"translate\");\n        ngcc0.template(5, OrderPaymentCardComponent_ng_container_5_Template, 2, 1, \"ng-container\", 2);\n        ngcc0.elementEnd();\n        ngcc0.elementStart(6, \"div\", 3);\n        ngcc0.element(7, \"vdr-payment-state-label\", 4);\n        ngcc0.elementEnd();\n        ngcc0.elementEnd();\n        ngcc0.elementStart(8, \"div\", 5);\n        ngcc0.element(9, \"vdr-payment-detail\", 6);\n        ngcc0.elementEnd();\n        ngcc0.template(10, OrderPaymentCardComponent_ng_container_10_Template, 20, 23, \"ng-container\", 7);\n        ngcc0.template(11, OrderPaymentCardComponent_div_11_Template, 7, 2, \"div\", 8);\n        ngcc0.elementEnd();\n    } if (rf & 2) {\n        ngcc0.advance(3);\n        ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(4, 7, \"order.payment\"), \" \");\n        ngcc0.advance(2);\n        ngcc0.property(\"ngIf\", ctx.payment.transactionId);\n        ngcc0.advance(2);\n        ngcc0.property(\"state\", ctx.payment.state);\n        ngcc0.advance(2);\n        ngcc0.property(\"payment\", ctx.payment)(\"currencyCode\", ctx.currencyCode);\n        ngcc0.advance(1);\n        ngcc0.property(\"ngForOf\", ctx.payment.refunds);\n        ngcc0.advance(1);\n        ngcc0.property(\"ngIf\", ctx.payment.nextStates.length);\n    } }, directives: function () { return [ngcc5.NgIf, PaymentStateLabelComponent, PaymentDetailComponent, ngcc5.NgForOf, ngcc6.ClrIconCustomTag, ngcc8.Dir, RefundStateLabelComponent, ngcc1.LabeledDataComponent, ngcc1.ObjectTreeComponent, ngcc1.DropdownComponent, ngcc1.DropdownTriggerDirective, ngcc1.DropdownMenuComponent, ngcc1.DropdownItemDirective]; }, pipes: function () { return [ngcc4.TranslatePipe, ngcc1.LocaleDatePipe, ngcc1.LocaleCurrencyPipe, ngcc1.StateI18nTokenPipe]; }, styles: [\".payment-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.refund-icon[_ngcontent-%COMP%]{margin-right:6px;color:var(--color-grey-400)}.card-footer[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-end}\"], changeDetection: 0 });\r\nOrderPaymentCardComponent.propDecorators = {\r\n    payment: [{ type: Input }],\r\n    currencyCode: [{ type: Input }],\r\n    settlePayment: [{ type: Output }],\r\n    transitionPaymentState: [{ type: Output }],\r\n    settleRefund: [{ type: Output }]\r\n};\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ngcc0.setClassMetadata(OrderPaymentCardComponent, [{\n        type: Component,\n        args: [{\n                selector: 'vdr-order-payment-card',\n                template: \"<div class=\\\"card\\\">\\r\\n    <div class=\\\"card-header payment-header\\\">\\r\\n        <div>\\r\\n            {{ 'order.payment' | translate }}\\r\\n            <ng-container *ngIf=\\\"payment.transactionId\\\">#{{ payment.transactionId }}</ng-container>\\r\\n        </div>\\r\\n        <div class=\\\"payment-state\\\">\\r\\n            <vdr-payment-state-label [state]=\\\"payment.state\\\"></vdr-payment-state-label>\\r\\n        </div>\\r\\n    </div>\\r\\n    <div class=\\\"card-block\\\">\\r\\n        <vdr-payment-detail [payment]=\\\"payment\\\" [currencyCode]=\\\"currencyCode\\\"></vdr-payment-detail>\\r\\n    </div>\\r\\n    <ng-container *ngFor=\\\"let refund of payment.refunds\\\">\\r\\n        <div class=\\\"card-header payment-header\\\">\\r\\n            <clr-icon shape=\\\"redo\\\" class=\\\"refund-icon\\\" dir=\\\"down\\\"></clr-icon>\\r\\n            {{ 'order.refund' | translate }} #{{ refund.id }}\\r\\n            <div class=\\\"clr-flex-fill\\\"></div>\\r\\n            <vdr-refund-state-label [state]=\\\"refund.state\\\"></vdr-refund-state-label>\\r\\n        </div>\\r\\n        <div class=\\\"card-block\\\">\\r\\n            <vdr-labeled-data [label]=\\\"'common.created-at' | translate\\\">\\r\\n                {{ refund.createdAt | localeDate: 'medium' }}\\r\\n            </vdr-labeled-data>\\r\\n            <vdr-labeled-data [label]=\\\"'order.refund-total' | translate\\\">\\r\\n                {{ refund.total | localeCurrency: currencyCode }}\\r\\n            </vdr-labeled-data>\\r\\n            <vdr-labeled-data [label]=\\\"'order.transaction-id' | translate\\\" *ngIf=\\\"refund.transactionId\\\">\\r\\n                {{ refund.transactionId }}\\r\\n            </vdr-labeled-data>\\r\\n            <vdr-labeled-data [label]=\\\"'order.refund-reason' | translate\\\" *ngIf=\\\"refund.reason\\\">\\r\\n                {{ refund.reason }}\\r\\n            </vdr-labeled-data>\\r\\n            <vdr-labeled-data [label]=\\\"'order.refund-metadata' | translate\\\" *ngIf=\\\"refundHasMetadata(refund)\\\">\\r\\n                <vdr-object-tree [value]=\\\"refund.metadata\\\"></vdr-object-tree>\\r\\n            </vdr-labeled-data>\\r\\n        </div>\\r\\n        <div class=\\\"card-footer\\\" *ngIf=\\\"refund.state === 'Pending'\\\">\\r\\n            <button class=\\\"btn btn-sm btn-primary\\\" (click)=\\\"settleRefund.emit(refund)\\\">\\r\\n                {{ 'order.settle-refund' | translate }}\\r\\n            </button>\\r\\n        </div>\\r\\n    </ng-container>\\r\\n    <div class=\\\"card-footer\\\" *ngIf=\\\"payment.nextStates.length\\\">\\r\\n        <button\\r\\n            class=\\\"btn btn-sm btn-primary\\\"\\r\\n            *ngIf=\\\"payment.nextStates.includes('Settled')\\\"\\r\\n            (click)=\\\"settlePayment.emit(payment)\\\"\\r\\n        >\\r\\n            {{ 'order.settle-payment' | translate }}\\r\\n        </button>\\r\\n        <vdr-dropdown>\\r\\n            <button class=\\\"icon-button\\\" vdrDropdownTrigger>\\r\\n                <clr-icon shape=\\\"ellipsis-vertical\\\"></clr-icon>\\r\\n            </button>\\r\\n            <vdr-dropdown-menu vdrPosition=\\\"bottom-right\\\">\\r\\n                <ng-container *ngFor=\\\"let nextState of nextOtherStates()\\\">\\r\\n                    <button\\r\\n                        type=\\\"button\\\"\\r\\n                        class=\\\"btn\\\"\\r\\n                        vdrDropdownItem\\r\\n                        (click)=\\\"transitionPaymentState.emit({ payment: payment, state: nextState })\\\"\\r\\n                    >\\r\\n                        <ng-container *ngIf=\\\"nextState !== 'Cancelled'; else cancel\\\">\\r\\n                            <clr-icon shape=\\\"step-forward-2\\\"></clr-icon>\\r\\n                            {{\\r\\n                                'order.transition-to-state'\\r\\n                                    | translate: { state: (nextState | stateI18nToken | translate) }\\r\\n                            }}\\r\\n                        </ng-container>\\r\\n                        <ng-template #cancel>\\r\\n                            <clr-icon shape=\\\"error-standard\\\" class=\\\"is-error\\\"></clr-icon>\\r\\n                            {{ 'order.cancel-payment' | translate }}\\r\\n                        </ng-template>\\r\\n                    </button>\\r\\n                </ng-container>\\r\\n            </vdr-dropdown-menu>\\r\\n        </vdr-dropdown>\\r\\n    </div>\\r\\n</div>\\r\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\".payment-header{display:flex;justify-content:space-between;align-items:center}.refund-icon{margin-right:6px;color:var(--color-grey-400)}.card-footer{display:flex;align-items:center;justify-content:flex-end}\\n\"]\n            }]\n    }], function () { return []; }, { settlePayment: [{\n            type: Output\n        }], transitionPaymentState: [{\n            type: Output\n        }], settleRefund: [{\n            type: Output\n        }], payment: [{\n            type: Input\n        }], currencyCode: [{\n            type: Input\n        }] }); })();\n\nconst NODE_HEIGHT = 72;\n\nclass OrderProcessEdgeComponent {\r\n    ngOnInit() {\r\n        this.active$ = this.from.active$\r\n            .asObservable()\r\n            .pipe(tap((active) => this.to.activeTarget$.next(active)));\r\n    }\r\n    getStyle() {\r\n        const direction = this.from.index < this.to.index ? 'down' : 'up';\r\n        const startPos = this.from.getPos(direction === 'down' ? 'bottom' : 'top');\r\n        const endPos = this.to.getPos(direction === 'down' ? 'top' : 'bottom');\r\n        const dX = Math.abs(startPos.x - endPos.x);\r\n        const dY = Math.abs(startPos.y - endPos.y);\r\n        const length = Math.sqrt(Math.pow(dX, 2) + Math.pow(dY, 2));\r\n        return Object.assign({ 'top.px': startPos.y, 'left.px': startPos.x + (direction === 'down' ? 10 : 40) + this.index * 12, 'height.px': length, 'width.px': 1 }, (direction === 'up'\r\n            ? {\r\n                transform: 'rotateZ(180deg)',\r\n                'transform-origin': 'top',\r\n            }\r\n            : {}));\r\n    }\r\n}\nOrderProcessEdgeComponent.fac = function OrderProcessEdgeComponent_Factory(t) { return new (t || OrderProcessEdgeComponent)(); };\nOrderProcessEdgeComponent.cmp = /*@__PURE__*/ ngcc0.defineComponent({ type: OrderProcessEdgeComponent, selectors: [[\"vdr-order-process-edge\"]], inputs: { from: \"from\", to: \"to\", index: \"index\" }, decls: 3, vars: 7, consts: [[1, \"edge\", 3, \"ngStyle\"], [\"shape\", \"arrow\", \"flip\", \"vertical\", 1, \"arrow\"]], template: function OrderProcessEdgeComponent_Template(rf, ctx) { if (rf & 1) {\n        ngcc0.elementStart(0, \"div\", 0);\n        ngcc0.pipe(1, \"async\");\n        ngcc0.element(2, \"clr-icon\", 1);\n        ngcc0.elementEnd();\n    } if (rf & 2) {\n        ngcc0.classProp(\"active\", ngcc0.pipeBind1(1, 5, ctx.active$));\n        ngcc0.property(\"ngStyle\", ctx.getStyle());\n        ngcc0.attribute(\"data-from\", ctx.from.node.name)(\"data-to\", ctx.to.node.name);\n    } }, directives: [ngcc5.NgStyle, ngcc6.ClrIconCustomTag], pipes: [ngcc5.AsyncPipe], styles: [\".edge[_ngcontent-%COMP%]{position:absolute;border:1px solid var(--color-component-border-200);background-color:var(--color-component-bg-300);opacity:.3;transition:border .2s,opacity .2s,background-color .2s}.edge.active[_ngcontent-%COMP%]{border-color:var(--color-primary-500);background-color:var(--color-primary-500);opacity:1}.edge.active[_ngcontent-%COMP%]   .arrow[_ngcontent-%COMP%]{color:var(--color-primary-500)}.edge[_ngcontent-%COMP%]   .arrow[_ngcontent-%COMP%]{position:absolute;bottom:-4px;left:-8px;color:var(--color-grey-300)}\"], changeDetection: 0 });\r\nOrderProcessEdgeComponent.propDecorators = {\r\n    from: [{ type: Input }],\r\n    to: [{ type: Input }],\r\n    index: [{ type: Input }]\r\n};\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ngcc0.setClassMetadata(OrderProcessEdgeComponent, [{\n        type: Component,\n        args: [{\n                selector: 'vdr-order-process-edge',\n                template: \"<div\\r\\n    [attr.data-from]=\\\"from.node.name\\\"\\r\\n    [attr.data-to]=\\\"to.node.name\\\"\\r\\n    [ngStyle]=\\\"getStyle()\\\"\\r\\n    [class.active]=\\\"active$ | async\\\"\\r\\n    class=\\\"edge\\\">\\r\\n    <clr-icon shape=\\\"arrow\\\" flip=\\\"vertical\\\" class=\\\"arrow\\\"></clr-icon>\\r\\n</div>\\r\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\".edge{position:absolute;border:1px solid var(--color-component-border-200);background-color:var(--color-component-bg-300);opacity:.3;transition:border .2s,opacity .2s,background-color .2s}.edge.active{border-color:var(--color-primary-500);background-color:var(--color-primary-500);opacity:1}.edge.active .arrow{color:var(--color-primary-500)}.edge .arrow{position:absolute;bottom:-4px;left:-8px;color:var(--color-grey-300)}\\n\"]\n            }]\n    }], null, { from: [{\n            type: Input\n        }], to: [{\n            type: Input\n        }], index: [{\n            type: Input\n        }] }); })();\n\nclass OrderProcessNodeComponent {\r\n    constructor(elementRef) {\r\n        this.elementRef = elementRef;\r\n        this.active$ = new BehaviorSubject(false);\r\n        this.activeTarget$ = new BehaviorSubject(false);\r\n        this.isCancellable = false;\r\n        // We use a class field here to prevent the\r\n        // i18n extractor from extracting a \"Cancelled\" key\r\n        this.cancelledState = 'Cancelled';\r\n    }\r\n    ngOnChanges(changes) {\r\n        this.isCancellable = !!this.node.to.find((s) => s.name === 'Cancelled');\r\n        if (changes.active) {\r\n            this.active$.next(this.active);\r\n        }\r\n    }\r\n    getPos(origin = 'top') {\r\n        var _a, _b;\r\n        const rect = this.elementRef.nativeElement.getBoundingClientRect();\r\n        const nodeHeight = (_b = (_a = this.elementRef.nativeElement.querySelector('.node')) === null || _a === void 0 ? void 0 : _a.getBoundingClientRect().height) !== null && _b !== void 0 ? _b : 0;\r\n        return {\r\n            x: 10,\r\n            y: this.index * NODE_HEIGHT + (origin === 'bottom' ? nodeHeight : 0),\r\n        };\r\n    }\r\n    getStyle() {\r\n        const pos = this.getPos();\r\n        return {\r\n            'top.px': pos.y,\r\n            'left.px': pos.x,\r\n        };\r\n    }\r\n}\nOrderProcessNodeComponent.fac = function OrderProcessNodeComponent_Factory(t) { return new (t || OrderProcessNodeComponent)(ngcc0.directiveInject(ngcc0.ElementRef)); };\nOrderProcessNodeComponent.cmp = /*@__PURE__*/ ngcc0.defineComponent({ type: OrderProcessNodeComponent, selectors: [[\"vdr-order-process-node\"]], inputs: { node: \"node\", index: \"index\", active: \"active\" }, features: [ngcc0.NgOnChangesFeature], decls: 8, vars: 15, consts: [[1, \"node-wrapper\", 3, \"ngStyle\"], [1, \"node\"], [\"class\", \"cancelled-wrapper\", 4, \"ngIf\"], [1, \"cancelled-wrapper\"], [1, \"cancelled-edge\"], [\"shape\", \"dot-circle\"], [1, \"cancelled-node\"]], template: function OrderProcessNodeComponent_Template(rf, ctx) { if (rf & 1) {\n        ngcc0.elementStart(0, \"div\", 0);\n        ngcc0.pipe(1, \"async\");\n        ngcc0.elementStart(2, \"div\", 1);\n        ngcc0.pipe(3, \"async\");\n        ngcc0.text(4);\n        ngcc0.pipe(5, \"translate\");\n        ngcc0.pipe(6, \"stateI18nToken\");\n        ngcc0.elementEnd();\n        ngcc0.template(7, OrderProcessNodeComponent_div_7_Template, 7, 5, \"div\", 2);\n        ngcc0.elementEnd();\n    } if (rf & 2) {\n        ngcc0.classProp(\"active\", ngcc0.pipeBind1(1, 7, ctx.active$));\n        ngcc0.property(\"ngStyle\", ctx.getStyle());\n        ngcc0.advance(2);\n        ngcc0.classProp(\"active-target\", ngcc0.pipeBind1(3, 9, ctx.activeTarget$));\n        ngcc0.advance(2);\n        ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(5, 11, ngcc0.pipeBind1(6, 13, ctx.node.name)), \" \");\n        ngcc0.advance(3);\n        ngcc0.property(\"ngIf\", ctx.isCancellable);\n    } }, directives: [ngcc5.NgStyle, ngcc5.NgIf, ngcc6.ClrIconCustomTag], pipes: [ngcc5.AsyncPipe, ngcc4.TranslatePipe, ngcc1.StateI18nTokenPipe], styles: [\"[_nghost-%COMP%]{display:block}.node-wrapper[_ngcontent-%COMP%]{position:absolute;z-index:1;display:flex;align-items:center}.node[_ngcontent-%COMP%]{display:inline-block;border:2px solid var(--color-component-border-200);border-radius:3px;padding:3px 6px;z-index:1;background-color:var(--color-component-bg-100);opacity:.7;transition:opacity .2s,background-color .2s,color .2s;cursor:default}.node.active-target[_ngcontent-%COMP%]{border-color:var(--color-primary-500);opacity:.9}.cancelled-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;color:var(--color-grey-300);transition:color .2s,opacity .2s;opacity:.7}.cancelled-edge[_ngcontent-%COMP%]{width:48px;height:2px;background-color:var(--color-component-bg-300);transition:background-color .2s}clr-icon[_ngcontent-%COMP%]{margin-left:-1px}.cancelled-node[_ngcontent-%COMP%]{margin-left:6px}.active[_ngcontent-%COMP%]   .cancelled-wrapper[_ngcontent-%COMP%]{opacity:1}.active[_ngcontent-%COMP%]   .node[_ngcontent-%COMP%]{opacity:1;background-color:var(--color-primary-600);border-color:var(--color-primary-600);color:var(--color-primary-100)}.active[_ngcontent-%COMP%]   .cancelled-wrapper[_ngcontent-%COMP%]{color:var(--color-error-500)}.active[_ngcontent-%COMP%]   .cancelled-edge[_ngcontent-%COMP%]{background-color:var(--color-error-500)}\"], changeDetection: 0 });\r\nOrderProcessNodeComponent.ctorParameters = () => [\r\n    { type: ElementRef }\r\n];\r\nOrderProcessNodeComponent.propDecorators = {\r\n    node: [{ type: Input }],\r\n    index: [{ type: Input }],\r\n    active: [{ type: Input }]\r\n};\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ngcc0.setClassMetadata(OrderProcessNodeComponent, [{\n        type: Component,\n        args: [{\n                selector: 'vdr-order-process-node',\n                template: \"<div class=\\\"node-wrapper\\\" [ngStyle]=\\\"getStyle()\\\" [class.active]=\\\"active$ | async\\\">\\r\\n    <div\\r\\n        class=\\\"node\\\"\\r\\n        [class.active-target]=\\\"activeTarget$ | async\\\"\\r\\n    >\\r\\n        {{ node.name | stateI18nToken | translate }}\\r\\n    </div>\\r\\n    <div class=\\\"cancelled-wrapper\\\" *ngIf=\\\"isCancellable\\\">\\r\\n        <div class=\\\"cancelled-edge\\\">\\r\\n        </div>\\r\\n        <clr-icon shape=\\\"dot-circle\\\"></clr-icon>\\r\\n        <div class=\\\"cancelled-node\\\">\\r\\n            {{ cancelledState | stateI18nToken | translate }}\\r\\n        </div>\\r\\n    </div>\\r\\n</div>\\r\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\":host{display:block}.node-wrapper{position:absolute;z-index:1;display:flex;align-items:center}.node{display:inline-block;border:2px solid var(--color-component-border-200);border-radius:3px;padding:3px 6px;z-index:1;background-color:var(--color-component-bg-100);opacity:.7;transition:opacity .2s,background-color .2s,color .2s;cursor:default}.node.active-target{border-color:var(--color-primary-500);opacity:.9}.cancelled-wrapper{display:flex;align-items:center;color:var(--color-grey-300);transition:color .2s,opacity .2s;opacity:.7}.cancelled-edge{width:48px;height:2px;background-color:var(--color-component-bg-300);transition:background-color .2s}clr-icon{margin-left:-1px}.cancelled-node{margin-left:6px}.active .cancelled-wrapper{opacity:1}.active .node{opacity:1;background-color:var(--color-primary-600);border-color:var(--color-primary-600);color:var(--color-primary-100)}.active .cancelled-wrapper{color:var(--color-error-500)}.active .cancelled-edge{background-color:var(--color-error-500)}\\n\"]\n            }]\n    }], function () { return [{ type: ngcc0.ElementRef }]; }, { node: [{\n            type: Input\n        }], index: [{\n            type: Input\n        }], active: [{\n            type: Input\n        }] }); })();\n\nclass OrderProcessGraphComponent {\r\n    constructor(changeDetector) {\r\n        this.changeDetector = changeDetector;\r\n        this.setActiveState$ = new BehaviorSubject(undefined);\r\n        this.nodes = [];\r\n        this.edges = [];\r\n    }\r\n    get outerHeight() {\r\n        return this.nodes.length * NODE_HEIGHT;\r\n    }\r\n    ngOnInit() {\r\n        this.setActiveState$.next(this.initialState);\r\n        this.activeState$ = this.setActiveState$.pipe(debounceTime(150));\r\n    }\r\n    ngOnChanges(changes) {\r\n        this.populateNodes();\r\n    }\r\n    ngAfterViewInit() {\r\n        setTimeout(() => this.populateEdges());\r\n    }\r\n    onMouseOver(stateName) {\r\n        this.setActiveState$.next(stateName);\r\n    }\r\n    onMouseOut() {\r\n        this.setActiveState$.next(this.initialState);\r\n    }\r\n    getNodeFor(state) {\r\n        if (this.nodeComponents) {\r\n            return this.nodeComponents.find((n) => n.node.name === state);\r\n        }\r\n    }\r\n    populateNodes() {\r\n        var _a, _b;\r\n        const stateNodeMap = new Map();\r\n        for (const state of this.states) {\r\n            stateNodeMap.set(state.name, {\r\n                name: state.name,\r\n                to: [],\r\n            });\r\n        }\r\n        for (const [name, stateNode] of stateNodeMap.entries()) {\r\n            const targets = (_b = (_a = this.states.find((s) => s.name === name)) === null || _a === void 0 ? void 0 : _a.to) !== null && _b !== void 0 ? _b : [];\r\n            for (const target of targets) {\r\n                const targetNode = stateNodeMap.get(target);\r\n                if (targetNode) {\r\n                    stateNode.to.push(targetNode);\r\n                }\r\n            }\r\n        }\r\n        this.nodes = [...stateNodeMap.values()].filter((n) => n.name !== 'Cancelled');\r\n    }\r\n    populateEdges() {\r\n        for (const node of this.nodes) {\r\n            const nodeCmp = this.getNodeFor(node.name);\r\n            let index = 0;\r\n            for (const to of node.to) {\r\n                const toCmp = this.getNodeFor(to.name);\r\n                if (nodeCmp && toCmp && nodeCmp !== toCmp) {\r\n                    this.edges.push({\r\n                        to: toCmp,\r\n                        from: nodeCmp,\r\n                        index,\r\n                    });\r\n                    index++;\r\n                }\r\n            }\r\n        }\r\n        this.edges = [...this.edges];\r\n        this.changeDetector.markForCheck();\r\n    }\r\n}\nOrderProcessGraphComponent.fac = function OrderProcessGraphComponent_Factory(t) { return new (t || OrderProcessGraphComponent)(ngcc0.directiveInject(ngcc0.ChangeDetectorRef)); };\nOrderProcessGraphComponent.cmp = /*@__PURE__*/ ngcc0.defineComponent({ type: OrderProcessGraphComponent, selectors: [[\"vdr-order-process-graph\"]], viewQuery: function OrderProcessGraphComponent_Query(rf, ctx) { if (rf & 1) {\n        ngcc0.viewQuery(OrderProcessNodeComponent, 5);\n    } if (rf & 2) {\n        let _t;\n        ngcc0.queryRefresh(_t = ngcc0.loadQuery()) && (ctx.nodeComponents = _t);\n    } }, hostVars: 2, hostBindings: function OrderProcessGraphComponent_HostBindings(rf, ctx) { if (rf & 2) {\n        ngcc0.styleProp(\"height\", ctx.outerHeight, \"px\");\n    } }, inputs: { states: \"states\", initialState: \"initialState\" }, features: [ngcc0.NgOnChangesFeature], decls: 2, vars: 2, consts: [[4, \"ngFor\", \"ngForOf\"], [3, \"node\", \"index\", \"active\", \"mouseenter\", \"mouseleave\"], [3, \"from\", \"to\", \"index\"]], template: function OrderProcessGraphComponent_Template(rf, ctx) { if (rf & 1) {\n        ngcc0.template(0, OrderProcessGraphComponent_ng_container_0_Template, 3, 5, \"ng-container\", 0);\n        ngcc0.template(1, OrderProcessGraphComponent_ng_container_1_Template, 2, 3, \"ng-container\", 0);\n    } if (rf & 2) {\n        ngcc0.property(\"ngForOf\", ctx.nodes);\n        ngcc0.advance(1);\n        ngcc0.property(\"ngForOf\", ctx.edges);\n    } }, directives: [ngcc5.NgForOf, OrderProcessNodeComponent, OrderProcessEdgeComponent], pipes: [ngcc5.AsyncPipe], styles: [\"[_nghost-%COMP%]{display:block;border:1px hotpink;margin:20px;padding:12px;position:relative}.state-row[_ngcontent-%COMP%]{display:flex}\"], changeDetection: 0 });\r\nOrderProcessGraphComponent.ctorParameters = () => [\r\n    { type: ChangeDetectorRef }\r\n];\r\nOrderProcessGraphComponent.propDecorators = {\r\n    states: [{ type: Input }],\r\n    initialState: [{ type: Input }],\r\n    nodeComponents: [{ type: ViewChildren, args: [OrderProcessNodeComponent,] }],\r\n    outerHeight: [{ type: HostBinding, args: ['style.height.px',] }]\r\n};\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ngcc0.setClassMetadata(OrderProcessGraphComponent, [{\n        type: Component,\n        args: [{\n                selector: 'vdr-order-process-graph',\n                template: \"<ng-container *ngFor=\\\"let state of nodes; let i = index\\\">\\r\\n    <vdr-order-process-node\\r\\n        [node]=\\\"state\\\"\\r\\n        [index]=\\\"i\\\"\\r\\n        [active]=\\\"(activeState$ | async) === state.name\\\"\\r\\n        (mouseenter)=\\\"onMouseOver(state.name)\\\"\\r\\n        (mouseleave)=\\\"onMouseOut()\\\"\\r\\n    ></vdr-order-process-node>\\r\\n</ng-container>\\r\\n<ng-container *ngFor=\\\"let edge of edges\\\">\\r\\n    <vdr-order-process-edge [from]=\\\"edge.from\\\" [to]=\\\"edge.to\\\" [index]=\\\"edge.index\\\"></vdr-order-process-edge>\\r\\n</ng-container>\\r\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\":host{display:block;border:1px hotpink;margin:20px;padding:12px;position:relative}.state-row{display:flex}\\n\"]\n            }]\n    }], function () { return [{ type: ngcc0.ChangeDetectorRef }]; }, { outerHeight: [{\n            type: HostBinding,\n            args: ['style.height.px']\n        }], states: [{\n            type: Input\n        }], initialState: [{\n            type: Input\n        }], nodeComponents: [{\n            type: ViewChildren,\n            args: [OrderProcessNodeComponent]\n        }] }); })();\n\nclass OrderTableComponent {\r\n    constructor() {\r\n        this.isDraft = false;\r\n        this.adjust = new EventEmitter();\r\n        this.remove = new EventEmitter();\r\n        this.orderLineCustomFieldsVisible = false;\r\n        this.customFieldsForLine = {};\r\n    }\r\n    get visibleOrderLineCustomFields() {\r\n        return this.orderLineCustomFieldsVisible ? this.orderLineCustomFields : [];\r\n    }\r\n    get showElided() {\r\n        return !this.orderLineCustomFieldsVisible && 0 < this.orderLineCustomFields.length;\r\n    }\r\n    ngOnInit() {\r\n        this.orderLineCustomFieldsVisible = this.orderLineCustomFields.length < 2;\r\n        this.getLineCustomFields();\r\n    }\r\n    draftInputBlur(line, quantity) {\r\n        if (line.quantity !== quantity) {\r\n            this.adjust.emit({ lineId: line.id, quantity });\r\n        }\r\n    }\r\n    toggleOrderLineCustomFields() {\r\n        this.orderLineCustomFieldsVisible = !this.orderLineCustomFieldsVisible;\r\n    }\r\n    getLineDiscounts(line) {\r\n        return line.discounts.filter(a => a.type === AdjustmentType.PROMOTION);\r\n    }\r\n    getLineCustomFields() {\r\n        for (const line of this.order.lines) {\r\n            const formGroup = new FormGroup({});\r\n            const result = this.orderLineCustomFields\r\n                .map(config => {\r\n                const value = line.customFields[config.name];\r\n                formGroup.addControl(config.name, new FormControl(value));\r\n                return {\r\n                    config,\r\n                    formGroup,\r\n                    value,\r\n                };\r\n            })\r\n                .filter(field => {\r\n                return this.orderLineCustomFieldsVisible ? true : field.value != null;\r\n            });\r\n            this.customFieldsForLine[line.id] = result;\r\n        }\r\n    }\r\n    getPromotionLink(promotion) {\r\n        const id = promotion.adjustmentSource.split(':')[1];\r\n        return ['/marketing', 'promotions', id];\r\n    }\r\n    getCouponCodeForAdjustment(order, promotionAdjustment) {\r\n        const id = promotionAdjustment.adjustmentSource.split(':')[1];\r\n        const promotion = order.promotions.find(p => p.id === id);\r\n        if (promotion) {\r\n            return promotion.couponCode || undefined;\r\n        }\r\n    }\r\n    getShippingNames(order) {\r\n        if (order.shippingLines.length) {\r\n            return order.shippingLines.map(shippingLine => shippingLine.shippingMethod.name).join(', ');\r\n        }\r\n        else {\r\n            return '';\r\n        }\r\n    }\r\n}\nOrderTableComponent.fac = function OrderTableComponent_Factory(t) { return new (t || OrderTableComponent)(); };\nOrderTableComponent.cmp = /*@__PURE__*/ ngcc0.defineComponent({ type: OrderTableComponent, selectors: [[\"vdr-order-table\"]], inputs: { isDraft: \"isDraft\", order: \"order\", orderLineCustomFields: \"orderLineCustomFields\" }, outputs: { adjust: \"adjust\", remove: \"remove\" }, decls: 61, vars: 61, consts: [[1, \"order-table\", \"table\"], [4, \"ngFor\", \"ngForOf\"], [\"class\", \"surcharge\", 4, \"ngFor\", \"ngForOf\"], [1, \"sub-total\"], [1, \"left\", \"clr-align-middle\"], [\"colspan\", \"4\"], [1, \"clr-align-middle\"], [1, \"net-price\", 3, \"title\"], [1, \"shipping\"], [\"colspan\", \"3\"], [1, \"total\"], [1, \"order-line\"], [1, \"align-middle\", \"thumb\"], [3, \"src\", 4, \"ngIf\"], [1, \"align-middle\", \"name\"], [1, \"align-middle\", \"sku\"], [1, \"align-middle\", \"unit-price\"], [1, \"align-middle\", \"quantity\"], [4, \"ngIf\", \"ngIfElse\"], [\"draft\", \"\"], [3, \"line\", \"payments\"], [3, \"line\", \"orderState\"], [1, \"align-middle\", \"total\"], [4, \"ngIf\"], [3, \"src\"], [1, \"flex\"], [\"type\", \"number\", \"min\", \"0\", 1, \"draft-qty\", 3, \"value\", \"blur\"], [\"qtyInput\", \"\"], [1, \"icon-button\", 3, \"click\"], [\"shape\", \"trash\"], [\"vdrDropdownTrigger\", \"\", 1, \"promotions-label\"], [\"class\", \"line-promotion\", 4, \"ngFor\", \"ngForOf\"], [1, \"line-promotion\"], [1, \"promotion-name\", 3, \"routerLink\"], [1, \"promotion-amount\"], [\"colspan\", \"6\", 1, \"custom-fields-row\"], [1, \"order-line-custom-fields\"], [\"class\", \"custom-field\", 4, \"ngFor\", \"ngForOf\"], [1, \"custom-field\"], [3, \"compact\", \"readonly\", \"customField\", \"customFieldsFormGroup\"], [1, \"surcharge\"], [\"colspan\", \"2\", 1, \"align-middle\", \"name\", \"left\"], [\"colspan\", \"2\", 1, \"align-middle\"], [\"class\", \"order-adjustment\", 4, \"ngIf\"], [1, \"order-adjustment\"], [\"colspan\", \"5\", 1, \"left\", \"clr-align-middle\"], [3, \"routerLink\"]], template: function OrderTableComponent_Template(rf, ctx) { if (rf & 1) {\n        ngcc0.elementStart(0, \"table\", 0);\n        ngcc0.elementStart(1, \"thead\");\n        ngcc0.elementStart(2, \"tr\");\n        ngcc0.element(3, \"th\");\n        ngcc0.elementStart(4, \"th\");\n        ngcc0.text(5);\n        ngcc0.pipe(6, \"translate\");\n        ngcc0.elementEnd();\n        ngcc0.elementStart(7, \"th\");\n        ngcc0.text(8);\n        ngcc0.pipe(9, \"translate\");\n        ngcc0.elementEnd();\n        ngcc0.elementStart(10, \"th\");\n        ngcc0.text(11);\n        ngcc0.pipe(12, \"translate\");\n        ngcc0.elementEnd();\n        ngcc0.elementStart(13, \"th\");\n        ngcc0.text(14);\n        ngcc0.pipe(15, \"translate\");\n        ngcc0.elementEnd();\n        ngcc0.elementStart(16, \"th\");\n        ngcc0.text(17);\n        ngcc0.pipe(18, \"translate\");\n        ngcc0.elementEnd();\n        ngcc0.elementEnd();\n        ngcc0.elementEnd();\n        ngcc0.elementStart(19, \"tbody\");\n        ngcc0.template(20, OrderTableComponent_ng_container_20_Template, 30, 35, \"ng-container\", 1);\n        ngcc0.template(21, OrderTableComponent_tr_21_Template, 13, 13, \"tr\", 2);\n        ngcc0.template(22, OrderTableComponent_ng_container_22_Template, 2, 1, \"ng-container\", 1);\n        ngcc0.elementStart(23, \"tr\", 3);\n        ngcc0.elementStart(24, \"td\", 4);\n        ngcc0.text(25);\n        ngcc0.pipe(26, \"translate\");\n        ngcc0.elementEnd();\n        ngcc0.element(27, \"td\", 5);\n        ngcc0.elementStart(28, \"td\", 6);\n        ngcc0.text(29);\n        ngcc0.pipe(30, \"localeCurrency\");\n        ngcc0.elementStart(31, \"div\", 7);\n        ngcc0.pipe(32, \"translate\");\n        ngcc0.text(33);\n        ngcc0.pipe(34, \"localeCurrency\");\n        ngcc0.elementEnd();\n        ngcc0.elementEnd();\n        ngcc0.elementEnd();\n        ngcc0.elementStart(35, \"tr\", 8);\n        ngcc0.elementStart(36, \"td\", 4);\n        ngcc0.text(37);\n        ngcc0.pipe(38, \"translate\");\n        ngcc0.elementEnd();\n        ngcc0.elementStart(39, \"td\", 6);\n        ngcc0.text(40);\n        ngcc0.elementEnd();\n        ngcc0.element(41, \"td\", 9);\n        ngcc0.elementStart(42, \"td\", 6);\n        ngcc0.text(43);\n        ngcc0.pipe(44, \"localeCurrency\");\n        ngcc0.elementStart(45, \"div\", 7);\n        ngcc0.pipe(46, \"translate\");\n        ngcc0.text(47);\n        ngcc0.pipe(48, \"localeCurrency\");\n        ngcc0.elementEnd();\n        ngcc0.elementEnd();\n        ngcc0.elementEnd();\n        ngcc0.elementStart(49, \"tr\", 10);\n        ngcc0.elementStart(50, \"td\", 4);\n        ngcc0.text(51);\n        ngcc0.pipe(52, \"translate\");\n        ngcc0.elementEnd();\n        ngcc0.element(53, \"td\", 5);\n        ngcc0.elementStart(54, \"td\", 6);\n        ngcc0.text(55);\n        ngcc0.pipe(56, \"localeCurrency\");\n        ngcc0.elementStart(57, \"div\", 7);\n        ngcc0.pipe(58, \"translate\");\n        ngcc0.text(59);\n        ngcc0.pipe(60, \"localeCurrency\");\n        ngcc0.elementEnd();\n        ngcc0.elementEnd();\n        ngcc0.elementEnd();\n        ngcc0.elementEnd();\n        ngcc0.elementEnd();\n    } if (rf & 2) {\n        ngcc0.advance(5);\n        ngcc0.textInterpolate(ngcc0.pipeBind1(6, 21, \"order.product-name\"));\n        ngcc0.advance(3);\n        ngcc0.textInterpolate(ngcc0.pipeBind1(9, 23, \"order.product-sku\"));\n        ngcc0.advance(3);\n        ngcc0.textInterpolate(ngcc0.pipeBind1(12, 25, \"order.unit-price\"));\n        ngcc0.advance(3);\n        ngcc0.textInterpolate(ngcc0.pipeBind1(15, 27, \"order.quantity\"));\n        ngcc0.advance(3);\n        ngcc0.textInterpolate(ngcc0.pipeBind1(18, 29, \"order.total\"));\n        ngcc0.advance(3);\n        ngcc0.property(\"ngForOf\", ctx.order.lines);\n        ngcc0.advance(1);\n        ngcc0.property(\"ngForOf\", ctx.order.surcharges);\n        ngcc0.advance(1);\n        ngcc0.property(\"ngForOf\", ctx.order.discounts);\n        ngcc0.advance(3);\n        ngcc0.textInterpolate(ngcc0.pipeBind1(26, 31, \"order.sub-total\"));\n        ngcc0.advance(4);\n        ngcc0.textInterpolate1(\" \", ngcc0.pipeBind2(30, 33, ctx.order.subTotalWithTax, ctx.order.currencyCode), \" \");\n        ngcc0.advance(2);\n        ngcc0.property(\"title\", ngcc0.pipeBind1(32, 36, \"order.net-price\"));\n        ngcc0.advance(2);\n        ngcc0.textInterpolate1(\" \", ngcc0.pipeBind2(34, 38, ctx.order.subTotal, ctx.order.currencyCode), \" \");\n        ngcc0.advance(4);\n        ngcc0.textInterpolate(ngcc0.pipeBind1(38, 41, \"order.shipping\"));\n        ngcc0.advance(3);\n        ngcc0.textInterpolate(ctx.getShippingNames(ctx.order));\n        ngcc0.advance(3);\n        ngcc0.textInterpolate1(\" \", ngcc0.pipeBind2(44, 43, ctx.order.shippingWithTax, ctx.order.currencyCode), \" \");\n        ngcc0.advance(2);\n        ngcc0.property(\"title\", ngcc0.pipeBind1(46, 46, \"order.net-price\"));\n        ngcc0.advance(2);\n        ngcc0.textInterpolate1(\" \", ngcc0.pipeBind2(48, 48, ctx.order.shipping, ctx.order.currencyCode), \" \");\n        ngcc0.advance(4);\n        ngcc0.textInterpolate(ngcc0.pipeBind1(52, 51, \"order.total\"));\n        ngcc0.advance(4);\n        ngcc0.textInterpolate1(\" \", ngcc0.pipeBind2(56, 53, ctx.order.totalWithTax, ctx.order.currencyCode), \" \");\n        ngcc0.advance(2);\n        ngcc0.property(\"title\", ngcc0.pipeBind1(58, 56, \"order.net-price\"));\n        ngcc0.advance(2);\n        ngcc0.textInterpolate1(\" \", ngcc0.pipeBind2(60, 58, ctx.order.total, ctx.order.currencyCode), \" \");\n    } }, directives: [ngcc5.NgForOf, ngcc5.NgIf, LineRefundsComponent, LineFulfillmentComponent, ngcc1.FormFieldControlDirective, ngcc6.ClrIconCustomTag, ngcc1.DropdownComponent, ngcc1.DropdownTriggerDirective, ngcc1.DropdownMenuComponent, ngcc7.RouterLinkWithHref, ngcc1.CustomFieldControlComponent, ngcc1.ChipComponent], pipes: [ngcc4.TranslatePipe, ngcc1.LocaleCurrencyPipe, ngcc1.AssetPreviewPipe], styles: [\".order-table[_ngcontent-%COMP%]   .is-cancelled[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-decoration:line-through;background-color:var(--color-component-bg-200)}.order-table[_ngcontent-%COMP%]   .sub-total[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-top:1px dashed var(--color-component-border-200)}.order-table[_ngcontent-%COMP%]   .total[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-weight:bold;border-top:1px dashed var(--color-component-border-200)}.order-table[_ngcontent-%COMP%]   td.custom-fields-row[_ngcontent-%COMP%]{border-top-style:dashed;border-top-color:var(--color-grey-200)}.order-table[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:var(--border-radius-img)}.order-table[_ngcontent-%COMP%]   .order-line-custom-fields[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}.order-table[_ngcontent-%COMP%]   .order-line-custom-fields[_ngcontent-%COMP%]   .custom-field[_ngcontent-%COMP%]{text-align:start;max-width:200px;overflow:hidden;text-overflow:ellipsis;margin-bottom:6px;margin-right:18px}.order-table[_ngcontent-%COMP%]   .draft-qty[_ngcontent-%COMP%]{max-width:48px}.order-table[_ngcontent-%COMP%]   .order-line-custom-field[_ngcontent-%COMP%]{background-color:var(--color-component-bg-100)}.order-table[_ngcontent-%COMP%]   .order-line-custom-field[_ngcontent-%COMP%]   .custom-field-ellipsis[_ngcontent-%COMP%]{color:var(--color-text-300)}.order-table[_ngcontent-%COMP%]   .net-price[_ngcontent-%COMP%]{font-size:11px;color:var(--color-text-300)}.order-table[_ngcontent-%COMP%]   .promotions-label[_ngcontent-%COMP%]{-webkit-text-decoration:underline dotted var(--color-text-200);text-decoration:underline dotted var(--color-text-200);font-size:11px;margin-top:6px;cursor:pointer;text-transform:lowercase}.order-table[_ngcontent-%COMP%]   .thumb[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:50px;height:50px}  .line-promotion{display:flex;justify-content:space-between;padding:6px 12px}  .line-promotion .promotion-amount{margin-left:12px}  .line-promotion .net-price{font-size:11px;color:var(--color-text-300)}\"], changeDetection: 0 });\r\nOrderTableComponent.propDecorators = {\r\n    order: [{ type: Input }],\r\n    orderLineCustomFields: [{ type: Input }],\r\n    isDraft: [{ type: Input }],\r\n    adjust: [{ type: Output }],\r\n    remove: [{ type: Output }]\r\n};\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ngcc0.setClassMetadata(OrderTableComponent, [{\n        type: Component,\n        args: [{\n                selector: 'vdr-order-table',\n                template: \"<table class=\\\"order-table table\\\">\\r\\n    <thead>\\r\\n        <tr>\\r\\n            <th></th>\\r\\n            <th>{{ 'order.product-name' | translate }}</th>\\r\\n            <th>{{ 'order.product-sku' | translate }}</th>\\r\\n            <th>{{ 'order.unit-price' | translate }}</th>\\r\\n            <th>{{ 'order.quantity' | translate }}</th>\\r\\n            <th>{{ 'order.total' | translate }}</th>\\r\\n        </tr>\\r\\n    </thead>\\r\\n    <tbody>\\r\\n        <ng-container *ngFor=\\\"let line of order.lines\\\">\\r\\n            <tr class=\\\"order-line\\\" [class.is-cancelled]=\\\"line.quantity === 0\\\">\\r\\n                <td class=\\\"align-middle thumb\\\">\\r\\n                    <img *ngIf=\\\"line.featuredAsset\\\" [src]=\\\"line.featuredAsset | assetPreview: 'tiny'\\\" />\\r\\n                </td>\\r\\n                <td class=\\\"align-middle name\\\">{{ line.productVariant.name }}</td>\\r\\n                <td class=\\\"align-middle sku\\\">{{ line.productVariant.sku }}</td>\\r\\n                <td class=\\\"align-middle unit-price\\\">\\r\\n                    {{ line.unitPriceWithTax | localeCurrency: order.currencyCode }}\\r\\n                    <div class=\\\"net-price\\\" [title]=\\\"'order.net-price' | translate\\\">\\r\\n                        {{ line.unitPrice | localeCurrency: order.currencyCode }}\\r\\n                    </div>\\r\\n                </td>\\r\\n                <td class=\\\"align-middle quantity\\\">\\r\\n                    <ng-container *ngIf=\\\"!isDraft; else draft\\\">\\r\\n                        {{ line.quantity }}\\r\\n                    </ng-container>\\r\\n                    <ng-template #draft>\\r\\n                        <div class=\\\"flex\\\">\\r\\n                            <input\\r\\n                                class=\\\"draft-qty\\\"\\r\\n                                type=\\\"number\\\"\\r\\n                                min=\\\"0\\\"\\r\\n                                #qtyInput\\r\\n                                [value]=\\\"line.quantity\\\"\\r\\n                                (blur)=\\\"draftInputBlur(line, qtyInput.valueAsNumber)\\\"\\r\\n                            />\\r\\n                            <button class=\\\"icon-button\\\" (click)=\\\"remove.emit({ lineId: line.id })\\\">\\r\\n                                <clr-icon shape=\\\"trash\\\"></clr-icon>\\r\\n                            </button>\\r\\n                        </div>\\r\\n                    </ng-template>\\r\\n                    <vdr-line-refunds [line]=\\\"line\\\" [payments]=\\\"order.payments\\\"></vdr-line-refunds>\\r\\n                    <vdr-line-fulfillment [line]=\\\"line\\\" [orderState]=\\\"order.state\\\"></vdr-line-fulfillment>\\r\\n                </td>\\r\\n                <td class=\\\"align-middle total\\\">\\r\\n                    {{ line.linePriceWithTax | localeCurrency: order.currencyCode }}\\r\\n                    <div class=\\\"net-price\\\" [title]=\\\"'order.net-price' | translate\\\">\\r\\n                        {{ line.linePrice | localeCurrency: order.currencyCode }}\\r\\n                    </div>\\r\\n\\r\\n                    <ng-container *ngIf=\\\"getLineDiscounts(line) as discounts\\\">\\r\\n                        <vdr-dropdown *ngIf=\\\"discounts.length\\\">\\r\\n                            <div class=\\\"promotions-label\\\" vdrDropdownTrigger>\\r\\n                                {{ 'order.promotions-applied' | translate }}\\r\\n                            </div>\\r\\n                            <vdr-dropdown-menu>\\r\\n                                <div class=\\\"line-promotion\\\" *ngFor=\\\"let discount of discounts\\\">\\r\\n                                    <a class=\\\"promotion-name\\\" [routerLink]=\\\"getPromotionLink(discount)\\\">{{\\r\\n                                        discount.description\\r\\n                                    }}</a>\\r\\n                                    <div class=\\\"promotion-amount\\\">\\r\\n                                        {{ discount.amountWithTax | localeCurrency: order.currencyCode }}\\r\\n                                        <div class=\\\"net-price\\\" [title]=\\\"'order.net-price' | translate\\\">\\r\\n                                            {{ discount.amount | localeCurrency: order.currencyCode }}\\r\\n                                        </div>\\r\\n                                    </div>\\r\\n                                </div>\\r\\n                            </vdr-dropdown-menu>\\r\\n                        </vdr-dropdown>\\r\\n                    </ng-container>\\r\\n                </td>\\r\\n            </tr>\\r\\n            <ng-container *ngIf=\\\"customFieldsForLine[line.id] as customFields\\\">\\r\\n                <tr *ngIf=\\\"customFields.length\\\">\\r\\n                    <td colspan=\\\"6\\\" class=\\\"custom-fields-row\\\">\\r\\n                        <div class=\\\"order-line-custom-fields\\\">\\r\\n                            <div class=\\\"custom-field\\\" *ngFor=\\\"let field of customFields\\\">\\r\\n                                <vdr-custom-field-control\\r\\n                                    [compact]=\\\"true\\\"\\r\\n                                    [readonly]=\\\"true\\\"\\r\\n                                    [customField]=\\\"field.config\\\"\\r\\n                                    [customFieldsFormGroup]=\\\"field.formGroup\\\"\\r\\n                                ></vdr-custom-field-control>\\r\\n                            </div>\\r\\n                        </div>\\r\\n                    </td>\\r\\n                </tr>\\r\\n            </ng-container>\\r\\n        </ng-container>\\r\\n        <tr class=\\\"surcharge\\\" *ngFor=\\\"let surcharge of order.surcharges\\\">\\r\\n            <td class=\\\"align-middle name left\\\" colspan=\\\"2\\\">{{ surcharge.description }}</td>\\r\\n            <td class=\\\"align-middle sku\\\">{{ surcharge.sku }}</td>\\r\\n            <td class=\\\"align-middle\\\" colspan=\\\"2\\\"></td>\\r\\n            <td class=\\\"align-middle total\\\">\\r\\n                {{ surcharge.priceWithTax | localeCurrency: order.currencyCode }}\\r\\n                <div class=\\\"net-price\\\" [title]=\\\"'order.net-price' | translate\\\">\\r\\n                    {{ surcharge.price | localeCurrency: order.currencyCode }}\\r\\n                </div>\\r\\n            </td>\\r\\n        </tr>\\r\\n        <ng-container *ngFor=\\\"let discount of order.discounts\\\">\\r\\n            <tr class=\\\"order-adjustment\\\" *ngIf=\\\"discount.type !== 'OTHER'\\\">\\r\\n                <td colspan=\\\"5\\\" class=\\\"left clr-align-middle\\\">\\r\\n                    <a [routerLink]=\\\"getPromotionLink(discount)\\\">{{ discount.description }}</a>\\r\\n                    <vdr-chip *ngIf=\\\"getCouponCodeForAdjustment(order, discount) as couponCode\\\">{{\\r\\n                        couponCode\\r\\n                    }}</vdr-chip>\\r\\n                </td>\\r\\n                <td class=\\\"clr-align-middle\\\">\\r\\n                    {{ discount.amountWithTax | localeCurrency: order.currencyCode }}\\r\\n                    <div class=\\\"net-price\\\" [title]=\\\"'order.net-price' | translate\\\">\\r\\n                        {{ discount.amount | localeCurrency: order.currencyCode }}\\r\\n                    </div>\\r\\n                </td>\\r\\n            </tr>\\r\\n        </ng-container>\\r\\n        <tr class=\\\"sub-total\\\">\\r\\n            <td class=\\\"left clr-align-middle\\\">{{ 'order.sub-total' | translate }}</td>\\r\\n            <td colspan=\\\"4\\\"></td>\\r\\n            <td class=\\\"clr-align-middle\\\">\\r\\n                {{ order.subTotalWithTax | localeCurrency: order.currencyCode }}\\r\\n                <div class=\\\"net-price\\\" [title]=\\\"'order.net-price' | translate\\\">\\r\\n                    {{ order.subTotal | localeCurrency: order.currencyCode }}\\r\\n                </div>\\r\\n            </td>\\r\\n        </tr>\\r\\n        <tr class=\\\"shipping\\\">\\r\\n            <td class=\\\"left clr-align-middle\\\">{{ 'order.shipping' | translate }}</td>\\r\\n            <td class=\\\"clr-align-middle\\\">{{ getShippingNames(order) }}</td>\\r\\n            <td colspan=\\\"3\\\"></td>\\r\\n            <td class=\\\"clr-align-middle\\\">\\r\\n                {{ order.shippingWithTax | localeCurrency: order.currencyCode }}\\r\\n                <div class=\\\"net-price\\\" [title]=\\\"'order.net-price' | translate\\\">\\r\\n                    {{ order.shipping | localeCurrency: order.currencyCode }}\\r\\n                </div>\\r\\n            </td>\\r\\n        </tr>\\r\\n        <tr class=\\\"total\\\">\\r\\n            <td class=\\\"left clr-align-middle\\\">{{ 'order.total' | translate }}</td>\\r\\n            <td colspan=\\\"4\\\"></td>\\r\\n            <td class=\\\"clr-align-middle\\\">\\r\\n                {{ order.totalWithTax | localeCurrency: order.currencyCode }}\\r\\n                <div class=\\\"net-price\\\" [title]=\\\"'order.net-price' | translate\\\">\\r\\n                    {{ order.total | localeCurrency: order.currencyCode }}\\r\\n                </div>\\r\\n            </td>\\r\\n        </tr>\\r\\n    </tbody>\\r\\n</table>\\r\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\".order-table .is-cancelled td{text-decoration:line-through;background-color:var(--color-component-bg-200)}.order-table .sub-total td{border-top:1px dashed var(--color-component-border-200)}.order-table .total td{font-weight:bold;border-top:1px dashed var(--color-component-border-200)}.order-table td.custom-fields-row{border-top-style:dashed;border-top-color:var(--color-grey-200)}.order-table img{border-radius:var(--border-radius-img)}.order-table .order-line-custom-fields{display:flex;flex-wrap:wrap}.order-table .order-line-custom-fields .custom-field{text-align:start;max-width:200px;overflow:hidden;text-overflow:ellipsis;margin-bottom:6px;margin-right:18px}.order-table .draft-qty{max-width:48px}.order-table .order-line-custom-field{background-color:var(--color-component-bg-100)}.order-table .order-line-custom-field .custom-field-ellipsis{color:var(--color-text-300)}.order-table .net-price{font-size:11px;color:var(--color-text-300)}.order-table .promotions-label{-webkit-text-decoration:underline dotted var(--color-text-200);text-decoration:underline dotted var(--color-text-200);font-size:11px;margin-top:6px;cursor:pointer;text-transform:lowercase}.order-table .thumb img{width:50px;height:50px}::ng-deep .line-promotion{display:flex;justify-content:space-between;padding:6px 12px}::ng-deep .line-promotion .promotion-amount{margin-left:12px}::ng-deep .line-promotion .net-price{font-size:11px;color:var(--color-text-300)}\\n\"]\n            }]\n    }], function () { return []; }, { isDraft: [{\n            type: Input\n        }], adjust: [{\n            type: Output\n        }], remove: [{\n            type: Output\n        }], order: [{\n            type: Input\n        }], orderLineCustomFields: [{\n            type: Input\n        }] }); })();\n\nclass PaymentDetailComponent {\r\n}\nPaymentDetailComponent.fac = function PaymentDetailComponent_Factory(t) { return new (t || PaymentDetailComponent)(); };\nPaymentDetailComponent.cmp = /*@__PURE__*/ ngcc0.defineComponent({ type: PaymentDetailComponent, selectors: [[\"vdr-payment-detail\"]], inputs: { payment: \"payment\", currencyCode: \"currencyCode\" }, decls: 12, vars: 17, consts: [[3, \"label\"], [3, \"label\", 4, \"ngIf\"], [3, \"value\"]], template: function PaymentDetailComponent_Template(rf, ctx) { if (rf & 1) {\n        ngcc0.elementStart(0, \"vdr-labeled-data\", 0);\n        ngcc0.pipe(1, \"translate\");\n        ngcc0.text(2);\n        ngcc0.elementEnd();\n        ngcc0.elementStart(3, \"vdr-labeled-data\", 0);\n        ngcc0.pipe(4, \"translate\");\n        ngcc0.text(5);\n        ngcc0.pipe(6, \"localeCurrency\");\n        ngcc0.elementEnd();\n        ngcc0.template(7, PaymentDetailComponent_vdr_labeled_data_7_Template, 3, 4, \"vdr-labeled-data\", 1);\n        ngcc0.template(8, PaymentDetailComponent_vdr_labeled_data_8_Template, 3, 4, \"vdr-labeled-data\", 1);\n        ngcc0.elementStart(9, \"vdr-labeled-data\", 0);\n        ngcc0.pipe(10, \"translate\");\n        ngcc0.element(11, \"vdr-object-tree\", 2);\n        ngcc0.elementEnd();\n    } if (rf & 2) {\n        ngcc0.property(\"label\", ngcc0.pipeBind1(1, 8, \"order.payment-method\"));\n        ngcc0.advance(2);\n        ngcc0.textInterpolate1(\" \", ctx.payment.method, \"\\n\");\n        ngcc0.advance(1);\n        ngcc0.property(\"label\", ngcc0.pipeBind1(4, 10, \"order.amount\"));\n        ngcc0.advance(2);\n        ngcc0.textInterpolate1(\" \", ngcc0.pipeBind2(6, 12, ctx.payment.amount, ctx.currencyCode), \"\\n\");\n        ngcc0.advance(2);\n        ngcc0.property(\"ngIf\", ctx.payment.errorMessage);\n        ngcc0.advance(1);\n        ngcc0.property(\"ngIf\", ctx.payment.transactionId);\n        ngcc0.advance(1);\n        ngcc0.property(\"label\", ngcc0.pipeBind1(10, 15, \"order.payment-metadata\"));\n        ngcc0.advance(2);\n        ngcc0.property(\"value\", ctx.payment.metadata);\n    } }, directives: [ngcc1.LabeledDataComponent, ngcc5.NgIf, ngcc1.ObjectTreeComponent], pipes: [ngcc4.TranslatePipe, ngcc1.LocaleCurrencyPipe], styles: [\"\"], changeDetection: 0 });\r\nPaymentDetailComponent.propDecorators = {\r\n    payment: [{ type: Input }],\r\n    currencyCode: [{ type: Input }]\r\n};\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ngcc0.setClassMetadata(PaymentDetailComponent, [{\n        type: Component,\n        args: [{\n                selector: 'vdr-payment-detail',\n                template: \"<vdr-labeled-data [label]=\\\"'order.payment-method' | translate\\\">\\r\\n    {{ payment.method }}\\r\\n</vdr-labeled-data>\\r\\n<vdr-labeled-data [label]=\\\"'order.amount' | translate\\\">\\r\\n    {{ payment.amount | localeCurrency: currencyCode }}\\r\\n</vdr-labeled-data>\\r\\n<vdr-labeled-data *ngIf=\\\"payment.errorMessage\\\" [label]=\\\"'order.error-message' | translate\\\">\\r\\n    {{ payment.errorMessage }}\\r\\n</vdr-labeled-data>\\r\\n<vdr-labeled-data *ngIf=\\\"payment.transactionId\\\" [label]=\\\"'order.transaction-id' | translate\\\">\\r\\n    {{ payment.transactionId }}\\r\\n</vdr-labeled-data>\\r\\n<vdr-labeled-data [label]=\\\"'order.payment-metadata' | translate\\\">\\r\\n    <vdr-object-tree [value]=\\\"payment.metadata\\\"></vdr-object-tree>\\r\\n</vdr-labeled-data>\\r\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\"\"]\n            }]\n    }], null, { payment: [{\n            type: Input\n        }], currencyCode: [{\n            type: Input\n        }] }); })();\n\nclass PaymentStateLabelComponent {\r\n    get chipColorType() {\r\n        switch (this.state) {\r\n            case 'Authorized':\r\n                return 'warning';\r\n            case 'Settled':\r\n                return 'success';\r\n            case 'Declined':\r\n            case 'Cancelled':\r\n                return 'error';\r\n        }\r\n    }\r\n}\nPaymentStateLabelComponent.fac = function PaymentStateLabelComponent_Factory(t) { return new (t || PaymentStateLabelComponent)(); };\nPaymentStateLabelComponent.cmp = /*@__PURE__*/ ngcc0.defineComponent({ type: PaymentStateLabelComponent, selectors: [[\"vdr-payment-state-label\"]], inputs: { state: \"state\" }, decls: 6, vars: 10, consts: [[3, \"title\", \"colorType\"], [\"shape\", \"check-circle\", 4, \"ngIf\"], [\"shape\", \"check-circle\"]], template: function PaymentStateLabelComponent_Template(rf, ctx) { if (rf & 1) {\n        ngcc0.elementStart(0, \"vdr-chip\", 0);\n        ngcc0.pipe(1, \"translate\");\n        ngcc0.template(2, PaymentStateLabelComponent_clr_icon_2_Template, 1, 0, \"clr-icon\", 1);\n        ngcc0.text(3);\n        ngcc0.pipe(4, \"translate\");\n        ngcc0.pipe(5, \"stateI18nToken\");\n        ngcc0.elementEnd();\n    } if (rf & 2) {\n        ngcc0.property(\"title\", ngcc0.pipeBind1(1, 4, \"order.payment-state\"))(\"colorType\", ctx.chipColorType);\n        ngcc0.advance(2);\n        ngcc0.property(\"ngIf\", ctx.state === \"Settled\");\n        ngcc0.advance(1);\n        ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(4, 6, ngcc0.pipeBind1(5, 8, ctx.state)), \"\\n\");\n    } }, directives: [ngcc1.ChipComponent, ngcc5.NgIf, ngcc6.ClrIconCustomTag], pipes: [ngcc4.TranslatePipe, ngcc1.StateI18nTokenPipe], styles: [\"[_nghost-%COMP%]{font-size:14px}\"], changeDetection: 0 });\r\nPaymentStateLabelComponent.propDecorators = {\r\n    state: [{ type: Input }]\r\n};\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ngcc0.setClassMetadata(PaymentStateLabelComponent, [{\n        type: Component,\n        args: [{\n                selector: 'vdr-payment-state-label',\n                template: \"<vdr-chip [title]=\\\"'order.payment-state' | translate\\\" [colorType]=\\\"chipColorType\\\">\\r\\n    <clr-icon shape=\\\"check-circle\\\" *ngIf=\\\"state === 'Settled'\\\"></clr-icon>\\r\\n    {{ state | stateI18nToken | translate }}\\r\\n</vdr-chip>\\r\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\":host{font-size:14px}\\n\"]\n            }]\n    }], null, { state: [{\n            type: Input\n        }] }); })();\n\nclass RefundStateLabelComponent {\r\n    get chipColorType() {\r\n        switch (this.state) {\r\n            case 'Pending':\r\n                return 'warning';\r\n            case 'Settled':\r\n                return 'success';\r\n            case 'Failed':\r\n                return 'error';\r\n        }\r\n    }\r\n}\nRefundStateLabelComponent.fac = function RefundStateLabelComponent_Factory(t) { return new (t || RefundStateLabelComponent)(); };\nRefundStateLabelComponent.cmp = /*@__PURE__*/ ngcc0.defineComponent({ type: RefundStateLabelComponent, selectors: [[\"vdr-refund-state-label\"]], inputs: { state: \"state\" }, decls: 6, vars: 10, consts: [[3, \"title\", \"colorType\"], [\"shape\", \"check-circle\", 4, \"ngIf\"], [\"shape\", \"check-circle\"]], template: function RefundStateLabelComponent_Template(rf, ctx) { if (rf & 1) {\n        ngcc0.elementStart(0, \"vdr-chip\", 0);\n        ngcc0.pipe(1, \"translate\");\n        ngcc0.template(2, RefundStateLabelComponent_clr_icon_2_Template, 1, 0, \"clr-icon\", 1);\n        ngcc0.text(3);\n        ngcc0.pipe(4, \"translate\");\n        ngcc0.pipe(5, \"stateI18nToken\");\n        ngcc0.elementEnd();\n    } if (rf & 2) {\n        ngcc0.property(\"title\", ngcc0.pipeBind1(1, 4, \"order.payment-state\"))(\"colorType\", ctx.chipColorType);\n        ngcc0.advance(2);\n        ngcc0.property(\"ngIf\", ctx.state === \"Settled\");\n        ngcc0.advance(1);\n        ngcc0.textInterpolate1(\" \", ngcc0.pipeBind1(4, 6, ngcc0.pipeBind1(5, 8, ctx.state)), \"\\n\");\n    } }, directives: [ngcc1.ChipComponent, ngcc5.NgIf, ngcc6.ClrIconCustomTag], pipes: [ngcc4.TranslatePipe, ngcc1.StateI18nTokenPipe], styles: [\"[_nghost-%COMP%]{font-size:14px}\"], changeDetection: 0 });\r\nRefundStateLabelComponent.propDecorators = {\r\n    state: [{ type: Input }]\r\n};\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ngcc0.setClassMetadata(RefundStateLabelComponent, [{\n        type: Component,\n        args: [{\n                selector: 'vdr-refund-state-label',\n                template: \"<vdr-chip [title]=\\\"'order.payment-state' | translate\\\" [colorType]=\\\"chipColorType\\\">\\r\\n    <clr-icon shape=\\\"check-circle\\\" *ngIf=\\\"state === 'Settled'\\\"></clr-icon>\\r\\n    {{ state | stateI18nToken | translate }}\\r\\n</vdr-chip>\\r\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\":host{font-size:14px}\\n\"]\n            }]\n    }], null, { state: [{\n            type: Input\n        }] }); })();\n\nclass SimpleItemListComponent {\r\n}\nSimpleItemListComponent.fac = function SimpleItemListComponent_Factory(t) { return new (t || SimpleItemListComponent)(); };\nSimpleItemListComponent.cmp = /*@__PURE__*/ ngcc0.defineComponent({ type: SimpleItemListComponent, selectors: [[\"vdr-simple-item-list\"]], inputs: { items: \"items\" }, decls: 3, vars: 1, consts: [[1, \"items-list\"], [3, \"title\", 4, \"ngFor\", \"ngForOf\"], [3, \"title\"], [1, \"quantity\"], [\"shape\", \"times\", \"size\", \"12\"]], template: function SimpleItemListComponent_Template(rf, ctx) { if (rf & 1) {\n        ngcc0.elementStart(0, \"div\", 0);\n        ngcc0.elementStart(1, \"ul\");\n        ngcc0.template(2, SimpleItemListComponent_li_2_Template, 5, 3, \"li\", 1);\n        ngcc0.elementEnd();\n        ngcc0.elementEnd();\n    } if (rf & 2) {\n        ngcc0.advance(2);\n        ngcc0.property(\"ngForOf\", ctx.items);\n    } }, directives: [ngcc5.NgForOf, ngcc6.ClrIconCustomTag], styles: [\".items-list[_ngcontent-%COMP%]{font-size:12px}.items-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin-top:6px;list-style-type:none;margin-left:2px}.items-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{line-height:14px;text-overflow:ellipsis;overflow:hidden}.items-list[_ngcontent-%COMP%]   .quantity[_ngcontent-%COMP%]{min-width:16px;display:inline-block}\"], changeDetection: 0 });\r\nSimpleItemListComponent.propDecorators = {\r\n    items: [{ type: Input }]\r\n};\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ngcc0.setClassMetadata(SimpleItemListComponent, [{\n        type: Component,\n        args: [{\n                selector: 'vdr-simple-item-list',\n                template: \"<div class=\\\"items-list\\\">\\r\\n    <ul>\\r\\n        <li *ngFor=\\\"let item of items\\\" [title]=\\\"item.name\\\">\\r\\n            <div class=\\\"quantity\\\">{{ item.quantity }}</div>\\r\\n            <clr-icon shape=\\\"times\\\" size=\\\"12\\\"></clr-icon>\\r\\n            {{ item.name }}\\r\\n        </li>\\r\\n    </ul>\\r\\n</div>\\r\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\".items-list{font-size:12px}.items-list ul{margin-top:6px;list-style-type:none;margin-left:2px}.items-list ul li{line-height:14px;text-overflow:ellipsis;overflow:hidden}.items-list .quantity{min-width:16px;display:inline-block}\\n\"]\n            }]\n    }], null, { items: [{\n            type: Input\n        }] }); })();\n\n/**\r\n * Resolves the id from the path into a Customer entity.\r\n */\r\nclass OrderResolver {\r\n    constructor(router, dataService) {\r\n        this.router = router;\r\n        this.dataService = dataService;\r\n    }\r\n    /** @internal */\r\n    resolve(route, state) {\r\n        const id = route.paramMap.get('id');\r\n        // Complete the entity stream upon navigating away\r\n        const navigateAway$ = this.router.events.pipe(filter(event => event instanceof ActivationStart));\r\n        const stream = this.dataService.order\r\n            .getOrder(id)\r\n            .mapStream(data => data.order)\r\n            .pipe(switchMap(order => {\r\n            if ((order === null || order === void 0 ? void 0 : order.state) === 'Draft' && route.component !== DraftOrderDetailComponent) {\r\n                // Make sure Draft orders only get displayed with the DraftOrderDetailComponent\r\n                this.router.navigate(['/orders/draft', id]);\r\n                return EMPTY;\r\n            }\r\n            else {\r\n                return [order];\r\n            }\r\n        }), takeUntil(navigateAway$), filter(notNullOrUndefined), shareReplay(1));\r\n        return stream.pipe(take(1), map(() => stream));\r\n    }\r\n}\nOrderResolver.fac = function OrderResolver_Factory(t) { return new (t || OrderResolver)(ngcc0.inject(ngcc7.Router), ngcc0.inject(ngcc1.DataService)); };\r\nOrderResolver.prov = i0.defineInjectable({ factory: function OrderResolver_Factory() { return new OrderResolver(i0.inject(i1$1.Router), i0.inject(i1.DataService)); }, token: OrderResolver, providedIn: \"root\" });\r\nOrderResolver.ctorParameters = () => [\r\n    { type: Router },\r\n    { type: DataService }\r\n];\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ngcc0.setClassMetadata(OrderResolver, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: ngcc7.Router }, { type: ngcc1.DataService }]; }, null); })();\n\nclass OrderGuard {\r\n    constructor(dataService, router) {\r\n        this.dataService = dataService;\r\n        this.router = router;\r\n    }\r\n    canActivate(route, state) {\r\n        const isDraft = state.url.includes('orders/draft');\r\n        const id = route.paramMap.get('id');\r\n        if (isDraft) {\r\n            if (id === 'create') {\r\n                return this.dataService.order\r\n                    .createDraftOrder()\r\n                    .pipe(map(({ createDraftOrder }) => this.router.parseUrl(`/orders/draft/${createDraftOrder.id}`)));\r\n            }\r\n            else {\r\n                return true;\r\n            }\r\n        }\r\n        else {\r\n            return true;\r\n        }\r\n    }\r\n}\nOrderGuard.fac = function OrderGuard_Factory(t) { return new (t || OrderGuard)(ngcc0.inject(ngcc1.DataService), ngcc0.inject(ngcc7.Router)); };\r\nOrderGuard.prov = i0.defineInjectable({ factory: function OrderGuard_Factory() { return new OrderGuard(i0.inject(i1.DataService), i0.inject(i1$1.Router)); }, token: OrderGuard, providedIn: \"root\" });\r\nOrderGuard.ctorParameters = () => [\r\n    { type: DataService },\r\n    { type: Router }\r\n];\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ngcc0.setClassMetadata(OrderGuard, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: ngcc1.DataService }, { type: ngcc7.Router }]; }, null); })();\n\nconst 0 = {\r\n    breadcrumb: marker('breadcrumb.orders'),\r\n}, 1 = {\r\n    breadcrumb: orderBreadcrumb,\r\n}, 2 = {\r\n    breadcrumb: orderBreadcrumb,\r\n}, 3 = {\r\n    breadcrumb: modifyingOrderBreadcrumb,\r\n};\r\nconst orderRoutes = [\r\n    {\r\n        path: '',\r\n        component: OrderListComponent,\r\n        data: 0,\r\n    },\r\n    {\r\n        path: 'draft/:id',\r\n        component: DraftOrderDetailComponent,\r\n        resolve: {\r\n            entity: OrderResolver,\r\n        },\r\n        canActivate: [OrderGuard],\r\n        canDeactivate: [CanDeactivateDetailGuard],\r\n        data: 1,\r\n    },\r\n    {\r\n        path: ':id',\r\n        component: OrderDetailComponent,\r\n        resolve: {\r\n            entity: OrderResolver,\r\n        },\r\n        canActivate: [OrderGuard],\r\n        canDeactivate: [CanDeactivateDetailGuard],\r\n        data: 2,\r\n    },\r\n    {\r\n        path: ':id/modify',\r\n        component: OrderEditorComponent,\r\n        resolve: {\r\n            entity: OrderResolver,\r\n        },\r\n        // canDeactivate: [CanDeactivateDetailGuard],\r\n        data: 3,\r\n    },\r\n];\r\nfunction orderBreadcrumb(data, params) {\r\n    return detailBreadcrumb({\r\n        entity: data.entity,\r\n        id: params.id,\r\n        breadcrumbKey: 'breadcrumb.orders',\r\n        getName: order => order.code,\r\n        route: '',\r\n    });\r\n}\r\nfunction modifyingOrderBreadcrumb(data, params) {\r\n    return orderBreadcrumb(data, params).pipe(map((breadcrumbs) => {\r\n        const modifiedBreadcrumbs = breadcrumbs.slice();\r\n        modifiedBreadcrumbs[0].link[0] = '../';\r\n        modifiedBreadcrumbs[1].link[0] = '../orders';\r\n        return modifiedBreadcrumbs.concat({ label: marker('breadcrumb.modifying'), link: [''] });\r\n    }));\r\n}\n\nclass OrderModule {\r\n}\nOrderModule.fac = function OrderModule_Factory(t) { return new (t || OrderModule)(); };\nOrderModule.mod = /*@__PURE__*/ ngcc0.defineNgModule({ type: OrderModule });\nOrderModule.inj = /*@__PURE__*/ ngcc0.defineInjector({ imports: [[SharedModule, RouterModule.forChild(orderRoutes)]] });\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ngcc0.setClassMetadata(OrderModule, [{\n        type: NgModule,\n        args: [{\n                imports: [SharedModule, RouterModule.forChild(orderRoutes)],\n                declarations: [\n                    OrderListComponent,\n                    OrderDetailComponent,\n                    FulfillOrderDialogComponent,\n                    LineFulfillmentComponent,\n                    RefundOrderDialogComponent,\n                    CancelOrderDialogComponent,\n                    PaymentStateLabelComponent,\n                    LineRefundsComponent,\n                    OrderPaymentCardComponent,\n                    RefundStateLabelComponent,\n                    SettleRefundDialogComponent,\n                    OrderHistoryComponent,\n                    FulfillmentDetailComponent,\n                    PaymentDetailComponent,\n                    SimpleItemListComponent,\n                    OrderCustomFieldsCardComponent,\n                    OrderProcessGraphComponent,\n                    OrderProcessNodeComponent,\n                    OrderProcessEdgeComponent,\n                    OrderProcessGraphDialogComponent,\n                    FulfillmentStateLabelComponent,\n                    FulfillmentCardComponent,\n                    OrderEditorComponent,\n                    OrderTableComponent,\n                    OrderEditsPreviewDialogComponent,\n                    ModificationDetailComponent,\n                    AddManualPaymentDialogComponent,\n                    OrderStateSelectDialogComponent,\n                    DraftOrderDetailComponent,\n                    DraftOrderVariantSelectorComponent,\n                    SelectCustomerDialogComponent,\n                    SelectAddressDialogComponent,\n                    CouponCodeSelectorComponent,\n                    SelectShippingMethodDialogComponent,\n                ]\n            }]\n    }], null, null); })();\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ngcc0.setNgModuleScope(OrderModule, { declarations: function () { return [OrderListComponent, OrderDetailComponent, FulfillOrderDialogComponent, LineFulfillmentComponent, RefundOrderDialogComponent, CancelOrderDialogComponent, PaymentStateLabelComponent, LineRefundsComponent, OrderPaymentCardComponent, RefundStateLabelComponent, SettleRefundDialogComponent, OrderHistoryComponent, FulfillmentDetailComponent, PaymentDetailComponent, SimpleItemListComponent, OrderCustomFieldsCardComponent, OrderProcessGraphComponent, OrderProcessNodeComponent, OrderProcessEdgeComponent, OrderProcessGraphDialogComponent, FulfillmentStateLabelComponent, FulfillmentCardComponent, OrderEditorComponent, OrderTableComponent, OrderEditsPreviewDialogComponent, ModificationDetailComponent, AddManualPaymentDialogComponent, OrderStateSelectDialogComponent, DraftOrderDetailComponent, DraftOrderVariantSelectorComponent, SelectCustomerDialogComponent, SelectAddressDialogComponent, CouponCodeSelectorComponent, SelectShippingMethodDialogComponent]; }, imports: function () { return [SharedModule, ngcc7.RouterModule]; } }); })();\n\n// This file was generated by the build-public-api.ts script\n\n/**\r\n * Generated bundle index. Do not edit.\r\n */\n\nexport { AddManualPaymentDialogComponent, CancelOrderDialogComponent, CouponCodeSelectorComponent, DraftOrderDetailComponent, DraftOrderVariantSelectorComponent, FulfillOrderDialogComponent, FulfillmentCardComponent, FulfillmentDetailComponent, FulfillmentStateLabelComponent, GET_CUSTOMER_ADDRESSES, LineFulfillmentComponent, LineRefundsComponent, ModificationDetailComponent, NODE_HEIGHT, OrderCustomFieldsCardComponent, OrderDetailComponent, OrderEditResultType, OrderEditorComponent, OrderEditsPreviewDialogComponent, OrderGuard, OrderHistoryComponent, OrderListComponent, OrderModule, OrderPaymentCardComponent, OrderProcessEdgeComponent, OrderProcessGraphComponent, OrderProcessGraphDialogComponent, OrderProcessNodeComponent, OrderResolver, OrderStateSelectDialogComponent, OrderTableComponent, OrderTransitionService, PaymentDetailComponent, PaymentStateLabelComponent, RefundOrderDialogComponent, RefundStateLabelComponent, SelectAddressDialogComponent, SelectCustomerDialogComponent, SelectShippingMethodDialogComponent, SettleRefundDialogComponent, SimpleItemListComponent, modifyingOrderBreadcrumb, orderBreadcrumb, orderRoutes, 0, 1, 2, 3 };\n\n"]}