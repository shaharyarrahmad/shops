!function(){"use strict";function e(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||o(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(){return(t="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var i=n(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function n(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=p(e)););return e}function r(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=o(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){c=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(c)throw a}}}}function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(c){s=!0,i=c}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}(e,t)||o(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t)}function l(e,t){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=p(e);if(t){var i=p(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return d(this,n)}}function d(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return m(e)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e,t,n){return t&&f(e.prototype,t),n&&f(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(self.webpackChunkvendure_admin_ui=self.webpackChunkvendure_admin_ui||[]).push([[871],{74871:function(n,o,a){a.r(o),a.d(o,{AddCountryToZoneDialogComponent:function(){return wn},AdminDetailComponent:function(){return Sn},AdministratorListComponent:function(){return On},AdministratorResolver:function(){return lr},ChannelDetailComponent:function(){return Dn},ChannelListComponent:function(){return Nn},ChannelResolver:function(){return ur},CountryDetailComponent:function(){return Qn},CountryListComponent:function(){return Mn},CountryResolver:function(){return dr},GlobalSettingsComponent:function(){return Yn},GlobalSettingsResolver:function(){return mr},PaymentMethodDetailComponent:function(){return $n},PaymentMethodListComponent:function(){return Rn},PaymentMethodResolver:function(){return pr},PermissionGridComponent:function(){return jn},ProfileComponent:function(){return zn},ProfileResolver:function(){return gr},RoleDetailComponent:function(){return Hn},RoleListComponent:function(){return En},RoleResolver:function(){return fr},SettingsModule:function(){return Er},ShippingEligibilityTestResultComponent:function(){return Gn},ShippingMethodDetailComponent:function(){return Bn},ShippingMethodListComponent:function(){return Vn},ShippingMethodResolver:function(){return vr},ShippingMethodTestResultComponent:function(){return Wn},TaxCategoryDetailComponent:function(){return Kn},TaxCategoryListComponent:function(){return Xn},TaxCategoryResolver:function(){return hr},TaxRateDetailComponent:function(){return er},TaxRateListComponent:function(){return tr},TaxRateResolver:function(){return Zr},TestAddressFormComponent:function(){return nr},TestOrderBuilderComponent:function(){return rr},ZoneDetailDialogComponent:function(){return ir},ZoneListComponent:function(){return or},ZoneMemberControlsDirective:function(){return ar},ZoneMemberListComponent:function(){return cr},ZoneMemberListHeaderDirective:function(){return sr},administratorBreadcrumb:function(){return Qr},channelBreadcrumb:function(){return Mr},countryBreadcrumb:function(){return jr},paymentMethodBreadcrumb:function(){return Hr},roleBreadcrumb:function(){return Yr},settingsRoutes:function(){return Nr},shippingMethodBreadcrumb:function(){return zr},taxCategoryBreadcrumb:function(){return $r},taxRateBreadcrumb:function(){return Rr},"\u02750":function(){return yr},"\u02751":function(){return br},"\u027510":function(){return Jr},"\u027511":function(){return _r},"\u027512":function(){return Ur},"\u027513":function(){return Pr},"\u027514":function(){return Ir},"\u027515":function(){return wr},"\u027516":function(){return Sr},"\u027517":function(){return Or},"\u027518":function(){return Dr},"\u02752":function(){return Ar},"\u02753":function(){return xr},"\u02754":function(){return Tr},"\u02755":function(){return qr},"\u02756":function(){return Cr},"\u02757":function(){return Fr},"\u02758":function(){return Lr},"\u02759":function(){return kr}});var l=a(51694),d=a(38521),f=a(37097),h=a(94769),Z=a(15405),y=a(86184),b=a(69874),A=a(9219),x=a(73341),T=a(8603),q=a(90380),C=a(1956),F=a(21067),L=a(41460),k=a(24791),J=a(61607),_=a(65519),U=a(22277),P=a(75250),I=a(80188),w=a(82957),S=a(98059),O=a(84435),D=a(70942),N=a(53198),Q=a(56258),M=a(38564),Y=a(34131),$=function(e){return{zoneName:e}};function R(e,t){if(1&e&&(l._uU(0),l.ALo(1,"translate")),2&e){var n=l.oxw();l.Oqu(l.xi3(1,1,"settings.add-countries-to-zone",l.VKq(4,$,n.zoneName)))}}function j(e,t){if(1&e){var n=l.EpF();l.TgZ(0,"button",3),l.NdJ("click",function(){return l.CHM(n),l.oxw().cancel()}),l._uU(1),l.ALo(2,"translate"),l.qZA(),l.TgZ(3,"button",4),l.NdJ("click",function(){return l.CHM(n),l.oxw().add()}),l._uU(4),l.ALo(5,"translate"),l.qZA()}if(2&e){var r=l.oxw();l.xp6(1),l.Oqu(l.lcZ(2,3,"common.cancel")),l.xp6(2),l.Q6J("disabled",!r.selectedMemberIds.length),l.xp6(1),l.hij(" ",l.xi3(5,5,"settings.add-countries-to-zone",l.VKq(8,$,r.zoneName))," ")}}function z(e,t){if(1&e){var n=l.EpF();l.TgZ(0,"button",20),l.NdJ("click",function(){return l.CHM(n),l.oxw().create()}),l._uU(1),l.ALo(2,"translate"),l.qZA()}if(2&e){var r=l.oxw();l.Q6J("disabled",r.detailForm.invalid||r.detailForm.pristine),l.xp6(1),l.hij(" ",l.lcZ(2,2,"common.create")," ")}}function H(e,t){if(1&e){var n=l.EpF();l.TgZ(0,"button",20),l.NdJ("click",function(){return l.CHM(n),l.oxw(2).save()}),l._uU(1),l.ALo(2,"translate"),l.qZA()}if(2&e){var r=l.oxw(2);l.Q6J("disabled",r.detailForm.invalid||r.detailForm.pristine),l.xp6(1),l.hij(" ",l.lcZ(2,2,"common.update")," ")}}function E(e,t){1&e&&l.YNc(0,H,3,4,"button",21),2&e&&l.Q6J("vdrIfPermissions","UpdateAdministrator")}function G(e,t){1&e&&(l.TgZ(0,"vdr-form-field",22),l.ALo(1,"translate"),l._UZ(2,"input",23),l.qZA()),2&e&&l.Q6J("label",l.lcZ(1,1,"settings.password"))}function B(e,t){1&e&&(l.TgZ(0,"vdr-form-field",24),l.ALo(1,"translate"),l._UZ(2,"input",23),l.qZA()),2&e&&l.Q6J("label",l.lcZ(1,2,"settings.password"))("readOnlyToggle",!0)}var V=function(){return["CreateAdministrator","UpdateAdministrator"]};function W(e,t){if(1&e&&(l.TgZ(0,"section",25),l.TgZ(1,"label"),l._uU(2),l.ALo(3,"translate"),l.qZA(),l._UZ(4,"vdr-tabbed-custom-fields",26),l.ALo(5,"hasPermission"),l.qZA()),2&e){var n=l.oxw();l.xp6(2),l.Oqu(l.lcZ(3,4,"common.custom-fields")),l.xp6(2),l.Q6J("customFields",n.customFields)("customFieldsFormGroup",n.detailForm.get("customFields"))("readonly",!l.lcZ(5,6,l.DdM(8,V)))}}function K(e,t){if(1&e){var n=l.EpF();l.TgZ(0,"li",27),l.TgZ(1,"button",28),l.NdJ("click",function(){var e=l.CHM(n).$implicit;return l.oxw().selectedChannelId=e.channelId}),l._uU(2),l.ALo(3,"translate"),l.ALo(4,"channelCodeToLabel"),l.qZA(),l.qZA()}if(2&e){var r=t.$implicit,i=l.oxw();l.xp6(1),l.ekj("active",i.selectedChannelId===r.channelId),l.Q6J("id",r.channelId),l.uIk("aria-selected",i.selectedChannelId===r.channelId),l.xp6(1),l.hij(" ",l.lcZ(3,5,l.lcZ(4,7,r.channelCode))," ")}}var X=function(){return["./create"]};function ee(e,t){1&e&&(l.TgZ(0,"a",3),l._UZ(1,"clr-icon",4),l._uU(2),l.ALo(3,"translate"),l.qZA()),2&e&&(l.Q6J("routerLink",l.DdM(4,X)),l.xp6(2),l.hij(" ",l.lcZ(3,2,"admin.create-new-administrator")," "))}var te=function(e){return["./",e]};function ne(e,t){if(1&e){var n=l.EpF();l.TgZ(0,"td",5),l._uU(1),l.qZA(),l.TgZ(2,"td",5),l._uU(3),l.qZA(),l.TgZ(4,"td",5),l._uU(5),l.qZA(),l.TgZ(6,"td",6),l._UZ(7,"vdr-table-row-action",7),l.ALo(8,"translate"),l.qZA(),l.TgZ(9,"td"),l.TgZ(10,"vdr-dropdown"),l.TgZ(11,"button",8),l._uU(12),l.ALo(13,"translate"),l._UZ(14,"clr-icon",9),l.qZA(),l.TgZ(15,"vdr-dropdown-menu",10),l.TgZ(16,"button",11),l.NdJ("click",function(){var e=l.CHM(n).item;return l.oxw().deleteAdministrator(e)}),l.ALo(17,"hasPermission"),l._UZ(18,"clr-icon",12),l._uU(19),l.ALo(20,"translate"),l.qZA(),l.qZA(),l.qZA(),l.qZA()}if(2&e){var r=t.item;l.xp6(1),l.Oqu(r.firstName),l.xp6(2),l.Oqu(r.lastName),l.xp6(2),l.Oqu(r.emailAddress),l.xp6(2),l.Q6J("label",l.lcZ(8,8,"common.edit"))("linkTo",l.VKq(16,te,r.id)),l.xp6(5),l.hij(" ",l.lcZ(13,10,"common.actions")," "),l.xp6(4),l.Q6J("disabled",!l.lcZ(17,12,"DeleteAdministrator")),l.xp6(3),l.hij(" ",l.lcZ(20,14,"common.delete")," ")}}function re(e,t){if(1&e){var n=l.EpF();l.TgZ(0,"button",24),l.NdJ("click",function(){return l.CHM(n),l.oxw().create()}),l._uU(1),l.ALo(2,"translate"),l.qZA()}if(2&e){var r=l.oxw();l.Q6J("disabled",!r.saveButtonEnabled()),l.xp6(1),l.hij(" ",l.lcZ(2,2,"common.create")," ")}}function ie(e,t){if(1&e){var n=l.EpF();l.TgZ(0,"button",24),l.NdJ("click",function(){return l.CHM(n),l.oxw(2).save()}),l._uU(1),l.ALo(2,"translate"),l.qZA()}if(2&e){var r=l.oxw(2);l.Q6J("disabled",!r.saveButtonEnabled()),l.xp6(1),l.hij(" ",l.lcZ(2,2,"common.update")," ")}}var oe=function(){return["SuperAdmin","UpdateChannel"]};function ae(e,t){1&e&&l.YNc(0,ie,3,4,"button",25),2&e&&l.Q6J("vdrIfPermissions",l.DdM(1,oe))}function se(e,t){if(1&e&&(l.TgZ(0,"option",26),l._uU(1),l.ALo(2,"localeCurrencyName"),l.qZA()),2&e){var n=t.$implicit;l.Q6J("value",n),l.xp6(1),l.Oqu(l.lcZ(2,2,n))}}function ce(e,t){if(1&e&&(l.TgZ(0,"option",26),l._uU(1),l.ALo(2,"localeLanguageName"),l.ALo(3,"uppercase"),l.qZA()),2&e){var n=t.$implicit;l.Q6J("value",n),l.xp6(1),l.AsE(" ",l.lcZ(2,3,n)," (",l.lcZ(3,5,n),") ")}}function le(e,t){if(1&e&&(l.TgZ(0,"option",26),l._uU(1),l.qZA()),2&e){var n=t.$implicit;l.Q6J("value",n.id),l.xp6(1),l.Oqu(n.name)}}function ue(e,t){1&e&&(l.TgZ(0,"clr-alert",27),l.TgZ(1,"clr-alert-item"),l.TgZ(2,"span",28),l._uU(3),l.ALo(4,"translate"),l.qZA(),l.qZA(),l.qZA()),2&e&&(l.Q6J("clrAlertClosable",!1),l.xp6(3),l.hij(" ",l.lcZ(4,2,"error.no-default-tax-zone-set")," "))}function de(e,t){if(1&e&&(l.TgZ(0,"option",26),l._uU(1),l.qZA()),2&e){var n=t.$implicit;l.Q6J("value",n.id),l.xp6(1),l.Oqu(n.name)}}function me(e,t){1&e&&(l.TgZ(0,"clr-alert",29),l.TgZ(1,"clr-alert-item"),l.TgZ(2,"span",28),l._uU(3),l.ALo(4,"translate"),l.qZA(),l.qZA(),l.qZA()),2&e&&(l.Q6J("clrAlertClosable",!1),l.xp6(3),l.hij(" ",l.lcZ(4,2,"error.no-default-shipping-zone-set")," "))}function pe(e,t){if(1&e&&(l.TgZ(0,"section",30),l.TgZ(1,"label"),l._uU(2),l.ALo(3,"translate"),l.qZA(),l._UZ(4,"vdr-tabbed-custom-fields",31),l.ALo(5,"hasPermission"),l.qZA()),2&e){var n=l.oxw();l.xp6(2),l.Oqu(l.lcZ(3,4,"common.custom-fields")),l.xp6(2),l.Q6J("customFields",n.customFields)("customFieldsFormGroup",n.detailForm.get("customFields"))("readonly",!l.lcZ(5,6,n.updatePermission))}}function ge(e,t){1&e&&(l.TgZ(0,"a",3),l._UZ(1,"clr-icon",4),l._uU(2),l.ALo(3,"translate"),l.qZA()),2&e&&(l.Q6J("routerLink",l.DdM(4,X)),l.xp6(2),l.hij(" ",l.lcZ(3,2,"settings.create-new-channel")," "))}var fe=function(){return["SuperAdmin","DeleteChannel"]};function ve(e,t){if(1&e){var n=l.EpF();l.TgZ(0,"td",5),l._UZ(1,"vdr-channel-badge",6),l._uU(2),l.ALo(3,"translate"),l.ALo(4,"channelCodeToLabel"),l.qZA(),l.TgZ(5,"td",7),l._UZ(6,"vdr-table-row-action",8),l.ALo(7,"translate"),l.qZA(),l.TgZ(8,"td",7),l.TgZ(9,"vdr-dropdown"),l.TgZ(10,"button",9),l._uU(11),l.ALo(12,"translate"),l._UZ(13,"clr-icon",10),l.qZA(),l.TgZ(14,"vdr-dropdown-menu",11),l.TgZ(15,"button",12),l.NdJ("click",function(){var e=l.CHM(n).item;return l.oxw().deleteChannel(e.id)}),l.ALo(16,"hasPermission"),l._UZ(17,"clr-icon",13),l._uU(18),l.ALo(19,"translate"),l.qZA(),l.qZA(),l.qZA(),l.qZA()}if(2&e){var r=t.item,i=l.oxw();l.xp6(1),l.Q6J("channelCode",r.code),l.xp6(1),l.hij(" ",l.lcZ(3,8,l.lcZ(4,10,r.code))," "),l.xp6(4),l.Q6J("label",l.lcZ(7,12,"common.edit"))("linkTo",l.VKq(20,te,r.id)),l.xp6(4),l.Q6J("disabled",i.isDefaultChannel(r.code)),l.xp6(1),l.hij(" ",l.lcZ(12,14,"common.actions")," "),l.xp6(4),l.Q6J("disabled",!l.lcZ(16,16,l.DdM(22,fe))),l.xp6(3),l.hij(" ",l.lcZ(19,18,"common.delete")," ")}}var he=function(){return["SuperAdmin","CreateChannel"]};function Ze(e,t){if(1&e){var n=l.EpF();l.TgZ(0,"button",14),l.NdJ("click",function(){return l.CHM(n),l.oxw().create()}),l._uU(1),l.ALo(2,"translate"),l.qZA()}if(2&e){var r=l.oxw();l.Q6J("disabled",r.detailForm.invalid||r.detailForm.pristine),l.xp6(1),l.hij(" ",l.lcZ(2,2,"common.create")," ")}}function ye(e,t){if(1&e){var n=l.EpF();l.TgZ(0,"button",14),l.NdJ("click",function(){return l.CHM(n),l.oxw(2).save()}),l._uU(1),l.ALo(2,"translate"),l.qZA()}if(2&e){var r=l.oxw(2);l.Q6J("disabled",r.detailForm.invalid||r.detailForm.pristine),l.xp6(1),l.hij(" ",l.lcZ(2,2,"common.update")," ")}}function be(e,t){if(1&e&&l.YNc(0,ye,3,4,"button",15),2&e){var n=l.oxw();l.Q6J("vdrIfPermissions",n.updatePermission)}}function Ae(e,t){if(1&e&&(l.TgZ(0,"section",16),l.TgZ(1,"label"),l._uU(2),l.ALo(3,"translate"),l.qZA(),l._UZ(4,"vdr-tabbed-custom-fields",17),l.ALo(5,"hasPermission"),l.qZA()),2&e){var n=l.oxw();l.xp6(2),l.Oqu(l.lcZ(3,4,"common.custom-fields")),l.xp6(2),l.Q6J("customFields",n.customFields)("customFieldsFormGroup",n.detailForm.get("customFields"))("readonly",!l.lcZ(5,6,n.updatePermission))}}function xe(e,t){1&e&&(l.TgZ(0,"a",6),l._UZ(1,"clr-icon",7),l._uU(2),l.ALo(3,"translate"),l.qZA()),2&e&&(l.Q6J("routerLink",l.DdM(4,X)),l.xp6(2),l.hij(" ",l.lcZ(3,2,"settings.create-new-country")," "))}var Te=function(e){return{contents:e}},qe=function(e){return["/settings","zones",e]};function Ce(e,t){if(1&e&&(l.TgZ(0,"a",17),l.TgZ(1,"vdr-chip",18),l._uU(2),l.qZA(),l.qZA()),2&e){var n=t.$implicit;l.Q6J("routerLink",l.VKq(5,qe,l.VKq(3,Te,n.id))),l.xp6(1),l.Q6J("colorFrom",n.name),l.xp6(1),l.Oqu(n.name)}}var Fe=function(){return["DeleteSettings","DeleteCountry"]};function Le(e,t){if(1&e){var n=l.EpF();l.TgZ(0,"td",8),l._uU(1),l.qZA(),l.TgZ(2,"td",8),l._uU(3),l.qZA(),l.TgZ(4,"td",8),l.YNc(5,Ce,3,7,"a",9),l.qZA(),l.TgZ(6,"td",8),l._UZ(7,"clr-icon"),l.qZA(),l.TgZ(8,"td",10),l._UZ(9,"vdr-table-row-action",11),l.ALo(10,"translate"),l.qZA(),l.TgZ(11,"td",10),l.TgZ(12,"vdr-dropdown"),l.TgZ(13,"button",12),l._uU(14),l.ALo(15,"translate"),l._UZ(16,"clr-icon",13),l.qZA(),l.TgZ(17,"vdr-dropdown-menu",14),l.TgZ(18,"button",15),l.NdJ("click",function(){var e=l.CHM(n).item;return l.oxw().deleteCountry(e.id)}),l.ALo(19,"hasPermission"),l._UZ(20,"clr-icon",16),l._uU(21),l.ALo(22,"translate"),l.qZA(),l.qZA(),l.qZA(),l.qZA()}if(2&e){var r=t.item;l.xp6(1),l.Oqu(r.code),l.xp6(2),l.Oqu(r.name),l.xp6(2),l.Q6J("ngForOf",r.zones),l.xp6(2),l.ekj("is-success",r.enabled),l.uIk("shape",r.enabled?"check":"times"),l.xp6(2),l.Q6J("label",l.lcZ(10,11,"common.edit"))("linkTo",l.VKq(19,te,r.id)),l.xp6(5),l.hij(" ",l.lcZ(15,13,"common.actions")," "),l.xp6(4),l.Q6J("disabled",!l.lcZ(19,15,l.DdM(21,Fe))),l.xp6(3),l.hij(" ",l.lcZ(22,17,"common.delete")," ")}}var ke=function(){return["CreateSettings","CreateCountry"]};function Je(e,t){if(1&e){var n=l.EpF();l.TgZ(0,"button",13),l.NdJ("click",function(){return l.CHM(n),l.oxw().save()}),l._uU(1),l.ALo(2,"translate"),l.qZA()}if(2&e){var r=l.oxw();l.Q6J("disabled",r.detailForm.invalid||r.detailForm.pristine),l.xp6(1),l.hij(" ",l.lcZ(2,2,"common.update")," ")}}function _e(e,t){if(1&e){var n=l.EpF();l.TgZ(0,"span",14),l.NdJ("click",function(){var e=l.CHM(n),t=e.item;return e.clear.call(null,t)}),l._uU(1," \xd7 "),l.qZA(),l.TgZ(2,"span",15),l._uU(3),l.ALo(4,"localeLanguageName"),l.qZA()}if(2&e){var r=t.item;l.xp6(3),l.AsE("",l.lcZ(4,2,r)," (",r,")")}}function Ue(e,t){if(1&e&&(l._uU(0),l.ALo(1,"localeLanguageName")),2&e){var n=t.item;l.AsE(" ",l.lcZ(1,2,n)," (",n,") ")}}function Pe(e,t){if(1&e&&(l.TgZ(0,"section",16),l.TgZ(1,"label"),l._uU(2),l.ALo(3,"translate"),l.qZA(),l._UZ(4,"vdr-tabbed-custom-fields",17),l.ALo(5,"hasPermission"),l.qZA()),2&e){var n=l.oxw();l.xp6(2),l.Oqu(l.lcZ(3,4,"common.custom-fields")),l.xp6(2),l.Q6J("customFields",n.customFields)("customFieldsFormGroup",n.detailForm.get("customFields"))("readonly",!l.lcZ(5,6,n.updatePermission))}}function Ie(e,t){if(1&e){var n=l.EpF();l.TgZ(0,"button",5),l.NdJ("click",function(){return l.CHM(n),l.oxw().create()}),l._uU(1),l.ALo(2,"translate"),l.qZA()}if(2&e){var r=l.oxw();l.Q6J("disabled",r.detailForm.pristine||r.detailForm.invalid),l.xp6(1),l.hij(" ",l.lcZ(2,2,"common.create")," ")}}function we(e,t){if(1&e){var n=l.EpF();l.TgZ(0,"button",5),l.NdJ("click",function(){return l.CHM(n),l.oxw(2).save()}),l._uU(1),l.ALo(2,"translate"),l.qZA()}if(2&e){var r=l.oxw(2);l.Q6J("disabled",r.detailForm.pristine||r.detailForm.invalid||!r.selectedHandler),l.xp6(1),l.hij(" ",l.lcZ(2,2,"common.update")," ")}}function Se(e,t){if(1&e&&l.YNc(0,we,3,4,"button",6),2&e){var n=l.oxw();l.Q6J("vdrIfPermissions",n.updatePermission)}}function Oe(e,t){if(1&e&&(l.TgZ(0,"section",23),l.TgZ(1,"label"),l._uU(2),l.ALo(3,"translate"),l.qZA(),l._UZ(4,"vdr-tabbed-custom-fields",24),l.ALo(5,"hasPermission"),l.qZA()),2&e){var n=l.oxw(2);l.xp6(2),l.Oqu(l.lcZ(3,4,"common.custom-fields")),l.xp6(2),l.Q6J("customFields",n.customFields)("customFieldsFormGroup",n.detailForm.get("customFields"))("readonly",!l.lcZ(5,6,n.updatePermission))}}function De(e,t){if(1&e){var n=l.EpF();l.TgZ(0,"vdr-configurable-input",25),l.NdJ("remove",function(){return l.CHM(n),l.oxw(2).removeChecker()}),l.ALo(1,"hasPermission"),l.qZA()}if(2&e){var r=l.oxw(2);l.Q6J("operation",r.selectedChecker)("operationDefinition",r.selectedCheckerDefinition)("readonly",!l.lcZ(1,3,r.updatePermission))}}function Ne(e,t){if(1&e){var n=l.EpF();l.TgZ(0,"button",30),l.NdJ("click",function(){var e=l.CHM(n).$implicit;return l.oxw(3).selectChecker(e)}),l._uU(1),l.qZA()}if(2&e){var r=t.$implicit;l.xp6(1),l.hij(" ",r.description," ")}}function Qe(e,t){if(1&e&&(l.TgZ(0,"div"),l.TgZ(1,"vdr-dropdown"),l.TgZ(2,"button",26),l._UZ(3,"clr-icon",27),l._uU(4),l.ALo(5,"translate"),l.qZA(),l.TgZ(6,"vdr-dropdown-menu",28),l.YNc(7,Ne,2,1,"button",29),l.qZA(),l.qZA(),l.qZA()),2&e){var n=l.oxw(2);l.xp6(4),l.hij(" ",l.lcZ(5,2,"common.select")," "),l.xp6(3),l.Q6J("ngForOf",n.checkers)}}function Me(e,t){if(1&e){var n=l.EpF();l.TgZ(0,"vdr-configurable-input",31),l.NdJ("remove",function(){return l.CHM(n),l.oxw(2).removeHandler()}),l.ALo(1,"hasPermission"),l.qZA()}if(2&e){var r=l.oxw(2);l.Q6J("operation",r.selectedHandler)("operationDefinition",r.selectedHandlerDefinition)("readonly",!l.lcZ(1,3,r.updatePermission))}}function Ye(e,t){if(1&e){var n=l.EpF();l.TgZ(0,"button",30),l.NdJ("click",function(){var e=l.CHM(n).$implicit;return l.oxw(3).selectHandler(e)}),l._uU(1),l.qZA()}if(2&e){var r=t.$implicit;l.xp6(1),l.hij(" ",r.description," ")}}function $e(e,t){if(1&e&&(l.TgZ(0,"div"),l.TgZ(1,"vdr-dropdown"),l.TgZ(2,"button",26),l._UZ(3,"clr-icon",27),l._uU(4),l.ALo(5,"translate"),l.qZA(),l.TgZ(6,"vdr-dropdown-menu",28),l.YNc(7,Ye,2,1,"button",29),l.qZA(),l.qZA(),l.qZA()),2&e){var n=l.oxw(2);l.xp6(4),l.hij(" ",l.lcZ(5,2,"common.select")," "),l.xp6(3),l.Q6J("ngForOf",n.handlers)}}function Re(e,t){if(1&e){var n=l.EpF();l.TgZ(0,"form",7),l.TgZ(1,"vdr-form-field",8),l.ALo(2,"translate"),l.TgZ(3,"input",9),l.NdJ("input",function(e){var t=l.CHM(n).ngIf;return l.oxw().updateCode(t.code,e.target.value)}),l.ALo(4,"hasPermission"),l.qZA(),l.qZA(),l.TgZ(5,"vdr-form-field",10),l.ALo(6,"translate"),l.ALo(7,"hasPermission"),l._UZ(8,"input",11),l.ALo(9,"hasPermission"),l.qZA(),l._UZ(10,"vdr-rich-text-editor",12),l.ALo(11,"hasPermission"),l.ALo(12,"translate"),l.TgZ(13,"vdr-form-field",13),l.ALo(14,"translate"),l.TgZ(15,"clr-toggle-wrapper"),l._UZ(16,"input",14),l.ALo(17,"hasPermission"),l.qZA(),l.qZA(),l.YNc(18,Oe,6,8,"section",15),l._UZ(19,"vdr-custom-detail-component-host",16),l.TgZ(20,"div",17),l.TgZ(21,"div",18),l.TgZ(22,"label",19),l._uU(23),l.ALo(24,"translate"),l.qZA(),l.YNc(25,De,2,5,"vdr-configurable-input",20),l.YNc(26,Qe,8,4,"div",21),l.qZA(),l.TgZ(27,"div",18),l.TgZ(28,"label",19),l._uU(29),l.ALo(30,"translate"),l.qZA(),l.YNc(31,Me,2,5,"vdr-configurable-input",22),l.YNc(32,$e,8,4,"div",21),l.qZA(),l.qZA(),l.qZA()}if(2&e){var r=l.oxw();l.Q6J("formGroup",r.detailForm),l.xp6(1),l.Q6J("label",l.lcZ(2,19,"common.name")),l.xp6(2),l.Q6J("readonly",!l.lcZ(4,21,r.updatePermission)),l.xp6(2),l.Q6J("label",l.lcZ(6,23,"common.code"))("readOnlyToggle",l.lcZ(7,25,r.updatePermission)),l.xp6(3),l.Q6J("readonly",!l.lcZ(9,27,r.updatePermission)),l.xp6(2),l.Q6J("readonly",!l.lcZ(11,29,r.updatePermission))("label",l.lcZ(12,31,"common.description")),l.xp6(3),l.Q6J("label",l.lcZ(14,33,"common.enabled")),l.xp6(3),l.Q6J("vdrDisabled",!l.lcZ(17,35,r.updatePermission)),l.xp6(2),l.Q6J("ngIf",r.customFields.length),l.xp6(1),l.Q6J("entity$",r.entity$)("detailForm",r.detailForm),l.xp6(4),l.Oqu(l.lcZ(24,37,"settings.payment-eligibility-checker")),l.xp6(2),l.Q6J("ngIf",r.selectedChecker&&r.selectedCheckerDefinition),l.xp6(1),l.Q6J("ngIf",!r.selectedChecker||!r.selectedCheckerDefinition),l.xp6(3),l.Oqu(l.lcZ(30,39,"settings.payment-handler")),l.xp6(2),l.Q6J("ngIf",r.selectedHandler&&r.selectedHandlerDefinition),l.xp6(1),l.Q6J("ngIf",!r.selectedHandler||!r.selectedHandlerDefinition)}}function je(e,t){1&e&&(l.TgZ(0,"a",3),l._UZ(1,"clr-icon",4),l._uU(2),l.ALo(3,"translate"),l.qZA()),2&e&&(l.Q6J("routerLink",l.DdM(4,X)),l.xp6(2),l.hij(" ",l.lcZ(3,2,"settings.create-new-payment-method")," "))}var ze=function(){return["DeleteSettings","DeletePaymentMethod"]};function He(e,t){if(1&e){var n=l.EpF();l.TgZ(0,"td",5),l._uU(1),l.qZA(),l.TgZ(2,"td",5),l._uU(3),l.qZA(),l.TgZ(4,"td",6),l._UZ(5,"vdr-table-row-action",7),l.ALo(6,"translate"),l.qZA(),l.TgZ(7,"td",6),l.TgZ(8,"vdr-dropdown"),l.TgZ(9,"button",8),l._uU(10),l.ALo(11,"translate"),l._UZ(12,"clr-icon",9),l.qZA(),l.TgZ(13,"vdr-dropdown-menu",10),l.TgZ(14,"button",11),l.NdJ("click",function(){var e=l.CHM(n).item;return l.oxw().deletePaymentMethod(e.id)}),l.ALo(15,"hasPermission"),l._UZ(16,"clr-icon",12),l._uU(17),l.ALo(18,"translate"),l.qZA(),l.qZA(),l.qZA(),l.qZA()}if(2&e){var r=t.item;l.xp6(1),l.Oqu(r.code),l.xp6(2),l.Oqu(r.enabled),l.xp6(2),l.Q6J("label",l.lcZ(6,7,"common.edit"))("linkTo",l.VKq(15,te,r.id)),l.xp6(5),l.hij(" ",l.lcZ(11,9,"common.actions")," "),l.xp6(4),l.Q6J("disabled",!l.lcZ(15,11,l.DdM(17,ze))),l.xp6(3),l.hij(" ",l.lcZ(18,13,"common.delete")," ")}}var Ee=function(){return["CreateSettings","CreatePaymentMethod"]};function Ge(e,t){if(1&e){var n=l.EpF();l.TgZ(0,"button",4),l.NdJ("click",function(){l.CHM(n);var e=l.oxw().$implicit;return l.oxw().toggleAll(e.permissions)}),l._uU(1),l.ALo(2,"translate"),l.qZA()}2&e&&(l.xp6(1),l.hij(" ",l.lcZ(2,1,"common.toggle-all")," "))}function Be(e,t){if(1&e){var n=l.EpF();l.TgZ(0,"td"),l.TgZ(1,"vdr-select-toggle",5),l.NdJ("selectedChange",function(e){var t=l.CHM(n).$implicit;return l.oxw(2).setPermission(t.name,e)}),l.qZA(),l.qZA()}if(2&e){var r=t.$implicit,i=l.oxw().$implicit,o=l.oxw();l.uIk("colspan",1===i.permissions.length?4:1),l.xp6(1),l.Q6J("title",r.description)("label",r.name)("disabled",o.readonly)("selected",null==o.activePermissions?null:o.activePermissions.includes(r.name))}}function Ve(e,t){if(1&e&&(l.TgZ(0,"tr"),l.TgZ(1,"td",2),l.TgZ(2,"div"),l.TgZ(3,"strong"),l._uU(4),l.ALo(5,"translate"),l.qZA(),l.qZA(),l.TgZ(6,"small"),l._uU(7),l.ALo(8,"translate"),l.qZA(),l._UZ(9,"br"),l.YNc(10,Ge,3,3,"button",3),l.qZA(),l.YNc(11,Be,2,5,"td",1),l.qZA()),2&e){var n=t.$implicit,r=l.oxw();l.xp6(4),l.Oqu(l.lcZ(5,4,n.label)),l.xp6(3),l.Oqu(l.lcZ(8,6,n.description)),l.xp6(3),l.Q6J("ngIf",1<n.permissions.length&&!r.readonly),l.xp6(1),l.Q6J("ngForOf",n.permissions)}}function We(e,t){1&e&&(l.TgZ(0,"vdr-form-field",15),l.ALo(1,"translate"),l._UZ(2,"input",12),l.qZA()),2&e&&l.Q6J("label",l.lcZ(1,1,"settings.password"))}function Ke(e,t){if(1&e&&(l.TgZ(0,"section",16),l.TgZ(1,"label"),l._uU(2),l.ALo(3,"translate"),l.qZA(),l._UZ(4,"vdr-tabbed-custom-fields",17),l.qZA()),2&e){var n=l.oxw();l.xp6(2),l.Oqu(l.lcZ(3,3,"common.custom-fields")),l.xp6(2),l.Q6J("customFields",n.customFields)("customFieldsFormGroup",n.detailForm.get("customFields"))}}function Xe(e,t){if(1&e){var n=l.EpF();l.TgZ(0,"button",12),l.NdJ("click",function(){return l.CHM(n),l.oxw().create()}),l._uU(1),l.ALo(2,"translate"),l.qZA()}if(2&e){var r=l.oxw();l.Q6J("disabled",r.detailForm.invalid||r.detailForm.pristine),l.xp6(1),l.hij(" ",l.lcZ(2,2,"common.create")," ")}}function et(e,t){if(1&e){var n=l.EpF();l.TgZ(0,"button",12),l.NdJ("click",function(){return l.CHM(n),l.oxw(2).save()}),l._uU(1),l.ALo(2,"translate"),l.qZA()}if(2&e){var r=l.oxw(2);l.Q6J("disabled",r.detailForm.invalid||r.detailForm.pristine),l.xp6(1),l.hij(" ",l.lcZ(2,2,"common.update")," ")}}function tt(e,t){1&e&&l.YNc(0,et,3,4,"button",13),2&e&&l.Q6J("vdrIfPermissions","UpdateAdministrator")}function nt(e,t){1&e&&(l.TgZ(0,"a",3),l._UZ(1,"clr-icon",4),l._uU(2),l.ALo(3,"translate"),l.qZA()),2&e&&(l.Q6J("routerLink",l.DdM(4,X)),l.xp6(2),l.hij(" ",l.lcZ(3,2,"settings.create-new-role")," "))}function rt(e,t){if(1&e&&(l.TgZ(0,"span"),l._uU(1),l.qZA()),2&e){var n=l.oxw().item;l.xp6(1),l.Oqu(n.code)}}function it(e,t){if(1&e&&(l.TgZ(0,"vdr-chip"),l._UZ(1,"vdr-channel-badge",17),l._uU(2),l.ALo(3,"translate"),l.ALo(4,"channelCodeToLabel"),l.qZA()),2&e){var n=t.$implicit;l.xp6(1),l.Q6J("channelCode",n.code),l.xp6(1),l.hij(" ",l.lcZ(3,2,l.lcZ(4,4,n.code))," ")}}function ot(e,t){if(1&e&&(l.ynx(0),l.YNc(1,it,5,6,"vdr-chip",16),l.BQk()),2&e){var n=l.oxw().item;l.xp6(1),l.Q6J("ngForOf",n.channels)}}function at(e,t){if(1&e&&(l.TgZ(0,"vdr-chip"),l._uU(1),l.qZA()),2&e){var n=t.$implicit;l.xp6(1),l.Oqu(n)}}function st(e,t){if(1&e&&(l.ynx(0),l._UZ(1,"clr-icon",4),l._uU(2),l.BQk()),2&e){var n=l.oxw(3).item,r=l.oxw();l.xp6(2),l.hij(" ",n.permissions.length-r.initialLimit," ")}}function ct(e,t){1&e&&l._UZ(0,"clr-icon",21)}function lt(e,t){if(1&e){var n=l.EpF();l.TgZ(0,"button",19),l.NdJ("click",function(){l.CHM(n);var e=l.oxw(2).item;return l.oxw().toggleDisplayLimit(e)}),l.YNc(1,st,3,1,"ng-container",7),l.YNc(2,ct,1,0,"ng-template",null,20,l.W1O),l.qZA()}if(2&e){var r=l.MAs(3),i=l.oxw(2).item,o=l.oxw();l.xp6(1),l.Q6J("ngIf",(o.displayLimit[i.id]||0)<i.permissions.length)("ngIfElse",r)}}function ut(e,t){if(1&e&&(l.ynx(0),l.YNc(1,at,2,1,"vdr-chip",16),l.ALo(2,"slice"),l.YNc(3,lt,4,2,"button",18),l.BQk()),2&e){var n=l.oxw().item,r=l.oxw();l.xp6(1),l.Q6J("ngForOf",l.Dn7(2,2,n.permissions,0,r.displayLimit[n.id]||3)),l.xp6(2),l.Q6J("ngIf",n.permissions.length>r.initialLimit)}}function dt(e,t){1&e&&(l.TgZ(0,"span",22),l._uU(1),l.ALo(2,"translate"),l.qZA()),2&e&&(l.xp6(1),l.Oqu(l.lcZ(2,1,"settings.default-role-label")))}function mt(e,t){if(1&e&&(l._UZ(0,"vdr-table-row-action",23),l.ALo(1,"translate")),2&e){var n=l.oxw().item;l.Q6J("label",l.lcZ(1,2,"common.edit"))("linkTo",l.VKq(4,te,n.id))}}function pt(e,t){if(1&e){var n=l.EpF();l.TgZ(0,"td",5),l._uU(1),l.qZA(),l.TgZ(2,"td",5),l.YNc(3,rt,2,1,"span",6),l.qZA(),l.TgZ(4,"td",5),l.YNc(5,ot,2,1,"ng-container",6),l.qZA(),l.TgZ(6,"td",5),l.YNc(7,ut,4,6,"ng-container",7),l.YNc(8,dt,3,3,"ng-template",null,8,l.W1O),l.qZA(),l.TgZ(10,"td",9),l.YNc(11,mt,2,6,"vdr-table-row-action",10),l.qZA(),l.TgZ(12,"td",9),l.TgZ(13,"vdr-dropdown"),l.TgZ(14,"button",11),l._uU(15),l.ALo(16,"translate"),l._UZ(17,"clr-icon",12),l.qZA(),l.TgZ(18,"vdr-dropdown-menu",13),l.TgZ(19,"button",14),l.NdJ("click",function(){var e=l.CHM(n).item;return l.oxw().deleteRole(e.id)}),l.ALo(20,"hasPermission"),l._UZ(21,"clr-icon",15),l._uU(22),l.ALo(23,"translate"),l.qZA(),l.qZA(),l.qZA(),l.qZA()}if(2&e){var r=t.item,i=l.MAs(9),o=l.oxw();l.xp6(1),l.Oqu(r.description),l.xp6(2),l.Q6J("ngIf",!o.isDefaultRole(r)),l.xp6(2),l.Q6J("ngIf",!o.isDefaultRole(r)),l.xp6(2),l.Q6J("ngIf",!o.isDefaultRole(r))("ngIfElse",i),l.xp6(4),l.Q6J("ngIf",!o.isDefaultRole(r)),l.xp6(3),l.Q6J("disabled",o.isDefaultRole(r)),l.xp6(1),l.hij(" ",l.lcZ(16,10,"common.actions")," "),l.xp6(4),l.Q6J("disabled",!l.lcZ(20,12,"SuperAdmin")),l.xp6(3),l.hij(" ",l.lcZ(23,14,"common.delete")," ")}}function gt(e,t){if(1&e&&l._UZ(0,"vdr-object-tree",11),2&e){var n=l.oxw().$implicit;l.Q6J("value",n.metadata)}}function ft(e,t){if(1&e&&(l.TgZ(0,"div",6),l.TgZ(1,"div",7),l.TgZ(2,"vdr-labeled-data",8),l.ALo(3,"translate"),l._uU(4),l.qZA(),l.TgZ(5,"div",9),l.TgZ(6,"vdr-labeled-data",8),l.ALo(7,"translate"),l._uU(8),l.ALo(9,"localeCurrency"),l.qZA(),l.TgZ(10,"vdr-labeled-data",8),l.ALo(11,"translate"),l._uU(12),l.ALo(13,"localeCurrency"),l.qZA(),l.qZA(),l.YNc(14,gt,1,1,"vdr-object-tree",10),l.qZA(),l.qZA()),2&e){var n=t.$implicit,r=l.oxw();l.xp6(1),l.ekj("stale",r.testDataUpdated),l.xp6(1),l.Q6J("label",l.lcZ(3,9,"settings.shipping-method")),l.xp6(2),l.hij(" ",n.name," "),l.xp6(2),l.Q6J("label",l.lcZ(7,11,"common.price")),l.xp6(2),l.hij(" ",l.xi3(9,13,n.price,r.currencyCode)," "),l.xp6(2),l.Q6J("label",l.lcZ(11,16,"common.price-with-tax")),l.xp6(2),l.hij(" ",l.xi3(13,18,n.priceWithTax,r.currencyCode)," "),l.xp6(2),l.Q6J("ngIf",n.metadata)}}function vt(e,t){1&e&&(l.TgZ(0,"div",6),l._UZ(1,"clr-icon",12),l._uU(2),l.ALo(3,"translate"),l.qZA()),2&e&&(l.xp6(2),l.hij(" ",l.lcZ(3,1,"settings.no-eligible-shipping-methods")," "))}function ht(e,t){if(1&e){var n=l.EpF();l.TgZ(0,"button",8),l.NdJ("click",function(){return l.CHM(n),l.oxw().create()}),l._uU(1),l.ALo(2,"translate"),l.qZA()}if(2&e){var r=l.oxw();l.Q6J("disabled",r.detailForm.pristine||r.detailForm.invalid||!r.selectedChecker||!r.selectedCalculator),l.xp6(1),l.hij(" ",l.lcZ(2,2,"common.create")," ")}}function Zt(e,t){if(1&e){var n=l.EpF();l.TgZ(0,"button",8),l.NdJ("click",function(){return l.CHM(n),l.oxw(2).save()}),l._uU(1),l.ALo(2,"translate"),l.qZA()}if(2&e){var r=l.oxw(2);l.Q6J("disabled",r.detailForm.pristine||r.detailForm.invalid||!r.selectedChecker||!r.selectedCalculator),l.xp6(1),l.hij(" ",l.lcZ(2,2,"common.update")," ")}}function yt(e,t){if(1&e&&l.YNc(0,Zt,3,4,"button",9),2&e){var n=l.oxw();l.Q6J("vdrIfPermissions",n.updatePermission)}}function bt(e,t){if(1&e&&(l.TgZ(0,"option",27),l._uU(1),l.qZA()),2&e){var n=t.$implicit;l.Q6J("value",n.code),l.xp6(1),l.AsE(" ",n.code,": ",n.description," ")}}function At(e,t){if(1&e&&(l.TgZ(0,"section",28),l.TgZ(1,"label"),l._uU(2),l.ALo(3,"translate"),l.qZA(),l._UZ(4,"vdr-tabbed-custom-fields",29),l.ALo(5,"hasPermission"),l.qZA()),2&e){var n=l.oxw(2);l.xp6(2),l.Oqu(l.lcZ(3,4,"common.custom-fields")),l.xp6(2),l.Q6J("customFields",n.customFields)("customFieldsFormGroup",n.detailForm.get("customFields"))("readonly",!l.lcZ(5,6,n.updatePermission))}}function xt(e,t){if(1&e){var n=l.EpF();l.TgZ(0,"vdr-configurable-input",30),l.NdJ("remove",function(){return l.CHM(n),l.oxw(2).selectedChecker=null}),l.ALo(1,"hasPermission"),l.qZA()}if(2&e){var r=l.oxw(2);l.Q6J("operation",r.selectedChecker)("operationDefinition",r.selectedCheckerDefinition)("readonly",!l.lcZ(1,3,r.updatePermission))}}function Tt(e,t){if(1&e){var n=l.EpF();l.TgZ(0,"button",35),l.NdJ("click",function(){var e=l.CHM(n).$implicit;return l.oxw(3).selectChecker(e)}),l._uU(1),l.qZA()}if(2&e){var r=t.$implicit;l.xp6(1),l.hij(" ",r.description," ")}}function qt(e,t){if(1&e&&(l.TgZ(0,"div"),l.TgZ(1,"vdr-dropdown"),l.TgZ(2,"button",31),l._UZ(3,"clr-icon",32),l._uU(4),l.ALo(5,"translate"),l.qZA(),l.TgZ(6,"vdr-dropdown-menu",33),l.YNc(7,Tt,2,1,"button",34),l.qZA(),l.qZA(),l.qZA()),2&e){var n=l.oxw(2);l.xp6(4),l.hij(" ",l.lcZ(5,2,"common.select")," "),l.xp6(3),l.Q6J("ngForOf",n.checkers)}}function Ct(e,t){if(1&e){var n=l.EpF();l.TgZ(0,"vdr-configurable-input",36),l.NdJ("remove",function(){return l.CHM(n),l.oxw(2).selectedCalculator=null}),l.ALo(1,"hasPermission"),l.qZA()}if(2&e){var r=l.oxw(2);l.Q6J("operation",r.selectedCalculator)("operationDefinition",r.selectedCalculatorDefinition)("readonly",!l.lcZ(1,3,r.updatePermission))}}function Ft(e,t){if(1&e){var n=l.EpF();l.TgZ(0,"button",35),l.NdJ("click",function(){var e=l.CHM(n).$implicit;return l.oxw(3).selectCalculator(e)}),l._uU(1),l.qZA()}if(2&e){var r=t.$implicit;l.xp6(1),l.hij(" ",r.description," ")}}function Lt(e,t){if(1&e&&(l.TgZ(0,"div"),l.TgZ(1,"vdr-dropdown"),l.TgZ(2,"button",31),l._UZ(3,"clr-icon",32),l._uU(4),l.ALo(5,"translate"),l.qZA(),l.TgZ(6,"vdr-dropdown-menu",33),l.YNc(7,Ft,2,1,"button",34),l.qZA(),l.qZA(),l.qZA()),2&e){var n=l.oxw(2);l.xp6(4),l.hij(" ",l.lcZ(5,2,"common.select")," "),l.xp6(3),l.Q6J("ngForOf",n.calculators)}}function kt(e,t){if(1&e){var n=l.EpF();l.TgZ(0,"form",10),l.TgZ(1,"vdr-form-field",11),l.ALo(2,"translate"),l.TgZ(3,"input",12),l.NdJ("input",function(e){var t=l.CHM(n).ngIf;return l.oxw().updateCode(t.code,e.target.value)}),l.ALo(4,"hasPermission"),l.qZA(),l.qZA(),l.TgZ(5,"vdr-form-field",13),l.ALo(6,"translate"),l.ALo(7,"hasPermission"),l._UZ(8,"input",14),l.ALo(9,"hasPermission"),l.qZA(),l._UZ(10,"vdr-rich-text-editor",15),l.ALo(11,"hasPermission"),l.ALo(12,"translate"),l.TgZ(13,"vdr-form-field",16),l.ALo(14,"translate"),l.TgZ(15,"select",17),l.ALo(16,"hasPermission"),l.YNc(17,bt,2,3,"option",18),l.qZA(),l.qZA(),l.YNc(18,At,6,8,"section",19),l._UZ(19,"vdr-custom-detail-component-host",20),l.TgZ(20,"div",21),l.TgZ(21,"div",22),l.TgZ(22,"label",23),l._uU(23),l.ALo(24,"translate"),l.qZA(),l.YNc(25,xt,2,5,"vdr-configurable-input",24),l.YNc(26,qt,8,4,"div",25),l.qZA(),l.TgZ(27,"div",22),l.TgZ(28,"label",23),l._uU(29),l.ALo(30,"translate"),l.qZA(),l.YNc(31,Ct,2,5,"vdr-configurable-input",26),l.YNc(32,Lt,8,4,"div",25),l.qZA(),l.qZA(),l.qZA()}if(2&e){var r=l.oxw();l.Q6J("formGroup",r.detailForm),l.xp6(1),l.Q6J("label",l.lcZ(2,20,"common.name")),l.xp6(2),l.Q6J("readonly",!l.lcZ(4,22,r.updatePermission)),l.xp6(2),l.Q6J("label",l.lcZ(6,24,"common.code"))("readOnlyToggle",l.lcZ(7,26,r.updatePermission)),l.xp6(3),l.Q6J("readonly",!l.lcZ(9,28,r.updatePermission)),l.xp6(2),l.Q6J("readonly",!l.lcZ(11,30,r.updatePermission))("label",l.lcZ(12,32,"common.description")),l.xp6(3),l.Q6J("label",l.lcZ(14,34,"settings.fulfillment-handler")),l.xp6(2),l.Q6J("vdrDisabled",!l.lcZ(16,36,r.updatePermission)),l.xp6(2),l.Q6J("ngForOf",r.fulfillmentHandlers),l.xp6(1),l.Q6J("ngIf",r.customFields.length),l.xp6(1),l.Q6J("entity$",r.entity$)("detailForm",r.detailForm),l.xp6(4),l.Oqu(l.lcZ(24,38,"settings.shipping-eligibility-checker")),l.xp6(2),l.Q6J("ngIf",r.selectedChecker&&r.selectedCheckerDefinition),l.xp6(1),l.Q6J("ngIf",!r.selectedChecker||!r.selectedCheckerDefinition),l.xp6(3),l.Oqu(l.lcZ(30,40,"settings.shipping-calculator")),l.xp6(2),l.Q6J("ngIf",r.selectedCalculator&&r.selectedCalculatorDefinition),l.xp6(1),l.Q6J("ngIf",!r.selectedCalculator||!r.selectedCalculatorDefinition)}}function Jt(e,t){if(1&e){var n=l.EpF();l.TgZ(0,"clr-accordion-content"),l.TgZ(1,"div",37),l.TgZ(2,"div",22),l.TgZ(3,"vdr-test-order-builder",38),l.NdJ("orderLinesChange",function(e){return l.CHM(n),l.oxw().setTestOrderLines(e)}),l.qZA(),l.qZA(),l.TgZ(4,"div",22),l.TgZ(5,"vdr-test-address-form",39),l.NdJ("addressChange",function(e){return l.CHM(n),l.oxw().setTestAddress(e)}),l.qZA(),l.TgZ(6,"vdr-shipping-method-test-result",40),l.NdJ("runTest",function(){return l.CHM(n),l.oxw().runTest()}),l.ALo(7,"async"),l.ALo(8,"async"),l.qZA(),l.qZA(),l.qZA(),l.qZA()}if(2&e){var r,i=l.oxw();l.xp6(6),l.Q6J("currencyCode",null==(r=l.lcZ(7,4,i.activeChannel$))?null:r.currencyCode)("okToRun",i.allTestDataPresent()&&i.testDataUpdated&&i.detailForm.valid)("testDataUpdated",i.testDataUpdated)("testResult",l.lcZ(8,6,i.testResult$))}}function _t(e,t){1&e&&(l.TgZ(0,"a",6),l._UZ(1,"clr-icon",7),l._uU(2),l.ALo(3,"translate"),l.qZA()),2&e&&(l.Q6J("routerLink",l.DdM(4,X)),l.xp6(2),l.hij(" ",l.lcZ(3,2,"settings.create-new-shipping-method")," "))}var Ut=function(){return["DeleteSettings","DeleteShippingMethod"]};function Pt(e,t){if(1&e){var n=l.EpF();l.TgZ(0,"td",8),l._uU(1),l.qZA(),l.TgZ(2,"td",8),l._uU(3),l.qZA(),l.TgZ(4,"td",9),l._UZ(5,"vdr-table-row-action",10),l.ALo(6,"translate"),l.qZA(),l.TgZ(7,"td",9),l.TgZ(8,"vdr-dropdown"),l.TgZ(9,"button",11),l._uU(10),l.ALo(11,"translate"),l._UZ(12,"clr-icon",12),l.qZA(),l.TgZ(13,"vdr-dropdown-menu",13),l.TgZ(14,"button",14),l.NdJ("click",function(){var e=l.CHM(n).item;return l.oxw().deleteShippingMethod(e.id)}),l.ALo(15,"hasPermission"),l._UZ(16,"clr-icon",15),l._uU(17),l.ALo(18,"translate"),l.qZA(),l.qZA(),l.qZA(),l.qZA()}if(2&e){var r=t.item;l.xp6(1),l.Oqu(r.code),l.xp6(2),l.Oqu(r.name),l.xp6(2),l.Q6J("label",l.lcZ(6,7,"common.edit"))("linkTo",l.VKq(15,te,r.id)),l.xp6(5),l.hij(" ",l.lcZ(11,9,"common.actions")," "),l.xp6(4),l.Q6J("disabled",!l.lcZ(15,11,l.DdM(17,Ut))),l.xp6(3),l.hij(" ",l.lcZ(18,13,"common.delete")," ")}}function It(e,t){if(1&e){var n=l.EpF();l.TgZ(0,"clr-accordion-content"),l.TgZ(1,"div",16),l.TgZ(2,"div",17),l.TgZ(3,"vdr-test-order-builder",18),l.NdJ("orderLinesChange",function(e){return l.CHM(n),l.oxw().setTestOrderLines(e)}),l.qZA(),l.qZA(),l.TgZ(4,"div",17),l.TgZ(5,"vdr-test-address-form",19),l.NdJ("addressChange",function(e){return l.CHM(n),l.oxw().setTestAddress(e)}),l.qZA(),l.TgZ(6,"vdr-shipping-eligibility-test-result",20),l.NdJ("runTest",function(){return l.CHM(n),l.oxw().runTest()}),l.ALo(7,"async"),l.ALo(8,"async"),l.qZA(),l.qZA(),l.qZA(),l.qZA()}if(2&e){var r,i=l.oxw();l.xp6(6),l.Q6J("currencyCode",null==(r=l.lcZ(7,4,i.activeChannel$))?null:r.currencyCode)("okToRun",i.allTestDataPresent())("testDataUpdated",i.testDataUpdated)("testResult",l.lcZ(8,6,i.testResult$))}}var wt=function(){return["CreateSettings","CreateShippingMethod"]};function St(e,t){1&e&&l._UZ(0,"clr-icon",14)}function Ot(e,t){1&e&&l._UZ(0,"clr-icon",15)}function Dt(e,t){1&e&&l._UZ(0,"clr-icon",16)}function Nt(e,t){if(1&e&&(l.TgZ(0,"vdr-labeled-data",4),l.ALo(1,"translate"),l._uU(2),l.ALo(3,"localeCurrency"),l.qZA()),2&e){var n=l.oxw();l.Q6J("label",l.lcZ(1,2,"common.price")),l.xp6(2),l.hij(" ",l.xi3(3,4,null==n.testResult.quote?null:n.testResult.quote.price,n.currencyCode)," ")}}function Qt(e,t){if(1&e&&(l.TgZ(0,"vdr-labeled-data",4),l.ALo(1,"translate"),l._uU(2),l.ALo(3,"localeCurrency"),l.qZA()),2&e){var n=l.oxw();l.Q6J("label",l.lcZ(1,2,"common.price-with-tax")),l.xp6(2),l.hij(" ",l.xi3(3,4,null==n.testResult.quote?null:n.testResult.quote.priceWithTax,n.currencyCode)," ")}}function Mt(e,t){if(1&e&&l._UZ(0,"vdr-object-tree",17),2&e){var n=l.oxw();l.Q6J("value",null==n.testResult||null==n.testResult.quote?null:n.testResult.quote.metadata)}}var Yt=function(e,t,n){return{success:e,error:t,unknown:n}};function $t(e,t){if(1&e){var n=l.EpF();l.TgZ(0,"button",11),l.NdJ("click",function(){return l.CHM(n),l.oxw().create()}),l._uU(1),l.ALo(2,"translate"),l.qZA()}if(2&e){var r=l.oxw();l.Q6J("disabled",!r.saveButtonEnabled()),l.xp6(1),l.hij(" ",l.lcZ(2,2,"common.create")," ")}}function Rt(e,t){if(1&e){var n=l.EpF();l.TgZ(0,"button",11),l.NdJ("click",function(){return l.CHM(n),l.oxw(2).save()}),l._uU(1),l.ALo(2,"translate"),l.qZA()}if(2&e){var r=l.oxw(2);l.Q6J("disabled",!r.saveButtonEnabled()),l.xp6(1),l.hij(" ",l.lcZ(2,2,"common.update")," ")}}function jt(e,t){if(1&e&&l.YNc(0,Rt,3,4,"button",12),2&e){var n=l.oxw();l.Q6J("vdrIfPermissions",n.updatePermission)}}function zt(e,t){if(1&e&&(l.TgZ(0,"section",13),l.TgZ(1,"label"),l._uU(2),l.ALo(3,"translate"),l.qZA(),l._UZ(4,"vdr-tabbed-custom-fields",14),l.ALo(5,"hasPermission"),l.qZA()),2&e){var n=l.oxw();l.xp6(2),l.Oqu(l.lcZ(3,4,"common.custom-fields")),l.xp6(2),l.Q6J("customFields",n.customFields)("customFieldsFormGroup",n.detailForm.get("customFields"))("readonly",!l.lcZ(5,6,n.updatePermission))}}function Ht(e,t){1&e&&(l.TgZ(0,"a",3),l._UZ(1,"clr-icon",4),l._uU(2),l.ALo(3,"translate"),l.qZA()),2&e&&(l.Q6J("routerLink",l.DdM(4,X)),l.xp6(2),l.hij(" ",l.lcZ(3,2,"settings.create-new-tax-category")," "))}function Et(e,t){1&e&&(l.TgZ(0,"vdr-chip"),l._uU(1),l.ALo(2,"translate"),l.qZA()),2&e&&(l.xp6(1),l.Oqu(l.lcZ(2,1,"common.default-tax-category")))}var Gt=function(){return["DeleteSettings","DeleteTaxCategory"]};function Bt(e,t){if(1&e){var n=l.EpF();l.TgZ(0,"td",5),l._uU(1),l.qZA(),l.TgZ(2,"td",5),l.YNc(3,Et,3,3,"vdr-chip",6),l.qZA(),l.TgZ(4,"td",7),l._UZ(5,"vdr-table-row-action",8),l.ALo(6,"translate"),l.qZA(),l.TgZ(7,"td",7),l.TgZ(8,"vdr-dropdown"),l.TgZ(9,"button",9),l._uU(10),l.ALo(11,"translate"),l._UZ(12,"clr-icon",10),l.qZA(),l.TgZ(13,"vdr-dropdown-menu",11),l.TgZ(14,"button",12),l.NdJ("click",function(){var e=l.CHM(n).item;return l.oxw().deleteTaxCategory(e)}),l.ALo(15,"hasPermission"),l._UZ(16,"clr-icon",13),l._uU(17),l.ALo(18,"translate"),l.qZA(),l.qZA(),l.qZA(),l.qZA()}if(2&e){var r=t.item;l.xp6(1),l.Oqu(r.name),l.xp6(2),l.Q6J("ngIf",r.isDefault),l.xp6(2),l.Q6J("label",l.lcZ(6,7,"common.edit"))("linkTo",l.VKq(15,te,r.id)),l.xp6(5),l.hij(" ",l.lcZ(11,9,"common.actions")," "),l.xp6(4),l.Q6J("disabled",!l.lcZ(15,11,l.DdM(17,Gt))),l.xp6(3),l.hij(" ",l.lcZ(18,13,"common.delete")," ")}}var Vt=function(){return["CreateSettings","CreateTaxCategory"]};function Wt(e,t){if(1&e){var n=l.EpF();l.TgZ(0,"button",19),l.NdJ("click",function(){return l.CHM(n),l.oxw().create()}),l._uU(1),l.ALo(2,"translate"),l.qZA()}if(2&e){var r=l.oxw();l.Q6J("disabled",!r.saveButtonEnabled()),l.xp6(1),l.hij(" ",l.lcZ(2,2,"common.create")," ")}}function Kt(e,t){if(1&e){var n=l.EpF();l.TgZ(0,"button",19),l.NdJ("click",function(){return l.CHM(n),l.oxw(2).save()}),l._uU(1),l.ALo(2,"translate"),l.qZA()}if(2&e){var r=l.oxw(2);l.Q6J("disabled",!r.saveButtonEnabled()),l.xp6(1),l.hij(" ",l.lcZ(2,2,"common.update")," ")}}function Xt(e,t){if(1&e&&l.YNc(0,Kt,3,4,"button",20),2&e){var n=l.oxw();l.Q6J("vdrIfPermissions",n.updatePermission)}}function en(e,t){if(1&e&&(l.TgZ(0,"option",21),l._uU(1),l.qZA()),2&e){var n=t.$implicit;l.Q6J("value",n.id),l.xp6(1),l.hij(" ",n.name," ")}}function tn(e,t){if(1&e&&(l.TgZ(0,"option",21),l._uU(1),l.qZA()),2&e){var n=t.$implicit;l.Q6J("value",n.id),l.xp6(1),l.Oqu(n.name)}}function nn(e,t){if(1&e&&(l.TgZ(0,"section",22),l.TgZ(1,"label"),l._uU(2),l.ALo(3,"translate"),l.qZA(),l._UZ(4,"vdr-tabbed-custom-fields",23),l.ALo(5,"hasPermission"),l.qZA()),2&e){var n=l.oxw();l.xp6(2),l.Oqu(l.lcZ(3,4,"common.custom-fields")),l.xp6(2),l.Q6J("customFields",n.customFields)("customFieldsFormGroup",n.detailForm.get("customFields"))("readonly",!l.lcZ(5,6,n.updatePermission))}}function rn(e,t){1&e&&(l.TgZ(0,"a",3),l._UZ(1,"clr-icon",4),l._uU(2),l.ALo(3,"translate"),l.qZA()),2&e&&(l.Q6J("routerLink",l.DdM(4,X)),l.xp6(2),l.hij(" ",l.lcZ(3,2,"settings.create-new-tax-rate")," "))}var on=function(){return["DeleteSettings","DeleteTaxRate"]};function an(e,t){if(1&e){var n=l.EpF();l.TgZ(0,"td",5),l._uU(1),l.qZA(),l.TgZ(2,"td",5),l._uU(3),l.qZA(),l.TgZ(4,"td",5),l._uU(5),l.qZA(),l.TgZ(6,"td",5),l._uU(7),l.qZA(),l.TgZ(8,"td",6),l._UZ(9,"vdr-table-row-action",7),l.ALo(10,"translate"),l.qZA(),l.TgZ(11,"td",6),l.TgZ(12,"vdr-dropdown"),l.TgZ(13,"button",8),l._uU(14),l.ALo(15,"translate"),l._UZ(16,"clr-icon",9),l.qZA(),l.TgZ(17,"vdr-dropdown-menu",10),l.TgZ(18,"button",11),l.NdJ("click",function(){var e=l.CHM(n).item;return l.oxw().deleteTaxRate(e)}),l.ALo(19,"hasPermission"),l._UZ(20,"clr-icon",12),l._uU(21),l.ALo(22,"translate"),l.qZA(),l.qZA(),l.qZA(),l.qZA()}if(2&e){var r=t.item;l.xp6(1),l.Oqu(r.name),l.xp6(2),l.Oqu(r.category.name),l.xp6(2),l.Oqu(r.zone.name),l.xp6(2),l.hij("",r.value,"%"),l.xp6(2),l.Q6J("label",l.lcZ(10,9,"common.edit"))("linkTo",l.VKq(17,te,r.id)),l.xp6(5),l.hij(" ",l.lcZ(15,11,"common.actions")," "),l.xp6(4),l.Q6J("disabled",!l.lcZ(19,13,l.DdM(19,on))),l.xp6(3),l.hij(" ",l.lcZ(22,15,"common.delete")," ")}}var sn=function(){return["CreateSettings","CreateTaxRate"]};function cn(e,t){if(1&e&&(l.TgZ(0,"option",9),l._uU(1),l.qZA()),2&e){var n=t.$implicit;l.Q6J("value",n.code),l.xp6(1),l.hij(" ",n.name," ")}}function ln(e,t){if(1&e){var n=l.EpF();l.TgZ(0,"tr",10),l.TgZ(1,"td",11),l._UZ(2,"img",12),l.qZA(),l.TgZ(3,"td",13),l._uU(4),l.qZA(),l.TgZ(5,"td",14),l._uU(6),l.qZA(),l.TgZ(7,"td",15),l._uU(8),l.ALo(9,"localeCurrency"),l.qZA(),l.TgZ(10,"td",16),l.TgZ(11,"input",17),l.NdJ("ngModelChange",function(e){return l.CHM(n).$implicit.quantity=e})("change",function(){return l.CHM(n),l.oxw(2).updateQuantity()}),l.qZA(),l.TgZ(12,"button",18),l.NdJ("click",function(){var e=l.CHM(n).$implicit;return l.oxw(2).removeLine(e)}),l._UZ(13,"clr-icon",19),l.qZA(),l.qZA(),l.TgZ(14,"td",20),l._uU(15),l.ALo(16,"localeCurrency"),l.qZA(),l.qZA()}if(2&e){var r=t.$implicit,i=l.oxw(2);l.xp6(2),l.Q6J("src",r.preview+"?preset=tiny",l.LSH),l.xp6(2),l.Oqu(r.name),l.xp6(2),l.Oqu(r.sku),l.xp6(2),l.hij(" ",l.xi3(9,6,r.unitPriceWithTax,i.currencyCode)," "),l.xp6(3),l.Q6J("ngModel",r.quantity),l.xp6(4),l.hij(" ",l.xi3(16,9,r.unitPriceWithTax*r.quantity,i.currencyCode)," ")}}function un(e,t){if(1&e&&(l.TgZ(0,"table",6),l.TgZ(1,"thead"),l.TgZ(2,"tr"),l._UZ(3,"th"),l.TgZ(4,"th"),l._uU(5),l.ALo(6,"translate"),l.qZA(),l.TgZ(7,"th"),l._uU(8),l.ALo(9,"translate"),l.qZA(),l.TgZ(10,"th"),l._uU(11),l.ALo(12,"translate"),l.qZA(),l.TgZ(13,"th"),l._uU(14),l.ALo(15,"translate"),l.qZA(),l.TgZ(16,"th"),l._uU(17),l.ALo(18,"translate"),l.qZA(),l.qZA(),l.qZA(),l.YNc(19,ln,17,12,"tr",7),l.TgZ(20,"tr",8),l.TgZ(21,"td",9),l._uU(22),l.ALo(23,"translate"),l.qZA(),l._UZ(24,"td"),l._UZ(25,"td"),l._UZ(26,"td"),l._UZ(27,"td"),l.TgZ(28,"td"),l._uU(29),l.ALo(30,"localeCurrency"),l.qZA(),l.qZA(),l.qZA()),2&e){var n=l.oxw();l.xp6(5),l.Oqu(l.lcZ(6,8,"order.product-name")),l.xp6(3),l.Oqu(l.lcZ(9,10,"order.product-sku")),l.xp6(3),l.Oqu(l.lcZ(12,12,"order.unit-price")),l.xp6(3),l.Oqu(l.lcZ(15,14,"order.quantity")),l.xp6(3),l.Oqu(l.lcZ(18,16,"order.total")),l.xp6(2),l.Q6J("ngForOf",n.lines),l.xp6(3),l.Oqu(l.lcZ(23,18,"order.sub-total")),l.xp6(7),l.Oqu(l.xi3(30,20,n.subTotal,n.currencyCode))}}function dn(e,t){1&e&&(l.TgZ(0,"div",21),l.TgZ(1,"div",22),l._uU(2),l.ALo(3,"translate"),l.qZA(),l._UZ(4,"clr-icon",23),l.qZA()),2&e&&(l.xp6(2),l.Oqu(l.lcZ(3,1,"settings.add-products-to-test-order")))}function mn(e,t){1&e&&(l.TgZ(0,"span"),l._uU(1),l.ALo(2,"translate"),l.qZA()),2&e&&(l.xp6(1),l.Oqu(l.lcZ(2,1,"settings.update-zone")))}function pn(e,t){1&e&&(l.TgZ(0,"span"),l._uU(1),l.ALo(2,"translate"),l.qZA()),2&e&&(l.xp6(1),l.Oqu(l.lcZ(2,1,"settings.create-zone")))}function gn(e,t){if(1&e&&(l.YNc(0,mn,3,3,"span",6),l.YNc(1,pn,3,3,"span",6)),2&e){var n=l.oxw();l.Q6J("ngIf",n.zone.id),l.xp6(1),l.Q6J("ngIf",!n.zone.id)}}function fn(e,t){1&e&&(l.TgZ(0,"span"),l._uU(1),l.ALo(2,"translate"),l.qZA()),2&e&&(l.xp6(1),l.Oqu(l.lcZ(2,1,"settings.update-zone")))}function vn(e,t){1&e&&(l.TgZ(0,"span"),l._uU(1),l.ALo(2,"translate"),l.qZA()),2&e&&(l.xp6(1),l.Oqu(l.lcZ(2,1,"settings.create-zone")))}function hn(e,t){if(1&e){var n=l.EpF();l.TgZ(0,"button",7),l.NdJ("click",function(){return l.CHM(n),l.oxw().cancel()}),l._uU(1),l.ALo(2,"translate"),l.qZA(),l.TgZ(3,"button",8),l.NdJ("click",function(){return l.CHM(n),l.oxw().save()}),l.YNc(4,fn,3,3,"span",6),l.YNc(5,vn,3,3,"span",6),l.qZA()}if(2&e){var r=l.oxw();l.xp6(1),l.Oqu(l.lcZ(2,4,"common.cancel")),l.xp6(2),l.Q6J("disabled",r.form.invalid),l.xp6(1),l.Q6J("ngIf",r.zone.id),l.xp6(1),l.Q6J("ngIf",!r.zone.id)}}var Zn=function(){return["UpdateSettings","UpdateZone"]};function yn(e,t){if(1&e){var n=l.EpF();l.TgZ(0,"button",9),l.NdJ("click",function(){return l.CHM(n),l.oxw().create()}),l._UZ(1,"clr-icon",10),l._uU(2),l.ALo(3,"translate"),l.qZA()}2&e&&(l.xp6(2),l.hij(" ",l.lcZ(3,1,"settings.create-new-zone")," "))}var bn=function(){return["DeleteSettings","DeleteZone"]};function An(e,t){if(1&e){var n=l.EpF();l.TgZ(0,"tr"),l.ALo(1,"async"),l.TgZ(2,"td",11),l._UZ(3,"vdr-entity-info",12),l.qZA(),l.TgZ(4,"td",11),l.TgZ(5,"vdr-chip",13),l._uU(6),l.qZA(),l.qZA(),l.TgZ(7,"td",14),l.TgZ(8,"a",15),l._UZ(9,"clr-icon",16),l._uU(10),l.ALo(11,"translate"),l.qZA(),l.qZA(),l.TgZ(12,"td",17),l.TgZ(13,"button",18),l.NdJ("click",function(){var e=l.CHM(n).$implicit;return l.oxw().update(e)}),l._UZ(14,"clr-icon",19),l._uU(15),l.ALo(16,"translate"),l.qZA(),l.qZA(),l.TgZ(17,"td",17),l.TgZ(18,"vdr-dropdown"),l.TgZ(19,"button",20),l._uU(20),l.ALo(21,"translate"),l._UZ(22,"clr-icon",21),l.qZA(),l.TgZ(23,"vdr-dropdown-menu",22),l.TgZ(24,"button",23),l.NdJ("click",function(){var e=l.CHM(n).$implicit;return l.oxw().delete(e.id)}),l.ALo(25,"hasPermission"),l._UZ(26,"clr-icon",24),l._uU(27),l.ALo(28,"translate"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA()}if(2&e){var r,i=t.$implicit,o=l.oxw();l.ekj("active",i.id===(null==(r=l.lcZ(1,11,o.activeZone$))?null:r.id)),l.xp6(3),l.Q6J("entity",i),l.xp6(2),l.Q6J("colorFrom",i.name),l.xp6(1),l.Oqu(i.name),l.xp6(2),l.Q6J("routerLink",l.VKq(25,te,l.VKq(23,Te,i.id))),l.xp6(2),l.hij(" ",l.lcZ(11,13,"settings.view-zone-members")," "),l.xp6(5),l.hij(" ",l.lcZ(16,15,"common.edit")," "),l.xp6(5),l.hij(" ",l.lcZ(21,17,"common.actions")," "),l.xp6(4),l.Q6J("disabled",!l.lcZ(25,19,l.DdM(27,bn))),l.xp6(3),l.hij(" ",l.lcZ(28,21,"common.delete")," ")}}var xn=function(e){return{count:e}};function Tn(e,t){if(1&e){var n=l.EpF();l.TgZ(0,"div"),l.TgZ(1,"div",28),l.TgZ(2,"div",29),l._uU(3),l.qZA(),l._UZ(4,"div",30),l.TgZ(5,"button",31),l.NdJ("click",function(){return l.CHM(n),l.oxw(2).closeMembers()}),l._UZ(6,"clr-icon",32),l.qZA(),l.qZA(),l.TgZ(7,"div",33),l.TgZ(8,"vdr-dropdown"),l.TgZ(9,"button",34),l._uU(10),l.ALo(11,"translate"),l._UZ(12,"clr-icon",21),l.qZA(),l.TgZ(13,"vdr-dropdown-menu",22),l.TgZ(14,"button",35),l.NdJ("click",function(){l.CHM(n);var e=l.oxw().ngIf,t=l.oxw();return t.removeFromZone(e,t.selectedMemberIds)}),l.ALo(15,"hasPermission"),l._UZ(16,"clr-icon",24),l._uU(17),l.ALo(18,"translate"),l.qZA(),l.qZA(),l.qZA(),l.TgZ(19,"button",36),l.NdJ("click",function(){l.CHM(n);var e=l.oxw().ngIf;return l.oxw().addToZone(e)}),l._uU(20),l.ALo(21,"translate"),l.qZA(),l.qZA(),l.qZA()}if(2&e){var r=l.oxw().ngIf,i=l.oxw();l.xp6(3),l.AsE(" ",r.name," (",r.members.length,") "),l.xp6(6),l.Q6J("disabled",0===i.selectedMemberIds.length),l.xp6(1),l.hij(" ",l.xi3(11,7,"common.with-selected",l.VKq(17,xn,i.selectedMemberIds.length))," "),l.xp6(4),l.Q6J("disabled",!l.lcZ(15,10,l.DdM(19,Zn))),l.xp6(3),l.hij(" ",l.lcZ(18,12,"settings.remove-from-zone")," "),l.xp6(3),l.hij(" ",l.xi3(21,14,"settings.add-countries-to-zone",l.VKq(20,$,r.name))," ")}}var qn=function(e){return["/settings","countries",e]};function Cn(e,t){if(1&e){var n=l.EpF();l.TgZ(0,"div"),l.TgZ(1,"vdr-dropdown"),l.TgZ(2,"button",20),l._uU(3),l.ALo(4,"translate"),l._UZ(5,"clr-icon",21),l.qZA(),l.TgZ(6,"vdr-dropdown-menu",22),l.TgZ(7,"a",37),l._UZ(8,"clr-icon",19),l._uU(9),l.ALo(10,"translate"),l.qZA(),l.TgZ(11,"button",35),l.NdJ("click",function(){var e=l.CHM(n).member,t=l.oxw().ngIf;return l.oxw().removeFromZone(t,[e.id])}),l.ALo(12,"hasPermission"),l._UZ(13,"clr-icon",24),l._uU(14),l.ALo(15,"translate"),l.qZA(),l.qZA(),l.qZA(),l.qZA()}if(2&e){var r=t.member;l.xp6(3),l.hij(" ",l.lcZ(4,5,"common.actions")," "),l.xp6(4),l.Q6J("routerLink",l.VKq(13,qn,r.id)),l.xp6(2),l.hij(" ",l.lcZ(10,7,"common.edit")," "),l.xp6(2),l.Q6J("disabled",!l.lcZ(12,9,l.DdM(15,Zn))),l.xp6(3),l.hij(" ",l.lcZ(15,11,"settings.remove-from-zone")," ")}}function Fn(e,t){if(1&e){var n=l.EpF();l.ynx(0),l.TgZ(1,"vdr-zone-member-list",25),l.NdJ("selectionChange",function(e){return l.CHM(n),l.oxw().selectedMemberIds=e}),l.YNc(2,Tn,22,22,"div",26),l.YNc(3,Cn,16,16,"div",27),l.qZA(),l.BQk()}if(2&e){var r=t.ngIf,i=l.oxw();l.xp6(1),l.Q6J("members",r.members)("selectedMemberIds",i.selectedMemberIds)}}var Ln=function(){return["CreateSettings","CreateZone"]};function kn(e,t){1&e&&l.GkF(0)}function Jn(e,t){if(1&e&&(l.ynx(0),l.YNc(1,kn,1,0,"ng-container",4),l.BQk()),2&e){var n=l.oxw();l.xp6(1),l.Q6J("ngTemplateOutlet",n.headerTemplate.templateRef)}}function _n(e,t){1&e&&l.GkF(0)}var Un=function(e){return{member:e}};function Pn(e,t){if(1&e&&(l.ynx(0),l.YNc(1,_n,1,0,"ng-container",7),l.BQk()),2&e){var n=l.oxw().item,r=l.oxw();l.xp6(1),l.Q6J("ngTemplateOutlet",r.controlsTemplate.templateRef)("ngTemplateOutletContext",l.VKq(2,Un,n))}}function In(e,t){if(1&e&&(l.TgZ(0,"td",5),l._uU(1),l.qZA(),l.TgZ(2,"td",5),l._uU(3),l.qZA(),l.TgZ(4,"td",5),l._UZ(5,"clr-icon"),l.qZA(),l.TgZ(6,"td",6),l.YNc(7,Pn,2,4,"ng-container",1),l.qZA()),2&e){var n=t.item,r=l.oxw();l.xp6(1),l.Oqu(n.code),l.xp6(2),l.Oqu(n.name),l.xp6(2),l.ekj("is-success",n.enabled),l.uIk("shape",n.enabled?"check":"times"),l.xp6(2),l.Q6J("ngIf",r.controlsTemplate)}}var wn=function(){function e(t){g(this,e),this.dataService=t,this.currentMembers=[],this.selectedMemberIds=[]}return v(e,[{key:"ngOnInit",value:function(){var e=this.currentMembers.map(function(e){return e.id});this.availableCountries$=this.dataService.settings.getCountries(999).mapStream(function(e){return e.countries.items}).pipe((0,f.U)(function(t){return t.filter(function(t){return!e.includes(t.id)})}))}},{key:"cancel",value:function(){this.resolveWith()}},{key:"add",value:function(){this.resolveWith(this.selectedMemberIds)}}]),e}();wn.\u0275fac=function(e){return new(e||wn)(l.Y36(d.DoR))},wn.\u0275cmp=l.Xpm({type:wn,selectors:[["vdr-add-country-to-zone-dialog"]],decls:4,vars:4,consts:[["vdrDialogTitle",""],[3,"members","selectedMemberIds","selectionChange"],["vdrDialogButtons",""],["type","button",1,"btn",3,"click"],["type","submit",1,"btn","btn-primary",3,"disabled","click"]],template:function(e,t){1&e&&(l.YNc(0,R,2,6,"ng-template",0),l.TgZ(1,"vdr-zone-member-list",1),l.NdJ("selectionChange",function(e){return t.selectedMemberIds=e}),l.ALo(2,"async"),l.qZA(),l.YNc(3,j,6,10,"ng-template",2)),2&e&&(l.xp6(1),l.Q6J("members",l.lcZ(2,2,t.availableCountries$))("selectedMemberIds",t.selectedMemberIds))},directives:function(){return[d.q6K,cr,d.nPI]},pipes:function(){return[D.Ov,N.X$]},styles:[""],changeDetection:0}),wn.ctorParameters=function(){return[{type:d.DoR}]};var Sn=function(e){c(n,e);var t=u(n);function n(e,r,i,o,a,c,l){var u;return g(this,n),(u=t.call(this,r,e,i,a)).changeDetector=o,u.dataService=a,u.formBuilder=c,u.notificationService=l,u.selectedRoles=[],u.selectedRolePermissions={},u.selectedChannelId=null,u.customFields=u.getCustomFieldConfig("Administrator"),u.detailForm=u.formBuilder.group({emailAddress:["",F.kI.required],firstName:["",F.kI.required],lastName:["",F.kI.required],password:[""],roles:[[]],customFields:u.formBuilder.group(u.customFields.reduce(function(e,t){return Object.assign(Object.assign({},e),s({},t.name,""))},{}))}),u}return v(n,[{key:"getAvailableChannels",value:function(){return Object.values(this.selectedRolePermissions)}},{key:"ngOnInit",value:function(){var e=this;this.init(),this.administrator$=this.entity$,this.allRoles$=this.dataService.administrator.getRoles(999).mapStream(function(e){return e.roles.items.filter(function(e){return e.code!==J.RO})}),this.dataService.client.userStatus().single$.subscribe(function(t){var n=t.userStatus;if(!n.permissions.includes(d.y3$.CreateAdministrator)&&!n.permissions.includes(d.y3$.UpdateAdministrator)){var r=e.detailForm.get("roles");r&&r.disable()}}),this.permissionDefinitions=this.serverConfigService.getPermissionDefinitions()}},{key:"ngOnDestroy",value:function(){this.destroy()}},{key:"rolesChanged",value:function(e){this.buildPermissionsMap()}},{key:"getPermissionsForSelectedChannel",value:function(){function e(e){return Object.entries(e).filter(function(e){var t=i(e,2);t[0];return t[1]}).map(function(e){var t=i(e,2),n=t[0];t[1];return n})}if(this.selectedChannelId&&this.selectedRolePermissions[this.selectedChannelId])return e(this.selectedRolePermissions[this.selectedChannelId].permissions);var t=Object.values(this.selectedRolePermissions);return 0<t.length?(this.selectedChannelId=t[0].channelId,e(t[0].permissions)):[]}},{key:"create",value:function(){var e=this,t=this.detailForm.value,n={emailAddress:t.emailAddress,firstName:t.firstName,lastName:t.lastName,password:t.password,customFields:t.customFields,roleIds:t.roles.map(function(e){return e.id})};this.dataService.administrator.createAdministrator(n).subscribe(function(t){e.notificationService.success((0,k.J)("common.notify-create-success"),{entity:"Administrator"}),e.detailForm.markAsPristine(),e.changeDetector.markForCheck(),e.router.navigate(["../",t.createAdministrator.id],{relativeTo:e.route})},function(t){e.notificationService.error((0,k.J)("common.notify-create-error"),{entity:"Administrator"})})}},{key:"save",value:function(){var e=this;this.administrator$.pipe((0,h.q)(1),(0,Z.zg)(function(t){var n=t.id,r=e.detailForm.value,i={id:n,emailAddress:r.emailAddress,firstName:r.firstName,lastName:r.lastName,password:r.password,customFields:r.customFields,roleIds:r.roles.map(function(e){return e.id})};return e.dataService.administrator.updateAdministrator(i)})).subscribe(function(t){e.notificationService.success((0,k.J)("common.notify-update-success"),{entity:"Administrator"}),e.detailForm.markAsPristine(),e.changeDetector.markForCheck()},function(t){e.notificationService.error((0,k.J)("common.notify-update-error"),{entity:"Administrator"})})}},{key:"setFormValues",value:function(e,t){this.detailForm.patchValue({emailAddress:e.emailAddress,firstName:e.firstName,lastName:e.lastName,roles:e.user.roles}),this.customFields.length&&this.setCustomFieldFormValues(this.customFields,this.detailForm.get(["customFields"]),e);var n=this.detailForm.get("password");n&&(e.id?n.setValidators([]):n.setValidators([F.kI.required])),this.buildPermissionsMap()}},{key:"buildPermissionsMap",value:function(){var e=this.detailForm.get("roles");if(e){var t,n=e.value,i=new Map,o=new Map,a=r(n);try{for(a.s();!(t=a.n()).done;){var s,c=t.value,l=r(c.channels);try{var u=function(){var e=s.value,t=i.get(e.id)||new Set;c.permissions.forEach(function(e){return t.add(e)}),i.set(e.id,t),o.set(e.id,e.code)};for(l.s();!(s=l.n()).done;)u()}catch(y){l.e(y)}finally{l.f()}}}catch(y){a.e(y)}finally{a.f()}this.selectedRolePermissions={};for(var d=0,m=Array.from(i.keys());d<m.length;d++){var p,g=m[d],f=i.get(g),v={},h=r(this.serverConfigService.getPermissionDefinitions());try{for(h.s();!(p=h.n()).done;){var Z=p.value;v[Z.name]=f.has(Z.name)}}catch(y){h.e(y)}finally{h.f()}this.selectedRolePermissions[g]={channelId:g,channelCode:o.get(g),permissions:v}}}}}]),n}(d.UT_);Sn.\u0275fac=function(e){return new(e||Sn)(l.Y36(L.F0),l.Y36(L.gz),l.Y36(d.iHG),l.Y36(l.sBO),l.Y36(d.DoR),l.Y36(F.qu),l.Y36(d.gqp))},Sn.\u0275cmp=l.Xpm({type:Sn,selectors:[["vdr-admin-detail"]],features:[l.qOj],decls:38,vars:53,consts:[[3,"entity"],["locationId","administrator-detail"],["class","btn btn-primary",3,"disabled","click",4,"ngIf","ngIfElse"],["updateButton",""],[1,"form",3,"formGroup"],["for","emailAddress",3,"label"],["id","emailAddress","type","text","formControlName","emailAddress",3,"readonly"],["for","firstName",3,"label"],["id","firstName","type","text","formControlName","firstName",3,"readonly"],["for","lastName",3,"label"],["id","lastName","type","text","formControlName","lastName",3,"readonly"],["for","password",3,"label",4,"ngIf"],["for","password",3,"label","readOnlyToggle",4,"ngIf"],["formGroupName","customFields",4,"ngIf"],["locationId","administrator-detail",3,"entity$","detailForm"],[1,"clr-control-label"],["formControlName","roles","bindLabel","description",3,"items","multiple","hideSelected","change"],["role","tablist",1,"nav"],["role","presentation","class","nav-item",4,"ngFor","ngForOf"],[3,"activePermissions","permissionDefinitions","readonly"],[1,"btn","btn-primary",3,"disabled","click"],["class","btn btn-primary",3,"disabled","click",4,"vdrIfPermissions"],["for","password",3,"label"],["id","password","type","password","formControlName","password"],["for","password",3,"label","readOnlyToggle"],["formGroupName","customFields"],["entityName","Administrator",3,"customFields","customFieldsFormGroup","readonly"],["role","presentation",1,"nav-item"],["type","button",1,"btn","btn-link","nav-link",3,"id","click"]],template:function(e,t){if(1&e&&(l.TgZ(0,"vdr-action-bar"),l.TgZ(1,"vdr-ab-left"),l._UZ(2,"vdr-entity-info",0),l.ALo(3,"async"),l.qZA(),l.TgZ(4,"vdr-ab-right"),l._UZ(5,"vdr-action-bar-items",1),l.YNc(6,z,3,4,"button",2),l.ALo(7,"async"),l.YNc(8,E,1,1,"ng-template",null,3,l.W1O),l.qZA(),l.qZA(),l.TgZ(10,"form",4),l.TgZ(11,"vdr-form-field",5),l.ALo(12,"translate"),l._UZ(13,"input",6),l.ALo(14,"hasPermission"),l.qZA(),l.TgZ(15,"vdr-form-field",7),l.ALo(16,"translate"),l._UZ(17,"input",8),l.ALo(18,"hasPermission"),l.qZA(),l.TgZ(19,"vdr-form-field",9),l.ALo(20,"translate"),l._UZ(21,"input",10),l.ALo(22,"hasPermission"),l.qZA(),l.YNc(23,G,3,3,"vdr-form-field",11),l.ALo(24,"async"),l.YNc(25,B,3,4,"vdr-form-field",12),l.ALo(26,"async"),l.ALo(27,"hasPermission"),l.YNc(28,W,6,9,"section",13),l._UZ(29,"vdr-custom-detail-component-host",14),l.TgZ(30,"label",15),l._uU(31),l.ALo(32,"translate"),l.qZA(),l.TgZ(33,"ng-select",16),l.NdJ("change",function(e){return t.rolesChanged(e)}),l.ALo(34,"async"),l.qZA(),l.TgZ(35,"ul",17),l.YNc(36,K,5,9,"li",18),l.qZA(),l._UZ(37,"vdr-permission-grid",19),l.qZA()),2&e){var n=l.MAs(9);l.xp6(2),l.Q6J("entity",l.lcZ(3,23,t.entity$)),l.xp6(4),l.Q6J("ngIf",l.lcZ(7,25,t.isNew$))("ngIfElse",n),l.xp6(4),l.Q6J("formGroup",t.detailForm),l.xp6(1),l.Q6J("label",l.lcZ(12,27,"settings.email-address")),l.xp6(2),l.Q6J("readonly",!l.lcZ(14,29,l.DdM(49,V))),l.xp6(2),l.Q6J("label",l.lcZ(16,31,"settings.first-name")),l.xp6(2),l.Q6J("readonly",!l.lcZ(18,33,l.DdM(50,V))),l.xp6(2),l.Q6J("label",l.lcZ(20,35,"settings.last-name")),l.xp6(2),l.Q6J("readonly",!l.lcZ(22,37,l.DdM(51,V))),l.xp6(2),l.Q6J("ngIf",l.lcZ(24,39,t.isNew$)),l.xp6(2),l.Q6J("ngIf",!l.lcZ(26,41,t.isNew$)&&l.lcZ(27,43,l.DdM(52,V))),l.xp6(3),l.Q6J("ngIf",t.customFields.length),l.xp6(1),l.Q6J("entity$",t.entity$)("detailForm",t.detailForm),l.xp6(2),l.Oqu(l.lcZ(32,45,"settings.roles")),l.xp6(2),l.Q6J("items",l.lcZ(34,47,t.allRoles$))("multiple",!0)("hideSelected",!0),l.xp6(3),l.Q6J("ngForOf",t.getAvailableChannels()),l.xp6(1),l.Q6J("activePermissions",t.getPermissionsForSelectedChannel())("permissionDefinitions",t.permissionDefinitions)("readonly",!0)}},directives:function(){return[d.KkL,d.BND,d.Vqt,d.mz,d.WWO,D.O5,F._Y,F.JL,F.sg,d.hgI,d.y_K,F.Fj,F.JJ,F.u,d.CWh,Q.MgK,M.w9,D.sg,jn,d.HAh,F.x0,d.yc0]},pipes:function(){return[D.Ov,N.X$,d.j$k,d.E6B]},styles:[""],changeDetection:0}),Sn.ctorParameters=function(){return[{type:L.F0},{type:L.gz},{type:d.iHG},{type:l.sBO},{type:d.DoR},{type:F.qu},{type:d.gqp}]};var On=function(e){c(r,e);var n=u(r);function r(e,i,o,a,s){var c,l;return g(this,r),(l=n.call(this,i,o)).dataService=e,l.modalService=a,l.notificationService=s,t((c=m(l),p(r.prototype)),"setQueryFn",c).call(c,function(){var e;return(e=l.dataService.administrator).getAdministrators.apply(e,arguments)},function(e){return e.administrators}),l}return v(r,[{key:"deleteAdministrator",value:function(e){var t=this;return this.modalService.dialog({title:(0,k.J)("catalog.confirm-delete-administrator"),body:"".concat(e.firstName," ").concat(e.lastName),buttons:[{type:"secondary",label:(0,k.J)("common.cancel")},{type:"danger",label:(0,k.J)("common.delete"),returnValue:!0}]}).pipe((0,y.w)(function(n){return n?t.dataService.administrator.deleteAdministrator(e.id):_.E})).subscribe(function(){t.notificationService.success((0,k.J)("common.notify-delete-success"),{entity:"Administrator"}),t.refresh()},function(e){t.notificationService.error((0,k.J)("common.notify-delete-error"),{entity:"Administrator"})})}}]),r}(d.t7C);On.\u0275fac=function(e){return new(e||On)(l.Y36(d.DoR),l.Y36(L.F0),l.Y36(L.gz),l.Y36(d.Z7U),l.Y36(d.gqp))},On.\u0275cmp=l.Xpm({type:On,selectors:[["vdr-administrator-list"]],features:[l.qOj],decls:21,vars:22,consts:[["locationId","administrator-list"],["class","btn btn-primary",3,"routerLink",4,"vdrIfPermissions"],[3,"items","itemsPerPage","totalItems","currentPage","pageChange","itemsPerPageChange"],[1,"btn","btn-primary",3,"routerLink"],["shape","plus"],[1,"left","align-middle"],[1,"right","align-middle"],["iconShape","edit",3,"label","linkTo"],["type","button","vdrDropdownTrigger","",1,"btn","btn-link","btn-sm"],["shape","caret down"],["vdrPosition","bottom-right"],["type","button","vdrDropdownItem","",1,"delete-button",3,"disabled","click"],["shape","trash",1,"is-danger"]],template:function(e,t){1&e&&(l.TgZ(0,"vdr-action-bar"),l.TgZ(1,"vdr-ab-right"),l._UZ(2,"vdr-action-bar-items",0),l.YNc(3,ee,4,5,"a",1),l.qZA(),l.qZA(),l.TgZ(4,"vdr-data-table",2),l.NdJ("pageChange",function(e){return t.setPageNumber(e)})("itemsPerPageChange",function(e){return t.setItemsPerPage(e)}),l.ALo(5,"async"),l.ALo(6,"async"),l.ALo(7,"async"),l.ALo(8,"async"),l.TgZ(9,"vdr-dt-column"),l._uU(10),l.ALo(11,"translate"),l.qZA(),l.TgZ(12,"vdr-dt-column"),l._uU(13),l.ALo(14,"translate"),l.qZA(),l.TgZ(15,"vdr-dt-column"),l._uU(16),l.ALo(17,"translate"),l.qZA(),l._UZ(18,"vdr-dt-column"),l._UZ(19,"vdr-dt-column"),l.YNc(20,ne,21,18,"ng-template"),l.qZA()),2&e&&(l.xp6(3),l.Q6J("vdrIfPermissions","CreateAdministrator"),l.xp6(1),l.Q6J("items",l.lcZ(5,8,t.items$))("itemsPerPage",l.lcZ(6,10,t.itemsPerPage$))("totalItems",l.lcZ(7,12,t.totalItems$))("currentPage",l.lcZ(8,14,t.currentPage$)),l.xp6(6),l.Oqu(l.lcZ(11,16,"settings.first-name")),l.xp6(3),l.Oqu(l.lcZ(14,18,"settings.last-name")),l.xp6(3),l.Oqu(l.lcZ(17,20,"settings.email-address")))},directives:[d.KkL,d.mz,d.WWO,d.HAh,d.Qj_,d.Egy,L.yS,Q.qvL,d.v_8,d.JOL,d.UaT,d.N9E,d.HH4],pipes:[D.Ov,N.X$,d.j$k],styles:[""]}),On.ctorParameters=function(){return[{type:d.DoR},{type:L.F0},{type:L.gz},{type:d.Z7U},{type:d.gqp}]};var Dn=function(e){c(n,e);var t=u(n);function n(e,r,i,o,a,c,l){var u;return g(this,n),(u=t.call(this,r,e,i,a)).serverConfigService=i,u.changeDetector=o,u.dataService=a,u.formBuilder=c,u.notificationService=l,u.currencyCodes=Object.values(d.NEm),u.updatePermission=[d.y3$.SuperAdmin,d.y3$.UpdateChannel,d.y3$.CreateChannel],u.customFields=u.getCustomFieldConfig("Channel"),u.detailForm=u.formBuilder.group({code:["",F.kI.required],token:["",F.kI.required],pricesIncludeTax:[!1],currencyCode:[""],defaultShippingZoneId:["",F.kI.required],defaultLanguageCode:[],defaultTaxZoneId:["",F.kI.required],customFields:u.formBuilder.group(u.customFields.reduce(function(e,t){return Object.assign(Object.assign({},e),s({},t.name,""))},{}))}),u}return v(n,[{key:"ngOnInit",value:function(){this.init(),this.zones$=this.dataService.settings.getZones().mapSingle(function(e){return e.zones}),this.availableLanguageCodes$=this.serverConfigService.getAvailableLanguages()}},{key:"ngOnDestroy",value:function(){this.destroy()}},{key:"saveButtonEnabled",value:function(){return this.detailForm.dirty&&this.detailForm.valid}},{key:"create",value:function(){var e=this;if(this.detailForm.dirty){var t=this.detailForm.value,n={code:t.code,token:t.token,defaultLanguageCode:t.defaultLanguageCode,pricesIncludeTax:t.pricesIncludeTax,currencyCode:t.currencyCode,defaultShippingZoneId:t.defaultShippingZoneId,defaultTaxZoneId:t.defaultTaxZoneId,customFields:t.customFields};this.dataService.settings.createChannel(n).pipe((0,Z.zg)(function(t){var n=t.createChannel;return e.dataService.auth.currentUser().single$.pipe((0,f.U)(function(e){return{me:e.me,createChannel:n}}))}),(0,Z.zg)(function(t){var n=t.me,r=t.createChannel;return e.dataService.client.updateUserChannels(n.channels).pipe((0,f.U)(function(){return r}))})).subscribe(function(t){switch(t.__typename){case"Channel":e.notificationService.success((0,k.J)("common.notify-create-success"),{entity:"Channel"}),e.detailForm.markAsPristine(),e.changeDetector.markForCheck(),e.router.navigate(["../",t.id],{relativeTo:e.route});break;case"LanguageNotAvailableError":e.notificationService.error(t.message)}})}}},{key:"save",value:function(){var e=this;if(this.detailForm.dirty){var t=this.detailForm.value;this.entity$.pipe((0,h.q)(1),(0,Z.zg)(function(n){var r={id:n.id,code:t.code,token:t.token,pricesIncludeTax:t.pricesIncludeTax,currencyCode:t.currencyCode,defaultShippingZoneId:t.defaultShippingZoneId,defaultLanguageCode:t.defaultLanguageCode,defaultTaxZoneId:t.defaultTaxZoneId,customFields:t.customFields};return e.dataService.settings.updateChannel(r)})).subscribe(function(t){var n=t.updateChannel;switch(n.__typename){case"Channel":e.notificationService.success((0,k.J)("common.notify-update-success"),{entity:"Channel"}),e.detailForm.markAsPristine(),e.changeDetector.markForCheck();break;case"LanguageNotAvailableError":e.notificationService.error(n.message)}})}}},{key:"setFormValues",value:function(e,t){if(this.detailForm.patchValue({code:e.code,token:e.token||this.generateToken(),pricesIncludeTax:e.pricesIncludeTax,currencyCode:e.currencyCode,defaultShippingZoneId:e.defaultShippingZone?e.defaultShippingZone.id:"",defaultLanguageCode:e.defaultLanguageCode,defaultTaxZoneId:e.defaultTaxZone?e.defaultTaxZone.id:""}),this.customFields.length&&this.setCustomFieldFormValues(this.customFields,this.detailForm.get(["customFields"]),e),e.code===J.z$){var n=this.detailForm.get("code");n&&n.disable()}}},{key:"generateToken",value:function(){var e=function(){return Math.random().toString(36).substr(3,10)};return"".concat(e()).concat(e())}}]),n}(d.UT_);Dn.\u0275fac=function(e){return new(e||Dn)(l.Y36(L.F0),l.Y36(L.gz),l.Y36(d.iHG),l.Y36(l.sBO),l.Y36(d.DoR),l.Y36(F.qu),l.Y36(d.gqp))},Dn.\u0275cmp=l.Xpm({type:Dn,selectors:[["vdr-channel-detail"]],features:[l.qOj],decls:53,vars:65,consts:[[3,"entity"],["locationId","channel-detail"],["class","btn btn-primary",3,"disabled","click",4,"ngIf","ngIfElse"],["updateButton",""],[1,"form",3,"formGroup"],["for","code",3,"label"],["id","code","type","text","formControlName","code",3,"readonly"],["for","token",3,"label"],["id","token","type","text","formControlName","token",3,"readonly"],["for","defaultTaxZoneId",3,"label"],["clrSelect","","name","currencyCode","formControlName","currencyCode",3,"vdrDisabled"],[3,"value",4,"ngFor","ngForOf"],["for","defaultLanguage",3,"label"],["clrSelect","","name","defaultLanguageCode","formControlName","defaultLanguageCode",3,"vdrDisabled"],["for","pricesIncludeTax",3,"label"],["type","checkbox","clrToggle","","id","pricesIncludeTax","formControlName","pricesIncludeTax",3,"vdrDisabled"],["clrSelect","","name","defaultTaxZoneId","formControlName","defaultTaxZoneId",3,"vdrDisabled"],["selected","","value","",2,"display","none"],["clrAlertType","danger",3,"clrAlertClosable",4,"ngIf"],["for","defaultShippingZoneId",3,"label"],["clrSelect","","name","defaultShippingZoneId","formControlName","defaultShippingZoneId",3,"vdrDisabled"],["clrAlertType","warning",3,"clrAlertClosable",4,"ngIf"],["formGroupName","customFields",4,"ngIf"],["locationId","channel-detail",3,"entity$","detailForm"],[1,"btn","btn-primary",3,"disabled","click"],["class","btn btn-primary",3,"disabled","click",4,"vdrIfPermissions"],[3,"value"],["clrAlertType","danger",3,"clrAlertClosable"],[1,"alert-text"],["clrAlertType","warning",3,"clrAlertClosable"],["formGroupName","customFields"],["entityName","Channel",3,"customFields","customFieldsFormGroup","readonly"]],template:function(e,t){if(1&e&&(l.TgZ(0,"vdr-action-bar"),l.TgZ(1,"vdr-ab-left"),l._UZ(2,"vdr-entity-info",0),l.ALo(3,"async"),l.qZA(),l.TgZ(4,"vdr-ab-right"),l._UZ(5,"vdr-action-bar-items",1),l.YNc(6,re,3,4,"button",2),l.ALo(7,"async"),l.YNc(8,ae,1,2,"ng-template",null,3,l.W1O),l.qZA(),l.qZA(),l.TgZ(10,"form",4),l.TgZ(11,"vdr-form-field",5),l.ALo(12,"translate"),l._UZ(13,"input",6),l.ALo(14,"hasPermission"),l.qZA(),l.TgZ(15,"vdr-form-field",7),l.ALo(16,"translate"),l._UZ(17,"input",8),l.ALo(18,"hasPermission"),l.qZA(),l.TgZ(19,"vdr-form-field",9),l.ALo(20,"translate"),l.TgZ(21,"select",10),l.ALo(22,"hasPermission"),l.YNc(23,se,3,4,"option",11),l.qZA(),l.qZA(),l.TgZ(24,"vdr-form-field",12),l.ALo(25,"translate"),l.TgZ(26,"select",13),l.ALo(27,"hasPermission"),l.YNc(28,ce,4,7,"option",11),l.ALo(29,"async"),l.qZA(),l.qZA(),l.TgZ(30,"vdr-form-field",14),l.ALo(31,"translate"),l.TgZ(32,"clr-toggle-wrapper"),l._UZ(33,"input",15),l.ALo(34,"hasPermission"),l.qZA(),l.qZA(),l.TgZ(35,"vdr-form-field",9),l.ALo(36,"translate"),l.TgZ(37,"select",16),l.ALo(38,"hasPermission"),l._UZ(39,"option",17),l.YNc(40,le,2,2,"option",11),l.ALo(41,"async"),l.qZA(),l.qZA(),l.YNc(42,ue,5,4,"clr-alert",18),l.TgZ(43,"vdr-form-field",19),l.ALo(44,"translate"),l.TgZ(45,"select",20),l.ALo(46,"hasPermission"),l._UZ(47,"option",17),l.YNc(48,de,2,2,"option",11),l.ALo(49,"async"),l.qZA(),l.qZA(),l.YNc(50,me,5,4,"clr-alert",21),l.YNc(51,pe,6,8,"section",22),l._UZ(52,"vdr-custom-detail-component-host",23),l.qZA()),2&e){var n=l.MAs(9);l.xp6(2),l.Q6J("entity",l.lcZ(3,27,t.entity$)),l.xp6(4),l.Q6J("ngIf",l.lcZ(7,29,t.isNew$))("ngIfElse",n),l.xp6(4),l.Q6J("formGroup",t.detailForm),l.xp6(1),l.Q6J("label",l.lcZ(12,31,"common.code")),l.xp6(2),l.Q6J("readonly",!l.lcZ(14,33,t.updatePermission)),l.xp6(2),l.Q6J("label",l.lcZ(16,35,"settings.channel-token")),l.xp6(2),l.Q6J("readonly",!l.lcZ(18,37,t.updatePermission)),l.xp6(2),l.Q6J("label",l.lcZ(20,39,"settings.currency")),l.xp6(2),l.Q6J("vdrDisabled",!l.lcZ(22,41,t.updatePermission)),l.xp6(2),l.Q6J("ngForOf",t.currencyCodes),l.xp6(1),l.Q6J("label",l.lcZ(25,43,"common.default-language")),l.xp6(2),l.Q6J("vdrDisabled",!l.lcZ(27,45,t.updatePermission)),l.xp6(2),l.Q6J("ngForOf",l.lcZ(29,47,t.availableLanguageCodes$)),l.xp6(2),l.Q6J("label",l.lcZ(31,49,"settings.prices-include-tax")),l.xp6(3),l.Q6J("vdrDisabled",!l.lcZ(34,51,t.updatePermission)),l.xp6(2),l.Q6J("label",l.lcZ(36,53,"settings.default-tax-zone")),l.xp6(2),l.Q6J("vdrDisabled",!l.lcZ(38,55,t.updatePermission)),l.xp6(3),l.Q6J("ngForOf",l.lcZ(41,57,t.zones$)),l.xp6(2),l.Q6J("ngIf",t.detailForm.value.code&&!t.detailForm.value.defaultTaxZoneId),l.xp6(1),l.Q6J("label",l.lcZ(44,59,"settings.default-shipping-zone")),l.xp6(2),l.Q6J("vdrDisabled",!l.lcZ(46,61,t.updatePermission)),l.xp6(3),l.Q6J("ngForOf",l.lcZ(49,63,t.zones$)),l.xp6(2),l.Q6J("ngIf",t.detailForm.value.code&&!t.detailForm.value.defaultShippingZoneId),l.xp6(1),l.Q6J("ngIf",t.customFields.length),l.xp6(1),l.Q6J("entity$",t.entity$)("detailForm",t.detailForm)}},directives:[d.KkL,d.BND,d.Vqt,d.mz,d.WWO,D.O5,F._Y,F.JL,F.sg,d.hgI,d.y_K,F.Fj,F.JJ,F.u,F.EJ,Q.otW,d.x3T,D.sg,Q.PEh,F.Wl,Q.KKC,F.YN,F.Kr,d.CWh,d.HAh,Q.TIm,Q.CyW,Q.I9z,F.x0,Q.MgK,d.yc0],pipes:[D.Ov,N.X$,d.j$k,d.uDH,d.Bm,D.gd],styles:["clr-alert[_ngcontent-%COMP%]{max-width:30rem;margin-bottom:12px}"],changeDetection:0}),Dn.ctorParameters=function(){return[{type:L.F0},{type:L.gz},{type:d.iHG},{type:l.sBO},{type:d.DoR},{type:F.qu},{type:d.gqp}]};var Nn=function(){function e(t,n,r){var i=this;g(this,e),this.dataService=t,this.modalService=n,this.notificationService=r,this.refresh$=new U.xQ,this.channels$=this.refresh$.pipe((0,b.O)(1),(0,y.w)(function(){return i.dataService.settings.getChannels().mapStream(function(e){return e.channels})}))}return v(e,[{key:"isDefaultChannel",value:function(e){return e===J.z$}},{key:"deleteChannel",value:function(e){var t=this;this.modalService.dialog({title:(0,k.J)("catalog.confirm-delete-channel"),buttons:[{type:"secondary",label:(0,k.J)("common.cancel")},{type:"danger",label:(0,k.J)("common.delete"),returnValue:!0}]}).pipe((0,y.w)(function(n){return n?t.dataService.settings.deleteChannel(e):_.E}),(0,Z.zg)(function(){return t.dataService.auth.currentUser().single$}),(0,Z.zg)(function(e){return t.dataService.client.updateUserChannels(e.me.channels)})).subscribe(function(){t.notificationService.success((0,k.J)("common.notify-delete-success"),{entity:"Channel"}),t.refresh$.next(1)},function(e){t.notificationService.error((0,k.J)("common.notify-delete-error"),{entity:"Channel"})})}}]),e}();Nn.\u0275fac=function(e){return new(e||Nn)(l.Y36(d.DoR),l.Y36(d.Z7U),l.Y36(d.gqp))},Nn.\u0275cmp=l.Xpm({type:Nn,selectors:[["vdr-channel-list"]],decls:12,vars:8,consts:[["locationId","channel-list"],["class","btn btn-primary",3,"routerLink",4,"vdrIfPermissions"],[3,"items"],[1,"btn","btn-primary",3,"routerLink"],["shape","plus"],[1,"left","align-middle"],[3,"channelCode"],[1,"right","align-middle"],["iconShape","edit",3,"label","linkTo"],["type","button","vdrDropdownTrigger","",1,"btn","btn-link","btn-sm",3,"disabled"],["shape","caret down"],["vdrPosition","bottom-right"],["type","button","vdrDropdownItem","",1,"delete-button",3,"disabled","click"],["shape","trash",1,"is-danger"]],template:function(e,t){1&e&&(l.TgZ(0,"vdr-action-bar"),l.TgZ(1,"vdr-ab-right"),l._UZ(2,"vdr-action-bar-items",0),l.YNc(3,ge,4,5,"a",1),l.qZA(),l.qZA(),l.TgZ(4,"vdr-data-table",2),l.ALo(5,"async"),l.TgZ(6,"vdr-dt-column"),l._uU(7),l.ALo(8,"translate"),l.qZA(),l._UZ(9,"vdr-dt-column"),l._UZ(10,"vdr-dt-column"),l.YNc(11,ve,20,23,"ng-template"),l.qZA()),2&e&&(l.xp6(3),l.Q6J("vdrIfPermissions",l.DdM(7,he)),l.xp6(1),l.Q6J("items",l.lcZ(5,3,t.channels$)),l.xp6(3),l.Oqu(l.lcZ(8,5,"common.code")))},directives:[d.KkL,d.mz,d.WWO,d.HAh,d.Qj_,d.Egy,L.yS,Q.qvL,d.nIZ,d.v_8,d.JOL,d.UaT,d.N9E,d.HH4],pipes:[D.Ov,N.X$,d.E6B,d.j$k],styles:[""],changeDetection:0}),Nn.ctorParameters=function(){return[{type:d.DoR},{type:d.Z7U},{type:d.gqp}]};var Qn=function(e){c(n,e);var t=u(n);function n(e,r,i,o,a,c,l){var u;return g(this,n),(u=t.call(this,r,e,i,a)).changeDetector=o,u.dataService=a,u.formBuilder=c,u.notificationService=l,u.updatePermission=[d.y3$.UpdateSettings,d.y3$.UpdateCountry],u.customFields=u.getCustomFieldConfig("Country"),u.detailForm=u.formBuilder.group({code:["",F.kI.required],name:["",F.kI.required],enabled:[!0],customFields:u.formBuilder.group(u.customFields.reduce(function(e,t){return Object.assign(Object.assign({},e),s({},t.name,""))},{}))}),u}return v(n,[{key:"ngOnInit",value:function(){this.init(),this.country$=this.entity$}},{key:"ngOnDestroy",value:function(){this.destroy()}},{key:"create",value:function(){var e=this;!this.detailForm.dirty||(0,P.aj)(this.country$,this.languageCode$).pipe((0,h.q)(1),(0,Z.zg)(function(t){var n=i(t,2),r=n[0],o=n[1],a=e.detailForm.value,s=(0,d.iSy)({translatable:r,updatedFields:a,customFieldConfig:e.customFields,languageCode:o,defaultTranslation:{name:a.name,languageCode:o}});return e.dataService.settings.createCountry(s)})).subscribe(function(t){e.notificationService.success((0,k.J)("common.notify-create-success"),{entity:"Country"}),e.detailForm.markAsPristine(),e.changeDetector.markForCheck(),e.router.navigate(["../",t.createCountry.id],{relativeTo:e.route})},function(t){e.notificationService.error((0,k.J)("common.notify-create-error"),{entity:"Country"})})}},{key:"save",value:function(){var e=this;(0,P.aj)(this.country$,this.languageCode$).pipe((0,h.q)(1),(0,Z.zg)(function(t){var n=i(t,2),r=n[0],o=n[1],a=e.detailForm.value,s=(0,d.iSy)({translatable:r,updatedFields:a,customFieldConfig:e.customFields,languageCode:o,defaultTranslation:{name:a.name,languageCode:o}});return e.dataService.settings.updateCountry(s)})).subscribe(function(t){e.notificationService.success((0,k.J)("common.notify-update-success"),{entity:"Country"}),e.detailForm.markAsPristine(),e.changeDetector.markForCheck()},function(t){e.notificationService.error((0,k.J)("common.notify-update-error"),{entity:"Country"})})}},{key:"setFormValues",value:function(e,t){var n=(0,d.ZIM)(e,t);this.detailForm.patchValue({code:e.code,name:n?n.name:"",enabled:e.enabled}),this.customFields.length&&this.setCustomFieldFormValues(this.customFields,this.detailForm.get(["customFields"]),e,n)}}]),n}(d.UT_);Qn.\u0275fac=function(e){return new(e||Qn)(l.Y36(L.F0),l.Y36(L.gz),l.Y36(d.iHG),l.Y36(l.sBO),l.Y36(d.DoR),l.Y36(F.qu),l.Y36(d.gqp))},Qn.\u0275cmp=l.Xpm({type:Qn,selectors:[["vdr-country-detail"]],features:[l.qOj],decls:30,vars:38,consts:[[3,"entity"],[3,"disabled","availableLanguageCodes","currentLanguageCode","languageCodeChange"],["locationId","country-detail"],["class","btn btn-primary",3,"disabled","click",4,"ngIf","ngIfElse"],["updateButton",""],[1,"form",3,"formGroup"],["for","code",3,"label"],["id","code","type","text","formControlName","code",3,"readonly"],["for","name",3,"label"],["id","name","type","text","formControlName","name",3,"readonly"],["for","enabled",3,"label"],["type","checkbox","clrToggle","","id","enabled","formControlName","enabled",3,"vdrDisabled"],["formGroupName","customFields",4,"ngIf"],["locationId","country-detail",3,"entity$","detailForm"],[1,"btn","btn-primary",3,"disabled","click"],["class","btn btn-primary",3,"disabled","click",4,"vdrIfPermissions"],["formGroupName","customFields"],["entityName","Country",3,"customFields","customFieldsFormGroup","readonly"]],template:function(e,t){if(1&e&&(l.TgZ(0,"vdr-action-bar"),l.TgZ(1,"vdr-ab-left"),l._UZ(2,"vdr-entity-info",0),l.ALo(3,"async"),l.TgZ(4,"vdr-language-selector",1),l.NdJ("languageCodeChange",function(e){return t.setLanguage(e)}),l.ALo(5,"async"),l.ALo(6,"async"),l.ALo(7,"async"),l.qZA(),l.qZA(),l.TgZ(8,"vdr-ab-right"),l._UZ(9,"vdr-action-bar-items",2),l.YNc(10,Ze,3,4,"button",3),l.ALo(11,"async"),l.YNc(12,be,1,1,"ng-template",null,4,l.W1O),l.qZA(),l.qZA(),l.TgZ(14,"form",5),l.TgZ(15,"vdr-form-field",6),l.ALo(16,"translate"),l._UZ(17,"input",7),l.ALo(18,"hasPermission"),l.qZA(),l.TgZ(19,"vdr-form-field",8),l.ALo(20,"translate"),l._UZ(21,"input",9),l.ALo(22,"hasPermission"),l.qZA(),l.TgZ(23,"vdr-form-field",10),l.ALo(24,"translate"),l.TgZ(25,"clr-toggle-wrapper"),l._UZ(26,"input",11),l.ALo(27,"hasPermission"),l.qZA(),l.qZA(),l.YNc(28,Ae,6,8,"section",12),l._UZ(29,"vdr-custom-detail-component-host",13),l.qZA()),2&e){var n=l.MAs(13);l.xp6(2),l.Q6J("entity",l.lcZ(3,16,t.entity$)),l.xp6(2),l.Q6J("disabled",l.lcZ(5,18,t.isNew$))("availableLanguageCodes",l.lcZ(6,20,t.availableLanguages$))("currentLanguageCode",l.lcZ(7,22,t.languageCode$)),l.xp6(6),l.Q6J("ngIf",l.lcZ(11,24,t.isNew$))("ngIfElse",n),l.xp6(4),l.Q6J("formGroup",t.detailForm),l.xp6(1),l.Q6J("label",l.lcZ(16,26,"common.code")),l.xp6(2),l.Q6J("readonly",!l.lcZ(18,28,t.updatePermission)),l.xp6(2),l.Q6J("label",l.lcZ(20,30,"common.name")),l.xp6(2),l.Q6J("readonly",!l.lcZ(22,32,t.updatePermission)),l.xp6(2),l.Q6J("label",l.lcZ(24,34,"common.enabled")),l.xp6(3),l.Q6J("vdrDisabled",!l.lcZ(27,36,t.updatePermission)),l.xp6(2),l.Q6J("ngIf",t.customFields.length),l.xp6(1),l.Q6J("entity$",t.entity$)("detailForm",t.detailForm)}},directives:[d.KkL,d.BND,d.Vqt,d.SdP,d.mz,d.WWO,D.O5,F._Y,F.JL,F.sg,d.hgI,d.y_K,F.Fj,F.JJ,F.u,Q.PEh,F.Wl,Q.KKC,d.x3T,d.CWh,d.HAh,F.x0,Q.MgK,d.yc0],pipes:[D.Ov,N.X$,d.j$k],styles:[""],changeDetection:0}),Qn.ctorParameters=function(){return[{type:L.F0},{type:L.gz},{type:d.iHG},{type:l.sBO},{type:d.DoR},{type:F.qu},{type:d.gqp}]};var Mn=function(){function e(t,n,r,i){g(this,e),this.dataService=t,this.notificationService=n,this.modalService=r,this.serverConfigService=i,this.searchTerm=new F.NI(""),this.countries=[],this.destroy$=new U.xQ,this.refresh$=new U.xQ}return v(e,[{key:"ngOnInit",value:function(){var e=this;this.contentLanguage$=this.dataService.client.uiState().mapStream(function(e){return e.uiState.contentLanguage});var t=(0,P.aj)(this.contentLanguage$,this.searchTerm.valueChanges.pipe((0,b.O)(null))).pipe((0,f.U)(function(e){var t=i(e,2);t[0];return t[1]}),(0,y.w)(function(t){return e.dataService.settings.getCountries(999,0,t).single$}),(0,A.b)(function(t){e.countries=t.countries.items}),(0,f.U)(function(e){return e.countries.items}));this.zones$=this.dataService.settings.getZones().mapStream(function(e){return e.zones}),this.countriesWithZones$=(0,P.aj)(t,this.zones$).pipe((0,f.U)(function(e){var t=i(e,2),n=t[0],r=t[1];return n.map(function(e){return Object.assign(Object.assign({},e),{zones:r.filter(function(t){return!!t.members.find(function(t){return t.id===e.id})})})})})),this.availableLanguages$=this.serverConfigService.getAvailableLanguages()}},{key:"ngOnDestroy",value:function(){this.destroy$.next(void 0),this.destroy$.complete()}},{key:"setLanguage",value:function(e){this.dataService.client.setContentLanguage(e).subscribe()}},{key:"deleteCountry",value:function(e){var t=this;this.modalService.dialog({title:(0,k.J)("catalog.confirm-delete-country"),buttons:[{type:"secondary",label:(0,k.J)("common.cancel")},{type:"danger",label:(0,k.J)("common.delete"),returnValue:!0}]}).pipe((0,y.w)(function(n){return n?t.dataService.settings.deleteCountry(e):_.E})).subscribe(function(e){e.deleteCountry.result===d.PcR.DELETED?(t.notificationService.success((0,k.J)("common.notify-delete-success"),{entity:"Country"}),t.dataService.settings.getCountries(999,0).single$.subscribe()):t.notificationService.error(e.deleteCountry.message||"")},function(e){t.notificationService.error((0,k.J)("common.notify-delete-error"),{entity:"Country"})})}},{key:"isZone",value:function(e){return e.hasOwnProperty("id")}}]),e}();Mn.\u0275fac=function(e){return new(e||Mn)(l.Y36(d.DoR),l.Y36(d.gqp),l.Y36(d.Z7U),l.Y36(d.iHG))},Mn.\u0275cmp=l.Xpm({type:Mn,selectors:[["vdr-country-list"]],decls:28,vars:28,consts:[["type","text","name","searchTerm",1,"search-input",3,"formControl","placeholder"],[3,"availableLanguageCodes","currentLanguageCode","languageCodeChange"],["locationId","country-list"],["class","btn btn-primary",3,"routerLink",4,"vdrIfPermissions"],[3,"items"],[3,"expand"],[1,"btn","btn-primary",3,"routerLink"],["shape","plus"],[1,"left","align-middle"],[3,"routerLink",4,"ngFor","ngForOf"],[1,"right","align-middle"],["iconShape","edit",3,"label","linkTo"],["type","button","vdrDropdownTrigger","",1,"btn","btn-link","btn-sm"],["shape","caret down"],["vdrPosition","bottom-right"],["type","button","vdrDropdownItem","",1,"delete-button",3,"disabled","click"],["shape","trash",1,"is-danger"],[3,"routerLink"],[3,"colorFrom"]],template:function(e,t){1&e&&(l.TgZ(0,"vdr-action-bar"),l.TgZ(1,"vdr-ab-left"),l._UZ(2,"input",0),l.ALo(3,"translate"),l.TgZ(4,"div"),l.TgZ(5,"vdr-language-selector",1),l.NdJ("languageCodeChange",function(e){return t.setLanguage(e)}),l.ALo(6,"async"),l.ALo(7,"async"),l.qZA(),l.qZA(),l.qZA(),l.TgZ(8,"vdr-ab-right"),l._UZ(9,"vdr-action-bar-items",2),l.YNc(10,xe,4,5,"a",3),l.qZA(),l.qZA(),l.TgZ(11,"vdr-data-table",4),l.ALo(12,"async"),l.TgZ(13,"vdr-dt-column"),l._uU(14),l.ALo(15,"translate"),l.qZA(),l.TgZ(16,"vdr-dt-column",5),l._uU(17),l.ALo(18,"translate"),l.qZA(),l.TgZ(19,"vdr-dt-column"),l._uU(20),l.ALo(21,"translate"),l.qZA(),l.TgZ(22,"vdr-dt-column"),l._uU(23),l.ALo(24,"translate"),l.qZA(),l._UZ(25,"vdr-dt-column"),l._UZ(26,"vdr-dt-column"),l.YNc(27,Le,23,22,"ng-template"),l.qZA()),2&e&&(l.xp6(2),l.Q6J("formControl",t.searchTerm)("placeholder",l.lcZ(3,11,"settings.search-country-by-name")),l.xp6(3),l.Q6J("availableLanguageCodes",l.lcZ(6,13,t.availableLanguages$))("currentLanguageCode",l.lcZ(7,15,t.contentLanguage$)),l.xp6(5),l.Q6J("vdrIfPermissions",l.DdM(27,ke)),l.xp6(1),l.Q6J("items",l.lcZ(12,17,t.countriesWithZones$)),l.xp6(3),l.Oqu(l.lcZ(15,19,"common.code")),l.xp6(2),l.Q6J("expand",!0),l.xp6(1),l.Oqu(l.lcZ(18,21,"common.name")),l.xp6(3),l.Oqu(l.lcZ(21,23,"settings.zone")),l.xp6(3),l.Oqu(l.lcZ(24,25,"common.enabled")))},directives:[d.KkL,d.BND,d.y_K,F.Fj,F.JJ,F.oH,d.SdP,d.mz,d.WWO,d.HAh,d.Qj_,d.Egy,L.yS,Q.qvL,D.sg,d.v_8,d.JOL,d.UaT,d.N9E,d.HH4,d.Ywx],pipes:[N.X$,D.Ov,d.j$k],styles:[".search-input[_ngcontent-%COMP%]{margin-top:6px;min-width:300px}"],changeDetection:0}),Mn.ctorParameters=function(){return[{type:d.DoR},{type:d.gqp},{type:d.Z7U},{type:d.iHG}]};var Yn=function(e){c(n,e);var t=u(n);function n(e,r,i,o,a,c,l){var u;return g(this,n),(u=t.call(this,r,e,i,a)).changeDetector=o,u.dataService=a,u.formBuilder=c,u.notificationService=l,u.languageCodes=Object.values(d.spR),u.updatePermission=[d.y3$.UpdateSettings,d.y3$.UpdateGlobalSettings],u.customFields=u.getCustomFieldConfig("GlobalSettings"),u.detailForm=u.formBuilder.group({availableLanguages:[""],trackInventory:!1,outOfStockThreshold:[0,F.kI.required],customFields:u.formBuilder.group(u.customFields.reduce(function(e,t){return Object.assign(Object.assign({},e),s({},t.name,""))},{}))}),u}return v(n,[{key:"ngOnInit",value:function(){var e=this;this.init(),this.dataService.client.userStatus().single$.subscribe(function(t){if(!t.userStatus.permissions.includes(d.y3$.UpdateSettings)){var n=e.detailForm.get("availableLanguages");n&&n.disable()}})}},{key:"save",value:function(){var e=this;!this.detailForm.dirty||this.dataService.settings.updateGlobalSettings(this.detailForm.value).pipe((0,A.b)(function(t){var n=t.updateGlobalSettings;switch(n.__typename){case"GlobalSettings":e.detailForm.markAsPristine(),e.changeDetector.markForCheck(),e.notificationService.success((0,k.J)("common.notify-update-success"),{entity:"Settings"});break;case"ChannelDefaultLanguageError":e.notificationService.error(n.message)}}),(0,y.w)(function(){return e.serverConfigService.refreshGlobalSettings()}),(0,x.M)(this.dataService.client.uiState().single$)).subscribe(function(t){var n=i(t,2),r=n[0].globalSettings,o=n[1].uiState,a=r.availableLanguages;a.length&&!a.includes(o.contentLanguage)&&e.dataService.client.setContentLanguage(a[0]).subscribe()})}},{key:"setFormValues",value:function(e,t){this.detailForm.patchValue({availableLanguages:e.availableLanguages,trackInventory:e.trackInventory,outOfStockThreshold:e.outOfStockThreshold}),this.customFields.length&&this.setCustomFieldFormValues(this.customFields,this.detailForm.get("customFields"),e)}}]),n}(d.UT_);Yn.\u0275fac=function(e){return new(e||Yn)(l.Y36(L.F0),l.Y36(L.gz),l.Y36(d.iHG),l.Y36(l.sBO),l.Y36(d.DoR),l.Y36(F.qu),l.Y36(d.gqp))},Yn.\u0275cmp=l.Xpm({type:Yn,selectors:[["vdr-global-settings"]],features:[l.qOj],decls:23,vars:29,consts:[["locationId","global-settings-detail"],["class","btn btn-primary",3,"disabled","click",4,"vdrIfPermissions"],[1,"form",3,"formGroup"],["for","availableLanguages",3,"label"],["multiple","true","appendTo","body","formControlName","availableLanguages",3,"items","addTag","hideSelected"],["ng-label-tmp",""],["ng-option-tmp",""],["for","outOfStockThreshold",3,"label","tooltip"],["id","outOfStockThreshold","type","number","formControlName","outOfStockThreshold",3,"readonly"],["for","enabled",3,"label","tooltip"],["type","checkbox","clrToggle","","name","enabled","formControlName","trackInventory",3,"vdrDisabled"],["formGroupName","customFields",4,"ngIf"],["locationId","global-settings-detail",3,"entity$","detailForm"],[1,"btn","btn-primary",3,"disabled","click"],["aria-hidden","true",1,"ng-value-icon","left",3,"click"],[1,"ng-value-label"],["formGroupName","customFields"],["entityName","GlobalSettings",3,"customFields","customFieldsFormGroup","readonly"]],template:function(e,t){1&e&&(l.TgZ(0,"vdr-action-bar"),l.TgZ(1,"vdr-ab-right"),l._UZ(2,"vdr-action-bar-items",0),l.YNc(3,Je,3,4,"button",1),l.qZA(),l.qZA(),l.TgZ(4,"form",2),l.TgZ(5,"vdr-form-field",3),l.ALo(6,"translate"),l.TgZ(7,"ng-select",4),l.YNc(8,_e,5,4,"ng-template",5),l.YNc(9,Ue,2,4,"ng-template",6),l.qZA(),l.qZA(),l.TgZ(10,"vdr-form-field",7),l.ALo(11,"translate"),l.ALo(12,"translate"),l._UZ(13,"input",8),l.ALo(14,"hasPermission"),l.qZA(),l.TgZ(15,"vdr-form-field",9),l.ALo(16,"translate"),l.ALo(17,"translate"),l.TgZ(18,"clr-toggle-wrapper"),l._UZ(19,"input",10),l.ALo(20,"hasPermission"),l.qZA(),l.qZA(),l.YNc(21,Pe,6,8,"section",11),l._UZ(22,"vdr-custom-detail-component-host",12),l.qZA()),2&e&&(l.xp6(3),l.Q6J("vdrIfPermissions",t.updatePermission),l.xp6(1),l.Q6J("formGroup",t.detailForm),l.xp6(1),l.Q6J("label",l.lcZ(6,15,"common.available-languages")),l.xp6(2),l.Q6J("items",t.languageCodes)("addTag",!1)("hideSelected",!0),l.xp6(3),l.Q6J("label",l.lcZ(11,17,"settings.global-out-of-stock-threshold"))("tooltip",l.lcZ(12,19,"settings.global-out-of-stock-threshold-tooltip")),l.xp6(3),l.Q6J("readonly",!l.lcZ(14,21,t.updatePermission)),l.xp6(2),l.Q6J("label",l.lcZ(16,23,"settings.track-inventory-default"))("tooltip",l.lcZ(17,25,"catalog.track-inventory-tooltip")),l.xp6(4),l.Q6J("vdrDisabled",!l.lcZ(20,27,t.updatePermission)),l.xp6(2),l.Q6J("ngIf",t.customFields.length),l.xp6(1),l.Q6J("entity$",t.entity$)("detailForm",t.detailForm))},directives:[d.KkL,d.mz,d.WWO,d.HAh,F._Y,F.JL,F.sg,d.hgI,M.w9,F.JJ,F.u,M.bb,M.Z2,d.y_K,F.wV,F.Fj,Q.PEh,F.Wl,Q.KKC,d.x3T,D.O5,d.CWh,F.x0,Q.MgK,d.yc0],pipes:[N.X$,d.j$k,d.Bm],styles:["ng-select .ng-value>span{margin:0!important}  ng-select .ng-arrow-wrapper .ng-arrow{margin:0!important}  ng-select .ng-select-container>span{margin:0!important}"],changeDetection:0}),Yn.ctorParameters=function(){return[{type:L.F0},{type:L.gz},{type:d.iHG},{type:l.sBO},{type:d.DoR},{type:F.qu},{type:d.gqp}]};var $n=function(e){c(n,e);var t=u(n);function n(e,r,i,o,a,c,l){var u;return g(this,n),(u=t.call(this,r,e,i,a)).changeDetector=o,u.dataService=a,u.formBuilder=c,u.notificationService=l,u.checkers=[],u.handlers=[],u.updatePermission=[d.y3$.UpdateSettings,d.y3$.UpdatePaymentMethod],u.customFields=u.getCustomFieldConfig("PaymentMethod"),u.detailForm=u.formBuilder.group({code:["",F.kI.required],name:["",F.kI.required],description:"",enabled:[!0,F.kI.required],checker:{},handler:{},customFields:u.formBuilder.group(u.customFields.reduce(function(e,t){return Object.assign(Object.assign({},e),s({},t.name,""))},{}))}),u}return v(n,[{key:"ngOnInit",value:function(){var e=this;this.init(),(0,P.aj)([this.dataService.settings.getPaymentMethodOperations().single$,this.entity$.pipe((0,h.q)(1))]).subscribe(function(t){var n=i(t,2),r=n[0],o=n[1];e.checkers=r.paymentMethodEligibilityCheckers,e.handlers=r.paymentMethodHandlers,e.changeDetector.markForCheck(),e.selectedCheckerDefinition=r.paymentMethodEligibilityCheckers.find(function(e){return e.code===(o.checker&&o.checker.code)}),e.selectedHandlerDefinition=r.paymentMethodHandlers.find(function(e){return e.code===(o.handler&&o.handler.code)})})}},{key:"ngOnDestroy",value:function(){this.destroy()}},{key:"updateCode",value:function(e,t){if(!e){var n=this.detailForm.get(["code"]);n&&n.pristine&&n.setValue((0,S.U)(t,"-"))}}},{key:"configArgsIsPopulated",value:function(){var e=this.detailForm.get("configArgs");return!!e&&0<Object.keys(e.controls).length}},{key:"selectChecker",value:function(e){this.selectedCheckerDefinition=e,this.selectedChecker=(0,d.miO)(e);var t=this.detailForm.get("checker");t&&(t.clearValidators(),t.updateValueAndValidity({onlySelf:!0}),t.patchValue(this.selectedChecker)),this.detailForm.markAsDirty()}},{key:"selectHandler",value:function(e){this.selectedHandlerDefinition=e,this.selectedHandler=(0,d.miO)(e);var t=this.detailForm.get("handler");t&&(t.clearValidators(),t.updateValueAndValidity({onlySelf:!0}),t.patchValue(this.selectedHandler)),this.detailForm.markAsDirty()}},{key:"removeChecker",value:function(){this.selectedChecker=null,this.detailForm.markAsDirty()}},{key:"removeHandler",value:function(){this.selectedHandler=null,this.detailForm.markAsDirty()}},{key:"create",value:function(){var e=this,t=this.selectedChecker,n=this.selectedHandler;!n||this.entity$.pipe((0,h.q)(1),(0,Z.zg)(function(r){r.id;var i=e.detailForm.value,o={name:i.name,code:i.code,description:i.description,enabled:i.enabled,checker:t?(0,d.RnJ)(t,i.checker):null,handler:(0,d.RnJ)(n,i.handler),customFields:i.customFields};return e.dataService.settings.createPaymentMethod(o)})).subscribe(function(t){e.notificationService.success((0,k.J)("common.notify-create-success"),{entity:"PaymentMethod"}),e.detailForm.markAsPristine(),e.changeDetector.markForCheck(),e.router.navigate(["../",t.createPaymentMethod.id],{relativeTo:e.route})},function(t){e.notificationService.error((0,k.J)("common.notify-create-error"),{entity:"PaymentMethod"})})}},{key:"save",value:function(){var e=this,t=this.selectedChecker,n=this.selectedHandler;!n||this.entity$.pipe((0,h.q)(1),(0,Z.zg)(function(r){var i=r.id,o=e.detailForm.value,a={id:i,name:o.name,code:o.code,description:o.description,enabled:o.enabled,checker:t?(0,d.RnJ)(t,o.checker):null,handler:(0,d.RnJ)(n,o.handler),customFields:o.customFields};return e.dataService.settings.updatePaymentMethod(a)})).subscribe(function(t){e.notificationService.success((0,k.J)("common.notify-update-success"),{entity:"PaymentMethod"}),e.detailForm.markAsPristine(),e.changeDetector.markForCheck()},function(t){e.notificationService.error((0,k.J)("common.notify-update-error"),{entity:"PaymentMethod"})})}},{key:"setFormValues",value:function(e){this.detailForm.patchValue({name:e.name,code:e.code,description:e.description,enabled:e.enabled,checker:e.checker||{},handler:e.handler||{}}),this.selectedChecker||(this.selectedChecker=e.checker&&{code:e.checker.code,args:e.checker.args.map(function(e){return Object.assign(Object.assign({},e),{value:(0,d.sux)(e.value)})})}),this.selectedHandler||(this.selectedHandler=e.handler&&{code:e.handler.code,args:e.handler.args.map(function(e){return Object.assign(Object.assign({},e),{value:(0,d.sux)(e.value)})})}),this.customFields.length&&this.setCustomFieldFormValues(this.customFields,this.detailForm.get("customFields"),e)}}]),n}(d.UT_);$n.\u0275fac=function(e){return new(e||$n)(l.Y36(L.F0),l.Y36(L.gz),l.Y36(d.iHG),l.Y36(l.sBO),l.Y36(d.DoR),l.Y36(F.qu),l.Y36(d.gqp))},$n.\u0275cmp=l.Xpm({type:$n,selectors:[["vdr-payment-method-detail"]],features:[l.qOj],decls:12,vars:10,consts:[[3,"entity"],["locationId","payment-method-detail"],["class","btn btn-primary",3,"disabled","click",4,"ngIf","ngIfElse"],["updateButton",""],["class","form",3,"formGroup",4,"ngIf"],[1,"btn","btn-primary",3,"disabled","click"],["class","btn btn-primary",3,"disabled","click",4,"vdrIfPermissions"],[1,"form",3,"formGroup"],["for","name",3,"label"],["id","name","type","text","formControlName","name",3,"readonly","input"],["for","code",3,"label","readOnlyToggle"],["id","code","type","text","formControlName","code",3,"readonly"],["formControlName","description",3,"readonly","label"],["for","description",3,"label"],["type","checkbox","clrToggle","","id","enabled","formControlName","enabled",3,"vdrDisabled"],["formGroupName","customFields",4,"ngIf"],["locationId","payment-method-detail",3,"entity$","detailForm"],[1,"clr-row","mt4"],[1,"clr-col"],[1,"clr-control-label"],["formControlName","checker",3,"operation","operationDefinition","readonly","remove",4,"ngIf"],[4,"ngIf"],["formControlName","handler",3,"operation","operationDefinition","readonly","remove",4,"ngIf"],["formGroupName","customFields"],["entityName","PaymentMethod",3,"customFields","customFieldsFormGroup","readonly"],["formControlName","checker",3,"operation","operationDefinition","readonly","remove"],["vdrDropdownTrigger","",1,"btn","btn-outline"],["shape","plus"],["vdrPosition","bottom-left"],["type","button","vdrDropdownItem","",3,"click",4,"ngFor","ngForOf"],["type","button","vdrDropdownItem","",3,"click"],["formControlName","handler",3,"operation","operationDefinition","readonly","remove"]],template:function(e,t){if(1&e&&(l.TgZ(0,"vdr-action-bar"),l.TgZ(1,"vdr-ab-left"),l._UZ(2,"vdr-entity-info",0),l.ALo(3,"async"),l.qZA(),l.TgZ(4,"vdr-ab-right"),l._UZ(5,"vdr-action-bar-items",1),l.YNc(6,Ie,3,4,"button",2),l.ALo(7,"async"),l.YNc(8,Se,1,1,"ng-template",null,3,l.W1O),l.qZA(),l.qZA(),l.YNc(10,Re,33,41,"form",4),l.ALo(11,"async")),2&e){var n=l.MAs(9);l.xp6(2),l.Q6J("entity",l.lcZ(3,4,t.entity$)),l.xp6(4),l.Q6J("ngIf",l.lcZ(7,6,t.isNew$))("ngIfElse",n),l.xp6(4),l.Q6J("ngIf",l.lcZ(11,8,t.entity$))}},directives:[d.KkL,d.BND,d.Vqt,d.mz,d.WWO,D.O5,d.HAh,F._Y,F.JL,F.sg,d.hgI,d.y_K,F.Fj,F.JJ,F.u,d.YI,Q.PEh,F.Wl,Q.KKC,d.x3T,d.CWh,Q.MgK,F.x0,d.yc0,d.qq8,d.JOL,d.UaT,Q.qvL,d.N9E,D.sg,d.HH4],pipes:[D.Ov,N.X$,d.j$k],styles:[""],changeDetection:0}),$n.ctorParameters=function(){return[{type:L.F0},{type:L.gz},{type:d.iHG},{type:l.sBO},{type:d.DoR},{type:F.qu},{type:d.gqp}]};var Rn=function(e){c(r,e);var n=u(r);function r(e,i,o,a,s){var c,l;return g(this,r),(l=n.call(this,i,o)).dataService=e,l.modalService=a,l.notificationService=s,t((c=m(l),p(r.prototype)),"setQueryFn",c).call(c,function(){var e;return(e=l.dataService.settings).getPaymentMethods.apply(e,arguments).refetchOnChannelChange()},function(e){return e.paymentMethods}),l}return v(r,[{key:"deletePaymentMethod",value:function(e){var t=this;this.showModalAndDelete(e).pipe((0,y.w)(function(n){return n.result===d.PcR.DELETED?[!0]:t.showModalAndDelete(e,n.message||"").pipe((0,f.U)(function(e){return e.result===d.PcR.DELETED}))}),(0,y.w)(function(){return t.dataService.settings.getPaymentMethods(100).single$})).subscribe(function(){t.notificationService.success((0,k.J)("common.notify-delete-success"),{entity:"PaymentMethod"}),t.refresh()},function(e){t.notificationService.error((0,k.J)("common.notify-delete-error"),{entity:"PaymentMethod"})})}},{key:"showModalAndDelete",value:function(e,t){var n=this;return this.modalService.dialog({title:(0,k.J)("settings.confirm-delete-payment-method"),body:t,buttons:[{type:"secondary",label:(0,k.J)("common.cancel")},{type:"danger",label:(0,k.J)("common.delete"),returnValue:!0}]}).pipe((0,y.w)(function(r){return r?n.dataService.settings.deletePaymentMethod(e,!!t):_.E}),(0,f.U)(function(e){return e.deletePaymentMethod}))}}]),r}(d.t7C);Rn.\u0275fac=function(e){return new(e||Rn)(l.Y36(d.DoR),l.Y36(L.F0),l.Y36(L.gz),l.Y36(d.Z7U),l.Y36(d.gqp))},Rn.\u0275cmp=l.Xpm({type:Rn,selectors:[["vdr-payment-method-list"]],features:[l.qOj],decls:18,vars:20,consts:[["locationId","payment-method-list"],["class","btn btn-primary",3,"routerLink",4,"vdrIfPermissions"],[3,"items","itemsPerPage","totalItems","currentPage","pageChange","itemsPerPageChange"],[1,"btn","btn-primary",3,"routerLink"],["shape","plus"],[1,"left","align-middle"],[1,"right","align-middle"],["iconShape","edit",3,"label","linkTo"],["type","button","vdrDropdownTrigger","",1,"btn","btn-link","btn-sm"],["shape","caret down"],["vdrPosition","bottom-right"],["type","button","vdrDropdownItem","",1,"delete-button",3,"disabled","click"],["shape","trash",1,"is-danger"]],template:function(e,t){1&e&&(l.TgZ(0,"vdr-action-bar"),l.TgZ(1,"vdr-ab-right"),l._UZ(2,"vdr-action-bar-items",0),l.YNc(3,je,4,5,"a",1),l.qZA(),l.qZA(),l.TgZ(4,"vdr-data-table",2),l.NdJ("pageChange",function(e){return t.setPageNumber(e)})("itemsPerPageChange",function(e){return t.setItemsPerPage(e)}),l.ALo(5,"async"),l.ALo(6,"async"),l.ALo(7,"async"),l.ALo(8,"async"),l.TgZ(9,"vdr-dt-column"),l._uU(10),l.ALo(11,"translate"),l.qZA(),l.TgZ(12,"vdr-dt-column"),l._uU(13),l.ALo(14,"translate"),l.qZA(),l._UZ(15,"vdr-dt-column"),l._UZ(16,"vdr-dt-column"),l.YNc(17,He,19,18,"ng-template"),l.qZA()),2&e&&(l.xp6(3),l.Q6J("vdrIfPermissions",l.DdM(19,Ee)),l.xp6(1),l.Q6J("items",l.lcZ(5,7,t.items$))("itemsPerPage",l.lcZ(6,9,t.itemsPerPage$))("totalItems",l.lcZ(7,11,t.totalItems$))("currentPage",l.lcZ(8,13,t.currentPage$)),l.xp6(6),l.Oqu(l.lcZ(11,15,"common.code")),l.xp6(3),l.Oqu(l.lcZ(14,17,"common.enabled")))},directives:[d.KkL,d.mz,d.WWO,d.HAh,d.Qj_,d.Egy,L.yS,Q.qvL,d.v_8,d.JOL,d.UaT,d.N9E,d.HH4],pipes:[D.Ov,N.X$,d.j$k],styles:[""],changeDetection:0}),Rn.ctorParameters=function(){return[{type:d.DoR},{type:L.F0},{type:L.gz},{type:d.Z7U},{type:d.gqp}]};var jn=function(){function t(){g(this,t),this.readonly=!1,this.permissionChange=new l.vpe}return v(t,[{key:"ngOnInit",value:function(){this.buildGrid()}},{key:"setPermission",value:function(e,t){this.readonly||this.permissionChange.emit({permission:e,value:t})}},{key:"toggleAll",value:function(e){var t,n=this,i=e.some(function(e){return!n.activePermissions.includes(e.name)}),o=r(e);try{for(o.s();!(t=o.n()).done;){var a=t.value;this.permissionChange.emit({permission:a.name,value:i})}}catch(s){o.e(s)}finally{o.f()}}},{key:"buildGrid",value:function(){var t,n,o=this,a=new Map,s=[],c=/^(Create|Read|Update|Delete)([a-zA-Z]+)$/,l=r(this.permissionDefinitions);try{for(l.s();!(n=l.n()).done;){var u=n.value;if(c.test(u.name)){var d=null===(t=u.name.match(c))||void 0===t?void 0:t[2];if(d){var m=a.get(d);m?m.push(u):a.set(d,[u])}}else u.assignable&&s.push(u)}}catch(p){l.e(p)}finally{l.f()}this.gridData=[].concat(e(s.map(function(e){return{label:e.name,description:e.description,permissions:[e]}})),e(Array.from(a.entries()).map(function(e){var t=i(e,2),n=t[0],r=t[1];return{label:n,description:o.extractCrudDescription(r[0]),permissions:r}})))}},{key:"extractCrudDescription",value:function(e){return e.description.replace(/Grants permission to [\w]+/,"Grants permissions on")}}]),t}();jn.\u0275fac=function(e){return new(e||jn)},jn.\u0275cmp=l.Xpm({type:jn,selectors:[["vdr-permission-grid"]],inputs:{readonly:"readonly",permissionDefinitions:"permissionDefinitions",activePermissions:"activePermissions"},outputs:{permissionChange:"permissionChange"},decls:3,vars:1,consts:[[1,"table"],[4,"ngFor","ngForOf"],[1,"permission-group","left"],["class","btn btn-sm btn-link",3,"click",4,"ngIf"],[1,"btn","btn-sm","btn-link",3,"click"],["size","small",3,"title","label","disabled","selected","selectedChange"]],template:function(e,t){1&e&&(l.TgZ(0,"table",0),l.TgZ(1,"tbody"),l.YNc(2,Ve,12,8,"tr",1),l.qZA(),l.qZA()),2&e&&(l.xp6(2),l.Q6J("ngForOf",t.gridData))},directives:[D.sg,D.O5,d.aPl],pipes:[N.X$],styles:["td.permission-group[_ngcontent-%COMP%]{max-width:300px;background-color:var(--color-component-bg-200)}"],changeDetection:0}),jn.propDecorators={permissionDefinitions:[{type:l.IIB}],activePermissions:[{type:l.IIB}],readonly:[{type:l.IIB}],permissionChange:[{type:l.r_U}]};var zn=function(e){c(n,e);var t=u(n);function n(e,r,i,o,a,c,l){var u;return g(this,n),(u=t.call(this,r,e,i,a)).changeDetector=o,u.dataService=a,u.formBuilder=c,u.notificationService=l,u.customFields=u.getCustomFieldConfig("Administrator"),u.detailForm=u.formBuilder.group({emailAddress:["",F.kI.required],firstName:["",F.kI.required],lastName:["",F.kI.required],password:[""],customFields:u.formBuilder.group(u.customFields.reduce(function(e,t){return Object.assign(Object.assign({},e),s({},t.name,""))},{}))}),u}return v(n,[{key:"ngOnInit",value:function(){this.init()}},{key:"ngOnDestroy",value:function(){this.destroy()}},{key:"save",value:function(){var e=this;this.entity$.pipe((0,h.q)(1),(0,Z.zg)(function(t){t.id;var n=e.detailForm.value,r={emailAddress:n.emailAddress,firstName:n.firstName,lastName:n.lastName,password:n.password,customFields:n.customFields};return e.dataService.administrator.updateActiveAdministrator(r)})).subscribe(function(t){e.notificationService.success((0,k.J)("common.notify-update-success"),{entity:"Administrator"}),e.detailForm.markAsPristine(),e.changeDetector.markForCheck()},function(t){e.notificationService.error((0,k.J)("common.notify-update-error"),{entity:"Administrator"})})}},{key:"setFormValues",value:function(e,t){this.detailForm.patchValue({emailAddress:e.emailAddress,firstName:e.firstName,lastName:e.lastName}),this.customFields.length&&this.setCustomFieldFormValues(this.customFields,this.detailForm.get("customFields"),e)}}]),n}(d.UT_);zn.\u0275fac=function(e){return new(e||zn)(l.Y36(L.F0),l.Y36(L.gz),l.Y36(d.iHG),l.Y36(l.sBO),l.Y36(d.DoR),l.Y36(F.qu),l.Y36(d.gqp))},zn.\u0275cmp=l.Xpm({type:zn,selectors:[["vdr-profile"]],features:[l.qOj],decls:26,vars:27,consts:[[3,"entity"],["locationId","administrator-detail"],[1,"btn","btn-primary",3,"disabled","click"],[1,"form",3,"formGroup"],["for","emailAddress",3,"label"],["id","emailAddress","type","text","formControlName","emailAddress"],["for","firstName",3,"label"],["id","firstName","type","text","formControlName","firstName"],["for","lastName",3,"label"],["id","lastName","type","text","formControlName","lastName"],["for","password",3,"label",4,"ngIf"],["for","password",3,"label","readOnlyToggle"],["id","password","type","password","formControlName","password"],["formGroupName","customFields",4,"ngIf"],["locationId","administrator-profile",3,"entity$","detailForm"],["for","password",3,"label"],["formGroupName","customFields"],["entityName","Administrator",3,"customFields","customFieldsFormGroup"]],template:function(e,t){1&e&&(l.TgZ(0,"vdr-action-bar"),l.TgZ(1,"vdr-ab-left"),l._UZ(2,"vdr-entity-info",0),l.ALo(3,"async"),l.qZA(),l.TgZ(4,"vdr-ab-right"),l._UZ(5,"vdr-action-bar-items",1),l.TgZ(6,"button",2),l.NdJ("click",function(){return t.save()}),l._uU(7),l.ALo(8,"translate"),l.qZA(),l.qZA(),l.qZA(),l.TgZ(9,"form",3),l.TgZ(10,"vdr-form-field",4),l.ALo(11,"translate"),l._UZ(12,"input",5),l.qZA(),l.TgZ(13,"vdr-form-field",6),l.ALo(14,"translate"),l._UZ(15,"input",7),l.qZA(),l.TgZ(16,"vdr-form-field",8),l.ALo(17,"translate"),l._UZ(18,"input",9),l.qZA(),l.YNc(19,We,3,3,"vdr-form-field",10),l.ALo(20,"async"),l.TgZ(21,"vdr-form-field",11),l.ALo(22,"translate"),l._UZ(23,"input",12),l.qZA(),l.YNc(24,Ke,5,5,"section",13),l._UZ(25,"vdr-custom-detail-component-host",14),l.qZA()),2&e&&(l.xp6(2),l.Q6J("entity",l.lcZ(3,13,t.entity$)),l.xp6(4),l.Q6J("disabled",t.detailForm.invalid||t.detailForm.pristine),l.xp6(1),l.hij(" ",l.lcZ(8,15,"common.update")," "),l.xp6(2),l.Q6J("formGroup",t.detailForm),l.xp6(1),l.Q6J("label",l.lcZ(11,17,"settings.email-address")),l.xp6(3),l.Q6J("label",l.lcZ(14,19,"settings.first-name")),l.xp6(3),l.Q6J("label",l.lcZ(17,21,"settings.last-name")),l.xp6(3),l.Q6J("ngIf",l.lcZ(20,23,t.isNew$)),l.xp6(2),l.Q6J("label",l.lcZ(22,25,"settings.password"))("readOnlyToggle",!0),l.xp6(3),l.Q6J("ngIf",t.customFields.length),l.xp6(1),l.Q6J("entity$",t.entity$)("detailForm",t.detailForm))},directives:[d.KkL,d.BND,d.Vqt,d.mz,d.WWO,F._Y,F.JL,F.sg,d.hgI,d.y_K,F.Fj,F.JJ,F.u,D.O5,d.CWh,F.x0,Q.MgK,d.yc0],pipes:[D.Ov,N.X$],styles:[""],changeDetection:0}),zn.ctorParameters=function(){return[{type:L.F0},{type:L.gz},{type:d.iHG},{type:l.sBO},{type:d.DoR},{type:F.qu},{type:d.gqp}]};var Hn=function(t){c(r,t);var n=u(r);function r(e,t,i,o,a,s,c){var l;return g(this,r),(l=n.call(this,t,e,i,a)).changeDetector=o,l.dataService=a,l.formBuilder=s,l.notificationService=c,l.detailForm=l.formBuilder.group({code:["",F.kI.required],description:["",F.kI.required],channelIds:[],permissions:[]}),l}return v(r,[{key:"ngOnInit",value:function(){this.init(),this.role$=this.entity$,this.permissionDefinitions=this.serverConfigService.getPermissionDefinitions()}},{key:"ngOnDestroy",value:function(){this.destroy()}},{key:"updateCode",value:function(e){var t=this.detailForm.get(["code"]);t&&t.pristine&&t.setValue((0,S.U)(e,"-"))}},{key:"setPermission",value:function(t){var n=this.detailForm.get("permissions");if(n){var r=n.value,i=!0===t.value?(0,O.T)([].concat(e(r),[t.permission])):r.filter(function(e){return e!==t.permission});n.setValue(i),n.markAsDirty()}}},{key:"create",value:function(){var e=this,t=this.detailForm.value;this.dataService.administrator.createRole(t).subscribe(function(t){e.notificationService.success((0,k.J)("common.notify-create-success"),{entity:"Role"}),e.detailForm.markAsPristine(),e.changeDetector.markForCheck(),e.router.navigate(["../",t.createRole.id],{relativeTo:e.route})},function(t){e.notificationService.error((0,k.J)("common.notify-create-error"),{entity:"Role"})})}},{key:"save",value:function(){var e=this;this.role$.pipe((0,h.q)(1),(0,Z.zg)(function(t){var n=t.id,r=e.detailForm.value,i=Object.assign({id:n},r);return e.dataService.administrator.updateRole(i)})).subscribe(function(t){e.notificationService.success((0,k.J)("common.notify-update-success"),{entity:"Role"}),e.detailForm.markAsPristine(),e.changeDetector.markForCheck()},function(t){e.notificationService.error((0,k.J)("common.notify-update-error"),{entity:"Role"})})}},{key:"setFormValues",value:function(e,t){this.detailForm.patchValue({description:e.description,code:e.code,channelIds:e.channels.map(function(e){return e.id}),permissions:e.permissions}),this.changeDetector.detectChanges()}}]),r}(d.UT_);Hn.\u0275fac=function(e){return new(e||Hn)(l.Y36(L.F0),l.Y36(L.gz),l.Y36(d.iHG),l.Y36(l.sBO),l.Y36(d.DoR),l.Y36(F.qu),l.Y36(d.gqp))},Hn.\u0275cmp=l.Xpm({type:Hn,selectors:[["vdr-role-detail"]],features:[l.qOj],decls:29,vars:37,consts:[[3,"entity"],["locationId","role-detail"],["class","btn btn-primary",3,"disabled","click",4,"ngIf","ngIfElse"],["updateButton",""],[1,"form",3,"formGroup"],["for","description",3,"label"],["id","description","type","text","formControlName","description",3,"readonly","input"],["for","code",3,"label","readOnlyToggle"],["id","code","type","text","formControlName","code",3,"readonly"],[3,"label"],["formControlName","channelIds",3,"vdrDisabled"],[3,"permissionDefinitions","activePermissions","readonly","permissionChange"],[1,"btn","btn-primary",3,"disabled","click"],["class","btn btn-primary",3,"disabled","click",4,"vdrIfPermissions"]],template:function(e,t){if(1&e&&(l.TgZ(0,"vdr-action-bar"),l.TgZ(1,"vdr-ab-left"),l._UZ(2,"vdr-entity-info",0),l.ALo(3,"async"),l.qZA(),l.TgZ(4,"vdr-ab-right"),l._UZ(5,"vdr-action-bar-items",1),l.YNc(6,Xe,3,4,"button",2),l.ALo(7,"async"),l.YNc(8,tt,1,1,"ng-template",null,3,l.W1O),l.qZA(),l.qZA(),l.TgZ(10,"form",4),l.TgZ(11,"vdr-form-field",5),l.ALo(12,"translate"),l.TgZ(13,"input",6),l.NdJ("input",function(e){return t.updateCode(e.target.value)}),l.ALo(14,"hasPermission"),l.qZA(),l.qZA(),l.TgZ(15,"vdr-form-field",7),l.ALo(16,"translate"),l.ALo(17,"hasPermission"),l._UZ(18,"input",8),l.ALo(19,"hasPermission"),l.qZA(),l.TgZ(20,"vdr-form-field",9),l.ALo(21,"translate"),l._UZ(22,"vdr-channel-assignment-control",10),l.ALo(23,"hasPermission"),l.qZA(),l.TgZ(24,"label"),l._uU(25),l.ALo(26,"translate"),l.qZA(),l.TgZ(27,"vdr-permission-grid",11),l.NdJ("permissionChange",function(e){return t.setPermission(e)}),l.ALo(28,"hasPermission"),l.qZA(),l.qZA()),2&e){var n,r=l.MAs(9);l.xp6(2),l.Q6J("entity",l.lcZ(3,15,t.entity$)),l.xp6(4),l.Q6J("ngIf",l.lcZ(7,17,t.isNew$))("ngIfElse",r),l.xp6(4),l.Q6J("formGroup",t.detailForm),l.xp6(1),l.Q6J("label",l.lcZ(12,19,"common.description")),l.xp6(2),l.Q6J("readonly",!l.lcZ(14,21,"UpdateAdministrator")),l.xp6(2),l.Q6J("label",l.lcZ(16,23,"common.code"))("readOnlyToggle",l.lcZ(17,25,"UpdateAdministrator")),l.xp6(3),l.Q6J("readonly",!l.lcZ(19,27,"UpdateAdministrator")),l.xp6(2),l.Q6J("label",l.lcZ(21,29,"settings.channel")),l.xp6(2),l.Q6J("vdrDisabled",!l.lcZ(23,31,"UpdateAdministrator")),l.xp6(3),l.Oqu(l.lcZ(26,33,"settings.permissions")),l.xp6(2),l.Q6J("permissionDefinitions",t.permissionDefinitions)("activePermissions",null==(n=t.detailForm.get("permissions"))?null:n.value)("readonly",!l.lcZ(28,35,"UpdateAdministrator"))}},directives:[d.KkL,d.BND,d.Vqt,d.mz,d.WWO,D.O5,F._Y,F.JL,F.sg,d.hgI,d.y_K,F.Fj,F.JJ,F.u,d.SGu,d.x3T,Q.MgK,jn,d.HAh],pipes:[D.Ov,N.X$,d.j$k],styles:[""],changeDetection:0}),Hn.ctorParameters=function(){return[{type:L.F0},{type:L.gz},{type:d.iHG},{type:l.sBO},{type:d.DoR},{type:F.qu},{type:d.gqp}]};var En=function(e){c(r,e);var n=u(r);function r(e,i,o,a,s){var c,l;return g(this,r),(l=n.call(this,a,s)).modalService=e,l.notificationService=i,l.dataService=o,l.initialLimit=3,l.displayLimit={},t((c=m(l),p(r.prototype)),"setQueryFn",c).call(c,function(){var e;return(e=l.dataService.administrator).getRoles.apply(e,arguments)},function(e){return e.roles}),l}return v(r,[{key:"ngOnInit",value:function(){t(p(r.prototype),"ngOnInit",this).call(this),this.visibleRoles$=this.items$.pipe((0,f.U)(function(e){return e.filter(function(e){return e.code!==J.RO})}))}},{key:"toggleDisplayLimit",value:function(e){this.displayLimit[e.id]===e.permissions.length?this.displayLimit[e.id]=this.initialLimit:this.displayLimit[e.id]=e.permissions.length}},{key:"isDefaultRole",value:function(e){return e.code===J.Wi||e.code===J.RO}},{key:"deleteRole",value:function(e){var t=this;this.modalService.dialog({title:(0,k.J)("settings.confirm-delete-role"),buttons:[{type:"secondary",label:(0,k.J)("common.cancel")},{type:"danger",label:(0,k.J)("common.delete"),returnValue:!0}]}).pipe((0,y.w)(function(n){return n?t.dataService.administrator.deleteRole(e):_.E})).subscribe(function(){t.notificationService.success((0,k.J)("common.notify-delete-success"),{entity:"Role"}),t.refresh()},function(e){t.notificationService.error((0,k.J)("common.notify-delete-error"),{entity:"Role"})})}}]),r}(d.t7C);En.\u0275fac=function(e){return new(e||En)(l.Y36(d.Z7U),l.Y36(d.gqp),l.Y36(d.DoR),l.Y36(L.F0),l.Y36(L.gz))},En.\u0275cmp=l.Xpm({type:En,selectors:[["vdr-role-list"]],features:[l.qOj],decls:24,vars:25,consts:[["locationId","role-list"],["class","btn btn-primary",3,"routerLink",4,"vdrIfPermissions"],[3,"items","itemsPerPage","totalItems","currentPage","pageChange","itemsPerPageChange"],[1,"btn","btn-primary",3,"routerLink"],["shape","plus"],[1,"left","align-middle"],[4,"ngIf"],[4,"ngIf","ngIfElse"],["defaultRole",""],[1,"right","align-middle"],["iconShape","edit",3,"label","linkTo",4,"ngIf"],["type","button","vdrDropdownTrigger","",1,"btn","btn-link","btn-sm",3,"disabled"],["shape","caret down"],["vdrPosition","bottom-right"],["type","button","vdrDropdownItem","",1,"delete-button",3,"disabled","click"],["shape","trash",1,"is-danger"],[4,"ngFor","ngForOf"],[3,"channelCode"],["class","btn btn-sm btn-secondary btn-icon",3,"click",4,"ngIf"],[1,"btn","btn-sm","btn-secondary","btn-icon",3,"click"],["collapse",""],["shape","minus"],[1,"default-role-label"],["iconShape","edit",3,"label","linkTo"]],template:function(e,t){1&e&&(l.TgZ(0,"vdr-action-bar"),l.TgZ(1,"vdr-ab-right"),l._UZ(2,"vdr-action-bar-items",0),l.YNc(3,nt,4,5,"a",1),l.qZA(),l.qZA(),l.TgZ(4,"vdr-data-table",2),l.NdJ("pageChange",function(e){return t.setPageNumber(e)})("itemsPerPageChange",function(e){return t.setItemsPerPage(e)}),l.ALo(5,"async"),l.ALo(6,"async"),l.ALo(7,"async"),l.ALo(8,"async"),l.TgZ(9,"vdr-dt-column"),l._uU(10),l.ALo(11,"translate"),l.qZA(),l.TgZ(12,"vdr-dt-column"),l._uU(13),l.ALo(14,"translate"),l.qZA(),l.TgZ(15,"vdr-dt-column"),l._uU(16),l.ALo(17,"translate"),l.qZA(),l.TgZ(18,"vdr-dt-column"),l._uU(19),l.ALo(20,"translate"),l.qZA(),l._UZ(21,"vdr-dt-column"),l._UZ(22,"vdr-dt-column"),l.YNc(23,pt,24,16,"ng-template"),l.qZA()),2&e&&(l.xp6(3),l.Q6J("vdrIfPermissions","CreateAdministrator"),l.xp6(1),l.Q6J("items",l.lcZ(5,9,t.visibleRoles$))("itemsPerPage",l.lcZ(6,11,t.itemsPerPage$))("totalItems",l.lcZ(7,13,t.totalItems$))("currentPage",l.lcZ(8,15,t.currentPage$)),l.xp6(6),l.Oqu(l.lcZ(11,17,"common.description")),l.xp6(3),l.Oqu(l.lcZ(14,19,"common.code")),l.xp6(3),l.Oqu(l.lcZ(17,21,"settings.channel")),l.xp6(3),l.Oqu(l.lcZ(20,23,"settings.permissions")))},directives:[d.KkL,d.mz,d.WWO,d.HAh,d.Qj_,d.Egy,L.yS,Q.qvL,D.O5,d.JOL,d.UaT,d.N9E,d.HH4,D.sg,d.Ywx,d.nIZ,d.v_8],pipes:[D.Ov,N.X$,d.j$k,d.E6B,D.OU],styles:[".default-role-label[_ngcontent-%COMP%]{color:var(--color-grey-400)}"],changeDetection:0}),En.ctorParameters=function(){return[{type:d.Z7U},{type:d.gqp},{type:d.DoR},{type:L.F0},{type:L.gz}]};var Gn=v(function e(){g(this,e),this.okToRun=!1,this.testDataUpdated=!1,this.runTest=new l.vpe});Gn.\u0275fac=function(e){return new(e||Gn)},Gn.\u0275cmp=l.Xpm({type:Gn,selectors:[["vdr-shipping-eligibility-test-result"]],inputs:{okToRun:"okToRun",testDataUpdated:"testDataUpdated",testResult:"testResult",currencyCode:"currencyCode"},outputs:{runTest:"runTest"},decls:10,vars:9,consts:[[1,"test-result","card"],[1,"card-header"],["class","card-block",4,"ngFor","ngForOf"],["class","card-block",4,"ngIf"],[1,"card-footer"],[1,"btn","btn-secondary",3,"disabled","click"],[1,"card-block"],[1,"result-details"],[3,"label"],[1,"price-row"],[3,"value",4,"ngIf"],[3,"value"],["shape","ban",1,"is-solid","error"]],template:function(e,t){1&e&&(l.TgZ(0,"div",0),l.TgZ(1,"div",1),l._uU(2),l.ALo(3,"translate"),l.qZA(),l.YNc(4,ft,15,21,"div",2),l.YNc(5,vt,4,3,"div",3),l.TgZ(6,"div",4),l.TgZ(7,"button",5),l.NdJ("click",function(){return t.runTest.emit()}),l._uU(8),l.ALo(9,"translate"),l.qZA(),l.qZA(),l.qZA()),2&e&&(l.xp6(2),l.hij(" ",l.lcZ(3,5,"settings.test-result")," "),l.xp6(2),l.Q6J("ngForOf",t.testResult),l.xp6(1),l.Q6J("ngIf",0===(null==t.testResult?null:t.testResult.length)),l.xp6(2),l.Q6J("disabled",!t.okToRun),l.xp6(1),l.hij(" ",l.lcZ(9,7,"settings.test-shipping-methods")," "))},directives:[D.sg,D.O5,d.WGc,d._8q,Q.qvL],pipes:[N.X$,d.kgx],styles:[".result-details[_ngcontent-%COMP%]{transition:opacity .2s}.result-details.stale[_ngcontent-%COMP%]{opacity:.5}.price-row[_ngcontent-%COMP%]{display:flex}.price-row[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:not(:first-child){margin-left:24px}clr-icon.error[_ngcontent-%COMP%]{color:var(--color-error-500)}"],changeDetection:0}),Gn.propDecorators={testResult:[{type:l.IIB}],okToRun:[{type:l.IIB}],testDataUpdated:[{type:l.IIB}],currencyCode:[{type:l.IIB}],runTest:[{type:l.r_U}]};var Bn=function(e){c(n,e);var t=u(n);function n(e,r,i,o,a,c,l){var u;return g(this,n),(u=t.call(this,r,e,i,a)).changeDetector=o,u.dataService=a,u.formBuilder=c,u.notificationService=l,u.checkers=[],u.calculators=[],u.fulfillmentHandlers=[],u.testDataUpdated=!1,u.updatePermission=[d.y3$.UpdateSettings,d.y3$.UpdateShippingMethod],u.fetchTestResult$=new U.xQ,u.customFields=u.getCustomFieldConfig("ShippingMethod"),u.detailForm=u.formBuilder.group({code:["",F.kI.required],name:["",F.kI.required],description:"",fulfillmentHandler:["",F.kI.required],checker:{},calculator:{},customFields:u.formBuilder.group(u.customFields.reduce(function(e,t){return Object.assign(Object.assign({},e),s({},t.name,""))},{}))}),u}return v(n,[{key:"ngOnInit",value:function(){var e=this;this.init(),(0,P.aj)([this.dataService.shippingMethod.getShippingMethodOperations().single$,this.entity$.pipe((0,h.q)(1))]).subscribe(function(t){var n=i(t,2),r=n[0],o=n[1];e.checkers=r.shippingEligibilityCheckers,e.calculators=r.shippingCalculators,e.fulfillmentHandlers=r.fulfillmentHandlers,e.changeDetector.markForCheck(),e.selectedCheckerDefinition=r.shippingEligibilityCheckers.find(function(e){return e.code===(o.checker&&o.checker.code)}),e.selectedCalculatorDefinition=r.shippingCalculators.find(function(e){return e.code===(o.calculator&&o.calculator.code)})}),this.activeChannel$=this.dataService.settings.getActiveChannel().mapStream(function(e){return e.activeChannel}),this.testResult$=this.fetchTestResult$.pipe((0,y.w)(function(t){var n=i(t,2),r=n[0],o=n[1];if(!e.selectedChecker||!e.selectedCalculator)return(0,I.of)(void 0);var a=e.detailForm.value,s={shippingAddress:Object.assign(Object.assign({},r),{streetLine1:"test"}),lines:o.map(function(e){return{productVariantId:e.id,quantity:e.quantity}}),checker:(0,d.RnJ)(e.selectedChecker,a.checker),calculator:(0,d.RnJ)(e.selectedCalculator,a.calculator)};return e.dataService.shippingMethod.testShippingMethod(s).mapSingle(function(e){return e.testShippingMethod})})),(0,w.T)(this.detailForm.get(["checker"]).valueChanges,this.detailForm.get(["calculator"]).valueChanges).pipe((0,T.R)(this.destroy$)).subscribe(function(){return e.testDataUpdated=!0})}},{key:"ngOnDestroy",value:function(){this.destroy()}},{key:"updateCode",value:function(e,t){if(!e){var n=this.detailForm.get(["code"]);n&&n.pristine&&n.setValue((0,S.U)(t,"-"))}}},{key:"selectChecker",value:function(e){this.selectedCheckerDefinition=e,this.selectedChecker=(0,d.miO)(e);var t=this.detailForm.get("checker");t&&(t.clearValidators(),t.updateValueAndValidity({onlySelf:!0}),t.patchValue(this.selectedChecker)),this.detailForm.markAsDirty()}},{key:"selectCalculator",value:function(e){this.selectedCalculatorDefinition=e,this.selectedCalculator=(0,d.miO)(e);var t=this.detailForm.get("calculator");t&&(t.clearValidators(),t.updateValueAndValidity({onlySelf:!0}),t.patchValue(this.selectedCalculator)),this.detailForm.markAsDirty()}},{key:"create",value:function(){var e=this,t=this.selectedChecker,n=this.selectedCalculator;!t||!n||(0,P.aj)([this.entity$,this.languageCode$]).pipe((0,h.q)(1),(0,Z.zg)(function(r){var o=i(r,2),a=o[0],s=o[1],c=e.detailForm.value,l=Object.assign(Object.assign({},e.getUpdatedShippingMethod(a,e.detailForm,s)),{checker:(0,d.RnJ)(t,c.checker),calculator:(0,d.RnJ)(n,c.calculator)});return e.dataService.shippingMethod.createShippingMethod(l)})).subscribe(function(t){e.notificationService.success((0,k.J)("common.notify-create-success"),{entity:"ShippingMethod"}),e.detailForm.markAsPristine(),e.changeDetector.markForCheck(),e.router.navigate(["../",t.createShippingMethod.id],{relativeTo:e.route})},function(t){e.notificationService.error((0,k.J)("common.notify-create-error"),{entity:"ShippingMethod"})})}},{key:"save",value:function(){var e=this,t=this.selectedChecker,n=this.selectedCalculator;!t||!n||(0,P.aj)([this.entity$,this.languageCode$]).pipe((0,h.q)(1),(0,Z.zg)(function(r){var o=i(r,2),a=o[0],s=o[1],c=e.detailForm.value,l=Object.assign(Object.assign({},e.getUpdatedShippingMethod(a,e.detailForm,s)),{checker:(0,d.RnJ)(t,c.checker),calculator:(0,d.RnJ)(n,c.calculator)});return e.dataService.shippingMethod.updateShippingMethod(l)})).subscribe(function(t){e.notificationService.success((0,k.J)("common.notify-update-success"),{entity:"ShippingMethod"}),e.detailForm.markAsPristine(),e.changeDetector.markForCheck()},function(t){console.error(t),e.notificationService.error((0,k.J)("common.notify-update-error"),{entity:"ShippingMethod"})})}},{key:"setTestOrderLines",value:function(e){this.testOrderLines=e,this.testDataUpdated=!0}},{key:"setTestAddress",value:function(e){this.testAddress=e,this.testDataUpdated=!0}},{key:"allTestDataPresent",value:function(){return!!(this.testAddress&&this.testOrderLines&&this.testOrderLines.length&&this.selectedChecker&&this.selectedCalculator)}},{key:"runTest",value:function(){this.fetchTestResult$.next([this.testAddress,this.testOrderLines]),this.testDataUpdated=!1}},{key:"getUpdatedShippingMethod",value:function(e,t,n){var r=t.value,i=(0,d.iSy)({translatable:e,updatedFields:r,customFieldConfig:this.customFields,languageCode:n,defaultTranslation:{languageCode:n,name:e.name||"",description:e.description||""}});return Object.assign(Object.assign({},i),{fulfillmentHandler:r.fulfillmentHandler})}},{key:"setFormValues",value:function(e,t){var n,r,i,o,a=(0,d.ZIM)(e,t);this.detailForm.patchValue({name:null!==(n=null==a?void 0:a.name)&&void 0!==n?n:"",description:null!==(r=null==a?void 0:a.description)&&void 0!==r?r:"",code:e.code,fulfillmentHandler:e.fulfillmentHandlerCode,checker:e.checker||{},calculator:e.calculator||{}}),this.selectedChecker||(this.selectedChecker=e.checker&&{code:e.checker.code,args:e.checker.args.map(function(e){return Object.assign(Object.assign({},e),{value:(0,d.sux)(e.value)})})}),this.selectedCalculator||(this.selectedCalculator=e.calculator&&{code:null===(i=e.calculator)||void 0===i?void 0:i.code,args:null===(o=e.calculator)||void 0===o?void 0:o.args.map(function(e){return Object.assign(Object.assign({},e),{value:(0,d.sux)(e.value)})})}),this.customFields.length&&this.setCustomFieldFormValues(this.customFields,this.detailForm.get(["customFields"]),e,a)}}]),n}(d.UT_);Bn.\u0275fac=function(e){return new(e||Bn)(l.Y36(L.F0),l.Y36(L.gz),l.Y36(d.iHG),l.Y36(l.sBO),l.Y36(d.DoR),l.Y36(F.qu),l.Y36(d.gqp))},Bn.\u0275cmp=l.Xpm({type:Bn,selectors:[["vdr-shipping-method-detail"]],features:[l.qOj],decls:23,vars:22,consts:[[3,"entity"],[3,"disabled","availableLanguageCodes","currentLanguageCode","languageCodeChange"],["locationId","shipping-method-detail"],["class","btn btn-primary",3,"disabled","click",4,"ngIf","ngIfElse"],["updateButton",""],["class","form",3,"formGroup",4,"ngIf"],[1,"testing-tool"],[4,"clrIfExpanded"],[1,"btn","btn-primary",3,"disabled","click"],["class","btn btn-primary",3,"disabled","click",4,"vdrIfPermissions"],[1,"form",3,"formGroup"],["for","name",3,"label"],["id","name","type","text","formControlName","name",3,"readonly","input"],["for","code",3,"label","readOnlyToggle"],["id","code","type","text","formControlName","code",3,"readonly"],["formControlName","description",3,"readonly","label"],["for","fulfillmentHandler",1,"mb2",3,"label"],["name","fulfillmentHandler","formControlName","fulfillmentHandler",3,"vdrDisabled"],[3,"value",4,"ngFor","ngForOf"],["formGroupName","customFields",4,"ngIf"],["locationId","shipping-method-detail",3,"entity$","detailForm"],[1,"clr-row","mt4"],[1,"clr-col"],[1,"clr-control-label"],["formControlName","checker",3,"operation","operationDefinition","readonly","remove",4,"ngIf"],[4,"ngIf"],["formControlName","calculator",3,"operation","operationDefinition","readonly","remove",4,"ngIf"],[3,"value"],["formGroupName","customFields"],["entityName","ShippingMethod",3,"customFields","customFieldsFormGroup","readonly"],["formControlName","checker",3,"operation","operationDefinition","readonly","remove"],["vdrDropdownTrigger","",1,"btn","btn-outline"],["shape","plus"],["vdrPosition","bottom-left"],["type","button","vdrDropdownItem","",3,"click",4,"ngFor","ngForOf"],["type","button","vdrDropdownItem","",3,"click"],["formControlName","calculator",3,"operation","operationDefinition","readonly","remove"],[1,"clr-row"],[3,"orderLinesChange"],[3,"addressChange"],[3,"currencyCode","okToRun","testDataUpdated","testResult","runTest"]],template:function(e,t){if(1&e&&(l.TgZ(0,"vdr-action-bar"),l.TgZ(1,"vdr-ab-left"),l._UZ(2,"vdr-entity-info",0),l.ALo(3,"async"),l.TgZ(4,"vdr-language-selector",1),l.NdJ("languageCodeChange",function(e){return t.setLanguage(e)}),l.ALo(5,"async"),l.ALo(6,"async"),l.ALo(7,"async"),l.qZA(),l.qZA(),l.TgZ(8,"vdr-ab-right"),l._UZ(9,"vdr-action-bar-items",2),l.YNc(10,ht,3,4,"button",3),l.ALo(11,"async"),l.YNc(12,yt,1,1,"ng-template",null,4,l.W1O),l.qZA(),l.qZA(),l.YNc(14,kt,33,42,"form",5),l.ALo(15,"async"),l.TgZ(16,"div",6),l.TgZ(17,"clr-accordion"),l.TgZ(18,"clr-accordion-panel"),l.TgZ(19,"clr-accordion-title"),l._uU(20),l.ALo(21,"translate"),l.qZA(),l.YNc(22,Jt,9,8,"clr-accordion-content",7),l.qZA(),l.qZA(),l.qZA()),2&e){var n=l.MAs(13);l.xp6(2),l.Q6J("entity",l.lcZ(3,8,t.entity$)),l.xp6(2),l.Q6J("disabled",l.lcZ(5,10,t.isNew$))("availableLanguageCodes",l.lcZ(6,12,t.availableLanguages$))("currentLanguageCode",l.lcZ(7,14,t.languageCode$)),l.xp6(6),l.Q6J("ngIf",l.lcZ(11,16,t.isNew$))("ngIfElse",n),l.xp6(4),l.Q6J("ngIf",l.lcZ(15,18,t.entity$)),l.xp6(6),l.Oqu(l.lcZ(21,20,"settings.test-shipping-method"))}},directives:function(){return[d.KkL,d.BND,d.Vqt,d.SdP,d.mz,d.WWO,D.O5,Q.bZL,Q.twP,Q.GmI,Q.dxz,Q.UJ5,Q.Nz$,Q.DbV,d.HAh,F._Y,F.JL,F.sg,d.hgI,d.y_K,F.Fj,F.JJ,F.u,d.YI,F.EJ,d.x3T,D.sg,d.CWh,Q.MgK,F.YN,F.Kr,F.x0,d.yc0,d.qq8,d.JOL,d.UaT,Q.qvL,d.N9E,d.HH4,Q.r6y,rr,nr,Wn]},pipes:function(){return[D.Ov,N.X$,d.j$k]},styles:[".testing-tool[_ngcontent-%COMP%]{margin-top:48px;margin-bottom:128px}.testing-tool[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-bottom:12px}"],changeDetection:0}),Bn.ctorParameters=function(){return[{type:L.F0},{type:L.gz},{type:d.iHG},{type:l.sBO},{type:d.DoR},{type:F.qu},{type:d.gqp}]};var Vn=function(e){c(r,e);var n=u(r);function r(e,i,o,a,s,c){var l,u;return g(this,r),(u=n.call(this,s,c)).modalService=e,u.notificationService=i,u.dataService=o,u.serverConfigService=a,u.testDataUpdated=!1,u.fetchTestResult$=new U.xQ,t((l=m(u),p(r.prototype)),"setQueryFn",l).call(l,function(){var e;return(e=u.dataService.shippingMethod).getShippingMethods.apply(e,arguments).refetchOnChannelChange()},function(e){return e.shippingMethods}),u}return v(r,[{key:"ngOnInit",value:function(){var e=this;t(p(r.prototype),"ngOnInit",this).call(this),this.testResult$=this.fetchTestResult$.pipe((0,y.w)(function(t){var n=i(t,2),r=n[0],o=n[1],a={shippingAddress:Object.assign(Object.assign({},r),{streetLine1:"test"}),lines:o.map(function(e){return{productVariantId:e.id,quantity:e.quantity}})};return e.dataService.shippingMethod.testEligibleShippingMethods(a).mapSingle(function(e){return e.testEligibleShippingMethods})})),this.activeChannel$=this.dataService.settings.getActiveChannel().mapStream(function(e){return e.activeChannel}),this.availableLanguages$=this.serverConfigService.getAvailableLanguages(),this.contentLanguage$=this.dataService.client.uiState().mapStream(function(e){return e.uiState.contentLanguage}).pipe((0,A.b)(function(){return e.refresh()}))}},{key:"deleteShippingMethod",value:function(e){var t=this;this.modalService.dialog({title:(0,k.J)("catalog.confirm-delete-shipping-method"),buttons:[{type:"secondary",label:(0,k.J)("common.cancel")},{type:"danger",label:(0,k.J)("common.delete"),returnValue:!0}]}).pipe((0,y.w)(function(n){return n?t.dataService.shippingMethod.deleteShippingMethod(e):_.E})).subscribe(function(){t.notificationService.success((0,k.J)("common.notify-delete-success"),{entity:"ShippingMethod"}),t.refresh()},function(e){t.notificationService.error((0,k.J)("common.notify-delete-error"),{entity:"ShippingMethod"})})}},{key:"setTestOrderLines",value:function(e){this.testOrderLines=e,this.testDataUpdated=!0}},{key:"setTestAddress",value:function(e){this.testAddress=e,this.testDataUpdated=!0}},{key:"allTestDataPresent",value:function(){return!!(this.testAddress&&this.testOrderLines&&this.testOrderLines.length)}},{key:"runTest",value:function(){this.fetchTestResult$.next([this.testAddress,this.testOrderLines]),this.testDataUpdated=!1}},{key:"setLanguage",value:function(e){this.dataService.client.setContentLanguage(e).subscribe()}}]),r}(d.t7C);Vn.\u0275fac=function(e){return new(e||Vn)(l.Y36(d.Z7U),l.Y36(d.gqp),l.Y36(d.DoR),l.Y36(d.iHG),l.Y36(L.F0),l.Y36(L.gz))},Vn.\u0275cmp=l.Xpm({type:Vn,selectors:[["vdr-shipping-method-list"]],features:[l.qOj],decls:29,vars:29,consts:[[3,"availableLanguageCodes","currentLanguageCode","languageCodeChange"],["locationId","shipping-method-list"],["class","btn btn-primary",3,"routerLink",4,"vdrIfPermissions"],[3,"items","itemsPerPage","totalItems","currentPage","pageChange","itemsPerPageChange"],[1,"testing-tool"],[4,"clrIfExpanded"],[1,"btn","btn-primary",3,"routerLink"],["shape","plus"],[1,"left","align-middle"],[1,"right","align-middle"],["iconShape","edit",3,"label","linkTo"],["type","button","vdrDropdownTrigger","",1,"btn","btn-link","btn-sm"],["shape","caret down"],["vdrPosition","bottom-right"],["type","button","vdrDropdownItem","",1,"delete-button",3,"disabled","click"],["shape","trash",1,"is-danger"],[1,"clr-row"],[1,"clr-col"],[3,"orderLinesChange"],[3,"addressChange"],[3,"currencyCode","okToRun","testDataUpdated","testResult","runTest"]],template:function(e,t){1&e&&(l.TgZ(0,"vdr-action-bar"),l.TgZ(1,"vdr-ab-left"),l.TgZ(2,"vdr-language-selector",0),l.NdJ("languageCodeChange",function(e){return t.setLanguage(e)}),l.ALo(3,"async"),l.ALo(4,"async"),l.qZA(),l.qZA(),l.TgZ(5,"vdr-ab-right"),l._UZ(6,"vdr-action-bar-items",1),l.YNc(7,_t,4,5,"a",2),l.qZA(),l.qZA(),l.TgZ(8,"vdr-data-table",3),l.NdJ("pageChange",function(e){return t.setPageNumber(e)})("itemsPerPageChange",function(e){return t.setItemsPerPage(e)}),l.ALo(9,"async"),l.ALo(10,"async"),l.ALo(11,"async"),l.ALo(12,"async"),l.TgZ(13,"vdr-dt-column"),l._uU(14),l.ALo(15,"translate"),l.qZA(),l.TgZ(16,"vdr-dt-column"),l._uU(17),l.ALo(18,"translate"),l.qZA(),l._UZ(19,"vdr-dt-column"),l._UZ(20,"vdr-dt-column"),l.YNc(21,Pt,19,18,"ng-template"),l.qZA(),l.TgZ(22,"div",4),l.TgZ(23,"clr-accordion"),l.TgZ(24,"clr-accordion-panel"),l.TgZ(25,"clr-accordion-title"),l._uU(26),l.ALo(27,"translate"),l.qZA(),l.YNc(28,It,9,8,"clr-accordion-content",5),l.qZA(),l.qZA(),l.qZA()),2&e&&(l.xp6(2),l.Q6J("availableLanguageCodes",l.lcZ(3,10,t.availableLanguages$))("currentLanguageCode",l.lcZ(4,12,t.contentLanguage$)),l.xp6(5),l.Q6J("vdrIfPermissions",l.DdM(28,wt)),l.xp6(1),l.Q6J("items",l.lcZ(9,14,t.items$))("itemsPerPage",l.lcZ(10,16,t.itemsPerPage$))("totalItems",l.lcZ(11,18,t.totalItems$))("currentPage",l.lcZ(12,20,t.currentPage$)),l.xp6(6),l.Oqu(l.lcZ(15,22,"common.code")),l.xp6(3),l.Oqu(l.lcZ(18,24,"common.name")),l.xp6(9),l.Oqu(l.lcZ(27,26,"settings.test-shipping-methods")))},directives:function(){return[d.KkL,d.BND,d.SdP,d.mz,d.WWO,d.HAh,d.Qj_,d.Egy,Q.bZL,Q.twP,Q.GmI,Q.dxz,Q.UJ5,Q.Nz$,Q.DbV,L.yS,Q.qvL,d.v_8,d.JOL,d.UaT,d.N9E,d.HH4,Q.r6y,rr,nr,Gn]},pipes:function(){return[D.Ov,N.X$,d.j$k]},styles:[".testing-tool[_ngcontent-%COMP%]{margin-top:48px}"],changeDetection:0}),Vn.ctorParameters=function(){return[{type:d.Z7U},{type:d.gqp},{type:d.DoR},{type:d.iHG},{type:L.F0},{type:L.gz}]};var Wn=v(function e(){g(this,e),this.okToRun=!1,this.testDataUpdated=!1,this.runTest=new l.vpe});Wn.\u0275fac=function(e){return new(e||Wn)},Wn.\u0275cmp=l.Xpm({type:Wn,selectors:[["vdr-shipping-method-test-result"]],inputs:{okToRun:"okToRun",testDataUpdated:"testDataUpdated",testResult:"testResult",currencyCode:"currencyCode"},outputs:{runTest:"runTest"},decls:21,vars:24,consts:[[1,"test-result","card",3,"ngClass"],[1,"card-header"],[1,"card-block"],[1,"result-details"],[3,"label"],[1,"eligible-icon"],["shape","success-standard","class","is-solid success",4,"ngIf"],["shape","ban","class","is-solid error",4,"ngIf"],["shape","unknown-status",4,"ngIf"],[1,"price-row"],[3,"label",4,"ngIf"],[3,"value",4,"ngIf"],[1,"card-footer"],[1,"btn","btn-secondary",3,"disabled","click"],["shape","success-standard",1,"is-solid","success"],["shape","ban",1,"is-solid","error"],["shape","unknown-status"],[3,"value"]],template:function(e,t){1&e&&(l.TgZ(0,"div",0),l.TgZ(1,"div",1),l._uU(2),l.ALo(3,"translate"),l.qZA(),l.TgZ(4,"div",2),l.TgZ(5,"div",3),l.TgZ(6,"vdr-labeled-data",4),l.ALo(7,"translate"),l.TgZ(8,"div",5),l.YNc(9,St,1,0,"clr-icon",6),l.YNc(10,Ot,1,0,"clr-icon",7),l.YNc(11,Dt,1,0,"clr-icon",8),l.qZA(),l._uU(12),l.qZA(),l.TgZ(13,"div",9),l.YNc(14,Nt,4,7,"vdr-labeled-data",10),l.YNc(15,Qt,4,7,"vdr-labeled-data",10),l.qZA(),l.YNc(16,Mt,1,1,"vdr-object-tree",11),l.qZA(),l.qZA(),l.TgZ(17,"div",12),l.TgZ(18,"button",13),l.NdJ("click",function(){return t.runTest.emit()}),l._uU(19),l.ALo(20,"translate"),l.qZA(),l.qZA(),l.qZA()),2&e&&(l.Q6J("ngClass",l.kEZ(20,Yt,!0===(null==t.testResult?null:t.testResult.eligible),!1===(null==t.testResult?null:t.testResult.eligible),!t.testResult)),l.xp6(2),l.hij(" ",l.lcZ(3,14,"settings.test-result")," "),l.xp6(3),l.ekj("stale",t.testDataUpdated),l.xp6(1),l.Q6J("label",l.lcZ(7,16,"settings.eligible")),l.xp6(3),l.Q6J("ngIf",null==t.testResult?null:t.testResult.eligible),l.xp6(1),l.Q6J("ngIf",!1===(null==t.testResult?null:t.testResult.eligible)),l.xp6(1),l.Q6J("ngIf",!t.testResult),l.xp6(1),l.hij(" ",null==t.testResult?null:t.testResult.eligible," "),l.xp6(2),l.Q6J("ngIf",null!=(null==t.testResult||null==t.testResult.quote?null:t.testResult.quote.price)),l.xp6(1),l.Q6J("ngIf",null!=(null==t.testResult||null==t.testResult.quote?null:t.testResult.quote.priceWithTax)),l.xp6(1),l.Q6J("ngIf",null==t.testResult||null==t.testResult.quote?null:t.testResult.quote.metadata),l.xp6(2),l.Q6J("disabled",!t.okToRun),l.xp6(1),l.hij(" ",l.lcZ(20,18,"settings.test-shipping-method")," "))},directives:[D.mk,d.WGc,D.O5,Q.qvL,d._8q],pipes:[N.X$,d.kgx],styles:[".test-result.success[_ngcontent-%COMP%]   .card-block[_ngcontent-%COMP%]{background-color:var(--color-success-100)}.test-result.error[_ngcontent-%COMP%]   .card-block[_ngcontent-%COMP%]{background-color:var(--color-error-100)}.test-result.unknown[_ngcontent-%COMP%]   .card-block[_ngcontent-%COMP%]{background-color:var(--color-component-bg-100)}.result-details[_ngcontent-%COMP%]{transition:opacity .2s}.result-details.stale[_ngcontent-%COMP%]{opacity:.5}.eligible-icon[_ngcontent-%COMP%]{display:inline-block}.eligible-icon[_ngcontent-%COMP%]   .success[_ngcontent-%COMP%]{color:var(--color-success-500)}.eligible-icon[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{color:var(--color-error-500)}.price-row[_ngcontent-%COMP%]{display:flex}.price-row[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:not(:first-child){margin-left:24px}"],changeDetection:0}),Wn.propDecorators={testResult:[{type:l.IIB}],okToRun:[{type:l.IIB}],testDataUpdated:[{type:l.IIB}],currencyCode:[{type:l.IIB}],runTest:[{type:l.r_U}]};var Kn=function(e){c(n,e);var t=u(n);function n(e,r,i,o,a,c,l){var u;return g(this,n),(u=t.call(this,r,e,i,a)).changeDetector=o,u.dataService=a,u.formBuilder=c,u.notificationService=l,u.updatePermission=[d.y3$.UpdateSettings,d.y3$.UpdateTaxCategory],u.customFields=u.getCustomFieldConfig("TaxCategory"),u.detailForm=u.formBuilder.group({name:["",F.kI.required],isDefault:!1,customFields:u.formBuilder.group(u.customFields.reduce(function(e,t){return Object.assign(Object.assign({},e),s({},t.name,""))},{}))}),u}return v(n,[{key:"ngOnInit",value:function(){this.init(),this.taxCategory$=this.entity$}},{key:"ngOnDestroy",value:function(){this.destroy()}},{key:"saveButtonEnabled",value:function(){return this.detailForm.dirty&&this.detailForm.valid}},{key:"create",value:function(){var e=this;if(this.detailForm.dirty){var t=this.detailForm.value,n={name:t.name,isDefault:t.isDefault,customFields:t.customFields};this.dataService.settings.createTaxCategory(n).subscribe(function(t){e.notificationService.success((0,k.J)("common.notify-create-success"),{entity:"TaxCategory"}),e.detailForm.markAsPristine(),e.changeDetector.markForCheck(),e.router.navigate(["../",t.createTaxCategory.id],{relativeTo:e.route})},function(t){e.notificationService.error((0,k.J)("common.notify-create-error"),{entity:"TaxCategory"})})}}},{key:"save",value:function(){var e=this;if(this.detailForm.dirty){var t=this.detailForm.value;this.taxCategory$.pipe((0,h.q)(1),(0,Z.zg)(function(n){var r={id:n.id,name:t.name,isDefault:t.isDefault,customFields:t.customFields};return e.dataService.settings.updateTaxCategory(r)})).subscribe(function(t){e.notificationService.success((0,k.J)("common.notify-update-success"),{entity:"TaxCategory"}),e.detailForm.markAsPristine(),e.changeDetector.markForCheck()},function(t){e.notificationService.error((0,k.J)("common.notify-update-error"),{entity:"TaxCategory"})})}}},{key:"setFormValues",value:function(e,t){this.detailForm.patchValue({name:e.name,isDefault:e.isDefault}),this.customFields.length&&this.setCustomFieldFormValues(this.customFields,this.detailForm.get("customFields"),e)}}]),n}(d.UT_);Kn.\u0275fac=function(e){return new(e||Kn)(l.Y36(L.F0),l.Y36(L.gz),l.Y36(d.iHG),l.Y36(l.sBO),l.Y36(d.DoR),l.Y36(F.qu),l.Y36(d.gqp))},Kn.\u0275cmp=l.Xpm({type:Kn,selectors:[["vdr-tax-detail"]],features:[l.qOj],decls:22,vars:23,consts:[[3,"entity"],["locationId","tax-category-detail"],["class","btn btn-primary",3,"disabled","click",4,"ngIf","ngIfElse"],["updateButton",""],[1,"form",3,"formGroup"],["for","name",3,"label"],["id","name","type","text","formControlName","name",3,"readonly"],["for","isDefault",3,"label"],["type","checkbox","clrToggle","","id","isDefault","formControlName","isDefault",3,"vdrDisabled"],["formGroupName","customFields",4,"ngIf"],["locationId","tax-category-detail",3,"entity$","detailForm"],[1,"btn","btn-primary",3,"disabled","click"],["class","btn btn-primary",3,"disabled","click",4,"vdrIfPermissions"],["formGroupName","customFields"],["entityName","TaxCategory",3,"customFields","customFieldsFormGroup","readonly"]],template:function(e,t){if(1&e&&(l.TgZ(0,"vdr-action-bar"),l.TgZ(1,"vdr-ab-left"),l._UZ(2,"vdr-entity-info",0),l.ALo(3,"async"),l.qZA(),l.TgZ(4,"vdr-ab-right"),l._UZ(5,"vdr-action-bar-items",1),l.YNc(6,$t,3,4,"button",2),l.ALo(7,"async"),l.YNc(8,jt,1,1,"ng-template",null,3,l.W1O),l.qZA(),l.qZA(),l.TgZ(10,"form",4),l.TgZ(11,"vdr-form-field",5),l.ALo(12,"translate"),l._UZ(13,"input",6),l.ALo(14,"hasPermission"),l.qZA(),l.TgZ(15,"vdr-form-field",7),l.ALo(16,"translate"),l.TgZ(17,"clr-toggle-wrapper"),l._UZ(18,"input",8),l.ALo(19,"hasPermission"),l.qZA(),l.qZA(),l.YNc(20,zt,6,8,"section",9),l._UZ(21,"vdr-custom-detail-component-host",10),l.qZA()),2&e){var n=l.MAs(9);l.xp6(2),l.Q6J("entity",l.lcZ(3,11,t.entity$)),l.xp6(4),l.Q6J("ngIf",l.lcZ(7,13,t.isNew$))("ngIfElse",n),l.xp6(4),l.Q6J("formGroup",t.detailForm),l.xp6(1),l.Q6J("label",l.lcZ(12,15,"common.name")),l.xp6(2),l.Q6J("readonly",!l.lcZ(14,17,t.updatePermission)),l.xp6(2),l.Q6J("label",l.lcZ(16,19,"common.default-tax-category")),l.xp6(3),l.Q6J("vdrDisabled",!l.lcZ(19,21,t.updatePermission)),l.xp6(2),l.Q6J("ngIf",t.customFields.length),l.xp6(1),l.Q6J("entity$",t.entity$)("detailForm",t.detailForm)}},directives:[d.KkL,d.BND,d.Vqt,d.mz,d.WWO,D.O5,F._Y,F.JL,F.sg,d.hgI,d.y_K,F.Fj,F.JJ,F.u,Q.PEh,F.Wl,Q.KKC,d.x3T,d.CWh,d.HAh,F.x0,Q.MgK,d.yc0],pipes:[D.Ov,N.X$,d.j$k],styles:[""],changeDetection:0}),Kn.ctorParameters=function(){return[{type:L.F0},{type:L.gz},{type:d.iHG},{type:l.sBO},{type:d.DoR},{type:F.qu},{type:d.gqp}]};var Xn=function(){function e(t,n,r){g(this,e),this.dataService=t,this.notificationService=n,this.modalService=r,this.queryResult=this.dataService.settings.getTaxCategories(),this.taxCategories$=this.queryResult.mapStream(function(e){return e.taxCategories})}return v(e,[{key:"deleteTaxCategory",value:function(e){var t=this;return this.modalService.dialog({title:(0,k.J)("settings.confirm-delete-tax-category"),body:e.name,buttons:[{type:"secondary",label:(0,k.J)("common.cancel")},{type:"danger",label:(0,k.J)("common.delete"),returnValue:!0}]}).pipe((0,y.w)(function(n){return n?t.dataService.settings.deleteTaxCategory(e.id):_.E}),(0,f.U)(function(e){return e.deleteTaxCategory})).subscribe(function(e){e.result===d.PcR.DELETED?(t.notificationService.success((0,k.J)("common.notify-delete-success"),{entity:"TaxRate"}),t.queryResult.ref.refetch()):t.notificationService.error(e.message||(0,k.J)("common.notify-delete-error"),{entity:"TaxRate"})},function(e){t.notificationService.error((0,k.J)("common.notify-delete-error"),{entity:"TaxRate"})})}}]),e}();Xn.\u0275fac=function(e){return new(e||Xn)(l.Y36(d.DoR),l.Y36(d.gqp),l.Y36(d.Z7U))},Xn.\u0275cmp=l.Xpm({type:Xn,selectors:[["vdr-tax-list"]],decls:13,vars:8,consts:[["locationId","tax-category-list"],["class","btn btn-primary",3,"routerLink",4,"vdrIfPermissions"],[3,"items"],[1,"btn","btn-primary",3,"routerLink"],["shape","plus"],[1,"left","align-middle"],[4,"ngIf"],[1,"right","align-middle"],["iconShape","edit",3,"label","linkTo"],["type","button","vdrDropdownTrigger","",1,"btn","btn-link","btn-sm"],["shape","caret down"],["vdrPosition","bottom-right"],["type","button","vdrDropdownItem","",1,"delete-button",3,"disabled","click"],["shape","trash",1,"is-danger"]],template:function(e,t){1&e&&(l.TgZ(0,"vdr-action-bar"),l.TgZ(1,"vdr-ab-right"),l._UZ(2,"vdr-action-bar-items",0),l.YNc(3,Ht,4,5,"a",1),l.qZA(),l.qZA(),l.TgZ(4,"vdr-data-table",2),l.ALo(5,"async"),l.TgZ(6,"vdr-dt-column"),l._uU(7),l.ALo(8,"translate"),l.qZA(),l._UZ(9,"vdr-dt-column"),l._UZ(10,"vdr-dt-column"),l._UZ(11,"vdr-dt-column"),l.YNc(12,Bt,19,18,"ng-template"),l.qZA()),2&e&&(l.xp6(3),l.Q6J("vdrIfPermissions",l.DdM(7,Vt)),l.xp6(1),l.Q6J("items",l.lcZ(5,3,t.taxCategories$)),l.xp6(3),l.Oqu(l.lcZ(8,5,"common.name")))},directives:[d.KkL,d.mz,d.WWO,d.HAh,d.Qj_,d.Egy,L.yS,Q.qvL,D.O5,d.v_8,d.JOL,d.UaT,d.N9E,d.HH4,d.Ywx],pipes:[D.Ov,N.X$,d.j$k],styles:[""],changeDetection:0}),Xn.ctorParameters=function(){return[{type:d.DoR},{type:d.gqp},{type:d.Z7U}]};var er=function(e){c(n,e);var t=u(n);function n(e,r,i,o,a,c,l){var u;return g(this,n),(u=t.call(this,r,e,i,a)).changeDetector=o,u.dataService=a,u.formBuilder=c,u.notificationService=l,u.updatePermission=[d.y3$.UpdateSettings,d.y3$.UpdateTaxRate],u.customFields=u.getCustomFieldConfig("TaxRate"),u.detailForm=u.formBuilder.group({name:["",F.kI.required],enabled:[!0],value:[0,F.kI.required],taxCategoryId:[""],zoneId:[""],customerGroupId:[""],customFields:u.formBuilder.group(u.customFields.reduce(function(e,t){return Object.assign(Object.assign({},e),s({},t.name,""))},{}))}),u}return v(n,[{key:"ngOnInit",value:function(){this.init(),this.taxCategories$=this.dataService.settings.getTaxCategories().mapSingle(function(e){return e.taxCategories}),this.zones$=this.dataService.settings.getZones().mapSingle(function(e){return e.zones})}},{key:"ngOnDestroy",value:function(){this.destroy()}},{key:"saveButtonEnabled",value:function(){return this.detailForm.dirty&&this.detailForm.valid}},{key:"create",value:function(){var e=this;if(this.detailForm.dirty){var t=this.detailForm.value,n={name:t.name,enabled:t.enabled,value:t.value,categoryId:t.taxCategoryId,zoneId:t.zoneId,customerGroupId:t.customerGroupId,customFields:t.customFields};this.dataService.settings.createTaxRate(n).subscribe(function(t){e.notificationService.success((0,k.J)("common.notify-create-success"),{entity:"TaxRate"}),e.detailForm.markAsPristine(),e.changeDetector.markForCheck(),e.router.navigate(["../",t.createTaxRate.id],{relativeTo:e.route})},function(t){e.notificationService.error((0,k.J)("common.notify-create-error"),{entity:"TaxRate"})})}}},{key:"save",value:function(){var e=this;if(this.detailForm.dirty){var t=this.detailForm.value;this.entity$.pipe((0,h.q)(1),(0,Z.zg)(function(n){var r={id:n.id,name:t.name,enabled:t.enabled,value:t.value,categoryId:t.taxCategoryId,zoneId:t.zoneId,customerGroupId:t.customerGroupId,customFields:t.customFields};return e.dataService.settings.updateTaxRate(r)})).subscribe(function(t){e.notificationService.success((0,k.J)("common.notify-update-success"),{entity:"TaxRate"}),e.detailForm.markAsPristine(),e.changeDetector.markForCheck()},function(t){e.notificationService.error((0,k.J)("common.notify-update-error"),{entity:"TaxRate"})})}}},{key:"setFormValues",value:function(e,t){this.detailForm.patchValue({name:e.name,enabled:e.enabled,value:e.value,taxCategoryId:e.category?e.category.id:"",zoneId:e.zone?e.zone.id:"",customerGroupId:e.customerGroup?e.customerGroup.id:""}),this.customFields.length&&this.setCustomFieldFormValues(this.customFields,this.detailForm.get("customFields"),e)}}]),n}(d.UT_);er.\u0275fac=function(e){return new(e||er)(l.Y36(L.F0),l.Y36(L.gz),l.Y36(d.iHG),l.Y36(l.sBO),l.Y36(d.DoR),l.Y36(F.qu),l.Y36(d.gqp))},er.\u0275cmp=l.Xpm({type:er,selectors:[["vdr-tax-rate-detail"]],features:[l.qOj],decls:39,vars:47,consts:[[3,"entity"],["locationId","tax-rate-detail"],["class","btn btn-primary",3,"disabled","click",4,"ngIf","ngIfElse"],["updateButton",""],[1,"form",3,"formGroup"],["for","name",3,"label"],["id","name","type","text","formControlName","name",3,"readonly"],["for","enabled",3,"label"],["type","checkbox","clrToggle","","id","enabled","formControlName","enabled",3,"vdrDisabled"],["for","value",3,"label"],["suffix","%"],["id","value","type","number","step","0.1","formControlName","value",3,"readonly"],["for","taxCategoryId",3,"label"],["clrSelect","","name","taxCategoryId","formControlName","taxCategoryId",3,"vdrDisabled"],[3,"value",4,"ngFor","ngForOf"],["for","zoneId",3,"label"],["clrSelect","","name","zoneId","formControlName","zoneId",3,"vdrDisabled"],["formGroupName","customFields",4,"ngIf"],["locationId","tax-rate-detail",3,"entity$","detailForm"],[1,"btn","btn-primary",3,"disabled","click"],["class","btn btn-primary",3,"disabled","click",4,"vdrIfPermissions"],[3,"value"],["formGroupName","customFields"],["entityName","TaxRate",3,"customFields","customFieldsFormGroup","readonly"]],template:function(e,t){if(1&e&&(l.TgZ(0,"vdr-action-bar"),l.TgZ(1,"vdr-ab-left"),l._UZ(2,"vdr-entity-info",0),l.ALo(3,"async"),l.qZA(),l.TgZ(4,"vdr-ab-right"),l._UZ(5,"vdr-action-bar-items",1),l.YNc(6,Wt,3,4,"button",2),l.ALo(7,"async"),l.YNc(8,Xt,1,1,"ng-template",null,3,l.W1O),l.qZA(),l.qZA(),l.TgZ(10,"form",4),l.TgZ(11,"vdr-form-field",5),l.ALo(12,"translate"),l._UZ(13,"input",6),l.ALo(14,"hasPermission"),l.qZA(),l.TgZ(15,"vdr-form-field",7),l.ALo(16,"translate"),l.TgZ(17,"clr-toggle-wrapper"),l._UZ(18,"input",8),l.ALo(19,"hasPermission"),l.qZA(),l.qZA(),l.TgZ(20,"vdr-form-field",9),l.ALo(21,"translate"),l.TgZ(22,"vdr-affixed-input",10),l._UZ(23,"input",11),l.ALo(24,"hasPermission"),l.qZA(),l.qZA(),l.TgZ(25,"vdr-form-field",12),l.ALo(26,"translate"),l.TgZ(27,"select",13),l.ALo(28,"hasPermission"),l.YNc(29,en,2,2,"option",14),l.ALo(30,"async"),l.qZA(),l.qZA(),l.TgZ(31,"vdr-form-field",15),l.ALo(32,"translate"),l.TgZ(33,"select",16),l.ALo(34,"hasPermission"),l.YNc(35,tn,2,2,"option",14),l.ALo(36,"async"),l.qZA(),l.qZA(),l.YNc(37,nn,6,8,"section",17),l._UZ(38,"vdr-custom-detail-component-host",18),l.qZA()),2&e){var n=l.MAs(9);l.xp6(2),l.Q6J("entity",l.lcZ(3,19,t.entity$)),l.xp6(4),l.Q6J("ngIf",l.lcZ(7,21,t.isNew$))("ngIfElse",n),l.xp6(4),l.Q6J("formGroup",t.detailForm),l.xp6(1),l.Q6J("label",l.lcZ(12,23,"common.name")),l.xp6(2),l.Q6J("readonly",!l.lcZ(14,25,t.updatePermission)),l.xp6(2),l.Q6J("label",l.lcZ(16,27,"common.enabled")),l.xp6(3),l.Q6J("vdrDisabled",!l.lcZ(19,29,t.updatePermission)),l.xp6(2),l.Q6J("label",l.lcZ(21,31,"settings.rate")),l.xp6(3),l.Q6J("readonly",!l.lcZ(24,33,t.updatePermission)),l.xp6(2),l.Q6J("label",l.lcZ(26,35,"settings.tax-category")),l.xp6(2),l.Q6J("vdrDisabled",!l.lcZ(28,37,t.updatePermission)),l.xp6(2),l.Q6J("ngForOf",l.lcZ(30,39,t.taxCategories$)),l.xp6(2),l.Q6J("label",l.lcZ(32,41,"settings.zone")),l.xp6(2),l.Q6J("vdrDisabled",!l.lcZ(34,43,t.updatePermission)),l.xp6(2),l.Q6J("ngForOf",l.lcZ(36,45,t.zones$)),l.xp6(2),l.Q6J("ngIf",t.customFields.length),l.xp6(1),l.Q6J("entity$",t.entity$)("detailForm",t.detailForm)}},directives:[d.KkL,d.BND,d.Vqt,d.mz,d.WWO,D.O5,F._Y,F.JL,F.sg,d.hgI,d.y_K,F.Fj,F.JJ,F.u,Q.PEh,F.Wl,Q.KKC,d.x3T,d.KH1,F.wV,F.EJ,Q.otW,D.sg,d.CWh,d.HAh,F.YN,F.Kr,F.x0,Q.MgK,d.yc0],pipes:[D.Ov,N.X$,d.j$k],styles:[""],changeDetection:0}),er.ctorParameters=function(){return[{type:L.F0},{type:L.gz},{type:d.iHG},{type:l.sBO},{type:d.DoR},{type:F.qu},{type:d.gqp}]};var tr=function(e){c(r,e);var n=u(r);function r(e,i,o,a,s){var c,l;return g(this,r),(l=n.call(this,a,s)).modalService=e,l.notificationService=i,l.dataService=o,t((c=m(l),p(r.prototype)),"setQueryFn",c).call(c,function(){var e;return(e=l.dataService.settings).getTaxRates.apply(e,arguments)},function(e){return e.taxRates}),l}return v(r,[{key:"deleteTaxRate",value:function(e){var t=this;return this.modalService.dialog({title:(0,k.J)("settings.confirm-delete-tax-rate"),body:e.name,buttons:[{type:"secondary",label:(0,k.J)("common.cancel")},{type:"danger",label:(0,k.J)("common.delete"),returnValue:!0}]}).pipe((0,y.w)(function(n){return n?t.dataService.settings.deleteTaxRate(e.id):_.E}),(0,f.U)(function(e){return e.deleteTaxRate})).subscribe(function(e){e.result===d.PcR.DELETED?(t.notificationService.success((0,k.J)("common.notify-delete-success"),{entity:"TaxRate"}),t.refresh()):t.notificationService.error(e.message||(0,k.J)("common.notify-delete-error"),{entity:"TaxRate"})},function(e){t.notificationService.error((0,k.J)("common.notify-delete-error"),{entity:"TaxRate"})})}}]),r}(d.t7C);tr.\u0275fac=function(e){return new(e||tr)(l.Y36(d.Z7U),l.Y36(d.gqp),l.Y36(d.DoR),l.Y36(L.F0),l.Y36(L.gz))},tr.\u0275cmp=l.Xpm({type:tr,selectors:[["vdr-tax-rate-list"]],features:[l.qOj],decls:24,vars:26,consts:[["locationId","tax-rate-list"],["class","btn btn-primary",3,"routerLink",4,"vdrIfPermissions"],[3,"items","itemsPerPage","totalItems","currentPage","pageChange","itemsPerPageChange"],[1,"btn","btn-primary",3,"routerLink"],["shape","plus"],[1,"left","align-middle"],[1,"right","align-middle"],["iconShape","edit",3,"label","linkTo"],["type","button","vdrDropdownTrigger","",1,"btn","btn-link","btn-sm"],["shape","caret down"],["vdrPosition","bottom-right"],["type","button","vdrDropdownItem","",1,"delete-button",3,"disabled","click"],["shape","trash",1,"is-danger"]],template:function(e,t){1&e&&(l.TgZ(0,"vdr-action-bar"),l.TgZ(1,"vdr-ab-right"),l._UZ(2,"vdr-action-bar-items",0),l.YNc(3,rn,4,5,"a",1),l.qZA(),l.qZA(),l.TgZ(4,"vdr-data-table",2),l.NdJ("pageChange",function(e){return t.setPageNumber(e)})("itemsPerPageChange",function(e){return t.setItemsPerPage(e)}),l.ALo(5,"async"),l.ALo(6,"async"),l.ALo(7,"async"),l.ALo(8,"async"),l.TgZ(9,"vdr-dt-column"),l._uU(10),l.ALo(11,"translate"),l.qZA(),l.TgZ(12,"vdr-dt-column"),l._uU(13),l.ALo(14,"translate"),l.qZA(),l.TgZ(15,"vdr-dt-column"),l._uU(16),l.ALo(17,"translate"),l.qZA(),l.TgZ(18,"vdr-dt-column"),l._uU(19),l.ALo(20,"translate"),l.qZA(),l._UZ(21,"vdr-dt-column"),l._UZ(22,"vdr-dt-column"),l.YNc(23,an,23,20,"ng-template"),l.qZA()),2&e&&(l.xp6(3),l.Q6J("vdrIfPermissions",l.DdM(25,sn)),l.xp6(1),l.Q6J("items",l.lcZ(5,9,t.items$))("itemsPerPage",l.lcZ(6,11,t.itemsPerPage$))("totalItems",l.lcZ(7,13,t.totalItems$))("currentPage",l.lcZ(8,15,t.currentPage$)),l.xp6(6),l.Oqu(l.lcZ(11,17,"common.name")),l.xp6(3),l.Oqu(l.lcZ(14,19,"settings.tax-category")),l.xp6(3),l.Oqu(l.lcZ(17,21,"settings.zone")),l.xp6(3),l.Oqu(l.lcZ(20,23,"settings.tax-rate")))},directives:[d.KkL,d.mz,d.WWO,d.HAh,d.Qj_,d.Egy,L.yS,Q.qvL,d.v_8,d.JOL,d.UaT,d.N9E,d.HH4],pipes:[D.Ov,N.X$,d.j$k],styles:[""],changeDetection:0}),tr.ctorParameters=function(){return[{type:d.Z7U},{type:d.gqp},{type:d.DoR},{type:L.F0},{type:L.gz}]};var nr=function(){function e(t,n,r){g(this,e),this.formBuilder=t,this.dataService=n,this.localStorageService=r,this.addressChange=new l.vpe}return v(e,[{key:"ngOnInit",value:function(){var e=this;this.availableCountries$=this.dataService.settings.getAvailableCountries().mapSingle(function(e){return e.countries.items});var t=this.localStorageService.getForCurrentLocation("shippingTestAddress")||{city:"",countryCode:"",postalCode:"",province:""};this.addressChange.emit(t),this.form=this.formBuilder.group(t),this.subscription=this.form.valueChanges.subscribe(function(t){e.localStorageService.setForCurrentLocation("shippingTestAddress",t),e.addressChange.emit(t)})}},{key:"ngOnDestroy",value:function(){this.subscription&&this.subscription.unsubscribe()}}]),e}();nr.\u0275fac=function(e){return new(e||nr)(l.Y36(F.qu),l.Y36(d.DoR),l.Y36(d.n2A))},nr.\u0275cmp=l.Xpm({type:nr,selectors:[["vdr-test-address-form"]],outputs:{addressChange:"addressChange"},decls:28,vars:19,consts:[[1,"card"],[1,"card-header"],[1,"card-block"],[3,"formGroup"],["formControlName","city","type","text","clrInput",""],["formControlName","province","type","text","clrInput",""],["formControlName","postalCode","type","text","clrInput",""],["name","countryCode","formControlName","countryCode","clrInput","","clrSelect",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,t){1&e&&(l.TgZ(0,"div",0),l.TgZ(1,"div",1),l._uU(2),l.ALo(3,"translate"),l.qZA(),l.TgZ(4,"div",2),l.TgZ(5,"form",3),l.TgZ(6,"clr-input-container"),l.TgZ(7,"label"),l._uU(8),l.ALo(9,"translate"),l.qZA(),l._UZ(10,"input",4),l.qZA(),l.TgZ(11,"clr-input-container"),l.TgZ(12,"label"),l._uU(13),l.ALo(14,"translate"),l.qZA(),l._UZ(15,"input",5),l.qZA(),l.TgZ(16,"clr-input-container"),l.TgZ(17,"label"),l._uU(18),l.ALo(19,"translate"),l.qZA(),l._UZ(20,"input",6),l.qZA(),l.TgZ(21,"clr-input-container"),l.TgZ(22,"label"),l._uU(23),l.ALo(24,"translate"),l.qZA(),l.TgZ(25,"select",7),l.YNc(26,cn,2,2,"option",8),l.ALo(27,"async"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA()),2&e&&(l.xp6(2),l.hij(" ",l.lcZ(3,7,"settings.test-address")," "),l.xp6(3),l.Q6J("formGroup",t.form),l.xp6(3),l.Oqu(l.lcZ(9,9,"customer.city")),l.xp6(5),l.Oqu(l.lcZ(14,11,"customer.province")),l.xp6(5),l.Oqu(l.lcZ(19,13,"customer.postal-code")),l.xp6(5),l.Oqu(l.lcZ(24,15,"customer.country")),l.xp6(3),l.Q6J("ngForOf",l.lcZ(27,17,t.availableCountries$)))},directives:[F._Y,F.JL,F.sg,Q.G55,Q.MgK,d.y_K,F.Fj,F.JJ,F.u,Q.xRP,F.EJ,Q.otW,D.sg,F.YN,F.Kr],pipes:[N.X$,D.Ov],styles:["clr-input-container[_ngcontent-%COMP%]{margin-bottom:12px}"],changeDetection:0}),nr.ctorParameters=function(){return[{type:F.qu},{type:d.DoR},{type:d.n2A}]},nr.propDecorators={addressChange:[{type:l.r_U}]};var rr=function(){function e(t,n){g(this,e),this.dataService=t,this.localStorageService=n,this.orderLinesChange=new l.vpe,this.lines=[]}return v(e,[{key:"subTotal",get:function(){return this.lines.reduce(function(e,t){return e+t.unitPriceWithTax*t.quantity},0)}},{key:"ngOnInit",value:function(){var e=this;this.lines=this.loadFromLocalStorage(),this.lines&&this.orderLinesChange.emit(this.lines),this.dataService.settings.getActiveChannel("cache-first").single$.subscribe(function(t){e.currencyCode=t.activeChannel.currencyCode})}},{key:"selectResult",value:function(e){e&&this.addToLines(e)}},{key:"addToLines",value:function(e){var t,n;this.lines.find(function(t){return t.id===e.productVariantId})||(this.lines.push({id:e.productVariantId,name:e.productVariantName,preview:null!==(n=null===(t=e.productAsset)||void 0===t?void 0:t.preview)&&void 0!==n?n:"",quantity:1,sku:e.sku,unitPriceWithTax:"SinglePrice"===e.priceWithTax.__typename&&e.priceWithTax.value||0}),this.persistToLocalStorage(),this.orderLinesChange.emit(this.lines))}},{key:"updateQuantity",value:function(){this.persistToLocalStorage(),this.orderLinesChange.emit(this.lines)}},{key:"removeLine",value:function(e){this.lines=this.lines.filter(function(t){return t.id!==e.id}),this.persistToLocalStorage(),this.orderLinesChange.emit(this.lines)}},{key:"persistToLocalStorage",value:function(){this.localStorageService.setForCurrentLocation("shippingTestOrder",this.lines)}},{key:"loadFromLocalStorage",value:function(){return this.localStorageService.getForCurrentLocation("shippingTestOrder")||[]}}]),e}();rr.\u0275fac=function(e){return new(e||rr)(l.Y36(d.DoR),l.Y36(d.n2A))},rr.\u0275cmp=l.Xpm({type:rr,selectors:[["vdr-test-order-builder"]],outputs:{orderLinesChange:"orderLinesChange"},decls:9,vars:5,consts:[[1,"card"],[1,"card-header"],["class","order-table table",4,"ngIf","ngIfElse"],["emptyPlaceholder",""],[1,"card-block"],[3,"productSelected"],[1,"order-table","table"],["class","order-line",4,"ngFor","ngForOf"],[1,"sub-total"],[1,"left"],[1,"order-line"],[1,"align-middle","thumb"],[3,"src"],[1,"align-middle","name"],[1,"align-middle","sku"],[1,"align-middle","unit-price"],[1,"align-middle","quantity"],["type","number","max","9999","min","1",3,"ngModel","ngModelChange","change"],[1,"icon-button",3,"click"],["shape","trash"],[1,"align-middle","total"],[1,"card-block","empty-placeholder"],[1,"empty-text"],["shape","arrow","dir","down","size","96"]],template:function(e,t){if(1&e&&(l.TgZ(0,"div",0),l.TgZ(1,"div",1),l._uU(2),l.ALo(3,"translate"),l.qZA(),l.YNc(4,un,31,23,"table",2),l.YNc(5,dn,5,3,"ng-template",null,3,l.W1O),l.TgZ(7,"div",4),l.TgZ(8,"vdr-product-selector",5),l.NdJ("productSelected",function(e){return t.selectResult(e)}),l.qZA(),l.qZA(),l.qZA()),2&e){var n=l.MAs(6);l.xp6(2),l.hij(" ",l.lcZ(3,3,"settings.test-order")," "),l.xp6(2),l.Q6J("ngIf",t.lines.length)("ngIfElse",n)}},directives:[D.O5,d.cyK,D.sg,d.y_K,F.Fd,F.qQ,F.wV,F.Fj,F.JJ,F.On,Q.qvL,Y.Lv],pipes:[N.X$,d.kgx],styles:[".empty-placeholder[_ngcontent-%COMP%]{color:var(--color-grey-400);text-align:center}.empty-text[_ngcontent-%COMP%]{font-size:22px}"],changeDetection:0}),rr.ctorParameters=function(){return[{type:d.DoR},{type:d.n2A}]},rr.propDecorators={orderLinesChange:[{type:l.r_U}]};var ir=function(){function e(t,n){g(this,e),this.serverConfigService=t,this.formBuilder=n,this.customFields=this.serverConfigService.getCustomFieldsFor("Zone")}return v(e,[{key:"ngOnInit",value:function(){var e;if(this.form=this.formBuilder.group({name:[this.zone.name,F.kI.required],customFields:this.formBuilder.group(this.customFields.reduce(function(e,t){return Object.assign(Object.assign({},e),s({},t.name,""))},{}))}),this.customFields.length){var t,n=this.form.get("customFields"),i=r(this.customFields);try{for(i.s();!(t=i.n()).done;){var o=t.value.name,a=null===(e=this.zone.customFields)||void 0===e?void 0:e[o],c=n.get(o);c&&c.patchValue(a)}}catch(l){i.e(l)}finally{i.f()}}}},{key:"cancel",value:function(){this.resolveWith()}},{key:"save",value:function(){this.resolveWith(this.form.value)}}]),e}();ir.\u0275fac=function(e){return new(e||ir)(l.Y36(d.iHG),l.Y36(F.qu))},ir.\u0275cmp=l.Xpm({type:ir,selectors:[["vdr-zone-detail-dialog"]],decls:9,vars:14,consts:[["vdrDialogTitle",""],[3,"formGroup"],["for","name",3,"label"],["id","name","type","text","formControlName","name",3,"readonly"],["entityName","Zone",3,"customFields","customFieldsFormGroup","readonly"],["vdrDialogButtons",""],[4,"ngIf"],["type","button",1,"btn",3,"click"],["type","submit",1,"btn","btn-primary",3,"disabled","click"]],template:function(e,t){1&e&&(l.YNc(0,gn,2,2,"ng-template",0),l.TgZ(1,"form",1),l.TgZ(2,"vdr-form-field",2),l.ALo(3,"translate"),l._UZ(4,"input",3),l.ALo(5,"hasPermission"),l.qZA(),l._UZ(6,"vdr-tabbed-custom-fields",4),l.ALo(7,"hasPermission"),l.qZA(),l.YNc(8,hn,6,6,"ng-template",5)),2&e&&(l.xp6(1),l.Q6J("formGroup",t.form),l.xp6(1),l.Q6J("label",l.lcZ(3,6,"common.name")),l.xp6(2),l.Q6J("readonly",!l.lcZ(5,8,l.DdM(12,Zn))),l.xp6(2),l.Q6J("customFields",t.customFields)("customFieldsFormGroup",t.form.get("customFields"))("readonly",!l.lcZ(7,10,l.DdM(13,Zn))))},directives:[d.q6K,F._Y,F.JL,F.sg,d.hgI,d.y_K,F.Fj,F.JJ,F.u,d.yc0,d.nPI,D.O5],pipes:[N.X$,d.j$k],styles:[""],changeDetection:0}),ir.ctorParameters=function(){return[{type:d.iHG},{type:F.qu}]};var or=function(){function e(t,n,r,i,o,a){g(this,e),this.dataService=t,this.notificationService=n,this.modalService=r,this.route=i,this.router=o,this.serverConfigService=a,this.selectedMemberIds=[]}return v(e,[{key:"ngOnInit",value:function(){var e=this,t=this.dataService.settings.getZones().ref;this.zones$=t.valueChanges.pipe((0,f.U)(function(e){return e.data.zones}));var n=this.route.paramMap.pipe((0,f.U)(function(e){return e.get("contents")}),(0,q.x)(),(0,A.b)(function(){return e.selectedMemberIds=[]}));this.activeZone$=(0,P.aj)(this.zones$,n).pipe((0,f.U)(function(e){var t=i(e,2),n=t[0],r=t[1];if(r)return n.find(function(e){return e.id===r})})),this.availableLanguages$=this.serverConfigService.getAvailableLanguages(),this.contentLanguage$=this.dataService.client.uiState().mapStream(function(e){return e.uiState.contentLanguage}).pipe((0,A.b)(function(){return t.refetch()}))}},{key:"setLanguage",value:function(e){this.dataService.client.setContentLanguage(e).subscribe()}},{key:"create",value:function(){var e=this;this.modalService.fromComponent(ir,{locals:{zone:{name:""}}}).pipe((0,y.w)(function(t){return t?e.dataService.settings.createZone(Object.assign(Object.assign({},t),{memberIds:[]})):_.E}),(0,y.w)(function(){return e.dataService.settings.getZones().single$})).subscribe(function(){e.notificationService.success((0,k.J)("common.notify-create-success"),{entity:"Zone"})},function(t){e.notificationService.error((0,k.J)("common.notify-create-error"),{entity:"Zone"})})}},{key:"delete",value:function(e){var t=this;this.modalService.dialog({title:(0,k.J)("catalog.confirm-delete-zone"),buttons:[{type:"secondary",label:(0,k.J)("common.cancel")},{type:"danger",label:(0,k.J)("common.delete"),returnValue:!0}]}).pipe((0,y.w)(function(n){return n?t.dataService.settings.deleteZone(e):_.E}),(0,y.w)(function(e){return e.deleteZone.result===d.PcR.DELETED?t.dataService.settings.getZones().mapSingle(function(){return{errorMessage:!1}}):(0,I.of)({errorMessage:e.deleteZone.message})})).subscribe(function(e){"string"==typeof e.errorMessage?t.notificationService.error(e.errorMessage):t.notificationService.success((0,k.J)("common.notify-delete-success"),{entity:"Zone"})},function(e){t.notificationService.error((0,k.J)("common.notify-delete-error"),{entity:"Zone"})})}},{key:"update",value:function(e){var t=this;this.modalService.fromComponent(ir,{locals:{zone:e}}).pipe((0,y.w)(function(n){return n?t.dataService.settings.updateZone(Object.assign({id:e.id},n)):_.E})).subscribe(function(){t.notificationService.success((0,k.J)("common.notify-update-success"),{entity:"Zone"})},function(e){t.notificationService.error((0,k.J)("common.notify-update-error"),{entity:"Zone"})})}},{key:"closeMembers",value:function(){var e=Object.assign({},this.route.snapshot.params);delete e.contents,this.router.navigate(["./",e],{relativeTo:this.route,queryParamsHandling:"preserve"})}},{key:"addToZone",value:function(e){var t=this;this.modalService.fromComponent(wn,{locals:{zoneName:e.name,currentMembers:e.members},size:"md"}).pipe((0,y.w)(function(n){return n?t.dataService.settings.addMembersToZone(e.id,n).pipe((0,C.h)(n)):_.E})).subscribe({next:function(n){t.notificationService.success((0,k.J)("settings.add-countries-to-zone-success"),{countryCount:n.length,zoneName:e.name})},error:function(e){t.notificationService.error(e)}})}},{key:"removeFromZone",value:function(e,t){var n=this;this.dataService.settings.removeMembersFromZone(e.id,t).subscribe({complete:function(){n.notificationService.success((0,k.J)("settings.remove-countries-from-zone-success"),{countryCount:t.length,zoneName:e.name})}})}}]),e}();or.\u0275fac=function(e){return new(e||or)(l.Y36(d.DoR),l.Y36(d.gqp),l.Y36(d.Z7U),l.Y36(L.gz),l.Y36(L.F0),l.Y36(d.iHG))},or.\u0275cmp=l.Xpm({type:or,selectors:[["vdr-zone-list"]],decls:18,vars:18,consts:[[3,"availableLanguageCodes","currentLanguageCode","languageCodeChange"],["locationId","zone-list"],["class","btn btn-primary",3,"click",4,"vdrIfPermissions"],[1,"zone-wrapper"],[1,"zone-list"],[1,"table","mt0"],[3,"active",4,"ngFor","ngForOf"],[1,"zone-members"],[4,"ngIf"],[1,"btn","btn-primary",3,"click"],["shape","plus"],[1,"left","align-middle"],[3,"entity"],[3,"colorFrom"],[1,"text-right","align-middle"],["queryParamsHandling","preserve",1,"btn","btn-link","btn-sm",3,"routerLink"],["shape","view-list"],[1,"align-middle"],[1,"btn","btn-link","btn-sm",3,"click"],["shape","edit"],["type","button","vdrDropdownTrigger","",1,"btn","btn-link","btn-sm"],["shape","caret down"],["vdrPosition","bottom-right"],["vdrDropdownItem","",1,"button",3,"disabled","click"],["shape","trash",1,"is-danger"],[3,"members","selectedMemberIds","selectionChange"],[4,"vdrZoneMemberListHeader"],[4,"vdrZoneMemberControls"],[1,"flex"],[1,"header-title-row"],[1,"flex-spacer"],["type","button",1,"close-button",3,"click"],["shape","close"],[1,"controls"],["type","button","vdrDropdownTrigger","",1,"btn","btn-secondary","btn-sm",3,"disabled"],["type","button","vdrDropdownItem","",1,"delete-button",3,"disabled","click"],[1,"btn","btn-secondary","btn-sm",3,"click"],["type","button","vdrDropdownItem","",3,"routerLink"]],template:function(e,t){1&e&&(l.TgZ(0,"vdr-action-bar"),l.TgZ(1,"vdr-ab-left"),l.TgZ(2,"vdr-language-selector",0),l.NdJ("languageCodeChange",function(e){return t.setLanguage(e)}),l.ALo(3,"async"),l.ALo(4,"async"),l.qZA(),l.qZA(),l.TgZ(5,"vdr-ab-right"),l._UZ(6,"vdr-action-bar-items",1),l.YNc(7,yn,4,3,"button",2),l.qZA(),l.qZA(),l.TgZ(8,"div",3),l.TgZ(9,"div",4),l.TgZ(10,"table",5),l.TgZ(11,"tbody"),l.YNc(12,An,29,28,"tr",6),l.ALo(13,"async"),l.qZA(),l.qZA(),l.qZA(),l.TgZ(14,"div",7),l.ALo(15,"async"),l.YNc(16,Fn,4,2,"ng-container",8),l.ALo(17,"async"),l.qZA(),l.qZA()),2&e&&(l.xp6(2),l.Q6J("availableLanguageCodes",l.lcZ(3,7,t.availableLanguages$))("currentLanguageCode",l.lcZ(4,9,t.contentLanguage$)),l.xp6(5),l.Q6J("vdrIfPermissions",l.DdM(17,Ln)),l.xp6(5),l.Q6J("ngForOf",l.lcZ(13,11,t.zones$)),l.xp6(2),l.ekj("expanded",l.lcZ(15,13,t.activeZone$)),l.xp6(2),l.Q6J("ngIf",l.lcZ(17,15,t.activeZone$)))},directives:function(){return[d.KkL,d.BND,d.SdP,d.mz,d.WWO,d.HAh,D.sg,D.O5,Q.qvL,d.Vqt,d.Ywx,L.yS,d.JOL,d.UaT,d.N9E,d.HH4,cr,sr,ar]},pipes:function(){return[D.Ov,N.X$,d.j$k]},styles:[".zone-wrapper[_ngcontent-%COMP%]{display:flex;height:calc(100% - 50px)}.zone-wrapper[_ngcontent-%COMP%]   .zone-list[_ngcontent-%COMP%]{flex:1;overflow:auto;margin-top:0}.zone-wrapper[_ngcontent-%COMP%]   .zone-list[_ngcontent-%COMP%]   tr.active[_ngcontent-%COMP%]{background-color:var(--color-component-bg-200)}.zone-members[_ngcontent-%COMP%]{height:100%;width:0;opacity:0;visibility:hidden;overflow:auto;transition:width .3s,opacity .2s .3s,visibility 0s .3s}.zone-members.expanded[_ngcontent-%COMP%]{width:40vw;visibility:visible;opacity:1;padding-left:12px}.zone-members[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]{margin:0;background:none;border:none;cursor:pointer}.zone-members[_ngcontent-%COMP%]     table.table{margin-top:0}.zone-members[_ngcontent-%COMP%]     table.table th{top:0}.zone-members[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]{display:flex;justify-content:space-between}"],changeDetection:0}),or.ctorParameters=function(){return[{type:d.DoR},{type:d.gqp},{type:d.Z7U},{type:L.gz},{type:L.F0},{type:d.iHG}]};var ar=v(function e(t){g(this,e),this.templateRef=t});ar.\u0275fac=function(e){return new(e||ar)(l.Y36(l.Rgc))},ar.\u0275dir=l.lG2({type:ar,selectors:[["","vdrZoneMemberControls",""]]}),ar.ctorParameters=function(){return[{type:l.Rgc}]};var sr=v(function e(t){g(this,e),this.templateRef=t});sr.\u0275fac=function(e){return new(e||sr)(l.Y36(l.Rgc))},sr.\u0275dir=l.lG2({type:sr,selectors:[["","vdrZoneMemberListHeader",""]]}),sr.ctorParameters=function(){return[{type:l.Rgc}]};var cr=function(){function t(){var e=this;g(this,t),this.members=[],this.selectedMemberIds=[],this.selectionChange=new l.vpe,this.filterTerm="",this.isMemberSelected=function(t){return-1<e.selectedMemberIds.indexOf(t.id)}}return v(t,[{key:"filteredMembers",value:function(){if(""!==this.filterTerm){var e=this.filterTerm.toLocaleLowerCase();return this.members.filter(function(t){return t.name.toLocaleLowerCase().includes(e)||t.code.toLocaleLowerCase().includes(e)})}return this.members}},{key:"areAllSelected",value:function(){return!!this.members&&this.selectedMemberIds.length===this.members.length}},{key:"toggleSelectAll",value:function(){this.areAllSelected()?this.selectionChange.emit([]):this.selectionChange.emit(this.members.map(function(e){return e.id}))}},{key:"toggleSelectMember",value:function(t){var n=t.item;this.selectedMemberIds.includes(n.id)?this.selectionChange.emit(this.selectedMemberIds.filter(function(e){return e!==n.id})):this.selectionChange.emit([].concat(e(this.selectedMemberIds),[n.id]))}}]),t}();cr.\u0275fac=function(e){return new(e||cr)},cr.\u0275cmp=l.Xpm({type:cr,selectors:[["vdr-zone-member-list"]],contentQueries:function(e,t,n){var r;(1&e&&(l.Suo(n,sr,5),l.Suo(n,ar,5)),2&e)&&(l.iGM(r=l.CRH())&&(t.headerTemplate=r.first),l.iGM(r=l.CRH())&&(t.controlsTemplate=r.first))},inputs:{members:"members",selectedMemberIds:"selectedMemberIds"},outputs:{selectionChange:"selectionChange"},decls:17,vars:20,consts:[[1,"members-header"],[4,"ngIf"],["type","text",3,"placeholder","ngModel","ngModelChange"],[3,"items","allSelected","isRowSelectedFn","rowSelectChange","allSelectChange"],[4,"ngTemplateOutlet"],[1,"left","align-middle"],[1,"right","align-middle"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,t){1&e&&(l.TgZ(0,"div",0),l.YNc(1,Jn,2,1,"ng-container",1),l.TgZ(2,"input",2),l.NdJ("ngModelChange",function(e){return t.filterTerm=e}),l.ALo(3,"translate"),l.qZA(),l.qZA(),l.TgZ(4,"vdr-data-table",3),l.NdJ("rowSelectChange",function(e){return t.toggleSelectMember(e)})("allSelectChange",function(){return t.toggleSelectAll()}),l.ALo(5,"hasPermission"),l.TgZ(6,"vdr-dt-column"),l._uU(7),l.ALo(8,"translate"),l.qZA(),l.TgZ(9,"vdr-dt-column"),l._uU(10),l.ALo(11,"translate"),l.qZA(),l.TgZ(12,"vdr-dt-column"),l._uU(13),l.ALo(14,"translate"),l.qZA(),l._UZ(15,"vdr-dt-column"),l.YNc(16,In,8,6,"ng-template"),l.qZA()),2&e&&(l.xp6(1),l.Q6J("ngIf",t.headerTemplate),l.xp6(1),l.Q6J("placeholder",l.lcZ(3,9,"settings.filter-by-member-name"))("ngModel",t.filterTerm),l.xp6(2),l.Q6J("items",t.filteredMembers())("allSelected",t.areAllSelected())("isRowSelectedFn",l.lcZ(5,11,l.DdM(19,Zn))&&t.isMemberSelected),l.xp6(3),l.Oqu(l.lcZ(8,13,"common.code")),l.xp6(3),l.Oqu(l.lcZ(11,15,"common.name")),l.xp6(3),l.Oqu(l.lcZ(14,17,"common.enabled")))},directives:[D.O5,d.y_K,F.Fj,F.JJ,F.On,d.Qj_,d.Egy,D.tP,Q.qvL],pipes:[N.X$,d.j$k],styles:[".members-header[_ngcontent-%COMP%]{background-color:var(--color-component-bg-100);position:sticky;top:0;padding:6px;z-index:5;border-bottom:1px solid var(--color-component-border-200)}.members-header[_ngcontent-%COMP%]   .header-title-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.members-header[_ngcontent-%COMP%]   .clr-input[_ngcontent-%COMP%]{width:100%}"],changeDetection:0}),cr.propDecorators={members:[{type:l.IIB}],selectedMemberIds:[{type:l.IIB}],selectionChange:[{type:l.r_U}],headerTemplate:[{type:l.aQ5,args:[sr]}],controlsTemplate:[{type:l.aQ5,args:[ar]}]};var lr=function(e){c(n,e);var t=u(n);function n(e,r){return g(this,n),t.call(this,e,{__typename:"Administrator",id:"",createdAt:"",updatedAt:"",emailAddress:"",firstName:"",lastName:"",user:{roles:[]}},function(e){return r.administrator.getAdministrator(e).mapStream(function(e){return e.administrator})})}return v(n)}(d.p_9);lr.\u0275fac=function(e){return new(e||lr)(l.LFG(L.F0),l.LFG(d.DoR))},lr.\u0275prov=l.Yz7({factory:function(){return new lr(l.LFG(L.F0),l.LFG(d.DoR))},token:lr,providedIn:"root"}),lr.ctorParameters=function(){return[{type:L.F0},{type:d.DoR}]};var ur=function(e){c(n,e);var t=u(n);function n(e,r){return g(this,n),t.call(this,e,{__typename:"Channel",id:"",createdAt:"",updatedAt:"",code:"",token:"",pricesIncludeTax:!1,currencyCode:d.NEm.USD,defaultLanguageCode:(0,d.kAh)(),defaultShippingZone:{},defaultTaxZone:{}},function(e){return r.settings.getChannel(e).mapStream(function(e){return e.channel})})}return v(n)}(d.p_9);ur.\u0275fac=function(e){return new(e||ur)(l.LFG(L.F0),l.LFG(d.DoR))},ur.\u0275prov=l.Yz7({factory:function(){return new ur(l.LFG(L.F0),l.LFG(d.DoR))},token:ur,providedIn:"root"}),ur.ctorParameters=function(){return[{type:L.F0},{type:d.DoR}]};var dr=function(e){c(n,e);var t=u(n);function n(e,r){return g(this,n),t.call(this,e,{__typename:"Country",id:"",createdAt:"",updatedAt:"",code:"",name:"",enabled:!1,translations:[]},function(e){return r.settings.getCountry(e).mapStream(function(e){return e.country})})}return v(n)}(d.p_9);dr.\u0275fac=function(e){return new(e||dr)(l.LFG(L.F0),l.LFG(d.DoR))},dr.\u0275prov=l.Yz7({factory:function(){return new dr(l.LFG(L.F0),l.LFG(d.DoR))},token:dr,providedIn:"root"}),dr.ctorParameters=function(){return[{type:L.F0},{type:d.DoR}]};var mr=function(e){c(n,e);var t=u(n);function n(e,r){return g(this,n),t.call(this,e,{},function(){return r.settings.getGlobalSettings().mapStream(function(e){return e.globalSettings})})}return v(n)}(d.p_9);mr.\u0275fac=function(e){return new(e||mr)(l.LFG(L.F0),l.LFG(d.DoR))},mr.\u0275prov=l.Yz7({factory:function(){return new mr(l.LFG(L.F0),l.LFG(d.DoR))},token:mr,providedIn:"root"}),mr.ctorParameters=function(){return[{type:L.F0},{type:d.DoR}]};var pr=function(e){c(n,e);var t=u(n);function n(e,r){return g(this,n),t.call(this,e,{__typename:"PaymentMethod",id:"",createdAt:"",updatedAt:"",name:"",code:"",description:"",enabled:!0,checker:void 0,handler:void 0},function(e){return r.settings.getPaymentMethod(e).mapStream(function(e){return e.paymentMethod})})}return v(n)}(d.p_9);pr.\u0275fac=function(e){return new(e||pr)(l.LFG(L.F0),l.LFG(d.DoR))},pr.\u0275prov=l.Yz7({factory:function(){return new pr(l.LFG(L.F0),l.LFG(d.DoR))},token:pr,providedIn:"root"}),pr.ctorParameters=function(){return[{type:L.F0},{type:d.DoR}]};var gr=function(e){c(n,e);var t=u(n);function n(e,r){return g(this,n),t.call(this,e,{__typename:"Administrator",id:"",createdAt:"",updatedAt:"",emailAddress:"",firstName:"",lastName:"",user:{roles:[]}},function(e){return r.administrator.getActiveAdministrator().mapStream(function(e){return e.activeAdministrator})})}return v(n)}(d.p_9);gr.\u0275fac=function(e){return new(e||gr)(l.LFG(L.F0),l.LFG(d.DoR))},gr.\u0275prov=l.Yz7({factory:function(){return new gr(l.LFG(L.F0),l.LFG(d.DoR))},token:gr,providedIn:"root"}),gr.ctorParameters=function(){return[{type:L.F0},{type:d.DoR}]};var fr=function(e){c(n,e);var t=u(n);function n(e,r){return g(this,n),t.call(this,e,{__typename:"Role",id:"",createdAt:"",updatedAt:"",code:"",description:"",permissions:[],channels:[]},function(e){return r.administrator.getRole(e).mapStream(function(e){return e.role})})}return v(n)}(d.p_9);fr.\u0275fac=function(e){return new(e||fr)(l.LFG(L.F0),l.LFG(d.DoR))},fr.\u0275prov=l.Yz7({factory:function(){return new fr(l.LFG(L.F0),l.LFG(d.DoR))},token:fr,providedIn:"root"}),fr.ctorParameters=function(){return[{type:L.F0},{type:d.DoR}]};var vr=function(e){c(n,e);var t=u(n);function n(e,r){return g(this,n),t.call(this,e,{__typename:"ShippingMethod",createdAt:"",updatedAt:"",id:"",code:"",name:"",description:"",fulfillmentHandlerCode:void 0,checker:void 0,calculator:void 0,translations:[]},function(e){return r.shippingMethod.getShippingMethod(e).mapStream(function(e){return e.shippingMethod})})}return v(n)}(d.p_9);vr.\u0275fac=function(e){return new(e||vr)(l.LFG(L.F0),l.LFG(d.DoR))},vr.\u0275prov=l.Yz7({factory:function(){return new vr(l.LFG(L.F0),l.LFG(d.DoR))},token:vr,providedIn:"root"}),vr.ctorParameters=function(){return[{type:L.F0},{type:d.DoR}]};var hr=function(e){c(n,e);var t=u(n);function n(e,r){return g(this,n),t.call(this,e,{__typename:"TaxCategory",id:"",createdAt:"",updatedAt:"",name:"",isDefault:!1},function(e){return r.settings.getTaxCategory(e).mapStream(function(e){return e.taxCategory})})}return v(n)}(d.p_9);hr.\u0275fac=function(e){return new(e||hr)(l.LFG(L.F0),l.LFG(d.DoR))},hr.\u0275prov=l.Yz7({factory:function(){return new hr(l.LFG(L.F0),l.LFG(d.DoR))},token:hr,providedIn:"root"}),hr.ctorParameters=function(){return[{type:L.F0},{type:d.DoR}]};var Zr=function(e){c(n,e);var t=u(n);function n(e,r){return g(this,n),t.call(this,e,{__typename:"TaxRate",id:"",createdAt:"",updatedAt:"",name:"",value:0,enabled:!0,category:{},zone:{},customerGroup:null},function(e){return r.settings.getTaxRate(e).mapStream(function(e){return e.taxRate})})}return v(n)}(d.p_9);Zr.\u0275fac=function(e){return new(e||Zr)(l.LFG(L.F0),l.LFG(d.DoR))},Zr.\u0275prov=l.Yz7({factory:function(){return new Zr(l.LFG(L.F0),l.LFG(d.DoR))},token:Zr,providedIn:"root"}),Zr.ctorParameters=function(){return[{type:L.F0},{type:d.DoR}]};var yr={breadcrumb:(0,k.J)("breadcrumb.profile")},br={breadcrumb:(0,k.J)("breadcrumb.administrators")},Ar={breadcrumb:Qr},xr={breadcrumb:(0,k.J)("breadcrumb.channels")},Tr={breadcrumb:Mr},qr={breadcrumb:(0,k.J)("breadcrumb.roles")},Cr={breadcrumb:Yr},Fr={breadcrumb:(0,k.J)("breadcrumb.tax-categories")},Lr={breadcrumb:$r},kr={breadcrumb:(0,k.J)("breadcrumb.tax-rates")},Jr={breadcrumb:Rr},_r={breadcrumb:(0,k.J)("breadcrumb.countries")},Ur={breadcrumb:jr},Pr={breadcrumb:(0,k.J)("breadcrumb.zones")},Ir={breadcrumb:(0,k.J)("breadcrumb.shipping-methods")},wr={breadcrumb:zr},Sr={breadcrumb:(0,k.J)("breadcrumb.payment-methods")},Or={breadcrumb:Hr},Dr={breadcrumb:(0,k.J)("breadcrumb.global-settings")},Nr=[{path:"profile",component:zn,resolve:(0,d.Po4)(gr),canDeactivate:[d.TSp],data:yr},{path:"administrators",component:On,data:br},{path:"administrators/:id",component:Sn,resolve:(0,d.Po4)(lr),canDeactivate:[d.TSp],data:Ar},{path:"channels",component:Nn,data:xr},{path:"channels/:id",component:Dn,resolve:(0,d.Po4)(ur),canDeactivate:[d.TSp],data:Tr},{path:"roles",component:En,data:qr},{path:"roles/:id",component:Hn,resolve:(0,d.Po4)(fr),canDeactivate:[d.TSp],data:Cr},{path:"tax-categories",component:Xn,data:Fr},{path:"tax-categories/:id",component:Kn,resolve:(0,d.Po4)(hr),canDeactivate:[d.TSp],data:Lr},{path:"tax-rates",component:tr,data:kr},{path:"tax-rates/:id",component:er,resolve:(0,d.Po4)(Zr),canDeactivate:[d.TSp],data:Jr},{path:"countries",component:Mn,data:_r},{path:"countries/:id",component:Qn,resolve:(0,d.Po4)(dr),canDeactivate:[d.TSp],data:Ur},{path:"zones",component:or,data:Pr},{path:"shipping-methods",component:Vn,data:Ir},{path:"shipping-methods/:id",component:Bn,resolve:(0,d.Po4)(vr),canDeactivate:[d.TSp],data:wr},{path:"payment-methods",component:Rn,data:Sr},{path:"payment-methods/:id",component:$n,resolve:(0,d.Po4)(pr),canDeactivate:[d.TSp],data:Or},{path:"global-settings",component:Yn,resolve:(0,d.Po4)(mr),canDeactivate:[d.TSp],data:Dr}];function Qr(e,t){return(0,d.YWC)({entity:e.entity,id:t.id,breadcrumbKey:"breadcrumb.administrators",getName:function(e){return"".concat(e.firstName," ").concat(e.lastName)},route:"administrators"})}function Mr(e,t){return(0,d.YWC)({entity:e.entity,id:t.id,breadcrumbKey:"breadcrumb.channels",getName:function(e){return e.code},route:"channels"})}function Yr(e,t){return(0,d.YWC)({entity:e.entity,id:t.id,breadcrumbKey:"breadcrumb.roles",getName:function(e){return e.description},route:"roles"})}function $r(e,t){return(0,d.YWC)({entity:e.entity,id:t.id,breadcrumbKey:"breadcrumb.tax-categories",getName:function(e){return e.name},route:"tax-categories"})}function Rr(e,t){return(0,d.YWC)({entity:e.entity,id:t.id,breadcrumbKey:"breadcrumb.tax-rates",getName:function(e){return e.name},route:"tax-rates"})}function jr(e,t){return(0,d.YWC)({entity:e.entity,id:t.id,breadcrumbKey:"breadcrumb.countries",getName:function(e){return e.name},route:"countries"})}function zr(e,t){return(0,d.YWC)({entity:e.entity,id:t.id,breadcrumbKey:"breadcrumb.shipping-methods",getName:function(e){return e.name},route:"shipping-methods"})}function Hr(e,t){return(0,d.YWC)({entity:e.entity,id:t.id,breadcrumbKey:"breadcrumb.payment-methods",getName:function(e){return e.code},route:"payment-methods"})}var Er=v(function e(){g(this,e)});Er.\u0275fac=function(e){return new(e||Er)},Er.\u0275mod=l.oAB({type:Er}),Er.\u0275inj=l.cJS({imports:[[d.m81,L.Bz.forChild(Nr)]]})}}])}();
//# sourceMappingURL=871-es5.13cb7a0272f1b792dc00.js.map