{"version":3,"sources":["webpack:///home/martijn/git/shops/vendure/node_modules/rxjs/_esm2015/internal/operators/retryWhen.js","webpack:///home/martijn/git/shops/vendure/node_modules/@vendure/admin-ui/__ivy_ngcc__/fesm2015/vendure-admin-ui-order.js"],"names":["RetryWhenOperator","notifier","source","this","subscriber","subscribe","destination","super","err","isStopped","errors","retries","retriesSubscription","undefined","Subject","e","error","innerSubscribe","_unsubscribeAndRecycle","next","unsubscribe","_unsubscribe","AddManualPaymentDialogComponent_ng_template_0_Template","rf","ctx","AddManualPaymentDialogComponent_ng_template_9_Template","_r3","cancel","submit","ctx_r1","form","invalid","pristine","outstandingAmount","currencyCode","CancelOrderDialogComponent_ng_template_0_Template","CancelOrderDialogComponent_tr_22_input_14_Template","_r8","$event","line_r3","$implicit","lineQuantities","id","ctx_r4","quantity","CancelOrderDialogComponent_tr_22_ng_template_15_Template","CancelOrderDialogComponent_tr_22_Template","_r5","featuredAsset","productVariant","name","sku","unitPriceWithTax","order","active","CancelOrderDialogComponent_ng_template_28_ng_container_4_Template","CancelOrderDialogComponent_ng_template_28_ng_container_5_Template","CancelOrderDialogComponent_ng_template_28_Template","_r15","select","ctx_r2","reason","selectionCount","FulfillOrderDialogComponent_ng_template_0_Template","FulfillOrderDialogComponent_tr_22_img_2_Template","FulfillOrderDialogComponent_tr_22_input_12_Template","fulfillmentQuantities","fulfillCount","ctx_r5","getUnfulfilledCount","max","FulfillOrderDialogComponent_tr_22_Template","stockOnHand","FulfillOrderDialogComponent_ng_template_33_Template","_r12","canSubmit","FulfillmentCardComponent_vdr_fulfillment_detail_8_Template","ctx_r0","fulfillment","_c0","a0","state","FulfillmentCardComponent_div_9_ng_container_1_Template","_r6","suggestedState_r4","ngIf","transitionState","emit","FulfillmentCardComponent_div_9_ng_container_6_ng_container_2_Template","nextState_r7","FulfillmentCardComponent_div_9_ng_container_6_ng_template_3_Template","FulfillmentCardComponent_div_9_ng_container_6_Template","_r13","_r9","FulfillmentCardComponent_div_9_Template","nextSuggestedState","nextOtherStates","FulfillmentDetailComponent_vdr_labeled_data_7_Template","trackingCode","FulfillmentDetailComponent_ng_container_11_vdr_custom_field_control_1_Template","customField_r2","ctx_r3","customFieldFormGroup","FulfillmentDetailComponent_ng_container_11_Template","get","FulfillmentStateLabelComponent_clr_icon_2_Template","LineFulfillmentComponent_vdr_dropdown_0_clr_icon_2_Template","LineFulfillmentComponent_vdr_dropdown_0_clr_icon_3_Template","LineFulfillmentComponent_vdr_dropdown_0_clr_icon_4_Template","LineFulfillmentComponent_vdr_dropdown_0_label_6_Template","_c1","a1","total","count","LineFulfillmentComponent_vdr_dropdown_0_label_7_Template","line","fulfilledCount","LineFulfillmentComponent_vdr_dropdown_0_label_8_Template","LineFulfillmentComponent_vdr_dropdown_0_div_9_vdr_labeled_data_12_Template","item_r8","_c2","LineFulfillmentComponent_vdr_dropdown_0_div_9_Template","createdAt","method","LineFulfillmentComponent_vdr_dropdown_0_Template","fulfillmentStatus","fulfillments","LineRefundsComponent_span_0_Template","getRefundedCount","ModificationDetailComponent_vdr_labeled_data_3_Template","modification","note","ModificationDetailComponent_vdr_labeled_data_4_Template","surcharge_r4","tmp_1_0","getSurcharge","description","priceWithTax","ModificationDetailComponent_vdr_labeled_data_5_Template","getAddedItems","ModificationDetailComponent_vdr_labeled_data_6_Template","getRemovedItems","OrderCustomFieldsCardComponent_div_0_ng_container_6_Template","customField_r4","customFieldForm","readonly","editable","OrderCustomFieldsCardComponent_div_0_button_8_Template","OrderCustomFieldsCardComponent_div_0_button_9_Template","onUpdateClick","OrderCustomFieldsCardComponent_div_0_Template","customFieldsConfig","OrderStateSelectDialogComponent_ng_template_0_Template","OrderStateSelectDialogComponent_option_6_Template","state_r3","OrderStateSelectDialogComponent_ng_template_7_button_0_Template","OrderStateSelectDialogComponent_ng_template_7_Template","cancellable","selectedState","OrderProcessGraphDialogComponent_ng_template_0_Template","RefundOrderDialogComponent_ng_template_0_Template","RefundOrderDialogComponent_tr_31_ng_container_18_vdr_dropdown_1_div_5_Template","discount_r14","line_r6","ctx_r13","amount","RefundOrderDialogComponent_tr_31_ng_container_18_vdr_dropdown_1_Template","discounts_r11","RefundOrderDialogComponent_tr_31_ng_container_18_Template","length","RefundOrderDialogComponent_tr_31_input_20_Template","_r18","ctx_r20","handleZeroQuantity","ctx_r8","RefundOrderDialogComponent_tr_31_input_23_Template","_r24","refund","ctx_r9","RefundOrderDialogComponent_tr_31_input_26_Template","_r28","ctx_r10","RefundOrderDialogComponent_tr_31_Template","payments","proratedUnitPriceWithTax","discounts","lineCanBeRefundedOrCancelled","RefundOrderDialogComponent_option_45_Template","payment_r31","_c3","min","RefundOrderDialogComponent_div_66_Template","settledPaymentsTotal","RefundOrderDialogComponent_div_67_Template","_c4","RefundOrderDialogComponent_ng_template_68_ng_container_4_Template","ctx_r32","refundTotal","RefundOrderDialogComponent_ng_template_68_ng_template_5_Template","RefundOrderDialogComponent_ng_template_68_Template","_r36","_r33","isRefunding","SettleRefundDialogComponent_ng_template_0_Template","SettleRefundDialogComponent_ng_template_9_Template","transactionId","_c5","OrderDetailComponent_vdr_action_bar_0_button_11_Template","_r10","order_r2","addManualPayment","outstandingPaymentAmount","OrderDetailComponent_vdr_action_bar_0_button_12_Template","transitionToState","OrderDetailComponent_vdr_action_bar_0_ng_container_20_Template","transitionToModifying","OrderDetailComponent_vdr_action_bar_0_button_21_ng_container_2_Template","OrderDetailComponent_vdr_action_bar_0_button_21_ng_template_3_Template","OrderDetailComponent_vdr_action_bar_0_button_21_Template","_r21","cancelOrRefund","_r17","ctx_r6","orderHasSettledPayments","OrderDetailComponent_vdr_action_bar_0_ng_container_22_button_2_Template","_r26","nextState_r24","OrderDetailComponent_vdr_action_bar_0_ng_container_22_Template","ctx_r7","nextStates$","OrderDetailComponent_vdr_action_bar_0_Template","openStateDiagram","fulfillOrder","manuallyTransitionToState","tmp_9_0","entity$","hasUnsettledModifications","canAddFulfillment","nextStates","includes","OrderDetailComponent_div_2_tr_23_Template","row_r37","order_r31","taxRate","taxBase","taxTotal","OrderDetailComponent_div_2_h6_35_Template","OrderDetailComponent_div_2_h6_37_Template","OrderDetailComponent_div_2_ng_container_39_vdr_order_payment_card_1_Template","_r42","settlePayment","transitionPaymentState","settleRefund","payment_r40","OrderDetailComponent_div_2_ng_container_39_Template","OrderDetailComponent_div_2_ng_container_40_Template","_r49","fulfillment_r47","transitionFulfillment","OrderDetailComponent_div_2_Template","_r52","addNote","updateNote","deleteNote","updateCustomFields","orderLineCustomFields","taxSummary","history$","customFields","customer","getOrderAddressLines","shippingAddress","billingAddress","OrderEditsPreviewDialogComponent_ng_template_0_Template","OrderEditsPreviewDialogComponent_div_8_option_6_Template","payment_r4","OrderEditsPreviewDialogComponent_div_8_Template","selectedPayment","refundNote","OrderEditsPreviewDialogComponent_ng_template_9_Template","priceDifference","OrderEditorComponent_vdr_action_bar_0_Template","_r4","transitionToPriorState","OrderEditorComponent_div_2_th_19_Template","OrderEditorComponent_div_2_tr_24_img_2_Template","line_r21","_c6","OrderEditorComponent_div_2_tr_24_td_18_ng_container_1_Template","customField_r27","i_r22","index","ctx_r26","orderLineCustomFieldsFormArray","OrderEditorComponent_div_2_tr_24_td_18_Template","ctx_r24","OrderEditorComponent_div_2_tr_24_Template","_r30","updateLineQuantity","target","value","order_r5","isLineModified","unitPrice","linePriceWithTax","linePrice","OrderEditorComponent_div_2_tr_25_img_2_Template","addedLine_r32","productAsset","OrderEditorComponent_div_2_tr_25_td_18_ng_container_1_Template","customField_r38","i_r33","ctx_r37","addItemCustomFieldsFormArray","OrderEditorComponent_div_2_tr_25_td_18_Template","ctx_r35","OrderEditorComponent_div_2_tr_25_Template","_r41","updateAddedItemQuantity","removeAddedItem","productVariantName","price","OrderEditorComponent_div_2_tr_26_td_7_Template","OrderEditorComponent_div_2_tr_26_Template","surcharge_r44","OrderEditorComponent_div_2_tr_27_td_9_Template","OrderEditorComponent_div_2_tr_27_ng_container_11_Template","surchargePrice_r51","OrderEditorComponent_div_2_tr_27_Template","_r54","i_r48","removeSurcharge","surcharge_r47","getSurchargePrices","OrderEditorComponent_div_2_td_35_Template","OrderEditorComponent_div_2_clr_accordion_content_51_div_2_img_1_Template","asset_r58","OrderEditorComponent_div_2_clr_accordion_content_51_div_2_Template","ctx_r55","addItemSelectedVariant","getSelectedItemPrice","OrderEditorComponent_div_2_clr_accordion_content_51_ng_container_3_Template","customField_r60","ctx_r56","addItemCustomFieldsForm","OrderEditorComponent_div_2_clr_accordion_content_51_Template","_r62","ctx_r63","addItemToOrder","ctx_r12","_c7","rate","OrderEditorComponent_div_2_clr_accordion_content_56_Template","_r65","ctx_r64","addSurcharge","surchargeForm","tmp_5_0","tmp_8_0","OrderEditorComponent_div_2_clr_accordion_content_61_Template","ctx_r14","shippingAddressForm","availableCountries$","addressCustomFields","OrderEditorComponent_div_2_clr_accordion_content_66_Template","ctx_r15","billingAddressForm","OrderEditorComponent_div_2_li_74_Template","ctx_r16","modifyOrderInput","addItems","OrderEditorComponent_div_2_li_75_Template","ctx_r17","adjustOrderLines","OrderEditorComponent_div_2_li_76_Template","ctx_r18","surcharges","OrderEditorComponent_div_2_li_77_Template","OrderEditorComponent_div_2_li_78_Template","OrderEditorComponent_div_2_Template","_r68","recalculateShipping","previewAndModify","lines","addedLines","trackByProductVariantId","shippingLines","shippingMethod","shippingWithTax","shipping","dirty","canPreviewChanges","OrderHistoryComponent_span_16_Template","OrderHistoryComponent_span_17_Template","OrderHistoryComponent_vdr_timeline_entry_18_ng_container_2_div_1_Template","OrderHistoryComponent_vdr_timeline_entry_18_ng_container_2_div_2_Template","_c8","from","to","OrderHistoryComponent_vdr_timeline_entry_18_ng_container_2_ng_template_3_Template","entry_r3","data","OrderHistoryComponent_vdr_timeline_entry_18_ng_container_2_Template","OrderHistoryComponent_vdr_timeline_entry_18_ng_container_3_ng_container_4_vdr_chip_6_Template","OrderHistoryComponent_vdr_timeline_entry_18_ng_container_3_ng_container_4_vdr_chip_7_Template","OrderHistoryComponent_vdr_timeline_entry_18_ng_container_3_ng_container_4_Template","modification_r20","ctx_r19","priceChange","isSettled","OrderHistoryComponent_vdr_timeline_entry_18_ng_container_3_Template","getModification","modificationId","OrderHistoryComponent_vdr_timeline_entry_18_ng_container_4_ng_container_1_vdr_history_entry_detail_6_Template","payment_r28","ctx_r27","OrderHistoryComponent_vdr_timeline_entry_18_ng_container_4_ng_container_1_Template","getPayment","_c9","a2","OrderHistoryComponent_vdr_timeline_entry_18_ng_container_4_ng_template_2_Template","tmp_0_0","OrderHistoryComponent_vdr_timeline_entry_18_ng_container_4_Template","_r25","OrderHistoryComponent_vdr_timeline_entry_18_ng_container_5_Template","refundId","OrderHistoryComponent_vdr_timeline_entry_18_ng_container_6_vdr_history_entry_detail_3_Template","items_r34","OrderHistoryComponent_vdr_timeline_entry_18_ng_container_6_Template","orderItemIds","getCancelledItems","OrderHistoryComponent_vdr_timeline_entry_18_ng_container_7_vdr_history_entry_detail_3_Template","fulfillment_r38","OrderHistoryComponent_vdr_timeline_entry_18_ng_container_7_Template","getFulfillment","OrderHistoryComponent_vdr_timeline_entry_18_ng_container_8_ng_container_1_Template","ctx_r40","OrderHistoryComponent_vdr_timeline_entry_18_ng_container_8_ng_container_2_Template","ctx_r41","OrderHistoryComponent_vdr_timeline_entry_18_ng_container_8_ng_container_3_Template","OrderHistoryComponent_vdr_timeline_entry_18_ng_container_8_vdr_history_entry_detail_4_Template","ctx_r43","OrderHistoryComponent_vdr_timeline_entry_18_ng_container_8_Template","OrderHistoryComponent_vdr_timeline_entry_18_ng_container_9_span_3_Template","OrderHistoryComponent_vdr_timeline_entry_18_ng_container_9_span_4_Template","OrderHistoryComponent_vdr_timeline_entry_18_ng_container_9_Template","_r53","isPublic","_c10","OrderHistoryComponent_vdr_timeline_entry_18_ng_container_10_Template","promotionId","couponCode","OrderHistoryComponent_vdr_timeline_entry_18_ng_container_11_Template","OrderHistoryComponent_vdr_timeline_entry_18_Template","_r60","ctx_r59","expanded","getDisplayType","getTimelineIcon","getName","isFeatured","type","ORDER_STATE_TRANSITION","ORDER_MODIFIED","ORDER_PAYMENT_TRANSITION","ORDER_REFUND_TRANSITION","ORDER_CANCELLATION","ORDER_FULFILLMENT","ORDER_FULFILLMENT_TRANSITION","ORDER_NOTE","ORDER_COUPON_APPLIED","ORDER_COUPON_REMOVED","OrderListComponent_div_3_button_1_Template","preset_r6","selectFilterPreset","activePreset_r4","label","OrderListComponent_div_3_Template","_r11","filterPresets","OrderListComponent_ng_template_15_Template","item_r12","item","OrderListComponent_ng_template_16_Template","item_r13","clear_r14","clear","_c11","_c12","OrderListComponent_ng_template_61_Template","order_r16","code","updatedAt","orderPlacedAt","getShippingNames","OrderPaymentCardComponent_ng_container_5_Template","payment","OrderPaymentCardComponent_ng_container_10_vdr_labeled_data_16_Template","refund_r3","OrderPaymentCardComponent_ng_container_10_vdr_labeled_data_17_Template","OrderPaymentCardComponent_ng_container_10_vdr_labeled_data_18_Template","metadata","OrderPaymentCardComponent_ng_container_10_div_19_Template","OrderPaymentCardComponent_ng_container_10_Template","refundHasMetadata","OrderPaymentCardComponent_div_11_button_1_Template","OrderPaymentCardComponent_div_11_ng_container_6_ng_container_2_Template","nextState_r18","OrderPaymentCardComponent_div_11_ng_container_6_ng_template_3_Template","OrderPaymentCardComponent_div_11_ng_container_6_Template","ctx_r23","_r20","OrderPaymentCardComponent_div_11_Template","OrderProcessNodeComponent_div_7_Template","cancelledState","OrderProcessGraphComponent_ng_container_0_Template","state_r2","onMouseOver","onMouseOut","i_r3","activeState$","OrderProcessGraphComponent_ng_container_1_Template","edge_r7","OrderTableComponent_ng_container_20_img_3_Template","OrderTableComponent_ng_container_20_ng_container_26_vdr_dropdown_1_div_5_Template","discount_r11","getPromotionLink","amountWithTax","OrderTableComponent_ng_container_20_ng_container_26_vdr_dropdown_1_Template","discounts_r8","OrderTableComponent_ng_container_20_ng_container_26_Template","OrderTableComponent_ng_container_20_ng_container_27_tr_1_div_3_Template","field_r16","config","formGroup","OrderTableComponent_ng_container_20_ng_container_27_tr_1_Template","customFields_r13","OrderTableComponent_ng_container_20_ng_container_27_Template","OrderTableComponent_ng_container_20_Template","getLineDiscounts","customFieldsForLine","OrderTableComponent_tr_21_Template","surcharge_r18","OrderTableComponent_tr_22_vdr_chip_4_Template","couponCode_r21","OrderTableComponent_tr_22_Template","discount_r19","getCouponCodeForAdjustment","PaymentDetailComponent_vdr_labeled_data_7_Template","errorMessage","PaymentDetailComponent_vdr_labeled_data_8_Template","PaymentStateLabelComponent_clr_icon_2_Template","RefundStateLabelComponent_clr_icon_2_Template","SimpleItemListComponent_li_2_Template","item_r1","dataService","required","paymentMethods$","settings","getPaymentMethods","mapSingle","paymentMethods","items","formValue","resolveWith","ɵfac","t","ɵcmp","selectors","decls","vars","consts","template","directives","pipes","styles","changeDetection","ctorParameters","i18nService","reasons","map","r","translate","Object","values","reduce","sum","n","result","assign","orderId","getLineInputs","entries","orderLineId","filter","l","changeDetector","fulfillmentHandlerControl","getGlobalSettings","single$","globalSettings","getFulfillableCount","trackInventory","markForCheck","getShippingMethodOperations","fulfillmentHandlers","handlers","fulfillmentHandlerDef","find","h","_a","_b","fulfillmentHandlerCode","fulfillmentHandler","patchValue","globalTrackInventory","effectiveTracInventory","INHERIT","TRUE","unfulfilledCount","Math","fulfilled","totalCount","valid","handler","namedStateOrDefault","targetState","s","suggested","inputs","outputs","FulfillmentStateLabelComponent","propDecorators","serverConfigService","customFieldConfig","getCustomFieldsFor","changes","buildCustomFieldsFormGroup","f","fulfillmentId","itemMap","Map","fulfillmentItemIds","orderItems","i","set","Array","fieldDef","addControl","customField","isArray","isObject","features","SimpleItemListComponent","chipColorType","LineFulfillmentComponent","getDeliveredCount","getFulfillmentStatus","getFulfillments","lineQuantity","counts","all","orderState","LineRefundsComponent","refunds","cancelled","ModificationDetailComponent","addedItems","removedItems","added","removed","getModifiedLines","m","_item","getOrderLineAndItem","itemId","formBuilder","customFieldValues","updateClick","group","field","control","markAsPristine","OrderStateSelectDialogComponent","message","modalService","notificationService","getPreModifyingState","pipe","switchMap","manualTransitionOptions","retry","transitionToStateOrThrow","catchError","options","fromComponent","locals","closable","size","Error","delay","lift","getOrderHistory","eq","sort","DESC","history","transitionOrderToState","__typename","transitionError","ɵprov","factory","token","providedIn","OrderProcessGraphDialogComponent","states","getOrderProcessStates","activeState","refundShipping","adjustment","lineRef","refundCount","settledPayments","summate","p","isCancelling","refundLines","getOrderLineInput","cancelLines","paymentId","filterFn","SettleRefundDialogComponent","router","route","orderTransitionService","detailForm","fetchHistory","defaultStates","init","navigate","relativeTo","getCustomFieldConfig","startWith","mapStream","destroy","success","customFieldsValue","updateOrderCustomFields","entity","orderAddress","val","getOrder","transitionPaymentToState","every","modifications","_c","paymentIsValid","amountCovered","refundsTotal","totalWithTax","addManualPaymentToOrder","transitionToPreModifyingState","refetchOrder","input","createFulfillment","of","mapTo","addFulfillmentToOrder","fulfillmentHandlerError","JSON","stringify","assertNever","transitionFulfillmentToState","isRefundable","refundOrder","cancelOrder","event","addNoteToOrder","entry","displayPrivacyControls","noteIsPrivate","updateOrderNote","noteId","isPrivate","dialog","title","body","buttons","returnValue","res","deleteOrderNote","operations","push","merge","OrderEditResultType","OrderEditsPreviewDialogComponent","originalTotalWithTax","Cancel","Payment","Refund","refundPaymentId","PriceUnchanged","dryRun","updateShippingAddress","updateBillingAddress","addedVariants","getSinglePriceValue","row","variantInfo","productVariantId","notNullOrUndefined","snapshot","paramMap","takeUntil","destroy$","_d","_e","_f","_g","_h","_j","_k","_l","_m","_o","_p","_q","_r","_s","_t","priceIncludesTax","taxDescription","fullName","company","streetLine1","streetLine2","city","province","postalCode","countryCode","phoneNumber","valueChanges","modifyRow","getAvailableCountries","countries","shareReplay","take","previousState","splice","indexOf","isMatchingAddItemRow","key","reset","removeAt","surcharge","round","modifyOrder","wetRunInput","nextState","languageCode","cancelledItemIds","administrator","firstName","lastName","PaymentDetailComponent","localStorageService","searchOrderCodeControl","searchLastNameControl","orderStates","setQueryFn","skip","getOrders","refetchOnChannelChange","orders","createQueryOptions","queryParamMap","lastFilters","setQueryParam","replaceUrl","ngOnInit","activePreset$","qpm","distinctUntilChanged","searchTerms$","debounceTime","refresh","customFilterForm","getAll","placedAtStart","placedAtEnd","presetName","lastCustomFilters","filters","page","customFilters","orderCodeSearchTerm","customerNameSearchTerm","activeFilterPreset","filterConfig","in","queryParams","between","start","end","after","before","customerLastName","contains","shippingLine","join","applyCustomFilters","setPageNumber","setItemsPerPage","items$","itemsPerPage$","totalItems$","currentPage$","keys","PaymentStateLabelComponent","RefundStateLabelComponent","NODE_HEIGHT","elementRef","active$","BehaviorSubject","activeTarget$","isCancellable","node","origin","nativeElement","getBoundingClientRect","nodeHeight","querySelector","height","x","y","pos","getPos","getStyle","asObservable","tap","direction","startPos","endPos","dX","abs","dY","sqrt","pow","transform","setActiveState$","nodes","edges","initialState","populateNodes","setTimeout","populateEdges","stateName","nodeComponents","stateNodeMap","stateNode","targets","targetNode","nodeCmp","getNodeFor","toCmp","viewQuery","hostVars","hostBindings","outerHeight","args","orderLineCustomFieldsVisible","getLineCustomFields","a","PROMOTION","promotion","adjustmentSource","split","promotionAdjustment","promotions","subTotalWithTax","subTotal","ɵ0","breadcrumb","ɵ1","orderBreadcrumb","ɵ2","modifyingOrderBreadcrumb","orderRoutes","path","component","resolve","canDeactivate","params","breadcrumbKey","breadcrumbs","modifiedBreadcrumbs","slice","link","concat","OrderModule","ɵmod","ɵinj","imports","forChild"],"mappings":"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","file":"x","sourcesContent":["import { Subject } from '../Subject';\nimport { SimpleOuterSubscriber, innerSubscribe, SimpleInnerSubscriber } from '../innerSubscribe';\nexport function retryWhen(notifier) {\n    return (source) => source.lift(new RetryWhenOperator(notifier, source));\n}\nclass RetryWhenOperator {\n    constructor(notifier, source) {\n        this.notifier = notifier;\n        this.source = source;\n    }\n    call(subscriber, source) {\n        return source.subscribe(new RetryWhenSubscriber(subscriber, this.notifier, this.source));\n    }\n}\nclass RetryWhenSubscriber extends SimpleOuterSubscriber {\n    constructor(destination, notifier, source) {\n        super(destination);\n        this.notifier = notifier;\n        this.source = source;\n    }\n    error(err) {\n        if (!this.isStopped) {\n            let errors = this.errors;\n            let retries = this.retries;\n            let retriesSubscription = this.retriesSubscription;\n            if (!retries) {\n                errors = new Subject();\n                try {\n                    const { notifier } = this;\n                    retries = notifier(errors);\n                }\n                catch (e) {\n                    return super.error(e);\n                }\n                retriesSubscription = innerSubscribe(retries, new SimpleInnerSubscriber(this));\n            }\n            else {\n                this.errors = undefined;\n                this.retriesSubscription = undefined;\n            }\n            this._unsubscribeAndRecycle();\n            this.errors = errors;\n            this.retries = retries;\n            this.retriesSubscription = retriesSubscription;\n            errors.next(err);\n        }\n    }\n    _unsubscribe() {\n        const { errors, retriesSubscription } = this;\n        if (errors) {\n            errors.unsubscribe();\n            this.errors = undefined;\n        }\n        if (retriesSubscription) {\n            retriesSubscription.unsubscribe();\n            this.retriesSubscription = undefined;\n        }\n        this.retries = undefined;\n    }\n    notifyNext() {\n        const { _unsubscribe } = this;\n        this._unsubscribe = null;\n        this._unsubscribeAndRecycle();\n        this._unsubscribe = _unsubscribe;\n        this.source.subscribe(this);\n    }\n}\n//# sourceMappingURL=retryWhen.js.map","import { Component, ChangeDetectionStrategy, ChangeDetectorRef, EventEmitter, Input, Output, ɵɵdefineInjectable, ɵɵinject, Injectable, ElementRef, ViewChildren, HostBinding, NgModule } from '@angular/core';\nimport { FormGroup, FormControl, Validators, FormBuilder, FormArray } from '@angular/forms';\nimport { DataService, I18nService, configurableDefinitionToInstance, GlobalFlag, configurableOperationValueIsValid, toConfigurableOperationInput, ServerConfigService, HistoryEntryType, SortOrder, ModalService, NotificationService, BaseDetailComponent, EditNoteDialogComponent, BaseListComponent, LocalStorageService, AdjustmentType, BaseEntityResolver, createResolveData, CanDeactivateDetailGuard, detailBreadcrumb, SharedModule } from '@vendure/admin-ui/core';\nimport { marker } from '@biesbjerg/ngx-translate-extract-marker';\nimport { isObject, summate, assertNever, notNullOrUndefined } from '@vendure/common/lib/shared-utils';\nimport { Router, ActivatedRoute, RouterModule } from '@angular/router';\nimport { EMPTY, Subject, of, merge, BehaviorSubject } from 'rxjs';\nimport { switchMap, catchError, retryWhen, delay, take, map, startWith, mapTo, takeUntil, shareReplay, distinctUntilChanged, filter, debounceTime, tap } from 'rxjs/operators';\n\nimport * as ɵngcc0 from '@angular/core';\nimport * as ɵngcc1 from '@vendure/admin-ui/core';\nimport * as ɵngcc2 from '@angular/forms';\nimport * as ɵngcc3 from '@ng-select/ng-select';\nimport * as ɵngcc4 from '@ngx-translate/core';\nimport * as ɵngcc5 from '@angular/common';\nimport * as ɵngcc6 from '@clr/angular';\nimport * as ɵngcc7 from '@angular/cdk/bidi';\nimport * as ɵngcc8 from '@angular/router';\n\nfunction AddManualPaymentDialogComponent_ng_template_0_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵtext(0);\n    ɵngcc0.ɵɵpipe(1, \"translate\");\n} if (rf & 2) {\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(1, 1, \"order.add-payment-to-order\"));\n} }\nfunction AddManualPaymentDialogComponent_ng_template_9_Template(rf, ctx) { if (rf & 1) {\n    const _r3 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"button\", 7);\n    ɵngcc0.ɵɵlistener(\"click\", function AddManualPaymentDialogComponent_ng_template_9_Template_button_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r3); const ctx_r2 = ɵngcc0.ɵɵnextContext(); return ctx_r2.cancel(); });\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(3, \"button\", 8);\n    ɵngcc0.ɵɵlistener(\"click\", function AddManualPaymentDialogComponent_ng_template_9_Template_button_click_3_listener() { ɵngcc0.ɵɵrestoreView(_r3); const ctx_r4 = ɵngcc0.ɵɵnextContext(); return ctx_r4.submit(); });\n    ɵngcc0.ɵɵtext(4);\n    ɵngcc0.ɵɵpipe(5, \"translate\");\n    ɵngcc0.ɵɵpipe(6, \"localeCurrency\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r1 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(2, 4, \"common.cancel\"));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"disabled\", ctx_r1.form.invalid || ctx_r1.form.pristine);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate2(\" \", ɵngcc0.ɵɵpipeBind1(5, 6, \"order.add-payment\"), \" (\", ɵngcc0.ɵɵpipeBind2(6, 8, ctx_r1.outstandingAmount, ctx_r1.currencyCode), \") \");\n} }\nfunction CancelOrderDialogComponent_ng_template_0_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵtext(0);\n    ɵngcc0.ɵɵpipe(1, \"translate\");\n} if (rf & 2) {\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(1, 1, \"order.cancel-order\"));\n} }\nfunction CancelOrderDialogComponent_tr_22_input_14_Template(rf, ctx) { if (rf & 1) {\n    const _r8 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"input\", 18);\n    ɵngcc0.ɵɵlistener(\"ngModelChange\", function CancelOrderDialogComponent_tr_22_input_14_Template_input_ngModelChange_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r8); const line_r3 = ɵngcc0.ɵɵnextContext().$implicit; const ctx_r7 = ɵngcc0.ɵɵnextContext(); return (ctx_r7.lineQuantities[line_r3.id] = $event); });\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const line_r3 = ɵngcc0.ɵɵnextContext().$implicit;\n    const ctx_r4 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"ngModel\", ctx_r4.lineQuantities[line_r3.id])(\"max\", line_r3.quantity);\n} }\nfunction CancelOrderDialogComponent_tr_22_ng_template_15_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵtext(0);\n} if (rf & 2) {\n    const line_r3 = ɵngcc0.ɵɵnextContext().$implicit;\n    ɵngcc0.ɵɵtextInterpolate(line_r3.quantity);\n} }\nfunction CancelOrderDialogComponent_tr_22_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"tr\", 9);\n    ɵngcc0.ɵɵelementStart(1, \"td\", 10);\n    ɵngcc0.ɵɵelement(2, \"img\", 11);\n    ɵngcc0.ɵɵpipe(3, \"assetPreview\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(4, \"td\", 12);\n    ɵngcc0.ɵɵtext(5);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(6, \"td\", 13);\n    ɵngcc0.ɵɵtext(7);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(8, \"td\", 14);\n    ɵngcc0.ɵɵtext(9);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(10, \"td\", 14);\n    ɵngcc0.ɵɵtext(11);\n    ɵngcc0.ɵɵpipe(12, \"localeCurrency\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(13, \"td\", 15);\n    ɵngcc0.ɵɵtemplate(14, CancelOrderDialogComponent_tr_22_input_14_Template, 1, 2, \"input\", 16);\n    ɵngcc0.ɵɵtemplate(15, CancelOrderDialogComponent_tr_22_ng_template_15_Template, 1, 1, \"ng-template\", null, 17, ɵngcc0.ɵɵtemplateRefExtractor);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const line_r3 = ctx.$implicit;\n    const _r5 = ɵngcc0.ɵɵreference(16);\n    const ctx_r1 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵclassProp(\"is-cancelled\", line_r3.quantity === 0);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"src\", ɵngcc0.ɵɵpipeBind2(3, 9, line_r3.featuredAsset, \"tiny\"), ɵngcc0.ɵɵsanitizeUrl);\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵtextInterpolate(line_r3.productVariant.name);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate(line_r3.productVariant.sku);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate(line_r3.quantity);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind2(12, 12, line_r3.unitPriceWithTax, ctx_r1.order.currencyCode), \" \");\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵproperty(\"ngIf\", line_r3.quantity > 0 && !ctx_r1.order.active)(\"ngIfElse\", _r5);\n} }\nfunction CancelOrderDialogComponent_ng_template_28_ng_container_4_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵelementContainerEnd();\n} if (rf & 2) {\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(2, 1, \"order.cancel-selected-items\"), \" \");\n} }\nfunction CancelOrderDialogComponent_ng_template_28_ng_container_5_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵelementContainerEnd();\n} if (rf & 2) {\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(2, 1, \"order.cancel-order\"), \" \");\n} }\nfunction CancelOrderDialogComponent_ng_template_28_Template(rf, ctx) { if (rf & 1) {\n    const _r15 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"button\", 19);\n    ɵngcc0.ɵɵlistener(\"click\", function CancelOrderDialogComponent_ng_template_28_Template_button_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r15); const ctx_r14 = ɵngcc0.ɵɵnextContext(); return ctx_r14.cancel(); });\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(3, \"button\", 20);\n    ɵngcc0.ɵɵlistener(\"click\", function CancelOrderDialogComponent_ng_template_28_Template_button_click_3_listener() { ɵngcc0.ɵɵrestoreView(_r15); const ctx_r16 = ɵngcc0.ɵɵnextContext(); return ctx_r16.select(); });\n    ɵngcc0.ɵɵtemplate(4, CancelOrderDialogComponent_ng_template_28_ng_container_4_Template, 3, 3, \"ng-container\", 21);\n    ɵngcc0.ɵɵtemplate(5, CancelOrderDialogComponent_ng_template_28_ng_container_5_Template, 3, 3, \"ng-container\", 21);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r2 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(2, 4, \"common.cancel\"));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"disabled\", !ctx_r2.reason || !ctx_r2.order.active && ctx_r2.selectionCount === 0);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", !ctx_r2.order.active);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r2.order.active);\n} }\nfunction FulfillOrderDialogComponent_ng_template_0_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵtext(0);\n    ɵngcc0.ɵɵpipe(1, \"translate\");\n} if (rf & 2) {\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(1, 1, \"order.fulfill-order\"));\n} }\nfunction FulfillOrderDialogComponent_tr_22_img_2_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"img\", 17);\n    ɵngcc0.ɵɵpipe(1, \"assetPreview\");\n} if (rf & 2) {\n    const line_r3 = ɵngcc0.ɵɵnextContext().$implicit;\n    ɵngcc0.ɵɵproperty(\"src\", ɵngcc0.ɵɵpipeBind2(1, 1, line_r3.featuredAsset, \"tiny\"), ɵngcc0.ɵɵsanitizeUrl);\n} }\nfunction FulfillOrderDialogComponent_tr_22_input_12_Template(rf, ctx) { if (rf & 1) {\n    const _r8 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"input\", 18);\n    ɵngcc0.ɵɵlistener(\"ngModelChange\", function FulfillOrderDialogComponent_tr_22_input_12_Template_input_ngModelChange_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r8); const line_r3 = ɵngcc0.ɵɵnextContext().$implicit; const ctx_r7 = ɵngcc0.ɵɵnextContext(); return ctx_r7.fulfillmentQuantities[line_r3.id].fulfillCount = $event; });\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const line_r3 = ɵngcc0.ɵɵnextContext().$implicit;\n    const ctx_r5 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"disabled\", ctx_r5.getUnfulfilledCount(line_r3) === 0)(\"ngModel\", ctx_r5.fulfillmentQuantities[line_r3.id].fulfillCount)(\"max\", ctx_r5.fulfillmentQuantities[line_r3.id].max);\n} }\nfunction FulfillOrderDialogComponent_tr_22_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"tr\", 9);\n    ɵngcc0.ɵɵelementStart(1, \"td\", 10);\n    ɵngcc0.ɵɵtemplate(2, FulfillOrderDialogComponent_tr_22_img_2_Template, 2, 4, \"img\", 11);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(3, \"td\", 12);\n    ɵngcc0.ɵɵtext(4);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(5, \"td\", 13);\n    ɵngcc0.ɵɵtext(6);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(7, \"td\", 14);\n    ɵngcc0.ɵɵtext(8);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(9, \"td\", 14);\n    ɵngcc0.ɵɵtext(10);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(11, \"td\", 15);\n    ɵngcc0.ɵɵtemplate(12, FulfillOrderDialogComponent_tr_22_input_12_Template, 1, 3, \"input\", 16);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const line_r3 = ctx.$implicit;\n    const ctx_r1 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵclassProp(\"ignore\", ctx_r1.getUnfulfilledCount(line_r3) === 0);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngIf\", line_r3.featuredAsset);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate(line_r3.productVariant.name);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate(line_r3.productVariant.sku);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate(ctx_r1.getUnfulfilledCount(line_r3));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate(line_r3.productVariant.stockOnHand);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r1.fulfillmentQuantities[line_r3.id]);\n} }\nfunction FulfillOrderDialogComponent_ng_template_33_Template(rf, ctx) { if (rf & 1) {\n    const _r12 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"button\", 19);\n    ɵngcc0.ɵɵlistener(\"click\", function FulfillOrderDialogComponent_ng_template_33_Template_button_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r12); const ctx_r11 = ɵngcc0.ɵɵnextContext(); return ctx_r11.cancel(); });\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(3, \"button\", 20);\n    ɵngcc0.ɵɵlistener(\"click\", function FulfillOrderDialogComponent_ng_template_33_Template_button_click_3_listener() { ɵngcc0.ɵɵrestoreView(_r12); const ctx_r13 = ɵngcc0.ɵɵnextContext(); return ctx_r13.select(); });\n    ɵngcc0.ɵɵtext(4);\n    ɵngcc0.ɵɵpipe(5, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r2 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(2, 3, \"common.cancel\"));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"disabled\", !ctx_r2.canSubmit());\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(5, 5, \"order.create-fulfillment\"), \" \");\n} }\nfunction FulfillmentCardComponent_vdr_fulfillment_detail_8_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"vdr-fulfillment-detail\", 7);\n} if (rf & 2) {\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"fulfillmentId\", ctx_r0.fulfillment == null ? null : ctx_r0.fulfillment.id)(\"order\", ctx_r0.order);\n} }\nconst _c0 = function (a0) { return { state: a0 }; };\nfunction FulfillmentCardComponent_div_9_ng_container_1_Template(rf, ctx) { if (rf & 1) {\n    const _r6 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵelementStart(1, \"button\", 14);\n    ɵngcc0.ɵɵlistener(\"click\", function FulfillmentCardComponent_div_9_ng_container_1_Template_button_click_1_listener() { ɵngcc0.ɵɵrestoreView(_r6); const suggestedState_r4 = ctx.ngIf; const ctx_r5 = ɵngcc0.ɵɵnextContext(2); return ctx_r5.transitionState.emit(suggestedState_r4); });\n    ɵngcc0.ɵɵtext(2);\n    ɵngcc0.ɵɵpipe(3, \"translate\");\n    ɵngcc0.ɵɵpipe(4, \"translate\");\n    ɵngcc0.ɵɵpipe(5, \"stateI18nToken\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const suggestedState_r4 = ctx.ngIf;\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind2(3, 1, \"order.set-fulfillment-state\", ɵngcc0.ɵɵpureFunction1(8, _c0, ɵngcc0.ɵɵpipeBind1(4, 4, ɵngcc0.ɵɵpipeBind1(5, 6, suggestedState_r4)))), \" \");\n} }\nfunction FulfillmentCardComponent_div_9_ng_container_6_ng_container_2_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵelement(1, \"clr-icon\", 18);\n    ɵngcc0.ɵɵtext(2);\n    ɵngcc0.ɵɵpipe(3, \"translate\");\n    ɵngcc0.ɵɵpipe(4, \"translate\");\n    ɵngcc0.ɵɵpipe(5, \"stateI18nToken\");\n    ɵngcc0.ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const nextState_r7 = ɵngcc0.ɵɵnextContext().$implicit;\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind2(3, 1, \"order.transition-to-state\", ɵngcc0.ɵɵpureFunction1(8, _c0, ɵngcc0.ɵɵpipeBind1(4, 4, ɵngcc0.ɵɵpipeBind1(5, 6, nextState_r7)))), \" \");\n} }\nfunction FulfillmentCardComponent_div_9_ng_container_6_ng_template_3_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"clr-icon\", 19);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n} if (rf & 2) {\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(2, 1, \"order.cancel-fulfillment\"), \" \");\n} }\nfunction FulfillmentCardComponent_div_9_ng_container_6_Template(rf, ctx) { if (rf & 1) {\n    const _r13 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵelementStart(1, \"button\", 15);\n    ɵngcc0.ɵɵlistener(\"click\", function FulfillmentCardComponent_div_9_ng_container_6_Template_button_click_1_listener() { ɵngcc0.ɵɵrestoreView(_r13); const nextState_r7 = ctx.$implicit; const ctx_r12 = ɵngcc0.ɵɵnextContext(2); return ctx_r12.transitionState.emit(nextState_r7); });\n    ɵngcc0.ɵɵtemplate(2, FulfillmentCardComponent_div_9_ng_container_6_ng_container_2_Template, 6, 10, \"ng-container\", 16);\n    ɵngcc0.ɵɵtemplate(3, FulfillmentCardComponent_div_9_ng_container_6_ng_template_3_Template, 3, 3, \"ng-template\", null, 17, ɵngcc0.ɵɵtemplateRefExtractor);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const nextState_r7 = ctx.$implicit;\n    const _r9 = ɵngcc0.ɵɵreference(4);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngIf\", nextState_r7 !== \"Cancelled\")(\"ngIfElse\", _r9);\n} }\nfunction FulfillmentCardComponent_div_9_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"div\", 8);\n    ɵngcc0.ɵɵtemplate(1, FulfillmentCardComponent_div_9_ng_container_1_Template, 6, 10, \"ng-container\", 9);\n    ɵngcc0.ɵɵelementStart(2, \"vdr-dropdown\");\n    ɵngcc0.ɵɵelementStart(3, \"button\", 10);\n    ɵngcc0.ɵɵelement(4, \"clr-icon\", 11);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(5, \"vdr-dropdown-menu\", 12);\n    ɵngcc0.ɵɵtemplate(6, FulfillmentCardComponent_div_9_ng_container_6_Template, 5, 2, \"ng-container\", 13);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r1 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r1.nextSuggestedState());\n    ɵngcc0.ɵɵadvance(5);\n    ɵngcc0.ɵɵproperty(\"ngForOf\", ctx_r1.nextOtherStates());\n} }\nfunction FulfillmentDetailComponent_vdr_labeled_data_7_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"vdr-labeled-data\", 0);\n    ɵngcc0.ɵɵpipe(1, \"translate\");\n    ɵngcc0.ɵɵtext(2);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"label\", ɵngcc0.ɵɵpipeBind1(1, 2, \"order.tracking-code\"));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ctx_r0.fulfillment == null ? null : ctx_r0.fulfillment.trackingCode, \"\\n\");\n} }\nfunction FulfillmentDetailComponent_ng_container_11_vdr_custom_field_control_1_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"vdr-custom-field-control\", 5);\n} if (rf & 2) {\n    const customField_r2 = ɵngcc0.ɵɵnextContext().$implicit;\n    const ctx_r3 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"readonly\", true)(\"compact\", true)(\"customField\", customField_r2)(\"customFieldsFormGroup\", ctx_r3.customFieldFormGroup);\n} }\nfunction FulfillmentDetailComponent_ng_container_11_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵtemplate(1, FulfillmentDetailComponent_ng_container_11_vdr_custom_field_control_1_Template, 1, 4, \"vdr-custom-field-control\", 4);\n    ɵngcc0.ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const customField_r2 = ctx.$implicit;\n    const ctx_r1 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r1.customFieldFormGroup.get(customField_r2.name));\n} }\nfunction FulfillmentStateLabelComponent_clr_icon_2_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"clr-icon\", 2);\n} }\nfunction LineFulfillmentComponent_vdr_dropdown_0_clr_icon_2_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"clr-icon\", 9);\n} }\nfunction LineFulfillmentComponent_vdr_dropdown_0_clr_icon_3_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"clr-icon\", 10);\n} }\nfunction LineFulfillmentComponent_vdr_dropdown_0_clr_icon_4_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"clr-icon\", 11);\n} }\nfunction LineFulfillmentComponent_vdr_dropdown_0_label_6_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"label\", 12);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(2, 1, \"order.line-fulfillment-all\"), \" \");\n} }\nconst _c1 = function (a0, a1) { return { total: a0, count: a1 }; };\nfunction LineFulfillmentComponent_vdr_dropdown_0_label_7_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"label\", 12);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r5 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind2(2, 1, \"order.line-fulfillment-partial\", ɵngcc0.ɵɵpureFunction2(4, _c1, ctx_r5.line.quantity, ctx_r5.fulfilledCount)), \" \");\n} }\nfunction LineFulfillmentComponent_vdr_dropdown_0_label_8_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"label\", 12);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(2, 1, \"order.line-fulfillment-none\"), \" \");\n} }\nfunction LineFulfillmentComponent_vdr_dropdown_0_div_9_vdr_labeled_data_12_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"vdr-labeled-data\", 15);\n    ɵngcc0.ɵɵpipe(1, \"translate\");\n    ɵngcc0.ɵɵtext(2);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const item_r8 = ɵngcc0.ɵɵnextContext().$implicit;\n    ɵngcc0.ɵɵproperty(\"label\", ɵngcc0.ɵɵpipeBind1(1, 2, \"order.tracking-code\"));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", item_r8.fulfillment.trackingCode, \" \");\n} }\nconst _c2 = function (a0) { return { count: a0 }; };\nfunction LineFulfillmentComponent_vdr_dropdown_0_div_9_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"div\", 13);\n    ɵngcc0.ɵɵelementStart(1, \"div\", 14);\n    ɵngcc0.ɵɵtext(2);\n    ɵngcc0.ɵɵpipe(3, \"translate\");\n    ɵngcc0.ɵɵpipe(4, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(5, \"vdr-labeled-data\", 15);\n    ɵngcc0.ɵɵpipe(6, \"translate\");\n    ɵngcc0.ɵɵtext(7);\n    ɵngcc0.ɵɵpipe(8, \"localeDate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(9, \"vdr-labeled-data\", 15);\n    ɵngcc0.ɵɵpipe(10, \"translate\");\n    ɵngcc0.ɵɵtext(11);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵtemplate(12, LineFulfillmentComponent_vdr_dropdown_0_div_9_vdr_labeled_data_12_Template, 3, 4, \"vdr-labeled-data\", 16);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const item_r8 = ctx.$implicit;\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate3(\" \", ɵngcc0.ɵɵpipeBind1(3, 8, \"order.fulfillment\"), \" #\", item_r8.fulfillment.id, \" (\", ɵngcc0.ɵɵpipeBind2(4, 10, \"order.item-count\", ɵngcc0.ɵɵpureFunction1(20, _c2, item_r8.count)), \") \");\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵproperty(\"label\", ɵngcc0.ɵɵpipeBind1(6, 13, \"common.created-at\"));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind2(8, 15, item_r8.fulfillment.createdAt, \"medium\"), \" \");\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"label\", ɵngcc0.ɵɵpipeBind1(10, 18, \"order.fulfillment-method\"));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", item_r8.fulfillment.method, \" \");\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", item_r8.fulfillment.trackingCode);\n} }\nfunction LineFulfillmentComponent_vdr_dropdown_0_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"vdr-dropdown\", 1);\n    ɵngcc0.ɵɵelementStart(1, \"button\", 2);\n    ɵngcc0.ɵɵtemplate(2, LineFulfillmentComponent_vdr_dropdown_0_clr_icon_2_Template, 1, 0, \"clr-icon\", 3);\n    ɵngcc0.ɵɵtemplate(3, LineFulfillmentComponent_vdr_dropdown_0_clr_icon_3_Template, 1, 0, \"clr-icon\", 4);\n    ɵngcc0.ɵɵtemplate(4, LineFulfillmentComponent_vdr_dropdown_0_clr_icon_4_Template, 1, 0, \"clr-icon\", 5);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(5, \"vdr-dropdown-menu\", 6);\n    ɵngcc0.ɵɵtemplate(6, LineFulfillmentComponent_vdr_dropdown_0_label_6_Template, 3, 3, \"label\", 7);\n    ɵngcc0.ɵɵtemplate(7, LineFulfillmentComponent_vdr_dropdown_0_label_7_Template, 3, 7, \"label\", 7);\n    ɵngcc0.ɵɵtemplate(8, LineFulfillmentComponent_vdr_dropdown_0_label_8_Template, 3, 3, \"label\", 7);\n    ɵngcc0.ɵɵtemplate(9, LineFulfillmentComponent_vdr_dropdown_0_div_9_Template, 13, 22, \"div\", 8);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r0.fulfillmentStatus === \"full\");\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r0.fulfillmentStatus === \"partial\");\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r0.fulfillmentStatus === \"none\");\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r0.fulfillmentStatus === \"full\");\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r0.fulfillmentStatus === \"partial\");\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r0.fulfillmentStatus === \"none\");\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngForOf\", ctx_r0.fulfillments);\n} }\nfunction LineRefundsComponent_span_0_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"span\", 1);\n    ɵngcc0.ɵɵpipe(1, \"translate\");\n    ɵngcc0.ɵɵelement(2, \"clr-icon\", 2);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"title\", ɵngcc0.ɵɵpipeBind2(1, 1, \"order.refunded-count\", ɵngcc0.ɵɵpureFunction1(4, _c2, ctx_r0.getRefundedCount())));\n} }\nfunction ModificationDetailComponent_vdr_labeled_data_3_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"vdr-labeled-data\", 0);\n    ɵngcc0.ɵɵpipe(1, \"translate\");\n    ɵngcc0.ɵɵtext(2);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"label\", ɵngcc0.ɵɵpipeBind1(1, 2, \"order.note\"));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate(ctx_r0.modification.note);\n} }\nfunction ModificationDetailComponent_vdr_labeled_data_4_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"vdr-labeled-data\", 0);\n    ɵngcc0.ɵɵpipe(1, \"translate\");\n    ɵngcc0.ɵɵtext(2);\n    ɵngcc0.ɵɵpipe(3, \"localeCurrency\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const surcharge_r4 = ctx.$implicit;\n    const ctx_r1 = ɵngcc0.ɵɵnextContext();\n    let tmp_1_0 = null;\n    ɵngcc0.ɵɵproperty(\"label\", ɵngcc0.ɵɵpipeBind1(1, 3, \"order.surcharges\"));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate2(\" \", (tmp_1_0 = ctx_r1.getSurcharge(surcharge_r4.id)) == null ? null : tmp_1_0.description, \" \", ɵngcc0.ɵɵpipeBind2(3, 5, (tmp_1_0 = ctx_r1.getSurcharge(surcharge_r4.id)) == null ? null : tmp_1_0.priceWithTax, ctx_r1.order.currencyCode), \"\");\n} }\nfunction ModificationDetailComponent_vdr_labeled_data_5_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"vdr-labeled-data\", 0);\n    ɵngcc0.ɵɵpipe(1, \"translate\");\n    ɵngcc0.ɵɵelement(2, \"vdr-simple-item-list\", 3);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r2 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"label\", ɵngcc0.ɵɵpipeBind1(1, 2, \"order.added-items\"));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"items\", ctx_r2.getAddedItems());\n} }\nfunction ModificationDetailComponent_vdr_labeled_data_6_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"vdr-labeled-data\", 0);\n    ɵngcc0.ɵɵpipe(1, \"translate\");\n    ɵngcc0.ɵɵelement(2, \"vdr-simple-item-list\", 3);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r3 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"label\", ɵngcc0.ɵɵpipeBind1(1, 2, \"order.removed-items\"));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"items\", ctx_r3.getRemovedItems());\n} }\nfunction OrderCustomFieldsCardComponent_div_0_ng_container_6_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵelement(1, \"vdr-custom-field-control\", 9);\n    ɵngcc0.ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const customField_r4 = ctx.$implicit;\n    const ctx_r1 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"customFieldsFormGroup\", ctx_r1.customFieldForm)(\"compact\", true)(\"readonly\", customField_r4.readonly || !ctx_r1.editable)(\"customField\", customField_r4);\n} }\nfunction OrderCustomFieldsCardComponent_div_0_button_8_Template(rf, ctx) { if (rf & 1) {\n    const _r6 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"button\", 10);\n    ɵngcc0.ɵɵlistener(\"click\", function OrderCustomFieldsCardComponent_div_0_button_8_Template_button_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r6); const ctx_r5 = ɵngcc0.ɵɵnextContext(2); return ctx_r5.editable = true; });\n    ɵngcc0.ɵɵelement(1, \"clr-icon\", 11);\n    ɵngcc0.ɵɵtext(2);\n    ɵngcc0.ɵɵpipe(3, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(3, 1, \"common.edit\"), \" \");\n} }\nfunction OrderCustomFieldsCardComponent_div_0_button_9_Template(rf, ctx) { if (rf & 1) {\n    const _r8 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"button\", 12);\n    ɵngcc0.ɵɵlistener(\"click\", function OrderCustomFieldsCardComponent_div_0_button_9_Template_button_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r8); const ctx_r7 = ɵngcc0.ɵɵnextContext(2); return ctx_r7.onUpdateClick(); });\n    ɵngcc0.ɵɵelement(1, \"clr-icon\", 13);\n    ɵngcc0.ɵɵtext(2);\n    ɵngcc0.ɵɵpipe(3, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r3 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵproperty(\"disabled\", ctx_r3.customFieldForm.pristine || ctx_r3.customFieldForm.invalid);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(3, 2, \"common.update\"), \" \");\n} }\nfunction OrderCustomFieldsCardComponent_div_0_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"div\", 1);\n    ɵngcc0.ɵɵelementStart(1, \"div\", 2);\n    ɵngcc0.ɵɵtext(2);\n    ɵngcc0.ɵɵpipe(3, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(4, \"div\", 3);\n    ɵngcc0.ɵɵelementStart(5, \"div\", 4);\n    ɵngcc0.ɵɵtemplate(6, OrderCustomFieldsCardComponent_div_0_ng_container_6_Template, 2, 4, \"ng-container\", 5);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(7, \"div\", 6);\n    ɵngcc0.ɵɵtemplate(8, OrderCustomFieldsCardComponent_div_0_button_8_Template, 4, 3, \"button\", 7);\n    ɵngcc0.ɵɵtemplate(9, OrderCustomFieldsCardComponent_div_0_button_9_Template, 4, 4, \"button\", 8);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(3, 6, \"common.custom-fields\"), \" \");\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵclassProp(\"editable\", ctx_r0.editable);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngForOf\", ctx_r0.customFieldsConfig);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngIf\", !ctx_r0.editable);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r0.editable);\n} }\nfunction OrderStateSelectDialogComponent_ng_template_0_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵtext(0);\n    ɵngcc0.ɵɵpipe(1, \"translate\");\n} if (rf & 2) {\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(1, 1, \"order.select-state\"));\n} }\nfunction OrderStateSelectDialogComponent_option_6_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"option\", 4);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵpipe(3, \"stateI18nToken\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const state_r3 = ctx.$implicit;\n    ɵngcc0.ɵɵproperty(\"value\", state_r3);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(2, 2, ɵngcc0.ɵɵpipeBind1(3, 4, state_r3)), \" \");\n} }\nfunction OrderStateSelectDialogComponent_ng_template_7_button_0_Template(rf, ctx) { if (rf & 1) {\n    const _r6 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"button\", 7);\n    ɵngcc0.ɵɵlistener(\"click\", function OrderStateSelectDialogComponent_ng_template_7_button_0_Template_button_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r6); const ctx_r5 = ɵngcc0.ɵɵnextContext(2); return ctx_r5.cancel(); });\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(2, 1, \"common.cancel\"), \" \");\n} }\nfunction OrderStateSelectDialogComponent_ng_template_7_Template(rf, ctx) { if (rf & 1) {\n    const _r8 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵtemplate(0, OrderStateSelectDialogComponent_ng_template_7_button_0_Template, 3, 3, \"button\", 5);\n    ɵngcc0.ɵɵelementStart(1, \"button\", 6);\n    ɵngcc0.ɵɵlistener(\"click\", function OrderStateSelectDialogComponent_ng_template_7_Template_button_click_1_listener() { ɵngcc0.ɵɵrestoreView(_r8); const ctx_r7 = ɵngcc0.ɵɵnextContext(); return ctx_r7.select(); });\n    ɵngcc0.ɵɵtext(2);\n    ɵngcc0.ɵɵpipe(3, \"translate\");\n    ɵngcc0.ɵɵpipe(4, \"translate\");\n    ɵngcc0.ɵɵpipe(5, \"stateI18nToken\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r2 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r2.cancellable);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"disabled\", !ctx_r2.selectedState);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind2(3, 3, \"order.transition-to-state\", ɵngcc0.ɵɵpureFunction1(10, _c0, ɵngcc0.ɵɵpipeBind1(4, 6, ɵngcc0.ɵɵpipeBind1(5, 8, ctx_r2.selectedState)))), \" \");\n} }\nfunction OrderProcessGraphDialogComponent_ng_template_0_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵtext(0);\n    ɵngcc0.ɵɵpipe(1, \"translate\");\n} if (rf & 2) {\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(1, 1, \"order.order-state-diagram\"));\n} }\nfunction RefundOrderDialogComponent_ng_template_0_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵtext(0);\n    ɵngcc0.ɵɵpipe(1, \"translate\");\n} if (rf & 2) {\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(1, 1, \"order.refund-and-cancel-order\"));\n} }\nfunction RefundOrderDialogComponent_tr_31_ng_container_18_vdr_dropdown_1_div_5_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"div\", 36);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵelementStart(2, \"div\", 37);\n    ɵngcc0.ɵɵtext(3);\n    ɵngcc0.ɵɵpipe(4, \"currency\");\n    ɵngcc0.ɵɵpipe(5, \"number\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const discount_r14 = ctx.$implicit;\n    const line_r6 = ɵngcc0.ɵɵnextContext(3).$implicit;\n    const ctx_r13 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", discount_r14.description, \" \");\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind2(4, 2, ɵngcc0.ɵɵpipeBind2(5, 5, discount_r14.amount / 100 / line_r6.quantity, \"1.0-2\"), ctx_r13.order.currencyCode), \" \");\n} }\nfunction RefundOrderDialogComponent_tr_31_ng_container_18_vdr_dropdown_1_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"vdr-dropdown\");\n    ɵngcc0.ɵɵelementStart(1, \"div\", 32);\n    ɵngcc0.ɵɵelementStart(2, \"button\", 33);\n    ɵngcc0.ɵɵelement(3, \"clr-icon\", 34);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(4, \"vdr-dropdown-menu\");\n    ɵngcc0.ɵɵtemplate(5, RefundOrderDialogComponent_tr_31_ng_container_18_vdr_dropdown_1_div_5_Template, 6, 8, \"div\", 35);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const discounts_r11 = ɵngcc0.ɵɵnextContext().ngIf;\n    ɵngcc0.ɵɵadvance(5);\n    ɵngcc0.ɵɵproperty(\"ngForOf\", discounts_r11);\n} }\nfunction RefundOrderDialogComponent_tr_31_ng_container_18_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵtemplate(1, RefundOrderDialogComponent_tr_31_ng_container_18_vdr_dropdown_1_Template, 6, 1, \"vdr-dropdown\", 26);\n    ɵngcc0.ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const discounts_r11 = ctx.ngIf;\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", discounts_r11.length);\n} }\nfunction RefundOrderDialogComponent_tr_31_input_20_Template(rf, ctx) { if (rf & 1) {\n    const _r18 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"input\", 38);\n    ɵngcc0.ɵɵlistener(\"ngModelChange\", function RefundOrderDialogComponent_tr_31_input_20_Template_input_ngModelChange_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r18); const line_r6 = ɵngcc0.ɵɵnextContext().$implicit; const ctx_r17 = ɵngcc0.ɵɵnextContext(); return ctx_r17.lineQuantities[line_r6.id].quantity = $event; })(\"input\", function RefundOrderDialogComponent_tr_31_input_20_Template_input_input_0_listener() { ɵngcc0.ɵɵrestoreView(_r18); const line_r6 = ɵngcc0.ɵɵnextContext().$implicit; const ctx_r20 = ɵngcc0.ɵɵnextContext(); return ctx_r20.handleZeroQuantity(ctx_r20.lineQuantities[line_r6.id]); });\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const line_r6 = ɵngcc0.ɵɵnextContext().$implicit;\n    const ctx_r8 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"ngModel\", ctx_r8.lineQuantities[line_r6.id].quantity)(\"max\", line_r6.quantity);\n} }\nfunction RefundOrderDialogComponent_tr_31_input_23_Template(rf, ctx) { if (rf & 1) {\n    const _r24 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"input\", 39);\n    ɵngcc0.ɵɵlistener(\"ngModelChange\", function RefundOrderDialogComponent_tr_31_input_23_Template_input_ngModelChange_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r24); const line_r6 = ɵngcc0.ɵɵnextContext().$implicit; const ctx_r23 = ɵngcc0.ɵɵnextContext(); return ctx_r23.lineQuantities[line_r6.id].refund = $event; });\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const line_r6 = ɵngcc0.ɵɵnextContext().$implicit;\n    const ctx_r9 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"disabled\", 0 === ctx_r9.lineQuantities[line_r6.id].quantity)(\"ngModel\", ctx_r9.lineQuantities[line_r6.id].refund);\n} }\nfunction RefundOrderDialogComponent_tr_31_input_26_Template(rf, ctx) { if (rf & 1) {\n    const _r28 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"input\", 39);\n    ɵngcc0.ɵɵlistener(\"ngModelChange\", function RefundOrderDialogComponent_tr_31_input_26_Template_input_ngModelChange_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r28); const line_r6 = ɵngcc0.ɵɵnextContext().$implicit; const ctx_r27 = ɵngcc0.ɵɵnextContext(); return ctx_r27.lineQuantities[line_r6.id].cancel = $event; });\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const line_r6 = ɵngcc0.ɵɵnextContext().$implicit;\n    const ctx_r10 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"disabled\", 0 === ctx_r10.lineQuantities[line_r6.id].quantity)(\"ngModel\", ctx_r10.lineQuantities[line_r6.id].cancel);\n} }\nfunction RefundOrderDialogComponent_tr_31_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"tr\", 18);\n    ɵngcc0.ɵɵelementStart(1, \"td\", 19);\n    ɵngcc0.ɵɵelement(2, \"img\", 20);\n    ɵngcc0.ɵɵpipe(3, \"assetPreview\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(4, \"td\", 21);\n    ɵngcc0.ɵɵtext(5);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(6, \"td\", 22);\n    ɵngcc0.ɵɵtext(7);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(8, \"td\", 23);\n    ɵngcc0.ɵɵtext(9);\n    ɵngcc0.ɵɵelement(10, \"vdr-line-refunds\", 24);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(11, \"td\", 23);\n    ɵngcc0.ɵɵtext(12);\n    ɵngcc0.ɵɵpipe(13, \"localeCurrency\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(14, \"td\", 23);\n    ɵngcc0.ɵɵelementStart(15, \"div\", 25);\n    ɵngcc0.ɵɵtext(16);\n    ɵngcc0.ɵɵpipe(17, \"localeCurrency\");\n    ɵngcc0.ɵɵtemplate(18, RefundOrderDialogComponent_tr_31_ng_container_18_Template, 2, 1, \"ng-container\", 26);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(19, \"td\", 27);\n    ɵngcc0.ɵɵtemplate(20, RefundOrderDialogComponent_tr_31_input_20_Template, 1, 2, \"input\", 28);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(21, \"td\", 29);\n    ɵngcc0.ɵɵelementStart(22, \"div\", 30);\n    ɵngcc0.ɵɵtemplate(23, RefundOrderDialogComponent_tr_31_input_23_Template, 1, 2, \"input\", 31);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(24, \"td\", 29);\n    ɵngcc0.ɵɵelementStart(25, \"div\", 30);\n    ɵngcc0.ɵɵtemplate(26, RefundOrderDialogComponent_tr_31_input_26_Template, 1, 2, \"input\", 31);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const line_r6 = ctx.$implicit;\n    const ctx_r1 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"src\", ɵngcc0.ɵɵpipeBind2(3, 12, line_r6.featuredAsset, \"tiny\"), ɵngcc0.ɵɵsanitizeUrl);\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵtextInterpolate(line_r6.productVariant.name);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate(line_r6.productVariant.sku);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", line_r6.quantity, \" \");\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"line\", line_r6)(\"payments\", ctx_r1.order.payments);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind2(13, 15, line_r6.unitPriceWithTax, ctx_r1.order.currencyCode), \" \");\n    ɵngcc0.ɵɵadvance(4);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind2(17, 18, line_r6.proratedUnitPriceWithTax, ctx_r1.order.currencyCode), \" \");\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngIf\", line_r6.discounts);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r1.lineCanBeRefundedOrCancelled(line_r6));\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r1.lineCanBeRefundedOrCancelled(line_r6));\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r1.lineCanBeRefundedOrCancelled(line_r6));\n} }\nfunction RefundOrderDialogComponent_option_45_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"option\", 40);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"localeCurrency\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const payment_r31 = ctx.$implicit;\n    const ctx_r2 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"ngValue\", payment_r31)(\"disabled\", payment_r31.state !== \"Settled\");\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate3(\" #\", payment_r31.id, \" \", payment_r31.method, \": \", ɵngcc0.ɵɵpipeBind2(2, 5, payment_r31.amount, ctx_r2.order.currencyCode), \" \");\n} }\nconst _c3 = function (a0, a1) { return { min: a0, max: a1 }; };\nfunction RefundOrderDialogComponent_div_66_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"div\", 41);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵpipe(3, \"currency\");\n    ɵngcc0.ɵɵpipe(4, \"localeCurrency\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r3 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind2(2, 1, \"order.refund-total-error\", ɵngcc0.ɵɵpureFunction2(10, _c3, ɵngcc0.ɵɵpipeBind2(3, 4, 0, ctx_r3.order.currencyCode), ɵngcc0.ɵɵpipeBind2(4, 7, ctx_r3.settledPaymentsTotal, ctx_r3.order.currencyCode))), \" \");\n} }\nfunction RefundOrderDialogComponent_div_67_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"div\", 42);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(2, 1, \"order.refund-total-warning\"), \" \");\n} }\nconst _c4 = function (a0) { return { amount: a0 }; };\nfunction RefundOrderDialogComponent_ng_template_68_ng_container_4_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵpipe(3, \"localeCurrency\");\n    ɵngcc0.ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const ctx_r32 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind2(2, 1, \"order.refund-with-amount\", ɵngcc0.ɵɵpureFunction1(7, _c4, ɵngcc0.ɵɵpipeBind2(3, 4, ctx_r32.refundTotal, ctx_r32.order.currencyCode))), \" \");\n} }\nfunction RefundOrderDialogComponent_ng_template_68_ng_template_5_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵtext(0);\n    ɵngcc0.ɵɵpipe(1, \"translate\");\n} if (rf & 2) {\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(1, 1, \"order.cancel-selected-items\"), \" \");\n} }\nfunction RefundOrderDialogComponent_ng_template_68_Template(rf, ctx) { if (rf & 1) {\n    const _r36 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"button\", 43);\n    ɵngcc0.ɵɵlistener(\"click\", function RefundOrderDialogComponent_ng_template_68_Template_button_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r36); const ctx_r35 = ɵngcc0.ɵɵnextContext(); return ctx_r35.cancel(); });\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(3, \"button\", 44);\n    ɵngcc0.ɵɵlistener(\"click\", function RefundOrderDialogComponent_ng_template_68_Template_button_click_3_listener() { ɵngcc0.ɵɵrestoreView(_r36); const ctx_r37 = ɵngcc0.ɵɵnextContext(); return ctx_r37.select(); });\n    ɵngcc0.ɵɵtemplate(4, RefundOrderDialogComponent_ng_template_68_ng_container_4_Template, 4, 9, \"ng-container\", 45);\n    ɵngcc0.ɵɵtemplate(5, RefundOrderDialogComponent_ng_template_68_ng_template_5_Template, 2, 3, \"ng-template\", null, 46, ɵngcc0.ɵɵtemplateRefExtractor);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const _r33 = ɵngcc0.ɵɵreference(6);\n    const ctx_r5 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(2, 4, \"common.cancel\"));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"disabled\", !ctx_r5.canSubmit());\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r5.isRefunding())(\"ngIfElse\", _r33);\n} }\nfunction SettleRefundDialogComponent_ng_template_0_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵtext(0);\n    ɵngcc0.ɵɵpipe(1, \"translate\");\n} if (rf & 2) {\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(1, 1, \"order.settle-refund\"));\n} }\nfunction SettleRefundDialogComponent_ng_template_9_Template(rf, ctx) { if (rf & 1) {\n    const _r3 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"button\", 4);\n    ɵngcc0.ɵɵlistener(\"click\", function SettleRefundDialogComponent_ng_template_9_Template_button_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r3); const ctx_r2 = ɵngcc0.ɵɵnextContext(); return ctx_r2.cancel(); });\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(3, \"button\", 5);\n    ɵngcc0.ɵɵlistener(\"click\", function SettleRefundDialogComponent_ng_template_9_Template_button_click_3_listener() { ɵngcc0.ɵɵrestoreView(_r3); const ctx_r4 = ɵngcc0.ɵɵnextContext(); return ctx_r4.submit(); });\n    ɵngcc0.ɵɵtext(4);\n    ɵngcc0.ɵɵpipe(5, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r1 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(2, 3, \"common.cancel\"));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"disabled\", !ctx_r1.transactionId);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(5, 5, \"order.settle-refund\"), \" \");\n} }\nconst _c5 = function (a0) { return { method: a0 }; };\nfunction OrderDetailComponent_vdr_action_bar_0_button_11_Template(rf, ctx) { if (rf & 1) {\n    const _r10 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"button\", 16);\n    ɵngcc0.ɵɵlistener(\"click\", function OrderDetailComponent_vdr_action_bar_0_button_11_Template_button_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r10); const order_r2 = ɵngcc0.ɵɵnextContext().ngIf; const ctx_r8 = ɵngcc0.ɵɵnextContext(); return ctx_r8.addManualPayment(order_r2); });\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵpipe(3, \"localeCurrency\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const order_r2 = ɵngcc0.ɵɵnextContext().ngIf;\n    const ctx_r3 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate2(\" \", ɵngcc0.ɵɵpipeBind1(2, 2, \"order.add-payment-to-order\"), \" (\", ɵngcc0.ɵɵpipeBind2(3, 4, ctx_r3.outstandingPaymentAmount(order_r2), order_r2.currencyCode), \") \");\n} }\nfunction OrderDetailComponent_vdr_action_bar_0_button_12_Template(rf, ctx) { if (rf & 1) {\n    const _r13 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"button\", 16);\n    ɵngcc0.ɵɵlistener(\"click\", function OrderDetailComponent_vdr_action_bar_0_button_12_Template_button_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r13); const ctx_r12 = ɵngcc0.ɵɵnextContext(2); return ctx_r12.transitionToState(\"ArrangingAdditionalPayment\"); });\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(2, 1, \"order.arrange-additional-payment\"), \" \");\n} }\nfunction OrderDetailComponent_vdr_action_bar_0_ng_container_20_Template(rf, ctx) { if (rf & 1) {\n    const _r15 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵelementStart(1, \"button\", 14);\n    ɵngcc0.ɵɵlistener(\"click\", function OrderDetailComponent_vdr_action_bar_0_ng_container_20_Template_button_click_1_listener() { ɵngcc0.ɵɵrestoreView(_r15); const ctx_r14 = ɵngcc0.ɵɵnextContext(2); return ctx_r14.transitionToModifying(); });\n    ɵngcc0.ɵɵelement(2, \"clr-icon\", 17);\n    ɵngcc0.ɵɵtext(3);\n    ɵngcc0.ɵɵpipe(4, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelement(5, \"div\", 13);\n    ɵngcc0.ɵɵelementContainerEnd();\n} if (rf & 2) {\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(4, 1, \"order.modify-order\"), \" \");\n} }\nfunction OrderDetailComponent_vdr_action_bar_0_button_21_ng_container_2_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵelementContainerEnd();\n} if (rf & 2) {\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(2, 1, \"order.refund-and-cancel-order\"), \" \");\n} }\nfunction OrderDetailComponent_vdr_action_bar_0_button_21_ng_template_3_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵtext(0);\n    ɵngcc0.ɵɵpipe(1, \"translate\");\n} if (rf & 2) {\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(1, 1, \"order.cancel-order\"), \" \");\n} }\nfunction OrderDetailComponent_vdr_action_bar_0_button_21_Template(rf, ctx) { if (rf & 1) {\n    const _r21 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"button\", 14);\n    ɵngcc0.ɵɵlistener(\"click\", function OrderDetailComponent_vdr_action_bar_0_button_21_Template_button_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r21); const order_r2 = ɵngcc0.ɵɵnextContext().ngIf; const ctx_r19 = ɵngcc0.ɵɵnextContext(); return ctx_r19.cancelOrRefund(order_r2); });\n    ɵngcc0.ɵɵelement(1, \"clr-icon\", 18);\n    ɵngcc0.ɵɵtemplate(2, OrderDetailComponent_vdr_action_bar_0_button_21_ng_container_2_Template, 3, 3, \"ng-container\", 19);\n    ɵngcc0.ɵɵtemplate(3, OrderDetailComponent_vdr_action_bar_0_button_21_ng_template_3_Template, 2, 3, \"ng-template\", null, 20, ɵngcc0.ɵɵtemplateRefExtractor);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const _r17 = ɵngcc0.ɵɵreference(4);\n    const order_r2 = ɵngcc0.ɵɵnextContext().ngIf;\n    const ctx_r6 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r6.orderHasSettledPayments(order_r2))(\"ngIfElse\", _r17);\n} }\nfunction OrderDetailComponent_vdr_action_bar_0_ng_container_22_button_2_Template(rf, ctx) { if (rf & 1) {\n    const _r26 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"button\", 14);\n    ɵngcc0.ɵɵlistener(\"click\", function OrderDetailComponent_vdr_action_bar_0_ng_container_22_button_2_Template_button_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r26); const nextState_r24 = ctx.$implicit; const ctx_r25 = ɵngcc0.ɵɵnextContext(3); return ctx_r25.transitionToState(nextState_r24); });\n    ɵngcc0.ɵɵelement(1, \"clr-icon\", 22);\n    ɵngcc0.ɵɵtext(2);\n    ɵngcc0.ɵɵpipe(3, \"translate\");\n    ɵngcc0.ɵɵpipe(4, \"translate\");\n    ɵngcc0.ɵɵpipe(5, \"stateI18nToken\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const nextState_r24 = ctx.$implicit;\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind2(3, 1, \"order.transition-to-state\", ɵngcc0.ɵɵpureFunction1(8, _c0, ɵngcc0.ɵɵpipeBind1(4, 4, ɵngcc0.ɵɵpipeBind1(5, 6, nextState_r24)))), \" \");\n} }\nfunction OrderDetailComponent_vdr_action_bar_0_ng_container_22_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵelement(1, \"div\", 13);\n    ɵngcc0.ɵɵtemplate(2, OrderDetailComponent_vdr_action_bar_0_ng_container_22_button_2_Template, 6, 10, \"button\", 21);\n    ɵngcc0.ɵɵpipe(3, \"async\");\n    ɵngcc0.ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const ctx_r7 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngForOf\", ɵngcc0.ɵɵpipeBind1(3, 1, ctx_r7.nextStates$));\n} }\nfunction OrderDetailComponent_vdr_action_bar_0_Template(rf, ctx) { if (rf & 1) {\n    const _r28 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"vdr-action-bar\");\n    ɵngcc0.ɵɵelementStart(1, \"vdr-ab-left\");\n    ɵngcc0.ɵɵelementStart(2, \"div\", 1);\n    ɵngcc0.ɵɵelement(3, \"vdr-entity-info\", 2);\n    ɵngcc0.ɵɵpipe(4, \"async\");\n    ɵngcc0.ɵɵelementStart(5, \"vdr-order-state-label\", 3);\n    ɵngcc0.ɵɵelementStart(6, \"button\", 4);\n    ɵngcc0.ɵɵlistener(\"click\", function OrderDetailComponent_vdr_action_bar_0_Template_button_click_6_listener() { ɵngcc0.ɵɵrestoreView(_r28); const ctx_r27 = ɵngcc0.ɵɵnextContext(); return ctx_r27.openStateDiagram(); });\n    ɵngcc0.ɵɵpipe(7, \"translate\");\n    ɵngcc0.ɵɵelement(8, \"clr-icon\", 5);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(9, \"vdr-ab-right\");\n    ɵngcc0.ɵɵelement(10, \"vdr-action-bar-items\", 6);\n    ɵngcc0.ɵɵtemplate(11, OrderDetailComponent_vdr_action_bar_0_button_11_Template, 4, 7, \"button\", 7);\n    ɵngcc0.ɵɵtemplate(12, OrderDetailComponent_vdr_action_bar_0_button_12_Template, 3, 3, \"button\", 7);\n    ɵngcc0.ɵɵelementStart(13, \"button\", 8);\n    ɵngcc0.ɵɵlistener(\"click\", function OrderDetailComponent_vdr_action_bar_0_Template_button_click_13_listener() { ɵngcc0.ɵɵrestoreView(_r28); const ctx_r29 = ɵngcc0.ɵɵnextContext(); return ctx_r29.fulfillOrder(); });\n    ɵngcc0.ɵɵtext(14);\n    ɵngcc0.ɵɵpipe(15, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(16, \"vdr-dropdown\");\n    ɵngcc0.ɵɵelementStart(17, \"button\", 9);\n    ɵngcc0.ɵɵelement(18, \"clr-icon\", 10);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(19, \"vdr-dropdown-menu\", 11);\n    ɵngcc0.ɵɵtemplate(20, OrderDetailComponent_vdr_action_bar_0_ng_container_20_Template, 6, 3, \"ng-container\", 0);\n    ɵngcc0.ɵɵtemplate(21, OrderDetailComponent_vdr_action_bar_0_button_21_Template, 5, 2, \"button\", 12);\n    ɵngcc0.ɵɵtemplate(22, OrderDetailComponent_vdr_action_bar_0_ng_container_22_Template, 4, 3, \"ng-container\", 0);\n    ɵngcc0.ɵɵpipe(23, \"async\");\n    ɵngcc0.ɵɵelement(24, \"div\", 13);\n    ɵngcc0.ɵɵelementStart(25, \"button\", 14);\n    ɵngcc0.ɵɵlistener(\"click\", function OrderDetailComponent_vdr_action_bar_0_Template_button_click_25_listener() { ɵngcc0.ɵɵrestoreView(_r28); const order_r2 = ctx.ngIf; const ctx_r30 = ɵngcc0.ɵɵnextContext(); return ctx_r30.manuallyTransitionToState(order_r2); });\n    ɵngcc0.ɵɵelement(26, \"clr-icon\", 15);\n    ɵngcc0.ɵɵtext(27);\n    ɵngcc0.ɵɵpipe(28, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const order_r2 = ctx.ngIf;\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    let tmp_9_0 = null;\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵproperty(\"entity\", ɵngcc0.ɵɵpipeBind1(4, 11, ctx_r0.entity$));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"state\", order_r2.state);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"title\", ɵngcc0.ɵɵpipeBind1(7, 13, \"order.order-state-diagram\"));\n    ɵngcc0.ɵɵadvance(5);\n    ɵngcc0.ɵɵproperty(\"ngIf\", order_r2.state === \"ArrangingAdditionalPayment\" && (ctx_r0.hasUnsettledModifications(order_r2) || 0 < ctx_r0.outstandingPaymentAmount(order_r2)));\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", order_r2.state !== \"ArrangingAdditionalPayment\" && 0 < ctx_r0.outstandingPaymentAmount(order_r2));\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"disabled\", !ctx_r0.canAddFulfillment(order_r2));\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(15, 15, \"order.fulfill-order\"), \" \");\n    ɵngcc0.ɵɵadvance(6);\n    ɵngcc0.ɵɵproperty(\"ngIf\", order_r2.nextStates.includes(\"Modifying\"));\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", order_r2.nextStates.includes(\"Cancelled\"));\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", (tmp_9_0 = ɵngcc0.ɵɵpipeBind1(23, 17, ctx_r0.nextStates$)) == null ? null : tmp_9_0.length);\n    ɵngcc0.ɵɵadvance(5);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(28, 19, \"order.manually-transition-to-state\"), \" \");\n} }\nfunction OrderDetailComponent_div_2_tr_23_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"tr\");\n    ɵngcc0.ɵɵelementStart(1, \"td\");\n    ɵngcc0.ɵɵtext(2);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(3, \"td\");\n    ɵngcc0.ɵɵtext(4);\n    ɵngcc0.ɵɵpipe(5, \"percent\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(6, \"td\");\n    ɵngcc0.ɵɵtext(7);\n    ɵngcc0.ɵɵpipe(8, \"localeCurrency\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(9, \"td\");\n    ɵngcc0.ɵɵtext(10);\n    ɵngcc0.ɵɵpipe(11, \"localeCurrency\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const row_r37 = ctx.$implicit;\n    const order_r31 = ɵngcc0.ɵɵnextContext().ngIf;\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate(row_r37.description);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(5, 4, row_r37.taxRate / 100));\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind2(8, 6, row_r37.taxBase, order_r31.currencyCode));\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind2(11, 9, row_r37.taxTotal, order_r31.currencyCode));\n} }\nfunction OrderDetailComponent_div_2_h6_35_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"h6\");\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(2, 1, \"order.shipping-address\"), \" \");\n} }\nfunction OrderDetailComponent_div_2_h6_37_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"h6\");\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(2, 1, \"order.billing-address\"), \" \");\n} }\nfunction OrderDetailComponent_div_2_ng_container_39_vdr_order_payment_card_1_Template(rf, ctx) { if (rf & 1) {\n    const _r42 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"vdr-order-payment-card\", 38);\n    ɵngcc0.ɵɵlistener(\"settlePayment\", function OrderDetailComponent_div_2_ng_container_39_vdr_order_payment_card_1_Template_vdr_order_payment_card_settlePayment_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r42); const ctx_r41 = ɵngcc0.ɵɵnextContext(3); return ctx_r41.settlePayment($event); })(\"transitionPaymentState\", function OrderDetailComponent_div_2_ng_container_39_vdr_order_payment_card_1_Template_vdr_order_payment_card_transitionPaymentState_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r42); const ctx_r43 = ɵngcc0.ɵɵnextContext(3); return ctx_r43.transitionPaymentState($event); })(\"settleRefund\", function OrderDetailComponent_div_2_ng_container_39_vdr_order_payment_card_1_Template_vdr_order_payment_card_settleRefund_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r42); const ctx_r44 = ɵngcc0.ɵɵnextContext(3); return ctx_r44.settleRefund($event); });\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const payment_r40 = ctx.$implicit;\n    const order_r31 = ɵngcc0.ɵɵnextContext(2).ngIf;\n    ɵngcc0.ɵɵproperty(\"currencyCode\", order_r31.currencyCode)(\"payment\", payment_r40);\n} }\nfunction OrderDetailComponent_div_2_ng_container_39_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵtemplate(1, OrderDetailComponent_div_2_ng_container_39_vdr_order_payment_card_1_Template, 1, 2, \"vdr-order-payment-card\", 37);\n    ɵngcc0.ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const order_r31 = ɵngcc0.ɵɵnextContext().ngIf;\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngForOf\", order_r31.payments);\n} }\nfunction OrderDetailComponent_div_2_ng_container_40_Template(rf, ctx) { if (rf & 1) {\n    const _r49 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵelementStart(1, \"vdr-fulfillment-card\", 39);\n    ɵngcc0.ɵɵlistener(\"transitionState\", function OrderDetailComponent_div_2_ng_container_40_Template_vdr_fulfillment_card_transitionState_1_listener($event) { ɵngcc0.ɵɵrestoreView(_r49); const fulfillment_r47 = ctx.$implicit; const ctx_r48 = ɵngcc0.ɵɵnextContext(2); return ctx_r48.transitionFulfillment(fulfillment_r47.id, $event); });\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const fulfillment_r47 = ctx.$implicit;\n    const order_r31 = ɵngcc0.ɵɵnextContext().ngIf;\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"fulfillment\", fulfillment_r47)(\"order\", order_r31);\n} }\nfunction OrderDetailComponent_div_2_Template(rf, ctx) { if (rf & 1) {\n    const _r52 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"div\");\n    ɵngcc0.ɵɵelementStart(1, \"div\", 23);\n    ɵngcc0.ɵɵelementStart(2, \"div\", 24);\n    ɵngcc0.ɵɵelement(3, \"vdr-order-table\", 25);\n    ɵngcc0.ɵɵelementStart(4, \"h4\");\n    ɵngcc0.ɵɵtext(5);\n    ɵngcc0.ɵɵpipe(6, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(7, \"table\", 26);\n    ɵngcc0.ɵɵelementStart(8, \"thead\");\n    ɵngcc0.ɵɵelementStart(9, \"tr\");\n    ɵngcc0.ɵɵelementStart(10, \"th\");\n    ɵngcc0.ɵɵtext(11);\n    ɵngcc0.ɵɵpipe(12, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(13, \"th\");\n    ɵngcc0.ɵɵtext(14);\n    ɵngcc0.ɵɵpipe(15, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(16, \"th\");\n    ɵngcc0.ɵɵtext(17);\n    ɵngcc0.ɵɵpipe(18, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(19, \"th\");\n    ɵngcc0.ɵɵtext(20);\n    ɵngcc0.ɵɵpipe(21, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(22, \"tbody\");\n    ɵngcc0.ɵɵtemplate(23, OrderDetailComponent_div_2_tr_23_Template, 12, 12, \"tr\", 27);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(24, \"vdr-order-history\", 28);\n    ɵngcc0.ɵɵlistener(\"addNote\", function OrderDetailComponent_div_2_Template_vdr_order_history_addNote_24_listener($event) { ɵngcc0.ɵɵrestoreView(_r52); const ctx_r51 = ɵngcc0.ɵɵnextContext(); return ctx_r51.addNote($event); })(\"updateNote\", function OrderDetailComponent_div_2_Template_vdr_order_history_updateNote_24_listener($event) { ɵngcc0.ɵɵrestoreView(_r52); const ctx_r53 = ɵngcc0.ɵɵnextContext(); return ctx_r53.updateNote($event); })(\"deleteNote\", function OrderDetailComponent_div_2_Template_vdr_order_history_deleteNote_24_listener($event) { ɵngcc0.ɵɵrestoreView(_r52); const ctx_r54 = ɵngcc0.ɵɵnextContext(); return ctx_r54.deleteNote($event); });\n    ɵngcc0.ɵɵpipe(25, \"async\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(26, \"div\", 29);\n    ɵngcc0.ɵɵelementStart(27, \"vdr-order-custom-fields-card\", 30);\n    ɵngcc0.ɵɵlistener(\"updateClick\", function OrderDetailComponent_div_2_Template_vdr_order_custom_fields_card_updateClick_27_listener($event) { ɵngcc0.ɵɵrestoreView(_r52); const ctx_r55 = ɵngcc0.ɵɵnextContext(); return ctx_r55.updateCustomFields($event); });\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(28, \"div\", 31);\n    ɵngcc0.ɵɵelementStart(29, \"div\", 32);\n    ɵngcc0.ɵɵtext(30);\n    ɵngcc0.ɵɵpipe(31, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(32, \"div\", 33);\n    ɵngcc0.ɵɵelementStart(33, \"div\", 34);\n    ɵngcc0.ɵɵelement(34, \"vdr-customer-label\", 35);\n    ɵngcc0.ɵɵtemplate(35, OrderDetailComponent_div_2_h6_35_Template, 3, 3, \"h6\", 0);\n    ɵngcc0.ɵɵelement(36, \"vdr-formatted-address\", 36);\n    ɵngcc0.ɵɵtemplate(37, OrderDetailComponent_div_2_h6_37_Template, 3, 3, \"h6\", 0);\n    ɵngcc0.ɵɵelement(38, \"vdr-formatted-address\", 36);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵtemplate(39, OrderDetailComponent_div_2_ng_container_39_Template, 2, 1, \"ng-container\", 0);\n    ɵngcc0.ɵɵtemplate(40, OrderDetailComponent_div_2_ng_container_40_Template, 2, 2, \"ng-container\", 27);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const order_r31 = ctx.ngIf;\n    const ctx_r1 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵproperty(\"order\", order_r31)(\"orderLineCustomFields\", ctx_r1.orderLineCustomFields);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(6, 20, \"order.tax-summary\"));\n    ɵngcc0.ɵɵadvance(6);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(12, 22, \"common.description\"));\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(15, 24, \"order.tax-rate\"));\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(18, 26, \"order.tax-base\"));\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(21, 28, \"order.tax-total\"));\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵproperty(\"ngForOf\", order_r31.taxSummary);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"order\", order_r31)(\"history\", ɵngcc0.ɵɵpipeBind1(25, 30, ctx_r1.history$));\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵproperty(\"customFieldsConfig\", ctx_r1.customFields)(\"customFieldValues\", order_r31.customFields);\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(31, 32, \"order.customer\"), \" \");\n    ɵngcc0.ɵɵadvance(4);\n    ɵngcc0.ɵɵproperty(\"customer\", order_r31.customer);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r1.getOrderAddressLines(order_r31.shippingAddress).length);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"address\", order_r31.shippingAddress);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r1.getOrderAddressLines(order_r31.billingAddress).length);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"address\", order_r31.billingAddress);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", order_r31.payments && order_r31.payments.length);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngForOf\", order_r31.fulfillments);\n} }\nfunction OrderEditsPreviewDialogComponent_ng_template_0_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵtext(0);\n    ɵngcc0.ɵɵpipe(1, \"translate\");\n} if (rf & 2) {\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(1, 1, \"order.confirm-modifications\"));\n} }\nfunction OrderEditsPreviewDialogComponent_div_8_option_6_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"option\", 9);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"localeCurrency\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const payment_r4 = ctx.$implicit;\n    const ctx_r3 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵproperty(\"ngValue\", payment_r4);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate3(\" #\", payment_r4.id, \" \", payment_r4.method, \": \", ɵngcc0.ɵɵpipeBind2(2, 4, payment_r4.amount, ctx_r3.order.currencyCode), \" \");\n} }\nfunction OrderEditsPreviewDialogComponent_div_8_Template(rf, ctx) { if (rf & 1) {\n    const _r6 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"div\");\n    ɵngcc0.ɵɵelementStart(1, \"clr-select-container\");\n    ɵngcc0.ɵɵelementStart(2, \"label\");\n    ɵngcc0.ɵɵtext(3);\n    ɵngcc0.ɵɵpipe(4, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(5, \"select\", 5);\n    ɵngcc0.ɵɵlistener(\"ngModelChange\", function OrderEditsPreviewDialogComponent_div_8_Template_select_ngModelChange_5_listener($event) { ɵngcc0.ɵɵrestoreView(_r6); const ctx_r5 = ɵngcc0.ɵɵnextContext(); return ctx_r5.selectedPayment = $event; });\n    ɵngcc0.ɵɵtemplate(6, OrderEditsPreviewDialogComponent_div_8_option_6_Template, 3, 7, \"option\", 6);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(7, \"label\", 7);\n    ɵngcc0.ɵɵtext(8);\n    ɵngcc0.ɵɵpipe(9, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(10, \"textarea\", 8);\n    ɵngcc0.ɵɵlistener(\"ngModelChange\", function OrderEditsPreviewDialogComponent_div_8_Template_textarea_ngModelChange_10_listener($event) { ɵngcc0.ɵɵrestoreView(_r6); const ctx_r7 = ɵngcc0.ɵɵnextContext(); return ctx_r7.refundNote = $event; });\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r1 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(4, 5, \"order.payment-to-refund\"));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngModel\", ctx_r1.selectedPayment);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngForOf\", ctx_r1.order.payments);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(9, 7, \"order.refund-cancellation-reason\"));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngModel\", ctx_r1.refundNote);\n} }\nfunction OrderEditsPreviewDialogComponent_ng_template_9_Template(rf, ctx) { if (rf & 1) {\n    const _r9 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"button\", 10);\n    ɵngcc0.ɵɵlistener(\"click\", function OrderEditsPreviewDialogComponent_ng_template_9_Template_button_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r9); const ctx_r8 = ɵngcc0.ɵɵnextContext(); return ctx_r8.cancel(); });\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(3, \"button\", 11);\n    ɵngcc0.ɵɵlistener(\"click\", function OrderEditsPreviewDialogComponent_ng_template_9_Template_button_click_3_listener() { ɵngcc0.ɵɵrestoreView(_r9); const ctx_r10 = ɵngcc0.ɵɵnextContext(); return ctx_r10.submit(); });\n    ɵngcc0.ɵɵtext(4);\n    ɵngcc0.ɵɵpipe(5, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r2 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(2, 3, \"common.cancel\"));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"disabled\", ctx_r2.priceDifference < 0 && !ctx_r2.selectedPayment);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(5, 5, \"common.confirm\"), \" \");\n} }\nfunction OrderEditorComponent_vdr_action_bar_0_Template(rf, ctx) { if (rf & 1) {\n    const _r4 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"vdr-action-bar\");\n    ɵngcc0.ɵɵelementStart(1, \"vdr-ab-left\");\n    ɵngcc0.ɵɵelementStart(2, \"div\", 1);\n    ɵngcc0.ɵɵelement(3, \"vdr-entity-info\", 2);\n    ɵngcc0.ɵɵpipe(4, \"async\");\n    ɵngcc0.ɵɵelement(5, \"vdr-order-state-label\", 3);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(6, \"vdr-ab-right\");\n    ɵngcc0.ɵɵelementStart(7, \"button\", 4);\n    ɵngcc0.ɵɵlistener(\"click\", function OrderEditorComponent_vdr_action_bar_0_Template_button_click_7_listener() { ɵngcc0.ɵɵrestoreView(_r4); const order_r2 = ctx.ngIf; const ctx_r3 = ɵngcc0.ɵɵnextContext(); return ctx_r3.transitionToPriorState(order_r2); });\n    ɵngcc0.ɵɵtext(8);\n    ɵngcc0.ɵɵpipe(9, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const order_r2 = ctx.ngIf;\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵproperty(\"entity\", ɵngcc0.ɵɵpipeBind1(4, 3, ctx_r0.entity$));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"state\", order_r2.state);\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(9, 5, \"order.cancel-modification\"), \" \");\n} }\nfunction OrderEditorComponent_div_2_th_19_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"th\");\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(2, 1, \"common.custom-fields\"));\n} }\nfunction OrderEditorComponent_div_2_tr_24_img_2_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"img\", 41);\n    ɵngcc0.ɵɵpipe(1, \"assetPreview\");\n} if (rf & 2) {\n    const line_r21 = ɵngcc0.ɵɵnextContext().$implicit;\n    ɵngcc0.ɵɵproperty(\"src\", ɵngcc0.ɵɵpipeBind2(1, 1, line_r21.featuredAsset, \"tiny\"), ɵngcc0.ɵɵsanitizeUrl);\n} }\nconst _c6 = function (a0) { return [a0]; };\nfunction OrderEditorComponent_div_2_tr_24_td_18_ng_container_1_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵelement(1, \"vdr-custom-field-control\", 44);\n    ɵngcc0.ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const customField_r27 = ctx.$implicit;\n    const i_r22 = ɵngcc0.ɵɵnextContext(2).index;\n    const ctx_r26 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"customField\", customField_r27)(\"customFieldsFormGroup\", ctx_r26.orderLineCustomFieldsFormArray.get(ɵngcc0.ɵɵpureFunction1(3, _c6, i_r22)))(\"compact\", true);\n} }\nfunction OrderEditorComponent_div_2_tr_24_td_18_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"td\", 42);\n    ɵngcc0.ɵɵtemplate(1, OrderEditorComponent_div_2_tr_24_td_18_ng_container_1_Template, 2, 5, \"ng-container\", 43);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r24 = ɵngcc0.ɵɵnextContext(3);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngForOf\", ctx_r24.orderLineCustomFields);\n} }\nfunction OrderEditorComponent_div_2_tr_24_Template(rf, ctx) { if (rf & 1) {\n    const _r30 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"tr\", 29);\n    ɵngcc0.ɵɵelementStart(1, \"td\", 30);\n    ɵngcc0.ɵɵtemplate(2, OrderEditorComponent_div_2_tr_24_img_2_Template, 2, 4, \"img\", 31);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(3, \"td\", 32);\n    ɵngcc0.ɵɵtext(4);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(5, \"td\", 33);\n    ɵngcc0.ɵɵtext(6);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(7, \"td\", 34);\n    ɵngcc0.ɵɵtext(8);\n    ɵngcc0.ɵɵpipe(9, \"localeCurrency\");\n    ɵngcc0.ɵɵelementStart(10, \"div\", 16);\n    ɵngcc0.ɵɵpipe(11, \"translate\");\n    ɵngcc0.ɵɵtext(12);\n    ɵngcc0.ɵɵpipe(13, \"localeCurrency\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(14, \"td\", 35);\n    ɵngcc0.ɵɵelementStart(15, \"input\", 36);\n    ɵngcc0.ɵɵlistener(\"input\", function OrderEditorComponent_div_2_tr_24_Template_input_input_15_listener($event) { ɵngcc0.ɵɵrestoreView(_r30); const line_r21 = ctx.$implicit; const ctx_r29 = ɵngcc0.ɵɵnextContext(2); return ctx_r29.updateLineQuantity(line_r21, $event.target.value); });\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelement(16, \"vdr-line-refunds\", 37);\n    ɵngcc0.ɵɵelement(17, \"vdr-line-fulfillment\", 38);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵtemplate(18, OrderEditorComponent_div_2_tr_24_td_18_Template, 2, 1, \"td\", 39);\n    ɵngcc0.ɵɵelementStart(19, \"td\", 40);\n    ɵngcc0.ɵɵtext(20);\n    ɵngcc0.ɵɵpipe(21, \"localeCurrency\");\n    ɵngcc0.ɵɵelementStart(22, \"div\", 16);\n    ɵngcc0.ɵɵpipe(23, \"translate\");\n    ɵngcc0.ɵɵtext(24);\n    ɵngcc0.ɵɵpipe(25, \"localeCurrency\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const line_r21 = ctx.$implicit;\n    const order_r5 = ɵngcc0.ɵɵnextContext().ngIf;\n    const ctx_r7 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵclassProp(\"is-cancelled\", line_r21.quantity === 0)(\"modified\", ctx_r7.isLineModified(line_r21));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngIf\", line_r21.featuredAsset);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate(line_r21.productVariant.name);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate(line_r21.productVariant.sku);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind2(9, 19, line_r21.unitPriceWithTax, order_r5.currencyCode), \" \");\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"title\", ɵngcc0.ɵɵpipeBind1(11, 22, \"order.net-price\"));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind2(13, 24, line_r21.unitPrice, order_r5.currencyCode), \" \");\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵproperty(\"value\", line_r21.quantity);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"line\", line_r21)(\"payments\", order_r5.payments);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"line\", line_r21)(\"orderState\", order_r5.state);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r7.orderLineCustomFields.length);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind2(21, 27, line_r21.linePriceWithTax, order_r5.currencyCode), \" \");\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"title\", ɵngcc0.ɵɵpipeBind1(23, 30, \"order.net-price\"));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind2(25, 32, line_r21.linePrice, order_r5.currencyCode), \" \");\n} }\nfunction OrderEditorComponent_div_2_tr_25_img_2_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"img\", 41);\n    ɵngcc0.ɵɵpipe(1, \"assetPreview\");\n} if (rf & 2) {\n    const addedLine_r32 = ɵngcc0.ɵɵnextContext().$implicit;\n    ɵngcc0.ɵɵproperty(\"src\", ɵngcc0.ɵɵpipeBind2(1, 1, addedLine_r32.productAsset, \"tiny\"), ɵngcc0.ɵɵsanitizeUrl);\n} }\nfunction OrderEditorComponent_div_2_tr_25_td_18_ng_container_1_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵelement(1, \"vdr-custom-field-control\", 44);\n    ɵngcc0.ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const customField_r38 = ctx.$implicit;\n    const i_r33 = ɵngcc0.ɵɵnextContext(2).index;\n    const ctx_r37 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"customField\", customField_r38)(\"customFieldsFormGroup\", ctx_r37.addItemCustomFieldsFormArray.get(ɵngcc0.ɵɵpureFunction1(3, _c6, i_r33)))(\"compact\", true);\n} }\nfunction OrderEditorComponent_div_2_tr_25_td_18_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"td\", 42);\n    ɵngcc0.ɵɵtemplate(1, OrderEditorComponent_div_2_tr_25_td_18_ng_container_1_Template, 2, 5, \"ng-container\", 43);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r35 = ɵngcc0.ɵɵnextContext(3);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngForOf\", ctx_r35.orderLineCustomFields);\n} }\nfunction OrderEditorComponent_div_2_tr_25_Template(rf, ctx) { if (rf & 1) {\n    const _r41 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"tr\", 45);\n    ɵngcc0.ɵɵelementStart(1, \"td\", 30);\n    ɵngcc0.ɵɵtemplate(2, OrderEditorComponent_div_2_tr_25_img_2_Template, 2, 4, \"img\", 31);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(3, \"td\", 32);\n    ɵngcc0.ɵɵtext(4);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(5, \"td\", 33);\n    ɵngcc0.ɵɵtext(6);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(7, \"td\", 34);\n    ɵngcc0.ɵɵtext(8);\n    ɵngcc0.ɵɵpipe(9, \"localeCurrency\");\n    ɵngcc0.ɵɵelementStart(10, \"div\", 16);\n    ɵngcc0.ɵɵpipe(11, \"translate\");\n    ɵngcc0.ɵɵtext(12);\n    ɵngcc0.ɵɵpipe(13, \"localeCurrency\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(14, \"td\", 35);\n    ɵngcc0.ɵɵelementStart(15, \"input\", 36);\n    ɵngcc0.ɵɵlistener(\"input\", function OrderEditorComponent_div_2_tr_25_Template_input_input_15_listener($event) { ɵngcc0.ɵɵrestoreView(_r41); const addedLine_r32 = ctx.$implicit; const ctx_r40 = ɵngcc0.ɵɵnextContext(2); return ctx_r40.updateAddedItemQuantity(addedLine_r32, $event.target.value); });\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(16, \"button\", 46);\n    ɵngcc0.ɵɵlistener(\"click\", function OrderEditorComponent_div_2_tr_25_Template_button_click_16_listener() { ɵngcc0.ɵɵrestoreView(_r41); const i_r33 = ctx.index; const ctx_r42 = ɵngcc0.ɵɵnextContext(2); return ctx_r42.removeAddedItem(i_r33); });\n    ɵngcc0.ɵɵelement(17, \"clr-icon\", 47);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵtemplate(18, OrderEditorComponent_div_2_tr_25_td_18_Template, 2, 1, \"td\", 39);\n    ɵngcc0.ɵɵelementStart(19, \"td\", 40);\n    ɵngcc0.ɵɵtext(20);\n    ɵngcc0.ɵɵpipe(21, \"currency\");\n    ɵngcc0.ɵɵelementStart(22, \"div\", 16);\n    ɵngcc0.ɵɵpipe(23, \"translate\");\n    ɵngcc0.ɵɵtext(24);\n    ɵngcc0.ɵɵpipe(25, \"currency\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const addedLine_r32 = ctx.$implicit;\n    const order_r5 = ɵngcc0.ɵɵnextContext().ngIf;\n    const ctx_r8 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngIf\", addedLine_r32.productAsset);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate(addedLine_r32.productVariantName);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate(addedLine_r32.sku);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind2(9, 11, addedLine_r32.priceWithTax, order_r5.currencyCode), \" \");\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"title\", ɵngcc0.ɵɵpipeBind1(11, 14, \"order.net-price\"));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind2(13, 16, addedLine_r32.price, order_r5.currencyCode), \" \");\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵproperty(\"value\", addedLine_r32.quantity);\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r8.orderLineCustomFields.length);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind2(21, 19, addedLine_r32.priceWithTax * addedLine_r32.quantity / 100, order_r5.currencyCode), \" \");\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"title\", ɵngcc0.ɵɵpipeBind1(23, 22, \"order.net-price\"));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind2(25, 24, addedLine_r32.price * addedLine_r32.quantity / 100, order_r5.currencyCode), \" \");\n} }\nfunction OrderEditorComponent_div_2_tr_26_td_7_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"td\");\n} }\nfunction OrderEditorComponent_div_2_tr_26_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"tr\", 48);\n    ɵngcc0.ɵɵelementStart(1, \"td\", 49);\n    ɵngcc0.ɵɵtext(2);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(3, \"td\", 33);\n    ɵngcc0.ɵɵtext(4);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelement(5, \"td\", 50);\n    ɵngcc0.ɵɵelement(6, \"td\");\n    ɵngcc0.ɵɵtemplate(7, OrderEditorComponent_div_2_tr_26_td_7_Template, 1, 0, \"td\", 0);\n    ɵngcc0.ɵɵelementStart(8, \"td\", 40);\n    ɵngcc0.ɵɵtext(9);\n    ɵngcc0.ɵɵpipe(10, \"localeCurrency\");\n    ɵngcc0.ɵɵelementStart(11, \"div\", 16);\n    ɵngcc0.ɵɵpipe(12, \"translate\");\n    ɵngcc0.ɵɵtext(13);\n    ɵngcc0.ɵɵpipe(14, \"localeCurrency\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const surcharge_r44 = ctx.$implicit;\n    const order_r5 = ɵngcc0.ɵɵnextContext().ngIf;\n    const ctx_r9 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate(surcharge_r44.description);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate(surcharge_r44.sku);\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r9.orderLineCustomFields.length);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind2(10, 6, surcharge_r44.priceWithTax, order_r5.currencyCode), \" \");\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"title\", ɵngcc0.ɵɵpipeBind1(12, 9, \"order.net-price\"));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind2(14, 11, surcharge_r44.price, order_r5.currencyCode), \" \");\n} }\nfunction OrderEditorComponent_div_2_tr_27_td_9_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"td\");\n} }\nfunction OrderEditorComponent_div_2_tr_27_ng_container_11_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"localeCurrency\");\n    ɵngcc0.ɵɵelementStart(3, \"div\", 16);\n    ɵngcc0.ɵɵpipe(4, \"translate\");\n    ɵngcc0.ɵɵtext(5);\n    ɵngcc0.ɵɵpipe(6, \"localeCurrency\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const surchargePrice_r51 = ctx.ngIf;\n    const order_r5 = ɵngcc0.ɵɵnextContext(2).ngIf;\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind2(2, 3, surchargePrice_r51.priceWithTax, order_r5.currencyCode), \" \");\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"title\", ɵngcc0.ɵɵpipeBind1(4, 6, \"order.net-price\"));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind2(6, 8, surchargePrice_r51.price, order_r5.currencyCode), \" \");\n} }\nfunction OrderEditorComponent_div_2_tr_27_Template(rf, ctx) { if (rf & 1) {\n    const _r54 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"tr\", 51);\n    ɵngcc0.ɵɵelementStart(1, \"td\", 49);\n    ɵngcc0.ɵɵtext(2);\n    ɵngcc0.ɵɵelementStart(3, \"button\", 46);\n    ɵngcc0.ɵɵlistener(\"click\", function OrderEditorComponent_div_2_tr_27_Template_button_click_3_listener() { ɵngcc0.ɵɵrestoreView(_r54); const i_r48 = ctx.index; const ctx_r53 = ɵngcc0.ɵɵnextContext(2); return ctx_r53.removeSurcharge(i_r48); });\n    ɵngcc0.ɵɵelement(4, \"clr-icon\", 47);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(5, \"td\", 33);\n    ɵngcc0.ɵɵtext(6);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelement(7, \"td\", 50);\n    ɵngcc0.ɵɵelement(8, \"td\");\n    ɵngcc0.ɵɵtemplate(9, OrderEditorComponent_div_2_tr_27_td_9_Template, 1, 0, \"td\", 0);\n    ɵngcc0.ɵɵelementStart(10, \"td\", 40);\n    ɵngcc0.ɵɵtemplate(11, OrderEditorComponent_div_2_tr_27_ng_container_11_Template, 7, 11, \"ng-container\", 0);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const surcharge_r47 = ctx.$implicit;\n    const ctx_r10 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", surcharge_r47.description, \" \");\n    ɵngcc0.ɵɵadvance(4);\n    ɵngcc0.ɵɵtextInterpolate(surcharge_r47.sku);\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r10.orderLineCustomFields.length);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r10.getSurchargePrices(surcharge_r47));\n} }\nfunction OrderEditorComponent_div_2_td_35_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"td\");\n} }\nfunction OrderEditorComponent_div_2_clr_accordion_content_51_div_2_img_1_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"img\", 58);\n    ɵngcc0.ɵɵpipe(1, \"assetPreview\");\n} if (rf & 2) {\n    const asset_r58 = ctx.ngIf;\n    ɵngcc0.ɵɵproperty(\"src\", ɵngcc0.ɵɵpipeBind2(1, 1, asset_r58, \"tiny\"), ɵngcc0.ɵɵsanitizeUrl);\n} }\nfunction OrderEditorComponent_div_2_clr_accordion_content_51_div_2_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"div\", 55);\n    ɵngcc0.ɵɵtemplate(1, OrderEditorComponent_div_2_clr_accordion_content_51_div_2_img_1_Template, 2, 4, \"img\", 56);\n    ɵngcc0.ɵɵelementStart(2, \"div\");\n    ɵngcc0.ɵɵelementStart(3, \"strong\", 57);\n    ɵngcc0.ɵɵtext(4);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(5, \"small\");\n    ɵngcc0.ɵɵtext(6);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(7, \"div\");\n    ɵngcc0.ɵɵtext(8);\n    ɵngcc0.ɵɵpipe(9, \"localeCurrency\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const order_r5 = ɵngcc0.ɵɵnextContext(2).ngIf;\n    const ctx_r55 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r55.addItemSelectedVariant.productAsset);\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵtextInterpolate(ctx_r55.addItemSelectedVariant.productVariantName);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate(ctx_r55.addItemSelectedVariant.sku);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind2(9, 4, ctx_r55.getSelectedItemPrice(ctx_r55.addItemSelectedVariant), order_r5.currencyCode), \" \");\n} }\nfunction OrderEditorComponent_div_2_clr_accordion_content_51_ng_container_3_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵelement(1, \"vdr-custom-field-control\", 59);\n    ɵngcc0.ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const customField_r60 = ctx.$implicit;\n    const ctx_r56 = ɵngcc0.ɵɵnextContext(3);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"readonly\", !ctx_r56.addItemSelectedVariant)(\"customField\", customField_r60)(\"customFieldsFormGroup\", ctx_r56.addItemCustomFieldsForm)(\"compact\", true);\n} }\nfunction OrderEditorComponent_div_2_clr_accordion_content_51_Template(rf, ctx) { if (rf & 1) {\n    const _r62 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"clr-accordion-content\");\n    ɵngcc0.ɵɵelementStart(1, \"vdr-product-selector\", 52);\n    ɵngcc0.ɵɵlistener(\"productSelected\", function OrderEditorComponent_div_2_clr_accordion_content_51_Template_vdr_product_selector_productSelected_1_listener($event) { ɵngcc0.ɵɵrestoreView(_r62); const ctx_r61 = ɵngcc0.ɵɵnextContext(2); return ctx_r61.addItemSelectedVariant = $event; });\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵtemplate(2, OrderEditorComponent_div_2_clr_accordion_content_51_div_2_Template, 10, 7, \"div\", 53);\n    ɵngcc0.ɵɵtemplate(3, OrderEditorComponent_div_2_clr_accordion_content_51_ng_container_3_Template, 2, 4, \"ng-container\", 43);\n    ɵngcc0.ɵɵelementStart(4, \"button\", 54);\n    ɵngcc0.ɵɵlistener(\"click\", function OrderEditorComponent_div_2_clr_accordion_content_51_Template_button_click_4_listener() { ɵngcc0.ɵɵrestoreView(_r62); const ctx_r63 = ɵngcc0.ɵɵnextContext(2); return ctx_r63.addItemToOrder(ctx_r63.addItemSelectedVariant); });\n    ɵngcc0.ɵɵtext(5);\n    ɵngcc0.ɵɵpipe(6, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r12 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r12.addItemSelectedVariant);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngForOf\", ctx_r12.orderLineCustomFields);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"disabled\", !ctx_r12.addItemSelectedVariant || ctx_r12.addItemCustomFieldsForm.invalid);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(6, 4, \"order.add-item-to-order\"), \" \");\n} }\nconst _c7 = function (a0) { return { rate: a0 }; };\nfunction OrderEditorComponent_div_2_clr_accordion_content_56_Template(rf, ctx) { if (rf & 1) {\n    const _r65 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"clr-accordion-content\");\n    ɵngcc0.ɵɵelementStart(1, \"form\", 60);\n    ɵngcc0.ɵɵlistener(\"submit\", function OrderEditorComponent_div_2_clr_accordion_content_56_Template_form_submit_1_listener() { ɵngcc0.ɵɵrestoreView(_r65); const ctx_r64 = ɵngcc0.ɵɵnextContext(2); return ctx_r64.addSurcharge(ctx_r64.surchargeForm.value); });\n    ɵngcc0.ɵɵelementStart(2, \"vdr-form-field\", 61);\n    ɵngcc0.ɵɵpipe(3, \"translate\");\n    ɵngcc0.ɵɵelement(4, \"input\", 62);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(5, \"vdr-form-field\", 63);\n    ɵngcc0.ɵɵpipe(6, \"translate\");\n    ɵngcc0.ɵɵelement(7, \"input\", 64);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(8, \"vdr-form-field\", 65);\n    ɵngcc0.ɵɵpipe(9, \"translate\");\n    ɵngcc0.ɵɵelement(10, \"vdr-currency-input\", 66);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(11, \"vdr-form-field\", 67);\n    ɵngcc0.ɵɵpipe(12, \"translate\");\n    ɵngcc0.ɵɵelement(13, \"input\", 68);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(14, \"vdr-form-field\", 69);\n    ɵngcc0.ɵɵpipe(15, \"translate\");\n    ɵngcc0.ɵɵelementStart(16, \"vdr-affixed-input\", 70);\n    ɵngcc0.ɵɵelement(17, \"input\", 71);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(18, \"vdr-form-field\", 72);\n    ɵngcc0.ɵɵpipe(19, \"translate\");\n    ɵngcc0.ɵɵelement(20, \"input\", 73);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(21, \"button\", 74);\n    ɵngcc0.ɵɵtext(22);\n    ɵngcc0.ɵɵpipe(23, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const order_r5 = ɵngcc0.ɵɵnextContext().ngIf;\n    const ctx_r13 = ɵngcc0.ɵɵnextContext();\n    let tmp_5_0 = null;\n    let tmp_8_0 = null;\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"formGroup\", ctx_r13.surchargeForm);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"label\", ɵngcc0.ɵɵpipeBind1(3, 10, \"common.description\"));\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵproperty(\"label\", ɵngcc0.ɵɵpipeBind1(6, 12, \"order.product-sku\"));\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵproperty(\"label\", ɵngcc0.ɵɵpipeBind1(9, 14, \"common.price\"));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"currencyCode\", order_r5.currencyCode);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"label\", ɵngcc0.ɵɵpipeBind2(12, 16, \"catalog.price-includes-tax-at\", ɵngcc0.ɵɵpureFunction1(25, _c7, (tmp_5_0 = ctx_r13.surchargeForm.get(\"taxRate\")) == null ? null : tmp_5_0.value)));\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵproperty(\"label\", ɵngcc0.ɵɵpipeBind1(15, 19, \"order.tax-rate\"));\n    ɵngcc0.ɵɵadvance(4);\n    ɵngcc0.ɵɵproperty(\"label\", ɵngcc0.ɵɵpipeBind1(19, 21, \"order.tax-description\"));\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵproperty(\"disabled\", ctx_r13.surchargeForm.invalid || ctx_r13.surchargeForm.pristine || ((tmp_8_0 = ctx_r13.surchargeForm.get(\"price\")) == null ? null : tmp_8_0.value) === 0);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(23, 23, \"order.add-surcharge\"), \" \");\n} }\nfunction OrderEditorComponent_div_2_clr_accordion_content_61_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"clr-accordion-content\");\n    ɵngcc0.ɵɵelement(1, \"vdr-address-form\", 75);\n    ɵngcc0.ɵɵpipe(2, \"async\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r14 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"formGroup\", ctx_r14.shippingAddressForm)(\"availableCountries\", ɵngcc0.ɵɵpipeBind1(2, 3, ctx_r14.availableCountries$))(\"customFields\", ctx_r14.addressCustomFields);\n} }\nfunction OrderEditorComponent_div_2_clr_accordion_content_66_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"clr-accordion-content\");\n    ɵngcc0.ɵɵelement(1, \"vdr-address-form\", 75);\n    ɵngcc0.ɵɵpipe(2, \"async\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r15 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"formGroup\", ctx_r15.billingAddressForm)(\"availableCountries\", ɵngcc0.ɵɵpipeBind1(2, 3, ctx_r15.availableCountries$))(\"customFields\", ctx_r15.addressCustomFields);\n} }\nfunction OrderEditorComponent_div_2_li_74_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"li\");\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r16 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind2(2, 1, \"order.modification-adding-items\", ɵngcc0.ɵɵpureFunction1(4, _c2, ctx_r16.modifyOrderInput.addItems == null ? null : ctx_r16.modifyOrderInput.addItems.length)), \" \");\n} }\nfunction OrderEditorComponent_div_2_li_75_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"li\");\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r17 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind2(2, 1, \"order.modification-adjusting-lines\", ɵngcc0.ɵɵpureFunction1(4, _c2, ctx_r17.modifyOrderInput.adjustOrderLines == null ? null : ctx_r17.modifyOrderInput.adjustOrderLines.length)), \" \");\n} }\nfunction OrderEditorComponent_div_2_li_76_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"li\");\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r18 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind2(2, 1, \"order.modification-adding-surcharges\", ɵngcc0.ɵɵpureFunction1(4, _c2, ctx_r18.modifyOrderInput.surcharges == null ? null : ctx_r18.modifyOrderInput.surcharges.length)), \" \");\n} }\nfunction OrderEditorComponent_div_2_li_77_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"li\");\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(2, 1, \"order.modification-updating-shipping-address\"), \" \");\n} }\nfunction OrderEditorComponent_div_2_li_78_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"li\");\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(2, 1, \"order.modification-updating-billing-address\"), \" \");\n} }\nfunction OrderEditorComponent_div_2_Template(rf, ctx) { if (rf & 1) {\n    const _r68 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"div\");\n    ɵngcc0.ɵɵelementStart(1, \"div\", 5);\n    ɵngcc0.ɵɵelementStart(2, \"div\", 6);\n    ɵngcc0.ɵɵelementStart(3, \"table\", 7);\n    ɵngcc0.ɵɵelementStart(4, \"thead\");\n    ɵngcc0.ɵɵelementStart(5, \"tr\");\n    ɵngcc0.ɵɵelement(6, \"th\");\n    ɵngcc0.ɵɵelementStart(7, \"th\");\n    ɵngcc0.ɵɵtext(8);\n    ɵngcc0.ɵɵpipe(9, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(10, \"th\");\n    ɵngcc0.ɵɵtext(11);\n    ɵngcc0.ɵɵpipe(12, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(13, \"th\");\n    ɵngcc0.ɵɵtext(14);\n    ɵngcc0.ɵɵpipe(15, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(16, \"th\");\n    ɵngcc0.ɵɵtext(17);\n    ɵngcc0.ɵɵpipe(18, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵtemplate(19, OrderEditorComponent_div_2_th_19_Template, 3, 3, \"th\", 0);\n    ɵngcc0.ɵɵelementStart(20, \"th\");\n    ɵngcc0.ɵɵtext(21);\n    ɵngcc0.ɵɵpipe(22, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(23, \"tbody\");\n    ɵngcc0.ɵɵtemplate(24, OrderEditorComponent_div_2_tr_24_Template, 26, 35, \"tr\", 8);\n    ɵngcc0.ɵɵtemplate(25, OrderEditorComponent_div_2_tr_25_Template, 26, 27, \"tr\", 9);\n    ɵngcc0.ɵɵtemplate(26, OrderEditorComponent_div_2_tr_26_Template, 15, 14, \"tr\", 10);\n    ɵngcc0.ɵɵtemplate(27, OrderEditorComponent_div_2_tr_27_Template, 12, 4, \"tr\", 11);\n    ɵngcc0.ɵɵelementStart(28, \"tr\", 12);\n    ɵngcc0.ɵɵelementStart(29, \"td\", 13);\n    ɵngcc0.ɵɵtext(30);\n    ɵngcc0.ɵɵpipe(31, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(32, \"td\", 14);\n    ɵngcc0.ɵɵtext(33);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelement(34, \"td\", 15);\n    ɵngcc0.ɵɵtemplate(35, OrderEditorComponent_div_2_td_35_Template, 1, 0, \"td\", 0);\n    ɵngcc0.ɵɵelementStart(36, \"td\", 14);\n    ɵngcc0.ɵɵtext(37);\n    ɵngcc0.ɵɵpipe(38, \"localeCurrency\");\n    ɵngcc0.ɵɵelementStart(39, \"div\", 16);\n    ɵngcc0.ɵɵpipe(40, \"translate\");\n    ɵngcc0.ɵɵtext(41);\n    ɵngcc0.ɵɵpipe(42, \"localeCurrency\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(43, \"h4\", 17);\n    ɵngcc0.ɵɵtext(44);\n    ɵngcc0.ɵɵpipe(45, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(46, \"clr-accordion\");\n    ɵngcc0.ɵɵelementStart(47, \"clr-accordion-panel\");\n    ɵngcc0.ɵɵelementStart(48, \"clr-accordion-title\");\n    ɵngcc0.ɵɵtext(49);\n    ɵngcc0.ɵɵpipe(50, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵtemplate(51, OrderEditorComponent_div_2_clr_accordion_content_51_Template, 7, 6, \"clr-accordion-content\", 18);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(52, \"clr-accordion-panel\");\n    ɵngcc0.ɵɵelementStart(53, \"clr-accordion-title\");\n    ɵngcc0.ɵɵtext(54);\n    ɵngcc0.ɵɵpipe(55, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵtemplate(56, OrderEditorComponent_div_2_clr_accordion_content_56_Template, 24, 27, \"clr-accordion-content\", 18);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(57, \"clr-accordion-panel\");\n    ɵngcc0.ɵɵelementStart(58, \"clr-accordion-title\");\n    ɵngcc0.ɵɵtext(59);\n    ɵngcc0.ɵɵpipe(60, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵtemplate(61, OrderEditorComponent_div_2_clr_accordion_content_61_Template, 3, 5, \"clr-accordion-content\", 18);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(62, \"clr-accordion-panel\");\n    ɵngcc0.ɵɵelementStart(63, \"clr-accordion-title\");\n    ɵngcc0.ɵɵtext(64);\n    ɵngcc0.ɵɵpipe(65, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵtemplate(66, OrderEditorComponent_div_2_clr_accordion_content_66_Template, 3, 5, \"clr-accordion-content\", 18);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(67, \"div\", 19);\n    ɵngcc0.ɵɵelementStart(68, \"div\", 20);\n    ɵngcc0.ɵɵelementStart(69, \"div\", 21);\n    ɵngcc0.ɵɵtext(70);\n    ɵngcc0.ɵɵpipe(71, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(72, \"div\", 22);\n    ɵngcc0.ɵɵelementStart(73, \"ul\");\n    ɵngcc0.ɵɵtemplate(74, OrderEditorComponent_div_2_li_74_Template, 3, 6, \"li\", 0);\n    ɵngcc0.ɵɵtemplate(75, OrderEditorComponent_div_2_li_75_Template, 3, 6, \"li\", 0);\n    ɵngcc0.ɵɵtemplate(76, OrderEditorComponent_div_2_li_76_Template, 3, 6, \"li\", 0);\n    ɵngcc0.ɵɵtemplate(77, OrderEditorComponent_div_2_li_77_Template, 3, 3, \"li\", 0);\n    ɵngcc0.ɵɵtemplate(78, OrderEditorComponent_div_2_li_78_Template, 3, 3, \"li\", 0);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(79, \"div\", 22);\n    ɵngcc0.ɵɵelementStart(80, \"label\", 23);\n    ɵngcc0.ɵɵtext(81);\n    ɵngcc0.ɵɵpipe(82, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(83, \"textarea\", 24);\n    ɵngcc0.ɵɵlistener(\"ngModelChange\", function OrderEditorComponent_div_2_Template_textarea_ngModelChange_83_listener($event) { ɵngcc0.ɵɵrestoreView(_r68); const ctx_r67 = ɵngcc0.ɵɵnextContext(); return ctx_r67.note = $event; });\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(84, \"clr-checkbox-wrapper\", 25);\n    ɵngcc0.ɵɵelementStart(85, \"input\", 26);\n    ɵngcc0.ɵɵlistener(\"ngModelChange\", function OrderEditorComponent_div_2_Template_input_ngModelChange_85_listener($event) { ɵngcc0.ɵɵrestoreView(_r68); const ctx_r69 = ɵngcc0.ɵɵnextContext(); return ctx_r69.recalculateShipping = $event; });\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(86, \"label\");\n    ɵngcc0.ɵɵtext(87);\n    ɵngcc0.ɵɵpipe(88, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(89, \"div\", 27);\n    ɵngcc0.ɵɵelementStart(90, \"button\", 28);\n    ɵngcc0.ɵɵlistener(\"click\", function OrderEditorComponent_div_2_Template_button_click_90_listener() { ɵngcc0.ɵɵrestoreView(_r68); const order_r5 = ctx.ngIf; const ctx_r70 = ɵngcc0.ɵɵnextContext(); return ctx_r70.previewAndModify(order_r5); });\n    ɵngcc0.ɵɵtext(91);\n    ɵngcc0.ɵɵpipe(92, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const order_r5 = ctx.ngIf;\n    const ctx_r1 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(8);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(9, 34, \"order.product-name\"));\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(12, 36, \"order.product-sku\"));\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(15, 38, \"order.unit-price\"));\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(18, 40, \"order.quantity\"));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r1.orderLineCustomFields.length);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(22, 42, \"order.total\"));\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵproperty(\"ngForOf\", order_r5.lines);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngForOf\", ctx_r1.addedLines)(\"ngForTrackBy\", ctx_r1.trackByProductVariantId);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngForOf\", order_r5.surcharges);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngForOf\", ctx_r1.modifyOrderInput.surcharges);\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(31, 44, \"order.shipping\"));\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵtextInterpolate(order_r5.shippingLines[0] == null ? null : order_r5.shippingLines[0].shippingMethod == null ? null : order_r5.shippingLines[0].shippingMethod.name);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r1.orderLineCustomFields.length);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind2(38, 46, order_r5.shippingWithTax, order_r5.currencyCode), \" \");\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"title\", ɵngcc0.ɵɵpipeBind1(40, 49, \"order.net-price\"));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind2(42, 51, order_r5.shipping, order_r5.currencyCode), \" \");\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(45, 54, \"order.modifications\"));\n    ɵngcc0.ɵɵadvance(5);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(50, 56, \"order.add-item-to-order\"));\n    ɵngcc0.ɵɵadvance(5);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(55, 58, \"order.add-surcharge\"));\n    ɵngcc0.ɵɵadvance(5);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(60, 60, \"order.edit-shipping-address\"));\n    ɵngcc0.ɵɵadvance(5);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(65, 62, \"order.edit-billing-address\"));\n    ɵngcc0.ɵɵadvance(6);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(71, 64, \"order.modification-summary\"), \" \");\n    ɵngcc0.ɵɵadvance(4);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r1.modifyOrderInput.addItems == null ? null : ctx_r1.modifyOrderInput.addItems.length);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r1.modifyOrderInput.adjustOrderLines == null ? null : ctx_r1.modifyOrderInput.adjustOrderLines.length);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r1.modifyOrderInput.surcharges == null ? null : ctx_r1.modifyOrderInput.surcharges.length);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r1.shippingAddressForm.dirty);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r1.billingAddressForm.dirty);\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(82, 66, \"order.note\"));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngModel\", ctx_r1.note);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngModel\", ctx_r1.recalculateShipping);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(88, 68, \"order.modification-recalculate-shipping\"));\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵproperty(\"disabled\", !ctx_r1.canPreviewChanges());\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(92, 70, \"order.preview-changes\"), \" \");\n} }\nfunction OrderHistoryComponent_span_16_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"span\", 12);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(2, 1, \"order.note-only-visible-to-administrators\"), \" \");\n} }\nfunction OrderHistoryComponent_span_17_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"span\", 13);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(2, 1, \"order.note-visible-to-customer\"), \" \");\n} }\nfunction OrderHistoryComponent_vdr_timeline_entry_18_ng_container_2_div_1_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"div\", 11);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(2, 1, \"order.history-order-fulfilled\"), \" \");\n} }\nfunction OrderHistoryComponent_vdr_timeline_entry_18_ng_container_2_div_2_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"div\", 11);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(2, 1, \"order.history-order-cancelled\"), \" \");\n} }\nconst _c8 = function (a0, a1) { return { from: a0, to: a1 }; };\nfunction OrderHistoryComponent_vdr_timeline_entry_18_ng_container_2_ng_template_3_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵtext(0);\n    ɵngcc0.ɵɵpipe(1, \"translate\");\n} if (rf & 2) {\n    const entry_r3 = ɵngcc0.ɵɵnextContext(2).$implicit;\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind2(1, 1, \"order.history-order-transition\", ɵngcc0.ɵɵpureFunction2(4, _c8, entry_r3.data.from, entry_r3.data.to)), \" \");\n} }\nfunction OrderHistoryComponent_vdr_timeline_entry_18_ng_container_2_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵtemplate(1, OrderHistoryComponent_vdr_timeline_entry_18_ng_container_2_div_1_Template, 3, 3, \"div\", 17);\n    ɵngcc0.ɵɵtemplate(2, OrderHistoryComponent_vdr_timeline_entry_18_ng_container_2_div_2_Template, 3, 3, \"div\", 17);\n    ɵngcc0.ɵɵtemplate(3, OrderHistoryComponent_vdr_timeline_entry_18_ng_container_2_ng_template_3_Template, 2, 7, \"ng-template\", 18);\n    ɵngcc0.ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const entry_r3 = ɵngcc0.ɵɵnextContext().$implicit;\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", entry_r3.data.to === \"Delivered\");\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", entry_r3.data.to === \"Cancelled\");\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", entry_r3.data.to !== \"Cancelled\" && entry_r3.data.to !== \"Delivered\");\n} }\nfunction OrderHistoryComponent_vdr_timeline_entry_18_ng_container_3_ng_container_4_vdr_chip_6_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"vdr-chip\", 23);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(2, 1, \"order.modification-settled\"));\n} }\nfunction OrderHistoryComponent_vdr_timeline_entry_18_ng_container_3_ng_container_4_vdr_chip_7_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"vdr-chip\", 24);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(2, 1, \"order.modification-not-settled\"));\n} }\nfunction OrderHistoryComponent_vdr_timeline_entry_18_ng_container_3_ng_container_4_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵelementStart(3, \"strong\");\n    ɵngcc0.ɵɵtext(4);\n    ɵngcc0.ɵɵpipe(5, \"localeCurrency\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵtemplate(6, OrderHistoryComponent_vdr_timeline_entry_18_ng_container_3_ng_container_4_vdr_chip_6_Template, 3, 3, \"vdr-chip\", 20);\n    ɵngcc0.ɵɵtemplate(7, OrderHistoryComponent_vdr_timeline_entry_18_ng_container_3_ng_container_4_vdr_chip_7_Template, 3, 3, \"vdr-chip\", 21);\n    ɵngcc0.ɵɵelementStart(8, \"vdr-history-entry-detail\");\n    ɵngcc0.ɵɵelement(9, \"vdr-modification-detail\", 22);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const modification_r20 = ctx.ngIf;\n    const ctx_r19 = ɵngcc0.ɵɵnextContext(3);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(2, 6, \"order.modify-order-price-difference\"), \": \");\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind2(5, 8, modification_r20.priceChange, ctx_r19.order.currencyCode));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngIf\", modification_r20.isSettled);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", !modification_r20.isSettled);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"order\", ctx_r19.order)(\"modification\", modification_r20);\n} }\nfunction OrderHistoryComponent_vdr_timeline_entry_18_ng_container_3_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵelementStart(1, \"div\", 11);\n    ɵngcc0.ɵɵtext(2);\n    ɵngcc0.ɵɵpipe(3, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵtemplate(4, OrderHistoryComponent_vdr_timeline_entry_18_ng_container_3_ng_container_4_Template, 10, 11, \"ng-container\", 19);\n    ɵngcc0.ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const entry_r3 = ɵngcc0.ɵɵnextContext().$implicit;\n    const ctx_r5 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(3, 2, \"order.history-order-modified\"), \" \");\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r5.getModification(entry_r3.data.modificationId));\n} }\nfunction OrderHistoryComponent_vdr_timeline_entry_18_ng_container_4_ng_container_1_vdr_history_entry_detail_6_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"vdr-history-entry-detail\");\n    ɵngcc0.ɵɵelement(1, \"vdr-payment-detail\", 27);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const payment_r28 = ctx.ngIf;\n    const ctx_r27 = ɵngcc0.ɵɵnextContext(4);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"payment\", payment_r28)(\"currencyCode\", ctx_r27.order.currencyCode);\n} }\nfunction OrderHistoryComponent_vdr_timeline_entry_18_ng_container_4_ng_container_1_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵelementStart(1, \"div\", 11);\n    ɵngcc0.ɵɵtext(2);\n    ɵngcc0.ɵɵpipe(3, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵtext(4);\n    ɵngcc0.ɵɵpipe(5, \"translate\");\n    ɵngcc0.ɵɵtemplate(6, OrderHistoryComponent_vdr_timeline_entry_18_ng_container_4_ng_container_1_vdr_history_entry_detail_6_Template, 2, 2, \"vdr-history-entry-detail\", 19);\n    ɵngcc0.ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const entry_r3 = ɵngcc0.ɵɵnextContext(2).$implicit;\n    const ctx_r24 = ɵngcc0.ɵɵnextContext();\n    let tmp_1_0 = null;\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(3, 4, \"order.history-payment-settled\"), \" \");\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate2(\" \", ɵngcc0.ɵɵpipeBind1(5, 6, \"order.transaction-id\"), \": \", (tmp_1_0 = ctx_r24.getPayment(entry_r3)) == null ? null : tmp_1_0.transactionId, \" \");\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r24.getPayment(entry_r3));\n} }\nconst _c9 = function (a0, a1, a2) { return { from: a0, to: a1, id: a2 }; };\nfunction OrderHistoryComponent_vdr_timeline_entry_18_ng_container_4_ng_template_2_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵtext(0);\n    ɵngcc0.ɵɵpipe(1, \"translate\");\n} if (rf & 2) {\n    const entry_r3 = ɵngcc0.ɵɵnextContext(2).$implicit;\n    const ctx_r26 = ɵngcc0.ɵɵnextContext();\n    let tmp_0_0 = null;\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind2(1, 1, \"order.history-payment-transition\", ɵngcc0.ɵɵpureFunction3(4, _c9, entry_r3.data.from, entry_r3.data.to, (tmp_0_0 = ctx_r26.getPayment(entry_r3)) == null ? null : tmp_0_0.transactionId)), \" \");\n} }\nfunction OrderHistoryComponent_vdr_timeline_entry_18_ng_container_4_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵtemplate(1, OrderHistoryComponent_vdr_timeline_entry_18_ng_container_4_ng_container_1_Template, 7, 8, \"ng-container\", 25);\n    ɵngcc0.ɵɵtemplate(2, OrderHistoryComponent_vdr_timeline_entry_18_ng_container_4_ng_template_2_Template, 2, 8, \"ng-template\", null, 26, ɵngcc0.ɵɵtemplateRefExtractor);\n    ɵngcc0.ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const _r25 = ɵngcc0.ɵɵreference(3);\n    const entry_r3 = ɵngcc0.ɵɵnextContext().$implicit;\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", entry_r3.data.to === \"Settled\")(\"ngIfElse\", _r25);\n} }\nfunction OrderHistoryComponent_vdr_timeline_entry_18_ng_container_5_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const entry_r3 = ɵngcc0.ɵɵnextContext().$implicit;\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind2(2, 1, \"order.history-refund-transition\", ɵngcc0.ɵɵpureFunction3(4, _c9, entry_r3.data.from, entry_r3.data.to, entry_r3.data.refundId)), \" \");\n} }\nfunction OrderHistoryComponent_vdr_timeline_entry_18_ng_container_6_vdr_history_entry_detail_3_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"vdr-history-entry-detail\");\n    ɵngcc0.ɵɵelementStart(1, \"vdr-labeled-data\", 28);\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵtext(3);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(4, \"vdr-labeled-data\", 28);\n    ɵngcc0.ɵɵpipe(5, \"translate\");\n    ɵngcc0.ɵɵelement(6, \"vdr-simple-item-list\", 29);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const items_r34 = ctx.ngIf;\n    const entry_r3 = ɵngcc0.ɵɵnextContext(2).$implicit;\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"label\", ɵngcc0.ɵɵpipeBind1(2, 4, \"order.cancellation-reason\"));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", entry_r3.data.reason, \" \");\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"label\", ɵngcc0.ɵɵpipeBind1(5, 6, \"order.contents\"));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"items\", items_r34);\n} }\nfunction OrderHistoryComponent_vdr_timeline_entry_18_ng_container_6_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵtemplate(3, OrderHistoryComponent_vdr_timeline_entry_18_ng_container_6_vdr_history_entry_detail_3_Template, 7, 8, \"vdr-history-entry-detail\", 19);\n    ɵngcc0.ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const entry_r3 = ɵngcc0.ɵɵnextContext().$implicit;\n    const ctx_r8 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind2(2, 2, \"order.history-items-cancelled\", ɵngcc0.ɵɵpureFunction1(5, _c2, entry_r3.data.orderItemIds.length)), \" \");\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r8.getCancelledItems(entry_r3));\n} }\nfunction OrderHistoryComponent_vdr_timeline_entry_18_ng_container_7_vdr_history_entry_detail_3_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"vdr-history-entry-detail\");\n    ɵngcc0.ɵɵelement(1, \"vdr-fulfillment-detail\", 30);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const fulfillment_r38 = ctx.ngIf;\n    const ctx_r37 = ɵngcc0.ɵɵnextContext(3);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"fulfillmentId\", fulfillment_r38.id)(\"order\", ctx_r37.order);\n} }\nfunction OrderHistoryComponent_vdr_timeline_entry_18_ng_container_7_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵtemplate(3, OrderHistoryComponent_vdr_timeline_entry_18_ng_container_7_vdr_history_entry_detail_3_Template, 2, 2, \"vdr-history-entry-detail\", 19);\n    ɵngcc0.ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const entry_r3 = ɵngcc0.ɵɵnextContext().$implicit;\n    const ctx_r9 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(2, 2, \"order.history-fulfillment-created\"), \" \");\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r9.getFulfillment(entry_r3));\n} }\nfunction OrderHistoryComponent_vdr_timeline_entry_18_ng_container_8_ng_container_1_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵelementStart(1, \"div\", 11);\n    ɵngcc0.ɵɵtext(2);\n    ɵngcc0.ɵɵpipe(3, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵtext(4);\n    ɵngcc0.ɵɵpipe(5, \"translate\");\n    ɵngcc0.ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const entry_r3 = ɵngcc0.ɵɵnextContext(2).$implicit;\n    const ctx_r40 = ɵngcc0.ɵɵnextContext();\n    let tmp_1_0 = null;\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(3, 3, \"order.history-fulfillment-delivered\"), \" \");\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate2(\" \", ɵngcc0.ɵɵpipeBind1(5, 5, \"order.tracking-code\"), \": \", (tmp_1_0 = ctx_r40.getFulfillment(entry_r3)) == null ? null : tmp_1_0.trackingCode, \" \");\n} }\nfunction OrderHistoryComponent_vdr_timeline_entry_18_ng_container_8_ng_container_2_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵelementStart(1, \"div\", 11);\n    ɵngcc0.ɵɵtext(2);\n    ɵngcc0.ɵɵpipe(3, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵtext(4);\n    ɵngcc0.ɵɵpipe(5, \"translate\");\n    ɵngcc0.ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const entry_r3 = ɵngcc0.ɵɵnextContext(2).$implicit;\n    const ctx_r41 = ɵngcc0.ɵɵnextContext();\n    let tmp_1_0 = null;\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(3, 3, \"order.history-fulfillment-shipped\"), \" \");\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate2(\" \", ɵngcc0.ɵɵpipeBind1(5, 5, \"order.tracking-code\"), \": \", (tmp_1_0 = ctx_r41.getFulfillment(entry_r3)) == null ? null : tmp_1_0.trackingCode, \" \");\n} }\nfunction OrderHistoryComponent_vdr_timeline_entry_18_ng_container_8_ng_container_3_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const entry_r3 = ɵngcc0.ɵɵnextContext(2).$implicit;\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind2(2, 1, \"order.history-fulfillment-transition\", ɵngcc0.ɵɵpureFunction2(4, _c8, entry_r3.data.from, entry_r3.data.to)), \" \");\n} }\nfunction OrderHistoryComponent_vdr_timeline_entry_18_ng_container_8_vdr_history_entry_detail_4_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"vdr-history-entry-detail\");\n    ɵngcc0.ɵɵelement(1, \"vdr-fulfillment-detail\", 30);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const fulfillment_r47 = ctx.ngIf;\n    const ctx_r43 = ɵngcc0.ɵɵnextContext(3);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"fulfillmentId\", fulfillment_r47.id)(\"order\", ctx_r43.order);\n} }\nfunction OrderHistoryComponent_vdr_timeline_entry_18_ng_container_8_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵtemplate(1, OrderHistoryComponent_vdr_timeline_entry_18_ng_container_8_ng_container_1_Template, 6, 7, \"ng-container\", 19);\n    ɵngcc0.ɵɵtemplate(2, OrderHistoryComponent_vdr_timeline_entry_18_ng_container_8_ng_container_2_Template, 6, 7, \"ng-container\", 19);\n    ɵngcc0.ɵɵtemplate(3, OrderHistoryComponent_vdr_timeline_entry_18_ng_container_8_ng_container_3_Template, 3, 7, \"ng-container\", 19);\n    ɵngcc0.ɵɵtemplate(4, OrderHistoryComponent_vdr_timeline_entry_18_ng_container_8_vdr_history_entry_detail_4_Template, 2, 2, \"vdr-history-entry-detail\", 19);\n    ɵngcc0.ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const entry_r3 = ɵngcc0.ɵɵnextContext().$implicit;\n    const ctx_r10 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", entry_r3.data.to === \"Delivered\");\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", entry_r3.data.to === \"Shipped\");\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", entry_r3.data.to !== \"Delivered\" && entry_r3.data.to !== \"Shipped\");\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r10.getFulfillment(entry_r3));\n} }\nfunction OrderHistoryComponent_vdr_timeline_entry_18_ng_container_9_span_3_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"span\", 43);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(2, 1, \"common.public\"));\n} }\nfunction OrderHistoryComponent_vdr_timeline_entry_18_ng_container_9_span_4_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"span\", 44);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(2, 1, \"common.private\"));\n} }\nfunction OrderHistoryComponent_vdr_timeline_entry_18_ng_container_9_Template(rf, ctx) { if (rf & 1) {\n    const _r53 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵelementStart(1, \"div\", 31);\n    ɵngcc0.ɵɵelementStart(2, \"div\", 32);\n    ɵngcc0.ɵɵtemplate(3, OrderHistoryComponent_vdr_timeline_entry_18_ng_container_9_span_3_Template, 3, 3, \"span\", 33);\n    ɵngcc0.ɵɵtemplate(4, OrderHistoryComponent_vdr_timeline_entry_18_ng_container_9_span_4_Template, 3, 3, \"span\", 34);\n    ɵngcc0.ɵɵtext(5);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelement(6, \"div\", 35);\n    ɵngcc0.ɵɵelementStart(7, \"vdr-dropdown\");\n    ɵngcc0.ɵɵelementStart(8, \"button\", 36);\n    ɵngcc0.ɵɵelement(9, \"clr-icon\", 37);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(10, \"vdr-dropdown-menu\", 38);\n    ɵngcc0.ɵɵelementStart(11, \"button\", 39);\n    ɵngcc0.ɵɵlistener(\"click\", function OrderHistoryComponent_vdr_timeline_entry_18_ng_container_9_Template_button_click_11_listener() { ɵngcc0.ɵɵrestoreView(_r53); const entry_r3 = ɵngcc0.ɵɵnextContext().$implicit; const ctx_r51 = ɵngcc0.ɵɵnextContext(); return ctx_r51.updateNote.emit(entry_r3); });\n    ɵngcc0.ɵɵpipe(12, \"hasPermission\");\n    ɵngcc0.ɵɵelement(13, \"clr-icon\", 40);\n    ɵngcc0.ɵɵtext(14);\n    ɵngcc0.ɵɵpipe(15, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelement(16, \"div\", 41);\n    ɵngcc0.ɵɵelementStart(17, \"button\", 39);\n    ɵngcc0.ɵɵlistener(\"click\", function OrderHistoryComponent_vdr_timeline_entry_18_ng_container_9_Template_button_click_17_listener() { ɵngcc0.ɵɵrestoreView(_r53); const entry_r3 = ɵngcc0.ɵɵnextContext().$implicit; const ctx_r54 = ɵngcc0.ɵɵnextContext(); return ctx_r54.deleteNote.emit(entry_r3); });\n    ɵngcc0.ɵɵpipe(18, \"hasPermission\");\n    ɵngcc0.ɵɵelement(19, \"clr-icon\", 42);\n    ɵngcc0.ɵɵtext(20);\n    ɵngcc0.ɵɵpipe(21, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const entry_r3 = ɵngcc0.ɵɵnextContext().$implicit;\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵproperty(\"ngIf\", entry_r3.isPublic);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", !entry_r3.isPublic);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", entry_r3.data.note, \" \");\n    ɵngcc0.ɵɵadvance(6);\n    ɵngcc0.ɵɵproperty(\"disabled\", !ɵngcc0.ɵɵpipeBind1(12, 7, \"UpdateOrder\"));\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(15, 9, \"common.edit\"), \" \");\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵproperty(\"disabled\", !ɵngcc0.ɵɵpipeBind1(18, 11, \"UpdateOrder\"));\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(21, 13, \"common.delete\"), \" \");\n} }\nconst _c10 = function (a2) { return [\"/marketing\", \"promotions\", a2]; };\nfunction OrderHistoryComponent_vdr_timeline_entry_18_ng_container_10_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵelementStart(3, \"vdr-chip\");\n    ɵngcc0.ɵɵelementStart(4, \"a\", 45);\n    ɵngcc0.ɵɵtext(5);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const entry_r3 = ɵngcc0.ɵɵnextContext().$implicit;\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(2, 3, \"order.history-coupon-code-applied\"), \": \");\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵproperty(\"routerLink\", ɵngcc0.ɵɵpureFunction1(5, _c10, entry_r3.data.promotionId));\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate(entry_r3.data.couponCode);\n} }\nfunction OrderHistoryComponent_vdr_timeline_entry_18_ng_container_11_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵelementStart(3, \"vdr-chip\");\n    ɵngcc0.ɵɵelementStart(4, \"span\", 46);\n    ɵngcc0.ɵɵtext(5);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const entry_r3 = ɵngcc0.ɵɵnextContext().$implicit;\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(2, 2, \"order.history-coupon-code-removed\"), \": \");\n    ɵngcc0.ɵɵadvance(4);\n    ɵngcc0.ɵɵtextInterpolate(entry_r3.data.couponCode);\n} }\nfunction OrderHistoryComponent_vdr_timeline_entry_18_Template(rf, ctx) { if (rf & 1) {\n    const _r60 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"vdr-timeline-entry\", 14);\n    ɵngcc0.ɵɵlistener(\"expandClick\", function OrderHistoryComponent_vdr_timeline_entry_18_Template_vdr_timeline_entry_expandClick_0_listener() { ɵngcc0.ɵɵrestoreView(_r60); const ctx_r59 = ɵngcc0.ɵɵnextContext(); return ctx_r59.expanded = !ctx_r59.expanded; });\n    ɵngcc0.ɵɵelementContainerStart(1, 15);\n    ɵngcc0.ɵɵtemplate(2, OrderHistoryComponent_vdr_timeline_entry_18_ng_container_2_Template, 4, 3, \"ng-container\", 16);\n    ɵngcc0.ɵɵtemplate(3, OrderHistoryComponent_vdr_timeline_entry_18_ng_container_3_Template, 5, 4, \"ng-container\", 16);\n    ɵngcc0.ɵɵtemplate(4, OrderHistoryComponent_vdr_timeline_entry_18_ng_container_4_Template, 4, 2, \"ng-container\", 16);\n    ɵngcc0.ɵɵtemplate(5, OrderHistoryComponent_vdr_timeline_entry_18_ng_container_5_Template, 3, 8, \"ng-container\", 16);\n    ɵngcc0.ɵɵtemplate(6, OrderHistoryComponent_vdr_timeline_entry_18_ng_container_6_Template, 4, 7, \"ng-container\", 16);\n    ɵngcc0.ɵɵtemplate(7, OrderHistoryComponent_vdr_timeline_entry_18_ng_container_7_Template, 4, 4, \"ng-container\", 16);\n    ɵngcc0.ɵɵtemplate(8, OrderHistoryComponent_vdr_timeline_entry_18_ng_container_8_Template, 5, 4, \"ng-container\", 16);\n    ɵngcc0.ɵɵtemplate(9, OrderHistoryComponent_vdr_timeline_entry_18_ng_container_9_Template, 22, 15, \"ng-container\", 16);\n    ɵngcc0.ɵɵtemplate(10, OrderHistoryComponent_vdr_timeline_entry_18_ng_container_10_Template, 6, 7, \"ng-container\", 16);\n    ɵngcc0.ɵɵtemplate(11, OrderHistoryComponent_vdr_timeline_entry_18_ng_container_11_Template, 6, 4, \"ng-container\", 16);\n    ɵngcc0.ɵɵelementContainerEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const entry_r3 = ctx.$implicit;\n    const ctx_r2 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"displayType\", ctx_r2.getDisplayType(entry_r3))(\"iconShape\", ctx_r2.getTimelineIcon(entry_r3))(\"createdAt\", entry_r3.createdAt)(\"name\", ctx_r2.getName(entry_r3))(\"featured\", ctx_r2.isFeatured(entry_r3))(\"collapsed\", !ctx_r2.expanded && !ctx_r2.isFeatured(entry_r3));\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngSwitch\", entry_r3.type);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngSwitchCase\", ctx_r2.type.ORDER_STATE_TRANSITION);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngSwitchCase\", ctx_r2.type.ORDER_MODIFIED);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngSwitchCase\", ctx_r2.type.ORDER_PAYMENT_TRANSITION);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngSwitchCase\", ctx_r2.type.ORDER_REFUND_TRANSITION);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngSwitchCase\", ctx_r2.type.ORDER_CANCELLATION);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngSwitchCase\", ctx_r2.type.ORDER_FULFILLMENT);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngSwitchCase\", ctx_r2.type.ORDER_FULFILLMENT_TRANSITION);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngSwitchCase\", ctx_r2.type.ORDER_NOTE);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngSwitchCase\", ctx_r2.type.ORDER_COUPON_APPLIED);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngSwitchCase\", ctx_r2.type.ORDER_COUPON_REMOVED);\n} }\nfunction OrderListComponent_div_3_button_1_Template(rf, ctx) { if (rf & 1) {\n    const _r8 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"button\", 18);\n    ɵngcc0.ɵɵlistener(\"click\", function OrderListComponent_div_3_button_1_Template_button_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r8); const preset_r6 = ctx.$implicit; const ctx_r7 = ɵngcc0.ɵɵnextContext(2); return ctx_r7.selectFilterPreset(preset_r6.name); });\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const preset_r6 = ctx.$implicit;\n    const activePreset_r4 = ɵngcc0.ɵɵnextContext().ngIf;\n    ɵngcc0.ɵɵclassProp(\"btn-primary\", activePreset_r4 === preset_r6.name);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(2, 3, preset_r6.label), \" \");\n} }\nfunction OrderListComponent_div_3_Template(rf, ctx) { if (rf & 1) {\n    const _r11 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"div\", 16);\n    ɵngcc0.ɵɵtemplate(1, OrderListComponent_div_3_button_1_Template, 3, 5, \"button\", 17);\n    ɵngcc0.ɵɵelementStart(2, \"button\", 18);\n    ɵngcc0.ɵɵlistener(\"click\", function OrderListComponent_div_3_Template_button_click_2_listener() { ɵngcc0.ɵɵrestoreView(_r11); const ctx_r10 = ɵngcc0.ɵɵnextContext(); return ctx_r10.selectFilterPreset(\"custom\"); });\n    ɵngcc0.ɵɵtext(3);\n    ɵngcc0.ɵɵpipe(4, \"translate\");\n    ɵngcc0.ɵɵelement(5, \"clr-icon\", 19);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const activePreset_r4 = ctx.ngIf;\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngForOf\", ctx_r0.filterPresets);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵclassProp(\"btn-primary\", activePreset_r4 === \"custom\");\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(4, 4, \"order.filter-custom\"), \" \");\n} }\nfunction OrderListComponent_ng_template_15_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵtext(0);\n    ɵngcc0.ɵɵpipe(1, \"translate\");\n    ɵngcc0.ɵɵpipe(2, \"stateI18nToken\");\n} if (rf & 2) {\n    const item_r12 = ctx.item;\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(1, 1, ɵngcc0.ɵɵpipeBind1(2, 3, item_r12)));\n} }\nfunction OrderListComponent_ng_template_16_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"span\", 20);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵpipe(3, \"stateI18nToken\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(4, \"span\", 21);\n    ɵngcc0.ɵɵlistener(\"click\", function OrderListComponent_ng_template_16_Template_span_click_4_listener() { const item_r13 = ctx.item; const clear_r14 = ctx.clear; return clear_r14(item_r13); });\n    ɵngcc0.ɵɵtext(5, \"\\u00D7\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const item_r13 = ctx.item;\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(2, 1, ɵngcc0.ɵɵpipeBind1(3, 3, item_r13)), \"\");\n} }\nconst _c11 = function (a1) { return [\"./\", a1, \"modify\"]; };\nconst _c12 = function (a1) { return [\"./\", a1]; };\nfunction OrderListComponent_ng_template_61_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"td\", 22);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(2, \"td\", 22);\n    ɵngcc0.ɵɵelement(3, \"vdr-customer-label\", 23);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(4, \"td\", 22);\n    ɵngcc0.ɵɵelement(5, \"vdr-order-state-label\", 24);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(6, \"td\", 22);\n    ɵngcc0.ɵɵtext(7);\n    ɵngcc0.ɵɵpipe(8, \"localeCurrency\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(9, \"td\", 22);\n    ɵngcc0.ɵɵtext(10);\n    ɵngcc0.ɵɵpipe(11, \"timeAgo\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(12, \"td\", 22);\n    ɵngcc0.ɵɵtext(13);\n    ɵngcc0.ɵɵpipe(14, \"localeDate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(15, \"td\", 22);\n    ɵngcc0.ɵɵtext(16);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(17, \"td\", 25);\n    ɵngcc0.ɵɵelement(18, \"vdr-table-row-action\", 26);\n    ɵngcc0.ɵɵpipe(19, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const order_r16 = ctx.item;\n    const ctx_r3 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate(order_r16.code);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"customer\", order_r16.customer);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"state\", order_r16.state);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind2(8, 9, order_r16.total, order_r16.currencyCode));\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(11, 12, order_r16.updatedAt));\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind2(14, 14, order_r16.orderPlacedAt, \"medium\"));\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵtextInterpolate(ctx_r3.getShippingNames(order_r16));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"label\", ɵngcc0.ɵɵpipeBind1(19, 17, \"common.open\"))(\"linkTo\", order_r16.state === \"Modifying\" ? ɵngcc0.ɵɵpureFunction1(19, _c11, order_r16.id) : ɵngcc0.ɵɵpureFunction1(21, _c12, order_r16.id));\n} }\nfunction OrderPaymentCardComponent_ng_container_5_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\"#\", ctx_r0.payment.transactionId, \"\");\n} }\nfunction OrderPaymentCardComponent_ng_container_10_vdr_labeled_data_16_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"vdr-labeled-data\", 11);\n    ɵngcc0.ɵɵpipe(1, \"translate\");\n    ɵngcc0.ɵɵtext(2);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const refund_r3 = ɵngcc0.ɵɵnextContext().$implicit;\n    ɵngcc0.ɵɵproperty(\"label\", ɵngcc0.ɵɵpipeBind1(1, 2, \"order.transaction-id\"));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", refund_r3.transactionId, \" \");\n} }\nfunction OrderPaymentCardComponent_ng_container_10_vdr_labeled_data_17_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"vdr-labeled-data\", 11);\n    ɵngcc0.ɵɵpipe(1, \"translate\");\n    ɵngcc0.ɵɵtext(2);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const refund_r3 = ɵngcc0.ɵɵnextContext().$implicit;\n    ɵngcc0.ɵɵproperty(\"label\", ɵngcc0.ɵɵpipeBind1(1, 2, \"order.refund-reason\"));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", refund_r3.reason, \" \");\n} }\nfunction OrderPaymentCardComponent_ng_container_10_vdr_labeled_data_18_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"vdr-labeled-data\", 11);\n    ɵngcc0.ɵɵpipe(1, \"translate\");\n    ɵngcc0.ɵɵelement(2, \"vdr-object-tree\", 13);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const refund_r3 = ɵngcc0.ɵɵnextContext().$implicit;\n    ɵngcc0.ɵɵproperty(\"label\", ɵngcc0.ɵɵpipeBind1(1, 2, \"order.refund-metadata\"));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"value\", refund_r3.metadata);\n} }\nfunction OrderPaymentCardComponent_ng_container_10_div_19_Template(rf, ctx) { if (rf & 1) {\n    const _r13 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"div\", 14);\n    ɵngcc0.ɵɵelementStart(1, \"button\", 15);\n    ɵngcc0.ɵɵlistener(\"click\", function OrderPaymentCardComponent_ng_container_10_div_19_Template_button_click_1_listener() { ɵngcc0.ɵɵrestoreView(_r13); const refund_r3 = ɵngcc0.ɵɵnextContext().$implicit; const ctx_r11 = ɵngcc0.ɵɵnextContext(); return ctx_r11.settleRefund.emit(refund_r3); });\n    ɵngcc0.ɵɵtext(2);\n    ɵngcc0.ɵɵpipe(3, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(3, 1, \"order.settle-refund\"), \" \");\n} }\nfunction OrderPaymentCardComponent_ng_container_10_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵelementStart(1, \"div\", 1);\n    ɵngcc0.ɵɵelement(2, \"clr-icon\", 9);\n    ɵngcc0.ɵɵtext(3);\n    ɵngcc0.ɵɵpipe(4, \"translate\");\n    ɵngcc0.ɵɵelement(5, \"div\", 10);\n    ɵngcc0.ɵɵelement(6, \"vdr-refund-state-label\", 4);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(7, \"div\", 5);\n    ɵngcc0.ɵɵelementStart(8, \"vdr-labeled-data\", 11);\n    ɵngcc0.ɵɵpipe(9, \"translate\");\n    ɵngcc0.ɵɵtext(10);\n    ɵngcc0.ɵɵpipe(11, \"localeDate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(12, \"vdr-labeled-data\", 11);\n    ɵngcc0.ɵɵpipe(13, \"translate\");\n    ɵngcc0.ɵɵtext(14);\n    ɵngcc0.ɵɵpipe(15, \"localeCurrency\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵtemplate(16, OrderPaymentCardComponent_ng_container_10_vdr_labeled_data_16_Template, 3, 4, \"vdr-labeled-data\", 12);\n    ɵngcc0.ɵɵtemplate(17, OrderPaymentCardComponent_ng_container_10_vdr_labeled_data_17_Template, 3, 4, \"vdr-labeled-data\", 12);\n    ɵngcc0.ɵɵtemplate(18, OrderPaymentCardComponent_ng_container_10_vdr_labeled_data_18_Template, 3, 4, \"vdr-labeled-data\", 12);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵtemplate(19, OrderPaymentCardComponent_ng_container_10_div_19_Template, 4, 3, \"div\", 8);\n    ɵngcc0.ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const refund_r3 = ctx.$implicit;\n    const ctx_r1 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵtextInterpolate2(\" \", ɵngcc0.ɵɵpipeBind1(4, 11, \"order.refund\"), \" #\", refund_r3.id, \" \");\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵproperty(\"state\", refund_r3.state);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"label\", ɵngcc0.ɵɵpipeBind1(9, 13, \"common.created-at\"));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind2(11, 15, refund_r3.createdAt, \"medium\"), \" \");\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"label\", ɵngcc0.ɵɵpipeBind1(13, 18, \"order.refund-total\"));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind2(15, 20, refund_r3.total, ctx_r1.currencyCode), \" \");\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngIf\", refund_r3.transactionId);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", refund_r3.reason);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r1.refundHasMetadata(refund_r3));\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", refund_r3.state === \"Pending\");\n} }\nfunction OrderPaymentCardComponent_div_11_button_1_Template(rf, ctx) { if (rf & 1) {\n    const _r17 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"button\", 15);\n    ɵngcc0.ɵɵlistener(\"click\", function OrderPaymentCardComponent_div_11_button_1_Template_button_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r17); const ctx_r16 = ɵngcc0.ɵɵnextContext(2); return ctx_r16.settlePayment.emit(ctx_r16.payment); });\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(2, 1, \"order.settle-payment\"), \" \");\n} }\nfunction OrderPaymentCardComponent_div_11_ng_container_6_ng_container_2_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵelement(1, \"clr-icon\", 23);\n    ɵngcc0.ɵɵtext(2);\n    ɵngcc0.ɵɵpipe(3, \"translate\");\n    ɵngcc0.ɵɵpipe(4, \"translate\");\n    ɵngcc0.ɵɵpipe(5, \"stateI18nToken\");\n    ɵngcc0.ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const nextState_r18 = ɵngcc0.ɵɵnextContext().$implicit;\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind2(3, 1, \"order.transition-to-state\", ɵngcc0.ɵɵpureFunction1(8, _c0, ɵngcc0.ɵɵpipeBind1(4, 4, ɵngcc0.ɵɵpipeBind1(5, 6, nextState_r18)))), \" \");\n} }\nfunction OrderPaymentCardComponent_div_11_ng_container_6_ng_template_3_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"clr-icon\", 24);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n} if (rf & 2) {\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(2, 1, \"order.cancel-payment\"), \" \");\n} }\nfunction OrderPaymentCardComponent_div_11_ng_container_6_Template(rf, ctx) { if (rf & 1) {\n    const _r24 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵelementStart(1, \"button\", 20);\n    ɵngcc0.ɵɵlistener(\"click\", function OrderPaymentCardComponent_div_11_ng_container_6_Template_button_click_1_listener() { ɵngcc0.ɵɵrestoreView(_r24); const nextState_r18 = ctx.$implicit; const ctx_r23 = ɵngcc0.ɵɵnextContext(2); return ctx_r23.transitionPaymentState.emit({ payment: ctx_r23.payment, state: nextState_r18 }); });\n    ɵngcc0.ɵɵtemplate(2, OrderPaymentCardComponent_div_11_ng_container_6_ng_container_2_Template, 6, 10, \"ng-container\", 21);\n    ɵngcc0.ɵɵtemplate(3, OrderPaymentCardComponent_div_11_ng_container_6_ng_template_3_Template, 3, 3, \"ng-template\", null, 22, ɵngcc0.ɵɵtemplateRefExtractor);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const nextState_r18 = ctx.$implicit;\n    const _r20 = ɵngcc0.ɵɵreference(4);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngIf\", nextState_r18 !== \"Cancelled\")(\"ngIfElse\", _r20);\n} }\nfunction OrderPaymentCardComponent_div_11_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"div\", 14);\n    ɵngcc0.ɵɵtemplate(1, OrderPaymentCardComponent_div_11_button_1_Template, 3, 3, \"button\", 16);\n    ɵngcc0.ɵɵelementStart(2, \"vdr-dropdown\");\n    ɵngcc0.ɵɵelementStart(3, \"button\", 17);\n    ɵngcc0.ɵɵelement(4, \"clr-icon\", 18);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(5, \"vdr-dropdown-menu\", 19);\n    ɵngcc0.ɵɵtemplate(6, OrderPaymentCardComponent_div_11_ng_container_6_Template, 5, 2, \"ng-container\", 7);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r2 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r2.payment.nextStates.includes(\"Settled\"));\n    ɵngcc0.ɵɵadvance(5);\n    ɵngcc0.ɵɵproperty(\"ngForOf\", ctx_r2.nextOtherStates());\n} }\nfunction OrderProcessNodeComponent_div_7_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"div\", 3);\n    ɵngcc0.ɵɵelement(1, \"div\", 4);\n    ɵngcc0.ɵɵelement(2, \"clr-icon\", 5);\n    ɵngcc0.ɵɵelementStart(3, \"div\", 6);\n    ɵngcc0.ɵɵtext(4);\n    ɵngcc0.ɵɵpipe(5, \"translate\");\n    ɵngcc0.ɵɵpipe(6, \"stateI18nToken\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(4);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(5, 1, ɵngcc0.ɵɵpipeBind1(6, 3, ctx_r0.cancelledState)), \" \");\n} }\nfunction OrderProcessGraphComponent_ng_container_0_Template(rf, ctx) { if (rf & 1) {\n    const _r5 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵelementStart(1, \"vdr-order-process-node\", 1);\n    ɵngcc0.ɵɵlistener(\"mouseenter\", function OrderProcessGraphComponent_ng_container_0_Template_vdr_order_process_node_mouseenter_1_listener() { ɵngcc0.ɵɵrestoreView(_r5); const state_r2 = ctx.$implicit; const ctx_r4 = ɵngcc0.ɵɵnextContext(); return ctx_r4.onMouseOver(state_r2.name); })(\"mouseleave\", function OrderProcessGraphComponent_ng_container_0_Template_vdr_order_process_node_mouseleave_1_listener() { ɵngcc0.ɵɵrestoreView(_r5); const ctx_r6 = ɵngcc0.ɵɵnextContext(); return ctx_r6.onMouseOut(); });\n    ɵngcc0.ɵɵpipe(2, \"async\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const state_r2 = ctx.$implicit;\n    const i_r3 = ctx.index;\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"node\", state_r2)(\"index\", i_r3)(\"active\", ɵngcc0.ɵɵpipeBind1(2, 3, ctx_r0.activeState$) === state_r2.name);\n} }\nfunction OrderProcessGraphComponent_ng_container_1_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵelement(1, \"vdr-order-process-edge\", 2);\n    ɵngcc0.ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const edge_r7 = ctx.$implicit;\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"from\", edge_r7.from)(\"to\", edge_r7.to)(\"index\", edge_r7.index);\n} }\nfunction OrderTableComponent_ng_container_20_img_3_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"img\", 23);\n    ɵngcc0.ɵɵpipe(1, \"assetPreview\");\n} if (rf & 2) {\n    const line_r3 = ɵngcc0.ɵɵnextContext().$implicit;\n    ɵngcc0.ɵɵproperty(\"src\", ɵngcc0.ɵɵpipeBind2(1, 1, line_r3.featuredAsset, \"tiny\"), ɵngcc0.ɵɵsanitizeUrl);\n} }\nfunction OrderTableComponent_ng_container_20_ng_container_26_vdr_dropdown_1_div_5_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"div\", 26);\n    ɵngcc0.ɵɵelementStart(1, \"a\", 27);\n    ɵngcc0.ɵɵtext(2);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(3, \"div\", 28);\n    ɵngcc0.ɵɵtext(4);\n    ɵngcc0.ɵɵpipe(5, \"localeCurrency\");\n    ɵngcc0.ɵɵelementStart(6, \"div\", 8);\n    ɵngcc0.ɵɵpipe(7, \"translate\");\n    ɵngcc0.ɵɵtext(8);\n    ɵngcc0.ɵɵpipe(9, \"localeCurrency\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const discount_r11 = ctx.$implicit;\n    const ctx_r10 = ɵngcc0.ɵɵnextContext(4);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"routerLink\", ctx_r10.getPromotionLink(discount_r11));\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate(discount_r11.description);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind2(5, 5, discount_r11.amountWithTax, ctx_r10.order.currencyCode), \" \");\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"title\", ɵngcc0.ɵɵpipeBind1(7, 8, \"order.net-price\"));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind2(9, 10, discount_r11.amount, ctx_r10.order.currencyCode), \" \");\n} }\nfunction OrderTableComponent_ng_container_20_ng_container_26_vdr_dropdown_1_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"vdr-dropdown\");\n    ɵngcc0.ɵɵelementStart(1, \"div\", 24);\n    ɵngcc0.ɵɵtext(2);\n    ɵngcc0.ɵɵpipe(3, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(4, \"vdr-dropdown-menu\");\n    ɵngcc0.ɵɵtemplate(5, OrderTableComponent_ng_container_20_ng_container_26_vdr_dropdown_1_div_5_Template, 10, 13, \"div\", 25);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const discounts_r8 = ɵngcc0.ɵɵnextContext().ngIf;\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(3, 2, \"order.promotions-applied\"), \" \");\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵproperty(\"ngForOf\", discounts_r8);\n} }\nfunction OrderTableComponent_ng_container_20_ng_container_26_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵtemplate(1, OrderTableComponent_ng_container_20_ng_container_26_vdr_dropdown_1_Template, 6, 4, \"vdr-dropdown\", 22);\n    ɵngcc0.ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const discounts_r8 = ctx.ngIf;\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", discounts_r8.length);\n} }\nfunction OrderTableComponent_ng_container_20_ng_container_27_tr_1_div_3_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"div\", 32);\n    ɵngcc0.ɵɵelement(1, \"vdr-custom-field-control\", 33);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const field_r16 = ctx.$implicit;\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"compact\", true)(\"readonly\", true)(\"customField\", field_r16.config)(\"customFieldsFormGroup\", field_r16.formGroup);\n} }\nfunction OrderTableComponent_ng_container_20_ng_container_27_tr_1_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"tr\");\n    ɵngcc0.ɵɵelementStart(1, \"td\", 29);\n    ɵngcc0.ɵɵelementStart(2, \"div\", 30);\n    ɵngcc0.ɵɵtemplate(3, OrderTableComponent_ng_container_20_ng_container_27_tr_1_div_3_Template, 2, 4, \"div\", 31);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const customFields_r13 = ɵngcc0.ɵɵnextContext().ngIf;\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵproperty(\"ngForOf\", customFields_r13);\n} }\nfunction OrderTableComponent_ng_container_20_ng_container_27_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵtemplate(1, OrderTableComponent_ng_container_20_ng_container_27_tr_1_Template, 4, 1, \"tr\", 22);\n    ɵngcc0.ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const customFields_r13 = ctx.ngIf;\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", customFields_r13.length);\n} }\nfunction OrderTableComponent_ng_container_20_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵelementStart(1, \"tr\", 12);\n    ɵngcc0.ɵɵelementStart(2, \"td\", 13);\n    ɵngcc0.ɵɵtemplate(3, OrderTableComponent_ng_container_20_img_3_Template, 2, 4, \"img\", 14);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(4, \"td\", 15);\n    ɵngcc0.ɵɵtext(5);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(6, \"td\", 16);\n    ɵngcc0.ɵɵtext(7);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(8, \"td\", 17);\n    ɵngcc0.ɵɵtext(9);\n    ɵngcc0.ɵɵpipe(10, \"localeCurrency\");\n    ɵngcc0.ɵɵelementStart(11, \"div\", 8);\n    ɵngcc0.ɵɵpipe(12, \"translate\");\n    ɵngcc0.ɵɵtext(13);\n    ɵngcc0.ɵɵpipe(14, \"localeCurrency\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(15, \"td\", 18);\n    ɵngcc0.ɵɵtext(16);\n    ɵngcc0.ɵɵelement(17, \"vdr-line-refunds\", 19);\n    ɵngcc0.ɵɵelement(18, \"vdr-line-fulfillment\", 20);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(19, \"td\", 21);\n    ɵngcc0.ɵɵtext(20);\n    ɵngcc0.ɵɵpipe(21, \"localeCurrency\");\n    ɵngcc0.ɵɵelementStart(22, \"div\", 8);\n    ɵngcc0.ɵɵpipe(23, \"translate\");\n    ɵngcc0.ɵɵtext(24);\n    ɵngcc0.ɵɵpipe(25, \"localeCurrency\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵtemplate(26, OrderTableComponent_ng_container_20_ng_container_26_Template, 2, 1, \"ng-container\", 22);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵtemplate(27, OrderTableComponent_ng_container_20_ng_container_27_Template, 2, 1, \"ng-container\", 22);\n    ɵngcc0.ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const line_r3 = ctx.$implicit;\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵclassProp(\"is-cancelled\", line_r3.quantity === 0);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngIf\", line_r3.featuredAsset);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate(line_r3.productVariant.name);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate(line_r3.productVariant.sku);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind2(10, 18, line_r3.unitPriceWithTax, ctx_r0.order.currencyCode), \" \");\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"title\", ɵngcc0.ɵɵpipeBind1(12, 21, \"order.net-price\"));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind2(14, 23, line_r3.unitPrice, ctx_r0.order.currencyCode), \" \");\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", line_r3.quantity, \" \");\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"line\", line_r3)(\"payments\", ctx_r0.order.payments);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"line\", line_r3)(\"orderState\", ctx_r0.order.state);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind2(21, 26, line_r3.linePriceWithTax, ctx_r0.order.currencyCode), \" \");\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"title\", ɵngcc0.ɵɵpipeBind1(23, 29, \"order.net-price\"));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind2(25, 31, line_r3.linePrice, ctx_r0.order.currencyCode), \" \");\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r0.getLineDiscounts(line_r3));\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r0.customFieldsForLine[line_r3.id]);\n} }\nfunction OrderTableComponent_tr_21_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"tr\", 34);\n    ɵngcc0.ɵɵelementStart(1, \"td\", 35);\n    ɵngcc0.ɵɵtext(2);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(3, \"td\", 16);\n    ɵngcc0.ɵɵtext(4);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelement(5, \"td\", 36);\n    ɵngcc0.ɵɵelementStart(6, \"td\", 21);\n    ɵngcc0.ɵɵtext(7);\n    ɵngcc0.ɵɵpipe(8, \"localeCurrency\");\n    ɵngcc0.ɵɵelementStart(9, \"div\", 8);\n    ɵngcc0.ɵɵpipe(10, \"translate\");\n    ɵngcc0.ɵɵtext(11);\n    ɵngcc0.ɵɵpipe(12, \"localeCurrency\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const surcharge_r18 = ctx.$implicit;\n    const ctx_r1 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate(surcharge_r18.description);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate(surcharge_r18.sku);\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind2(8, 5, surcharge_r18.priceWithTax, ctx_r1.order.currencyCode), \" \");\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"title\", ɵngcc0.ɵɵpipeBind1(10, 8, \"order.net-price\"));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind2(12, 10, surcharge_r18.price, ctx_r1.order.currencyCode), \" \");\n} }\nfunction OrderTableComponent_tr_22_vdr_chip_4_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"vdr-chip\");\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const couponCode_r21 = ctx.ngIf;\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate(couponCode_r21);\n} }\nfunction OrderTableComponent_tr_22_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"tr\", 37);\n    ɵngcc0.ɵɵelementStart(1, \"td\", 38);\n    ɵngcc0.ɵɵelementStart(2, \"a\", 39);\n    ɵngcc0.ɵɵtext(3);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵtemplate(4, OrderTableComponent_tr_22_vdr_chip_4_Template, 2, 1, \"vdr-chip\", 22);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(5, \"td\", 7);\n    ɵngcc0.ɵɵtext(6);\n    ɵngcc0.ɵɵpipe(7, \"localeCurrency\");\n    ɵngcc0.ɵɵelementStart(8, \"div\", 8);\n    ɵngcc0.ɵɵpipe(9, \"translate\");\n    ɵngcc0.ɵɵtext(10);\n    ɵngcc0.ɵɵpipe(11, \"localeCurrency\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const discount_r19 = ctx.$implicit;\n    const ctx_r2 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"routerLink\", ctx_r2.getPromotionLink(discount_r19));\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate(discount_r19.description);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r2.getCouponCodeForAdjustment(ctx_r2.order, discount_r19));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind2(7, 6, discount_r19.amountWithTax, ctx_r2.order.currencyCode), \" \");\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"title\", ɵngcc0.ɵɵpipeBind1(9, 9, \"order.net-price\"));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind2(11, 11, discount_r19.amount, ctx_r2.order.currencyCode), \" \");\n} }\nfunction PaymentDetailComponent_vdr_labeled_data_7_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"vdr-labeled-data\", 0);\n    ɵngcc0.ɵɵpipe(1, \"translate\");\n    ɵngcc0.ɵɵtext(2);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"label\", ɵngcc0.ɵɵpipeBind1(1, 2, \"order.error-message\"));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ctx_r0.payment.errorMessage, \"\\n\");\n} }\nfunction PaymentDetailComponent_vdr_labeled_data_8_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"vdr-labeled-data\", 0);\n    ɵngcc0.ɵɵpipe(1, \"translate\");\n    ɵngcc0.ɵɵtext(2);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r1 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"label\", ɵngcc0.ɵɵpipeBind1(1, 2, \"order.transaction-id\"));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ctx_r1.payment.transactionId, \"\\n\");\n} }\nfunction PaymentStateLabelComponent_clr_icon_2_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"clr-icon\", 2);\n} }\nfunction RefundStateLabelComponent_clr_icon_2_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"clr-icon\", 2);\n} }\nfunction SimpleItemListComponent_li_2_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"li\", 2);\n    ɵngcc0.ɵɵelementStart(1, \"div\", 3);\n    ɵngcc0.ɵɵtext(2);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelement(3, \"clr-icon\", 4);\n    ɵngcc0.ɵɵtext(4);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const item_r1 = ctx.$implicit;\n    ɵngcc0.ɵɵproperty(\"title\", item_r1.name);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate(item_r1.quantity);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", item_r1.name, \" \");\n} }\nclass AddManualPaymentDialogComponent {\r\n    constructor(dataService) {\r\n        this.dataService = dataService;\r\n        this.form = new FormGroup({\r\n            method: new FormControl('', Validators.required),\r\n            transactionId: new FormControl('', Validators.required),\r\n        });\r\n    }\r\n    ngOnInit() {\r\n        this.paymentMethods$ = this.dataService.settings\r\n            .getPaymentMethods(999)\r\n            .mapSingle(data => data.paymentMethods.items);\r\n    }\r\n    submit() {\r\n        const formValue = this.form.value;\r\n        this.resolveWith({\r\n            method: formValue.method,\r\n            transactionId: formValue.transactionId,\r\n        });\r\n    }\r\n    cancel() {\r\n        this.resolveWith();\r\n    }\r\n}\nAddManualPaymentDialogComponent.ɵfac = function AddManualPaymentDialogComponent_Factory(t) { return new (t || AddManualPaymentDialogComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc1.DataService)); };\nAddManualPaymentDialogComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: AddManualPaymentDialogComponent, selectors: [[\"vdr-add-manual-payment-dialog\"]], decls: 10, vars: 11, consts: [[\"vdrDialogTitle\", \"\"], [3, \"formGroup\"], [\"for\", \"method\", 3, \"label\"], [\"bindLabel\", \"code\", \"autofocus\", \"\", \"bindValue\", \"code\", \"formControlName\", \"method\", 3, \"items\", \"addTag\"], [\"for\", \"transactionId\", 3, \"label\"], [\"id\", \"transactionId\", \"type\", \"text\", \"formControlName\", \"transactionId\"], [\"vdrDialogButtons\", \"\"], [\"type\", \"button\", 1, \"btn\", 3, \"click\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", 3, \"disabled\", \"click\"]], template: function AddManualPaymentDialogComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵtemplate(0, AddManualPaymentDialogComponent_ng_template_0_Template, 2, 3, \"ng-template\", 0);\n        ɵngcc0.ɵɵelementStart(1, \"form\", 1);\n        ɵngcc0.ɵɵelementStart(2, \"vdr-form-field\", 2);\n        ɵngcc0.ɵɵpipe(3, \"translate\");\n        ɵngcc0.ɵɵelement(4, \"ng-select\", 3);\n        ɵngcc0.ɵɵpipe(5, \"async\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(6, \"vdr-form-field\", 4);\n        ɵngcc0.ɵɵpipe(7, \"translate\");\n        ɵngcc0.ɵɵelement(8, \"input\", 5);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵtemplate(9, AddManualPaymentDialogComponent_ng_template_9_Template, 7, 11, \"ng-template\", 6);\n    } if (rf & 2) {\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"formGroup\", ctx.form);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"label\", ɵngcc0.ɵɵpipeBind1(3, 5, \"order.payment-method\"));\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"items\", ɵngcc0.ɵɵpipeBind1(5, 7, ctx.paymentMethods$))(\"addTag\", true);\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"label\", ɵngcc0.ɵɵpipeBind1(7, 9, \"order.transaction-id\"));\n    } }, directives: [ɵngcc1.DialogTitleDirective, ɵngcc2.ɵangular_packages_forms_forms_y, ɵngcc2.NgControlStatusGroup, ɵngcc2.FormGroupDirective, ɵngcc1.FormFieldComponent, ɵngcc3.NgSelectComponent, ɵngcc2.NgControlStatus, ɵngcc2.FormControlName, ɵngcc1.FormFieldControlDirective, ɵngcc2.DefaultValueAccessor, ɵngcc1.DialogButtonsDirective], pipes: [ɵngcc4.TranslatePipe, ɵngcc5.AsyncPipe, ɵngcc1.LocaleCurrencyPipe], styles: [\".ng-select[_ngcontent-%COMP%]{min-width:100%}\"], changeDetection: 0 });\r\nAddManualPaymentDialogComponent.ctorParameters = () => [\r\n    { type: DataService }\r\n];\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(AddManualPaymentDialogComponent, [{\n        type: Component,\n        args: [{\n                selector: 'vdr-add-manual-payment-dialog',\n                template: \"<ng-template vdrDialogTitle>{{ 'order.add-payment-to-order' | translate }}</ng-template>\\r\\n<form [formGroup]=\\\"form\\\">\\r\\n    <vdr-form-field [label]=\\\"'order.payment-method' | translate\\\" for=\\\"method\\\">\\r\\n        <ng-select\\r\\n            [items]=\\\"paymentMethods$ | async\\\"\\r\\n            bindLabel=\\\"code\\\"\\r\\n            autofocus\\r\\n            bindValue=\\\"code\\\"\\r\\n            [addTag]=\\\"true\\\"\\r\\n            formControlName=\\\"method\\\"\\r\\n        ></ng-select>\\r\\n    </vdr-form-field>\\r\\n    <vdr-form-field [label]=\\\"'order.transaction-id' | translate\\\" for=\\\"transactionId\\\">\\r\\n        <input id=\\\"transactionId\\\" type=\\\"text\\\" formControlName=\\\"transactionId\\\" />\\r\\n    </vdr-form-field>\\r\\n</form>\\r\\n<ng-template vdrDialogButtons>\\r\\n    <button type=\\\"button\\\" class=\\\"btn\\\" (click)=\\\"cancel()\\\">{{ 'common.cancel' | translate }}</button>\\r\\n    <button type=\\\"submit\\\" (click)=\\\"submit()\\\" class=\\\"btn btn-primary\\\" [disabled]=\\\"form.invalid || form.pristine\\\">\\r\\n        {{ 'order.add-payment' | translate }}  ({{ outstandingAmount | localeCurrency: currencyCode }})\\r\\n    </button>\\r\\n</ng-template>\\r\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\".ng-select{min-width:100%}\"]\n            }]\n    }], function () { return [{ type: ɵngcc1.DataService }]; }, null); })();\n\nclass CancelOrderDialogComponent {\r\n    constructor(i18nService) {\r\n        this.i18nService = i18nService;\r\n        this.lineQuantities = {};\r\n        this.reasons = [marker('order.cancel-reason-customer-request'), marker('order.cancel-reason-not-available')];\r\n        this.reasons = this.reasons.map(r => this.i18nService.translate(r));\r\n    }\r\n    get selectionCount() {\r\n        return Object.values(this.lineQuantities).reduce((sum, n) => sum + n, 0);\r\n    }\r\n    ngOnInit() {\r\n        this.lineQuantities = this.order.lines.reduce((result, line) => {\r\n            return Object.assign(Object.assign({}, result), { [line.id]: 0 });\r\n        }, {});\r\n    }\r\n    select() {\r\n        this.resolveWith({\r\n            orderId: this.order.id,\r\n            lines: this.getLineInputs(),\r\n            reason: this.reason,\r\n        });\r\n    }\r\n    cancel() {\r\n        this.resolveWith();\r\n    }\r\n    getLineInputs() {\r\n        if (this.order.active) {\r\n            return;\r\n        }\r\n        return Object.entries(this.lineQuantities)\r\n            .map(([orderLineId, quantity]) => ({\r\n            orderLineId,\r\n            quantity,\r\n        }))\r\n            .filter(l => 0 < l.quantity);\r\n    }\r\n}\nCancelOrderDialogComponent.ɵfac = function CancelOrderDialogComponent_Factory(t) { return new (t || CancelOrderDialogComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc1.I18nService)); };\nCancelOrderDialogComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: CancelOrderDialogComponent, selectors: [[\"vdr-cancel-order-dialog\"]], decls: 29, vars: 22, consts: [[\"vdrDialogTitle\", \"\"], [1, \"fulfillment-wrapper\"], [1, \"order-lines\"], [1, \"table\"], [\"class\", \"order-line\", 3, \"is-cancelled\", 4, \"ngFor\", \"ngForOf\"], [1, \"cancellation-details\"], [1, \"clr-control-label\"], [\"bindLabel\", \"name\", \"autofocus\", \"\", \"bindValue\", \"id\", 3, \"items\", \"addTag\", \"ngModel\", \"ngModelChange\"], [\"vdrDialogButtons\", \"\"], [1, \"order-line\"], [1, \"align-middle\", \"thumb\"], [3, \"src\"], [1, \"align-middle\", \"name\"], [1, \"align-middle\", \"sku\"], [1, \"align-middle\", \"quantity\"], [1, \"align-middle\", \"fulfil\"], [\"type\", \"number\", \"min\", \"0\", 3, \"ngModel\", \"max\", \"ngModelChange\", 4, \"ngIf\", \"ngIfElse\"], [\"nonEditable\", \"\"], [\"type\", \"number\", \"min\", \"0\", 3, \"ngModel\", \"max\", \"ngModelChange\"], [\"type\", \"button\", 1, \"btn\", 3, \"click\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", 3, \"disabled\", \"click\"], [4, \"ngIf\"]], template: function CancelOrderDialogComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵtemplate(0, CancelOrderDialogComponent_ng_template_0_Template, 2, 3, \"ng-template\", 0);\n        ɵngcc0.ɵɵelementStart(1, \"div\", 1);\n        ɵngcc0.ɵɵelementStart(2, \"div\", 2);\n        ɵngcc0.ɵɵelementStart(3, \"table\", 3);\n        ɵngcc0.ɵɵelementStart(4, \"thead\");\n        ɵngcc0.ɵɵelementStart(5, \"tr\");\n        ɵngcc0.ɵɵelement(6, \"th\");\n        ɵngcc0.ɵɵelementStart(7, \"th\");\n        ɵngcc0.ɵɵtext(8);\n        ɵngcc0.ɵɵpipe(9, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(10, \"th\");\n        ɵngcc0.ɵɵtext(11);\n        ɵngcc0.ɵɵpipe(12, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(13, \"th\");\n        ɵngcc0.ɵɵtext(14);\n        ɵngcc0.ɵɵpipe(15, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(16, \"th\");\n        ɵngcc0.ɵɵtext(17);\n        ɵngcc0.ɵɵpipe(18, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(19, \"th\");\n        ɵngcc0.ɵɵtext(20);\n        ɵngcc0.ɵɵpipe(21, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵtemplate(22, CancelOrderDialogComponent_tr_22_Template, 17, 15, \"tr\", 4);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(23, \"div\", 5);\n        ɵngcc0.ɵɵelementStart(24, \"label\", 6);\n        ɵngcc0.ɵɵtext(25);\n        ɵngcc0.ɵɵpipe(26, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(27, \"ng-select\", 7);\n        ɵngcc0.ɵɵlistener(\"ngModelChange\", function CancelOrderDialogComponent_Template_ng_select_ngModelChange_27_listener($event) { return ctx.reason = $event; });\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵtemplate(28, CancelOrderDialogComponent_ng_template_28_Template, 6, 6, \"ng-template\", 8);\n    } if (rf & 2) {\n        ɵngcc0.ɵɵadvance(8);\n        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(9, 10, \"order.product-name\"));\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(12, 12, \"order.product-sku\"));\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(15, 14, \"order.quantity\"));\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(18, 16, \"order.unit-price\"));\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(21, 18, \"order.cancel\"));\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"ngForOf\", ctx.order.lines);\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(26, 20, \"order.cancellation-reason\"));\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"items\", ctx.reasons)(\"addTag\", true)(\"ngModel\", ctx.reason);\n    } }, directives: [ɵngcc1.DialogTitleDirective, ɵngcc5.NgForOf, ɵngcc6.ClrLabel, ɵngcc3.NgSelectComponent, ɵngcc2.NgControlStatus, ɵngcc2.NgModel, ɵngcc1.DialogButtonsDirective, ɵngcc5.NgIf, ɵngcc1.FormFieldControlDirective, ɵngcc2.NumberValueAccessor, ɵngcc2.DefaultValueAccessor], pipes: [ɵngcc4.TranslatePipe, ɵngcc1.AssetPreviewPipe, ɵngcc1.LocaleCurrencyPipe], styles: [\"[_nghost-%COMP%]{height:100%;display:flex;min-height:64vh}.fulfillment-wrapper[_ngcontent-%COMP%]{flex:1}@media screen and (min-width:768px){.fulfillment-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:row}}@media screen and (min-width:768px){.fulfillment-wrapper[_ngcontent-%COMP%]   .cancellation-details[_ngcontent-%COMP%]{margin-top:0;margin-left:24px;width:250px}}.fulfillment-wrapper[_ngcontent-%COMP%]   .order-lines[_ngcontent-%COMP%]{flex:1;overflow-y:auto}.fulfillment-wrapper[_ngcontent-%COMP%]   .order-lines[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{margin-top:0}.fulfillment-wrapper[_ngcontent-%COMP%]   tr.ignore[_ngcontent-%COMP%]{color:var(--color-grey-300)}.fulfillment-wrapper[_ngcontent-%COMP%]   .is-cancelled[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-decoration:line-through;background-color:var(--color-component-bg-200)}\"], changeDetection: 0 });\r\nCancelOrderDialogComponent.ctorParameters = () => [\r\n    { type: I18nService }\r\n];\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(CancelOrderDialogComponent, [{\n        type: Component,\n        args: [{\n                selector: 'vdr-cancel-order-dialog',\n                template: \"<ng-template vdrDialogTitle>{{ 'order.cancel-order' | translate }}</ng-template>\\r\\n\\r\\n<div class=\\\"fulfillment-wrapper\\\">\\r\\n    <div class=\\\"order-lines\\\">\\r\\n        <table class=\\\"table\\\">\\r\\n            <thead>\\r\\n                <tr>\\r\\n                    <th></th>\\r\\n                    <th>{{ 'order.product-name' | translate }}</th>\\r\\n                    <th>{{ 'order.product-sku' | translate }}</th>\\r\\n                    <th>{{ 'order.quantity' | translate }}</th>\\r\\n                    <th>{{ 'order.unit-price' | translate }}</th>\\r\\n                    <th>{{ 'order.cancel' | translate }}</th>\\r\\n                </tr>\\r\\n            </thead>\\r\\n            <tr\\r\\n                *ngFor=\\\"let line of order.lines\\\"\\r\\n                class=\\\"order-line\\\"\\r\\n                [class.is-cancelled]=\\\"line.quantity === 0\\\"\\r\\n            >\\r\\n                <td class=\\\"align-middle thumb\\\">\\r\\n                    <img [src]=\\\"line.featuredAsset | assetPreview:'tiny'\\\" />\\r\\n                </td>\\r\\n                <td class=\\\"align-middle name\\\">{{ line.productVariant.name }}</td>\\r\\n                <td class=\\\"align-middle sku\\\">{{ line.productVariant.sku }}</td>\\r\\n                <td class=\\\"align-middle quantity\\\">{{ line.quantity }}</td>\\r\\n                <td class=\\\"align-middle quantity\\\">\\r\\n                    {{ line.unitPriceWithTax | localeCurrency: order.currencyCode }}\\r\\n                </td>\\r\\n                <td class=\\\"align-middle fulfil\\\">\\r\\n                    <input\\r\\n                        *ngIf=\\\"line.quantity > 0 && !order.active; else nonEditable\\\"\\r\\n                        [(ngModel)]=\\\"lineQuantities[line.id]\\\"\\r\\n                        type=\\\"number\\\"\\r\\n                        [max]=\\\"line.quantity\\\"\\r\\n                        min=\\\"0\\\"\\r\\n                    />\\r\\n                    <ng-template #nonEditable>{{ line.quantity }}</ng-template>\\r\\n                </td>\\r\\n            </tr>\\r\\n        </table>\\r\\n    </div>\\r\\n    <div class=\\\"cancellation-details\\\">\\r\\n        <label class=\\\"clr-control-label\\\">{{ 'order.cancellation-reason' | translate }}</label>\\r\\n        <ng-select\\r\\n            [items]=\\\"reasons\\\"\\r\\n            bindLabel=\\\"name\\\"\\r\\n            autofocus\\r\\n            bindValue=\\\"id\\\"\\r\\n            [addTag]=\\\"true\\\"\\r\\n            [(ngModel)]=\\\"reason\\\"\\r\\n        ></ng-select>\\r\\n    </div>\\r\\n</div>\\r\\n\\r\\n<ng-template vdrDialogButtons>\\r\\n    <button type=\\\"button\\\" class=\\\"btn\\\" (click)=\\\"cancel()\\\">{{ 'common.cancel' | translate }}</button>\\r\\n    <button\\r\\n        type=\\\"submit\\\"\\r\\n        (click)=\\\"select()\\\"\\r\\n        [disabled]=\\\"!reason || (!order.active && selectionCount === 0)\\\"\\r\\n        class=\\\"btn btn-primary\\\"\\r\\n    >\\r\\n        <ng-container *ngIf=\\\"!order.active\\\">\\r\\n            {{ 'order.cancel-selected-items' | translate }}\\r\\n        </ng-container>\\r\\n        <ng-container *ngIf=\\\"order.active\\\">\\r\\n            {{ 'order.cancel-order' | translate }}\\r\\n        </ng-container>\\r\\n    </button>\\r\\n</ng-template>\\r\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\":host{height:100%;display:flex;min-height:64vh}.fulfillment-wrapper{flex:1}@media screen and (min-width:768px){.fulfillment-wrapper{display:flex;flex-direction:row}}@media screen and (min-width:768px){.fulfillment-wrapper .cancellation-details{margin-top:0;margin-left:24px;width:250px}}.fulfillment-wrapper .order-lines{flex:1;overflow-y:auto}.fulfillment-wrapper .order-lines table{margin-top:0}.fulfillment-wrapper tr.ignore{color:var(--color-grey-300)}.fulfillment-wrapper .is-cancelled td{text-decoration:line-through;background-color:var(--color-component-bg-200)}\"]\n            }]\n    }], function () { return [{ type: ɵngcc1.I18nService }]; }, null); })();\n\nclass FulfillOrderDialogComponent {\r\n    constructor(dataService, changeDetector) {\r\n        this.dataService = dataService;\r\n        this.changeDetector = changeDetector;\r\n        this.fulfillmentHandlerControl = new FormControl();\r\n        this.fulfillmentQuantities = {};\r\n    }\r\n    ngOnInit() {\r\n        this.dataService.settings.getGlobalSettings().single$.subscribe(({ globalSettings }) => {\r\n            this.fulfillmentQuantities = this.order.lines.reduce((result, line) => {\r\n                const fulfillCount = this.getFulfillableCount(line, globalSettings.trackInventory);\r\n                return Object.assign(Object.assign({}, result), { [line.id]: { fulfillCount, max: fulfillCount } });\r\n            }, {});\r\n            this.changeDetector.markForCheck();\r\n        });\r\n        this.dataService.shippingMethod\r\n            .getShippingMethodOperations()\r\n            .mapSingle(data => data.fulfillmentHandlers)\r\n            .subscribe(handlers => {\r\n            this.fulfillmentHandlerDef =\r\n                handlers.find(h => { var _a, _b; return h.code === ((_b = (_a = this.order.shippingLines[0]) === null || _a === void 0 ? void 0 : _a.shippingMethod) === null || _b === void 0 ? void 0 : _b.fulfillmentHandlerCode); }) || handlers[0];\r\n            this.fulfillmentHandler = configurableDefinitionToInstance(this.fulfillmentHandlerDef);\r\n            this.fulfillmentHandlerControl.patchValue(this.fulfillmentHandler);\r\n            this.changeDetector.markForCheck();\r\n        });\r\n    }\r\n    getFulfillableCount(line, globalTrackInventory) {\r\n        const { trackInventory, stockOnHand } = line.productVariant;\r\n        const effectiveTracInventory = trackInventory === GlobalFlag.INHERIT ? globalTrackInventory : trackInventory === GlobalFlag.TRUE;\r\n        const unfulfilledCount = this.getUnfulfilledCount(line);\r\n        return effectiveTracInventory ? Math.min(unfulfilledCount, stockOnHand) : unfulfilledCount;\r\n    }\r\n    getUnfulfilledCount(line) {\r\n        const fulfilled = line.items.reduce((sum, item) => sum + (item.fulfillment ? 1 : 0), 0);\r\n        return line.quantity - fulfilled;\r\n    }\r\n    canSubmit() {\r\n        const totalCount = Object.values(this.fulfillmentQuantities).reduce((total, { fulfillCount }) => total + fulfillCount, 0);\r\n        const formIsValid = configurableOperationValueIsValid(this.fulfillmentHandlerDef, this.fulfillmentHandlerControl.value) && this.fulfillmentHandlerControl.valid;\r\n        return formIsValid && 0 < totalCount;\r\n    }\r\n    select() {\r\n        const lines = Object.entries(this.fulfillmentQuantities).map(([orderLineId, { fulfillCount }]) => ({\r\n            orderLineId,\r\n            quantity: fulfillCount,\r\n        }));\r\n        this.resolveWith({\r\n            lines,\r\n            handler: toConfigurableOperationInput(this.fulfillmentHandler, this.fulfillmentHandlerControl.value),\r\n        });\r\n    }\r\n    cancel() {\r\n        this.resolveWith();\r\n    }\r\n}\nFulfillOrderDialogComponent.ɵfac = function FulfillOrderDialogComponent_Factory(t) { return new (t || FulfillOrderDialogComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc1.DataService), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef)); };\nFulfillOrderDialogComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: FulfillOrderDialogComponent, selectors: [[\"vdr-fulfill-order-dialog\"]], decls: 34, vars: 29, consts: [[\"vdrDialogTitle\", \"\"], [1, \"fulfillment-wrapper\"], [1, \"order-table\"], [1, \"table\"], [\"class\", \"order-line\", 3, \"ignore\", 4, \"ngFor\", \"ngForOf\"], [1, \"shipping-details\"], [3, \"address\"], [3, \"operationDefinition\", \"operation\", \"formControl\", \"removable\"], [\"vdrDialogButtons\", \"\"], [1, \"order-line\"], [1, \"align-middle\", \"thumb\"], [3, \"src\", 4, \"ngIf\"], [1, \"align-middle\", \"name\"], [1, \"align-middle\", \"sku\"], [1, \"align-middle\", \"quantity\"], [1, \"align-middle\", \"fulfil\"], [\"type\", \"number\", \"min\", \"0\", 3, \"disabled\", \"ngModel\", \"max\", \"ngModelChange\", 4, \"ngIf\"], [3, \"src\"], [\"type\", \"number\", \"min\", \"0\", 3, \"disabled\", \"ngModel\", \"max\", \"ngModelChange\"], [\"type\", \"button\", 1, \"btn\", 3, \"click\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", 3, \"disabled\", \"click\"]], template: function FulfillOrderDialogComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵtemplate(0, FulfillOrderDialogComponent_ng_template_0_Template, 2, 3, \"ng-template\", 0);\n        ɵngcc0.ɵɵelementStart(1, \"div\", 1);\n        ɵngcc0.ɵɵelementStart(2, \"div\", 2);\n        ɵngcc0.ɵɵelementStart(3, \"table\", 3);\n        ɵngcc0.ɵɵelementStart(4, \"thead\");\n        ɵngcc0.ɵɵelementStart(5, \"tr\");\n        ɵngcc0.ɵɵelement(6, \"th\");\n        ɵngcc0.ɵɵelementStart(7, \"th\");\n        ɵngcc0.ɵɵtext(8);\n        ɵngcc0.ɵɵpipe(9, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(10, \"th\");\n        ɵngcc0.ɵɵtext(11);\n        ɵngcc0.ɵɵpipe(12, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(13, \"th\");\n        ɵngcc0.ɵɵtext(14);\n        ɵngcc0.ɵɵpipe(15, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(16, \"th\");\n        ɵngcc0.ɵɵtext(17);\n        ɵngcc0.ɵɵpipe(18, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(19, \"th\");\n        ɵngcc0.ɵɵtext(20);\n        ɵngcc0.ɵɵpipe(21, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵtemplate(22, FulfillOrderDialogComponent_tr_22_Template, 13, 8, \"tr\", 4);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(23, \"div\", 5);\n        ɵngcc0.ɵɵelement(24, \"vdr-formatted-address\", 6);\n        ɵngcc0.ɵɵelementStart(25, \"h6\");\n        ɵngcc0.ɵɵtext(26);\n        ɵngcc0.ɵɵpipe(27, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵtext(28);\n        ɵngcc0.ɵɵelementStart(29, \"strong\");\n        ɵngcc0.ɵɵtext(30);\n        ɵngcc0.ɵɵpipe(31, \"localeCurrency\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelement(32, \"vdr-configurable-input\", 7);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵtemplate(33, FulfillOrderDialogComponent_ng_template_33_Template, 6, 7, \"ng-template\", 8);\n    } if (rf & 2) {\n        ɵngcc0.ɵɵadvance(8);\n        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(9, 14, \"order.product-name\"));\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(12, 16, \"order.product-sku\"));\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(15, 18, \"order.unfulfilled\"));\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(18, 20, \"catalog.stock-on-hand\"));\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(21, 22, \"order.fulfill\"));\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"ngForOf\", ctx.order.lines);\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"address\", ctx.order.shippingAddress);\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(27, 24, \"order.shipping-method\"));\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵtextInterpolate1(\" \", ctx.order.shippingLines[0] == null ? null : ctx.order.shippingLines[0].shippingMethod == null ? null : ctx.order.shippingLines[0].shippingMethod.name, \" \");\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind2(31, 26, ctx.order.shipping, ctx.order.currencyCode));\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"operationDefinition\", ctx.fulfillmentHandlerDef)(\"operation\", ctx.fulfillmentHandler)(\"formControl\", ctx.fulfillmentHandlerControl)(\"removable\", false);\n    } }, directives: [ɵngcc1.DialogTitleDirective, ɵngcc5.NgForOf, ɵngcc1.FormattedAddressComponent, ɵngcc1.ConfigurableInputComponent, ɵngcc2.NgControlStatus, ɵngcc2.FormControlDirective, ɵngcc1.DialogButtonsDirective, ɵngcc5.NgIf, ɵngcc1.FormFieldControlDirective, ɵngcc2.NumberValueAccessor, ɵngcc2.DefaultValueAccessor, ɵngcc2.NgModel], pipes: [ɵngcc4.TranslatePipe, ɵngcc1.LocaleCurrencyPipe, ɵngcc1.AssetPreviewPipe], styles: [\"[_nghost-%COMP%]{height:100%;display:flex;min-height:64vh}.fulfillment-wrapper[_ngcontent-%COMP%]{flex:1}@media screen and (min-width:768px){.fulfillment-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:row}}.fulfillment-wrapper[_ngcontent-%COMP%]   .shipping-details[_ngcontent-%COMP%]{margin-top:24px}@media screen and (min-width:768px){.fulfillment-wrapper[_ngcontent-%COMP%]   .shipping-details[_ngcontent-%COMP%]{margin-top:0;margin-left:24px;width:250px}}.fulfillment-wrapper[_ngcontent-%COMP%]   .shipping-details[_ngcontent-%COMP%]   clr-input-container[_ngcontent-%COMP%]{margin-top:24px}.fulfillment-wrapper[_ngcontent-%COMP%]   .order-table[_ngcontent-%COMP%]{flex:1;overflow-y:auto}.fulfillment-wrapper[_ngcontent-%COMP%]   .order-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{margin-top:0}.fulfillment-wrapper[_ngcontent-%COMP%]   tr.ignore[_ngcontent-%COMP%]{color:var(--color-grey-300)}\"], changeDetection: 0 });\r\nFulfillOrderDialogComponent.ctorParameters = () => [\r\n    { type: DataService },\r\n    { type: ChangeDetectorRef }\r\n];\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(FulfillOrderDialogComponent, [{\n        type: Component,\n        args: [{\n                selector: 'vdr-fulfill-order-dialog',\n                template: \"<ng-template vdrDialogTitle>{{ 'order.fulfill-order' | translate }}</ng-template>\\r\\n\\r\\n<div class=\\\"fulfillment-wrapper\\\">\\r\\n    <div class=\\\"order-table\\\">\\r\\n        <table class=\\\"table\\\">\\r\\n            <thead>\\r\\n                <tr>\\r\\n                    <th></th>\\r\\n                    <th>{{ 'order.product-name' | translate }}</th>\\r\\n                    <th>{{ 'order.product-sku' | translate }}</th>\\r\\n                    <th>{{ 'order.unfulfilled' | translate }}</th>\\r\\n                    <th>{{ 'catalog.stock-on-hand' | translate }}</th>\\r\\n                    <th>{{ 'order.fulfill' | translate }}</th>\\r\\n                </tr>\\r\\n            </thead>\\r\\n            <tr\\r\\n                *ngFor=\\\"let line of order.lines\\\"\\r\\n                class=\\\"order-line\\\"\\r\\n                [class.ignore]=\\\"getUnfulfilledCount(line) === 0\\\"\\r\\n            >\\r\\n                <td class=\\\"align-middle thumb\\\">\\r\\n                    <img *ngIf=\\\"line.featuredAsset\\\" [src]=\\\"line.featuredAsset | assetPreview: 'tiny'\\\" />\\r\\n                </td>\\r\\n                <td class=\\\"align-middle name\\\">{{ line.productVariant.name }}</td>\\r\\n                <td class=\\\"align-middle sku\\\">{{ line.productVariant.sku }}</td>\\r\\n                <td class=\\\"align-middle quantity\\\">{{ getUnfulfilledCount(line) }}</td>\\r\\n                <td class=\\\"align-middle quantity\\\">{{ line.productVariant.stockOnHand }}</td>\\r\\n                <td class=\\\"align-middle fulfil\\\">\\r\\n                    <input\\r\\n                        *ngIf=\\\"fulfillmentQuantities[line.id]\\\"\\r\\n                        [disabled]=\\\"getUnfulfilledCount(line) === 0\\\"\\r\\n                        [(ngModel)]=\\\"fulfillmentQuantities[line.id].fulfillCount\\\"\\r\\n                        type=\\\"number\\\"\\r\\n                        [max]=\\\"fulfillmentQuantities[line.id].max\\\"\\r\\n                        min=\\\"0\\\"\\r\\n                    />\\r\\n                </td>\\r\\n            </tr>\\r\\n        </table>\\r\\n    </div>\\r\\n    <div class=\\\"shipping-details\\\">\\r\\n        <vdr-formatted-address [address]=\\\"order.shippingAddress\\\"></vdr-formatted-address>\\r\\n        <h6>{{ 'order.shipping-method' | translate }}</h6>\\r\\n        {{ order.shippingLines[0]?.shippingMethod?.name }}\\r\\n        <strong>{{ order.shipping | localeCurrency: order.currencyCode }}</strong>\\r\\n        <vdr-configurable-input\\r\\n            [operationDefinition]=\\\"fulfillmentHandlerDef\\\"\\r\\n            [operation]=\\\"fulfillmentHandler\\\"\\r\\n            [formControl]=\\\"fulfillmentHandlerControl\\\"\\r\\n            [removable]=\\\"false\\\"\\r\\n        ></vdr-configurable-input>\\r\\n    </div>\\r\\n</div>\\r\\n\\r\\n<ng-template vdrDialogButtons>\\r\\n    <button type=\\\"button\\\" class=\\\"btn\\\" (click)=\\\"cancel()\\\">{{ 'common.cancel' | translate }}</button>\\r\\n    <button type=\\\"submit\\\" (click)=\\\"select()\\\" [disabled]=\\\"!canSubmit()\\\" class=\\\"btn btn-primary\\\">\\r\\n        {{ 'order.create-fulfillment' | translate }}\\r\\n    </button>\\r\\n</ng-template>\\r\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\":host{height:100%;display:flex;min-height:64vh}.fulfillment-wrapper{flex:1}@media screen and (min-width:768px){.fulfillment-wrapper{display:flex;flex-direction:row}}.fulfillment-wrapper .shipping-details{margin-top:24px}@media screen and (min-width:768px){.fulfillment-wrapper .shipping-details{margin-top:0;margin-left:24px;width:250px}}.fulfillment-wrapper .shipping-details clr-input-container{margin-top:24px}.fulfillment-wrapper .order-table{flex:1;overflow-y:auto}.fulfillment-wrapper .order-table table{margin-top:0}.fulfillment-wrapper tr.ignore{color:var(--color-grey-300)}\"]\n            }]\n    }], function () { return [{ type: ɵngcc1.DataService }, { type: ɵngcc0.ChangeDetectorRef }]; }, null); })();\n\nclass FulfillmentCardComponent {\r\n    constructor() {\r\n        this.transitionState = new EventEmitter();\r\n    }\r\n    nextSuggestedState() {\r\n        var _a;\r\n        if (!this.fulfillment) {\r\n            return;\r\n        }\r\n        const { nextStates } = this.fulfillment;\r\n        const namedStateOrDefault = (targetState) => nextStates.includes(targetState) ? targetState : nextStates[0];\r\n        switch ((_a = this.fulfillment) === null || _a === void 0 ? void 0 : _a.state) {\r\n            case 'Pending':\r\n                return namedStateOrDefault('Shipped');\r\n            case 'Shipped':\r\n                return namedStateOrDefault('Delivered');\r\n            default:\r\n                return nextStates.find(s => s !== 'Cancelled');\r\n        }\r\n    }\r\n    nextOtherStates() {\r\n        if (!this.fulfillment) {\r\n            return [];\r\n        }\r\n        const suggested = this.nextSuggestedState();\r\n        return this.fulfillment.nextStates.filter(s => s !== suggested);\r\n    }\r\n}\nFulfillmentCardComponent.ɵfac = function FulfillmentCardComponent_Factory(t) { return new (t || FulfillmentCardComponent)(); };\nFulfillmentCardComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: FulfillmentCardComponent, selectors: [[\"vdr-fulfillment-card\"]], inputs: { fulfillment: \"fulfillment\", order: \"order\" }, outputs: { transitionState: \"transitionState\" }, decls: 10, vars: 6, consts: [[1, \"card\"], [1, \"card-header\", \"fulfillment-header\"], [1, \"fulfillment-state\"], [3, \"state\"], [1, \"card-block\"], [3, \"fulfillmentId\", \"order\", 4, \"ngIf\"], [\"class\", \"card-footer\", 4, \"ngIf\"], [3, \"fulfillmentId\", \"order\"], [1, \"card-footer\"], [4, \"ngIf\"], [\"vdrDropdownTrigger\", \"\", 1, \"icon-button\"], [\"shape\", \"ellipsis-vertical\"], [\"vdrPosition\", \"bottom-right\"], [4, \"ngFor\", \"ngForOf\"], [1, \"btn\", \"btn-sm\", \"btn-primary\", 3, \"click\"], [\"type\", \"button\", \"vdrDropdownItem\", \"\", 1, \"btn\", 3, \"click\"], [4, \"ngIf\", \"ngIfElse\"], [\"cancel\", \"\"], [\"shape\", \"step-forward-2\"], [\"shape\", \"error-standard\", 1, \"is-error\"]], template: function FulfillmentCardComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"div\", 0);\n        ɵngcc0.ɵɵelementStart(1, \"div\", 1);\n        ɵngcc0.ɵɵelementStart(2, \"div\");\n        ɵngcc0.ɵɵtext(3);\n        ɵngcc0.ɵɵpipe(4, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(5, \"div\", 2);\n        ɵngcc0.ɵɵelement(6, \"vdr-fulfillment-state-label\", 3);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(7, \"div\", 4);\n        ɵngcc0.ɵɵtemplate(8, FulfillmentCardComponent_vdr_fulfillment_detail_8_Template, 1, 2, \"vdr-fulfillment-detail\", 5);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵtemplate(9, FulfillmentCardComponent_div_9_Template, 7, 2, \"div\", 6);\n        ɵngcc0.ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(4, 4, \"order.fulfillment\"));\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵproperty(\"state\", ctx.fulfillment == null ? null : ctx.fulfillment.state);\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"ngIf\", !!ctx.fulfillment);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.fulfillment == null ? null : ctx.fulfillment.nextStates.length);\n    } }, directives: function () { return [FulfillmentStateLabelComponent, ɵngcc5.NgIf, FulfillmentDetailComponent, ɵngcc1.DropdownComponent, ɵngcc1.DropdownTriggerDirective, ɵngcc6.ClrIconCustomTag, ɵngcc1.DropdownMenuComponent, ɵngcc5.NgForOf, ɵngcc1.DropdownItemDirective]; }, pipes: function () { return [ɵngcc4.TranslatePipe, ɵngcc1.StateI18nTokenPipe]; }, styles: [\".fulfillment-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.card-footer[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-end}\"], changeDetection: 0 });\r\nFulfillmentCardComponent.propDecorators = {\r\n    fulfillment: [{ type: Input }],\r\n    order: [{ type: Input }],\r\n    transitionState: [{ type: Output }]\r\n};\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(FulfillmentCardComponent, [{\n        type: Component,\n        args: [{\n                selector: 'vdr-fulfillment-card',\n                template: \"<div class=\\\"card\\\">\\r\\n    <div class=\\\"card-header fulfillment-header\\\">\\r\\n        <div>{{ 'order.fulfillment' | translate }}</div>\\r\\n        <div class=\\\"fulfillment-state\\\">\\r\\n            <vdr-fulfillment-state-label [state]=\\\"fulfillment?.state\\\"></vdr-fulfillment-state-label>\\r\\n        </div>\\r\\n    </div>\\r\\n    <div class=\\\"card-block\\\">\\r\\n        <vdr-fulfillment-detail\\r\\n            *ngIf=\\\"!!fulfillment\\\"\\r\\n            [fulfillmentId]=\\\"fulfillment?.id\\\"\\r\\n            [order]=\\\"order\\\"\\r\\n        ></vdr-fulfillment-detail>\\r\\n    </div>\\r\\n    <div class=\\\"card-footer\\\" *ngIf=\\\"fulfillment?.nextStates.length\\\">\\r\\n        <ng-container *ngIf=\\\"nextSuggestedState() as suggestedState\\\">\\r\\n            <button class=\\\"btn btn-sm btn-primary\\\" (click)=\\\"transitionState.emit(suggestedState)\\\">\\r\\n                {{ 'order.set-fulfillment-state' | translate: { state: (suggestedState | stateI18nToken | translate) } }}\\r\\n            </button>\\r\\n        </ng-container>\\r\\n        <vdr-dropdown>\\r\\n            <button class=\\\"icon-button\\\" vdrDropdownTrigger>\\r\\n                <clr-icon shape=\\\"ellipsis-vertical\\\"></clr-icon>\\r\\n            </button>\\r\\n            <vdr-dropdown-menu vdrPosition=\\\"bottom-right\\\">\\r\\n                <ng-container *ngFor=\\\"let nextState of nextOtherStates()\\\">\\r\\n                    <button\\r\\n                        type=\\\"button\\\"\\r\\n                        class=\\\"btn\\\"\\r\\n                        vdrDropdownItem\\r\\n                        (click)=\\\"transitionState.emit(nextState)\\\"\\r\\n                    >\\r\\n                        <ng-container *ngIf=\\\"nextState !== 'Cancelled'; else cancel\\\">\\r\\n                            <clr-icon shape=\\\"step-forward-2\\\"></clr-icon>\\r\\n                            {{ 'order.transition-to-state' | translate: { state: (nextState | stateI18nToken | translate) } }}\\r\\n                        </ng-container>\\r\\n                        <ng-template #cancel>\\r\\n                            <clr-icon shape=\\\"error-standard\\\" class=\\\"is-error\\\"></clr-icon>\\r\\n                            {{ 'order.cancel-fulfillment' | translate }}\\r\\n                        </ng-template>\\r\\n                    </button>\\r\\n                </ng-container>\\r\\n            </vdr-dropdown-menu>\\r\\n        </vdr-dropdown>\\r\\n    </div>\\r\\n</div>\\r\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\".fulfillment-header{display:flex;justify-content:space-between;align-items:center}.card-footer{display:flex;align-items:center;justify-content:flex-end}\"]\n            }]\n    }], function () { return []; }, { transitionState: [{\n            type: Output\n        }], fulfillment: [{\n            type: Input\n        }], order: [{\n            type: Input\n        }] }); })();\n\nclass FulfillmentDetailComponent {\r\n    constructor(serverConfigService) {\r\n        this.serverConfigService = serverConfigService;\r\n        this.customFieldConfig = [];\r\n        this.customFieldFormGroup = new FormGroup({});\r\n    }\r\n    ngOnInit() {\r\n        this.customFieldConfig = this.serverConfigService.getCustomFieldsFor('Fulfillment');\r\n    }\r\n    ngOnChanges(changes) {\r\n        this.buildCustomFieldsFormGroup();\r\n    }\r\n    get fulfillment() {\r\n        return this.order.fulfillments && this.order.fulfillments.find(f => f.id === this.fulfillmentId);\r\n    }\r\n    get items() {\r\n        var _a;\r\n        const itemMap = new Map();\r\n        const fulfillmentItemIds = (_a = this.fulfillment) === null || _a === void 0 ? void 0 : _a.orderItems.map(i => i.id);\r\n        for (const line of this.order.lines) {\r\n            for (const item of line.items) {\r\n                if (fulfillmentItemIds === null || fulfillmentItemIds === void 0 ? void 0 : fulfillmentItemIds.includes(item.id)) {\r\n                    const count = itemMap.get(line.productVariant.name);\r\n                    if (count != null) {\r\n                        itemMap.set(line.productVariant.name, count + 1);\r\n                    }\r\n                    else {\r\n                        itemMap.set(line.productVariant.name, 1);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return Array.from(itemMap.entries()).map(([name, quantity]) => ({ name, quantity }));\r\n    }\r\n    buildCustomFieldsFormGroup() {\r\n        const customFields = this.fulfillment.customFields;\r\n        for (const fieldDef of this.serverConfigService.getCustomFieldsFor('Fulfillment')) {\r\n            this.customFieldFormGroup.addControl(fieldDef.name, new FormControl(customFields[fieldDef.name]));\r\n        }\r\n    }\r\n    customFieldIsObject(customField) {\r\n        return Array.isArray(customField) || isObject(customField);\r\n    }\r\n}\nFulfillmentDetailComponent.ɵfac = function FulfillmentDetailComponent_Factory(t) { return new (t || FulfillmentDetailComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc1.ServerConfigService)); };\nFulfillmentDetailComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: FulfillmentDetailComponent, selectors: [[\"vdr-fulfillment-detail\"]], inputs: { fulfillmentId: \"fulfillmentId\", order: \"order\" }, features: [ɵngcc0.ɵɵNgOnChangesFeature], decls: 12, vars: 17, consts: [[3, \"label\"], [3, \"label\", 4, \"ngIf\"], [3, \"items\"], [4, \"ngFor\", \"ngForOf\"], [3, \"readonly\", \"compact\", \"customField\", \"customFieldsFormGroup\", 4, \"ngIf\"], [3, \"readonly\", \"compact\", \"customField\", \"customFieldsFormGroup\"]], template: function FulfillmentDetailComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"vdr-labeled-data\", 0);\n        ɵngcc0.ɵɵpipe(1, \"translate\");\n        ɵngcc0.ɵɵtext(2);\n        ɵngcc0.ɵɵpipe(3, \"localeDate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(4, \"vdr-labeled-data\", 0);\n        ɵngcc0.ɵɵpipe(5, \"translate\");\n        ɵngcc0.ɵɵtext(6);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵtemplate(7, FulfillmentDetailComponent_vdr_labeled_data_7_Template, 3, 4, \"vdr-labeled-data\", 1);\n        ɵngcc0.ɵɵelementStart(8, \"vdr-labeled-data\", 0);\n        ɵngcc0.ɵɵpipe(9, \"translate\");\n        ɵngcc0.ɵɵelement(10, \"vdr-simple-item-list\", 2);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵtemplate(11, FulfillmentDetailComponent_ng_container_11_Template, 2, 1, \"ng-container\", 3);\n    } if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"label\", ɵngcc0.ɵɵpipeBind1(1, 8, \"common.created-at\"));\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind2(3, 10, ctx.fulfillment == null ? null : ctx.fulfillment.createdAt, \"medium\"), \"\\n\");\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"label\", ɵngcc0.ɵɵpipeBind1(5, 13, \"order.fulfillment-method\"));\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵtextInterpolate1(\" \", ctx.fulfillment == null ? null : ctx.fulfillment.method, \"\\n\");\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.fulfillment == null ? null : ctx.fulfillment.trackingCode);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"label\", ɵngcc0.ɵɵpipeBind1(9, 15, \"order.contents\"));\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"items\", ctx.items);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngForOf\", ctx.customFieldConfig);\n    } }, directives: function () { return [ɵngcc1.LabeledDataComponent, ɵngcc5.NgIf, SimpleItemListComponent, ɵngcc5.NgForOf, ɵngcc1.CustomFieldControlComponent]; }, pipes: function () { return [ɵngcc4.TranslatePipe, ɵngcc1.LocaleDatePipe]; }, styles: [\"\"], changeDetection: 0 });\r\nFulfillmentDetailComponent.ctorParameters = () => [\r\n    { type: ServerConfigService }\r\n];\r\nFulfillmentDetailComponent.propDecorators = {\r\n    fulfillmentId: [{ type: Input }],\r\n    order: [{ type: Input }]\r\n};\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(FulfillmentDetailComponent, [{\n        type: Component,\n        args: [{\n                selector: 'vdr-fulfillment-detail',\n                template: \"<vdr-labeled-data [label]=\\\"'common.created-at' | translate\\\">\\r\\n    {{ fulfillment?.createdAt | localeDate: 'medium' }}\\r\\n</vdr-labeled-data>\\r\\n<vdr-labeled-data [label]=\\\"'order.fulfillment-method' | translate\\\">\\r\\n    {{ fulfillment?.method }}\\r\\n</vdr-labeled-data>\\r\\n<vdr-labeled-data *ngIf=\\\"fulfillment?.trackingCode\\\" [label]=\\\"'order.tracking-code' | translate\\\">\\r\\n    {{ fulfillment?.trackingCode }}\\r\\n</vdr-labeled-data>\\r\\n<vdr-labeled-data [label]=\\\"'order.contents' | translate\\\">\\r\\n    <vdr-simple-item-list [items]=\\\"items\\\"></vdr-simple-item-list>\\r\\n</vdr-labeled-data>\\r\\n<ng-container *ngFor=\\\"let customField of customFieldConfig\\\">\\r\\n    <vdr-custom-field-control\\r\\n        *ngIf=\\\"customFieldFormGroup.get(customField.name)\\\"\\r\\n        [readonly]=\\\"true\\\"\\r\\n        [compact]=\\\"true\\\"\\r\\n        [customField]=\\\"customField\\\"\\r\\n        [customFieldsFormGroup]=\\\"customFieldFormGroup\\\"\\r\\n    ></vdr-custom-field-control>\\r\\n</ng-container>\\r\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\"\"]\n            }]\n    }], function () { return [{ type: ɵngcc1.ServerConfigService }]; }, { fulfillmentId: [{\n            type: Input\n        }], order: [{\n            type: Input\n        }] }); })();\n\nclass FulfillmentStateLabelComponent {\r\n    get chipColorType() {\r\n        switch (this.state) {\r\n            case 'Pending':\r\n            case 'Shipped':\r\n                return 'warning';\r\n            case 'Delivered':\r\n                return 'success';\r\n            case 'Cancelled':\r\n                return 'error';\r\n        }\r\n    }\r\n}\nFulfillmentStateLabelComponent.ɵfac = function FulfillmentStateLabelComponent_Factory(t) { return new (t || FulfillmentStateLabelComponent)(); };\nFulfillmentStateLabelComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: FulfillmentStateLabelComponent, selectors: [[\"vdr-fulfillment-state-label\"]], inputs: { state: \"state\" }, decls: 6, vars: 10, consts: [[3, \"title\", \"colorType\"], [\"shape\", \"check-circle\", 4, \"ngIf\"], [\"shape\", \"check-circle\"]], template: function FulfillmentStateLabelComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"vdr-chip\", 0);\n        ɵngcc0.ɵɵpipe(1, \"translate\");\n        ɵngcc0.ɵɵtemplate(2, FulfillmentStateLabelComponent_clr_icon_2_Template, 1, 0, \"clr-icon\", 1);\n        ɵngcc0.ɵɵtext(3);\n        ɵngcc0.ɵɵpipe(4, \"translate\");\n        ɵngcc0.ɵɵpipe(5, \"stateI18nToken\");\n        ɵngcc0.ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"title\", ɵngcc0.ɵɵpipeBind1(1, 4, \"order.payment-state\"))(\"colorType\", ctx.chipColorType);\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.state === \"Delivered\");\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(4, 6, ɵngcc0.ɵɵpipeBind1(5, 8, ctx.state)), \"\\n\");\n    } }, directives: [ɵngcc1.ChipComponent, ɵngcc5.NgIf, ɵngcc6.ClrIconCustomTag], pipes: [ɵngcc4.TranslatePipe, ɵngcc1.StateI18nTokenPipe], styles: [\"[_nghost-%COMP%]{font-size:14px}\"], changeDetection: 0 });\r\nFulfillmentStateLabelComponent.propDecorators = {\r\n    state: [{ type: Input }]\r\n};\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(FulfillmentStateLabelComponent, [{\n        type: Component,\n        args: [{\n                selector: 'vdr-fulfillment-state-label',\n                template: \"<vdr-chip [title]=\\\"'order.payment-state' | translate\\\" [colorType]=\\\"chipColorType\\\">\\r\\n    <clr-icon shape=\\\"check-circle\\\" *ngIf=\\\"state === 'Delivered'\\\"></clr-icon>\\r\\n    {{ state | stateI18nToken | translate }}\\r\\n</vdr-chip>\\r\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\":host{font-size:14px}\"]\n            }]\n    }], null, { state: [{\n            type: Input\n        }] }); })();\n\nclass LineFulfillmentComponent {\r\n    constructor() {\r\n        this.fulfilledCount = 0;\r\n        this.fulfillments = [];\r\n    }\r\n    ngOnChanges(changes) {\r\n        if (this.line) {\r\n            this.fulfilledCount = this.getDeliveredCount(this.line);\r\n            this.fulfillmentStatus = this.getFulfillmentStatus(this.fulfilledCount, this.line.items.length);\r\n            this.fulfillments = this.getFulfillments(this.line);\r\n        }\r\n    }\r\n    /**\r\n     * Returns the number of items in an OrderLine which are fulfilled.\r\n     */\r\n    getDeliveredCount(line) {\r\n        return line.items.reduce((sum, item) => sum + (item.fulfillment ? 1 : 0), 0);\r\n    }\r\n    getFulfillmentStatus(fulfilledCount, lineQuantity) {\r\n        if (fulfilledCount === lineQuantity) {\r\n            return 'full';\r\n        }\r\n        if (0 < fulfilledCount && fulfilledCount < lineQuantity) {\r\n            return 'partial';\r\n        }\r\n        return 'none';\r\n    }\r\n    getFulfillments(line) {\r\n        const counts = {};\r\n        for (const item of line.items) {\r\n            if (item.fulfillment) {\r\n                if (counts[item.fulfillment.id] === undefined) {\r\n                    counts[item.fulfillment.id] = 1;\r\n                }\r\n                else {\r\n                    counts[item.fulfillment.id]++;\r\n                }\r\n            }\r\n        }\r\n        const all = line.items.reduce((fulfillments, item) => {\r\n            return item.fulfillment ? [...fulfillments, item.fulfillment] : fulfillments;\r\n        }, []);\r\n        return Object.entries(counts).map(([id, count]) => {\r\n            return {\r\n                count,\r\n                // tslint:disable-next-line:no-non-null-assertion\r\n                fulfillment: all.find(f => f.id === id),\r\n            };\r\n        });\r\n    }\r\n}\nLineFulfillmentComponent.ɵfac = function LineFulfillmentComponent_Factory(t) { return new (t || LineFulfillmentComponent)(); };\nLineFulfillmentComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: LineFulfillmentComponent, selectors: [[\"vdr-line-fulfillment\"]], inputs: { line: \"line\", orderState: \"orderState\" }, features: [ɵngcc0.ɵɵNgOnChangesFeature], decls: 1, vars: 1, consts: [[\"class\", \"search-settings-menu\", 4, \"ngIf\"], [1, \"search-settings-menu\"], [\"type\", \"button\", \"vdrDropdownTrigger\", \"\", 1, \"icon-button\"], [\"class\", \"item-fulfilled\", \"shape\", \"check-circle\", 4, \"ngIf\"], [\"class\", \"item-partially-fulfilled\", \"shape\", \"check-circle\", 4, \"ngIf\"], [\"class\", \"item-not-fulfilled\", \"shape\", \"exclamation-circle\", 4, \"ngIf\"], [\"vdrPosition\", \"bottom-right\"], [\"class\", \"dropdown-header\", 4, \"ngIf\"], [\"class\", \"fulfillment-detail\", 4, \"ngFor\", \"ngForOf\"], [\"shape\", \"check-circle\", 1, \"item-fulfilled\"], [\"shape\", \"check-circle\", 1, \"item-partially-fulfilled\"], [\"shape\", \"exclamation-circle\", 1, \"item-not-fulfilled\"], [1, \"dropdown-header\"], [1, \"fulfillment-detail\"], [1, \"fulfillment-title\"], [3, \"label\"], [3, \"label\", 4, \"ngIf\"]], template: function LineFulfillmentComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵtemplate(0, LineFulfillmentComponent_vdr_dropdown_0_Template, 10, 7, \"vdr-dropdown\", 0);\n    } if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.fulfilledCount || ctx.orderState === \"PartiallyDelivered\");\n    } }, directives: [ɵngcc5.NgIf, ɵngcc1.DropdownComponent, ɵngcc1.DropdownTriggerDirective, ɵngcc1.DropdownMenuComponent, ɵngcc5.NgForOf, ɵngcc6.ClrIconCustomTag, ɵngcc6.ClrLabel, ɵngcc1.LabeledDataComponent], pipes: [ɵngcc4.TranslatePipe, ɵngcc1.LocaleDatePipe], styles: [\".item-fulfilled[_ngcontent-%COMP%]{color:var(--color-success-500)}.item-partially-fulfilled[_ngcontent-%COMP%]{color:var(--color-warning-500)}.item-not-fulfilled[_ngcontent-%COMP%]{color:var(--color-error-500)}.fulfillment-detail[_ngcontent-%COMP%]{margin:6px 12px}.fulfillment-detail[_ngcontent-%COMP%]:not(:last-of-type){border-bottom:1px dashed var(--color-component-border-200)}\"], changeDetection: 0 });\r\nLineFulfillmentComponent.propDecorators = {\r\n    line: [{ type: Input }],\r\n    orderState: [{ type: Input }]\r\n};\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(LineFulfillmentComponent, [{\n        type: Component,\n        args: [{\n                selector: 'vdr-line-fulfillment',\n                template: \"<vdr-dropdown class=\\\"search-settings-menu\\\" *ngIf=\\\"fulfilledCount || orderState === 'PartiallyDelivered'\\\">\\r\\n    <button type=\\\"button\\\" class=\\\"icon-button\\\" vdrDropdownTrigger>\\r\\n        <clr-icon *ngIf=\\\"fulfillmentStatus === 'full'\\\" class=\\\"item-fulfilled\\\" shape=\\\"check-circle\\\"></clr-icon>\\r\\n        <clr-icon\\r\\n            *ngIf=\\\"fulfillmentStatus === 'partial'\\\"\\r\\n            class=\\\"item-partially-fulfilled\\\"\\r\\n            shape=\\\"check-circle\\\"\\r\\n        ></clr-icon>\\r\\n        <clr-icon\\r\\n            *ngIf=\\\"fulfillmentStatus === 'none'\\\"\\r\\n            class=\\\"item-not-fulfilled\\\"\\r\\n            shape=\\\"exclamation-circle\\\"\\r\\n        ></clr-icon>\\r\\n    </button>\\r\\n    <vdr-dropdown-menu vdrPosition=\\\"bottom-right\\\">\\r\\n        <label class=\\\"dropdown-header\\\" *ngIf=\\\"fulfillmentStatus === 'full'\\\">\\r\\n            {{ 'order.line-fulfillment-all' | translate }}\\r\\n        </label>\\r\\n        <label class=\\\"dropdown-header\\\" *ngIf=\\\"fulfillmentStatus === 'partial'\\\">\\r\\n            {{\\r\\n                'order.line-fulfillment-partial' | translate: { total: line.quantity, count: fulfilledCount }\\r\\n            }}\\r\\n        </label>\\r\\n        <label class=\\\"dropdown-header\\\" *ngIf=\\\"fulfillmentStatus === 'none'\\\">\\r\\n            {{ 'order.line-fulfillment-none' | translate }}\\r\\n        </label>\\r\\n        <div class=\\\"fulfillment-detail\\\" *ngFor=\\\"let item of fulfillments\\\">\\r\\n            <div class=\\\"fulfillment-title\\\">\\r\\n                {{ 'order.fulfillment' | translate }} #{{ item.fulfillment.id }} ({{\\r\\n                    'order.item-count' | translate: { count: item.count }\\r\\n                }})\\r\\n            </div>\\r\\n            <vdr-labeled-data [label]=\\\"'common.created-at' | translate\\\">\\r\\n                {{ item.fulfillment.createdAt | localeDate: 'medium' }}\\r\\n            </vdr-labeled-data>\\r\\n            <vdr-labeled-data [label]=\\\"'order.fulfillment-method' | translate\\\">\\r\\n                {{ item.fulfillment.method }}\\r\\n            </vdr-labeled-data>\\r\\n            <vdr-labeled-data\\r\\n                *ngIf=\\\"item.fulfillment.trackingCode\\\"\\r\\n                [label]=\\\"'order.tracking-code' | translate\\\"\\r\\n            >\\r\\n                {{ item.fulfillment.trackingCode }}\\r\\n            </vdr-labeled-data>\\r\\n        </div>\\r\\n    </vdr-dropdown-menu>\\r\\n</vdr-dropdown>\\r\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\".item-fulfilled{color:var(--color-success-500)}.item-partially-fulfilled{color:var(--color-warning-500)}.item-not-fulfilled{color:var(--color-error-500)}.fulfillment-detail{margin:6px 12px}.fulfillment-detail:not(:last-of-type){border-bottom:1px dashed var(--color-component-border-200)}\"]\n            }]\n    }], function () { return []; }, { line: [{\n            type: Input\n        }], orderState: [{\n            type: Input\n        }] }); })();\n\nclass LineRefundsComponent {\r\n    getRefundedCount() {\r\n        var _a, _b;\r\n        const refunds = (_b = (_a = this.payments) === null || _a === void 0 ? void 0 : _a.reduce((all, payment) => [...all, ...payment.refunds], [])) !== null && _b !== void 0 ? _b : [];\r\n        return this.line.items.filter(i => {\r\n            if (i.refundId === null && !i.cancelled) {\r\n                return false;\r\n            }\r\n            if (i.refundId) {\r\n                const refund = refunds.find(r => r.id === i.refundId);\r\n                if ((refund === null || refund === void 0 ? void 0 : refund.state) === 'Failed') {\r\n                    return false;\r\n                }\r\n                else {\r\n                    return true;\r\n                }\r\n            }\r\n            return false;\r\n        }).length;\r\n    }\r\n}\nLineRefundsComponent.ɵfac = function LineRefundsComponent_Factory(t) { return new (t || LineRefundsComponent)(); };\nLineRefundsComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: LineRefundsComponent, selectors: [[\"vdr-line-refunds\"]], inputs: { line: \"line\", payments: \"payments\" }, decls: 1, vars: 1, consts: [[3, \"title\", 4, \"ngIf\"], [3, \"title\"], [\"shape\", \"redo\", \"dir\", \"down\", 1, \"is-solid\"]], template: function LineRefundsComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵtemplate(0, LineRefundsComponent_span_0_Template, 3, 6, \"span\", 0);\n    } if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.getRefundedCount());\n    } }, directives: [ɵngcc5.NgIf, ɵngcc6.ClrIconCustomTag, ɵngcc7.Dir], pipes: [ɵngcc4.TranslatePipe], styles: [\"[_nghost-%COMP%]{color:var(--color-error-500)}\"], changeDetection: 0 });\r\nLineRefundsComponent.propDecorators = {\r\n    line: [{ type: Input }],\r\n    payments: [{ type: Input }]\r\n};\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(LineRefundsComponent, [{\n        type: Component,\n        args: [{\n                selector: 'vdr-line-refunds',\n                template: \"<span *ngIf=\\\"getRefundedCount()\\\" [title]=\\\"'order.refunded-count' | translate: { count: getRefundedCount() }\\\">\\r\\n    <clr-icon shape=\\\"redo\\\" class=\\\"is-solid\\\" dir=\\\"down\\\"></clr-icon>\\r\\n</span>\\r\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\":host{color:var(--color-error-500)}\"]\n            }]\n    }], null, { line: [{\n            type: Input\n        }], payments: [{\n            type: Input\n        }] }); })();\n\nclass ModificationDetailComponent {\r\n    constructor() {\r\n        this.addedItems = new Map();\r\n        this.removedItems = new Map();\r\n    }\r\n    ngOnChanges() {\r\n        const { added, removed } = this.getModifiedLines();\r\n        this.addedItems = added;\r\n        this.removedItems = removed;\r\n    }\r\n    getSurcharge(id) {\r\n        return this.order.surcharges.find(m => m.id === id);\r\n    }\r\n    getAddedItems() {\r\n        return [...this.addedItems.entries()].map(([line, count]) => {\r\n            return { name: line.productVariant.name, quantity: count };\r\n        });\r\n    }\r\n    getRemovedItems() {\r\n        return [...this.removedItems.entries()].map(([line, count]) => {\r\n            return { name: line.productVariant.name, quantity: count };\r\n        });\r\n    }\r\n    getModifiedLines() {\r\n        var _a, _b;\r\n        const added = new Map();\r\n        const removed = new Map();\r\n        for (const _item of this.modification.orderItems || []) {\r\n            const result = this.getOrderLineAndItem(_item.id);\r\n            if (result) {\r\n                const { line, item } = result;\r\n                if (item.cancelled) {\r\n                    const count = (_a = removed.get(line)) !== null && _a !== void 0 ? _a : 0;\r\n                    removed.set(line, count + 1);\r\n                }\r\n                else {\r\n                    const count = (_b = added.get(line)) !== null && _b !== void 0 ? _b : 0;\r\n                    added.set(line, count + 1);\r\n                }\r\n            }\r\n        }\r\n        return { added, removed };\r\n    }\r\n    getOrderLineAndItem(itemId) {\r\n        for (const line of this.order.lines) {\r\n            const item = line.items.find(i => i.id === itemId);\r\n            if (item) {\r\n                return { line, item };\r\n            }\r\n        }\r\n    }\r\n}\nModificationDetailComponent.ɵfac = function ModificationDetailComponent_Factory(t) { return new (t || ModificationDetailComponent)(); };\nModificationDetailComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: ModificationDetailComponent, selectors: [[\"vdr-modification-detail\"]], inputs: { order: \"order\", modification: \"modification\" }, features: [ɵngcc0.ɵɵNgOnChangesFeature], decls: 7, vars: 8, consts: [[3, \"label\"], [3, \"label\", 4, \"ngIf\"], [3, \"label\", 4, \"ngFor\", \"ngForOf\"], [3, \"items\"]], template: function ModificationDetailComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"vdr-labeled-data\", 0);\n        ɵngcc0.ɵɵpipe(1, \"translate\");\n        ɵngcc0.ɵɵtext(2);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵtemplate(3, ModificationDetailComponent_vdr_labeled_data_3_Template, 3, 4, \"vdr-labeled-data\", 1);\n        ɵngcc0.ɵɵtemplate(4, ModificationDetailComponent_vdr_labeled_data_4_Template, 4, 8, \"vdr-labeled-data\", 2);\n        ɵngcc0.ɵɵtemplate(5, ModificationDetailComponent_vdr_labeled_data_5_Template, 3, 4, \"vdr-labeled-data\", 1);\n        ɵngcc0.ɵɵtemplate(6, ModificationDetailComponent_vdr_labeled_data_6_Template, 3, 4, \"vdr-labeled-data\", 1);\n    } if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"label\", ɵngcc0.ɵɵpipeBind1(1, 6, \"common.ID\"));\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵtextInterpolate(ctx.modification.id);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.modification.note);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngForOf\", ctx.modification.surcharges);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.getAddedItems().length);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.getRemovedItems().length);\n    } }, directives: function () { return [ɵngcc1.LabeledDataComponent, ɵngcc5.NgIf, ɵngcc5.NgForOf, SimpleItemListComponent]; }, pipes: function () { return [ɵngcc4.TranslatePipe, ɵngcc1.LocaleCurrencyPipe]; }, styles: [\"\"], changeDetection: 0 });\r\nModificationDetailComponent.propDecorators = {\r\n    order: [{ type: Input }],\r\n    modification: [{ type: Input }]\r\n};\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(ModificationDetailComponent, [{\n        type: Component,\n        args: [{\n                selector: 'vdr-modification-detail',\n                template: \"<vdr-labeled-data [label]=\\\"'common.ID' | translate\\\">{{ modification.id }}</vdr-labeled-data>\\r\\n<vdr-labeled-data *ngIf=\\\"modification.note\\\" [label]=\\\"'order.note' | translate\\\">{{\\r\\n    modification.note\\r\\n}}</vdr-labeled-data>\\r\\n<vdr-labeled-data *ngFor=\\\"let surcharge of modification.surcharges\\\" [label]=\\\"'order.surcharges' | translate\\\">\\r\\n    {{ getSurcharge(surcharge.id)?.description }}\\r\\n    {{ getSurcharge(surcharge.id)?.priceWithTax | localeCurrency: order.currencyCode }}</vdr-labeled-data\\r\\n>\\r\\n<vdr-labeled-data *ngIf=\\\"getAddedItems().length\\\" [label]=\\\"'order.added-items' | translate\\\">\\r\\n    <vdr-simple-item-list [items]=\\\"getAddedItems()\\\"></vdr-simple-item-list>\\r\\n</vdr-labeled-data>\\r\\n<vdr-labeled-data *ngIf=\\\"getRemovedItems().length\\\" [label]=\\\"'order.removed-items' | translate\\\">\\r\\n    <vdr-simple-item-list [items]=\\\"getRemovedItems()\\\"></vdr-simple-item-list>\\r\\n</vdr-labeled-data>\\r\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\"\"]\n            }]\n    }], function () { return []; }, { order: [{\n            type: Input\n        }], modification: [{\n            type: Input\n        }] }); })();\n\nclass OrderCustomFieldsCardComponent {\r\n    constructor(formBuilder) {\r\n        this.formBuilder = formBuilder;\r\n        this.customFieldsConfig = [];\r\n        this.customFieldValues = {};\r\n        this.updateClick = new EventEmitter();\r\n        this.editable = false;\r\n    }\r\n    ngOnInit() {\r\n        this.customFieldForm = this.formBuilder.group({});\r\n        for (const field of this.customFieldsConfig) {\r\n            this.customFieldForm.addControl(field.name, this.formBuilder.control(this.customFieldValues[field.name]));\r\n        }\r\n    }\r\n    onUpdateClick() {\r\n        this.updateClick.emit(this.customFieldForm.value);\r\n        this.customFieldForm.markAsPristine();\r\n        this.editable = false;\r\n    }\r\n}\nOrderCustomFieldsCardComponent.ɵfac = function OrderCustomFieldsCardComponent_Factory(t) { return new (t || OrderCustomFieldsCardComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc2.FormBuilder)); };\nOrderCustomFieldsCardComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: OrderCustomFieldsCardComponent, selectors: [[\"vdr-order-custom-fields-card\"]], inputs: { customFieldsConfig: \"customFieldsConfig\", customFieldValues: \"customFieldValues\" }, outputs: { updateClick: \"updateClick\" }, decls: 1, vars: 1, consts: [[\"class\", \"card\", 4, \"ngIf\"], [1, \"card\"], [1, \"card-header\"], [1, \"card-block\"], [1, \"card-text\", \"custom-field-form\"], [4, \"ngFor\", \"ngForOf\"], [1, \"card-footer\"], [\"class\", \"btn btn-sm btn-secondary\", 3, \"click\", 4, \"ngIf\"], [\"class\", \"btn btn-sm btn-primary\", 3, \"disabled\", \"click\", 4, \"ngIf\"], [\"entityName\", \"Order\", 3, \"customFieldsFormGroup\", \"compact\", \"readonly\", \"customField\"], [1, \"btn\", \"btn-sm\", \"btn-secondary\", 3, \"click\"], [\"shape\", \"pencil\"], [1, \"btn\", \"btn-sm\", \"btn-primary\", 3, \"disabled\", \"click\"], [\"shape\", \"check\"]], template: function OrderCustomFieldsCardComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵtemplate(0, OrderCustomFieldsCardComponent_div_0_Template, 10, 8, \"div\", 0);\n    } if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.customFieldsConfig.length);\n    } }, directives: [ɵngcc5.NgIf, ɵngcc5.NgForOf, ɵngcc1.CustomFieldControlComponent, ɵngcc6.ClrIconCustomTag], pipes: [ɵngcc4.TranslatePipe], styles: [\"vdr-custom-field-control[_ngcontent-%COMP%]{margin-bottom:6px;display:block}.custom-field-form[_ngcontent-%COMP%]     .clr-control-label{color:var(--color-grey-400)}.custom-field-form.editable[_ngcontent-%COMP%]     .clr-control-label{color:inherit}\"], changeDetection: 0 });\r\nOrderCustomFieldsCardComponent.ctorParameters = () => [\r\n    { type: FormBuilder }\r\n];\r\nOrderCustomFieldsCardComponent.propDecorators = {\r\n    customFieldsConfig: [{ type: Input }],\r\n    customFieldValues: [{ type: Input }],\r\n    updateClick: [{ type: Output }]\r\n};\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(OrderCustomFieldsCardComponent, [{\n        type: Component,\n        args: [{\n                selector: 'vdr-order-custom-fields-card',\n                template: \"<div class=\\\"card\\\" *ngIf=\\\"customFieldsConfig.length\\\">\\r\\n    <div class=\\\"card-header\\\">\\r\\n        {{ 'common.custom-fields' | translate }}\\r\\n    </div>\\r\\n    <div class=\\\"card-block\\\">\\r\\n        <div class=\\\"card-text custom-field-form\\\" [class.editable]=\\\"editable\\\">\\r\\n            <ng-container *ngFor=\\\"let customField of customFieldsConfig\\\">\\r\\n                <vdr-custom-field-control\\r\\n                    entityName=\\\"Order\\\"\\r\\n                    [customFieldsFormGroup]=\\\"customFieldForm\\\"\\r\\n                    [compact]=\\\"true\\\"\\r\\n                    [readonly]=\\\"customField.readonly || !editable\\\"\\r\\n                    [customField]=\\\"customField\\\"\\r\\n                ></vdr-custom-field-control>\\r\\n            </ng-container>\\r\\n        </div>\\r\\n    </div>\\r\\n    <div class=\\\"card-footer\\\">\\r\\n        <button class=\\\"btn btn-sm btn-secondary\\\" (click)=\\\"editable = true\\\" *ngIf=\\\"!editable\\\">\\r\\n            <clr-icon shape=\\\"pencil\\\"></clr-icon>\\r\\n            {{ 'common.edit' | translate }}\\r\\n        </button>\\r\\n        <button\\r\\n            class=\\\"btn btn-sm btn-primary\\\"\\r\\n            (click)=\\\"onUpdateClick()\\\"\\r\\n            *ngIf=\\\"editable\\\"\\r\\n            [disabled]=\\\"customFieldForm.pristine || customFieldForm.invalid\\\"\\r\\n        >\\r\\n            <clr-icon shape=\\\"check\\\"></clr-icon>\\r\\n            {{ 'common.update' | translate }}\\r\\n        </button>\\r\\n    </div>\\r\\n</div>\\r\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\"vdr-custom-field-control{margin-bottom:6px;display:block}.custom-field-form ::ng-deep .clr-control-label{color:var(--color-grey-400)}.custom-field-form.editable ::ng-deep .clr-control-label{color:inherit}\"]\n            }]\n    }], function () { return [{ type: ɵngcc2.FormBuilder }]; }, { customFieldsConfig: [{\n            type: Input\n        }], customFieldValues: [{\n            type: Input\n        }], updateClick: [{\n            type: Output\n        }] }); })();\n\nclass OrderStateSelectDialogComponent {\r\n    constructor() {\r\n        this.nextStates = [];\r\n        this.message = '';\r\n        this.selectedState = '';\r\n    }\r\n    select() {\r\n        if (this.selectedState) {\r\n            this.resolveWith(this.selectedState);\r\n        }\r\n    }\r\n    cancel() {\r\n        this.resolveWith();\r\n    }\r\n}\nOrderStateSelectDialogComponent.ɵfac = function OrderStateSelectDialogComponent_Factory(t) { return new (t || OrderStateSelectDialogComponent)(); };\nOrderStateSelectDialogComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: OrderStateSelectDialogComponent, selectors: [[\"vdr-order-state-select-dialog\"]], decls: 8, vars: 5, consts: [[\"vdrDialogTitle\", \"\"], [\"clrSelect\", \"\", \"name\", \"state\", 3, \"ngModel\", \"ngModelChange\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"vdrDialogButtons\", \"\"], [3, \"value\"], [\"type\", \"submit\", \"class\", \"btn btn-secondary\", 3, \"click\", 4, \"ngIf\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", 3, \"disabled\", \"click\"], [\"type\", \"submit\", 1, \"btn\", \"btn-secondary\", 3, \"click\"]], template: function OrderStateSelectDialogComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵtemplate(0, OrderStateSelectDialogComponent_ng_template_0_Template, 2, 3, \"ng-template\", 0);\n        ɵngcc0.ɵɵelementStart(1, \"p\");\n        ɵngcc0.ɵɵtext(2);\n        ɵngcc0.ɵɵpipe(3, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(4, \"clr-select-container\");\n        ɵngcc0.ɵɵelementStart(5, \"select\", 1);\n        ɵngcc0.ɵɵlistener(\"ngModelChange\", function OrderStateSelectDialogComponent_Template_select_ngModelChange_5_listener($event) { return ctx.selectedState = $event; });\n        ɵngcc0.ɵɵtemplate(6, OrderStateSelectDialogComponent_option_6_Template, 4, 6, \"option\", 2);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵtemplate(7, OrderStateSelectDialogComponent_ng_template_7_Template, 6, 12, \"ng-template\", 3);\n    } if (rf & 2) {\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(3, 3, ctx.message));\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵproperty(\"ngModel\", ctx.selectedState);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngForOf\", ctx.nextStates);\n    } }, directives: [ɵngcc1.DialogTitleDirective, ɵngcc6.ClrSelectContainer, ɵngcc1.FormFieldControlDirective, ɵngcc2.SelectControlValueAccessor, ɵngcc6.ClrSelect, ɵngcc2.NgControlStatus, ɵngcc2.NgModel, ɵngcc5.NgForOf, ɵngcc1.DialogButtonsDirective, ɵngcc2.NgSelectOption, ɵngcc2.ɵangular_packages_forms_forms_x, ɵngcc5.NgIf], pipes: [ɵngcc4.TranslatePipe, ɵngcc1.StateI18nTokenPipe], styles: [\"\"], changeDetection: 0 });\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(OrderStateSelectDialogComponent, [{\n        type: Component,\n        args: [{\n                selector: 'vdr-order-state-select-dialog',\n                template: \"<ng-template vdrDialogTitle>{{ 'order.select-state' | translate }}</ng-template>\\r\\n<p>{{ message | translate }}</p>\\r\\n<clr-select-container>\\r\\n    <select clrSelect name=\\\"state\\\" [(ngModel)]=\\\"selectedState\\\">\\r\\n        <option *ngFor=\\\"let state of nextStates\\\" [value]=\\\"state\\\">\\r\\n            {{ state | stateI18nToken | translate }}\\r\\n        </option>\\r\\n    </select>\\r\\n</clr-select-container>\\r\\n<ng-template vdrDialogButtons>\\r\\n    <button type=\\\"submit\\\" *ngIf=\\\"cancellable\\\" (click)=\\\"cancel()\\\" class=\\\"btn btn-secondary\\\">\\r\\n        {{ 'common.cancel' | translate }}\\r\\n    </button>\\r\\n    <button type=\\\"submit\\\" (click)=\\\"select()\\\" class=\\\"btn btn-primary\\\" [disabled]=\\\"!selectedState\\\">\\r\\n        {{ 'order.transition-to-state' | translate: { state: (selectedState | stateI18nToken | translate) } }}\\r\\n    </button>\\r\\n</ng-template>\\r\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\"\"]\n            }]\n    }], function () { return []; }, null); })();\n\nclass OrderTransitionService {\r\n    constructor(dataService, modalService, notificationService, i18nService) {\r\n        this.dataService = dataService;\r\n        this.modalService = modalService;\r\n        this.notificationService = notificationService;\r\n        this.i18nService = i18nService;\r\n    }\r\n    /**\r\n     * Attempts to transition the Order to the last state it was in before it was transitioned\r\n     * to the \"Modifying\" state. If this fails, a manual prompt is used.\r\n     */\r\n    transitionToPreModifyingState(orderId, nextStates) {\r\n        return this.getPreModifyingState(orderId).pipe(switchMap(state => {\r\n            const manualTransitionOptions = {\r\n                orderId,\r\n                nextStates,\r\n                message: this.i18nService.translate(marker('order.unable-to-transition-to-state-try-another'), { state }),\r\n                cancellable: false,\r\n                retry: 10,\r\n            };\r\n            if (state) {\r\n                return this.transitionToStateOrThrow(orderId, state).pipe(catchError(err => this.manuallyTransitionToState(manualTransitionOptions)));\r\n            }\r\n            else {\r\n                return this.manuallyTransitionToState(manualTransitionOptions);\r\n            }\r\n        }));\r\n    }\r\n    /**\r\n     * Displays a modal for manually selecting the next state.\r\n     */\r\n    manuallyTransitionToState(options) {\r\n        return this.modalService\r\n            .fromComponent(OrderStateSelectDialogComponent, {\r\n            locals: {\r\n                nextStates: options.nextStates,\r\n                cancellable: options.cancellable,\r\n                message: options.message,\r\n            },\r\n            closable: false,\r\n            size: 'md',\r\n        })\r\n            .pipe(switchMap(result => {\r\n            if (result) {\r\n                return this.transitionToStateOrThrow(options.orderId, result);\r\n            }\r\n            else {\r\n                if (!options.cancellable) {\r\n                    throw new Error(`An order state must be selected`);\r\n                }\r\n                else {\r\n                    return EMPTY;\r\n                }\r\n            }\r\n        }), retryWhen(errors => errors.pipe(delay(2000), take(options.retry))));\r\n    }\r\n    /**\r\n     * Attempts to get the last state the Order was in before it was transitioned\r\n     * to the \"Modifying\" state.\r\n     */\r\n    getPreModifyingState(orderId) {\r\n        return this.dataService.order\r\n            .getOrderHistory(orderId, {\r\n            filter: {\r\n                type: {\r\n                    eq: HistoryEntryType.ORDER_STATE_TRANSITION,\r\n                },\r\n            },\r\n            sort: {\r\n                createdAt: SortOrder.DESC,\r\n            },\r\n        })\r\n            .mapSingle(result => result.order)\r\n            .pipe(map(result => {\r\n            const item = result === null || result === void 0 ? void 0 : result.history.items.find(i => i.data.to === 'Modifying');\r\n            if (item) {\r\n                return item.data.from;\r\n            }\r\n            else {\r\n                return;\r\n            }\r\n        }));\r\n    }\r\n    transitionToStateOrThrow(orderId, state) {\r\n        return this.dataService.order.transitionToState(orderId, state).pipe(map(({ transitionOrderToState }) => {\r\n            switch (transitionOrderToState === null || transitionOrderToState === void 0 ? void 0 : transitionOrderToState.__typename) {\r\n                case 'Order':\r\n                    return transitionOrderToState === null || transitionOrderToState === void 0 ? void 0 : transitionOrderToState.state;\r\n                case 'OrderStateTransitionError':\r\n                    this.notificationService.error(transitionOrderToState === null || transitionOrderToState === void 0 ? void 0 : transitionOrderToState.transitionError);\r\n                    throw new Error(transitionOrderToState === null || transitionOrderToState === void 0 ? void 0 : transitionOrderToState.transitionError);\r\n            }\r\n        }));\r\n    }\r\n}\nOrderTransitionService.ɵfac = function OrderTransitionService_Factory(t) { return new (t || OrderTransitionService)(ɵngcc0.ɵɵinject(ɵngcc1.DataService), ɵngcc0.ɵɵinject(ɵngcc1.ModalService), ɵngcc0.ɵɵinject(ɵngcc1.NotificationService), ɵngcc0.ɵɵinject(ɵngcc1.I18nService)); };\r\nOrderTransitionService.ɵprov = ɵɵdefineInjectable({ factory: function OrderTransitionService_Factory() { return new OrderTransitionService(ɵɵinject(DataService), ɵɵinject(ModalService), ɵɵinject(NotificationService), ɵɵinject(I18nService)); }, token: OrderTransitionService, providedIn: \"root\" });\r\nOrderTransitionService.ctorParameters = () => [\r\n    { type: DataService },\r\n    { type: ModalService },\r\n    { type: NotificationService },\r\n    { type: I18nService }\r\n];\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(OrderTransitionService, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: ɵngcc1.DataService }, { type: ɵngcc1.ModalService }, { type: ɵngcc1.NotificationService }, { type: ɵngcc1.I18nService }]; }, null); })();\n\nclass OrderProcessGraphDialogComponent {\r\n    constructor(serverConfigService) {\r\n        this.serverConfigService = serverConfigService;\r\n        this.states = [];\r\n    }\r\n    ngOnInit() {\r\n        this.states = this.serverConfigService.getOrderProcessStates();\r\n    }\r\n}\nOrderProcessGraphDialogComponent.ɵfac = function OrderProcessGraphDialogComponent_Factory(t) { return new (t || OrderProcessGraphDialogComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc1.ServerConfigService)); };\nOrderProcessGraphDialogComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: OrderProcessGraphDialogComponent, selectors: [[\"vdr-order-process-graph-dialog\"]], decls: 2, vars: 2, consts: [[\"vdrDialogTitle\", \"\"], [3, \"states\", \"initialState\"]], template: function OrderProcessGraphDialogComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵtemplate(0, OrderProcessGraphDialogComponent_ng_template_0_Template, 2, 3, \"ng-template\", 0);\n        ɵngcc0.ɵɵelement(1, \"vdr-order-process-graph\", 1);\n    } if (rf & 2) {\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"states\", ctx.states)(\"initialState\", ctx.activeState);\n    } }, directives: function () { return [ɵngcc1.DialogTitleDirective, OrderProcessGraphComponent]; }, pipes: function () { return [ɵngcc4.TranslatePipe]; }, styles: [\"\"], changeDetection: 0 });\r\nOrderProcessGraphDialogComponent.ctorParameters = () => [\r\n    { type: ServerConfigService }\r\n];\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(OrderProcessGraphDialogComponent, [{\n        type: Component,\n        args: [{\n                selector: 'vdr-order-process-graph-dialog',\n                template: \"<ng-template vdrDialogTitle>{{ 'order.order-state-diagram' | translate }}</ng-template>\\r\\n\\r\\n<vdr-order-process-graph [states]=\\\"states\\\" [initialState]=\\\"activeState\\\"></vdr-order-process-graph>\\r\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\"\"]\n            }]\n    }], function () { return [{ type: ɵngcc1.ServerConfigService }]; }, null); })();\n\nclass RefundOrderDialogComponent {\r\n    constructor(i18nService) {\r\n        this.i18nService = i18nService;\r\n        this.lineQuantities = {};\r\n        this.refundShipping = false;\r\n        this.adjustment = 0;\r\n        this.reasons = [marker('order.refund-reason-customer-request'), marker('order.refund-reason-not-available')];\r\n        this.reasons = this.reasons.map(r => this.i18nService.translate(r));\r\n    }\r\n    get refundTotal() {\r\n        const itemTotal = this.order.lines.reduce((total, line) => {\r\n            const lineRef = this.lineQuantities[line.id];\r\n            const refundCount = (lineRef.refund && lineRef.quantity) || 0;\r\n            return total + line.proratedUnitPriceWithTax * refundCount;\r\n        }, 0);\r\n        return itemTotal + (this.refundShipping ? this.order.shippingWithTax : 0) + this.adjustment;\r\n    }\r\n    get settledPaymentsTotal() {\r\n        return this.settledPayments\r\n            .map(payment => {\r\n            const paymentTotal = payment.amount;\r\n            const alreadyRefundedTotal = summate(payment.refunds.filter(r => r.state !== 'Failed'), 'total');\r\n            return paymentTotal - alreadyRefundedTotal;\r\n        })\r\n            .reduce((sum, amount) => sum + amount, 0);\r\n    }\r\n    lineCanBeRefundedOrCancelled(line) {\r\n        var _a, _b;\r\n        const refunds = (_b = (_a = this.order.payments) === null || _a === void 0 ? void 0 : _a.reduce((all, payment) => [...all, ...payment.refunds], [])) !== null && _b !== void 0 ? _b : [];\r\n        const refundable = line.items.filter(i => {\r\n            if (i.cancelled) {\r\n                return false;\r\n            }\r\n            if (i.refundId == null) {\r\n                return true;\r\n            }\r\n            const refund = refunds.find(r => r.id === i.refundId);\r\n            return (refund === null || refund === void 0 ? void 0 : refund.state) === 'Failed';\r\n        });\r\n        return 0 < refundable.length;\r\n    }\r\n    ngOnInit() {\r\n        this.lineQuantities = this.order.lines.reduce((result, line) => {\r\n            return Object.assign(Object.assign({}, result), { [line.id]: {\r\n                    quantity: 0,\r\n                    refund: false,\r\n                    cancel: false,\r\n                } });\r\n        }, {});\r\n        this.settledPayments = (this.order.payments || []).filter(p => p.state === 'Settled');\r\n        if (this.settledPayments.length) {\r\n            this.selectedPayment = this.settledPayments[0];\r\n        }\r\n    }\r\n    handleZeroQuantity(line) {\r\n        if ((line === null || line === void 0 ? void 0 : line.quantity) === 0) {\r\n            line.cancel = false;\r\n            line.refund = false;\r\n        }\r\n    }\r\n    isRefunding() {\r\n        const result = Object.values(this.lineQuantities).reduce((isRefunding, line) => {\r\n            return isRefunding || (0 < line.quantity && line.refund);\r\n        }, false);\r\n        return result;\r\n    }\r\n    isCancelling() {\r\n        const result = Object.values(this.lineQuantities).reduce((isCancelling, line) => {\r\n            return isCancelling || (0 < line.quantity && line.cancel);\r\n        }, false);\r\n        return result;\r\n    }\r\n    canSubmit() {\r\n        if (this.isRefunding()) {\r\n            return !!(this.selectedPayment &&\r\n                this.reason &&\r\n                0 < this.refundTotal &&\r\n                this.refundTotal <= this.settledPaymentsTotal);\r\n        }\r\n        else if (this.isCancelling()) {\r\n            return !!this.reason;\r\n        }\r\n        return false;\r\n    }\r\n    select() {\r\n        const payment = this.selectedPayment;\r\n        if (payment) {\r\n            const refundLines = this.getOrderLineInput(line => line.refund);\r\n            const cancelLines = this.getOrderLineInput(line => line.cancel);\r\n            this.resolveWith({\r\n                refund: {\r\n                    lines: refundLines,\r\n                    reason: this.reason,\r\n                    shipping: this.refundShipping ? this.order.shippingWithTax : 0,\r\n                    adjustment: this.adjustment,\r\n                    paymentId: payment.id,\r\n                },\r\n                cancel: {\r\n                    lines: cancelLines,\r\n                    orderId: this.order.id,\r\n                    reason: this.reason,\r\n                },\r\n            });\r\n        }\r\n    }\r\n    cancel() {\r\n        this.resolveWith();\r\n    }\r\n    getOrderLineInput(filterFn) {\r\n        return Object.entries(this.lineQuantities)\r\n            .filter(([orderLineId, line]) => 0 < line.quantity && filterFn(line))\r\n            .map(([orderLineId, line]) => ({\r\n            orderLineId,\r\n            quantity: line.quantity,\r\n        }));\r\n    }\r\n}\nRefundOrderDialogComponent.ɵfac = function RefundOrderDialogComponent_Factory(t) { return new (t || RefundOrderDialogComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc1.I18nService)); };\nRefundOrderDialogComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: RefundOrderDialogComponent, selectors: [[\"vdr-refund-order-dialog\"]], decls: 69, vars: 74, consts: [[\"vdrDialogTitle\", \"\"], [1, \"refund-wrapper\"], [1, \"order-table\"], [1, \"table\"], [\"class\", \"order-line\", 4, \"ngFor\", \"ngForOf\"], [1, \"refund-details\", \"mt4\"], [1, \"clr-control-label\"], [\"bindLabel\", \"name\", \"autofocus\", \"\", \"bindValue\", \"id\", 3, \"disabled\", \"items\", \"placeholder\", \"addTag\", \"ngModel\", \"ngModelChange\"], [\"clrSelect\", \"\", \"name\", \"options\", 3, \"ngModel\", \"disabled\", \"ngModelChange\"], [3, \"ngValue\", \"disabled\", 4, \"ngFor\", \"ngForOf\"], [\"type\", \"checkbox\", \"clrCheckbox\", \"\", 3, \"ngModel\", \"disabled\", \"ngModelChange\"], [\"clrInput\", \"\", 3, \"disabled\", \"currencyCode\", \"ngModel\", \"ngModelChange\"], [1, \"totals\"], [1, \"order-total\"], [1, \"refund-total\"], [\"class\", \"refund-total-error\", 4, \"ngIf\"], [\"class\", \"refund-total-warning\", 4, \"ngIf\"], [\"vdrDialogButtons\", \"\"], [1, \"order-line\"], [1, \"align-middle\", \"thumb\"], [3, \"src\"], [1, \"align-middle\", \"name\"], [1, \"align-middle\", \"sku\"], [1, \"align-middle\", \"quantity\"], [3, \"line\", \"payments\"], [1, \"prorated-wrapper\"], [4, \"ngIf\"], [1, \"align-middle\", \"fulfil\"], [\"type\", \"number\", \"min\", \"0\", 3, \"ngModel\", \"max\", \"ngModelChange\", \"input\", 4, \"ngIf\"], [1, \"align-middle\"], [1, \"cancel-checkbox-wrapper\"], [\"type\", \"checkbox\", \"clrCheckbox\", \"\", 3, \"disabled\", \"ngModel\", \"ngModelChange\", 4, \"ngIf\"], [\"vdrDropdownTrigger\", \"\", 1, \"promotions-label\"], [1, \"icon-button\"], [\"shape\", \"info\"], [\"class\", \"line-promotion\", 4, \"ngFor\", \"ngForOf\"], [1, \"line-promotion\"], [1, \"promotion-amount\"], [\"type\", \"number\", \"min\", \"0\", 3, \"ngModel\", \"max\", \"ngModelChange\", \"input\"], [\"type\", \"checkbox\", \"clrCheckbox\", \"\", 3, \"disabled\", \"ngModel\", \"ngModelChange\"], [3, \"ngValue\", \"disabled\"], [1, \"refund-total-error\"], [1, \"refund-total-warning\"], [\"type\", \"button\", 1, \"btn\", 3, \"click\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", 3, \"disabled\", \"click\"], [4, \"ngIf\", \"ngIfElse\"], [\"cancelling\", \"\"]], template: function RefundOrderDialogComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵtemplate(0, RefundOrderDialogComponent_ng_template_0_Template, 2, 3, \"ng-template\", 0);\n        ɵngcc0.ɵɵelementStart(1, \"div\", 1);\n        ɵngcc0.ɵɵelementStart(2, \"div\", 2);\n        ɵngcc0.ɵɵelementStart(3, \"table\", 3);\n        ɵngcc0.ɵɵelementStart(4, \"thead\");\n        ɵngcc0.ɵɵelementStart(5, \"tr\");\n        ɵngcc0.ɵɵelement(6, \"th\");\n        ɵngcc0.ɵɵelementStart(7, \"th\");\n        ɵngcc0.ɵɵtext(8);\n        ɵngcc0.ɵɵpipe(9, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(10, \"th\");\n        ɵngcc0.ɵɵtext(11);\n        ɵngcc0.ɵɵpipe(12, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(13, \"th\");\n        ɵngcc0.ɵɵtext(14);\n        ɵngcc0.ɵɵpipe(15, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(16, \"th\");\n        ɵngcc0.ɵɵtext(17);\n        ɵngcc0.ɵɵpipe(18, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(19, \"th\");\n        ɵngcc0.ɵɵtext(20);\n        ɵngcc0.ɵɵpipe(21, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(22, \"th\");\n        ɵngcc0.ɵɵtext(23);\n        ɵngcc0.ɵɵpipe(24, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(25, \"th\");\n        ɵngcc0.ɵɵtext(26);\n        ɵngcc0.ɵɵpipe(27, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(28, \"th\");\n        ɵngcc0.ɵɵtext(29);\n        ɵngcc0.ɵɵpipe(30, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵtemplate(31, RefundOrderDialogComponent_tr_31_Template, 27, 21, \"tr\", 4);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(32, \"div\", 5);\n        ɵngcc0.ɵɵelementStart(33, \"div\");\n        ɵngcc0.ɵɵelementStart(34, \"label\", 6);\n        ɵngcc0.ɵɵtext(35);\n        ɵngcc0.ɵɵpipe(36, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(37, \"ng-select\", 7);\n        ɵngcc0.ɵɵlistener(\"ngModelChange\", function RefundOrderDialogComponent_Template_ng_select_ngModelChange_37_listener($event) { return ctx.reason = $event; });\n        ɵngcc0.ɵɵpipe(38, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(39, \"div\");\n        ɵngcc0.ɵɵelementStart(40, \"clr-select-container\");\n        ɵngcc0.ɵɵelementStart(41, \"label\");\n        ɵngcc0.ɵɵtext(42);\n        ɵngcc0.ɵɵpipe(43, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(44, \"select\", 8);\n        ɵngcc0.ɵɵlistener(\"ngModelChange\", function RefundOrderDialogComponent_Template_select_ngModelChange_44_listener($event) { return ctx.selectedPayment = $event; });\n        ɵngcc0.ɵɵtemplate(45, RefundOrderDialogComponent_option_45_Template, 3, 8, \"option\", 9);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(46, \"clr-checkbox-wrapper\");\n        ɵngcc0.ɵɵelementStart(47, \"input\", 10);\n        ɵngcc0.ɵɵlistener(\"ngModelChange\", function RefundOrderDialogComponent_Template_input_ngModelChange_47_listener($event) { return ctx.refundShipping = $event; });\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(48, \"label\");\n        ɵngcc0.ɵɵtext(49);\n        ɵngcc0.ɵɵpipe(50, \"translate\");\n        ɵngcc0.ɵɵpipe(51, \"localeCurrency\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(52, \"clr-input-container\");\n        ɵngcc0.ɵɵelementStart(53, \"label\");\n        ɵngcc0.ɵɵtext(54);\n        ɵngcc0.ɵɵpipe(55, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(56, \"vdr-currency-input\", 11);\n        ɵngcc0.ɵɵlistener(\"ngModelChange\", function RefundOrderDialogComponent_Template_vdr_currency_input_ngModelChange_56_listener($event) { return ctx.adjustment = $event; });\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(57, \"div\", 12);\n        ɵngcc0.ɵɵelementStart(58, \"div\", 13);\n        ɵngcc0.ɵɵtext(59);\n        ɵngcc0.ɵɵpipe(60, \"translate\");\n        ɵngcc0.ɵɵpipe(61, \"localeCurrency\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(62, \"div\", 14);\n        ɵngcc0.ɵɵtext(63);\n        ɵngcc0.ɵɵpipe(64, \"translate\");\n        ɵngcc0.ɵɵpipe(65, \"localeCurrency\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵtemplate(66, RefundOrderDialogComponent_div_66_Template, 5, 13, \"div\", 15);\n        ɵngcc0.ɵɵtemplate(67, RefundOrderDialogComponent_div_67_Template, 3, 3, \"div\", 16);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵtemplate(68, RefundOrderDialogComponent_ng_template_68_Template, 7, 6, \"ng-template\", 17);\n    } if (rf & 2) {\n        ɵngcc0.ɵɵadvance(8);\n        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(9, 35, \"order.product-name\"));\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(12, 37, \"order.product-sku\"));\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(15, 39, \"order.quantity\"));\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(18, 41, \"order.unit-price\"));\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(21, 43, \"order.prorated-unit-price\"));\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(24, 45, \"order.quantity\"));\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(27, 47, \"order.refund\"));\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(30, 49, \"order.cancel\"));\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"ngForOf\", ctx.order.lines);\n        ɵngcc0.ɵɵadvance(4);\n        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(36, 51, \"order.refund-cancellation-reason\"));\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"disabled\", !ctx.isRefunding() && !ctx.isCancelling())(\"items\", ctx.reasons)(\"placeholder\", ɵngcc0.ɵɵpipeBind1(38, 53, \"order.refund-cancellation-reason-required\"))(\"addTag\", true)(\"ngModel\", ctx.reason);\n        ɵngcc0.ɵɵadvance(5);\n        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(43, 55, \"order.payment-to-refund\"));\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"ngModel\", ctx.selectedPayment)(\"disabled\", !ctx.isRefunding());\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngForOf\", ctx.settledPayments);\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"ngModel\", ctx.refundShipping)(\"disabled\", !ctx.isRefunding());\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵtextInterpolate2(\" \", ɵngcc0.ɵɵpipeBind1(50, 57, \"order.refund-shipping\"), \" (\", ɵngcc0.ɵɵpipeBind2(51, 59, ctx.order.shippingWithTax, ctx.order.currencyCode), \") \");\n        ɵngcc0.ɵɵadvance(5);\n        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(55, 62, \"order.refund-adjustment\"));\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"disabled\", !ctx.isRefunding())(\"currencyCode\", ctx.order.currencyCode)(\"ngModel\", ctx.adjustment);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵclassProp(\"disabled\", !ctx.isRefunding());\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵtextInterpolate2(\" \", ɵngcc0.ɵɵpipeBind1(60, 64, \"order.payment-amount\"), \": \", ɵngcc0.ɵɵpipeBind2(61, 66, ctx.selectedPayment.amount, ctx.order.currencyCode), \" \");\n        ɵngcc0.ɵɵadvance(4);\n        ɵngcc0.ɵɵtextInterpolate2(\" \", ɵngcc0.ɵɵpipeBind1(64, 69, \"order.refund-total\"), \": \", ɵngcc0.ɵɵpipeBind2(65, 71, ctx.refundTotal, ctx.order.currencyCode), \" \");\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.refundTotal < 0 || ctx.settledPaymentsTotal < ctx.refundTotal);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.selectedPayment.amount < ctx.refundTotal);\n    } }, directives: [ɵngcc1.DialogTitleDirective, ɵngcc5.NgForOf, ɵngcc6.ClrLabel, ɵngcc3.NgSelectComponent, ɵngcc2.NgControlStatus, ɵngcc2.NgModel, ɵngcc6.ClrSelectContainer, ɵngcc1.FormFieldControlDirective, ɵngcc2.SelectControlValueAccessor, ɵngcc6.ClrSelect, ɵngcc6.ClrCheckboxWrapper, ɵngcc2.CheckboxControlValueAccessor, ɵngcc6.ClrCheckbox, ɵngcc6.ClrInputContainer, ɵngcc1.CurrencyInputComponent, ɵngcc6.ClrInput, ɵngcc5.NgIf, ɵngcc1.DialogButtonsDirective, LineRefundsComponent, ɵngcc1.DropdownComponent, ɵngcc1.DropdownTriggerDirective, ɵngcc6.ClrIconCustomTag, ɵngcc1.DropdownMenuComponent, ɵngcc2.NumberValueAccessor, ɵngcc2.DefaultValueAccessor, ɵngcc2.NgSelectOption, ɵngcc2.ɵangular_packages_forms_forms_x], pipes: [ɵngcc4.TranslatePipe, ɵngcc1.LocaleCurrencyPipe, ɵngcc1.AssetPreviewPipe, ɵngcc5.CurrencyPipe, ɵngcc5.DecimalPipe], styles: [\"[_nghost-%COMP%]{height:100%;display:flex;min-height:64vh}.refund-wrapper[_ngcontent-%COMP%]{flex:1;flex-direction:column}.refund-wrapper[_ngcontent-%COMP%]   .order-table[_ngcontent-%COMP%]{flex:1;overflow-y:auto}.refund-wrapper[_ngcontent-%COMP%]   .order-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{margin-top:0}.refund-wrapper[_ngcontent-%COMP%]   tr.ignore[_ngcontent-%COMP%]{color:var(--color-grey-300)}.cancel-checkbox-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}clr-checkbox-wrapper[_ngcontent-%COMP%]{margin-top:12px;margin-bottom:12px;display:block}.refund-details[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.totals[_ngcontent-%COMP%]{margin-top:48px}.totals[_ngcontent-%COMP%]   .refund-total[_ngcontent-%COMP%]{font-size:18px}.totals[_ngcontent-%COMP%]   .refund-total-error[_ngcontent-%COMP%]{color:var(--color-error-500)}.totals[_ngcontent-%COMP%]   .refund-total-warning[_ngcontent-%COMP%]{color:var(--color-warning-600);max-width:250px}.totals.disabled[_ngcontent-%COMP%]{color:var(--color-grey-300)}.prorated-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center}.line-promotion[_ngcontent-%COMP%]{display:flex;justify-content:space-between;font-size:12px;padding:3px 6px}.line-promotion[_ngcontent-%COMP%]   .promotion-amount[_ngcontent-%COMP%]{margin-left:12px}\"], changeDetection: 0 });\r\nRefundOrderDialogComponent.ctorParameters = () => [\r\n    { type: I18nService }\r\n];\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(RefundOrderDialogComponent, [{\n        type: Component,\n        args: [{\n                selector: 'vdr-refund-order-dialog',\n                template: \"<ng-template vdrDialogTitle>{{ 'order.refund-and-cancel-order' | translate }}</ng-template>\\r\\n\\r\\n<div class=\\\"refund-wrapper\\\">\\r\\n    <div class=\\\"order-table\\\">\\r\\n        <table class=\\\"table\\\">\\r\\n            <thead>\\r\\n                <tr>\\r\\n                    <th></th>\\r\\n                    <th>{{ 'order.product-name' | translate }}</th>\\r\\n                    <th>{{ 'order.product-sku' | translate }}</th>\\r\\n                    <th>{{ 'order.quantity' | translate }}</th>\\r\\n                    <th>{{ 'order.unit-price' | translate }}</th>\\r\\n                    <th>{{ 'order.prorated-unit-price' | translate }}</th>\\r\\n                    <th>{{ 'order.quantity' | translate }}</th>\\r\\n                    <th>{{ 'order.refund' | translate }}</th>\\r\\n                    <th>{{ 'order.cancel' | translate }}</th>\\r\\n                </tr>\\r\\n            </thead>\\r\\n            <tr *ngFor=\\\"let line of order.lines\\\" class=\\\"order-line\\\">\\r\\n                <td class=\\\"align-middle thumb\\\">\\r\\n                    <img [src]=\\\"line.featuredAsset | assetPreview: 'tiny'\\\" />\\r\\n                </td>\\r\\n                <td class=\\\"align-middle name\\\">{{ line.productVariant.name }}</td>\\r\\n                <td class=\\\"align-middle sku\\\">{{ line.productVariant.sku }}</td>\\r\\n                <td class=\\\"align-middle quantity\\\">\\r\\n                    {{ line.quantity }}\\r\\n                    <vdr-line-refunds [line]=\\\"line\\\" [payments]=\\\"order.payments\\\"></vdr-line-refunds>\\r\\n                </td>\\r\\n                <td class=\\\"align-middle quantity\\\">\\r\\n                    {{ line.unitPriceWithTax | localeCurrency: order.currencyCode }}\\r\\n                </td>\\r\\n                <td class=\\\"align-middle quantity\\\">\\r\\n                    <div class=\\\"prorated-wrapper\\\">\\r\\n                        {{ line.proratedUnitPriceWithTax | localeCurrency: order.currencyCode }}\\r\\n                        <ng-container *ngIf=\\\"line.discounts as discounts\\\">\\r\\n                            <vdr-dropdown *ngIf=\\\"discounts.length\\\">\\r\\n                                <div class=\\\"promotions-label\\\" vdrDropdownTrigger>\\r\\n                                    <button class=\\\"icon-button\\\"><clr-icon shape=\\\"info\\\"></clr-icon></button>\\r\\n                                </div>\\r\\n                                <vdr-dropdown-menu>\\r\\n                                    <div class=\\\"line-promotion\\\" *ngFor=\\\"let discount of discounts\\\">\\r\\n                                        {{ discount.description }}\\r\\n                                        <div class=\\\"promotion-amount\\\">\\r\\n                                            {{\\r\\n                                                discount.amount / 100 / line.quantity\\r\\n                                                    | number: '1.0-2'\\r\\n                                                    | currency: order.currencyCode\\r\\n                                            }}\\r\\n                                        </div>\\r\\n                                    </div>\\r\\n                                </vdr-dropdown-menu>\\r\\n                            </vdr-dropdown>\\r\\n                        </ng-container>\\r\\n                    </div>\\r\\n                </td>\\r\\n                <td class=\\\"align-middle fulfil\\\">\\r\\n                    <input\\r\\n                        *ngIf=\\\"lineCanBeRefundedOrCancelled(line)\\\"\\r\\n                        [(ngModel)]=\\\"lineQuantities[line.id].quantity\\\"\\r\\n                        type=\\\"number\\\"\\r\\n                        [max]=\\\"line.quantity\\\"\\r\\n                        min=\\\"0\\\"\\r\\n                        (input)=\\\"handleZeroQuantity(lineQuantities[line.id])\\\"\\r\\n                    />\\r\\n                </td>\\r\\n                <td class=\\\"align-middle\\\">\\r\\n                    <div class=\\\"cancel-checkbox-wrapper\\\">\\r\\n                        <input\\r\\n                            type=\\\"checkbox\\\"\\r\\n                            *ngIf=\\\"lineCanBeRefundedOrCancelled(line)\\\"\\r\\n                            clrCheckbox\\r\\n                            [disabled]=\\\"0 === lineQuantities[line.id].quantity\\\"\\r\\n                            [(ngModel)]=\\\"lineQuantities[line.id].refund\\\"\\r\\n                        />\\r\\n                    </div>\\r\\n                </td>\\r\\n                <td class=\\\"align-middle\\\">\\r\\n                    <div class=\\\"cancel-checkbox-wrapper\\\">\\r\\n                        <input\\r\\n                            type=\\\"checkbox\\\"\\r\\n                            *ngIf=\\\"lineCanBeRefundedOrCancelled(line)\\\"\\r\\n                            clrCheckbox\\r\\n                            [disabled]=\\\"0 === lineQuantities[line.id].quantity\\\"\\r\\n                            [(ngModel)]=\\\"lineQuantities[line.id].cancel\\\"\\r\\n                        />\\r\\n                    </div>\\r\\n                </td>\\r\\n            </tr>\\r\\n        </table>\\r\\n    </div>\\r\\n    <div class=\\\"refund-details mt4\\\">\\r\\n        <div>\\r\\n            <label class=\\\"clr-control-label\\\">{{ 'order.refund-cancellation-reason' | translate }}</label>\\r\\n            <ng-select\\r\\n                [disabled]=\\\"!isRefunding() && !isCancelling()\\\"\\r\\n                [items]=\\\"reasons\\\"\\r\\n                bindLabel=\\\"name\\\"\\r\\n                autofocus\\r\\n                [placeholder]=\\\"'order.refund-cancellation-reason-required' | translate\\\"\\r\\n                bindValue=\\\"id\\\"\\r\\n                [addTag]=\\\"true\\\"\\r\\n                [(ngModel)]=\\\"reason\\\"\\r\\n            ></ng-select>\\r\\n        </div>\\r\\n\\r\\n        <div>\\r\\n            <clr-select-container>\\r\\n                <label>{{ 'order.payment-to-refund' | translate }}</label>\\r\\n                <select clrSelect name=\\\"options\\\" [(ngModel)]=\\\"selectedPayment\\\" [disabled]=\\\"!isRefunding()\\\">\\r\\n                    <option\\r\\n                        *ngFor=\\\"let payment of settledPayments\\\"\\r\\n                        [ngValue]=\\\"payment\\\"\\r\\n                        [disabled]=\\\"payment.state !== 'Settled'\\\"\\r\\n                    >\\r\\n                        #{{ payment.id }} {{ payment.method }}:\\r\\n                        {{ payment.amount | localeCurrency: order.currencyCode }}\\r\\n                    </option>\\r\\n                </select>\\r\\n            </clr-select-container>\\r\\n\\r\\n            <clr-checkbox-wrapper>\\r\\n                <input type=\\\"checkbox\\\" clrCheckbox [(ngModel)]=\\\"refundShipping\\\" [disabled]=\\\"!isRefunding()\\\" />\\r\\n                <label>\\r\\n                    {{ 'order.refund-shipping' | translate }} ({{\\r\\n                        order.shippingWithTax | localeCurrency: order.currencyCode\\r\\n                    }})\\r\\n                </label>\\r\\n            </clr-checkbox-wrapper>\\r\\n            <clr-input-container>\\r\\n                <label>{{ 'order.refund-adjustment' | translate }}</label>\\r\\n                <vdr-currency-input\\r\\n                    clrInput\\r\\n                    [disabled]=\\\"!isRefunding()\\\"\\r\\n                    [currencyCode]=\\\"order.currencyCode\\\"\\r\\n                    [(ngModel)]=\\\"adjustment\\\"\\r\\n                ></vdr-currency-input>\\r\\n            </clr-input-container>\\r\\n            <div class=\\\"totals\\\" [class.disabled]=\\\"!isRefunding()\\\">\\r\\n                <div class=\\\"order-total\\\">\\r\\n                    {{ 'order.payment-amount' | translate }}:\\r\\n                    {{ selectedPayment.amount | localeCurrency: order.currencyCode }}\\r\\n                </div>\\r\\n                <div class=\\\"refund-total\\\">\\r\\n                    {{ 'order.refund-total' | translate }}:\\r\\n                    {{ refundTotal | localeCurrency: order.currencyCode }}\\r\\n                </div>\\r\\n                <div class=\\\"refund-total-error\\\" *ngIf=\\\"refundTotal < 0 || settledPaymentsTotal < refundTotal\\\">\\r\\n                    {{\\r\\n                        'order.refund-total-error'\\r\\n                            | translate\\r\\n                                : {\\r\\n                                      min: 0 | currency: order.currencyCode,\\r\\n                                      max: settledPaymentsTotal | localeCurrency: order.currencyCode\\r\\n                                  }\\r\\n                    }}\\r\\n                </div>\\r\\n                <div class=\\\"refund-total-warning\\\" *ngIf=\\\"selectedPayment.amount < refundTotal\\\">\\r\\n                    {{ 'order.refund-total-warning' | translate }}\\r\\n                </div>\\r\\n            </div>\\r\\n        </div>\\r\\n    </div>\\r\\n</div>\\r\\n\\r\\n<ng-template vdrDialogButtons>\\r\\n    <button type=\\\"button\\\" class=\\\"btn\\\" (click)=\\\"cancel()\\\">{{ 'common.cancel' | translate }}</button>\\r\\n    <button type=\\\"submit\\\" (click)=\\\"select()\\\" [disabled]=\\\"!canSubmit()\\\" class=\\\"btn btn-primary\\\">\\r\\n        <ng-container *ngIf=\\\"isRefunding(); else cancelling\\\">\\r\\n            {{\\r\\n                'order.refund-with-amount'\\r\\n                    | translate: { amount: refundTotal | localeCurrency: order.currencyCode }\\r\\n            }}\\r\\n        </ng-container>\\r\\n        <ng-template #cancelling>\\r\\n            {{ 'order.cancel-selected-items' | translate }}\\r\\n        </ng-template>\\r\\n    </button>\\r\\n</ng-template>\\r\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\":host{height:100%;display:flex;min-height:64vh}.refund-wrapper{flex:1;flex-direction:column}.refund-wrapper .order-table{flex:1;overflow-y:auto}.refund-wrapper .order-table table{margin-top:0}.refund-wrapper tr.ignore{color:var(--color-grey-300)}.cancel-checkbox-wrapper{display:flex;align-items:center;justify-content:center}clr-checkbox-wrapper{margin-top:12px;margin-bottom:12px;display:block}.refund-details{display:flex;justify-content:space-between}.totals{margin-top:48px}.totals .refund-total{font-size:18px}.totals .refund-total-error{color:var(--color-error-500)}.totals .refund-total-warning{color:var(--color-warning-600);max-width:250px}.totals.disabled{color:var(--color-grey-300)}.prorated-wrapper{display:flex;justify-content:center}.line-promotion{display:flex;justify-content:space-between;font-size:12px;padding:3px 6px}.line-promotion .promotion-amount{margin-left:12px}\"]\n            }]\n    }], function () { return [{ type: ɵngcc1.I18nService }]; }, null); })();\n\nclass SettleRefundDialogComponent {\r\n    constructor() {\r\n        this.transactionId = '';\r\n    }\r\n    submit() {\r\n        this.resolveWith(this.transactionId);\r\n    }\r\n    cancel() {\r\n        this.resolveWith();\r\n    }\r\n}\nSettleRefundDialogComponent.ɵfac = function SettleRefundDialogComponent_Factory(t) { return new (t || SettleRefundDialogComponent)(); };\nSettleRefundDialogComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: SettleRefundDialogComponent, selectors: [[\"vdr-settle-refund-dialog\"]], decls: 10, vars: 10, consts: [[\"vdrDialogTitle\", \"\"], [1, \"instruction\"], [\"clrInput\", \"\", \"name\", \"transactionId\", 3, \"ngModel\", \"ngModelChange\"], [\"vdrDialogButtons\", \"\"], [\"type\", \"button\", 1, \"btn\", 3, \"click\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", 3, \"disabled\", \"click\"]], template: function SettleRefundDialogComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵtemplate(0, SettleRefundDialogComponent_ng_template_0_Template, 2, 3, \"ng-template\", 0);\n        ɵngcc0.ɵɵelementStart(1, \"p\", 1);\n        ɵngcc0.ɵɵtext(2);\n        ɵngcc0.ɵɵpipe(3, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(4, \"clr-input-container\");\n        ɵngcc0.ɵɵelementStart(5, \"label\");\n        ɵngcc0.ɵɵtext(6);\n        ɵngcc0.ɵɵpipe(7, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(8, \"input\", 2);\n        ɵngcc0.ɵɵlistener(\"ngModelChange\", function SettleRefundDialogComponent_Template_input_ngModelChange_8_listener($event) { return ctx.transactionId = $event; });\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵtemplate(9, SettleRefundDialogComponent_ng_template_9_Template, 6, 7, \"ng-template\", 3);\n    } if (rf & 2) {\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind2(3, 3, \"order.settle-refund-manual-instructions\", ɵngcc0.ɵɵpureFunction1(8, _c5, ctx.refund.method)), \"\\n\");\n        ɵngcc0.ɵɵadvance(4);\n        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(7, 6, \"order.transaction-id\"));\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"ngModel\", ctx.transactionId);\n    } }, directives: [ɵngcc1.DialogTitleDirective, ɵngcc6.ClrInputContainer, ɵngcc6.ClrLabel, ɵngcc1.FormFieldControlDirective, ɵngcc2.DefaultValueAccessor, ɵngcc6.ClrInput, ɵngcc2.NgControlStatus, ɵngcc2.NgModel, ɵngcc1.DialogButtonsDirective], pipes: [ɵngcc4.TranslatePipe], styles: [\"[_nghost-%COMP%]{padding-bottom:32px}.instruction[_ngcontent-%COMP%]{margin-top:0;margin-bottom:24px}\"], changeDetection: 0 });\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(SettleRefundDialogComponent, [{\n        type: Component,\n        args: [{\n                selector: 'vdr-settle-refund-dialog',\n                template: \"<ng-template vdrDialogTitle>{{ 'order.settle-refund' | translate }}</ng-template>\\r\\n<p class=\\\"instruction\\\">\\r\\n    {{ 'order.settle-refund-manual-instructions' | translate: { method: refund.method } }}\\r\\n</p>\\r\\n<clr-input-container>\\r\\n    <label>{{ 'order.transaction-id' | translate }}</label>\\r\\n    <input clrInput name=\\\"transactionId\\\" [(ngModel)]=\\\"transactionId\\\" />\\r\\n</clr-input-container>\\r\\n\\r\\n<ng-template vdrDialogButtons>\\r\\n    <button type=\\\"button\\\" class=\\\"btn\\\" (click)=\\\"cancel()\\\">{{ 'common.cancel' | translate }}</button>\\r\\n    <button type=\\\"submit\\\" (click)=\\\"submit()\\\" [disabled]=\\\"!transactionId\\\" class=\\\"btn btn-primary\\\">\\r\\n        {{ 'order.settle-refund' | translate }}\\r\\n    </button>\\r\\n</ng-template>\\r\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\":host{padding-bottom:32px}.instruction{margin-top:0;margin-bottom:24px}\"]\n            }]\n    }], function () { return []; }, null); })();\n\nclass OrderDetailComponent extends BaseDetailComponent {\r\n    constructor(router, route, serverConfigService, changeDetector, dataService, notificationService, modalService, orderTransitionService) {\r\n        super(route, router, serverConfigService, dataService);\r\n        this.changeDetector = changeDetector;\r\n        this.dataService = dataService;\r\n        this.notificationService = notificationService;\r\n        this.modalService = modalService;\r\n        this.orderTransitionService = orderTransitionService;\r\n        this.detailForm = new FormGroup({});\r\n        this.fetchHistory = new Subject();\r\n        this.defaultStates = [\r\n            'AddingItems',\r\n            'ArrangingPayment',\r\n            'PaymentAuthorized',\r\n            'PaymentSettled',\r\n            'PartiallyShipped',\r\n            'Shipped',\r\n            'PartiallyDelivered',\r\n            'Delivered',\r\n            'Cancelled',\r\n            'Modifying',\r\n            'ArrangingAdditionalPayment',\r\n        ];\r\n    }\r\n    ngOnInit() {\r\n        this.init();\r\n        this.entity$.pipe(take(1)).subscribe(order => {\r\n            if (order.state === 'Modifying') {\r\n                this.router.navigate(['./', 'modify'], { relativeTo: this.route });\r\n            }\r\n        });\r\n        this.customFields = this.getCustomFieldConfig('Order');\r\n        this.orderLineCustomFields = this.getCustomFieldConfig('OrderLine');\r\n        this.history$ = this.fetchHistory.pipe(startWith(null), switchMap(() => {\r\n            return this.dataService.order\r\n                .getOrderHistory(this.id, {\r\n                sort: {\r\n                    createdAt: SortOrder.DESC,\r\n                },\r\n            })\r\n                .mapStream(data => { var _a; return (_a = data.order) === null || _a === void 0 ? void 0 : _a.history.items; });\r\n        }));\r\n        this.nextStates$ = this.entity$.pipe(map(order => {\r\n            const isInCustomState = !this.defaultStates.includes(order.state);\r\n            return isInCustomState\r\n                ? order.nextStates\r\n                : order.nextStates.filter(s => !this.defaultStates.includes(s));\r\n        }));\r\n    }\r\n    ngOnDestroy() {\r\n        this.destroy();\r\n    }\r\n    openStateDiagram() {\r\n        this.entity$\r\n            .pipe(take(1), switchMap(order => this.modalService.fromComponent(OrderProcessGraphDialogComponent, {\r\n            closable: true,\r\n            locals: {\r\n                activeState: order.state,\r\n            },\r\n        })))\r\n            .subscribe();\r\n    }\r\n    transitionToState(state) {\r\n        this.dataService.order.transitionToState(this.id, state).subscribe(({ transitionOrderToState }) => {\r\n            switch (transitionOrderToState === null || transitionOrderToState === void 0 ? void 0 : transitionOrderToState.__typename) {\r\n                case 'Order':\r\n                    this.notificationService.success(marker('order.transitioned-to-state-success'), { state });\r\n                    this.fetchHistory.next();\r\n                    break;\r\n                case 'OrderStateTransitionError':\r\n                    this.notificationService.error(transitionOrderToState.transitionError);\r\n            }\r\n        });\r\n    }\r\n    manuallyTransitionToState(order) {\r\n        this.orderTransitionService\r\n            .manuallyTransitionToState({\r\n            orderId: order.id,\r\n            nextStates: order.nextStates,\r\n            cancellable: true,\r\n            message: marker('order.manually-transition-to-state-message'),\r\n            retry: 0,\r\n        })\r\n            .subscribe();\r\n    }\r\n    transitionToModifying() {\r\n        this.dataService.order\r\n            .transitionToState(this.id, 'Modifying')\r\n            .subscribe(({ transitionOrderToState }) => {\r\n            switch (transitionOrderToState === null || transitionOrderToState === void 0 ? void 0 : transitionOrderToState.__typename) {\r\n                case 'Order':\r\n                    this.router.navigate(['./modify'], { relativeTo: this.route });\r\n                    break;\r\n                case 'OrderStateTransitionError':\r\n                    this.notificationService.error(transitionOrderToState.transitionError);\r\n            }\r\n        });\r\n    }\r\n    updateCustomFields(customFieldsValue) {\r\n        this.dataService.order\r\n            .updateOrderCustomFields({\r\n            id: this.id,\r\n            customFields: customFieldsValue,\r\n        })\r\n            .subscribe(() => {\r\n            this.notificationService.success(marker('common.notify-update-success'), { entity: 'Order' });\r\n        });\r\n    }\r\n    getOrderAddressLines(orderAddress) {\r\n        if (!orderAddress) {\r\n            return [];\r\n        }\r\n        return Object.values(orderAddress)\r\n            .filter(val => val !== 'OrderAddress')\r\n            .filter(line => !!line);\r\n    }\r\n    settlePayment(payment) {\r\n        this.dataService.order.settlePayment(payment.id).subscribe(({ settlePayment }) => {\r\n            switch (settlePayment.__typename) {\r\n                case 'Payment':\r\n                    if (settlePayment.state === 'Settled') {\r\n                        this.notificationService.success(marker('order.settle-payment-success'));\r\n                    }\r\n                    else {\r\n                        this.notificationService.error(marker('order.settle-payment-error'));\r\n                    }\r\n                    this.dataService.order.getOrder(this.id).single$.subscribe();\r\n                    this.fetchHistory.next();\r\n                    break;\r\n                case 'OrderStateTransitionError':\r\n                case 'PaymentStateTransitionError':\r\n                case 'SettlePaymentError':\r\n                    this.notificationService.error(settlePayment.message);\r\n            }\r\n        });\r\n    }\r\n    transitionPaymentState({ payment, state }) {\r\n        this.dataService.order\r\n            .transitionPaymentToState(payment.id, state)\r\n            .subscribe(({ transitionPaymentToState }) => {\r\n            switch (transitionPaymentToState.__typename) {\r\n                case 'Payment':\r\n                    this.notificationService.success(marker('order.transitioned-payment-to-state-success'), {\r\n                        state,\r\n                    });\r\n                    this.dataService.order.getOrder(this.id).single$.subscribe();\r\n                    this.fetchHistory.next();\r\n                    break;\r\n                case 'PaymentStateTransitionError':\r\n                    this.notificationService.error(transitionPaymentToState.message);\r\n                    break;\r\n            }\r\n        });\r\n    }\r\n    canAddFulfillment(order) {\r\n        const allItemsFulfilled = order.lines\r\n            .reduce((items, line) => [...items, ...line.items], [])\r\n            .every(item => !!item.fulfillment);\r\n        return (!allItemsFulfilled &&\r\n            !this.hasUnsettledModifications(order) &&\r\n            this.outstandingPaymentAmount(order) === 0 &&\r\n            (order.nextStates.includes('Shipped') ||\r\n                order.nextStates.includes('PartiallyShipped') ||\r\n                order.nextStates.includes('Delivered')));\r\n    }\r\n    hasUnsettledModifications(order) {\r\n        return 0 < order.modifications.filter(m => !m.isSettled).length;\r\n    }\r\n    getOutstandingModificationAmount(order) {\r\n        return summate(order.modifications.filter(m => !m.isSettled), 'priceChange');\r\n    }\r\n    outstandingPaymentAmount(order) {\r\n        var _a, _b, _c;\r\n        const paymentIsValid = (p) => p.state !== 'Cancelled' && p.state !== 'Declined' && p.state !== 'Error';\r\n        let amountCovered = 0;\r\n        for (const payment of (_b = (_a = order.payments) === null || _a === void 0 ? void 0 : _a.filter(paymentIsValid)) !== null && _b !== void 0 ? _b : []) {\r\n            const refunds = (_c = payment.refunds.filter(r => r.state !== 'Failed')) !== null && _c !== void 0 ? _c : [];\r\n            const refundsTotal = summate(refunds, 'total');\r\n            amountCovered += payment.amount - refundsTotal;\r\n        }\r\n        return order.totalWithTax - amountCovered;\r\n    }\r\n    addManualPayment(order) {\r\n        this.modalService\r\n            .fromComponent(AddManualPaymentDialogComponent, {\r\n            closable: true,\r\n            locals: {\r\n                outstandingAmount: this.outstandingPaymentAmount(order),\r\n                currencyCode: order.currencyCode,\r\n            },\r\n        })\r\n            .pipe(switchMap(result => {\r\n            if (result) {\r\n                return this.dataService.order.addManualPaymentToOrder({\r\n                    orderId: this.id,\r\n                    transactionId: result.transactionId,\r\n                    method: result.method,\r\n                    metadata: result.metadata || {},\r\n                });\r\n            }\r\n            else {\r\n                return EMPTY;\r\n            }\r\n        }), switchMap(({ addManualPaymentToOrder }) => {\r\n            switch (addManualPaymentToOrder.__typename) {\r\n                case 'Order':\r\n                    this.notificationService.success(marker('order.add-payment-to-order-success'));\r\n                    return this.orderTransitionService.transitionToPreModifyingState(order.id, order.nextStates);\r\n                case 'ManualPaymentStateError':\r\n                    this.notificationService.error(addManualPaymentToOrder.message);\r\n                    return EMPTY;\r\n                default:\r\n                    return EMPTY;\r\n            }\r\n        }))\r\n            .subscribe(result => {\r\n            if (result) {\r\n                this.refetchOrder({ result });\r\n            }\r\n        });\r\n    }\r\n    fulfillOrder() {\r\n        this.entity$\r\n            .pipe(take(1), switchMap(order => {\r\n            return this.modalService.fromComponent(FulfillOrderDialogComponent, {\r\n                size: 'xl',\r\n                locals: {\r\n                    order,\r\n                },\r\n            });\r\n        }), switchMap(input => {\r\n            if (input) {\r\n                return this.dataService.order.createFulfillment(input);\r\n            }\r\n            else {\r\n                return of(undefined);\r\n            }\r\n        }), switchMap(result => this.refetchOrder(result).pipe(mapTo(result))))\r\n            .subscribe(result => {\r\n            if (result) {\r\n                const { addFulfillmentToOrder } = result;\r\n                switch (addFulfillmentToOrder.__typename) {\r\n                    case 'Fulfillment':\r\n                        this.notificationService.success(marker('order.create-fulfillment-success'));\r\n                        break;\r\n                    case 'EmptyOrderLineSelectionError':\r\n                    case 'InsufficientStockOnHandError':\r\n                    case 'ItemsAlreadyFulfilledError':\r\n                    case 'InvalidFulfillmentHandlerError':\r\n                        this.notificationService.error(addFulfillmentToOrder.message);\r\n                        break;\r\n                    case 'FulfillmentStateTransitionError':\r\n                        this.notificationService.error(addFulfillmentToOrder.transitionError);\r\n                        break;\r\n                    case 'CreateFulfillmentError':\r\n                        this.notificationService.error(addFulfillmentToOrder.fulfillmentHandlerError);\r\n                        break;\r\n                    case undefined:\r\n                        this.notificationService.error(JSON.stringify(addFulfillmentToOrder));\r\n                        break;\r\n                    default:\r\n                        assertNever(addFulfillmentToOrder);\r\n                }\r\n            }\r\n        });\r\n    }\r\n    transitionFulfillment(id, state) {\r\n        this.dataService.order\r\n            .transitionFulfillmentToState(id, state)\r\n            .pipe(switchMap(result => this.refetchOrder(result)))\r\n            .subscribe(() => {\r\n            this.notificationService.success(marker('order.successfully-updated-fulfillment'));\r\n        });\r\n    }\r\n    cancelOrRefund(order) {\r\n        const isRefundable = this.orderHasSettledPayments(order);\r\n        if (order.state === 'PaymentAuthorized' || order.active === true || !isRefundable) {\r\n            this.cancelOrder(order);\r\n        }\r\n        else {\r\n            this.refundOrder(order);\r\n        }\r\n    }\r\n    settleRefund(refund) {\r\n        this.modalService\r\n            .fromComponent(SettleRefundDialogComponent, {\r\n            size: 'md',\r\n            locals: {\r\n                refund,\r\n            },\r\n        })\r\n            .pipe(switchMap(transactionId => {\r\n            if (transactionId) {\r\n                return this.dataService.order.settleRefund({\r\n                    transactionId,\r\n                    id: refund.id,\r\n                }, this.id);\r\n            }\r\n            else {\r\n                return of(undefined);\r\n            }\r\n        }))\r\n            .subscribe(result => {\r\n            if (result) {\r\n                this.notificationService.success(marker('order.settle-refund-success'));\r\n            }\r\n        });\r\n    }\r\n    addNote(event) {\r\n        const { note, isPublic } = event;\r\n        this.dataService.order\r\n            .addNoteToOrder({\r\n            id: this.id,\r\n            note,\r\n            isPublic,\r\n        })\r\n            .pipe(switchMap(result => this.refetchOrder(result)))\r\n            .subscribe(result => {\r\n            this.notificationService.success(marker('common.notify-create-success'), {\r\n                entity: 'Note',\r\n            });\r\n        });\r\n    }\r\n    updateNote(entry) {\r\n        this.modalService\r\n            .fromComponent(EditNoteDialogComponent, {\r\n            closable: true,\r\n            locals: {\r\n                displayPrivacyControls: true,\r\n                note: entry.data.note,\r\n                noteIsPrivate: !entry.isPublic,\r\n            },\r\n        })\r\n            .pipe(switchMap(result => {\r\n            if (result) {\r\n                return this.dataService.order.updateOrderNote({\r\n                    noteId: entry.id,\r\n                    isPublic: !result.isPrivate,\r\n                    note: result.note,\r\n                });\r\n            }\r\n            else {\r\n                return EMPTY;\r\n            }\r\n        }))\r\n            .subscribe(result => {\r\n            this.fetchHistory.next();\r\n            this.notificationService.success(marker('common.notify-update-success'), {\r\n                entity: 'Note',\r\n            });\r\n        });\r\n    }\r\n    deleteNote(entry) {\r\n        return this.modalService\r\n            .dialog({\r\n            title: marker('common.confirm-delete-note'),\r\n            body: entry.data.note,\r\n            buttons: [\r\n                { type: 'secondary', label: marker('common.cancel') },\r\n                { type: 'danger', label: marker('common.delete'), returnValue: true },\r\n            ],\r\n        })\r\n            .pipe(switchMap(res => (res ? this.dataService.order.deleteOrderNote(entry.id) : EMPTY)))\r\n            .subscribe(() => {\r\n            this.fetchHistory.next();\r\n            this.notificationService.success(marker('common.notify-delete-success'), {\r\n                entity: 'Note',\r\n            });\r\n        });\r\n    }\r\n    orderHasSettledPayments(order) {\r\n        var _a;\r\n        return !!((_a = order.payments) === null || _a === void 0 ? void 0 : _a.find(p => p.state === 'Settled'));\r\n    }\r\n    cancelOrder(order) {\r\n        this.modalService\r\n            .fromComponent(CancelOrderDialogComponent, {\r\n            size: 'xl',\r\n            locals: {\r\n                order,\r\n            },\r\n        })\r\n            .pipe(switchMap(input => {\r\n            if (input) {\r\n                return this.dataService.order.cancelOrder(input);\r\n            }\r\n            else {\r\n                return of(undefined);\r\n            }\r\n        }), switchMap(result => this.refetchOrder(result)))\r\n            .subscribe(result => {\r\n            if (result) {\r\n                this.notificationService.success(marker('order.cancelled-order-success'));\r\n            }\r\n        });\r\n    }\r\n    refundOrder(order) {\r\n        this.modalService\r\n            .fromComponent(RefundOrderDialogComponent, {\r\n            size: 'xl',\r\n            locals: {\r\n                order,\r\n            },\r\n        })\r\n            .pipe(switchMap(input => {\r\n            var _a;\r\n            if (!input) {\r\n                return of(undefined);\r\n            }\r\n            const operations = [];\r\n            if (input.refund.lines.length) {\r\n                operations.push(this.dataService.order\r\n                    .refundOrder(input.refund)\r\n                    .pipe(map(res => res.refundOrder)));\r\n            }\r\n            if ((_a = input.cancel.lines) === null || _a === void 0 ? void 0 : _a.length) {\r\n                operations.push(this.dataService.order\r\n                    .cancelOrder(input.cancel)\r\n                    .pipe(map(res => res.cancelOrder)));\r\n            }\r\n            return merge(...operations);\r\n        }))\r\n            .subscribe(result => {\r\n            if (result) {\r\n                switch (result.__typename) {\r\n                    case 'Order':\r\n                        this.refetchOrder(result).subscribe();\r\n                        this.notificationService.success(marker('order.cancelled-order-success'));\r\n                        break;\r\n                    case 'Refund':\r\n                        this.refetchOrder(result).subscribe();\r\n                        if (result.state === 'Failed') {\r\n                            this.notificationService.error(marker('order.refund-order-failed'));\r\n                        }\r\n                        else {\r\n                            this.notificationService.success(marker('order.refund-order-success'));\r\n                        }\r\n                        break;\r\n                    case 'QuantityTooGreatError':\r\n                    case 'MultipleOrderError':\r\n                    case 'OrderStateTransitionError':\r\n                    case 'CancelActiveOrderError':\r\n                    case 'EmptyOrderLineSelectionError':\r\n                    case 'AlreadyRefundedError':\r\n                    case 'NothingToRefundError':\r\n                    case 'PaymentOrderMismatchError':\r\n                    case 'RefundOrderStateError':\r\n                    case 'RefundStateTransitionError':\r\n                        this.notificationService.error(result.message);\r\n                        break;\r\n                }\r\n            }\r\n        });\r\n    }\r\n    refetchOrder(result) {\r\n        this.fetchHistory.next();\r\n        if (result) {\r\n            return this.dataService.order.getOrder(this.id).single$;\r\n        }\r\n        else {\r\n            return of(undefined);\r\n        }\r\n    }\r\n    setFormValues(entity) {\r\n        // empty\r\n    }\r\n}\nOrderDetailComponent.ɵfac = function OrderDetailComponent_Factory(t) { return new (t || OrderDetailComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc8.Router), ɵngcc0.ɵɵdirectiveInject(ɵngcc8.ActivatedRoute), ɵngcc0.ɵɵdirectiveInject(ɵngcc1.ServerConfigService), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc1.DataService), ɵngcc0.ɵɵdirectiveInject(ɵngcc1.NotificationService), ɵngcc0.ɵɵdirectiveInject(ɵngcc1.ModalService), ɵngcc0.ɵɵdirectiveInject(OrderTransitionService)); };\nOrderDetailComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: OrderDetailComponent, selectors: [[\"vdr-order-detail\"]], features: [ɵngcc0.ɵɵInheritDefinitionFeature], decls: 4, vars: 6, consts: [[4, \"ngIf\"], [1, \"flex\", \"clr-align-items-center\"], [3, \"entity\"], [3, \"state\"], [1, \"icon-button\", 3, \"title\", \"click\"], [\"shape\", \"list\"], [\"locationId\", \"order-detail\"], [\"class\", \"btn btn-primary\", 3, \"click\", 4, \"ngIf\"], [1, \"btn\", \"btn-primary\", 3, \"disabled\", \"click\"], [\"vdrDropdownTrigger\", \"\", 1, \"icon-button\"], [\"shape\", \"ellipsis-vertical\"], [\"vdrPosition\", \"bottom-right\"], [\"type\", \"button\", \"class\", \"btn\", \"vdrDropdownItem\", \"\", 3, \"click\", 4, \"ngIf\"], [1, \"dropdown-divider\"], [\"type\", \"button\", \"vdrDropdownItem\", \"\", 1, \"btn\", 3, \"click\"], [\"shape\", \"step-forward-2\", 1, \"is-warning\"], [1, \"btn\", \"btn-primary\", 3, \"click\"], [\"shape\", \"pencil\"], [\"shape\", \"error-standard\", 1, \"is-error\"], [4, \"ngIf\", \"ngIfElse\"], [\"cancelOnly\", \"\"], [\"type\", \"button\", \"class\", \"btn\", \"vdrDropdownItem\", \"\", 3, \"click\", 4, \"ngFor\", \"ngForOf\"], [\"shape\", \"step-forward-2\"], [1, \"clr-row\"], [1, \"clr-col-lg-8\"], [3, \"order\", \"orderLineCustomFields\"], [1, \"table\"], [4, \"ngFor\", \"ngForOf\"], [3, \"order\", \"history\", \"addNote\", \"updateNote\", \"deleteNote\"], [1, \"clr-col-lg-4\", \"order-cards\"], [3, \"customFieldsConfig\", \"customFieldValues\", \"updateClick\"], [1, \"card\"], [1, \"card-header\"], [1, \"card-block\"], [1, \"card-text\"], [3, \"customer\"], [3, \"address\"], [3, \"currencyCode\", \"payment\", \"settlePayment\", \"transitionPaymentState\", \"settleRefund\", 4, \"ngFor\", \"ngForOf\"], [3, \"currencyCode\", \"payment\", \"settlePayment\", \"transitionPaymentState\", \"settleRefund\"], [3, \"fulfillment\", \"order\", \"transitionState\"]], template: function OrderDetailComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵtemplate(0, OrderDetailComponent_vdr_action_bar_0_Template, 29, 21, \"vdr-action-bar\", 0);\n        ɵngcc0.ɵɵpipe(1, \"async\");\n        ɵngcc0.ɵɵtemplate(2, OrderDetailComponent_div_2_Template, 41, 34, \"div\", 0);\n        ɵngcc0.ɵɵpipe(3, \"async\");\n    } if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"ngIf\", ɵngcc0.ɵɵpipeBind1(1, 2, ctx.entity$));\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ɵngcc0.ɵɵpipeBind1(3, 4, ctx.entity$));\n    } }, directives: function () { return [ɵngcc5.NgIf, ɵngcc1.ActionBarComponent, ɵngcc1.ActionBarLeftComponent, ɵngcc1.EntityInfoComponent, ɵngcc1.OrderStateLabelComponent, ɵngcc6.ClrIconCustomTag, ɵngcc1.ActionBarRightComponent, ɵngcc1.ActionBarItemsComponent, ɵngcc1.DropdownComponent, ɵngcc1.DropdownTriggerDirective, ɵngcc1.DropdownMenuComponent, ɵngcc1.DropdownItemDirective, ɵngcc5.NgForOf, OrderTableComponent, OrderHistoryComponent, OrderCustomFieldsCardComponent, ɵngcc1.CustomerLabelComponent, ɵngcc1.FormattedAddressComponent, OrderPaymentCardComponent, FulfillmentCardComponent]; }, pipes: function () { return [ɵngcc5.AsyncPipe, ɵngcc4.TranslatePipe, ɵngcc1.LocaleCurrencyPipe, ɵngcc1.StateI18nTokenPipe, ɵngcc5.PercentPipe]; }, styles: [\".shipping-address[_ngcontent-%COMP%]{list-style-type:none;line-height:1.3em}.order-cards[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{margin-top:6px;color:var(--color-text-200)}\"], changeDetection: 0 });\r\nOrderDetailComponent.ctorParameters = () => [\r\n    { type: Router },\r\n    { type: ActivatedRoute },\r\n    { type: ServerConfigService },\r\n    { type: ChangeDetectorRef },\r\n    { type: DataService },\r\n    { type: NotificationService },\r\n    { type: ModalService },\r\n    { type: OrderTransitionService }\r\n];\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(OrderDetailComponent, [{\n        type: Component,\n        args: [{\n                selector: 'vdr-order-detail',\n                template: \"<vdr-action-bar *ngIf=\\\"entity$ | async as order\\\">\\r\\n    <vdr-ab-left>\\r\\n        <div class=\\\"flex clr-align-items-center\\\">\\r\\n            <vdr-entity-info [entity]=\\\"entity$ | async\\\"></vdr-entity-info>\\r\\n            <vdr-order-state-label [state]=\\\"order.state\\\">\\r\\n                <button\\r\\n                    class=\\\"icon-button\\\"\\r\\n                    (click)=\\\"openStateDiagram()\\\"\\r\\n                    [title]=\\\"'order.order-state-diagram' | translate\\\"\\r\\n                >\\r\\n                    <clr-icon shape=\\\"list\\\"></clr-icon>\\r\\n                </button>\\r\\n            </vdr-order-state-label>\\r\\n        </div>\\r\\n    </vdr-ab-left>\\r\\n\\r\\n    <vdr-ab-right>\\r\\n        <vdr-action-bar-items locationId=\\\"order-detail\\\"></vdr-action-bar-items>\\r\\n        <button\\r\\n            class=\\\"btn btn-primary\\\"\\r\\n            *ngIf=\\\"\\r\\n                order.state === 'ArrangingAdditionalPayment' &&\\r\\n                (hasUnsettledModifications(order) || 0 < outstandingPaymentAmount(order))\\r\\n            \\\"\\r\\n            (click)=\\\"addManualPayment(order)\\\"\\r\\n        >\\r\\n            {{ 'order.add-payment-to-order' | translate }}\\r\\n            ({{ outstandingPaymentAmount(order) | localeCurrency: order.currencyCode }})\\r\\n        </button>\\r\\n        <button\\r\\n            class=\\\"btn btn-primary\\\"\\r\\n            *ngIf=\\\"order.state !== 'ArrangingAdditionalPayment' && 0 < outstandingPaymentAmount(order)\\\"\\r\\n            (click)=\\\"transitionToState('ArrangingAdditionalPayment')\\\"\\r\\n        >\\r\\n            {{ 'order.arrange-additional-payment' | translate }}\\r\\n        </button>\\r\\n        <button class=\\\"btn btn-primary\\\" (click)=\\\"fulfillOrder()\\\" [disabled]=\\\"!canAddFulfillment(order)\\\">\\r\\n            {{ 'order.fulfill-order' | translate }}\\r\\n        </button>\\r\\n        <vdr-dropdown>\\r\\n            <button class=\\\"icon-button\\\" vdrDropdownTrigger>\\r\\n                <clr-icon shape=\\\"ellipsis-vertical\\\"></clr-icon>\\r\\n            </button>\\r\\n            <vdr-dropdown-menu vdrPosition=\\\"bottom-right\\\">\\r\\n                <ng-container *ngIf=\\\"order.nextStates.includes('Modifying')\\\">\\r\\n                    <button type=\\\"button\\\" class=\\\"btn\\\" vdrDropdownItem (click)=\\\"transitionToModifying()\\\">\\r\\n                        <clr-icon shape=\\\"pencil\\\"></clr-icon>\\r\\n                        {{ 'order.modify-order' | translate }}\\r\\n                    </button>\\r\\n                    <div class=\\\"dropdown-divider\\\"></div>\\r\\n                </ng-container>\\r\\n                <button\\r\\n                    type=\\\"button\\\"\\r\\n                    class=\\\"btn\\\"\\r\\n                    vdrDropdownItem\\r\\n                    *ngIf=\\\"order.nextStates.includes('Cancelled')\\\"\\r\\n                    (click)=\\\"cancelOrRefund(order)\\\"\\r\\n                >\\r\\n                    <clr-icon shape=\\\"error-standard\\\" class=\\\"is-error\\\"></clr-icon>\\r\\n                    <ng-container *ngIf=\\\"orderHasSettledPayments(order); else cancelOnly\\\">\\r\\n                        {{ 'order.refund-and-cancel-order' | translate }}\\r\\n                    </ng-container>\\r\\n                    <ng-template #cancelOnly>\\r\\n                        {{ 'order.cancel-order' | translate }}\\r\\n                    </ng-template>\\r\\n                </button>\\r\\n\\r\\n                <ng-container *ngIf=\\\"(nextStates$ | async)?.length\\\">\\r\\n                    <div class=\\\"dropdown-divider\\\"></div>\\r\\n                    <button\\r\\n                        *ngFor=\\\"let nextState of nextStates$ | async\\\"\\r\\n                        type=\\\"button\\\"\\r\\n                        class=\\\"btn\\\"\\r\\n                        vdrDropdownItem\\r\\n                        (click)=\\\"transitionToState(nextState)\\\"\\r\\n                    >\\r\\n                        <clr-icon shape=\\\"step-forward-2\\\"></clr-icon>\\r\\n                        {{\\r\\n                            'order.transition-to-state'\\r\\n                                | translate: { state: (nextState | stateI18nToken | translate) }\\r\\n                        }}\\r\\n                    </button>\\r\\n                </ng-container>\\r\\n                <div class=\\\"dropdown-divider\\\"></div>\\r\\n                <button type=\\\"button\\\" class=\\\"btn\\\" vdrDropdownItem (click)=\\\"manuallyTransitionToState(order)\\\">\\r\\n                    <clr-icon shape=\\\"step-forward-2\\\" class=\\\"is-warning\\\"></clr-icon>\\r\\n                    {{ 'order.manually-transition-to-state' | translate }}\\r\\n                </button>\\r\\n            </vdr-dropdown-menu>\\r\\n        </vdr-dropdown>\\r\\n    </vdr-ab-right>\\r\\n</vdr-action-bar>\\r\\n\\r\\n<div *ngIf=\\\"entity$ | async as order\\\">\\r\\n    <div class=\\\"clr-row\\\">\\r\\n        <div class=\\\"clr-col-lg-8\\\">\\r\\n            <vdr-order-table\\r\\n                [order]=\\\"order\\\"\\r\\n                [orderLineCustomFields]=\\\"orderLineCustomFields\\\"\\r\\n            ></vdr-order-table>\\r\\n            <h4>{{ 'order.tax-summary' | translate }}</h4>\\r\\n            <table class=\\\"table\\\">\\r\\n                <thead>\\r\\n                    <tr>\\r\\n                        <th>{{ 'common.description' | translate }}</th>\\r\\n                        <th>{{ 'order.tax-rate' | translate }}</th>\\r\\n                        <th>{{ 'order.tax-base' | translate }}</th>\\r\\n                        <th>{{ 'order.tax-total' | translate }}</th>\\r\\n                    </tr>\\r\\n                </thead>\\r\\n                <tbody>\\r\\n                    <tr *ngFor=\\\"let row of order.taxSummary\\\">\\r\\n                        <td>{{ row.description }}</td>\\r\\n                        <td>{{ row.taxRate / 100 | percent }}</td>\\r\\n                        <td>{{ row.taxBase | localeCurrency: order.currencyCode }}</td>\\r\\n                        <td>{{ row.taxTotal | localeCurrency: order.currencyCode }}</td>\\r\\n                    </tr>\\r\\n                </tbody>\\r\\n            </table>\\r\\n\\r\\n            <vdr-order-history\\r\\n                [order]=\\\"order\\\"\\r\\n                [history]=\\\"history$ | async\\\"\\r\\n                (addNote)=\\\"addNote($event)\\\"\\r\\n                (updateNote)=\\\"updateNote($event)\\\"\\r\\n                (deleteNote)=\\\"deleteNote($event)\\\"\\r\\n            ></vdr-order-history>\\r\\n        </div>\\r\\n        <div class=\\\"clr-col-lg-4 order-cards\\\">\\r\\n            <vdr-order-custom-fields-card\\r\\n                [customFieldsConfig]=\\\"customFields\\\"\\r\\n                [customFieldValues]=\\\"order.customFields\\\"\\r\\n                (updateClick)=\\\"updateCustomFields($event)\\\"\\r\\n            ></vdr-order-custom-fields-card>\\r\\n            <div class=\\\"card\\\">\\r\\n                <div class=\\\"card-header\\\">\\r\\n                    {{ 'order.customer' | translate }}\\r\\n                </div>\\r\\n                <div class=\\\"card-block\\\">\\r\\n                    <div class=\\\"card-text\\\">\\r\\n                        <vdr-customer-label [customer]=\\\"order.customer\\\"></vdr-customer-label>\\r\\n                        <h6 *ngIf=\\\"getOrderAddressLines(order.shippingAddress).length\\\">\\r\\n                            {{ 'order.shipping-address' | translate }}\\r\\n                        </h6>\\r\\n                        <vdr-formatted-address [address]=\\\"order.shippingAddress\\\"></vdr-formatted-address>\\r\\n                        <h6 *ngIf=\\\"getOrderAddressLines(order.billingAddress).length\\\">\\r\\n                            {{ 'order.billing-address' | translate }}\\r\\n                        </h6>\\r\\n                        <vdr-formatted-address [address]=\\\"order.billingAddress\\\"></vdr-formatted-address>\\r\\n                    </div>\\r\\n                </div>\\r\\n            </div>\\r\\n            <ng-container *ngIf=\\\"order.payments && order.payments.length\\\">\\r\\n                <vdr-order-payment-card\\r\\n                    *ngFor=\\\"let payment of order.payments\\\"\\r\\n                    [currencyCode]=\\\"order.currencyCode\\\"\\r\\n                    [payment]=\\\"payment\\\"\\r\\n                    (settlePayment)=\\\"settlePayment($event)\\\"\\r\\n                    (transitionPaymentState)=\\\"transitionPaymentState($event)\\\"\\r\\n                    (settleRefund)=\\\"settleRefund($event)\\\"\\r\\n                ></vdr-order-payment-card>\\r\\n            </ng-container>\\r\\n            <ng-container *ngFor=\\\"let fulfillment of order.fulfillments\\\">\\r\\n                <vdr-fulfillment-card\\r\\n                    [fulfillment]=\\\"fulfillment\\\"\\r\\n                    [order]=\\\"order\\\"\\r\\n                    (transitionState)=\\\"transitionFulfillment(fulfillment.id, $event)\\\"\\r\\n                ></vdr-fulfillment-card>\\r\\n            </ng-container>\\r\\n        </div>\\r\\n    </div>\\r\\n</div>\\r\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\".shipping-address{list-style-type:none;line-height:1.3em}.order-cards h6{margin-top:6px;color:var(--color-text-200)}\"]\n            }]\n    }], function () { return [{ type: ɵngcc8.Router }, { type: ɵngcc8.ActivatedRoute }, { type: ɵngcc1.ServerConfigService }, { type: ɵngcc0.ChangeDetectorRef }, { type: ɵngcc1.DataService }, { type: ɵngcc1.NotificationService }, { type: ɵngcc1.ModalService }, { type: OrderTransitionService }]; }, null); })();\n\nvar OrderEditResultType;\r\n(function (OrderEditResultType) {\r\n    OrderEditResultType[OrderEditResultType[\"Refund\"] = 0] = \"Refund\";\r\n    OrderEditResultType[OrderEditResultType[\"Payment\"] = 1] = \"Payment\";\r\n    OrderEditResultType[OrderEditResultType[\"PriceUnchanged\"] = 2] = \"PriceUnchanged\";\r\n    OrderEditResultType[OrderEditResultType[\"Cancel\"] = 3] = \"Cancel\";\r\n})(OrderEditResultType || (OrderEditResultType = {}));\r\nclass OrderEditsPreviewDialogComponent {\r\n    get priceDifference() {\r\n        return this.order.totalWithTax - this.originalTotalWithTax;\r\n    }\r\n    ngOnInit() {\r\n        this.refundNote = this.modifyOrderInput.note || '';\r\n    }\r\n    cancel() {\r\n        this.resolveWith({\r\n            result: OrderEditResultType.Cancel,\r\n        });\r\n    }\r\n    submit() {\r\n        if (0 < this.priceDifference) {\r\n            this.resolveWith({\r\n                result: OrderEditResultType.Payment,\r\n            });\r\n        }\r\n        else if (this.priceDifference < 0) {\r\n            this.resolveWith({\r\n                result: OrderEditResultType.Refund,\r\n                // tslint:disable-next-line:no-non-null-assertion\r\n                refundPaymentId: this.selectedPayment.id,\r\n                refundNote: this.refundNote,\r\n            });\r\n        }\r\n        else {\r\n            this.resolveWith({\r\n                result: OrderEditResultType.PriceUnchanged,\r\n            });\r\n        }\r\n    }\r\n}\nOrderEditsPreviewDialogComponent.ɵfac = function OrderEditsPreviewDialogComponent_Factory(t) { return new (t || OrderEditsPreviewDialogComponent)(); };\nOrderEditsPreviewDialogComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: OrderEditsPreviewDialogComponent, selectors: [[\"vdr-order-edits-preview-dialog\"]], decls: 10, vars: 10, consts: [[\"vdrDialogTitle\", \"\"], [3, \"order\", \"orderLineCustomFields\"], [1, \"h4\"], [4, \"ngIf\"], [\"vdrDialogButtons\", \"\"], [\"clrSelect\", \"\", \"name\", \"options\", 3, \"ngModel\", \"ngModelChange\"], [3, \"ngValue\", 4, \"ngFor\", \"ngForOf\"], [1, \"clr-control-label\"], [\"name\", \"refundNote\", \"clrTextarea\", \"\", \"required\", \"\", 3, \"ngModel\", \"ngModelChange\"], [3, \"ngValue\"], [\"type\", \"button\", 1, \"btn\", 3, \"click\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", 3, \"disabled\", \"click\"]], template: function OrderEditsPreviewDialogComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵtemplate(0, OrderEditsPreviewDialogComponent_ng_template_0_Template, 2, 3, \"ng-template\", 0);\n        ɵngcc0.ɵɵelement(1, \"vdr-order-table\", 1);\n        ɵngcc0.ɵɵelementStart(2, \"h4\", 2);\n        ɵngcc0.ɵɵtext(3);\n        ɵngcc0.ɵɵpipe(4, \"translate\");\n        ɵngcc0.ɵɵelementStart(5, \"strong\");\n        ɵngcc0.ɵɵtext(6);\n        ɵngcc0.ɵɵpipe(7, \"localeCurrency\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵtemplate(8, OrderEditsPreviewDialogComponent_div_8_Template, 11, 9, \"div\", 3);\n        ɵngcc0.ɵɵtemplate(9, OrderEditsPreviewDialogComponent_ng_template_9_Template, 6, 7, \"ng-template\", 4);\n    } if (rf & 2) {\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"order\", ctx.order)(\"orderLineCustomFields\", ctx.orderLineCustomFields);\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(4, 5, \"order.modify-order-price-difference\"), \": \");\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind2(7, 7, ctx.priceDifference, ctx.order.currencyCode));\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.priceDifference < 0);\n    } }, directives: function () { return [ɵngcc1.DialogTitleDirective, OrderTableComponent, ɵngcc5.NgIf, ɵngcc1.DialogButtonsDirective, ɵngcc6.ClrSelectContainer, ɵngcc6.ClrLabel, ɵngcc1.FormFieldControlDirective, ɵngcc2.SelectControlValueAccessor, ɵngcc6.ClrSelect, ɵngcc2.NgControlStatus, ɵngcc2.NgModel, ɵngcc5.NgForOf, ɵngcc2.DefaultValueAccessor, ɵngcc6.ClrTextarea, ɵngcc2.RequiredValidator, ɵngcc2.NgSelectOption, ɵngcc2.ɵangular_packages_forms_forms_x]; }, pipes: function () { return [ɵngcc4.TranslatePipe, ɵngcc1.LocaleCurrencyPipe]; }, styles: [\"\"], changeDetection: 0 });\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(OrderEditsPreviewDialogComponent, [{\n        type: Component,\n        args: [{\n                selector: 'vdr-order-edits-preview-dialog',\n                template: \"<ng-template vdrDialogTitle>{{ 'order.confirm-modifications' | translate }}</ng-template>\\r\\n<vdr-order-table [order]=\\\"order\\\" [orderLineCustomFields]=\\\"orderLineCustomFields\\\"></vdr-order-table>\\r\\n\\r\\n<h4 class=\\\"h4\\\">\\r\\n    {{ 'order.modify-order-price-difference' | translate }}:\\r\\n    <strong>{{ priceDifference | localeCurrency: order.currencyCode }}</strong>\\r\\n</h4>\\r\\n<div *ngIf=\\\"priceDifference < 0\\\">\\r\\n<clr-select-container>\\r\\n    <label>{{ 'order.payment-to-refund' | translate }}</label>\\r\\n    <select clrSelect name=\\\"options\\\" [(ngModel)]=\\\"selectedPayment\\\">\\r\\n        <option\\r\\n            *ngFor=\\\"let payment of order.payments\\\"\\r\\n            [ngValue]=\\\"payment\\\"\\r\\n        >\\r\\n            #{{ payment.id }} {{ payment.method }}:\\r\\n            {{ payment.amount | localeCurrency: order.currencyCode }}\\r\\n        </option>\\r\\n    </select>\\r\\n</clr-select-container>\\r\\n    <label class=\\\"clr-control-label\\\">{{ 'order.refund-cancellation-reason' | translate }}</label>\\r\\n    <textarea [(ngModel)]=\\\"refundNote\\\" name=\\\"refundNote\\\" clrTextarea required></textarea>\\r\\n</div>\\r\\n<ng-template vdrDialogButtons>\\r\\n    <button type=\\\"button\\\" class=\\\"btn\\\" (click)=\\\"cancel()\\\">{{ 'common.cancel' | translate }}</button>\\r\\n    <button type=\\\"submit\\\" (click)=\\\"submit()\\\" [disabled]=\\\"priceDifference < 0 && !selectedPayment\\\" class=\\\"btn btn-primary\\\">\\r\\n        {{ 'common.confirm' | translate }}\\r\\n    </button>\\r\\n</ng-template>\\r\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\"\"]\n            }]\n    }], null, null); })();\n\nclass OrderEditorComponent extends BaseDetailComponent {\r\n    constructor(router, route, serverConfigService, changeDetector, dataService, notificationService, modalService, orderTransitionService) {\r\n        super(route, router, serverConfigService, dataService);\r\n        this.changeDetector = changeDetector;\r\n        this.dataService = dataService;\r\n        this.notificationService = notificationService;\r\n        this.modalService = modalService;\r\n        this.orderTransitionService = orderTransitionService;\r\n        this.detailForm = new FormGroup({});\r\n        this.modifyOrderInput = {\r\n            dryRun: true,\r\n            orderId: '',\r\n            addItems: [],\r\n            adjustOrderLines: [],\r\n            surcharges: [],\r\n            note: '',\r\n            updateShippingAddress: {},\r\n            updateBillingAddress: {},\r\n        };\r\n        this.note = '';\r\n        this.recalculateShipping = true;\r\n        this.addedVariants = new Map();\r\n    }\r\n    get addedLines() {\r\n        const getSinglePriceValue = (price) => price.__typename === 'SinglePrice' ? price.value : 0;\r\n        return (this.modifyOrderInput.addItems || [])\r\n            .map(row => {\r\n            const variantInfo = this.addedVariants.get(row.productVariantId);\r\n            if (variantInfo) {\r\n                return Object.assign(Object.assign({}, variantInfo), { price: getSinglePriceValue(variantInfo.price), priceWithTax: getSinglePriceValue(variantInfo.priceWithTax), quantity: row.quantity });\r\n            }\r\n        })\r\n            .filter(notNullOrUndefined);\r\n    }\r\n    ngOnInit() {\r\n        this.init();\r\n        this.addressCustomFields = this.getCustomFieldConfig('Address');\r\n        this.modifyOrderInput.orderId = this.route.snapshot.paramMap.get('id');\r\n        this.orderLineCustomFields = this.getCustomFieldConfig('OrderLine');\r\n        this.entity$.pipe(takeUntil(this.destroy$)).subscribe(order => {\r\n            var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q, _r, _s, _t;\r\n            this.surchargeForm = new FormGroup({\r\n                description: new FormControl('', Validators.required),\r\n                sku: new FormControl(''),\r\n                price: new FormControl(0, Validators.required),\r\n                priceIncludesTax: new FormControl(true),\r\n                taxRate: new FormControl(0),\r\n                taxDescription: new FormControl(''),\r\n            });\r\n            if (!this.shippingAddressForm) {\r\n                this.shippingAddressForm = new FormGroup({\r\n                    fullName: new FormControl((_a = order.shippingAddress) === null || _a === void 0 ? void 0 : _a.fullName),\r\n                    company: new FormControl((_b = order.shippingAddress) === null || _b === void 0 ? void 0 : _b.company),\r\n                    streetLine1: new FormControl((_c = order.shippingAddress) === null || _c === void 0 ? void 0 : _c.streetLine1),\r\n                    streetLine2: new FormControl((_d = order.shippingAddress) === null || _d === void 0 ? void 0 : _d.streetLine2),\r\n                    city: new FormControl((_e = order.shippingAddress) === null || _e === void 0 ? void 0 : _e.city),\r\n                    province: new FormControl((_f = order.shippingAddress) === null || _f === void 0 ? void 0 : _f.province),\r\n                    postalCode: new FormControl((_g = order.shippingAddress) === null || _g === void 0 ? void 0 : _g.postalCode),\r\n                    countryCode: new FormControl((_h = order.shippingAddress) === null || _h === void 0 ? void 0 : _h.countryCode),\r\n                    phoneNumber: new FormControl((_j = order.shippingAddress) === null || _j === void 0 ? void 0 : _j.phoneNumber),\r\n                });\r\n            }\r\n            if (!this.billingAddressForm) {\r\n                this.billingAddressForm = new FormGroup({\r\n                    fullName: new FormControl((_k = order.billingAddress) === null || _k === void 0 ? void 0 : _k.fullName),\r\n                    company: new FormControl((_l = order.billingAddress) === null || _l === void 0 ? void 0 : _l.company),\r\n                    streetLine1: new FormControl((_m = order.billingAddress) === null || _m === void 0 ? void 0 : _m.streetLine1),\r\n                    streetLine2: new FormControl((_o = order.billingAddress) === null || _o === void 0 ? void 0 : _o.streetLine2),\r\n                    city: new FormControl((_p = order.billingAddress) === null || _p === void 0 ? void 0 : _p.city),\r\n                    province: new FormControl((_q = order.billingAddress) === null || _q === void 0 ? void 0 : _q.province),\r\n                    postalCode: new FormControl((_r = order.billingAddress) === null || _r === void 0 ? void 0 : _r.postalCode),\r\n                    countryCode: new FormControl((_s = order.billingAddress) === null || _s === void 0 ? void 0 : _s.countryCode),\r\n                    phoneNumber: new FormControl((_t = order.billingAddress) === null || _t === void 0 ? void 0 : _t.phoneNumber),\r\n                });\r\n            }\r\n            this.orderLineCustomFieldsFormArray = new FormArray([]);\r\n            for (const line of order.lines) {\r\n                const formGroup = new FormGroup({});\r\n                for (const { name } of this.orderLineCustomFields) {\r\n                    formGroup.addControl(name, new FormControl(line.customFields[name]));\r\n                }\r\n                formGroup.valueChanges.pipe(takeUntil(this.destroy$)).subscribe(value => {\r\n                    let modifyRow = this.modifyOrderInput.adjustOrderLines.find(l => l.orderLineId === line.id);\r\n                    if (!modifyRow) {\r\n                        modifyRow = {\r\n                            orderLineId: line.id,\r\n                            quantity: line.quantity,\r\n                        };\r\n                        this.modifyOrderInput.adjustOrderLines.push(modifyRow);\r\n                    }\r\n                    if (this.orderLineCustomFields.length) {\r\n                        modifyRow.customFields = value;\r\n                    }\r\n                });\r\n                this.orderLineCustomFieldsFormArray.push(formGroup);\r\n            }\r\n        });\r\n        this.addItemCustomFieldsFormArray = new FormArray([]);\r\n        this.addItemCustomFieldsForm = new FormGroup({});\r\n        for (const customField of this.orderLineCustomFields) {\r\n            this.addItemCustomFieldsForm.addControl(customField.name, new FormControl());\r\n        }\r\n        this.availableCountries$ = this.dataService.settings\r\n            .getAvailableCountries()\r\n            .mapSingle(result => result.countries.items)\r\n            .pipe(shareReplay(1));\r\n        this.dataService.order\r\n            .getOrderHistory(this.id, {\r\n            take: 1,\r\n            sort: {\r\n                createdAt: SortOrder.DESC,\r\n            },\r\n            filter: { type: { eq: HistoryEntryType.ORDER_STATE_TRANSITION } },\r\n        })\r\n            .single$.subscribe(({ order }) => {\r\n            this.previousState = order === null || order === void 0 ? void 0 : order.history.items[0].data.from;\r\n        });\r\n    }\r\n    ngOnDestroy() {\r\n        this.destroy();\r\n    }\r\n    transitionToPriorState(order) {\r\n        this.orderTransitionService\r\n            .transitionToPreModifyingState(order.id, order.nextStates)\r\n            .subscribe(result => {\r\n            this.router.navigate(['..'], { relativeTo: this.route });\r\n        });\r\n    }\r\n    canPreviewChanges() {\r\n        const { addItems, adjustOrderLines, surcharges } = this.modifyOrderInput;\r\n        return (!!(addItems === null || addItems === void 0 ? void 0 : addItems.length) ||\r\n            !!(surcharges === null || surcharges === void 0 ? void 0 : surcharges.length) ||\r\n            !!(adjustOrderLines === null || adjustOrderLines === void 0 ? void 0 : adjustOrderLines.length) ||\r\n            (this.shippingAddressForm.dirty && this.shippingAddressForm.valid) ||\r\n            (this.billingAddressForm.dirty && this.billingAddressForm.valid));\r\n    }\r\n    isLineModified(line) {\r\n        var _a;\r\n        return !!((_a = this.modifyOrderInput.adjustOrderLines) === null || _a === void 0 ? void 0 : _a.find(l => l.orderLineId === line.id && l.quantity !== line.quantity));\r\n    }\r\n    updateLineQuantity(line, quantity) {\r\n        const { adjustOrderLines } = this.modifyOrderInput;\r\n        let row = adjustOrderLines === null || adjustOrderLines === void 0 ? void 0 : adjustOrderLines.find(l => l.orderLineId === line.id);\r\n        if (row && +quantity === line.quantity) {\r\n            // Remove the modification if the quantity is the same as\r\n            // the original order\r\n            adjustOrderLines === null || adjustOrderLines === void 0 ? void 0 : adjustOrderLines.splice(adjustOrderLines === null || adjustOrderLines === void 0 ? void 0 : adjustOrderLines.indexOf(row), 1);\r\n        }\r\n        if (!row) {\r\n            row = { orderLineId: line.id, quantity: +quantity };\r\n            adjustOrderLines === null || adjustOrderLines === void 0 ? void 0 : adjustOrderLines.push(row);\r\n        }\r\n        row.quantity = +quantity;\r\n    }\r\n    updateAddedItemQuantity(item, quantity) {\r\n        var _a;\r\n        const row = (_a = this.modifyOrderInput.addItems) === null || _a === void 0 ? void 0 : _a.find(l => l.productVariantId === item.productVariantId);\r\n        if (row) {\r\n            row.quantity = +quantity;\r\n        }\r\n    }\r\n    trackByProductVariantId(index, item) {\r\n        return item.productVariantId;\r\n    }\r\n    getSelectedItemPrice(result) {\r\n        switch (result === null || result === void 0 ? void 0 : result.priceWithTax.__typename) {\r\n            case 'SinglePrice':\r\n                return result.priceWithTax.value;\r\n            default:\r\n                return 0;\r\n        }\r\n    }\r\n    addItemToOrder(result) {\r\n        var _a, _b;\r\n        if (!result) {\r\n            return;\r\n        }\r\n        const customFields = this.orderLineCustomFields.length\r\n            ? this.addItemCustomFieldsForm.value\r\n            : undefined;\r\n        let row = (_a = this.modifyOrderInput.addItems) === null || _a === void 0 ? void 0 : _a.find(l => this.isMatchingAddItemRow(l, result, customFields));\r\n        if (!row) {\r\n            row = { productVariantId: result.productVariantId, quantity: 1 };\r\n            if (customFields) {\r\n                row.customFields = customFields;\r\n            }\r\n            (_b = this.modifyOrderInput.addItems) === null || _b === void 0 ? void 0 : _b.push(row);\r\n        }\r\n        else {\r\n            row.quantity++;\r\n        }\r\n        if (customFields) {\r\n            const formGroup = new FormGroup({});\r\n            for (const [key, value] of Object.entries(customFields)) {\r\n                formGroup.addControl(key, new FormControl(value));\r\n            }\r\n            this.addItemCustomFieldsFormArray.push(formGroup);\r\n            formGroup.valueChanges.pipe(takeUntil(this.destroy$)).subscribe(value => {\r\n                if (row) {\r\n                    row.customFields = value;\r\n                }\r\n            });\r\n        }\r\n        this.addItemCustomFieldsForm.reset({});\r\n        this.addItemSelectedVariant = undefined;\r\n        this.addedVariants.set(result.productVariantId, result);\r\n    }\r\n    isMatchingAddItemRow(row, result, customFields) {\r\n        return (row.productVariantId === result.productVariantId &&\r\n            JSON.stringify(row.customFields) === JSON.stringify(customFields));\r\n    }\r\n    removeAddedItem(index) {\r\n        this.modifyOrderInput.addItems.splice(index, 1);\r\n        if (-1 < index) {\r\n            this.addItemCustomFieldsFormArray.removeAt(index);\r\n        }\r\n    }\r\n    getSurchargePrices(surcharge) {\r\n        const priceWithTax = surcharge.priceIncludesTax\r\n            ? surcharge.price\r\n            : Math.round(surcharge.price * ((100 + (surcharge.taxRate || 0)) / 100));\r\n        const price = surcharge.priceIncludesTax\r\n            ? Math.round(surcharge.price / ((100 + (surcharge.taxRate || 0)) / 100))\r\n            : surcharge.price;\r\n        return {\r\n            price,\r\n            priceWithTax,\r\n        };\r\n    }\r\n    addSurcharge(value) {\r\n        var _a;\r\n        (_a = this.modifyOrderInput.surcharges) === null || _a === void 0 ? void 0 : _a.push(value);\r\n        this.surchargeForm.reset({\r\n            price: 0,\r\n            priceIncludesTax: true,\r\n            taxRate: 0,\r\n        });\r\n    }\r\n    removeSurcharge(index) {\r\n        var _a;\r\n        (_a = this.modifyOrderInput.surcharges) === null || _a === void 0 ? void 0 : _a.splice(index, 1);\r\n    }\r\n    previewAndModify(order) {\r\n        var _a;\r\n        const input = Object.assign(Object.assign(Object.assign(Object.assign({}, this.modifyOrderInput), (this.billingAddressForm.dirty ? { updateBillingAddress: this.billingAddressForm.value } : {})), (this.shippingAddressForm.dirty\r\n            ? { updateShippingAddress: this.shippingAddressForm.value }\r\n            : {})), { dryRun: true, note: (_a = this.note) !== null && _a !== void 0 ? _a : '', options: {\r\n                recalculateShipping: this.recalculateShipping,\r\n            } });\r\n        const originalTotalWithTax = order.totalWithTax;\r\n        this.dataService.order\r\n            .modifyOrder(input)\r\n            .pipe(switchMap(({ modifyOrder }) => {\r\n            switch (modifyOrder.__typename) {\r\n                case 'Order':\r\n                    return this.modalService.fromComponent(OrderEditsPreviewDialogComponent, {\r\n                        size: 'xl',\r\n                        closable: false,\r\n                        locals: {\r\n                            originalTotalWithTax,\r\n                            order: modifyOrder,\r\n                            orderLineCustomFields: this.orderLineCustomFields,\r\n                            modifyOrderInput: input,\r\n                        },\r\n                    });\r\n                case 'InsufficientStockError':\r\n                case 'NegativeQuantityError':\r\n                case 'NoChangesSpecifiedError':\r\n                case 'OrderLimitError':\r\n                case 'OrderModificationStateError':\r\n                case 'PaymentMethodMissingError':\r\n                case 'RefundPaymentIdMissingError': {\r\n                    this.notificationService.error(modifyOrder.message);\r\n                    return of(false);\r\n                }\r\n                case null:\r\n                case undefined:\r\n                    return of(false);\r\n                default:\r\n                    assertNever(modifyOrder);\r\n            }\r\n        }), switchMap(result => {\r\n            if (!result || result.result === OrderEditResultType.Cancel) {\r\n                // re-fetch so that the preview values get overwritten in the cache.\r\n                return this.dataService.order.getOrder(this.id).mapSingle(() => false);\r\n            }\r\n            else {\r\n                // Do the modification\r\n                const wetRunInput = Object.assign(Object.assign({}, input), { dryRun: false });\r\n                if (result.result === OrderEditResultType.Refund) {\r\n                    wetRunInput.refund = {\r\n                        paymentId: result.refundPaymentId,\r\n                        reason: result.refundNote,\r\n                    };\r\n                }\r\n                return this.dataService.order.modifyOrder(wetRunInput).pipe(switchMap(({ modifyOrder }) => {\r\n                    if (modifyOrder.__typename === 'Order') {\r\n                        const priceDelta = modifyOrder.totalWithTax - originalTotalWithTax;\r\n                        const nextState = 0 < priceDelta ? 'ArrangingAdditionalPayment' : this.previousState;\r\n                        return this.dataService.order\r\n                            .transitionToState(order.id, nextState)\r\n                            .pipe(mapTo(true));\r\n                    }\r\n                    else {\r\n                        this.notificationService.error(modifyOrder.message);\r\n                        return EMPTY;\r\n                    }\r\n                }));\r\n            }\r\n        }))\r\n            .subscribe(result => {\r\n            if (result) {\r\n                this.router.navigate(['../'], { relativeTo: this.route });\r\n            }\r\n        });\r\n    }\r\n    setFormValues(entity, languageCode) {\r\n        /* not used */\r\n    }\r\n}\nOrderEditorComponent.ɵfac = function OrderEditorComponent_Factory(t) { return new (t || OrderEditorComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc8.Router), ɵngcc0.ɵɵdirectiveInject(ɵngcc8.ActivatedRoute), ɵngcc0.ɵɵdirectiveInject(ɵngcc1.ServerConfigService), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc1.DataService), ɵngcc0.ɵɵdirectiveInject(ɵngcc1.NotificationService), ɵngcc0.ɵɵdirectiveInject(ɵngcc1.ModalService), ɵngcc0.ɵɵdirectiveInject(OrderTransitionService)); };\nOrderEditorComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: OrderEditorComponent, selectors: [[\"vdr-order-editor\"]], features: [ɵngcc0.ɵɵInheritDefinitionFeature], decls: 4, vars: 6, consts: [[4, \"ngIf\"], [1, \"flex\", \"clr-align-items-center\"], [3, \"entity\"], [3, \"state\"], [1, \"btn\", \"btn-secondary\", 3, \"click\"], [1, \"clr-row\"], [1, \"clr-col-lg-8\"], [1, \"order-table\", \"table\"], [\"class\", \"order-line\", 3, \"is-cancelled\", \"modified\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"modified\", 4, \"ngFor\", \"ngForOf\", \"ngForTrackBy\"], [\"class\", \"surcharge\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"surcharge modified\", 4, \"ngFor\", \"ngForOf\"], [1, \"shipping\"], [1, \"left\", \"clr-align-middle\"], [1, \"clr-align-middle\"], [\"colspan\", \"3\"], [1, \"net-price\", 3, \"title\"], [1, \"mb2\"], [4, \"clrIfExpanded\"], [1, \"clr-col-lg-4\", \"order-cards\"], [1, \"card\"], [1, \"card-header\"], [1, \"card-block\"], [1, \"clr-control-label\"], [\"name\", \"note\", \"clrTextarea\", \"\", \"required\", \"\", 3, \"ngModel\", \"ngModelChange\"], [1, \"\"], [\"type\", \"checkbox\", \"clrCheckbox\", \"\", 3, \"ngModel\", \"ngModelChange\"], [1, \"card-footer\"], [1, \"btn\", \"btn-primary\", 3, \"disabled\", \"click\"], [1, \"order-line\"], [1, \"align-middle\", \"thumb\"], [3, \"src\", 4, \"ngIf\"], [1, \"align-middle\", \"name\"], [1, \"align-middle\", \"sku\"], [1, \"align-middle\", \"unit-price\"], [1, \"align-middle\", \"quantity\"], [\"type\", \"number\", \"min\", \"0\", 3, \"value\", \"input\"], [3, \"line\", \"payments\"], [3, \"line\", \"orderState\"], [\"class\", \"order-line-custom-field align-middle\", 4, \"ngIf\"], [1, \"align-middle\", \"total\"], [3, \"src\"], [1, \"order-line-custom-field\", \"align-middle\"], [4, \"ngFor\", \"ngForOf\"], [\"entityName\", \"OrderLine\", 3, \"customField\", \"customFieldsFormGroup\", \"compact\"], [1, \"modified\"], [1, \"icon-button\", 3, \"click\"], [\"shape\", \"trash\"], [1, \"surcharge\"], [\"colspan\", \"2\", 1, \"align-middle\", \"name\", \"left\"], [1, \"align-middle\"], [1, \"surcharge\", \"modified\"], [1, \"mb4\", 3, \"productSelected\"], [\"class\", \"flex mb4\", 4, \"ngIf\"], [1, \"btn\", \"btn-secondary\", 3, \"disabled\", \"click\"], [1, \"flex\", \"mb4\"], [\"class\", \"mr4\", 3, \"src\", 4, \"ngIf\"], [1, \"mr4\"], [1, \"mr4\", 3, \"src\"], [\"entityName\", \"OrderLine\", 3, \"readonly\", \"customField\", \"customFieldsFormGroup\", \"compact\"], [3, \"formGroup\", \"submit\"], [\"for\", \"description\", 3, \"label\"], [\"id\", \"description\", \"type\", \"text\", \"formControlName\", \"description\"], [\"for\", \"sku\", 3, \"label\"], [\"id\", \"sku\", \"type\", \"text\", \"formControlName\", \"sku\"], [\"for\", \"price\", 3, \"label\"], [\"id\", \"price\", \"formControlName\", \"price\", 3, \"currencyCode\"], [\"for\", \"priceIncludesTax\", 3, \"label\"], [\"id\", \"priceIncludesTax\", \"type\", \"checkbox\", \"clrCheckbox\", \"\", \"formControlName\", \"priceIncludesTax\"], [\"for\", \"taxRate\", 3, \"label\"], [\"suffix\", \"%\"], [\"id\", \"taxRate\", \"type\", \"number\", \"min\", \"0\", \"max\", \"100\", \"formControlName\", \"taxRate\"], [\"for\", \"taxDescription\", 3, \"label\"], [\"id\", \"taxDescription\", \"type\", \"text\", \"formControlName\", \"taxDescription\"], [1, \"btn\", \"btn-secondary\", 3, \"disabled\"], [3, \"formGroup\", \"availableCountries\", \"customFields\"]], template: function OrderEditorComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵtemplate(0, OrderEditorComponent_vdr_action_bar_0_Template, 10, 7, \"vdr-action-bar\", 0);\n        ɵngcc0.ɵɵpipe(1, \"async\");\n        ɵngcc0.ɵɵtemplate(2, OrderEditorComponent_div_2_Template, 93, 72, \"div\", 0);\n        ɵngcc0.ɵɵpipe(3, \"async\");\n    } if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"ngIf\", ɵngcc0.ɵɵpipeBind1(1, 2, ctx.entity$));\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ɵngcc0.ɵɵpipeBind1(3, 4, ctx.entity$));\n    } }, directives: [ɵngcc5.NgIf, ɵngcc1.ActionBarComponent, ɵngcc1.ActionBarLeftComponent, ɵngcc1.EntityInfoComponent, ɵngcc1.OrderStateLabelComponent, ɵngcc1.ActionBarRightComponent, ɵngcc5.NgForOf, ɵngcc6.ClrDatagridItemsTrackBy, ɵngcc6.ClrAccordion, ɵngcc6.ÇlrAccordionWillyWonka, ɵngcc6.ClrAccordionPanel, ɵngcc6.ÇlrAccordionOompaLoompa, ɵngcc6.ClrAccordionTitle, ɵngcc6.ÇlrDatagridDetailRegisterer, ɵngcc6.ClrIfExpanded, ɵngcc6.ClrLabel, ɵngcc1.FormFieldControlDirective, ɵngcc2.DefaultValueAccessor, ɵngcc6.ClrTextarea, ɵngcc2.RequiredValidator, ɵngcc2.NgControlStatus, ɵngcc2.NgModel, ɵngcc6.ClrCheckboxWrapper, ɵngcc2.CheckboxControlValueAccessor, ɵngcc6.ClrCheckbox, LineRefundsComponent, LineFulfillmentComponent, ɵngcc1.CustomFieldControlComponent, ɵngcc6.ClrIconCustomTag, ɵngcc6.ClrAccordionContent, ɵngcc1.ProductSelectorComponent, ɵngcc2.ɵangular_packages_forms_forms_y, ɵngcc2.NgControlStatusGroup, ɵngcc2.FormGroupDirective, ɵngcc1.FormFieldComponent, ɵngcc2.FormControlName, ɵngcc1.CurrencyInputComponent, ɵngcc1.AffixedInputComponent, ɵngcc2.NumberValueAccessor, ɵngcc1.AddressFormComponent], pipes: [ɵngcc5.AsyncPipe, ɵngcc4.TranslatePipe, ɵngcc1.LocaleCurrencyPipe, ɵngcc1.AssetPreviewPipe, ɵngcc5.CurrencyPipe], styles: [\".order-table[_ngcontent-%COMP%]   .is-cancelled[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-decoration:line-through;background-color:var(--color-component-bg-200)}.order-table[_ngcontent-%COMP%]   .sub-total[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .order-table[_ngcontent-%COMP%]   .total[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-top:1px dashed var(--color-component-border-200)}.order-table[_ngcontent-%COMP%]   .total[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-weight:700}.order-table[_ngcontent-%COMP%]   td.custom-fields-row[_ngcontent-%COMP%]{border-top-style:dashed;border-top-color:var(--color-grey-200)}.order-table[_ngcontent-%COMP%]   .order-line-custom-fields[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}.order-table[_ngcontent-%COMP%]   .order-line-custom-fields[_ngcontent-%COMP%]   .custom-field[_ngcontent-%COMP%]{text-align:start;max-width:200px;overflow:hidden;text-overflow:ellipsis;margin-bottom:6px;margin-right:18px}.order-table[_ngcontent-%COMP%]   .order-line-custom-field[_ngcontent-%COMP%]{background-color:var(--color-component-bg-100)}.order-table[_ngcontent-%COMP%]   .net-price[_ngcontent-%COMP%], .order-table[_ngcontent-%COMP%]   .order-line-custom-field[_ngcontent-%COMP%]   .custom-field-ellipsis[_ngcontent-%COMP%]{color:var(--color-text-300)}.order-table[_ngcontent-%COMP%]   .net-price[_ngcontent-%COMP%]{font-size:11px}.order-table[_ngcontent-%COMP%]   .promotions-label[_ngcontent-%COMP%]{-webkit-text-decoration:underline dotted var(--color-text-200);text-decoration:underline dotted var(--color-text-200);font-size:11px;margin-top:6px;cursor:pointer;text-transform:lowercase}.order-table[_ngcontent-%COMP%]   tr.modified[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background-color:var(--color-warning-100)}\"], changeDetection: 0 });\r\nOrderEditorComponent.ctorParameters = () => [\r\n    { type: Router },\r\n    { type: ActivatedRoute },\r\n    { type: ServerConfigService },\r\n    { type: ChangeDetectorRef },\r\n    { type: DataService },\r\n    { type: NotificationService },\r\n    { type: ModalService },\r\n    { type: OrderTransitionService }\r\n];\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(OrderEditorComponent, [{\n        type: Component,\n        args: [{\n                selector: 'vdr-order-editor',\n                template: \"<vdr-action-bar *ngIf=\\\"entity$ | async as order\\\">\\r\\n    <vdr-ab-left>\\r\\n        <div class=\\\"flex clr-align-items-center\\\">\\r\\n            <vdr-entity-info [entity]=\\\"entity$ | async\\\"></vdr-entity-info>\\r\\n            <vdr-order-state-label [state]=\\\"order.state\\\"></vdr-order-state-label>\\r\\n        </div>\\r\\n    </vdr-ab-left>\\r\\n\\r\\n    <vdr-ab-right>\\r\\n        <button class=\\\"btn btn-secondary\\\" (click)=\\\"transitionToPriorState(order)\\\">\\r\\n            {{ 'order.cancel-modification' | translate }}\\r\\n        </button>\\r\\n    </vdr-ab-right>\\r\\n</vdr-action-bar>\\r\\n\\r\\n<div *ngIf=\\\"entity$ | async as order\\\">\\r\\n    <div class=\\\"clr-row\\\">\\r\\n        <div class=\\\"clr-col-lg-8\\\">\\r\\n            <table class=\\\"order-table table\\\">\\r\\n                <thead>\\r\\n                    <tr>\\r\\n                        <th></th>\\r\\n                        <th>{{ 'order.product-name' | translate }}</th>\\r\\n                        <th>{{ 'order.product-sku' | translate }}</th>\\r\\n                        <th>{{ 'order.unit-price' | translate }}</th>\\r\\n                        <th>{{ 'order.quantity' | translate }}</th>\\r\\n                        <th *ngIf=\\\"orderLineCustomFields.length\\\">{{ 'common.custom-fields' | translate }}</th>\\r\\n                        <th>{{ 'order.total' | translate }}</th>\\r\\n                    </tr>\\r\\n                </thead>\\r\\n                <tbody>\\r\\n                    <tr\\r\\n                        *ngFor=\\\"let line of order.lines; let i = index\\\"\\r\\n                        class=\\\"order-line\\\"\\r\\n                        [class.is-cancelled]=\\\"line.quantity === 0\\\"\\r\\n                        [class.modified]=\\\"isLineModified(line)\\\"\\r\\n                    >\\r\\n                        <td class=\\\"align-middle thumb\\\">\\r\\n                            <img\\r\\n                                *ngIf=\\\"line.featuredAsset\\\"\\r\\n                                [src]=\\\"line.featuredAsset | assetPreview: 'tiny'\\\"\\r\\n                            />\\r\\n                        </td>\\r\\n                        <td class=\\\"align-middle name\\\">{{ line.productVariant.name }}</td>\\r\\n                        <td class=\\\"align-middle sku\\\">{{ line.productVariant.sku }}</td>\\r\\n                        <td class=\\\"align-middle unit-price\\\">\\r\\n                            {{ line.unitPriceWithTax | localeCurrency: order.currencyCode }}\\r\\n                            <div class=\\\"net-price\\\" [title]=\\\"'order.net-price' | translate\\\">\\r\\n                                {{ line.unitPrice | localeCurrency: order.currencyCode }}\\r\\n                            </div>\\r\\n                        </td>\\r\\n                        <td class=\\\"align-middle quantity\\\">\\r\\n                            <input\\r\\n                                type=\\\"number\\\"\\r\\n                                min=\\\"0\\\"\\r\\n                                [value]=\\\"line.quantity\\\"\\r\\n                                (input)=\\\"updateLineQuantity(line, $event.target.value)\\\"\\r\\n                            />\\r\\n                            <vdr-line-refunds [line]=\\\"line\\\" [payments]=\\\"order.payments\\\"></vdr-line-refunds>\\r\\n                            <vdr-line-fulfillment\\r\\n                                [line]=\\\"line\\\"\\r\\n                                [orderState]=\\\"order.state\\\"\\r\\n                            ></vdr-line-fulfillment>\\r\\n                        </td>\\r\\n                        <td *ngIf=\\\"orderLineCustomFields.length\\\" class=\\\"order-line-custom-field align-middle\\\">\\r\\n                            <ng-container *ngFor=\\\"let customField of orderLineCustomFields\\\">\\r\\n                                <vdr-custom-field-control\\r\\n                                    [customField]=\\\"customField\\\"\\r\\n                                    [customFieldsFormGroup]=\\\"orderLineCustomFieldsFormArray.get([i])\\\"\\r\\n                                    entityName=\\\"OrderLine\\\"\\r\\n                                    [compact]=\\\"true\\\"\\r\\n                                ></vdr-custom-field-control>\\r\\n                            </ng-container>\\r\\n                        </td>\\r\\n                        <td class=\\\"align-middle total\\\">\\r\\n                            {{ line.linePriceWithTax | localeCurrency: order.currencyCode }}\\r\\n                            <div class=\\\"net-price\\\" [title]=\\\"'order.net-price' | translate\\\">\\r\\n                                {{ line.linePrice | localeCurrency: order.currencyCode }}\\r\\n                            </div>\\r\\n                        </td>\\r\\n                    </tr>\\r\\n                    <tr\\r\\n                        *ngFor=\\\"let addedLine of addedLines; trackBy: trackByProductVariantId; let i = index\\\"\\r\\n                        class=\\\"modified\\\"\\r\\n                    >\\r\\n                        <td class=\\\"align-middle thumb\\\">\\r\\n                            <img\\r\\n                                *ngIf=\\\"addedLine.productAsset\\\"\\r\\n                                [src]=\\\"addedLine.productAsset | assetPreview: 'tiny'\\\"\\r\\n                            />\\r\\n                        </td>\\r\\n                        <td class=\\\"align-middle name\\\">{{ addedLine.productVariantName }}</td>\\r\\n                        <td class=\\\"align-middle sku\\\">{{ addedLine.sku }}</td>\\r\\n                        <td class=\\\"align-middle unit-price\\\">\\r\\n                            {{ addedLine.priceWithTax | localeCurrency: order.currencyCode }}\\r\\n                            <div class=\\\"net-price\\\" [title]=\\\"'order.net-price' | translate\\\">\\r\\n                                {{ addedLine.price | localeCurrency: order.currencyCode }}\\r\\n                            </div>\\r\\n                        </td>\\r\\n                        <td class=\\\"align-middle quantity\\\">\\r\\n                            <input\\r\\n                                type=\\\"number\\\"\\r\\n                                min=\\\"0\\\"\\r\\n                                [value]=\\\"addedLine.quantity\\\"\\r\\n                                (input)=\\\"updateAddedItemQuantity(addedLine, $event.target.value)\\\"\\r\\n                            />\\r\\n                            <button class=\\\"icon-button\\\" (click)=\\\"removeAddedItem(i)\\\">\\r\\n                                <clr-icon shape=\\\"trash\\\"></clr-icon>\\r\\n                            </button>\\r\\n                        </td>\\r\\n                        <td *ngIf=\\\"orderLineCustomFields.length\\\" class=\\\"order-line-custom-field align-middle\\\">\\r\\n                            <ng-container *ngFor=\\\"let customField of orderLineCustomFields\\\">\\r\\n                                <vdr-custom-field-control\\r\\n                                    [customField]=\\\"customField\\\"\\r\\n                                    [customFieldsFormGroup]=\\\"addItemCustomFieldsFormArray.get([i])\\\"\\r\\n                                    entityName=\\\"OrderLine\\\"\\r\\n                                    [compact]=\\\"true\\\"\\r\\n                                ></vdr-custom-field-control>\\r\\n                            </ng-container>\\r\\n                        </td>\\r\\n                        <td class=\\\"align-middle total\\\">\\r\\n                            {{\\r\\n                                (addedLine.priceWithTax * addedLine.quantity) / 100\\r\\n                                    | currency: order.currencyCode\\r\\n                            }}\\r\\n                            <div class=\\\"net-price\\\" [title]=\\\"'order.net-price' | translate\\\">\\r\\n                                {{\\r\\n                                    (addedLine.price * addedLine.quantity) / 100\\r\\n                                        | currency: order.currencyCode\\r\\n                                }}\\r\\n                            </div>\\r\\n                        </td>\\r\\n                    </tr>\\r\\n                    <tr class=\\\"surcharge\\\" *ngFor=\\\"let surcharge of order.surcharges\\\">\\r\\n                        <td class=\\\"align-middle name left\\\" colspan=\\\"2\\\">{{ surcharge.description }}</td>\\r\\n                        <td class=\\\"align-middle sku\\\">{{ surcharge.sku }}</td>\\r\\n                        <td class=\\\"align-middle\\\"></td>\\r\\n                        <td></td>\\r\\n                        <td *ngIf=\\\"orderLineCustomFields.length\\\"></td>\\r\\n                        <td class=\\\"align-middle total\\\">\\r\\n                            {{ surcharge.priceWithTax | localeCurrency: order.currencyCode }}\\r\\n                            <div class=\\\"net-price\\\" [title]=\\\"'order.net-price' | translate\\\">\\r\\n                                {{ surcharge.price | localeCurrency: order.currencyCode }}\\r\\n                            </div>\\r\\n                        </td>\\r\\n                    </tr>\\r\\n                    <tr\\r\\n                        class=\\\"surcharge modified\\\"\\r\\n                        *ngFor=\\\"let surcharge of modifyOrderInput.surcharges; let i = index\\\"\\r\\n                    >\\r\\n                        <td class=\\\"align-middle name left\\\" colspan=\\\"2\\\">\\r\\n                            {{ surcharge.description }}\\r\\n                            <button class=\\\"icon-button\\\" (click)=\\\"removeSurcharge(i)\\\">\\r\\n                                <clr-icon shape=\\\"trash\\\"></clr-icon>\\r\\n                            </button>\\r\\n                        </td>\\r\\n                        <td class=\\\"align-middle sku\\\">{{ surcharge.sku }}</td>\\r\\n                        <td class=\\\"align-middle\\\"></td>\\r\\n                        <td></td>\\r\\n                        <td *ngIf=\\\"orderLineCustomFields.length\\\"></td>\\r\\n                        <td class=\\\"align-middle total\\\">\\r\\n                            <ng-container *ngIf=\\\"getSurchargePrices(surcharge) as surchargePrice\\\">\\r\\n                                {{ surchargePrice.priceWithTax | localeCurrency: order.currencyCode }}\\r\\n                                <div class=\\\"net-price\\\" [title]=\\\"'order.net-price' | translate\\\">\\r\\n                                    {{ surchargePrice.price | localeCurrency: order.currencyCode }}\\r\\n                                </div>\\r\\n                            </ng-container>\\r\\n                        </td>\\r\\n                    </tr>\\r\\n                    <tr class=\\\"shipping\\\">\\r\\n                        <td class=\\\"left clr-align-middle\\\">{{ 'order.shipping' | translate }}</td>\\r\\n                        <td class=\\\"clr-align-middle\\\">{{ order.shippingLines[0]?.shippingMethod?.name }}</td>\\r\\n                        <td colspan=\\\"3\\\"></td>\\r\\n                        <td *ngIf=\\\"orderLineCustomFields.length\\\"></td>\\r\\n                        <td class=\\\"clr-align-middle\\\">\\r\\n                            {{ order.shippingWithTax | localeCurrency: order.currencyCode }}\\r\\n                            <div class=\\\"net-price\\\" [title]=\\\"'order.net-price' | translate\\\">\\r\\n                                {{ order.shipping | localeCurrency: order.currencyCode }}\\r\\n                            </div>\\r\\n                        </td>\\r\\n                    </tr>\\r\\n                </tbody>\\r\\n            </table>\\r\\n\\r\\n            <h4 class=\\\"mb2\\\">{{ 'order.modifications' | translate }}</h4>\\r\\n            <clr-accordion>\\r\\n                <clr-accordion-panel>\\r\\n                    <clr-accordion-title>{{ 'order.add-item-to-order' | translate }}</clr-accordion-title>\\r\\n                    <clr-accordion-content *clrIfExpanded>\\r\\n                        <vdr-product-selector class=\\\"mb4\\\" (productSelected)=\\\"addItemSelectedVariant = $event\\\">\\r\\n                        </vdr-product-selector>\\r\\n                        <div *ngIf=\\\"addItemSelectedVariant\\\" class=\\\"flex mb4\\\">\\r\\n                            <img\\r\\n                                *ngIf=\\\"addItemSelectedVariant.productAsset as asset\\\"\\r\\n                                [src]=\\\"asset | assetPreview: 'tiny'\\\"\\r\\n                                class=\\\"mr4\\\"\\r\\n                            />\\r\\n                            <div>\\r\\n                                <strong class=\\\"mr4\\\">{{ addItemSelectedVariant.productVariantName }}</strong>\\r\\n                                <small>{{ addItemSelectedVariant.sku }}</small>\\r\\n                                <div>\\r\\n                                    {{\\r\\n                                        getSelectedItemPrice(addItemSelectedVariant)\\r\\n                                            | localeCurrency: order.currencyCode\\r\\n                                    }}\\r\\n                                </div>\\r\\n                            </div>\\r\\n                        </div>\\r\\n                        <ng-container *ngFor=\\\"let customField of orderLineCustomFields\\\">\\r\\n                            <vdr-custom-field-control\\r\\n                                [readonly]=\\\"!addItemSelectedVariant\\\"\\r\\n                                [customField]=\\\"customField\\\"\\r\\n                                [customFieldsFormGroup]=\\\"addItemCustomFieldsForm\\\"\\r\\n                                entityName=\\\"OrderLine\\\"\\r\\n                                [compact]=\\\"true\\\"\\r\\n                            ></vdr-custom-field-control>\\r\\n                        </ng-container>\\r\\n                        <button\\r\\n                            class=\\\"btn btn-secondary\\\"\\r\\n                            [disabled]=\\\"!addItemSelectedVariant || addItemCustomFieldsForm.invalid\\\"\\r\\n                            (click)=\\\"addItemToOrder(addItemSelectedVariant)\\\"\\r\\n                        >\\r\\n                            {{ 'order.add-item-to-order' | translate }}\\r\\n                        </button>\\r\\n                    </clr-accordion-content>\\r\\n                </clr-accordion-panel>\\r\\n\\r\\n                <clr-accordion-panel>\\r\\n                    <clr-accordion-title>{{ 'order.add-surcharge' | translate }}</clr-accordion-title>\\r\\n                    <clr-accordion-content *clrIfExpanded>\\r\\n                        <form [formGroup]=\\\"surchargeForm\\\" (submit)=\\\"addSurcharge(surchargeForm.value)\\\">\\r\\n                            <vdr-form-field [label]=\\\"'common.description' | translate\\\" for=\\\"description\\\"\\r\\n                                ><input id=\\\"description\\\" type=\\\"text\\\" formControlName=\\\"description\\\"\\r\\n                            /></vdr-form-field>\\r\\n                            <vdr-form-field [label]=\\\"'order.product-sku' | translate\\\" for=\\\"sku\\\"\\r\\n                                ><input id=\\\"sku\\\" type=\\\"text\\\" formControlName=\\\"sku\\\"\\r\\n                            /></vdr-form-field>\\r\\n                            <vdr-form-field [label]=\\\"'common.price' | translate\\\" for=\\\"price\\\"\\r\\n                                ><vdr-currency-input\\r\\n                                    [currencyCode]=\\\"order.currencyCode\\\"\\r\\n                                    id=\\\"price\\\"\\r\\n                                    formControlName=\\\"price\\\"\\r\\n                                ></vdr-currency-input\\r\\n                            ></vdr-form-field>\\r\\n                            <vdr-form-field\\r\\n                                [label]=\\\"\\r\\n                                    'catalog.price-includes-tax-at'\\r\\n                                        | translate: { rate: surchargeForm.get('taxRate')?.value }\\r\\n                                \\\"\\r\\n                                for=\\\"priceIncludesTax\\\"\\r\\n                                ><input\\r\\n                                    id=\\\"priceIncludesTax\\\"\\r\\n                                    type=\\\"checkbox\\\"\\r\\n                                    clrCheckbox\\r\\n                                    formControlName=\\\"priceIncludesTax\\\"\\r\\n                            /></vdr-form-field>\\r\\n                            <vdr-form-field [label]=\\\"'order.tax-rate' | translate\\\" for=\\\"taxRate\\\"\\r\\n                                ><vdr-affixed-input suffix=\\\"%\\\"\\r\\n                                    ><input\\r\\n                                        id=\\\"taxRate\\\"\\r\\n                                        type=\\\"number\\\"\\r\\n                                        min=\\\"0\\\"\\r\\n                                        max=\\\"100\\\"\\r\\n                                        formControlName=\\\"taxRate\\\" /></vdr-affixed-input\\r\\n                            ></vdr-form-field>\\r\\n                            <vdr-form-field [label]=\\\"'order.tax-description' | translate\\\" for=\\\"taxDescription\\\"\\r\\n                                ><input id=\\\"taxDescription\\\" type=\\\"text\\\" formControlName=\\\"taxDescription\\\"\\r\\n                            /></vdr-form-field>\\r\\n                            <button\\r\\n                                class=\\\"btn btn-secondary\\\"\\r\\n                                [disabled]=\\\"\\r\\n                                    surchargeForm.invalid ||\\r\\n                                    surchargeForm.pristine ||\\r\\n                                    surchargeForm.get('price')?.value === 0\\r\\n                                \\\"\\r\\n                            >\\r\\n                                {{ 'order.add-surcharge' | translate }}\\r\\n                            </button>\\r\\n                        </form>\\r\\n                    </clr-accordion-content>\\r\\n                </clr-accordion-panel>\\r\\n                <clr-accordion-panel>\\r\\n                    <clr-accordion-title>{{ 'order.edit-shipping-address' | translate }}</clr-accordion-title>\\r\\n                    <clr-accordion-content *clrIfExpanded>\\r\\n                        <vdr-address-form\\r\\n                            [formGroup]=\\\"shippingAddressForm\\\"\\r\\n                            [availableCountries]=\\\"availableCountries$ | async\\\"\\r\\n                            [customFields]=\\\"addressCustomFields\\\"\\r\\n                        ></vdr-address-form>\\r\\n                    </clr-accordion-content>\\r\\n                </clr-accordion-panel>\\r\\n                <clr-accordion-panel>\\r\\n                    <clr-accordion-title>{{ 'order.edit-billing-address' | translate }}</clr-accordion-title>\\r\\n                    <clr-accordion-content *clrIfExpanded>\\r\\n                        <vdr-address-form\\r\\n                            [formGroup]=\\\"billingAddressForm\\\"\\r\\n                            [availableCountries]=\\\"availableCountries$ | async\\\"\\r\\n                            [customFields]=\\\"addressCustomFields\\\"\\r\\n                        ></vdr-address-form>\\r\\n                    </clr-accordion-content>\\r\\n                </clr-accordion-panel>\\r\\n            </clr-accordion>\\r\\n        </div>\\r\\n        <div class=\\\"clr-col-lg-4 order-cards\\\">\\r\\n            <div class=\\\"card\\\">\\r\\n                <div class=\\\"card-header\\\">\\r\\n                    {{ 'order.modification-summary' | translate }}\\r\\n                </div>\\r\\n                <div class=\\\"card-block\\\">\\r\\n                    <ul>\\r\\n                        <li *ngIf=\\\"modifyOrderInput.addItems?.length\\\">\\r\\n                            {{\\r\\n                                'order.modification-adding-items'\\r\\n                                    | translate: { count: modifyOrderInput.addItems?.length }\\r\\n                            }}\\r\\n                        </li>\\r\\n                        <li *ngIf=\\\"modifyOrderInput.adjustOrderLines?.length\\\">\\r\\n                            {{\\r\\n                                'order.modification-adjusting-lines'\\r\\n                                    | translate: { count: modifyOrderInput.adjustOrderLines?.length }\\r\\n                            }}\\r\\n                        </li>\\r\\n                        <li *ngIf=\\\"modifyOrderInput.surcharges?.length\\\">\\r\\n                            {{\\r\\n                                'order.modification-adding-surcharges'\\r\\n                                    | translate: { count: modifyOrderInput.surcharges?.length }\\r\\n                            }}\\r\\n                        </li>\\r\\n                        <li *ngIf=\\\"shippingAddressForm.dirty\\\">\\r\\n                            {{ 'order.modification-updating-shipping-address' | translate }}\\r\\n                        </li>\\r\\n                        <li *ngIf=\\\"billingAddressForm.dirty\\\">\\r\\n                            {{ 'order.modification-updating-billing-address' | translate }}\\r\\n                        </li>\\r\\n                    </ul>\\r\\n                </div>\\r\\n                <div class=\\\"card-block\\\">\\r\\n                    <label class=\\\"clr-control-label\\\">{{ 'order.note' | translate }}</label>\\r\\n                    <textarea [(ngModel)]=\\\"note\\\" name=\\\"note\\\" clrTextarea required></textarea>\\r\\n                    <clr-checkbox-wrapper class=\\\"\\\">\\r\\n                        <input type=\\\"checkbox\\\" clrCheckbox [(ngModel)]=\\\"recalculateShipping\\\" />\\r\\n                        <label>{{ 'order.modification-recalculate-shipping' | translate }}</label>\\r\\n                    </clr-checkbox-wrapper>\\r\\n                </div>\\r\\n                <div class=\\\"card-footer\\\">\\r\\n                    <button\\r\\n                        class=\\\"btn btn-primary\\\"\\r\\n                        [disabled]=\\\"!canPreviewChanges()\\\"\\r\\n                        (click)=\\\"previewAndModify(order)\\\"\\r\\n                    >\\r\\n                        {{ 'order.preview-changes' | translate }}\\r\\n                    </button>\\r\\n                </div>\\r\\n            </div>\\r\\n        </div>\\r\\n    </div>\\r\\n</div>\\r\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\".order-table .is-cancelled td{text-decoration:line-through;background-color:var(--color-component-bg-200)}.order-table .sub-total td,.order-table .total td{border-top:1px dashed var(--color-component-border-200)}.order-table .total td{font-weight:700}.order-table td.custom-fields-row{border-top-style:dashed;border-top-color:var(--color-grey-200)}.order-table .order-line-custom-fields{display:flex;flex-wrap:wrap}.order-table .order-line-custom-fields .custom-field{text-align:start;max-width:200px;overflow:hidden;text-overflow:ellipsis;margin-bottom:6px;margin-right:18px}.order-table .order-line-custom-field{background-color:var(--color-component-bg-100)}.order-table .net-price,.order-table .order-line-custom-field .custom-field-ellipsis{color:var(--color-text-300)}.order-table .net-price{font-size:11px}.order-table .promotions-label{-webkit-text-decoration:underline dotted var(--color-text-200);text-decoration:underline dotted var(--color-text-200);font-size:11px;margin-top:6px;cursor:pointer;text-transform:lowercase}.order-table tr.modified td{background-color:var(--color-warning-100)}\"]\n            }]\n    }], function () { return [{ type: ɵngcc8.Router }, { type: ɵngcc8.ActivatedRoute }, { type: ɵngcc1.ServerConfigService }, { type: ɵngcc0.ChangeDetectorRef }, { type: ɵngcc1.DataService }, { type: ɵngcc1.NotificationService }, { type: ɵngcc1.ModalService }, { type: OrderTransitionService }]; }, null); })();\n\nclass OrderHistoryComponent {\r\n    constructor() {\r\n        this.addNote = new EventEmitter();\r\n        this.updateNote = new EventEmitter();\r\n        this.deleteNote = new EventEmitter();\r\n        this.note = '';\r\n        this.noteIsPrivate = true;\r\n        this.expanded = false;\r\n        this.type = HistoryEntryType;\r\n    }\r\n    getDisplayType(entry) {\r\n        if (entry.type === HistoryEntryType.ORDER_STATE_TRANSITION) {\r\n            if (entry.data.to === 'Delivered') {\r\n                return 'success';\r\n            }\r\n            if (entry.data.to === 'Cancelled') {\r\n                return 'error';\r\n            }\r\n        }\r\n        if (entry.type === HistoryEntryType.ORDER_FULFILLMENT_TRANSITION) {\r\n            if (entry.data.to === 'Delivered') {\r\n                return 'success';\r\n            }\r\n        }\r\n        if (entry.type === HistoryEntryType.ORDER_PAYMENT_TRANSITION) {\r\n            if (entry.data.to === 'Declined' || entry.data.to === 'Cancelled') {\r\n                return 'error';\r\n            }\r\n        }\r\n        if (entry.type === HistoryEntryType.ORDER_CANCELLATION) {\r\n            return 'error';\r\n        }\r\n        if (entry.type === HistoryEntryType.ORDER_REFUND_TRANSITION) {\r\n            return 'warning';\r\n        }\r\n        return 'default';\r\n    }\r\n    getTimelineIcon(entry) {\r\n        if (entry.type === HistoryEntryType.ORDER_STATE_TRANSITION) {\r\n            if (entry.data.to === 'Delivered') {\r\n                return ['success-standard', 'is-solid'];\r\n            }\r\n            if (entry.data.to === 'Cancelled') {\r\n                return 'ban';\r\n            }\r\n        }\r\n        if (entry.type === HistoryEntryType.ORDER_PAYMENT_TRANSITION) {\r\n            if (entry.data.to === 'Settled') {\r\n                return 'credit-card';\r\n            }\r\n        }\r\n        if (entry.type === HistoryEntryType.ORDER_NOTE) {\r\n            return 'note';\r\n        }\r\n        if (entry.type === HistoryEntryType.ORDER_MODIFIED) {\r\n            return 'pencil';\r\n        }\r\n        if (entry.type === HistoryEntryType.ORDER_FULFILLMENT_TRANSITION) {\r\n            if (entry.data.to === 'Shipped') {\r\n                return 'truck';\r\n            }\r\n            if (entry.data.to === 'Delivered') {\r\n                return 'truck';\r\n            }\r\n        }\r\n    }\r\n    isFeatured(entry) {\r\n        switch (entry.type) {\r\n            case HistoryEntryType.ORDER_STATE_TRANSITION: {\r\n                return (entry.data.to === 'Delivered' ||\r\n                    entry.data.to === 'Cancelled' ||\r\n                    entry.data.to === 'Settled');\r\n            }\r\n            case HistoryEntryType.ORDER_PAYMENT_TRANSITION:\r\n                return entry.data.to === 'Settled' || entry.data.to === 'Cancelled';\r\n            case HistoryEntryType.ORDER_FULFILLMENT_TRANSITION:\r\n                return entry.data.to === 'Delivered' || entry.data.to === 'Shipped';\r\n            case HistoryEntryType.ORDER_NOTE:\r\n            case HistoryEntryType.ORDER_MODIFIED:\r\n                return true;\r\n            default:\r\n                return false;\r\n        }\r\n    }\r\n    getFulfillment(entry) {\r\n        if ((entry.type === HistoryEntryType.ORDER_FULFILLMENT ||\r\n            entry.type === HistoryEntryType.ORDER_FULFILLMENT_TRANSITION) &&\r\n            this.order.fulfillments) {\r\n            return this.order.fulfillments.find(f => f.id === entry.data.fulfillmentId);\r\n        }\r\n    }\r\n    getPayment(entry) {\r\n        if (entry.type === HistoryEntryType.ORDER_PAYMENT_TRANSITION && this.order.payments) {\r\n            return this.order.payments.find(p => p.id === entry.data.paymentId);\r\n        }\r\n    }\r\n    getCancelledItems(entry) {\r\n        const itemMap = new Map();\r\n        const cancelledItemIds = entry.data.orderItemIds;\r\n        for (const line of this.order.lines) {\r\n            for (const item of line.items) {\r\n                if (cancelledItemIds.includes(item.id)) {\r\n                    const count = itemMap.get(line.productVariant.name);\r\n                    if (count != null) {\r\n                        itemMap.set(line.productVariant.name, count + 1);\r\n                    }\r\n                    else {\r\n                        itemMap.set(line.productVariant.name, 1);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return Array.from(itemMap.entries()).map(([name, quantity]) => ({ name, quantity }));\r\n    }\r\n    getModification(id) {\r\n        return this.order.modifications.find(m => m.id === id);\r\n    }\r\n    getName(entry) {\r\n        const { administrator } = entry;\r\n        if (administrator) {\r\n            return `${administrator.firstName} ${administrator.lastName}`;\r\n        }\r\n        else {\r\n            const customer = this.order.customer;\r\n            if (customer) {\r\n                return `${customer.firstName} ${customer.lastName}`;\r\n            }\r\n        }\r\n        return '';\r\n    }\r\n    addNoteToOrder() {\r\n        this.addNote.emit({ note: this.note, isPublic: !this.noteIsPrivate });\r\n        this.note = '';\r\n        this.noteIsPrivate = true;\r\n    }\r\n}\nOrderHistoryComponent.ɵfac = function OrderHistoryComponent_Factory(t) { return new (t || OrderHistoryComponent)(); };\nOrderHistoryComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: OrderHistoryComponent, selectors: [[\"vdr-order-history\"]], inputs: { order: \"order\", history: \"history\" }, outputs: { addNote: \"addNote\", updateNote: \"updateNote\", deleteNote: \"deleteNote\" }, decls: 23, vars: 24, consts: [[1, \"entry-list\"], [\"iconShape\", \"note\", \"displayType\", \"muted\", 3, \"featured\"], [1, \"note-entry\"], [\"name\", \"note\", 1, \"note\", 3, \"ngModel\", \"ngModelChange\"], [1, \"btn\", \"btn-secondary\", 3, \"disabled\", \"click\"], [1, \"visibility-select\"], [\"type\", \"checkbox\", \"clrCheckbox\", \"\", 3, \"ngModel\", \"ngModelChange\"], [\"class\", \"private\", 4, \"ngIf\"], [\"class\", \"public\", 4, \"ngIf\"], [3, \"displayType\", \"iconShape\", \"createdAt\", \"name\", \"featured\", \"collapsed\", \"expandClick\", 4, \"ngFor\", \"ngForOf\"], [3, \"isLast\", \"createdAt\", \"featured\"], [1, \"title\"], [1, \"private\"], [1, \"public\"], [3, \"displayType\", \"iconShape\", \"createdAt\", \"name\", \"featured\", \"collapsed\", \"expandClick\"], [3, \"ngSwitch\"], [4, \"ngSwitchCase\"], [\"class\", \"title\", 4, \"ngIf\"], [3, \"ngIf\"], [4, \"ngIf\"], [\"colorType\", \"success\", 4, \"ngIf\"], [\"colorType\", \"error\", 4, \"ngIf\"], [3, \"order\", \"modification\"], [\"colorType\", \"success\"], [\"colorType\", \"error\"], [4, \"ngIf\", \"ngIfElse\"], [\"regularPaymentTransition\", \"\"], [3, \"payment\", \"currencyCode\"], [3, \"label\"], [3, \"items\"], [3, \"fulfillmentId\", \"order\"], [1, \"flex\"], [1, \"note-text\"], [\"class\", \"note-visibility public\", 4, \"ngIf\"], [\"class\", \"note-visibility private\", 4, \"ngIf\"], [1, \"flex-spacer\"], [\"vdrDropdownTrigger\", \"\", 1, \"icon-button\"], [\"shape\", \"ellipsis-vertical\"], [\"vdrPosition\", \"bottom-right\"], [\"vdrDropdownItem\", \"\", 1, \"button\", 3, \"disabled\", \"click\"], [\"shape\", \"edit\"], [1, \"dropdown-divider\"], [\"shape\", \"trash\", 1, \"is-danger\"], [1, \"note-visibility\", \"public\"], [1, \"note-visibility\", \"private\"], [3, \"routerLink\"], [1, \"cancelled-coupon-code\"]], template: function OrderHistoryComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"h4\");\n        ɵngcc0.ɵɵtext(1);\n        ɵngcc0.ɵɵpipe(2, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(3, \"div\", 0);\n        ɵngcc0.ɵɵelementStart(4, \"vdr-timeline-entry\", 1);\n        ɵngcc0.ɵɵelementStart(5, \"div\", 2);\n        ɵngcc0.ɵɵelementStart(6, \"textarea\", 3);\n        ɵngcc0.ɵɵlistener(\"ngModelChange\", function OrderHistoryComponent_Template_textarea_ngModelChange_6_listener($event) { return ctx.note = $event; });\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(7, \"button\", 4);\n        ɵngcc0.ɵɵlistener(\"click\", function OrderHistoryComponent_Template_button_click_7_listener() { return ctx.addNoteToOrder(); });\n        ɵngcc0.ɵɵtext(8);\n        ɵngcc0.ɵɵpipe(9, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(10, \"div\", 5);\n        ɵngcc0.ɵɵelementStart(11, \"clr-checkbox-wrapper\");\n        ɵngcc0.ɵɵelementStart(12, \"input\", 6);\n        ɵngcc0.ɵɵlistener(\"ngModelChange\", function OrderHistoryComponent_Template_input_ngModelChange_12_listener($event) { return ctx.noteIsPrivate = $event; });\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(13, \"label\");\n        ɵngcc0.ɵɵtext(14);\n        ɵngcc0.ɵɵpipe(15, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵtemplate(16, OrderHistoryComponent_span_16_Template, 3, 3, \"span\", 7);\n        ɵngcc0.ɵɵtemplate(17, OrderHistoryComponent_span_17_Template, 3, 3, \"span\", 8);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵtemplate(18, OrderHistoryComponent_vdr_timeline_entry_18_Template, 12, 17, \"vdr-timeline-entry\", 9);\n        ɵngcc0.ɵɵelementStart(19, \"vdr-timeline-entry\", 10);\n        ɵngcc0.ɵɵelementStart(20, \"div\", 11);\n        ɵngcc0.ɵɵtext(21);\n        ɵngcc0.ɵɵpipe(22, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(2, 16, \"order.order-history\"));\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵclassProp(\"expanded\", ctx.expanded);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"featured\", true);\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"ngModel\", ctx.note);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"disabled\", !ctx.note);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(9, 18, \"common.add-note\"), \" \");\n        ɵngcc0.ɵɵadvance(4);\n        ɵngcc0.ɵɵproperty(\"ngModel\", ctx.noteIsPrivate);\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(15, 20, \"order.note-is-private\"));\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.noteIsPrivate);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", !ctx.noteIsPrivate);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngForOf\", ctx.history);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"isLast\", true)(\"createdAt\", ctx.order.createdAt)(\"featured\", true);\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(22, 22, \"order.history-order-created\"), \" \");\n    } }, directives: function () { return [ɵngcc1.TimelineEntryComponent, ɵngcc1.FormFieldControlDirective, ɵngcc2.DefaultValueAccessor, ɵngcc2.NgControlStatus, ɵngcc2.NgModel, ɵngcc6.ClrCheckboxWrapper, ɵngcc2.CheckboxControlValueAccessor, ɵngcc6.ClrCheckbox, ɵngcc6.ClrLabel, ɵngcc5.NgIf, ɵngcc5.NgForOf, ɵngcc5.NgSwitch, ɵngcc5.NgSwitchCase, ɵngcc1.HistoryEntryDetailComponent, ModificationDetailComponent, ɵngcc1.ChipComponent, PaymentDetailComponent, ɵngcc1.LabeledDataComponent, SimpleItemListComponent, FulfillmentDetailComponent, ɵngcc1.DropdownComponent, ɵngcc1.DropdownTriggerDirective, ɵngcc6.ClrIconCustomTag, ɵngcc1.DropdownMenuComponent, ɵngcc1.DropdownItemDirective, ɵngcc8.RouterLinkWithHref]; }, pipes: function () { return [ɵngcc4.TranslatePipe, ɵngcc1.LocaleCurrencyPipe, ɵngcc1.HasPermissionPipe]; }, styles: [\"[_nghost-%COMP%]{margin-top:48px;display:block}.entry-list[_ngcontent-%COMP%]{margin-top:24px;margin-left:24px;margin-right:12px}.note-entry[_ngcontent-%COMP%]{display:flex;align-items:center}.note-entry[_ngcontent-%COMP%]   .note[_ngcontent-%COMP%]{flex:1}.note-entry[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:0}.visibility-select[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:baseline}.visibility-select[_ngcontent-%COMP%]   .public[_ngcontent-%COMP%]{color:var(--color-warning-500)}.visibility-select[_ngcontent-%COMP%]   .private[_ngcontent-%COMP%]{color:var(--color-success-500)}textarea.note[_ngcontent-%COMP%]{flex:1;height:36px;border-radius:3px;margin-right:6px}.note-text[_ngcontent-%COMP%]{color:var(--color-grey-800);white-space:pre-wrap}.cancelled-coupon-code[_ngcontent-%COMP%]{text-decoration:line-through}.note-visibility[_ngcontent-%COMP%]{text-transform:lowercase}.note-visibility.public[_ngcontent-%COMP%]{color:var(--color-warning-500)}.note-visibility.private[_ngcontent-%COMP%]{color:var(--color-success-500)}\"], changeDetection: 0 });\r\nOrderHistoryComponent.propDecorators = {\r\n    order: [{ type: Input }],\r\n    history: [{ type: Input }],\r\n    addNote: [{ type: Output }],\r\n    updateNote: [{ type: Output }],\r\n    deleteNote: [{ type: Output }]\r\n};\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(OrderHistoryComponent, [{\n        type: Component,\n        args: [{\n                selector: 'vdr-order-history',\n                template: \"<h4>{{ 'order.order-history' | translate }}</h4>\\r\\n<div class=\\\"entry-list\\\" [class.expanded]=\\\"expanded\\\">\\r\\n    <vdr-timeline-entry iconShape=\\\"note\\\" displayType=\\\"muted\\\" [featured]=\\\"true\\\">\\r\\n        <div class=\\\"note-entry\\\">\\r\\n            <textarea [(ngModel)]=\\\"note\\\" name=\\\"note\\\" class=\\\"note\\\"></textarea>\\r\\n            <button class=\\\"btn btn-secondary\\\" [disabled]=\\\"!note\\\" (click)=\\\"addNoteToOrder()\\\">\\r\\n                {{ 'common.add-note' | translate }}\\r\\n            </button>\\r\\n        </div>\\r\\n        <div class=\\\"visibility-select\\\">\\r\\n            <clr-checkbox-wrapper>\\r\\n                <input type=\\\"checkbox\\\" clrCheckbox [(ngModel)]=\\\"noteIsPrivate\\\" />\\r\\n                <label>{{ 'order.note-is-private' | translate }}</label>\\r\\n            </clr-checkbox-wrapper>\\r\\n            <span *ngIf=\\\"noteIsPrivate\\\" class=\\\"private\\\">\\r\\n                {{ 'order.note-only-visible-to-administrators' | translate }}\\r\\n            </span>\\r\\n            <span *ngIf=\\\"!noteIsPrivate\\\" class=\\\"public\\\">\\r\\n                {{ 'order.note-visible-to-customer' | translate }}\\r\\n            </span>\\r\\n        </div>\\r\\n    </vdr-timeline-entry>\\r\\n    <vdr-timeline-entry\\r\\n        *ngFor=\\\"let entry of history\\\"\\r\\n        [displayType]=\\\"getDisplayType(entry)\\\"\\r\\n        [iconShape]=\\\"getTimelineIcon(entry)\\\"\\r\\n        [createdAt]=\\\"entry.createdAt\\\"\\r\\n        [name]=\\\"getName(entry)\\\"\\r\\n        [featured]=\\\"isFeatured(entry)\\\"\\r\\n        [collapsed]=\\\"!expanded && !isFeatured(entry)\\\"\\r\\n        (expandClick)=\\\"expanded = !expanded\\\"\\r\\n    >\\r\\n        <ng-container [ngSwitch]=\\\"entry.type\\\">\\r\\n            <ng-container *ngSwitchCase=\\\"type.ORDER_STATE_TRANSITION\\\">\\r\\n                <div class=\\\"title\\\" *ngIf=\\\"entry.data.to === 'Delivered'\\\">\\r\\n                    {{ 'order.history-order-fulfilled' | translate }}\\r\\n                </div>\\r\\n                <div class=\\\"title\\\" *ngIf=\\\"entry.data.to === 'Cancelled'\\\">\\r\\n                    {{ 'order.history-order-cancelled' | translate }}\\r\\n                </div>\\r\\n                <ng-template [ngIf]=\\\"entry.data.to !== 'Cancelled' && entry.data.to !== 'Delivered'\\\">\\r\\n                    {{\\r\\n                        'order.history-order-transition'\\r\\n                            | translate: { from: entry.data.from, to: entry.data.to }\\r\\n                    }}\\r\\n                </ng-template>\\r\\n            </ng-container>\\r\\n            <ng-container *ngSwitchCase=\\\"type.ORDER_MODIFIED\\\">\\r\\n                <div class=\\\"title\\\">\\r\\n                    {{ 'order.history-order-modified' | translate }}\\r\\n                </div>\\r\\n                <ng-container *ngIf=\\\"getModification(entry.data.modificationId) as modification\\\">\\r\\n                    {{ 'order.modify-order-price-difference' | translate }}:\\r\\n                    <strong>{{ modification.priceChange | localeCurrency: order.currencyCode }}</strong>\\r\\n                    <vdr-chip colorType=\\\"success\\\" *ngIf=\\\"modification.isSettled\\\">{{\\r\\n                        'order.modification-settled' | translate\\r\\n                    }}</vdr-chip>\\r\\n                    <vdr-chip colorType=\\\"error\\\" *ngIf=\\\"!modification.isSettled\\\">{{\\r\\n                        'order.modification-not-settled' | translate\\r\\n                    }}</vdr-chip>\\r\\n                    <vdr-history-entry-detail>\\r\\n                        <vdr-modification-detail\\r\\n                            [order]=\\\"order\\\"\\r\\n                            [modification]=\\\"modification\\\"\\r\\n                        ></vdr-modification-detail>\\r\\n                    </vdr-history-entry-detail>\\r\\n                </ng-container>\\r\\n            </ng-container>\\r\\n            <ng-container *ngSwitchCase=\\\"type.ORDER_PAYMENT_TRANSITION\\\">\\r\\n                <ng-container *ngIf=\\\"entry.data.to === 'Settled'; else regularPaymentTransition\\\">\\r\\n                    <div class=\\\"title\\\">\\r\\n                        {{ 'order.history-payment-settled' | translate }}\\r\\n                    </div>\\r\\n                    {{ 'order.transaction-id' | translate }}: {{ getPayment(entry)?.transactionId }}\\r\\n                    <vdr-history-entry-detail *ngIf=\\\"getPayment(entry) as payment\\\">\\r\\n                        <vdr-payment-detail\\r\\n                            [payment]=\\\"payment\\\"\\r\\n                            [currencyCode]=\\\"order.currencyCode\\\"\\r\\n                        ></vdr-payment-detail>\\r\\n                    </vdr-history-entry-detail>\\r\\n                </ng-container>\\r\\n                <ng-template #regularPaymentTransition>\\r\\n                    {{\\r\\n                        'order.history-payment-transition'\\r\\n                            | translate\\r\\n                                : {\\r\\n                                      from: entry.data.from,\\r\\n                                      to: entry.data.to,\\r\\n                                      id: getPayment(entry)?.transactionId\\r\\n                                  }\\r\\n                    }}\\r\\n                </ng-template>\\r\\n            </ng-container>\\r\\n            <ng-container *ngSwitchCase=\\\"type.ORDER_REFUND_TRANSITION\\\">\\r\\n                {{\\r\\n                    'order.history-refund-transition'\\r\\n                        | translate: { from: entry.data.from, to: entry.data.to, id: entry.data.refundId }\\r\\n                }}\\r\\n            </ng-container>\\r\\n            <ng-container *ngSwitchCase=\\\"type.ORDER_CANCELLATION\\\">\\r\\n                {{ 'order.history-items-cancelled' | translate: { count: entry.data.orderItemIds.length } }}\\r\\n                <vdr-history-entry-detail *ngIf=\\\"getCancelledItems(entry) as items\\\">\\r\\n                    <vdr-labeled-data [label]=\\\"'order.cancellation-reason' | translate\\\">\\r\\n                        {{ entry.data.reason }}\\r\\n                    </vdr-labeled-data>\\r\\n                    <vdr-labeled-data [label]=\\\"'order.contents' | translate\\\">\\r\\n                        <vdr-simple-item-list [items]=\\\"items\\\"></vdr-simple-item-list>\\r\\n                    </vdr-labeled-data>\\r\\n                </vdr-history-entry-detail>\\r\\n            </ng-container>\\r\\n            <ng-container *ngSwitchCase=\\\"type.ORDER_FULFILLMENT\\\">\\r\\n                {{ 'order.history-fulfillment-created' | translate }}\\r\\n                <vdr-history-entry-detail *ngIf=\\\"getFulfillment(entry) as fulfillment\\\">\\r\\n                    <vdr-fulfillment-detail\\r\\n                        [fulfillmentId]=\\\"fulfillment.id\\\"\\r\\n                        [order]=\\\"order\\\"\\r\\n                    ></vdr-fulfillment-detail>\\r\\n                </vdr-history-entry-detail>\\r\\n            </ng-container>\\r\\n            <ng-container *ngSwitchCase=\\\"type.ORDER_FULFILLMENT_TRANSITION\\\">\\r\\n                <ng-container *ngIf=\\\"entry.data.to === 'Delivered'\\\">\\r\\n                    <div class=\\\"title\\\">\\r\\n                        {{ 'order.history-fulfillment-delivered' | translate }}\\r\\n                    </div>\\r\\n                    {{ 'order.tracking-code' | translate }}: {{ getFulfillment(entry)?.trackingCode }}\\r\\n                </ng-container>\\r\\n                <ng-container *ngIf=\\\"entry.data.to === 'Shipped'\\\">\\r\\n                    <div class=\\\"title\\\">\\r\\n                        {{ 'order.history-fulfillment-shipped' | translate }}\\r\\n                    </div>\\r\\n                    {{ 'order.tracking-code' | translate }}: {{ getFulfillment(entry)?.trackingCode }}\\r\\n                </ng-container>\\r\\n                <ng-container *ngIf=\\\"entry.data.to !== 'Delivered' && entry.data.to !== 'Shipped'\\\">\\r\\n                    {{\\r\\n                        'order.history-fulfillment-transition'\\r\\n                            | translate: { from: entry.data.from, to: entry.data.to }\\r\\n                    }}\\r\\n                </ng-container>\\r\\n                <vdr-history-entry-detail *ngIf=\\\"getFulfillment(entry) as fulfillment\\\">\\r\\n                    <vdr-fulfillment-detail\\r\\n                        [fulfillmentId]=\\\"fulfillment.id\\\"\\r\\n                        [order]=\\\"order\\\"\\r\\n                    ></vdr-fulfillment-detail>\\r\\n                </vdr-history-entry-detail>\\r\\n            </ng-container>\\r\\n            <ng-container *ngSwitchCase=\\\"type.ORDER_NOTE\\\">\\r\\n                <div class=\\\"flex\\\">\\r\\n                    <div class=\\\"note-text\\\">\\r\\n                        <span *ngIf=\\\"entry.isPublic\\\" class=\\\"note-visibility public\\\">{{\\r\\n                            'common.public' | translate\\r\\n                        }}</span>\\r\\n                        <span *ngIf=\\\"!entry.isPublic\\\" class=\\\"note-visibility private\\\">{{\\r\\n                            'common.private' | translate\\r\\n                        }}</span>\\r\\n                        {{ entry.data.note }}\\r\\n                    </div>\\r\\n                    <div class=\\\"flex-spacer\\\"></div>\\r\\n                    <vdr-dropdown>\\r\\n                        <button class=\\\"icon-button\\\" vdrDropdownTrigger>\\r\\n                            <clr-icon shape=\\\"ellipsis-vertical\\\"></clr-icon>\\r\\n                        </button>\\r\\n                        <vdr-dropdown-menu vdrPosition=\\\"bottom-right\\\">\\r\\n                            <button\\r\\n                                class=\\\"button\\\"\\r\\n                                vdrDropdownItem\\r\\n                                (click)=\\\"updateNote.emit(entry)\\\"\\r\\n                                [disabled]=\\\"!('UpdateOrder' | hasPermission)\\\"\\r\\n                            >\\r\\n                                <clr-icon shape=\\\"edit\\\"></clr-icon>\\r\\n                                {{ 'common.edit' | translate }}\\r\\n                            </button>\\r\\n                            <div class=\\\"dropdown-divider\\\"></div>\\r\\n                            <button\\r\\n                                class=\\\"button\\\"\\r\\n                                vdrDropdownItem\\r\\n                                (click)=\\\"deleteNote.emit(entry)\\\"\\r\\n                                [disabled]=\\\"!('UpdateOrder' | hasPermission)\\\"\\r\\n                            >\\r\\n                                <clr-icon shape=\\\"trash\\\" class=\\\"is-danger\\\"></clr-icon>\\r\\n                                {{ 'common.delete' | translate }}\\r\\n                            </button>\\r\\n                        </vdr-dropdown-menu>\\r\\n                    </vdr-dropdown>\\r\\n                </div>\\r\\n            </ng-container>\\r\\n            <ng-container *ngSwitchCase=\\\"type.ORDER_COUPON_APPLIED\\\">\\r\\n                {{ 'order.history-coupon-code-applied' | translate }}:\\r\\n                <vdr-chip>\\r\\n                    <a [routerLink]=\\\"['/marketing', 'promotions', entry.data.promotionId]\\\">{{\\r\\n                        entry.data.couponCode\\r\\n                    }}</a>\\r\\n                </vdr-chip>\\r\\n            </ng-container>\\r\\n            <ng-container *ngSwitchCase=\\\"type.ORDER_COUPON_REMOVED\\\">\\r\\n                {{ 'order.history-coupon-code-removed' | translate }}:\\r\\n                <vdr-chip\\r\\n                    ><span class=\\\"cancelled-coupon-code\\\">{{ entry.data.couponCode }}</span></vdr-chip\\r\\n                >\\r\\n            </ng-container>\\r\\n        </ng-container>\\r\\n    </vdr-timeline-entry>\\r\\n    <vdr-timeline-entry [isLast]=\\\"true\\\" [createdAt]=\\\"order.createdAt\\\" [featured]=\\\"true\\\">\\r\\n        <div class=\\\"title\\\">\\r\\n            {{ 'order.history-order-created' | translate }}\\r\\n        </div>\\r\\n    </vdr-timeline-entry>\\r\\n</div>\\r\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\":host{margin-top:48px;display:block}.entry-list{margin-top:24px;margin-left:24px;margin-right:12px}.note-entry{display:flex;align-items:center}.note-entry .note{flex:1}.note-entry button{margin:0}.visibility-select{display:flex;justify-content:space-between;align-items:baseline}.visibility-select .public{color:var(--color-warning-500)}.visibility-select .private{color:var(--color-success-500)}textarea.note{flex:1;height:36px;border-radius:3px;margin-right:6px}.note-text{color:var(--color-grey-800);white-space:pre-wrap}.cancelled-coupon-code{text-decoration:line-through}.note-visibility{text-transform:lowercase}.note-visibility.public{color:var(--color-warning-500)}.note-visibility.private{color:var(--color-success-500)}\"]\n            }]\n    }], function () { return []; }, { addNote: [{\n            type: Output\n        }], updateNote: [{\n            type: Output\n        }], deleteNote: [{\n            type: Output\n        }], order: [{\n            type: Input\n        }], history: [{\n            type: Input\n        }] }); })();\n\nclass OrderListComponent extends BaseListComponent {\r\n    constructor(serverConfigService, dataService, localStorageService, router, route) {\r\n        super(router, route);\r\n        this.serverConfigService = serverConfigService;\r\n        this.dataService = dataService;\r\n        this.localStorageService = localStorageService;\r\n        this.searchOrderCodeControl = new FormControl('');\r\n        this.searchLastNameControl = new FormControl('');\r\n        this.orderStates = this.serverConfigService.getOrderProcessStates().map(item => item.name);\r\n        this.filterPresets = [\r\n            {\r\n                name: 'open',\r\n                label: marker('order.filter-preset-open'),\r\n                config: {\r\n                    active: false,\r\n                    states: this.orderStates.filter(s => s !== 'Delivered' && s !== 'Cancelled' && s !== 'Shipped'),\r\n                },\r\n            },\r\n            {\r\n                name: 'shipped',\r\n                label: marker('order.filter-preset-shipped'),\r\n                config: {\r\n                    active: false,\r\n                    states: ['Shipped'],\r\n                },\r\n            },\r\n            {\r\n                name: 'completed',\r\n                label: marker('order.filter-preset-completed'),\r\n                config: {\r\n                    active: false,\r\n                    states: ['Delivered', 'Cancelled'],\r\n                },\r\n            },\r\n            {\r\n                name: 'active',\r\n                label: marker('order.filter-preset-active'),\r\n                config: {\r\n                    active: true,\r\n                },\r\n            },\r\n        ];\r\n        super.setQueryFn(\r\n        // tslint:disable-next-line:no-shadowed-variable\r\n        (take, skip) => this.dataService.order.getOrders({ take, skip }).refetchOnChannelChange(), data => data.orders, \r\n        // tslint:disable-next-line:no-shadowed-variable\r\n        (skip, take) => this.createQueryOptions(skip, take, this.searchOrderCodeControl.value, this.searchLastNameControl.value, this.route.snapshot.queryParamMap.get('filter') || 'open'));\r\n        const lastFilters = this.localStorageService.get('orderListLastCustomFilters');\r\n        if (lastFilters) {\r\n            this.setQueryParam(lastFilters, { replaceUrl: true });\r\n        }\r\n    }\r\n    ngOnInit() {\r\n        var _a;\r\n        super.ngOnInit();\r\n        this.activePreset$ = this.route.queryParamMap.pipe(map(qpm => qpm.get('filter') || 'open'), distinctUntilChanged());\r\n        const searchTerms$ = merge(this.searchOrderCodeControl.valueChanges, this.searchLastNameControl.valueChanges).pipe(filter(value => 2 < value.length || value.length === 0), debounceTime(250));\r\n        merge(searchTerms$, this.route.queryParamMap)\r\n            .pipe(takeUntil(this.destroy$))\r\n            .subscribe(val => {\r\n            this.refresh();\r\n        });\r\n        const queryParamMap = this.route.snapshot.queryParamMap;\r\n        this.customFilterForm = new FormGroup({\r\n            states: new FormControl((_a = queryParamMap.getAll('states')) !== null && _a !== void 0 ? _a : []),\r\n            placedAtStart: new FormControl(queryParamMap.get('placedAtStart')),\r\n            placedAtEnd: new FormControl(queryParamMap.get('placedAtEnd')),\r\n        });\r\n    }\r\n    selectFilterPreset(presetName) {\r\n        var _a;\r\n        const lastCustomFilters = (_a = this.localStorageService.get('orderListLastCustomFilters')) !== null && _a !== void 0 ? _a : {};\r\n        const emptyCustomFilters = { states: undefined, placedAtStart: undefined, placedAtEnd: undefined };\r\n        const filters = presetName === 'custom' ? lastCustomFilters : emptyCustomFilters;\r\n        this.setQueryParam(Object.assign({ filter: presetName, page: 1 }, filters), { replaceUrl: true });\r\n    }\r\n    applyCustomFilters() {\r\n        const formValue = this.customFilterForm.value;\r\n        const customFilters = {\r\n            states: formValue.states,\r\n            placedAtStart: formValue.placedAtStart,\r\n            placedAtEnd: formValue.placedAtEnd,\r\n        };\r\n        this.setQueryParam(Object.assign({ filter: 'custom' }, customFilters));\r\n        this.customFilterForm.markAsPristine();\r\n        this.localStorageService.set('orderListLastCustomFilters', customFilters);\r\n    }\r\n    createQueryOptions(\r\n    // tslint:disable-next-line:no-shadowed-variable\r\n    skip, take, orderCodeSearchTerm, customerNameSearchTerm, activeFilterPreset) {\r\n        var _a;\r\n        const filterConfig = this.filterPresets.find(p => p.name === activeFilterPreset);\r\n        // tslint:disable-next-line:no-shadowed-variable\r\n        const filter = {};\r\n        if (filterConfig) {\r\n            if (filterConfig.config.active != null) {\r\n                filter.active = {\r\n                    eq: filterConfig.config.active,\r\n                };\r\n            }\r\n            if (filterConfig.config.states) {\r\n                filter.state = {\r\n                    in: filterConfig.config.states,\r\n                };\r\n            }\r\n        }\r\n        else if (activeFilterPreset === 'custom') {\r\n            const queryParams = this.route.snapshot.queryParamMap;\r\n            const states = (_a = queryParams.getAll('states')) !== null && _a !== void 0 ? _a : [];\r\n            const placedAtStart = queryParams.get('placedAtStart');\r\n            const placedAtEnd = queryParams.get('placedAtEnd');\r\n            if (states.length) {\r\n                filter.state = {\r\n                    in: states,\r\n                };\r\n            }\r\n            if (placedAtStart && placedAtEnd) {\r\n                filter.orderPlacedAt = {\r\n                    between: {\r\n                        start: placedAtStart,\r\n                        end: placedAtEnd,\r\n                    },\r\n                };\r\n            }\r\n            else if (placedAtStart) {\r\n                filter.orderPlacedAt = {\r\n                    after: placedAtStart,\r\n                };\r\n            }\r\n            else if (placedAtEnd) {\r\n                filter.orderPlacedAt = {\r\n                    before: placedAtEnd,\r\n                };\r\n            }\r\n        }\r\n        if (customerNameSearchTerm) {\r\n            filter.customerLastName = {\r\n                contains: customerNameSearchTerm,\r\n            };\r\n        }\r\n        if (orderCodeSearchTerm) {\r\n            filter.code = {\r\n                contains: orderCodeSearchTerm,\r\n            };\r\n        }\r\n        return {\r\n            options: {\r\n                skip,\r\n                take,\r\n                filter: Object.assign({}, (filter !== null && filter !== void 0 ? filter : {})),\r\n                sort: {\r\n                    updatedAt: SortOrder.DESC,\r\n                },\r\n            },\r\n        };\r\n    }\r\n    getShippingNames(order) {\r\n        if (order.shippingLines.length) {\r\n            return order.shippingLines.map(shippingLine => shippingLine.shippingMethod.name).join(', ');\r\n        }\r\n        else {\r\n            return '';\r\n        }\r\n    }\r\n}\nOrderListComponent.ɵfac = function OrderListComponent_Factory(t) { return new (t || OrderListComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc1.ServerConfigService), ɵngcc0.ɵɵdirectiveInject(ɵngcc1.DataService), ɵngcc0.ɵɵdirectiveInject(ɵngcc1.LocalStorageService), ɵngcc0.ɵɵdirectiveInject(ɵngcc8.Router), ɵngcc0.ɵɵdirectiveInject(ɵngcc8.ActivatedRoute)); };\nOrderListComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: OrderListComponent, selectors: [[\"vdr-order-list\"]], features: [ɵngcc0.ɵɵInheritDefinitionFeature], decls: 62, vars: 67, consts: [[1, \"search-form\"], [\"class\", \"btn-group btn-outline-primary\", 4, \"ngIf\"], [\"type\", \"text\", \"name\", \"searchTerm\", 1, \"search-input\", 3, \"formControl\", \"placeholder\"], [1, \"custom-filters\"], [3, \"formGroup\"], [1, \"flex\", \"align-center\"], [\"appendTo\", \"body\", \"formControlName\", \"states\", 3, \"items\", \"addTag\", \"multiple\", \"placeholder\", \"clearable\", \"searchable\"], [\"ng-option-tmp\", \"\"], [\"ng-label-tmp\", \"\"], [1, \"btn\", \"btn-secondary\", 3, \"disabled\", \"click\"], [\"shape\", \"filter\"], [1, \"flex\"], [\"formControlName\", \"placedAtStart\"], [\"formControlName\", \"placedAtEnd\"], [\"locationId\", \"order-list\"], [3, \"items\", \"itemsPerPage\", \"totalItems\", \"currentPage\", \"pageChange\", \"itemsPerPageChange\"], [1, \"btn-group\", \"btn-outline-primary\"], [\"class\", \"btn\", 3, \"btn-primary\", \"click\", 4, \"ngFor\", \"ngForOf\"], [1, \"btn\", 3, \"click\"], [\"shape\", \"angle down\"], [1, \"ng-value-label\"], [\"aria-hidden\", \"true\", 1, \"ng-value-icon\", \"right\", 3, \"click\"], [1, \"left\", \"align-middle\"], [3, \"customer\"], [3, \"state\"], [1, \"right\", \"align-middle\"], [\"iconShape\", \"shopping-cart\", 3, \"label\", \"linkTo\"]], template: function OrderListComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"vdr-action-bar\");\n        ɵngcc0.ɵɵelementStart(1, \"vdr-ab-left\");\n        ɵngcc0.ɵɵelementStart(2, \"div\", 0);\n        ɵngcc0.ɵɵtemplate(3, OrderListComponent_div_3_Template, 6, 6, \"div\", 1);\n        ɵngcc0.ɵɵpipe(4, \"async\");\n        ɵngcc0.ɵɵelement(5, \"input\", 2);\n        ɵngcc0.ɵɵpipe(6, \"translate\");\n        ɵngcc0.ɵɵelement(7, \"input\", 2);\n        ɵngcc0.ɵɵpipe(8, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(9, \"div\", 3);\n        ɵngcc0.ɵɵpipe(10, \"async\");\n        ɵngcc0.ɵɵelementStart(11, \"form\", 4);\n        ɵngcc0.ɵɵelementStart(12, \"div\", 5);\n        ɵngcc0.ɵɵelementStart(13, \"ng-select\", 6);\n        ɵngcc0.ɵɵpipe(14, \"translate\");\n        ɵngcc0.ɵɵtemplate(15, OrderListComponent_ng_template_15_Template, 3, 5, \"ng-template\", 7);\n        ɵngcc0.ɵɵtemplate(16, OrderListComponent_ng_template_16_Template, 6, 5, \"ng-template\", 8);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(17, \"button\", 9);\n        ɵngcc0.ɵɵlistener(\"click\", function OrderListComponent_Template_button_click_17_listener() { return ctx.applyCustomFilters(); });\n        ɵngcc0.ɵɵtext(18);\n        ɵngcc0.ɵɵpipe(19, \"translate\");\n        ɵngcc0.ɵɵelement(20, \"clr-icon\", 10);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(21, \"div\", 11);\n        ɵngcc0.ɵɵelementStart(22, \"div\");\n        ɵngcc0.ɵɵelementStart(23, \"label\");\n        ɵngcc0.ɵɵtext(24);\n        ɵngcc0.ɵɵpipe(25, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelement(26, \"vdr-datetime-picker\", 12);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(27, \"div\");\n        ɵngcc0.ɵɵelementStart(28, \"label\");\n        ɵngcc0.ɵɵtext(29);\n        ɵngcc0.ɵɵpipe(30, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelement(31, \"vdr-datetime-picker\", 13);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(32, \"vdr-ab-right\");\n        ɵngcc0.ɵɵelement(33, \"vdr-action-bar-items\", 14);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(34, \"vdr-data-table\", 15);\n        ɵngcc0.ɵɵlistener(\"pageChange\", function OrderListComponent_Template_vdr_data_table_pageChange_34_listener($event) { return ctx.setPageNumber($event); })(\"itemsPerPageChange\", function OrderListComponent_Template_vdr_data_table_itemsPerPageChange_34_listener($event) { return ctx.setItemsPerPage($event); });\n        ɵngcc0.ɵɵpipe(35, \"async\");\n        ɵngcc0.ɵɵpipe(36, \"async\");\n        ɵngcc0.ɵɵpipe(37, \"async\");\n        ɵngcc0.ɵɵpipe(38, \"async\");\n        ɵngcc0.ɵɵelementStart(39, \"vdr-dt-column\");\n        ɵngcc0.ɵɵtext(40);\n        ɵngcc0.ɵɵpipe(41, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(42, \"vdr-dt-column\");\n        ɵngcc0.ɵɵtext(43);\n        ɵngcc0.ɵɵpipe(44, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(45, \"vdr-dt-column\");\n        ɵngcc0.ɵɵtext(46);\n        ɵngcc0.ɵɵpipe(47, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(48, \"vdr-dt-column\");\n        ɵngcc0.ɵɵtext(49);\n        ɵngcc0.ɵɵpipe(50, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(51, \"vdr-dt-column\");\n        ɵngcc0.ɵɵtext(52);\n        ɵngcc0.ɵɵpipe(53, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(54, \"vdr-dt-column\");\n        ɵngcc0.ɵɵtext(55);\n        ɵngcc0.ɵɵpipe(56, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(57, \"vdr-dt-column\");\n        ɵngcc0.ɵɵtext(58);\n        ɵngcc0.ɵɵpipe(59, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelement(60, \"vdr-dt-column\");\n        ɵngcc0.ɵɵtemplate(61, OrderListComponent_ng_template_61_Template, 20, 23, \"ng-template\");\n        ɵngcc0.ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ɵngcc0.ɵɵpipeBind1(4, 29, ctx.activePreset$));\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"formControl\", ctx.searchOrderCodeControl)(\"placeholder\", ɵngcc0.ɵɵpipeBind1(6, 31, \"order.search-by-order-code\"));\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"formControl\", ctx.searchLastNameControl)(\"placeholder\", ɵngcc0.ɵɵpipeBind1(8, 33, \"order.search-by-customer-last-name\"));\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵclassProp(\"expanded\", ɵngcc0.ɵɵpipeBind1(10, 35, ctx.activePreset$) === \"custom\");\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"formGroup\", ctx.customFilterForm);\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"items\", ctx.orderStates)(\"addTag\", false)(\"multiple\", true)(\"placeholder\", ɵngcc0.ɵɵpipeBind1(14, 37, \"state.all-orders\"))(\"clearable\", true)(\"searchable\", false);\n        ɵngcc0.ɵɵadvance(4);\n        ɵngcc0.ɵɵproperty(\"disabled\", ctx.customFilterForm.pristine);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(19, 39, \"order.apply-filters\"), \" \");\n        ɵngcc0.ɵɵadvance(6);\n        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(25, 41, \"order.placed-at-start\"));\n        ɵngcc0.ɵɵadvance(5);\n        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(30, 43, \"order.placed-at-end\"));\n        ɵngcc0.ɵɵadvance(5);\n        ɵngcc0.ɵɵproperty(\"items\", ɵngcc0.ɵɵpipeBind1(35, 45, ctx.items$))(\"itemsPerPage\", ɵngcc0.ɵɵpipeBind1(36, 47, ctx.itemsPerPage$))(\"totalItems\", ɵngcc0.ɵɵpipeBind1(37, 49, ctx.totalItems$))(\"currentPage\", ɵngcc0.ɵɵpipeBind1(38, 51, ctx.currentPage$));\n        ɵngcc0.ɵɵadvance(6);\n        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(41, 53, \"common.code\"));\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(44, 55, \"order.customer\"));\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(47, 57, \"order.state\"));\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(50, 59, \"order.total\"));\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(53, 61, \"common.updated-at\"));\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(56, 63, \"order.placed-at\"));\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(59, 65, \"order.shipping\"));\n    } }, directives: [ɵngcc1.ActionBarComponent, ɵngcc1.ActionBarLeftComponent, ɵngcc5.NgIf, ɵngcc1.FormFieldControlDirective, ɵngcc2.DefaultValueAccessor, ɵngcc2.NgControlStatus, ɵngcc2.FormControlDirective, ɵngcc2.ɵangular_packages_forms_forms_y, ɵngcc2.NgControlStatusGroup, ɵngcc2.FormGroupDirective, ɵngcc3.NgSelectComponent, ɵngcc2.FormControlName, ɵngcc3.ɵf, ɵngcc3.ɵh, ɵngcc6.ClrIconCustomTag, ɵngcc6.ClrLabel, ɵngcc1.DatetimePickerComponent, ɵngcc1.ActionBarRightComponent, ɵngcc1.ActionBarItemsComponent, ɵngcc1.DataTableComponent, ɵngcc1.DataTableColumnComponent, ɵngcc5.NgForOf, ɵngcc1.CustomerLabelComponent, ɵngcc1.OrderStateLabelComponent, ɵngcc1.TableRowActionComponent], pipes: [ɵngcc5.AsyncPipe, ɵngcc4.TranslatePipe, ɵngcc1.StateI18nTokenPipe, ɵngcc1.LocaleCurrencyPipe, ɵngcc1.TimeAgoPipe, ɵngcc1.LocaleDatePipe], styles: [\".search-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:baseline;width:100%;margin-bottom:6px}@media screen and (min-width:768px){.search-form[_ngcontent-%COMP%]{flex-direction:row}}.search-input[_ngcontent-%COMP%]{margin-left:6px;margin-top:6px;min-width:300px}.custom-filters[_ngcontent-%COMP%]{overflow:hidden;max-height:0;padding-bottom:6px}.custom-filters.expanded[_ngcontent-%COMP%]{max-height:none}.custom-filters[_ngcontent-%COMP%] > form[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.custom-filters[_ngcontent-%COMP%] > form[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:100%}ng-select[_ngcontent-%COMP%]{flex:1;min-width:200px}ng-select[_ngcontent-%COMP%], ng-select[_ngcontent-%COMP%]     .ng-select-container{height:36px}\"], changeDetection: 0 });\r\nOrderListComponent.ctorParameters = () => [\r\n    { type: ServerConfigService },\r\n    { type: DataService },\r\n    { type: LocalStorageService },\r\n    { type: Router },\r\n    { type: ActivatedRoute }\r\n];\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(OrderListComponent, [{\n        type: Component,\n        args: [{\n                selector: 'vdr-order-list',\n                template: \"<vdr-action-bar>\\r\\n    <vdr-ab-left>\\r\\n        <div class=\\\"search-form\\\">\\r\\n            <div class=\\\"btn-group btn-outline-primary\\\" *ngIf=\\\"activePreset$ | async as activePreset\\\">\\r\\n                <button\\r\\n                    class=\\\"btn\\\"\\r\\n                    *ngFor=\\\"let preset of filterPresets\\\"\\r\\n                    [class.btn-primary]=\\\"activePreset === preset.name\\\"\\r\\n                    (click)=\\\"selectFilterPreset(preset.name)\\\"\\r\\n                >\\r\\n                    {{ preset.label | translate }}\\r\\n                </button>\\r\\n                <button\\r\\n                    class=\\\"btn\\\"\\r\\n                    [class.btn-primary]=\\\"activePreset === 'custom'\\\"\\r\\n                    (click)=\\\"selectFilterPreset('custom')\\\"\\r\\n                >\\r\\n                    {{ 'order.filter-custom' | translate }}\\r\\n                    <clr-icon shape=\\\"angle down\\\"></clr-icon>\\r\\n                </button>\\r\\n            </div>\\r\\n\\r\\n            <input\\r\\n                type=\\\"text\\\"\\r\\n                name=\\\"searchTerm\\\"\\r\\n                [formControl]=\\\"searchOrderCodeControl\\\"\\r\\n                [placeholder]=\\\"'order.search-by-order-code' | translate\\\"\\r\\n                class=\\\"search-input\\\"\\r\\n            />\\r\\n            <input\\r\\n                type=\\\"text\\\"\\r\\n                name=\\\"searchTerm\\\"\\r\\n                [formControl]=\\\"searchLastNameControl\\\"\\r\\n                [placeholder]=\\\"'order.search-by-customer-last-name' | translate\\\"\\r\\n                class=\\\"search-input\\\"\\r\\n            />\\r\\n        </div>\\r\\n        <div class=\\\"custom-filters\\\" [class.expanded]=\\\"(activePreset$ | async) === 'custom'\\\">\\r\\n            <form [formGroup]=\\\"customFilterForm\\\">\\r\\n                <div class=\\\"flex align-center\\\">\\r\\n                    <ng-select\\r\\n                        [items]=\\\"orderStates\\\"\\r\\n                        appendTo=\\\"body\\\"\\r\\n                        [addTag]=\\\"false\\\"\\r\\n                        [multiple]=\\\"true\\\"\\r\\n                        formControlName=\\\"states\\\"\\r\\n                        [placeholder]=\\\"'state.all-orders' | translate\\\"\\r\\n                        [clearable]=\\\"true\\\"\\r\\n                        [searchable]=\\\"false\\\"\\r\\n                    >\\r\\n                        <ng-template ng-option-tmp let-item=\\\"item\\\">{{ item | stateI18nToken | translate }}</ng-template>\\r\\n                        <ng-template ng-label-tmp let-item=\\\"item\\\" let-clear=\\\"clear\\\">\\r\\n                            <span class=\\\"ng-value-label\\\"> {{ item | stateI18nToken | translate }}</span>\\r\\n                            <span class=\\\"ng-value-icon right\\\" (click)=\\\"clear(item)\\\" aria-hidden=\\\"true\\\">\\u00D7</span>\\r\\n                        </ng-template>\\r\\n                    </ng-select>\\r\\n                    <button\\r\\n                        class=\\\"btn btn-secondary\\\"\\r\\n                        [disabled]=\\\"customFilterForm.pristine\\\"\\r\\n                        (click)=\\\"applyCustomFilters()\\\"\\r\\n                    >\\r\\n                        {{ 'order.apply-filters' | translate }}\\r\\n                        <clr-icon shape=\\\"filter\\\"></clr-icon>\\r\\n                    </button>\\r\\n                </div>\\r\\n                <div class=\\\"flex\\\">\\r\\n                    <div>\\r\\n                        <label>{{ 'order.placed-at-start' | translate }}</label>\\r\\n                        <vdr-datetime-picker formControlName=\\\"placedAtStart\\\"></vdr-datetime-picker>\\r\\n                    </div>\\r\\n                    <div>\\r\\n                        <label>{{ 'order.placed-at-end' | translate }}</label>\\r\\n                        <vdr-datetime-picker formControlName=\\\"placedAtEnd\\\"></vdr-datetime-picker>\\r\\n                    </div>\\r\\n                </div>\\r\\n            </form>\\r\\n        </div>\\r\\n    </vdr-ab-left>\\r\\n    <vdr-ab-right>\\r\\n        <vdr-action-bar-items locationId=\\\"order-list\\\"></vdr-action-bar-items>\\r\\n    </vdr-ab-right>\\r\\n</vdr-action-bar>\\r\\n\\r\\n<vdr-data-table\\r\\n    [items]=\\\"items$ | async\\\"\\r\\n    [itemsPerPage]=\\\"itemsPerPage$ | async\\\"\\r\\n    [totalItems]=\\\"totalItems$ | async\\\"\\r\\n    [currentPage]=\\\"currentPage$ | async\\\"\\r\\n    (pageChange)=\\\"setPageNumber($event)\\\"\\r\\n    (itemsPerPageChange)=\\\"setItemsPerPage($event)\\\"\\r\\n>\\r\\n    <vdr-dt-column>{{ 'common.code' | translate }}</vdr-dt-column>\\r\\n    <vdr-dt-column>{{ 'order.customer' | translate }}</vdr-dt-column>\\r\\n    <vdr-dt-column>{{ 'order.state' | translate }}</vdr-dt-column>\\r\\n    <vdr-dt-column>{{ 'order.total' | translate }}</vdr-dt-column>\\r\\n    <vdr-dt-column>{{ 'common.updated-at' | translate }}</vdr-dt-column>\\r\\n    <vdr-dt-column>{{ 'order.placed-at' | translate }}</vdr-dt-column>\\r\\n    <vdr-dt-column>{{ 'order.shipping' | translate }}</vdr-dt-column>\\r\\n    <vdr-dt-column></vdr-dt-column>\\r\\n    <ng-template let-order=\\\"item\\\">\\r\\n        <td class=\\\"left align-middle\\\">{{ order.code }}</td>\\r\\n        <td class=\\\"left align-middle\\\">\\r\\n            <vdr-customer-label [customer]=\\\"order.customer\\\"></vdr-customer-label>\\r\\n        </td>\\r\\n        <td class=\\\"left align-middle\\\">\\r\\n            <vdr-order-state-label [state]=\\\"order.state\\\"></vdr-order-state-label>\\r\\n        </td>\\r\\n        <td class=\\\"left align-middle\\\">{{ order.total | localeCurrency: order.currencyCode }}</td>\\r\\n        <td class=\\\"left align-middle\\\">{{ order.updatedAt | timeAgo }}</td>\\r\\n        <td class=\\\"left align-middle\\\">{{ order.orderPlacedAt | localeDate: 'medium' }}</td>\\r\\n        <td class=\\\"left align-middle\\\">{{ getShippingNames(order) }}</td>\\r\\n        <td class=\\\"right align-middle\\\">\\r\\n            <vdr-table-row-action\\r\\n                iconShape=\\\"shopping-cart\\\"\\r\\n                [label]=\\\"'common.open' | translate\\\"\\r\\n                [linkTo]=\\\"order.state === 'Modifying' ? ['./', order.id, 'modify'] : ['./', order.id]\\\"\\r\\n            ></vdr-table-row-action>\\r\\n        </td>\\r\\n    </ng-template>\\r\\n</vdr-data-table>\\r\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\".search-form{display:flex;flex-direction:column;align-items:baseline;width:100%;margin-bottom:6px}@media screen and (min-width:768px){.search-form{flex-direction:row}}.search-input{margin-left:6px;margin-top:6px;min-width:300px}.custom-filters{overflow:hidden;max-height:0;padding-bottom:6px}.custom-filters.expanded{max-height:none}.custom-filters>form{display:flex;flex-direction:column;align-items:center}.custom-filters>form>div{width:100%}ng-select{flex:1;min-width:200px}ng-select,ng-select ::ng-deep .ng-select-container{height:36px}\"]\n            }]\n    }], function () { return [{ type: ɵngcc1.ServerConfigService }, { type: ɵngcc1.DataService }, { type: ɵngcc1.LocalStorageService }, { type: ɵngcc8.Router }, { type: ɵngcc8.ActivatedRoute }]; }, null); })();\n\nclass OrderPaymentCardComponent {\r\n    constructor() {\r\n        this.settlePayment = new EventEmitter();\r\n        this.transitionPaymentState = new EventEmitter();\r\n        this.settleRefund = new EventEmitter();\r\n    }\r\n    refundHasMetadata(refund) {\r\n        return !!refund && Object.keys(refund.metadata).length > 0;\r\n    }\r\n    nextOtherStates() {\r\n        if (!this.payment) {\r\n            return [];\r\n        }\r\n        return this.payment.nextStates.filter(s => s !== 'Settled');\r\n    }\r\n}\nOrderPaymentCardComponent.ɵfac = function OrderPaymentCardComponent_Factory(t) { return new (t || OrderPaymentCardComponent)(); };\nOrderPaymentCardComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: OrderPaymentCardComponent, selectors: [[\"vdr-order-payment-card\"]], inputs: { payment: \"payment\", currencyCode: \"currencyCode\" }, outputs: { settlePayment: \"settlePayment\", transitionPaymentState: \"transitionPaymentState\", settleRefund: \"settleRefund\" }, decls: 12, vars: 9, consts: [[1, \"card\"], [1, \"card-header\", \"payment-header\"], [4, \"ngIf\"], [1, \"payment-state\"], [3, \"state\"], [1, \"card-block\"], [3, \"payment\", \"currencyCode\"], [4, \"ngFor\", \"ngForOf\"], [\"class\", \"card-footer\", 4, \"ngIf\"], [\"shape\", \"redo\", \"dir\", \"down\", 1, \"refund-icon\"], [1, \"clr-flex-fill\"], [3, \"label\"], [3, \"label\", 4, \"ngIf\"], [3, \"value\"], [1, \"card-footer\"], [1, \"btn\", \"btn-sm\", \"btn-primary\", 3, \"click\"], [\"class\", \"btn btn-sm btn-primary\", 3, \"click\", 4, \"ngIf\"], [\"vdrDropdownTrigger\", \"\", 1, \"icon-button\"], [\"shape\", \"ellipsis-vertical\"], [\"vdrPosition\", \"bottom-right\"], [\"type\", \"button\", \"vdrDropdownItem\", \"\", 1, \"btn\", 3, \"click\"], [4, \"ngIf\", \"ngIfElse\"], [\"cancel\", \"\"], [\"shape\", \"step-forward-2\"], [\"shape\", \"error-standard\", 1, \"is-error\"]], template: function OrderPaymentCardComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"div\", 0);\n        ɵngcc0.ɵɵelementStart(1, \"div\", 1);\n        ɵngcc0.ɵɵelementStart(2, \"div\");\n        ɵngcc0.ɵɵtext(3);\n        ɵngcc0.ɵɵpipe(4, \"translate\");\n        ɵngcc0.ɵɵtemplate(5, OrderPaymentCardComponent_ng_container_5_Template, 2, 1, \"ng-container\", 2);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(6, \"div\", 3);\n        ɵngcc0.ɵɵelement(7, \"vdr-payment-state-label\", 4);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(8, \"div\", 5);\n        ɵngcc0.ɵɵelement(9, \"vdr-payment-detail\", 6);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵtemplate(10, OrderPaymentCardComponent_ng_container_10_Template, 20, 23, \"ng-container\", 7);\n        ɵngcc0.ɵɵtemplate(11, OrderPaymentCardComponent_div_11_Template, 7, 2, \"div\", 8);\n        ɵngcc0.ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(4, 7, \"order.payment\"), \" \");\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.payment.transactionId);\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"state\", ctx.payment.state);\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"payment\", ctx.payment)(\"currencyCode\", ctx.currencyCode);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngForOf\", ctx.payment.refunds);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.payment.nextStates.length);\n    } }, directives: function () { return [ɵngcc5.NgIf, PaymentStateLabelComponent, PaymentDetailComponent, ɵngcc5.NgForOf, ɵngcc6.ClrIconCustomTag, ɵngcc7.Dir, RefundStateLabelComponent, ɵngcc1.LabeledDataComponent, ɵngcc1.ObjectTreeComponent, ɵngcc1.DropdownComponent, ɵngcc1.DropdownTriggerDirective, ɵngcc1.DropdownMenuComponent, ɵngcc1.DropdownItemDirective]; }, pipes: function () { return [ɵngcc4.TranslatePipe, ɵngcc1.LocaleDatePipe, ɵngcc1.LocaleCurrencyPipe, ɵngcc1.StateI18nTokenPipe]; }, styles: [\".payment-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.refund-icon[_ngcontent-%COMP%]{margin-right:6px;color:var(--color-grey-400)}.card-footer[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-end}\"], changeDetection: 0 });\r\nOrderPaymentCardComponent.propDecorators = {\r\n    payment: [{ type: Input }],\r\n    currencyCode: [{ type: Input }],\r\n    settlePayment: [{ type: Output }],\r\n    transitionPaymentState: [{ type: Output }],\r\n    settleRefund: [{ type: Output }]\r\n};\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(OrderPaymentCardComponent, [{\n        type: Component,\n        args: [{\n                selector: 'vdr-order-payment-card',\n                template: \"<div class=\\\"card\\\">\\r\\n    <div class=\\\"card-header payment-header\\\">\\r\\n        <div>\\r\\n            {{ 'order.payment' | translate }}\\r\\n            <ng-container *ngIf=\\\"payment.transactionId\\\">#{{ payment.transactionId }}</ng-container>\\r\\n        </div>\\r\\n        <div class=\\\"payment-state\\\">\\r\\n            <vdr-payment-state-label [state]=\\\"payment.state\\\"></vdr-payment-state-label>\\r\\n        </div>\\r\\n    </div>\\r\\n    <div class=\\\"card-block\\\">\\r\\n        <vdr-payment-detail [payment]=\\\"payment\\\" [currencyCode]=\\\"currencyCode\\\"></vdr-payment-detail>\\r\\n    </div>\\r\\n    <ng-container *ngFor=\\\"let refund of payment.refunds\\\">\\r\\n        <div class=\\\"card-header payment-header\\\">\\r\\n            <clr-icon shape=\\\"redo\\\" class=\\\"refund-icon\\\" dir=\\\"down\\\"></clr-icon>\\r\\n            {{ 'order.refund' | translate }} #{{ refund.id }}\\r\\n            <div class=\\\"clr-flex-fill\\\"></div>\\r\\n            <vdr-refund-state-label [state]=\\\"refund.state\\\"></vdr-refund-state-label>\\r\\n        </div>\\r\\n        <div class=\\\"card-block\\\">\\r\\n            <vdr-labeled-data [label]=\\\"'common.created-at' | translate\\\">\\r\\n                {{ refund.createdAt | localeDate: 'medium' }}\\r\\n            </vdr-labeled-data>\\r\\n            <vdr-labeled-data [label]=\\\"'order.refund-total' | translate\\\">\\r\\n                {{ refund.total | localeCurrency: currencyCode }}\\r\\n            </vdr-labeled-data>\\r\\n            <vdr-labeled-data [label]=\\\"'order.transaction-id' | translate\\\" *ngIf=\\\"refund.transactionId\\\">\\r\\n                {{ refund.transactionId }}\\r\\n            </vdr-labeled-data>\\r\\n            <vdr-labeled-data [label]=\\\"'order.refund-reason' | translate\\\" *ngIf=\\\"refund.reason\\\">\\r\\n                {{ refund.reason }}\\r\\n            </vdr-labeled-data>\\r\\n            <vdr-labeled-data [label]=\\\"'order.refund-metadata' | translate\\\" *ngIf=\\\"refundHasMetadata(refund)\\\">\\r\\n                <vdr-object-tree [value]=\\\"refund.metadata\\\"></vdr-object-tree>\\r\\n            </vdr-labeled-data>\\r\\n        </div>\\r\\n        <div class=\\\"card-footer\\\" *ngIf=\\\"refund.state === 'Pending'\\\">\\r\\n            <button class=\\\"btn btn-sm btn-primary\\\" (click)=\\\"settleRefund.emit(refund)\\\">\\r\\n                {{ 'order.settle-refund' | translate }}\\r\\n            </button>\\r\\n        </div>\\r\\n    </ng-container>\\r\\n    <div class=\\\"card-footer\\\" *ngIf=\\\"payment.nextStates.length\\\">\\r\\n        <button\\r\\n            class=\\\"btn btn-sm btn-primary\\\"\\r\\n            *ngIf=\\\"payment.nextStates.includes('Settled')\\\"\\r\\n            (click)=\\\"settlePayment.emit(payment)\\\"\\r\\n        >\\r\\n            {{ 'order.settle-payment' | translate }}\\r\\n        </button>\\r\\n        <vdr-dropdown>\\r\\n            <button class=\\\"icon-button\\\" vdrDropdownTrigger>\\r\\n                <clr-icon shape=\\\"ellipsis-vertical\\\"></clr-icon>\\r\\n            </button>\\r\\n            <vdr-dropdown-menu vdrPosition=\\\"bottom-right\\\">\\r\\n                <ng-container *ngFor=\\\"let nextState of nextOtherStates()\\\">\\r\\n                    <button\\r\\n                        type=\\\"button\\\"\\r\\n                        class=\\\"btn\\\"\\r\\n                        vdrDropdownItem\\r\\n                        (click)=\\\"transitionPaymentState.emit({ payment: payment, state: nextState })\\\"\\r\\n                    >\\r\\n                        <ng-container *ngIf=\\\"nextState !== 'Cancelled'; else cancel\\\">\\r\\n                            <clr-icon shape=\\\"step-forward-2\\\"></clr-icon>\\r\\n                            {{\\r\\n                                'order.transition-to-state'\\r\\n                                    | translate: { state: (nextState | stateI18nToken | translate) }\\r\\n                            }}\\r\\n                        </ng-container>\\r\\n                        <ng-template #cancel>\\r\\n                            <clr-icon shape=\\\"error-standard\\\" class=\\\"is-error\\\"></clr-icon>\\r\\n                            {{ 'order.cancel-payment' | translate }}\\r\\n                        </ng-template>\\r\\n                    </button>\\r\\n                </ng-container>\\r\\n            </vdr-dropdown-menu>\\r\\n        </vdr-dropdown>\\r\\n    </div>\\r\\n</div>\\r\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\".payment-header{display:flex;justify-content:space-between;align-items:center}.refund-icon{margin-right:6px;color:var(--color-grey-400)}.card-footer{display:flex;align-items:center;justify-content:flex-end}\"]\n            }]\n    }], function () { return []; }, { settlePayment: [{\n            type: Output\n        }], transitionPaymentState: [{\n            type: Output\n        }], settleRefund: [{\n            type: Output\n        }], payment: [{\n            type: Input\n        }], currencyCode: [{\n            type: Input\n        }] }); })();\n\nconst NODE_HEIGHT = 72;\n\nclass OrderProcessNodeComponent {\r\n    constructor(elementRef) {\r\n        this.elementRef = elementRef;\r\n        this.active$ = new BehaviorSubject(false);\r\n        this.activeTarget$ = new BehaviorSubject(false);\r\n        this.isCancellable = false;\r\n        // We use a class field here to prevent the\r\n        // i18n extractor from extracting a \"Cancelled\" key\r\n        this.cancelledState = 'Cancelled';\r\n    }\r\n    ngOnChanges(changes) {\r\n        this.isCancellable = !!this.node.to.find((s) => s.name === 'Cancelled');\r\n        if (changes.active) {\r\n            this.active$.next(this.active);\r\n        }\r\n    }\r\n    getPos(origin = 'top') {\r\n        var _a, _b;\r\n        const rect = this.elementRef.nativeElement.getBoundingClientRect();\r\n        const nodeHeight = (_b = (_a = this.elementRef.nativeElement.querySelector('.node')) === null || _a === void 0 ? void 0 : _a.getBoundingClientRect().height) !== null && _b !== void 0 ? _b : 0;\r\n        return {\r\n            x: 10,\r\n            y: this.index * NODE_HEIGHT + (origin === 'bottom' ? nodeHeight : 0),\r\n        };\r\n    }\r\n    getStyle() {\r\n        const pos = this.getPos();\r\n        return {\r\n            'top.px': pos.y,\r\n            'left.px': pos.x,\r\n        };\r\n    }\r\n}\nOrderProcessNodeComponent.ɵfac = function OrderProcessNodeComponent_Factory(t) { return new (t || OrderProcessNodeComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef)); };\nOrderProcessNodeComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: OrderProcessNodeComponent, selectors: [[\"vdr-order-process-node\"]], inputs: { node: \"node\", index: \"index\", active: \"active\" }, features: [ɵngcc0.ɵɵNgOnChangesFeature], decls: 8, vars: 15, consts: [[1, \"node-wrapper\", 3, \"ngStyle\"], [1, \"node\"], [\"class\", \"cancelled-wrapper\", 4, \"ngIf\"], [1, \"cancelled-wrapper\"], [1, \"cancelled-edge\"], [\"shape\", \"dot-circle\"], [1, \"cancelled-node\"]], template: function OrderProcessNodeComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"div\", 0);\n        ɵngcc0.ɵɵpipe(1, \"async\");\n        ɵngcc0.ɵɵelementStart(2, \"div\", 1);\n        ɵngcc0.ɵɵpipe(3, \"async\");\n        ɵngcc0.ɵɵtext(4);\n        ɵngcc0.ɵɵpipe(5, \"translate\");\n        ɵngcc0.ɵɵpipe(6, \"stateI18nToken\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵtemplate(7, OrderProcessNodeComponent_div_7_Template, 7, 5, \"div\", 2);\n        ɵngcc0.ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵngcc0.ɵɵclassProp(\"active\", ɵngcc0.ɵɵpipeBind1(1, 7, ctx.active$));\n        ɵngcc0.ɵɵproperty(\"ngStyle\", ctx.getStyle());\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵclassProp(\"active-target\", ɵngcc0.ɵɵpipeBind1(3, 9, ctx.activeTarget$));\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(5, 11, ɵngcc0.ɵɵpipeBind1(6, 13, ctx.node.name)), \" \");\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.isCancellable);\n    } }, directives: [ɵngcc5.NgStyle, ɵngcc5.NgIf, ɵngcc6.ClrIconCustomTag], pipes: [ɵngcc5.AsyncPipe, ɵngcc4.TranslatePipe, ɵngcc1.StateI18nTokenPipe], styles: [\"[_nghost-%COMP%]{display:block}.node-wrapper[_ngcontent-%COMP%]{position:absolute;z-index:1;display:flex;align-items:center}.node[_ngcontent-%COMP%]{display:inline-block;border:2px solid var(--color-component-border-200);border-radius:3px;padding:3px 6px;z-index:1;background-color:var(--color-component-bg-100);opacity:.7;transition:opacity .2s,background-color .2s,color .2s;cursor:default}.node.active-target[_ngcontent-%COMP%]{border-color:var(--color-primary-500);opacity:.9}.cancelled-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;color:var(--color-grey-300);transition:color .2s,opacity .2s;opacity:.7}.cancelled-edge[_ngcontent-%COMP%]{width:48px;height:2px;background-color:var(--color-component-bg-300);transition:background-color .2s}clr-icon[_ngcontent-%COMP%]{margin-left:-1px}.cancelled-node[_ngcontent-%COMP%]{margin-left:6px}.active[_ngcontent-%COMP%]   .cancelled-wrapper[_ngcontent-%COMP%]{opacity:1}.active[_ngcontent-%COMP%]   .node[_ngcontent-%COMP%]{opacity:1;background-color:var(--color-primary-600);border-color:var(--color-primary-600);color:var(--color-primary-100)}.active[_ngcontent-%COMP%]   .cancelled-wrapper[_ngcontent-%COMP%]{color:var(--color-error-500)}.active[_ngcontent-%COMP%]   .cancelled-edge[_ngcontent-%COMP%]{background-color:var(--color-error-500)}\"], changeDetection: 0 });\r\nOrderProcessNodeComponent.ctorParameters = () => [\r\n    { type: ElementRef }\r\n];\r\nOrderProcessNodeComponent.propDecorators = {\r\n    node: [{ type: Input }],\r\n    index: [{ type: Input }],\r\n    active: [{ type: Input }]\r\n};\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(OrderProcessNodeComponent, [{\n        type: Component,\n        args: [{\n                selector: 'vdr-order-process-node',\n                template: \"<div class=\\\"node-wrapper\\\" [ngStyle]=\\\"getStyle()\\\" [class.active]=\\\"active$ | async\\\">\\r\\n    <div\\r\\n        class=\\\"node\\\"\\r\\n        [class.active-target]=\\\"activeTarget$ | async\\\"\\r\\n    >\\r\\n        {{ node.name | stateI18nToken | translate }}\\r\\n    </div>\\r\\n    <div class=\\\"cancelled-wrapper\\\" *ngIf=\\\"isCancellable\\\">\\r\\n        <div class=\\\"cancelled-edge\\\">\\r\\n        </div>\\r\\n        <clr-icon shape=\\\"dot-circle\\\"></clr-icon>\\r\\n        <div class=\\\"cancelled-node\\\">\\r\\n            {{ cancelledState | stateI18nToken | translate }}\\r\\n        </div>\\r\\n    </div>\\r\\n</div>\\r\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\":host{display:block}.node-wrapper{position:absolute;z-index:1;display:flex;align-items:center}.node{display:inline-block;border:2px solid var(--color-component-border-200);border-radius:3px;padding:3px 6px;z-index:1;background-color:var(--color-component-bg-100);opacity:.7;transition:opacity .2s,background-color .2s,color .2s;cursor:default}.node.active-target{border-color:var(--color-primary-500);opacity:.9}.cancelled-wrapper{display:flex;align-items:center;color:var(--color-grey-300);transition:color .2s,opacity .2s;opacity:.7}.cancelled-edge{width:48px;height:2px;background-color:var(--color-component-bg-300);transition:background-color .2s}clr-icon{margin-left:-1px}.cancelled-node{margin-left:6px}.active .cancelled-wrapper{opacity:1}.active .node{opacity:1;background-color:var(--color-primary-600);border-color:var(--color-primary-600);color:var(--color-primary-100)}.active .cancelled-wrapper{color:var(--color-error-500)}.active .cancelled-edge{background-color:var(--color-error-500)}\"]\n            }]\n    }], function () { return [{ type: ɵngcc0.ElementRef }]; }, { node: [{\n            type: Input\n        }], index: [{\n            type: Input\n        }], active: [{\n            type: Input\n        }] }); })();\n\nclass OrderProcessEdgeComponent {\r\n    ngOnInit() {\r\n        this.active$ = this.from.active$\r\n            .asObservable()\r\n            .pipe(tap((active) => this.to.activeTarget$.next(active)));\r\n    }\r\n    getStyle() {\r\n        const direction = this.from.index < this.to.index ? 'down' : 'up';\r\n        const startPos = this.from.getPos(direction === 'down' ? 'bottom' : 'top');\r\n        const endPos = this.to.getPos(direction === 'down' ? 'top' : 'bottom');\r\n        const dX = Math.abs(startPos.x - endPos.x);\r\n        const dY = Math.abs(startPos.y - endPos.y);\r\n        const length = Math.sqrt(Math.pow(dX, 2) + Math.pow(dY, 2));\r\n        return Object.assign({ 'top.px': startPos.y, 'left.px': startPos.x + (direction === 'down' ? 10 : 40) + this.index * 12, 'height.px': length, 'width.px': 1 }, (direction === 'up'\r\n            ? {\r\n                transform: 'rotateZ(180deg)',\r\n                'transform-origin': 'top',\r\n            }\r\n            : {}));\r\n    }\r\n}\nOrderProcessEdgeComponent.ɵfac = function OrderProcessEdgeComponent_Factory(t) { return new (t || OrderProcessEdgeComponent)(); };\nOrderProcessEdgeComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: OrderProcessEdgeComponent, selectors: [[\"vdr-order-process-edge\"]], inputs: { from: \"from\", to: \"to\", index: \"index\" }, decls: 3, vars: 7, consts: [[1, \"edge\", 3, \"ngStyle\"], [\"shape\", \"arrow\", \"flip\", \"vertical\", 1, \"arrow\"]], template: function OrderProcessEdgeComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"div\", 0);\n        ɵngcc0.ɵɵpipe(1, \"async\");\n        ɵngcc0.ɵɵelement(2, \"clr-icon\", 1);\n        ɵngcc0.ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵngcc0.ɵɵclassProp(\"active\", ɵngcc0.ɵɵpipeBind1(1, 5, ctx.active$));\n        ɵngcc0.ɵɵproperty(\"ngStyle\", ctx.getStyle());\n        ɵngcc0.ɵɵattribute(\"data-from\", ctx.from.node.name)(\"data-to\", ctx.to.node.name);\n    } }, directives: [ɵngcc5.NgStyle, ɵngcc6.ClrIconCustomTag], pipes: [ɵngcc5.AsyncPipe], styles: [\".edge[_ngcontent-%COMP%]{position:absolute;border:1px solid var(--color-component-border-200);background-color:var(--color-component-bg-300);opacity:.3;transition:border .2s,opacity .2s,background-color .2s}.edge.active[_ngcontent-%COMP%]{border-color:var(--color-primary-500);background-color:var(--color-primary-500);opacity:1}.edge.active[_ngcontent-%COMP%]   .arrow[_ngcontent-%COMP%]{color:var(--color-primary-500)}.edge[_ngcontent-%COMP%]   .arrow[_ngcontent-%COMP%]{position:absolute;bottom:-4px;left:-8px;color:var(--color-grey-300)}\"], changeDetection: 0 });\r\nOrderProcessEdgeComponent.propDecorators = {\r\n    from: [{ type: Input }],\r\n    to: [{ type: Input }],\r\n    index: [{ type: Input }]\r\n};\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(OrderProcessEdgeComponent, [{\n        type: Component,\n        args: [{\n                selector: 'vdr-order-process-edge',\n                template: \"<div\\r\\n    [attr.data-from]=\\\"from.node.name\\\"\\r\\n    [attr.data-to]=\\\"to.node.name\\\"\\r\\n    [ngStyle]=\\\"getStyle()\\\"\\r\\n    [class.active]=\\\"active$ | async\\\"\\r\\n    class=\\\"edge\\\">\\r\\n    <clr-icon shape=\\\"arrow\\\" flip=\\\"vertical\\\" class=\\\"arrow\\\"></clr-icon>\\r\\n</div>\\r\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\".edge{position:absolute;border:1px solid var(--color-component-border-200);background-color:var(--color-component-bg-300);opacity:.3;transition:border .2s,opacity .2s,background-color .2s}.edge.active{border-color:var(--color-primary-500);background-color:var(--color-primary-500);opacity:1}.edge.active .arrow{color:var(--color-primary-500)}.edge .arrow{position:absolute;bottom:-4px;left:-8px;color:var(--color-grey-300)}\"]\n            }]\n    }], null, { from: [{\n            type: Input\n        }], to: [{\n            type: Input\n        }], index: [{\n            type: Input\n        }] }); })();\n\nclass OrderProcessGraphComponent {\r\n    constructor(changeDetector) {\r\n        this.changeDetector = changeDetector;\r\n        this.setActiveState$ = new BehaviorSubject(undefined);\r\n        this.nodes = [];\r\n        this.edges = [];\r\n    }\r\n    get outerHeight() {\r\n        return this.nodes.length * NODE_HEIGHT;\r\n    }\r\n    ngOnInit() {\r\n        this.setActiveState$.next(this.initialState);\r\n        this.activeState$ = this.setActiveState$.pipe(debounceTime(150));\r\n    }\r\n    ngOnChanges(changes) {\r\n        this.populateNodes();\r\n    }\r\n    ngAfterViewInit() {\r\n        setTimeout(() => this.populateEdges());\r\n    }\r\n    onMouseOver(stateName) {\r\n        this.setActiveState$.next(stateName);\r\n    }\r\n    onMouseOut() {\r\n        this.setActiveState$.next(this.initialState);\r\n    }\r\n    getNodeFor(state) {\r\n        if (this.nodeComponents) {\r\n            return this.nodeComponents.find((n) => n.node.name === state);\r\n        }\r\n    }\r\n    populateNodes() {\r\n        var _a, _b;\r\n        const stateNodeMap = new Map();\r\n        for (const state of this.states) {\r\n            stateNodeMap.set(state.name, {\r\n                name: state.name,\r\n                to: [],\r\n            });\r\n        }\r\n        for (const [name, stateNode] of stateNodeMap.entries()) {\r\n            const targets = (_b = (_a = this.states.find((s) => s.name === name)) === null || _a === void 0 ? void 0 : _a.to) !== null && _b !== void 0 ? _b : [];\r\n            for (const target of targets) {\r\n                const targetNode = stateNodeMap.get(target);\r\n                if (targetNode) {\r\n                    stateNode.to.push(targetNode);\r\n                }\r\n            }\r\n        }\r\n        this.nodes = [...stateNodeMap.values()].filter((n) => n.name !== 'Cancelled');\r\n    }\r\n    populateEdges() {\r\n        for (const node of this.nodes) {\r\n            const nodeCmp = this.getNodeFor(node.name);\r\n            let index = 0;\r\n            for (const to of node.to) {\r\n                const toCmp = this.getNodeFor(to.name);\r\n                if (nodeCmp && toCmp && nodeCmp !== toCmp) {\r\n                    this.edges.push({\r\n                        to: toCmp,\r\n                        from: nodeCmp,\r\n                        index,\r\n                    });\r\n                    index++;\r\n                }\r\n            }\r\n        }\r\n        this.edges = [...this.edges];\r\n        this.changeDetector.markForCheck();\r\n    }\r\n}\nOrderProcessGraphComponent.ɵfac = function OrderProcessGraphComponent_Factory(t) { return new (t || OrderProcessGraphComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef)); };\nOrderProcessGraphComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: OrderProcessGraphComponent, selectors: [[\"vdr-order-process-graph\"]], viewQuery: function OrderProcessGraphComponent_Query(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵviewQuery(OrderProcessNodeComponent, 1);\n    } if (rf & 2) {\n        let _t;\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.nodeComponents = _t);\n    } }, hostVars: 2, hostBindings: function OrderProcessGraphComponent_HostBindings(rf, ctx) { if (rf & 2) {\n        ɵngcc0.ɵɵstyleProp(\"height\", ctx.outerHeight, \"px\");\n    } }, inputs: { states: \"states\", initialState: \"initialState\" }, features: [ɵngcc0.ɵɵNgOnChangesFeature], decls: 2, vars: 2, consts: [[4, \"ngFor\", \"ngForOf\"], [3, \"node\", \"index\", \"active\", \"mouseenter\", \"mouseleave\"], [3, \"from\", \"to\", \"index\"]], template: function OrderProcessGraphComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵtemplate(0, OrderProcessGraphComponent_ng_container_0_Template, 3, 5, \"ng-container\", 0);\n        ɵngcc0.ɵɵtemplate(1, OrderProcessGraphComponent_ng_container_1_Template, 2, 3, \"ng-container\", 0);\n    } if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"ngForOf\", ctx.nodes);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngForOf\", ctx.edges);\n    } }, directives: [ɵngcc5.NgForOf, OrderProcessNodeComponent, OrderProcessEdgeComponent], pipes: [ɵngcc5.AsyncPipe], styles: [\"[_nghost-%COMP%]{display:block;border:1px #ff69b4;margin:20px;padding:12px;position:relative}.state-row[_ngcontent-%COMP%]{display:flex}\"], changeDetection: 0 });\r\nOrderProcessGraphComponent.ctorParameters = () => [\r\n    { type: ChangeDetectorRef }\r\n];\r\nOrderProcessGraphComponent.propDecorators = {\r\n    states: [{ type: Input }],\r\n    initialState: [{ type: Input }],\r\n    nodeComponents: [{ type: ViewChildren, args: [OrderProcessNodeComponent,] }],\r\n    outerHeight: [{ type: HostBinding, args: ['style.height.px',] }]\r\n};\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(OrderProcessGraphComponent, [{\n        type: Component,\n        args: [{\n                selector: 'vdr-order-process-graph',\n                template: \"<ng-container *ngFor=\\\"let state of nodes; let i = index\\\">\\r\\n    <vdr-order-process-node\\r\\n        [node]=\\\"state\\\"\\r\\n        [index]=\\\"i\\\"\\r\\n        [active]=\\\"(activeState$ | async) === state.name\\\"\\r\\n        (mouseenter)=\\\"onMouseOver(state.name)\\\"\\r\\n        (mouseleave)=\\\"onMouseOut()\\\"\\r\\n    ></vdr-order-process-node>\\r\\n</ng-container>\\r\\n<ng-container *ngFor=\\\"let edge of edges\\\">\\r\\n    <vdr-order-process-edge [from]=\\\"edge.from\\\" [to]=\\\"edge.to\\\" [index]=\\\"edge.index\\\"></vdr-order-process-edge>\\r\\n</ng-container>\\r\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\":host{display:block;border:1px #ff69b4;margin:20px;padding:12px;position:relative}.state-row{display:flex}\"]\n            }]\n    }], function () { return [{ type: ɵngcc0.ChangeDetectorRef }]; }, { outerHeight: [{\n            type: HostBinding,\n            args: ['style.height.px']\n        }], states: [{\n            type: Input\n        }], initialState: [{\n            type: Input\n        }], nodeComponents: [{\n            type: ViewChildren,\n            args: [OrderProcessNodeComponent]\n        }] }); })();\n\nclass OrderTableComponent {\r\n    constructor() {\r\n        this.orderLineCustomFieldsVisible = false;\r\n        this.customFieldsForLine = {};\r\n    }\r\n    get visibleOrderLineCustomFields() {\r\n        return this.orderLineCustomFieldsVisible ? this.orderLineCustomFields : [];\r\n    }\r\n    get showElided() {\r\n        return !this.orderLineCustomFieldsVisible && 0 < this.orderLineCustomFields.length;\r\n    }\r\n    ngOnInit() {\r\n        this.orderLineCustomFieldsVisible = this.orderLineCustomFields.length < 2;\r\n        this.getLineCustomFields();\r\n    }\r\n    toggleOrderLineCustomFields() {\r\n        this.orderLineCustomFieldsVisible = !this.orderLineCustomFieldsVisible;\r\n    }\r\n    getLineDiscounts(line) {\r\n        return line.discounts.filter(a => a.type === AdjustmentType.PROMOTION);\r\n    }\r\n    getLineCustomFields() {\r\n        const formGroup = new FormGroup({});\r\n        for (const line of this.order.lines) {\r\n            const result = this.orderLineCustomFields\r\n                .map(config => {\r\n                const value = line.customFields[config.name];\r\n                formGroup.addControl(config.name, new FormControl(value));\r\n                return {\r\n                    config,\r\n                    formGroup,\r\n                    value,\r\n                };\r\n            })\r\n                .filter(field => {\r\n                return this.orderLineCustomFieldsVisible ? true : field.value != null;\r\n            });\r\n            this.customFieldsForLine[line.id] = result;\r\n        }\r\n    }\r\n    getPromotionLink(promotion) {\r\n        const id = promotion.adjustmentSource.split(':')[1];\r\n        return ['/marketing', 'promotions', id];\r\n    }\r\n    getCouponCodeForAdjustment(order, promotionAdjustment) {\r\n        const id = promotionAdjustment.adjustmentSource.split(':')[1];\r\n        const promotion = order.promotions.find(p => p.id === id);\r\n        if (promotion) {\r\n            return promotion.couponCode || undefined;\r\n        }\r\n    }\r\n}\nOrderTableComponent.ɵfac = function OrderTableComponent_Factory(t) { return new (t || OrderTableComponent)(); };\nOrderTableComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: OrderTableComponent, selectors: [[\"vdr-order-table\"]], inputs: { order: \"order\", orderLineCustomFields: \"orderLineCustomFields\" }, decls: 61, vars: 61, consts: [[1, \"order-table\", \"table\"], [4, \"ngFor\", \"ngForOf\"], [\"class\", \"surcharge\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"order-adjustment\", 4, \"ngFor\", \"ngForOf\"], [1, \"sub-total\"], [1, \"left\", \"clr-align-middle\"], [\"colspan\", \"4\"], [1, \"clr-align-middle\"], [1, \"net-price\", 3, \"title\"], [1, \"shipping\"], [\"colspan\", \"3\"], [1, \"total\"], [1, \"order-line\"], [1, \"align-middle\", \"thumb\"], [3, \"src\", 4, \"ngIf\"], [1, \"align-middle\", \"name\"], [1, \"align-middle\", \"sku\"], [1, \"align-middle\", \"unit-price\"], [1, \"align-middle\", \"quantity\"], [3, \"line\", \"payments\"], [3, \"line\", \"orderState\"], [1, \"align-middle\", \"total\"], [4, \"ngIf\"], [3, \"src\"], [\"vdrDropdownTrigger\", \"\", 1, \"promotions-label\"], [\"class\", \"line-promotion\", 4, \"ngFor\", \"ngForOf\"], [1, \"line-promotion\"], [1, \"promotion-name\", 3, \"routerLink\"], [1, \"promotion-amount\"], [\"colspan\", \"6\", 1, \"custom-fields-row\"], [1, \"order-line-custom-fields\"], [\"class\", \"custom-field\", 4, \"ngFor\", \"ngForOf\"], [1, \"custom-field\"], [3, \"compact\", \"readonly\", \"customField\", \"customFieldsFormGroup\"], [1, \"surcharge\"], [\"colspan\", \"2\", 1, \"align-middle\", \"name\", \"left\"], [\"colspan\", \"2\", 1, \"align-middle\"], [1, \"order-adjustment\"], [\"colspan\", \"5\", 1, \"left\", \"clr-align-middle\"], [3, \"routerLink\"]], template: function OrderTableComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"table\", 0);\n        ɵngcc0.ɵɵelementStart(1, \"thead\");\n        ɵngcc0.ɵɵelementStart(2, \"tr\");\n        ɵngcc0.ɵɵelement(3, \"th\");\n        ɵngcc0.ɵɵelementStart(4, \"th\");\n        ɵngcc0.ɵɵtext(5);\n        ɵngcc0.ɵɵpipe(6, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(7, \"th\");\n        ɵngcc0.ɵɵtext(8);\n        ɵngcc0.ɵɵpipe(9, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(10, \"th\");\n        ɵngcc0.ɵɵtext(11);\n        ɵngcc0.ɵɵpipe(12, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(13, \"th\");\n        ɵngcc0.ɵɵtext(14);\n        ɵngcc0.ɵɵpipe(15, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(16, \"th\");\n        ɵngcc0.ɵɵtext(17);\n        ɵngcc0.ɵɵpipe(18, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(19, \"tbody\");\n        ɵngcc0.ɵɵtemplate(20, OrderTableComponent_ng_container_20_Template, 28, 34, \"ng-container\", 1);\n        ɵngcc0.ɵɵtemplate(21, OrderTableComponent_tr_21_Template, 13, 13, \"tr\", 2);\n        ɵngcc0.ɵɵtemplate(22, OrderTableComponent_tr_22_Template, 12, 14, \"tr\", 3);\n        ɵngcc0.ɵɵelementStart(23, \"tr\", 4);\n        ɵngcc0.ɵɵelementStart(24, \"td\", 5);\n        ɵngcc0.ɵɵtext(25);\n        ɵngcc0.ɵɵpipe(26, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelement(27, \"td\", 6);\n        ɵngcc0.ɵɵelementStart(28, \"td\", 7);\n        ɵngcc0.ɵɵtext(29);\n        ɵngcc0.ɵɵpipe(30, \"localeCurrency\");\n        ɵngcc0.ɵɵelementStart(31, \"div\", 8);\n        ɵngcc0.ɵɵpipe(32, \"translate\");\n        ɵngcc0.ɵɵtext(33);\n        ɵngcc0.ɵɵpipe(34, \"localeCurrency\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(35, \"tr\", 9);\n        ɵngcc0.ɵɵelementStart(36, \"td\", 5);\n        ɵngcc0.ɵɵtext(37);\n        ɵngcc0.ɵɵpipe(38, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(39, \"td\", 7);\n        ɵngcc0.ɵɵtext(40);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelement(41, \"td\", 10);\n        ɵngcc0.ɵɵelementStart(42, \"td\", 7);\n        ɵngcc0.ɵɵtext(43);\n        ɵngcc0.ɵɵpipe(44, \"localeCurrency\");\n        ɵngcc0.ɵɵelementStart(45, \"div\", 8);\n        ɵngcc0.ɵɵpipe(46, \"translate\");\n        ɵngcc0.ɵɵtext(47);\n        ɵngcc0.ɵɵpipe(48, \"localeCurrency\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(49, \"tr\", 11);\n        ɵngcc0.ɵɵelementStart(50, \"td\", 5);\n        ɵngcc0.ɵɵtext(51);\n        ɵngcc0.ɵɵpipe(52, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelement(53, \"td\", 6);\n        ɵngcc0.ɵɵelementStart(54, \"td\", 7);\n        ɵngcc0.ɵɵtext(55);\n        ɵngcc0.ɵɵpipe(56, \"localeCurrency\");\n        ɵngcc0.ɵɵelementStart(57, \"div\", 8);\n        ɵngcc0.ɵɵpipe(58, \"translate\");\n        ɵngcc0.ɵɵtext(59);\n        ɵngcc0.ɵɵpipe(60, \"localeCurrency\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵngcc0.ɵɵadvance(5);\n        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(6, 21, \"order.product-name\"));\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(9, 23, \"order.product-sku\"));\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(12, 25, \"order.unit-price\"));\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(15, 27, \"order.quantity\"));\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(18, 29, \"order.total\"));\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵproperty(\"ngForOf\", ctx.order.lines);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngForOf\", ctx.order.surcharges);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngForOf\", ctx.order.discounts);\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(26, 31, \"order.sub-total\"));\n        ɵngcc0.ɵɵadvance(4);\n        ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind2(30, 33, ctx.order.subTotalWithTax, ctx.order.currencyCode), \" \");\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"title\", ɵngcc0.ɵɵpipeBind1(32, 36, \"order.net-price\"));\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind2(34, 38, ctx.order.subTotal, ctx.order.currencyCode), \" \");\n        ɵngcc0.ɵɵadvance(4);\n        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(38, 41, \"order.shipping\"));\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵtextInterpolate(ctx.order.shippingLines[0] == null ? null : ctx.order.shippingLines[0].shippingMethod == null ? null : ctx.order.shippingLines[0].shippingMethod.name);\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind2(44, 43, ctx.order.shippingWithTax, ctx.order.currencyCode), \" \");\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"title\", ɵngcc0.ɵɵpipeBind1(46, 46, \"order.net-price\"));\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind2(48, 48, ctx.order.shipping, ctx.order.currencyCode), \" \");\n        ɵngcc0.ɵɵadvance(4);\n        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(52, 51, \"order.total\"));\n        ɵngcc0.ɵɵadvance(4);\n        ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind2(56, 53, ctx.order.totalWithTax, ctx.order.currencyCode), \" \");\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"title\", ɵngcc0.ɵɵpipeBind1(58, 56, \"order.net-price\"));\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind2(60, 58, ctx.order.total, ctx.order.currencyCode), \" \");\n    } }, directives: [ɵngcc5.NgForOf, ɵngcc5.NgIf, LineRefundsComponent, LineFulfillmentComponent, ɵngcc1.DropdownComponent, ɵngcc1.DropdownTriggerDirective, ɵngcc1.DropdownMenuComponent, ɵngcc8.RouterLinkWithHref, ɵngcc1.CustomFieldControlComponent, ɵngcc1.ChipComponent], pipes: [ɵngcc4.TranslatePipe, ɵngcc1.LocaleCurrencyPipe, ɵngcc1.AssetPreviewPipe], styles: [\".order-table[_ngcontent-%COMP%]   .is-cancelled[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-decoration:line-through;background-color:var(--color-component-bg-200)}.order-table[_ngcontent-%COMP%]   .sub-total[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .order-table[_ngcontent-%COMP%]   .total[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-top:1px dashed var(--color-component-border-200)}.order-table[_ngcontent-%COMP%]   .total[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-weight:700}.order-table[_ngcontent-%COMP%]   td.custom-fields-row[_ngcontent-%COMP%]{border-top-style:dashed;border-top-color:var(--color-grey-200)}.order-table[_ngcontent-%COMP%]   .order-line-custom-fields[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}.order-table[_ngcontent-%COMP%]   .order-line-custom-fields[_ngcontent-%COMP%]   .custom-field[_ngcontent-%COMP%]{text-align:start;max-width:200px;overflow:hidden;text-overflow:ellipsis;margin-bottom:6px;margin-right:18px}.order-table[_ngcontent-%COMP%]   .order-line-custom-field[_ngcontent-%COMP%]{background-color:var(--color-component-bg-100)}.order-table[_ngcontent-%COMP%]   .net-price[_ngcontent-%COMP%], .order-table[_ngcontent-%COMP%]   .order-line-custom-field[_ngcontent-%COMP%]   .custom-field-ellipsis[_ngcontent-%COMP%]{color:var(--color-text-300)}.order-table[_ngcontent-%COMP%]   .net-price[_ngcontent-%COMP%]{font-size:11px}.order-table[_ngcontent-%COMP%]   .promotions-label[_ngcontent-%COMP%]{-webkit-text-decoration:underline dotted var(--color-text-200);text-decoration:underline dotted var(--color-text-200);font-size:11px;margin-top:6px;cursor:pointer;text-transform:lowercase}  .line-promotion{display:flex;justify-content:space-between;padding:6px 12px}  .line-promotion .promotion-amount{margin-left:12px}  .line-promotion .net-price{font-size:11px;color:var(--color-text-300)}\"], changeDetection: 0 });\r\nOrderTableComponent.propDecorators = {\r\n    order: [{ type: Input }],\r\n    orderLineCustomFields: [{ type: Input }]\r\n};\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(OrderTableComponent, [{\n        type: Component,\n        args: [{\n                selector: 'vdr-order-table',\n                template: \"<table class=\\\"order-table table\\\">\\r\\n    <thead>\\r\\n        <tr>\\r\\n            <th></th>\\r\\n            <th>{{ 'order.product-name' | translate }}</th>\\r\\n            <th>{{ 'order.product-sku' | translate }}</th>\\r\\n            <th>{{ 'order.unit-price' | translate }}</th>\\r\\n            <th>{{ 'order.quantity' | translate }}</th>\\r\\n            <th>{{ 'order.total' | translate }}</th>\\r\\n        </tr>\\r\\n    </thead>\\r\\n    <tbody>\\r\\n        <ng-container *ngFor=\\\"let line of order.lines\\\">\\r\\n            <tr class=\\\"order-line\\\" [class.is-cancelled]=\\\"line.quantity === 0\\\">\\r\\n                <td class=\\\"align-middle thumb\\\">\\r\\n                    <img *ngIf=\\\"line.featuredAsset\\\" [src]=\\\"line.featuredAsset | assetPreview: 'tiny'\\\" />\\r\\n                </td>\\r\\n                <td class=\\\"align-middle name\\\">{{ line.productVariant.name }}</td>\\r\\n                <td class=\\\"align-middle sku\\\">{{ line.productVariant.sku }}</td>\\r\\n                <td class=\\\"align-middle unit-price\\\">\\r\\n                    {{ line.unitPriceWithTax | localeCurrency: order.currencyCode }}\\r\\n                    <div class=\\\"net-price\\\" [title]=\\\"'order.net-price' | translate\\\">\\r\\n                        {{ line.unitPrice | localeCurrency: order.currencyCode }}\\r\\n                    </div>\\r\\n                </td>\\r\\n                <td class=\\\"align-middle quantity\\\">\\r\\n                    {{ line.quantity }}\\r\\n                    <vdr-line-refunds [line]=\\\"line\\\" [payments]=\\\"order.payments\\\"></vdr-line-refunds>\\r\\n                    <vdr-line-fulfillment [line]=\\\"line\\\" [orderState]=\\\"order.state\\\"></vdr-line-fulfillment>\\r\\n                </td>\\r\\n                <td class=\\\"align-middle total\\\">\\r\\n                    {{ line.linePriceWithTax | localeCurrency: order.currencyCode }}\\r\\n                    <div class=\\\"net-price\\\" [title]=\\\"'order.net-price' | translate\\\">\\r\\n                        {{ line.linePrice | localeCurrency: order.currencyCode }}\\r\\n                    </div>\\r\\n\\r\\n                    <ng-container *ngIf=\\\"getLineDiscounts(line) as discounts\\\">\\r\\n                        <vdr-dropdown *ngIf=\\\"discounts.length\\\">\\r\\n                            <div class=\\\"promotions-label\\\" vdrDropdownTrigger>\\r\\n                                {{ 'order.promotions-applied' | translate }}\\r\\n                            </div>\\r\\n                            <vdr-dropdown-menu>\\r\\n                                <div class=\\\"line-promotion\\\" *ngFor=\\\"let discount of discounts\\\">\\r\\n                                    <a class=\\\"promotion-name\\\" [routerLink]=\\\"getPromotionLink(discount)\\\">{{\\r\\n                                        discount.description\\r\\n                                    }}</a>\\r\\n                                    <div class=\\\"promotion-amount\\\">\\r\\n                                        {{ discount.amountWithTax | localeCurrency: order.currencyCode }}\\r\\n                                        <div class=\\\"net-price\\\" [title]=\\\"'order.net-price' | translate\\\">\\r\\n                                            {{ discount.amount | localeCurrency: order.currencyCode }}\\r\\n                                        </div>\\r\\n                                    </div>\\r\\n                                </div>\\r\\n                            </vdr-dropdown-menu>\\r\\n                        </vdr-dropdown>\\r\\n                    </ng-container>\\r\\n                </td>\\r\\n            </tr>\\r\\n            <ng-container *ngIf=\\\"customFieldsForLine[line.id] as customFields\\\">\\r\\n                <tr *ngIf=\\\"customFields.length\\\">\\r\\n                    <td colspan=\\\"6\\\" class=\\\"custom-fields-row\\\">\\r\\n                        <div class=\\\"order-line-custom-fields\\\">\\r\\n                            <div class=\\\"custom-field\\\" *ngFor=\\\"let field of customFields\\\">\\r\\n                                <vdr-custom-field-control\\r\\n                                    [compact]=\\\"true\\\"\\r\\n                                    [readonly]=\\\"true\\\"\\r\\n                                    [customField]=\\\"field.config\\\"\\r\\n                                    [customFieldsFormGroup]=\\\"field.formGroup\\\"\\r\\n                                ></vdr-custom-field-control>\\r\\n                            </div>\\r\\n                        </div>\\r\\n                    </td>\\r\\n                </tr>\\r\\n            </ng-container>\\r\\n        </ng-container>\\r\\n        <tr class=\\\"surcharge\\\" *ngFor=\\\"let surcharge of order.surcharges\\\">\\r\\n            <td class=\\\"align-middle name left\\\" colspan=\\\"2\\\">{{ surcharge.description }}</td>\\r\\n            <td class=\\\"align-middle sku\\\">{{ surcharge.sku }}</td>\\r\\n            <td class=\\\"align-middle\\\" colspan=\\\"2\\\"></td>\\r\\n            <td class=\\\"align-middle total\\\">\\r\\n                {{ surcharge.priceWithTax | localeCurrency: order.currencyCode }}\\r\\n                <div class=\\\"net-price\\\" [title]=\\\"'order.net-price' | translate\\\">\\r\\n                    {{ surcharge.price | localeCurrency: order.currencyCode }}\\r\\n                </div>\\r\\n            </td>\\r\\n        </tr>\\r\\n        <tr class=\\\"order-adjustment\\\" *ngFor=\\\"let discount of order.discounts\\\">\\r\\n            <td colspan=\\\"5\\\" class=\\\"left clr-align-middle\\\">\\r\\n                <a [routerLink]=\\\"getPromotionLink(discount)\\\">{{ discount.description }}</a>\\r\\n                <vdr-chip *ngIf=\\\"getCouponCodeForAdjustment(order, discount) as couponCode\\\">{{\\r\\n                    couponCode\\r\\n                }}</vdr-chip>\\r\\n            </td>\\r\\n            <td class=\\\"clr-align-middle\\\">\\r\\n                {{ discount.amountWithTax | localeCurrency: order.currencyCode }}\\r\\n                <div class=\\\"net-price\\\" [title]=\\\"'order.net-price' | translate\\\">\\r\\n                    {{ discount.amount | localeCurrency: order.currencyCode }}\\r\\n                </div>\\r\\n            </td>\\r\\n        </tr>\\r\\n        <tr class=\\\"sub-total\\\">\\r\\n            <td class=\\\"left clr-align-middle\\\">{{ 'order.sub-total' | translate }}</td>\\r\\n            <td colspan=\\\"4\\\"></td>\\r\\n            <td class=\\\"clr-align-middle\\\">\\r\\n                {{ order.subTotalWithTax | localeCurrency: order.currencyCode }}\\r\\n                <div class=\\\"net-price\\\" [title]=\\\"'order.net-price' | translate\\\">\\r\\n                    {{ order.subTotal | localeCurrency: order.currencyCode }}\\r\\n                </div>\\r\\n            </td>\\r\\n        </tr>\\r\\n        <tr class=\\\"shipping\\\">\\r\\n            <td class=\\\"left clr-align-middle\\\">{{ 'order.shipping' | translate }}</td>\\r\\n            <td class=\\\"clr-align-middle\\\">{{ order.shippingLines[0]?.shippingMethod?.name }}</td>\\r\\n            <td colspan=\\\"3\\\"></td>\\r\\n            <td class=\\\"clr-align-middle\\\">\\r\\n                {{ order.shippingWithTax | localeCurrency: order.currencyCode }}\\r\\n                <div class=\\\"net-price\\\" [title]=\\\"'order.net-price' | translate\\\">\\r\\n                    {{ order.shipping | localeCurrency: order.currencyCode }}\\r\\n                </div>\\r\\n            </td>\\r\\n        </tr>\\r\\n        <tr class=\\\"total\\\">\\r\\n            <td class=\\\"left clr-align-middle\\\">{{ 'order.total' | translate }}</td>\\r\\n            <td colspan=\\\"4\\\"></td>\\r\\n            <td class=\\\"clr-align-middle\\\">\\r\\n                {{ order.totalWithTax | localeCurrency: order.currencyCode }}\\r\\n                <div class=\\\"net-price\\\" [title]=\\\"'order.net-price' | translate\\\">\\r\\n                    {{ order.total | localeCurrency: order.currencyCode }}\\r\\n                </div>\\r\\n            </td>\\r\\n        </tr>\\r\\n    </tbody>\\r\\n</table>\\r\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\".order-table .is-cancelled td{text-decoration:line-through;background-color:var(--color-component-bg-200)}.order-table .sub-total td,.order-table .total td{border-top:1px dashed var(--color-component-border-200)}.order-table .total td{font-weight:700}.order-table td.custom-fields-row{border-top-style:dashed;border-top-color:var(--color-grey-200)}.order-table .order-line-custom-fields{display:flex;flex-wrap:wrap}.order-table .order-line-custom-fields .custom-field{text-align:start;max-width:200px;overflow:hidden;text-overflow:ellipsis;margin-bottom:6px;margin-right:18px}.order-table .order-line-custom-field{background-color:var(--color-component-bg-100)}.order-table .net-price,.order-table .order-line-custom-field .custom-field-ellipsis{color:var(--color-text-300)}.order-table .net-price{font-size:11px}.order-table .promotions-label{-webkit-text-decoration:underline dotted var(--color-text-200);text-decoration:underline dotted var(--color-text-200);font-size:11px;margin-top:6px;cursor:pointer;text-transform:lowercase}::ng-deep .line-promotion{display:flex;justify-content:space-between;padding:6px 12px}::ng-deep .line-promotion .promotion-amount{margin-left:12px}::ng-deep .line-promotion .net-price{font-size:11px;color:var(--color-text-300)}\"]\n            }]\n    }], function () { return []; }, { order: [{\n            type: Input\n        }], orderLineCustomFields: [{\n            type: Input\n        }] }); })();\n\nclass PaymentDetailComponent {\r\n}\nPaymentDetailComponent.ɵfac = function PaymentDetailComponent_Factory(t) { return new (t || PaymentDetailComponent)(); };\nPaymentDetailComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: PaymentDetailComponent, selectors: [[\"vdr-payment-detail\"]], inputs: { payment: \"payment\", currencyCode: \"currencyCode\" }, decls: 12, vars: 17, consts: [[3, \"label\"], [3, \"label\", 4, \"ngIf\"], [3, \"value\"]], template: function PaymentDetailComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"vdr-labeled-data\", 0);\n        ɵngcc0.ɵɵpipe(1, \"translate\");\n        ɵngcc0.ɵɵtext(2);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(3, \"vdr-labeled-data\", 0);\n        ɵngcc0.ɵɵpipe(4, \"translate\");\n        ɵngcc0.ɵɵtext(5);\n        ɵngcc0.ɵɵpipe(6, \"localeCurrency\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵtemplate(7, PaymentDetailComponent_vdr_labeled_data_7_Template, 3, 4, \"vdr-labeled-data\", 1);\n        ɵngcc0.ɵɵtemplate(8, PaymentDetailComponent_vdr_labeled_data_8_Template, 3, 4, \"vdr-labeled-data\", 1);\n        ɵngcc0.ɵɵelementStart(9, \"vdr-labeled-data\", 0);\n        ɵngcc0.ɵɵpipe(10, \"translate\");\n        ɵngcc0.ɵɵelement(11, \"vdr-object-tree\", 2);\n        ɵngcc0.ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"label\", ɵngcc0.ɵɵpipeBind1(1, 8, \"order.payment-method\"));\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵtextInterpolate1(\" \", ctx.payment.method, \"\\n\");\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"label\", ɵngcc0.ɵɵpipeBind1(4, 10, \"order.amount\"));\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind2(6, 12, ctx.payment.amount, ctx.currencyCode), \"\\n\");\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.payment.errorMessage);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.payment.transactionId);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"label\", ɵngcc0.ɵɵpipeBind1(10, 15, \"order.payment-metadata\"));\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"value\", ctx.payment.metadata);\n    } }, directives: [ɵngcc1.LabeledDataComponent, ɵngcc5.NgIf, ɵngcc1.ObjectTreeComponent], pipes: [ɵngcc4.TranslatePipe, ɵngcc1.LocaleCurrencyPipe], styles: [\"\"], changeDetection: 0 });\r\nPaymentDetailComponent.propDecorators = {\r\n    payment: [{ type: Input }],\r\n    currencyCode: [{ type: Input }]\r\n};\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(PaymentDetailComponent, [{\n        type: Component,\n        args: [{\n                selector: 'vdr-payment-detail',\n                template: \"<vdr-labeled-data [label]=\\\"'order.payment-method' | translate\\\">\\r\\n    {{ payment.method }}\\r\\n</vdr-labeled-data>\\r\\n<vdr-labeled-data [label]=\\\"'order.amount' | translate\\\">\\r\\n    {{ payment.amount | localeCurrency: currencyCode }}\\r\\n</vdr-labeled-data>\\r\\n<vdr-labeled-data *ngIf=\\\"payment.errorMessage\\\" [label]=\\\"'order.error-message' | translate\\\">\\r\\n    {{ payment.errorMessage }}\\r\\n</vdr-labeled-data>\\r\\n<vdr-labeled-data *ngIf=\\\"payment.transactionId\\\" [label]=\\\"'order.transaction-id' | translate\\\">\\r\\n    {{ payment.transactionId }}\\r\\n</vdr-labeled-data>\\r\\n<vdr-labeled-data [label]=\\\"'order.payment-metadata' | translate\\\">\\r\\n    <vdr-object-tree [value]=\\\"payment.metadata\\\"></vdr-object-tree>\\r\\n</vdr-labeled-data>\\r\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\"\"]\n            }]\n    }], null, { payment: [{\n            type: Input\n        }], currencyCode: [{\n            type: Input\n        }] }); })();\n\nclass PaymentStateLabelComponent {\r\n    get chipColorType() {\r\n        switch (this.state) {\r\n            case 'Authorized':\r\n                return 'warning';\r\n            case 'Settled':\r\n                return 'success';\r\n            case 'Declined':\r\n            case 'Cancelled':\r\n                return 'error';\r\n        }\r\n    }\r\n}\nPaymentStateLabelComponent.ɵfac = function PaymentStateLabelComponent_Factory(t) { return new (t || PaymentStateLabelComponent)(); };\nPaymentStateLabelComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: PaymentStateLabelComponent, selectors: [[\"vdr-payment-state-label\"]], inputs: { state: \"state\" }, decls: 6, vars: 10, consts: [[3, \"title\", \"colorType\"], [\"shape\", \"check-circle\", 4, \"ngIf\"], [\"shape\", \"check-circle\"]], template: function PaymentStateLabelComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"vdr-chip\", 0);\n        ɵngcc0.ɵɵpipe(1, \"translate\");\n        ɵngcc0.ɵɵtemplate(2, PaymentStateLabelComponent_clr_icon_2_Template, 1, 0, \"clr-icon\", 1);\n        ɵngcc0.ɵɵtext(3);\n        ɵngcc0.ɵɵpipe(4, \"translate\");\n        ɵngcc0.ɵɵpipe(5, \"stateI18nToken\");\n        ɵngcc0.ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"title\", ɵngcc0.ɵɵpipeBind1(1, 4, \"order.payment-state\"))(\"colorType\", ctx.chipColorType);\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.state === \"Settled\");\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(4, 6, ɵngcc0.ɵɵpipeBind1(5, 8, ctx.state)), \"\\n\");\n    } }, directives: [ɵngcc1.ChipComponent, ɵngcc5.NgIf, ɵngcc6.ClrIconCustomTag], pipes: [ɵngcc4.TranslatePipe, ɵngcc1.StateI18nTokenPipe], styles: [\"[_nghost-%COMP%]{font-size:14px}\"], changeDetection: 0 });\r\nPaymentStateLabelComponent.propDecorators = {\r\n    state: [{ type: Input }]\r\n};\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(PaymentStateLabelComponent, [{\n        type: Component,\n        args: [{\n                selector: 'vdr-payment-state-label',\n                template: \"<vdr-chip [title]=\\\"'order.payment-state' | translate\\\" [colorType]=\\\"chipColorType\\\">\\r\\n    <clr-icon shape=\\\"check-circle\\\" *ngIf=\\\"state === 'Settled'\\\"></clr-icon>\\r\\n    {{ state | stateI18nToken | translate }}\\r\\n</vdr-chip>\\r\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\":host{font-size:14px}\"]\n            }]\n    }], null, { state: [{\n            type: Input\n        }] }); })();\n\nclass RefundStateLabelComponent {\r\n    get chipColorType() {\r\n        switch (this.state) {\r\n            case 'Pending':\r\n                return 'warning';\r\n            case 'Settled':\r\n                return 'success';\r\n            case 'Failed':\r\n                return 'error';\r\n        }\r\n    }\r\n}\nRefundStateLabelComponent.ɵfac = function RefundStateLabelComponent_Factory(t) { return new (t || RefundStateLabelComponent)(); };\nRefundStateLabelComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: RefundStateLabelComponent, selectors: [[\"vdr-refund-state-label\"]], inputs: { state: \"state\" }, decls: 6, vars: 10, consts: [[3, \"title\", \"colorType\"], [\"shape\", \"check-circle\", 4, \"ngIf\"], [\"shape\", \"check-circle\"]], template: function RefundStateLabelComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"vdr-chip\", 0);\n        ɵngcc0.ɵɵpipe(1, \"translate\");\n        ɵngcc0.ɵɵtemplate(2, RefundStateLabelComponent_clr_icon_2_Template, 1, 0, \"clr-icon\", 1);\n        ɵngcc0.ɵɵtext(3);\n        ɵngcc0.ɵɵpipe(4, \"translate\");\n        ɵngcc0.ɵɵpipe(5, \"stateI18nToken\");\n        ɵngcc0.ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"title\", ɵngcc0.ɵɵpipeBind1(1, 4, \"order.payment-state\"))(\"colorType\", ctx.chipColorType);\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.state === \"Settled\");\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(4, 6, ɵngcc0.ɵɵpipeBind1(5, 8, ctx.state)), \"\\n\");\n    } }, directives: [ɵngcc1.ChipComponent, ɵngcc5.NgIf, ɵngcc6.ClrIconCustomTag], pipes: [ɵngcc4.TranslatePipe, ɵngcc1.StateI18nTokenPipe], styles: [\"[_nghost-%COMP%]{font-size:14px}\"], changeDetection: 0 });\r\nRefundStateLabelComponent.propDecorators = {\r\n    state: [{ type: Input }]\r\n};\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(RefundStateLabelComponent, [{\n        type: Component,\n        args: [{\n                selector: 'vdr-refund-state-label',\n                template: \"<vdr-chip [title]=\\\"'order.payment-state' | translate\\\" [colorType]=\\\"chipColorType\\\">\\r\\n    <clr-icon shape=\\\"check-circle\\\" *ngIf=\\\"state === 'Settled'\\\"></clr-icon>\\r\\n    {{ state | stateI18nToken | translate }}\\r\\n</vdr-chip>\\r\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\":host{font-size:14px}\"]\n            }]\n    }], null, { state: [{\n            type: Input\n        }] }); })();\n\nclass SimpleItemListComponent {\r\n}\nSimpleItemListComponent.ɵfac = function SimpleItemListComponent_Factory(t) { return new (t || SimpleItemListComponent)(); };\nSimpleItemListComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: SimpleItemListComponent, selectors: [[\"vdr-simple-item-list\"]], inputs: { items: \"items\" }, decls: 3, vars: 1, consts: [[1, \"items-list\"], [3, \"title\", 4, \"ngFor\", \"ngForOf\"], [3, \"title\"], [1, \"quantity\"], [\"shape\", \"times\", \"size\", \"12\"]], template: function SimpleItemListComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"div\", 0);\n        ɵngcc0.ɵɵelementStart(1, \"ul\");\n        ɵngcc0.ɵɵtemplate(2, SimpleItemListComponent_li_2_Template, 5, 3, \"li\", 1);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"ngForOf\", ctx.items);\n    } }, directives: [ɵngcc5.NgForOf, ɵngcc6.ClrIconCustomTag], styles: [\".items-list[_ngcontent-%COMP%]{font-size:12px}.items-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin-top:6px;list-style-type:none;margin-left:2px}.items-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{line-height:14px;text-overflow:ellipsis;overflow:hidden}.items-list[_ngcontent-%COMP%]   .quantity[_ngcontent-%COMP%]{min-width:16px;display:inline-block}\"], changeDetection: 0 });\r\nSimpleItemListComponent.propDecorators = {\r\n    items: [{ type: Input }]\r\n};\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(SimpleItemListComponent, [{\n        type: Component,\n        args: [{\n                selector: 'vdr-simple-item-list',\n                template: \"<div class=\\\"items-list\\\">\\r\\n    <ul>\\r\\n        <li *ngFor=\\\"let item of items\\\" [title]=\\\"item.name\\\">\\r\\n            <div class=\\\"quantity\\\">{{ item.quantity }}</div>\\r\\n            <clr-icon shape=\\\"times\\\" size=\\\"12\\\"></clr-icon>\\r\\n            {{ item.name }}\\r\\n        </li>\\r\\n    </ul>\\r\\n</div>\\r\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\".items-list{font-size:12px}.items-list ul{margin-top:6px;list-style-type:none;margin-left:2px}.items-list ul li{line-height:14px;text-overflow:ellipsis;overflow:hidden}.items-list .quantity{min-width:16px;display:inline-block}\"]\n            }]\n    }], null, { items: [{\n            type: Input\n        }] }); })();\n\n/**\r\n * Resolves the id from the path into a Customer entity.\r\n */\r\nclass OrderResolver extends BaseEntityResolver {\r\n    constructor(router, dataService) {\r\n        super(router, {\r\n            __typename: 'Order',\r\n            id: '',\r\n            code: '',\r\n            createdAt: '',\r\n            updatedAt: '',\r\n            total: 0,\r\n        }, id => dataService.order.getOrder(id).mapStream(data => data.order));\r\n    }\r\n}\nOrderResolver.ɵfac = function OrderResolver_Factory(t) { return new (t || OrderResolver)(ɵngcc0.ɵɵinject(ɵngcc8.Router), ɵngcc0.ɵɵinject(ɵngcc1.DataService)); };\r\nOrderResolver.ɵprov = ɵɵdefineInjectable({ factory: function OrderResolver_Factory() { return new OrderResolver(ɵɵinject(Router), ɵɵinject(DataService)); }, token: OrderResolver, providedIn: \"root\" });\r\nOrderResolver.ctorParameters = () => [\r\n    { type: Router },\r\n    { type: DataService }\r\n];\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(OrderResolver, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: ɵngcc8.Router }, { type: ɵngcc1.DataService }]; }, null); })();\n\nconst ɵ0 = {\r\n    breadcrumb: marker('breadcrumb.orders'),\r\n}, ɵ1 = {\r\n    breadcrumb: orderBreadcrumb,\r\n}, ɵ2 = {\r\n    breadcrumb: modifyingOrderBreadcrumb,\r\n};\r\nconst orderRoutes = [\r\n    {\r\n        path: '',\r\n        component: OrderListComponent,\r\n        data: ɵ0,\r\n    },\r\n    {\r\n        path: ':id',\r\n        component: OrderDetailComponent,\r\n        resolve: createResolveData(OrderResolver),\r\n        canDeactivate: [CanDeactivateDetailGuard],\r\n        data: ɵ1,\r\n    },\r\n    {\r\n        path: ':id/modify',\r\n        component: OrderEditorComponent,\r\n        resolve: createResolveData(OrderResolver),\r\n        // canDeactivate: [CanDeactivateDetailGuard],\r\n        data: ɵ2,\r\n    },\r\n];\r\nfunction orderBreadcrumb(data, params) {\r\n    return detailBreadcrumb({\r\n        entity: data.entity,\r\n        id: params.id,\r\n        breadcrumbKey: 'breadcrumb.orders',\r\n        getName: order => order.code,\r\n        route: '',\r\n    });\r\n}\r\nfunction modifyingOrderBreadcrumb(data, params) {\r\n    return orderBreadcrumb(data, params).pipe(map((breadcrumbs) => {\r\n        const modifiedBreadcrumbs = breadcrumbs.slice();\r\n        modifiedBreadcrumbs[0].link[0] = '../';\r\n        modifiedBreadcrumbs[1].link[0] = '../orders';\r\n        return modifiedBreadcrumbs.concat({ label: marker('breadcrumb.modifying'), link: [''] });\r\n    }));\r\n}\n\nclass OrderModule {\r\n}\nOrderModule.ɵfac = function OrderModule_Factory(t) { return new (t || OrderModule)(); };\nOrderModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: OrderModule });\nOrderModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ imports: [[SharedModule, RouterModule.forChild(orderRoutes)]] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(OrderModule, { declarations: function () { return [OrderListComponent, OrderDetailComponent, FulfillOrderDialogComponent, LineFulfillmentComponent, RefundOrderDialogComponent, CancelOrderDialogComponent, PaymentStateLabelComponent, LineRefundsComponent, OrderPaymentCardComponent, RefundStateLabelComponent, SettleRefundDialogComponent, OrderHistoryComponent, FulfillmentDetailComponent, PaymentDetailComponent, SimpleItemListComponent, OrderCustomFieldsCardComponent, OrderProcessGraphComponent, OrderProcessNodeComponent, OrderProcessEdgeComponent, OrderProcessGraphDialogComponent, FulfillmentStateLabelComponent, FulfillmentCardComponent, OrderEditorComponent, OrderTableComponent, OrderEditsPreviewDialogComponent, ModificationDetailComponent, AddManualPaymentDialogComponent, OrderStateSelectDialogComponent]; }, imports: function () { return [SharedModule, ɵngcc8.RouterModule]; } }); })();\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(OrderModule, [{\n        type: NgModule,\n        args: [{\n                imports: [SharedModule, RouterModule.forChild(orderRoutes)],\n                declarations: [\n                    OrderListComponent,\n                    OrderDetailComponent,\n                    FulfillOrderDialogComponent,\n                    LineFulfillmentComponent,\n                    RefundOrderDialogComponent,\n                    CancelOrderDialogComponent,\n                    PaymentStateLabelComponent,\n                    LineRefundsComponent,\n                    OrderPaymentCardComponent,\n                    RefundStateLabelComponent,\n                    SettleRefundDialogComponent,\n                    OrderHistoryComponent,\n                    FulfillmentDetailComponent,\n                    PaymentDetailComponent,\n                    SimpleItemListComponent,\n                    OrderCustomFieldsCardComponent,\n                    OrderProcessGraphComponent,\n                    OrderProcessNodeComponent,\n                    OrderProcessEdgeComponent,\n                    OrderProcessGraphDialogComponent,\n                    FulfillmentStateLabelComponent,\n                    FulfillmentCardComponent,\n                    OrderEditorComponent,\n                    OrderTableComponent,\n                    OrderEditsPreviewDialogComponent,\n                    ModificationDetailComponent,\n                    AddManualPaymentDialogComponent,\n                    OrderStateSelectDialogComponent,\n                ]\n            }]\n    }], null, null); })();\n\n// This file was generated by the build-public-api.ts script\n\n/**\r\n * Generated bundle index. Do not edit.\r\n */\n\nexport { AddManualPaymentDialogComponent, CancelOrderDialogComponent, FulfillOrderDialogComponent, FulfillmentCardComponent, FulfillmentDetailComponent, FulfillmentStateLabelComponent, LineFulfillmentComponent, LineRefundsComponent, ModificationDetailComponent, NODE_HEIGHT, OrderCustomFieldsCardComponent, OrderDetailComponent, OrderEditResultType, OrderEditorComponent, OrderEditsPreviewDialogComponent, OrderHistoryComponent, OrderListComponent, OrderModule, OrderPaymentCardComponent, OrderProcessEdgeComponent, OrderProcessGraphComponent, OrderProcessGraphDialogComponent, OrderProcessNodeComponent, OrderResolver, OrderStateSelectDialogComponent, OrderTableComponent, OrderTransitionService, PaymentDetailComponent, PaymentStateLabelComponent, RefundOrderDialogComponent, RefundStateLabelComponent, SettleRefundDialogComponent, SimpleItemListComponent, modifyingOrderBreadcrumb, orderBreadcrumb, orderRoutes, ɵ0, ɵ1, ɵ2 };\n\n//# sourceMappingURL=vendure-admin-ui-order.js.map"]}