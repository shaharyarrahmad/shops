"use strict";(self.webpackChunkvendure_admin_ui=self.webpackChunkvendure_admin_ui||[]).push([[923],{11923:function(e,n,t){t.r(n),t.d(n,{LoginComponent:function(){return f},LoginGuard:function(){return b},LoginModule:function(){return v},loginRoutes:function(){return x}});var r=t(51694),o=t(41460),i=t(38521),a=t(37097),s=t(21067),c=t(56258),g=t(70942),l=t(53198);function d(e,n){1&e&&(r.TgZ(0,"span"),r._uU(1,"vendure"),r.qZA())}function p(e,n){1&e&&(r.TgZ(0,"span"),r._uU(1,"-"),r.qZA())}function u(e,n){if(1&e&&(r.TgZ(0,"span"),r._uU(1),r.YNc(2,p,2,0,"span",4),r.qZA()),2&e){const e=r.oxw();r.xp6(1),r.hij("",e.brand," "),r.xp6(1),r.Q6J("ngIf",!e.hideVendureBranding||!e.hideVersion)}}function h(e,n){1&e&&(r.TgZ(0,"span"),r._uU(1,"vendure"),r.qZA())}function m(e,n){if(1&e&&(r.TgZ(0,"span"),r._uU(1),r.qZA()),2&e){const e=r.oxw();r.xp6(1),r.hij("v",e.version,"")}}class f{constructor(e,n){this.authService=e,this.router=n,this.username="",this.password="",this.rememberMe=!1,this.version=i.s5M,this.brand=(0,i.hq7)().brand,this.hideVendureBranding=(0,i.hq7)().hideVendureBranding,this.hideVersion=(0,i.hq7)().hideVersion}logIn(){this.errorMessage=void 0,this.authService.logIn(this.username,this.password,this.rememberMe).subscribe(e=>{switch(e.__typename){case"CurrentUser":const n=this.getRedirectRoute();this.router.navigateByUrl(n||"/");break;case"InvalidCredentialsError":case"NativeAuthStrategyError":this.errorMessage=e.message}})}getRedirectRoute(){let e;const n=new RegExp(`${i.ONw}=(.*)`);try{const t=window.location.search.match(n);t&&1<t.length&&(e=atob(decodeURIComponent(t[1])))}catch(t){}return e}}f.\u0275fac=function(e){return new(e||f)(r.Y36(i.e80),r.Y36(o.F0))},f.\u0275cmp=r.Xpm({type:f,selectors:[["vdr-login"]],decls:26,vars:25,consts:[[1,"login-wrapper"],[1,"login"],[1,"title"],["src","assets/logo-300px.png"],[4,"ngIf"],[1,"login-group"],["type","text","name","username","id","login_username",1,"username",3,"ngModel","placeholder","ngModelChange"],["name","password","type","password","id","login_password",1,"password",3,"ngModel","placeholder","ngModelChange"],[1,"login-error",3,"clrAlertType","clrAlertClosable"],[1,"alert-text"],["type","checkbox","clrCheckbox","","id","rememberme","name","rememberme",3,"ngModel","ngModelChange"],["type","submit",1,"btn","btn-primary",3,"disabled","click"],[1,"version"]],template:function(e,n){1&e&&(r.TgZ(0,"div",0),r.TgZ(1,"form",1),r.TgZ(2,"label",2),r._UZ(3,"img",3),r.YNc(4,d,2,0,"span",4),r.qZA(),r.TgZ(5,"div",5),r.TgZ(6,"input",6),r.NdJ("ngModelChange",function(e){return n.username=e}),r.ALo(7,"translate"),r.qZA(),r.TgZ(8,"input",7),r.NdJ("ngModelChange",function(e){return n.password=e}),r.ALo(9,"translate"),r.qZA(),r.TgZ(10,"clr-alert",8),r.TgZ(11,"clr-alert-item"),r.TgZ(12,"span",9),r._uU(13),r.qZA(),r.qZA(),r.qZA(),r.TgZ(14,"clr-checkbox-wrapper"),r.TgZ(15,"input",10),r.NdJ("ngModelChange",function(e){return n.rememberMe=e}),r.qZA(),r.TgZ(16,"label"),r._uU(17),r.ALo(18,"translate"),r.qZA(),r.qZA(),r.TgZ(19,"button",11),r.NdJ("click",function(){return n.logIn()}),r._uU(20),r.ALo(21,"translate"),r.qZA(),r.qZA(),r.TgZ(22,"div",12),r.YNc(23,u,3,2,"span",4),r.YNc(24,h,2,0,"span",4),r.YNc(25,m,2,1,"span",4),r.qZA(),r.qZA(),r.qZA()),2&e&&(r.xp6(4),r.Q6J("ngIf",!n.hideVendureBranding),r.xp6(2),r.Q6J("ngModel",n.username)("placeholder",r.lcZ(7,17,"common.username")),r.xp6(2),r.Q6J("ngModel",n.password)("placeholder",r.lcZ(9,19,"common.password")),r.xp6(2),r.ekj("visible",n.errorMessage),r.Q6J("clrAlertType","danger")("clrAlertClosable",!1),r.xp6(3),r.hij(" ",n.errorMessage," "),r.xp6(2),r.Q6J("ngModel",n.rememberMe),r.xp6(2),r.Oqu(r.lcZ(18,21,"common.remember-me")),r.xp6(2),r.Q6J("disabled",!n.username||!n.password),r.xp6(1),r.hij(" ",r.lcZ(21,23,"common.login")," "),r.xp6(3),r.Q6J("ngIf",n.brand),r.xp6(1),r.Q6J("ngIf",!n.hideVendureBranding),r.xp6(1),r.Q6J("ngIf",!n.hideVersion))},directives:[s._Y,s.JL,s.F,c.MgK,g.O5,i.y_K,s.Fj,s.JJ,s.On,c.TIm,c.CyW,c.I9z,c.PEh,s.Wl,c.KKC],pipes:[l.X$],styles:[".login-wrapper[_ngcontent-%COMP%]{background-image:linear-gradient(135deg,var(--color-login-gradient-top),var(--color-login-gradient-bottom)),var(--login-page-bg);background-blend-mode:screen;background-repeat:repeat;background-size:auto;background-position:initial;justify-content:center}@media screen and (max-width: 768px){.login-wrapper[_ngcontent-%COMP%]{justify-content:center;background-color:transparent}.login-wrapper[_ngcontent-%COMP%]   .login[_ngcontent-%COMP%]{margin:20px;padding:24px}}.login[_ngcontent-%COMP%]{margin:5vh 0;border-radius:6px;min-height:calc(100vh - 10vh);max-height:800px}.title[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;text-align:center;margin-top:8vh}.title[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;width:150px}.title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding-top:12px;font-weight:bold;color:var(--color-primary-500);font-size:38px}.version[_ngcontent-%COMP%]{flex:1;display:flex;align-items:flex-end;justify-content:center;color:var(--color-grey-300)}.version[_ngcontent-%COMP%]   span[_ngcontent-%COMP%] + span[_ngcontent-%COMP%]{margin-left:5px}.login-error[_ngcontent-%COMP%]{max-height:0;overflow:hidden}.login-error.visible[_ngcontent-%COMP%]{max-height:46px;transition:max-height .2s;animation:shake .82s cubic-bezier(.36,.07,.19,.97) both;animation-delay:.2s;transform:translate(0);-webkit-backface-visibility:hidden;backface-visibility:hidden;perspective:1000px}@keyframes shake{10%,90%{transform:translate(-1px)}20%,80%{transform:translate(2px)}30%,50%,70%{transform:translate(-4px)}40%,60%{transform:translate(4px)}}"]}),f.ctorParameters=()=>[{type:i.e80},{type:o.F0}];class b{constructor(e,n){this.router=e,this.authService=n}canActivate(e){return this.authService.checkAuthenticatedStatus().pipe((0,a.U)(e=>(e&&this.router.navigate(["/"]),!e)))}}b.\u0275fac=function(e){return new(e||b)(r.LFG(o.F0),r.LFG(i.e80))},b.\u0275prov=r.Yz7({factory:function(){return new b(r.LFG(o.F0),r.LFG(i.e80))},token:b,providedIn:"root"}),b.ctorParameters=()=>[{type:o.F0},{type:i.e80}];const x=[{path:"",component:f,pathMatch:"full",canActivate:[b]}];class v{}v.\u0275fac=function(e){return new(e||v)},v.\u0275mod=r.oAB({type:v}),v.\u0275inj=r.cJS({imports:[[i.m81,o.Bz.forChild(x)]]})}}]);
//# sourceMappingURL=923-es2015.f0233d3a9e1045484105.js.map