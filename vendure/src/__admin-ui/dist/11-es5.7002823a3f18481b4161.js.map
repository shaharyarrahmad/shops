{"version":3,"sources":["webpack:///home/martijn/git/shops/vendure/node_modules/@vendure/admin-ui/__ivy_ngcc__/fesm2015/vendure-admin-ui-marketing.js"],"names":["_c0","PromotionDetailComponent_clr_toggle_wrapper_5_Template","rf","ctx","ctx_r0","detailForm","get","PromotionDetailComponent_button_8_Template","_r9","create","ctx_r1","saveButtonEnabled","PromotionDetailComponent_ng_template_10_button_0_Template","_r12","save","ctx_r10","PromotionDetailComponent_ng_template_10_Template","PromotionDetailComponent_ng_container_36_Template","_r16","$event","removeCondition","condition_r13","$implicit","i_r14","index","ctx_r4","getConditionDefinition","PromotionDetailComponent_vdr_dropdown_38_button_6_Template","_r20","condition_r18","addCondition","description","PromotionDetailComponent_vdr_dropdown_38_Template","ctx_r5","getAvailableConditions","PromotionDetailComponent_vdr_configurable_input_43_Template","_r24","removeAction","action_r21","i_r22","ctx_r6","getActionDefinition","PromotionDetailComponent_vdr_dropdown_45_button_6_Template","_r28","action_r26","addAction","PromotionDetailComponent_vdr_dropdown_45_Template","ctx_r7","getAvailableActions","_c1","PromotionListComponent_a_3_Template","PromotionListComponent_ng_template_24_vdr_chip_3_Template","promotion_r2","item","couponCode","PromotionListComponent_ng_template_24_vdr_chip_11_Template","_c2","a1","PromotionListComponent_ng_template_24_Template","_r7","deletePromotion","id","name","startsAt","endsAt","enabled","PromotionDetailComponent","router","route","serverConfigService","changeDetector","dataService","formBuilder","notificationService","super","this","conditions","actions","allConditions","allActions","group","required","perCustomerUsageLimit","array","init","promotion$","entity$","promotion","getPromotionActionsAndConditions","single$","subscribe","data","promotionActions","promotionConditions","markForCheck","destroy","filter","o","find","c","code","condition","a","action","dirty","valid","length","value","addOperation","markAsDirty","removeOperation","key","formValue","input","mapOperationsToInputs","createPromotion","__typename","success","entity","markAsPristine","navigate","relativeTo","error","message","err","pipe","updatePromotion","languageCode","patchValue","forEach","operations","formValueOperations","map","i","arguments","Object","values","args","j","operation","operationsArray","formArrayOf","collection","findIndex","argsHash","reduce","output","arg","_a","assign","getDefaultArgValue","push","control","argName","def","argDef","Error","removeAt","splice","ɵfac","t","ɵcmp","type","selectors","features","decls","vars","consts","template","_r2","isNew$","directives","pipes","styles","changeDetection","ctorParameters","PromotionListComponent","modalService","getPromotions","promotions","promotionId","dialog","title","buttons","label","returnValue","response","refresh","setPageNumber","setItemsPerPage","items$","itemsPerPage$","totalItems$","currentPage$","PromotionResolver","createdAt","updatedAt","getPromotion","mapStream","ɵprov","factory","token","providedIn","ɵ0","breadcrumb","ɵ1","promotionBreadcrumb","marketingRoutes","path","component","resolve","canDeactivate","params","breadcrumbKey","getName","MarketingModule","ɵmod","ɵinj","imports","forChild"],"mappings":"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","file":"x","sourcesContent":["import { Component, ChangeDetectionStrategy, ChangeDetectorRef, ɵɵdefineInjectable, ɵɵinject, Injectable, NgModule } from '@angular/core';\nimport { Validators, FormBuilder } from '@angular/forms';\nimport { Router, ActivatedRoute, RouterModule } from '@angular/router';\nimport { marker } from '@biesbjerg/ngx-translate-extract-marker';\nimport { BaseDetailComponent, encodeConfigArgValue, getConfigArgValue, getDefaultConfigArgValue, ServerConfigService, DataService, NotificationService, BaseListComponent, ModalService, BaseEntityResolver, createResolveData, CanDeactivateDetailGuard, detailBreadcrumb, SharedModule } from '@vendure/admin-ui/core';\nimport { take, mergeMap, switchMap } from 'rxjs/operators';\nimport { EMPTY } from 'rxjs';\n\nimport * as ɵngcc0 from '@angular/core';\nimport * as ɵngcc1 from '@angular/router';\nimport * as ɵngcc2 from '@vendure/admin-ui/core';\nimport * as ɵngcc3 from '@angular/forms';\nimport * as ɵngcc4 from '@angular/common';\nimport * as ɵngcc5 from '@clr/angular';\nimport * as ɵngcc6 from '@ngx-translate/core';\n\nconst _c0 = function () { return [\"enabled\"]; };\nfunction PromotionDetailComponent_clr_toggle_wrapper_5_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"clr-toggle-wrapper\");\n    ɵngcc0.ɵɵelement(1, \"input\", 23);\n    ɵngcc0.ɵɵelementStart(2, \"label\");\n    ɵngcc0.ɵɵtext(3);\n    ɵngcc0.ɵɵpipe(4, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"formControl\", ctx_r0.detailForm.get(ɵngcc0.ɵɵpureFunction0(4, _c0)));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(4, 2, \"common.enabled\"));\n} }\nfunction PromotionDetailComponent_button_8_Template(rf, ctx) { if (rf & 1) {\n    const _r9 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"button\", 24);\n    ɵngcc0.ɵɵlistener(\"click\", function PromotionDetailComponent_button_8_Template_button_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r9); const ctx_r8 = ɵngcc0.ɵɵnextContext(); return ctx_r8.create(); });\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r1 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"disabled\", !ctx_r1.saveButtonEnabled());\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(2, 2, \"common.create\"), \" \");\n} }\nfunction PromotionDetailComponent_ng_template_10_button_0_Template(rf, ctx) { if (rf & 1) {\n    const _r12 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"button\", 24);\n    ɵngcc0.ɵɵlistener(\"click\", function PromotionDetailComponent_ng_template_10_button_0_Template_button_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r12); const ctx_r11 = ɵngcc0.ɵɵnextContext(2); return ctx_r11.save(); });\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r10 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵproperty(\"disabled\", !ctx_r10.saveButtonEnabled());\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(2, 2, \"common.update\"), \" \");\n} }\nfunction PromotionDetailComponent_ng_template_10_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵtemplate(0, PromotionDetailComponent_ng_template_10_button_0_Template, 3, 4, \"button\", 25);\n} if (rf & 2) {\n    ɵngcc0.ɵɵproperty(\"vdrIfPermissions\", \"UpdatePromotion\");\n} }\nfunction PromotionDetailComponent_ng_container_36_Template(rf, ctx) { if (rf & 1) {\n    const _r16 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵelementStart(1, \"vdr-configurable-input\", 26);\n    ɵngcc0.ɵɵlistener(\"remove\", function PromotionDetailComponent_ng_container_36_Template_vdr_configurable_input_remove_1_listener($event) { ɵngcc0.ɵɵrestoreView(_r16); const ctx_r15 = ɵngcc0.ɵɵnextContext(); return ctx_r15.removeCondition($event); });\n    ɵngcc0.ɵɵpipe(2, \"hasPermission\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const condition_r13 = ctx.$implicit;\n    const i_r14 = ctx.index;\n    const ctx_r4 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"readonly\", !ɵngcc0.ɵɵpipeBind1(2, 4, \"UpdatePromotion\"))(\"operation\", condition_r13)(\"operationDefinition\", ctx_r4.getConditionDefinition(condition_r13))(\"formControlName\", i_r14);\n} }\nfunction PromotionDetailComponent_vdr_dropdown_38_button_6_Template(rf, ctx) { if (rf & 1) {\n    const _r20 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"button\", 31);\n    ɵngcc0.ɵɵlistener(\"click\", function PromotionDetailComponent_vdr_dropdown_38_button_6_Template_button_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r20); const condition_r18 = ctx.$implicit; const ctx_r19 = ɵngcc0.ɵɵnextContext(2); return ctx_r19.addCondition(condition_r18); });\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const condition_r18 = ctx.$implicit;\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", condition_r18.description, \" \");\n} }\nfunction PromotionDetailComponent_vdr_dropdown_38_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"vdr-dropdown\");\n    ɵngcc0.ɵɵelementStart(1, \"button\", 27);\n    ɵngcc0.ɵɵelement(2, \"clr-icon\", 28);\n    ɵngcc0.ɵɵtext(3);\n    ɵngcc0.ɵɵpipe(4, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(5, \"vdr-dropdown-menu\", 29);\n    ɵngcc0.ɵɵtemplate(6, PromotionDetailComponent_vdr_dropdown_38_button_6_Template, 2, 1, \"button\", 30);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r5 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(4, 2, \"marketing.add-condition\"), \" \");\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵproperty(\"ngForOf\", ctx_r5.getAvailableConditions());\n} }\nfunction PromotionDetailComponent_vdr_configurable_input_43_Template(rf, ctx) { if (rf & 1) {\n    const _r24 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"vdr-configurable-input\", 32);\n    ɵngcc0.ɵɵlistener(\"remove\", function PromotionDetailComponent_vdr_configurable_input_43_Template_vdr_configurable_input_remove_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r24); const ctx_r23 = ɵngcc0.ɵɵnextContext(); return ctx_r23.removeAction($event); });\n    ɵngcc0.ɵɵpipe(1, \"hasPermission\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const action_r21 = ctx.$implicit;\n    const i_r22 = ctx.index;\n    const ctx_r6 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"operation\", action_r21)(\"readonly\", !ɵngcc0.ɵɵpipeBind1(1, 4, \"UpdatePromotion\"))(\"operationDefinition\", ctx_r6.getActionDefinition(action_r21))(\"formControlName\", i_r22);\n} }\nfunction PromotionDetailComponent_vdr_dropdown_45_button_6_Template(rf, ctx) { if (rf & 1) {\n    const _r28 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"button\", 31);\n    ɵngcc0.ɵɵlistener(\"click\", function PromotionDetailComponent_vdr_dropdown_45_button_6_Template_button_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r28); const action_r26 = ctx.$implicit; const ctx_r27 = ɵngcc0.ɵɵnextContext(2); return ctx_r27.addAction(action_r26); });\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const action_r26 = ctx.$implicit;\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", action_r26.description, \" \");\n} }\nfunction PromotionDetailComponent_vdr_dropdown_45_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"vdr-dropdown\");\n    ɵngcc0.ɵɵelementStart(1, \"button\", 27);\n    ɵngcc0.ɵɵelement(2, \"clr-icon\", 28);\n    ɵngcc0.ɵɵtext(3);\n    ɵngcc0.ɵɵpipe(4, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(5, \"vdr-dropdown-menu\", 29);\n    ɵngcc0.ɵɵtemplate(6, PromotionDetailComponent_vdr_dropdown_45_button_6_Template, 2, 1, \"button\", 30);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r7 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(4, 2, \"marketing.add-action\"), \" \");\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵproperty(\"ngForOf\", ctx_r7.getAvailableActions());\n} }\nconst _c1 = function () { return [\"./create\"]; };\nfunction PromotionListComponent_a_3_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"a\", 3);\n    ɵngcc0.ɵɵelement(1, \"clr-icon\", 4);\n    ɵngcc0.ɵɵtext(2);\n    ɵngcc0.ɵɵpipe(3, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    ɵngcc0.ɵɵproperty(\"routerLink\", ɵngcc0.ɵɵpureFunction0(4, _c1));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(3, 2, \"marketing.create-new-promotion\"), \" \");\n} }\nfunction PromotionListComponent_ng_template_24_vdr_chip_3_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"vdr-chip\");\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const promotion_r2 = ɵngcc0.ɵɵnextContext().item;\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", promotion_r2.couponCode, \" \");\n} }\nfunction PromotionListComponent_ng_template_24_vdr_chip_11_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"vdr-chip\");\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(2, 1, \"common.disabled\"));\n} }\nconst _c2 = function (a1) { return [\"./\", a1]; };\nfunction PromotionListComponent_ng_template_24_Template(rf, ctx) { if (rf & 1) {\n    const _r7 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"td\", 5);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(2, \"td\", 5);\n    ɵngcc0.ɵɵtemplate(3, PromotionListComponent_ng_template_24_vdr_chip_3_Template, 2, 1, \"vdr-chip\", 6);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(4, \"td\", 5);\n    ɵngcc0.ɵɵtext(5);\n    ɵngcc0.ɵɵpipe(6, \"date\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(7, \"td\", 5);\n    ɵngcc0.ɵɵtext(8);\n    ɵngcc0.ɵɵpipe(9, \"date\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(10, \"td\", 7);\n    ɵngcc0.ɵɵtemplate(11, PromotionListComponent_ng_template_24_vdr_chip_11_Template, 3, 3, \"vdr-chip\", 6);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(12, \"td\", 8);\n    ɵngcc0.ɵɵelement(13, \"vdr-table-row-action\", 9);\n    ɵngcc0.ɵɵpipe(14, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(15, \"td\", 8);\n    ɵngcc0.ɵɵelementStart(16, \"vdr-dropdown\");\n    ɵngcc0.ɵɵelementStart(17, \"button\", 10);\n    ɵngcc0.ɵɵtext(18);\n    ɵngcc0.ɵɵpipe(19, \"translate\");\n    ɵngcc0.ɵɵelement(20, \"clr-icon\", 11);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(21, \"vdr-dropdown-menu\", 12);\n    ɵngcc0.ɵɵelementStart(22, \"button\", 13);\n    ɵngcc0.ɵɵlistener(\"click\", function PromotionListComponent_ng_template_24_Template_button_click_22_listener() { ɵngcc0.ɵɵrestoreView(_r7); const promotion_r2 = ctx.item; const ctx_r6 = ɵngcc0.ɵɵnextContext(); return ctx_r6.deletePromotion(promotion_r2.id); });\n    ɵngcc0.ɵɵpipe(23, \"hasPermission\");\n    ɵngcc0.ɵɵelement(24, \"clr-icon\", 14);\n    ɵngcc0.ɵɵtext(25);\n    ɵngcc0.ɵɵpipe(26, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const promotion_r2 = ctx.item;\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate(promotion_r2.name);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngIf\", promotion_r2.couponCode);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind2(6, 10, promotion_r2.startsAt, \"longDate\"));\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind2(9, 13, promotion_r2.endsAt, \"longDate\"));\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵproperty(\"ngIf\", !promotion_r2.enabled);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"label\", ɵngcc0.ɵɵpipeBind1(14, 16, \"common.edit\"))(\"linkTo\", ɵngcc0.ɵɵpureFunction1(24, _c2, promotion_r2.id));\n    ɵngcc0.ɵɵadvance(5);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(19, 18, \"common.actions\"), \" \");\n    ɵngcc0.ɵɵadvance(4);\n    ɵngcc0.ɵɵproperty(\"disabled\", !ɵngcc0.ɵɵpipeBind1(23, 20, \"DeletePromotion\"));\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(26, 22, \"common.delete\"), \" \");\n} }\nclass PromotionDetailComponent extends BaseDetailComponent {\r\n    constructor(router, route, serverConfigService, changeDetector, dataService, formBuilder, notificationService) {\r\n        super(route, router, serverConfigService, dataService);\r\n        this.changeDetector = changeDetector;\r\n        this.dataService = dataService;\r\n        this.formBuilder = formBuilder;\r\n        this.notificationService = notificationService;\r\n        this.conditions = [];\r\n        this.actions = [];\r\n        this.allConditions = [];\r\n        this.allActions = [];\r\n        this.detailForm = this.formBuilder.group({\r\n            name: ['', Validators.required],\r\n            enabled: true,\r\n            couponCode: null,\r\n            perCustomerUsageLimit: null,\r\n            startsAt: null,\r\n            endsAt: null,\r\n            conditions: this.formBuilder.array([]),\r\n            actions: this.formBuilder.array([]),\r\n        });\r\n    }\r\n    ngOnInit() {\r\n        this.init();\r\n        this.promotion$ = this.entity$;\r\n        this.dataService.promotion.getPromotionActionsAndConditions().single$.subscribe(data => {\r\n            this.allActions = data.promotionActions;\r\n            this.allConditions = data.promotionConditions;\r\n            this.changeDetector.markForCheck();\r\n        });\r\n    }\r\n    ngOnDestroy() {\r\n        this.destroy();\r\n    }\r\n    getAvailableConditions() {\r\n        return this.allConditions.filter(o => !this.conditions.find(c => c.code === o.code));\r\n    }\r\n    getConditionDefinition(condition) {\r\n        return this.allConditions.find(c => c.code === condition.code);\r\n    }\r\n    getAvailableActions() {\r\n        return this.allActions.filter(o => !this.actions.find(a => a.code === o.code));\r\n    }\r\n    getActionDefinition(action) {\r\n        return this.allActions.find(c => c.code === action.code);\r\n    }\r\n    saveButtonEnabled() {\r\n        return (this.detailForm.dirty &&\r\n            this.detailForm.valid &&\r\n            (this.conditions.length !== 0 || this.detailForm.value.couponCode) &&\r\n            this.actions.length !== 0);\r\n    }\r\n    addCondition(condition) {\r\n        this.addOperation('conditions', condition);\r\n        this.detailForm.markAsDirty();\r\n    }\r\n    addAction(action) {\r\n        this.addOperation('actions', action);\r\n        this.detailForm.markAsDirty();\r\n    }\r\n    removeCondition(condition) {\r\n        this.removeOperation('conditions', condition);\r\n        this.detailForm.markAsDirty();\r\n    }\r\n    removeAction(action) {\r\n        this.removeOperation('actions', action);\r\n        this.detailForm.markAsDirty();\r\n    }\r\n    formArrayOf(key) {\r\n        return this.detailForm.get(key);\r\n    }\r\n    create() {\r\n        if (!this.detailForm.dirty) {\r\n            return;\r\n        }\r\n        const formValue = this.detailForm.value;\r\n        const input = {\r\n            name: formValue.name,\r\n            enabled: true,\r\n            couponCode: formValue.couponCode,\r\n            perCustomerUsageLimit: formValue.perCustomerUsageLimit,\r\n            startsAt: formValue.startsAt,\r\n            endsAt: formValue.endsAt,\r\n            conditions: this.mapOperationsToInputs(this.conditions, formValue.conditions),\r\n            actions: this.mapOperationsToInputs(this.actions, formValue.actions),\r\n        };\r\n        this.dataService.promotion.createPromotion(input).subscribe(({ createPromotion }) => {\r\n            switch (createPromotion.__typename) {\r\n                case 'Promotion':\r\n                    this.notificationService.success(marker('common.notify-create-success'), {\r\n                        entity: 'Promotion',\r\n                    });\r\n                    this.detailForm.markAsPristine();\r\n                    this.changeDetector.markForCheck();\r\n                    this.router.navigate(['../', createPromotion.id], { relativeTo: this.route });\r\n                    break;\r\n                case 'MissingConditionsError':\r\n                    this.notificationService.error(createPromotion.message);\r\n                    break;\r\n            }\r\n        }, err => {\r\n            this.notificationService.error(marker('common.notify-create-error'), {\r\n                entity: 'Promotion',\r\n            });\r\n        });\r\n    }\r\n    save() {\r\n        if (!this.detailForm.dirty) {\r\n            return;\r\n        }\r\n        const formValue = this.detailForm.value;\r\n        this.promotion$\r\n            .pipe(take(1), mergeMap(promotion => {\r\n            const input = {\r\n                id: promotion.id,\r\n                name: formValue.name,\r\n                enabled: formValue.enabled,\r\n                couponCode: formValue.couponCode,\r\n                perCustomerUsageLimit: formValue.perCustomerUsageLimit,\r\n                startsAt: formValue.startsAt,\r\n                endsAt: formValue.endsAt,\r\n                conditions: this.mapOperationsToInputs(this.conditions, formValue.conditions),\r\n                actions: this.mapOperationsToInputs(this.actions, formValue.actions),\r\n            };\r\n            return this.dataService.promotion.updatePromotion(input);\r\n        }))\r\n            .subscribe(data => {\r\n            this.notificationService.success(marker('common.notify-update-success'), {\r\n                entity: 'Promotion',\r\n            });\r\n            this.detailForm.markAsPristine();\r\n            this.changeDetector.markForCheck();\r\n        }, err => {\r\n            this.notificationService.error(marker('common.notify-update-error'), {\r\n                entity: 'Promotion',\r\n            });\r\n        });\r\n    }\r\n    /**\r\n     * Update the form values when the entity changes.\r\n     */\r\n    setFormValues(entity, languageCode) {\r\n        this.detailForm.patchValue({\r\n            name: entity.name,\r\n            enabled: entity.enabled,\r\n            couponCode: entity.couponCode,\r\n            perCustomerUsageLimit: entity.perCustomerUsageLimit,\r\n            startsAt: entity.startsAt,\r\n            endsAt: entity.endsAt,\r\n        });\r\n        entity.conditions.forEach(o => {\r\n            this.addOperation('conditions', o);\r\n        });\r\n        entity.actions.forEach(o => this.addOperation('actions', o));\r\n    }\r\n    /**\r\n     * Maps an array of conditions or actions to the input format expected by the GraphQL API.\r\n     */\r\n    mapOperationsToInputs(operations, formValueOperations) {\r\n        return operations.map((o, i) => {\r\n            return {\r\n                code: o.code,\r\n                arguments: Object.values(formValueOperations[i].args).map((value, j) => ({\r\n                    name: o.args[j].name,\r\n                    value: encodeConfigArgValue(value),\r\n                })),\r\n            };\r\n        });\r\n    }\r\n    /**\r\n     * Adds a new condition or action to the promotion.\r\n     */\r\n    addOperation(key, operation) {\r\n        const operationsArray = this.formArrayOf(key);\r\n        const collection = key === 'conditions' ? this.conditions : this.actions;\r\n        const index = operationsArray.value.findIndex(o => o.code === operation.code);\r\n        if (index === -1) {\r\n            const argsHash = operation.args.reduce((output, arg) => {\r\n                var _a;\r\n                return (Object.assign(Object.assign({}, output), { [arg.name]: (_a = getConfigArgValue(arg.value)) !== null && _a !== void 0 ? _a : this.getDefaultArgValue(key, operation, arg.name) }));\r\n            }, {});\r\n            operationsArray.push(this.formBuilder.control({\r\n                code: operation.code,\r\n                args: argsHash,\r\n            }));\r\n            collection.push({\r\n                code: operation.code,\r\n                args: operation.args.map(a => ({ name: a.name, value: getConfigArgValue(a.value) })),\r\n            });\r\n        }\r\n    }\r\n    getDefaultArgValue(key, operation, argName) {\r\n        const def = key === 'conditions'\r\n            ? this.allConditions.find(c => c.code === operation.code)\r\n            : this.allActions.find(a => a.code === operation.code);\r\n        if (def) {\r\n            const argDef = def.args.find(a => a.name === argName);\r\n            if (argDef) {\r\n                return getDefaultConfigArgValue(argDef);\r\n            }\r\n        }\r\n        throw new Error(`Could not determine default value for \"argName\"`);\r\n    }\r\n    /**\r\n     * Removes a condition or action from the promotion.\r\n     */\r\n    removeOperation(key, operation) {\r\n        const operationsArray = this.formArrayOf(key);\r\n        const collection = key === 'conditions' ? this.conditions : this.actions;\r\n        const index = operationsArray.value.findIndex(o => o.code === operation.code);\r\n        if (index !== -1) {\r\n            operationsArray.removeAt(index);\r\n            collection.splice(index, 1);\r\n        }\r\n    }\r\n}\nPromotionDetailComponent.ɵfac = function PromotionDetailComponent_Factory(t) { return new (t || PromotionDetailComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc1.Router), ɵngcc0.ɵɵdirectiveInject(ɵngcc1.ActivatedRoute), ɵngcc0.ɵɵdirectiveInject(ɵngcc2.ServerConfigService), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc2.DataService), ɵngcc0.ɵɵdirectiveInject(ɵngcc3.FormBuilder), ɵngcc0.ɵɵdirectiveInject(ɵngcc2.NotificationService)); };\nPromotionDetailComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: PromotionDetailComponent, selectors: [[\"vdr-promotion-detail\"]], features: [ɵngcc0.ɵɵInheritDefinitionFeature], decls: 46, vars: 43, consts: [[1, \"flex\", \"clr-align-items-center\"], [3, \"entity\"], [4, \"vdrIfPermissions\"], [\"locationId\", \"promotion-detail\"], [\"class\", \"btn btn-primary\", 3, \"disabled\", \"click\", 4, \"ngIf\", \"ngIfElse\"], [\"updateButton\", \"\"], [1, \"form\", 3, \"formGroup\"], [\"for\", \"name\", 3, \"label\"], [\"id\", \"name\", \"type\", \"text\", \"formControlName\", \"name\", 3, \"readonly\"], [\"for\", \"startsAt\", 3, \"label\"], [\"formControlName\", \"startsAt\"], [\"for\", \"endsAt\", 3, \"label\"], [\"formControlName\", \"endsAt\"], [\"for\", \"couponCode\", 3, \"label\"], [\"id\", \"couponCode\", \"type\", \"text\", \"formControlName\", \"couponCode\", 3, \"readonly\"], [\"for\", \"perCustomerUsageLimit\", 3, \"label\"], [\"id\", \"perCustomerUsageLimit\", \"type\", \"number\", \"min\", \"1\", \"max\", \"999\", \"formControlName\", \"perCustomerUsageLimit\", 3, \"readonly\"], [1, \"clr-row\"], [\"formArrayName\", \"conditions\", 1, \"clr-col\"], [1, \"clr-control-label\"], [4, \"ngFor\", \"ngForOf\"], [\"formArrayName\", \"actions\", 1, \"clr-col\"], [3, \"operation\", \"readonly\", \"operationDefinition\", \"formControlName\", \"remove\", 4, \"ngFor\", \"ngForOf\"], [\"type\", \"checkbox\", \"clrToggle\", \"\", \"name\", \"enabled\", 3, \"formControl\"], [1, \"btn\", \"btn-primary\", 3, \"disabled\", \"click\"], [\"class\", \"btn btn-primary\", 3, \"disabled\", \"click\", 4, \"vdrIfPermissions\"], [3, \"readonly\", \"operation\", \"operationDefinition\", \"formControlName\", \"remove\"], [\"vdrDropdownTrigger\", \"\", 1, \"btn\", \"btn-outline\"], [\"shape\", \"plus\"], [\"vdrPosition\", \"bottom-left\"], [\"type\", \"button\", \"vdrDropdownItem\", \"\", 3, \"click\", 4, \"ngFor\", \"ngForOf\"], [\"type\", \"button\", \"vdrDropdownItem\", \"\", 3, \"click\"], [3, \"operation\", \"readonly\", \"operationDefinition\", \"formControlName\", \"remove\"]], template: function PromotionDetailComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"vdr-action-bar\");\n        ɵngcc0.ɵɵelementStart(1, \"vdr-ab-left\");\n        ɵngcc0.ɵɵelementStart(2, \"div\", 0);\n        ɵngcc0.ɵɵelement(3, \"vdr-entity-info\", 1);\n        ɵngcc0.ɵɵpipe(4, \"async\");\n        ɵngcc0.ɵɵtemplate(5, PromotionDetailComponent_clr_toggle_wrapper_5_Template, 5, 5, \"clr-toggle-wrapper\", 2);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(6, \"vdr-ab-right\");\n        ɵngcc0.ɵɵelement(7, \"vdr-action-bar-items\", 3);\n        ɵngcc0.ɵɵtemplate(8, PromotionDetailComponent_button_8_Template, 3, 4, \"button\", 4);\n        ɵngcc0.ɵɵpipe(9, \"async\");\n        ɵngcc0.ɵɵtemplate(10, PromotionDetailComponent_ng_template_10_Template, 1, 1, \"ng-template\", null, 5, ɵngcc0.ɵɵtemplateRefExtractor);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(12, \"form\", 6);\n        ɵngcc0.ɵɵelementStart(13, \"vdr-form-field\", 7);\n        ɵngcc0.ɵɵpipe(14, \"translate\");\n        ɵngcc0.ɵɵelement(15, \"input\", 8);\n        ɵngcc0.ɵɵpipe(16, \"hasPermission\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(17, \"vdr-form-field\", 9);\n        ɵngcc0.ɵɵpipe(18, \"translate\");\n        ɵngcc0.ɵɵelement(19, \"vdr-datetime-picker\", 10);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(20, \"vdr-form-field\", 11);\n        ɵngcc0.ɵɵpipe(21, \"translate\");\n        ɵngcc0.ɵɵelement(22, \"vdr-datetime-picker\", 12);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(23, \"vdr-form-field\", 13);\n        ɵngcc0.ɵɵpipe(24, \"translate\");\n        ɵngcc0.ɵɵelement(25, \"input\", 14);\n        ɵngcc0.ɵɵpipe(26, \"hasPermission\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(27, \"vdr-form-field\", 15);\n        ɵngcc0.ɵɵpipe(28, \"translate\");\n        ɵngcc0.ɵɵelement(29, \"input\", 16);\n        ɵngcc0.ɵɵpipe(30, \"hasPermission\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(31, \"div\", 17);\n        ɵngcc0.ɵɵelementStart(32, \"div\", 18);\n        ɵngcc0.ɵɵelementStart(33, \"label\", 19);\n        ɵngcc0.ɵɵtext(34);\n        ɵngcc0.ɵɵpipe(35, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵtemplate(36, PromotionDetailComponent_ng_container_36_Template, 3, 6, \"ng-container\", 20);\n        ɵngcc0.ɵɵelementStart(37, \"div\");\n        ɵngcc0.ɵɵtemplate(38, PromotionDetailComponent_vdr_dropdown_38_Template, 7, 4, \"vdr-dropdown\", 2);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(39, \"div\", 21);\n        ɵngcc0.ɵɵelementStart(40, \"label\", 19);\n        ɵngcc0.ɵɵtext(41);\n        ɵngcc0.ɵɵpipe(42, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵtemplate(43, PromotionDetailComponent_vdr_configurable_input_43_Template, 2, 6, \"vdr-configurable-input\", 22);\n        ɵngcc0.ɵɵelementStart(44, \"div\");\n        ɵngcc0.ɵɵtemplate(45, PromotionDetailComponent_vdr_dropdown_45_Template, 7, 4, \"vdr-dropdown\", 2);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n    } if (rf & 2) {\n        const _r2 = ɵngcc0.ɵɵreference(11);\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵproperty(\"entity\", ɵngcc0.ɵɵpipeBind1(4, 19, ctx.entity$));\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"vdrIfPermissions\", \"UpdatePromotion\");\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ɵngcc0.ɵɵpipeBind1(9, 21, ctx.isNew$))(\"ngIfElse\", _r2);\n        ɵngcc0.ɵɵadvance(4);\n        ɵngcc0.ɵɵproperty(\"formGroup\", ctx.detailForm);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"label\", ɵngcc0.ɵɵpipeBind1(14, 23, \"common.name\"));\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"readonly\", !ɵngcc0.ɵɵpipeBind1(16, 25, \"UpdatePromotion\"));\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"label\", ɵngcc0.ɵɵpipeBind1(18, 27, \"marketing.starts-at\"));\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵproperty(\"label\", ɵngcc0.ɵɵpipeBind1(21, 29, \"marketing.ends-at\"));\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵproperty(\"label\", ɵngcc0.ɵɵpipeBind1(24, 31, \"marketing.coupon-code\"));\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"readonly\", !ɵngcc0.ɵɵpipeBind1(26, 33, \"UpdatePromotion\"));\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"label\", ɵngcc0.ɵɵpipeBind1(28, 35, \"marketing.per-customer-limit\"));\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"readonly\", !ɵngcc0.ɵɵpipeBind1(30, 37, \"UpdatePromotion\"));\n        ɵngcc0.ɵɵadvance(5);\n        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(35, 39, \"marketing.conditions\"));\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"ngForOf\", ctx.conditions);\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"vdrIfPermissions\", \"UpdatePromotion\");\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(42, 41, \"marketing.actions\"));\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"ngForOf\", ctx.actions);\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"vdrIfPermissions\", \"UpdatePromotion\");\n    } }, directives: [ɵngcc2.ActionBarComponent, ɵngcc2.ActionBarLeftComponent, ɵngcc2.EntityInfoComponent, ɵngcc2.IfPermissionsDirective, ɵngcc2.ActionBarRightComponent, ɵngcc2.ActionBarItemsComponent, ɵngcc4.NgIf, ɵngcc3.ɵangular_packages_forms_forms_y, ɵngcc3.NgControlStatusGroup, ɵngcc3.FormGroupDirective, ɵngcc2.FormFieldComponent, ɵngcc2.FormFieldControlDirective, ɵngcc3.DefaultValueAccessor, ɵngcc3.NgControlStatus, ɵngcc3.FormControlName, ɵngcc2.DatetimePickerComponent, ɵngcc3.NumberValueAccessor, ɵngcc3.FormArrayName, ɵngcc5.ClrLabel, ɵngcc4.NgForOf, ɵngcc5.ClrCheckboxWrapper, ɵngcc3.CheckboxControlValueAccessor, ɵngcc5.ClrCheckbox, ɵngcc3.FormControlDirective, ɵngcc2.ConfigurableInputComponent, ɵngcc2.DropdownComponent, ɵngcc2.DropdownTriggerDirective, ɵngcc5.ClrIconCustomTag, ɵngcc2.DropdownMenuComponent, ɵngcc2.DropdownItemDirective], pipes: [ɵngcc4.AsyncPipe, ɵngcc6.TranslatePipe, ɵngcc2.HasPermissionPipe], styles: [\"\"], changeDetection: 0 });\r\nPromotionDetailComponent.ctorParameters = () => [\r\n    { type: Router },\r\n    { type: ActivatedRoute },\r\n    { type: ServerConfigService },\r\n    { type: ChangeDetectorRef },\r\n    { type: DataService },\r\n    { type: FormBuilder },\r\n    { type: NotificationService }\r\n];\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(PromotionDetailComponent, [{\n        type: Component,\n        args: [{\n                selector: 'vdr-promotion-detail',\n                template: \"<vdr-action-bar>\\r\\n    <vdr-ab-left>\\r\\n        <div class=\\\"flex clr-align-items-center\\\">\\r\\n            <vdr-entity-info [entity]=\\\"entity$ | async\\\"></vdr-entity-info>\\r\\n            <clr-toggle-wrapper *vdrIfPermissions=\\\"'UpdatePromotion'\\\">\\r\\n                <input type=\\\"checkbox\\\" clrToggle name=\\\"enabled\\\" [formControl]=\\\"detailForm.get(['enabled'])\\\" />\\r\\n                <label>{{ 'common.enabled' | translate }}</label>\\r\\n            </clr-toggle-wrapper>\\r\\n        </div>\\r\\n    </vdr-ab-left>\\r\\n\\r\\n    <vdr-ab-right>\\r\\n        <vdr-action-bar-items locationId=\\\"promotion-detail\\\"></vdr-action-bar-items>\\r\\n        <button\\r\\n            class=\\\"btn btn-primary\\\"\\r\\n            *ngIf=\\\"isNew$ | async; else updateButton\\\"\\r\\n            (click)=\\\"create()\\\"\\r\\n            [disabled]=\\\"!saveButtonEnabled()\\\"\\r\\n        >\\r\\n            {{ 'common.create' | translate }}\\r\\n        </button>\\r\\n        <ng-template #updateButton>\\r\\n            <button\\r\\n                class=\\\"btn btn-primary\\\"\\r\\n                (click)=\\\"save()\\\"\\r\\n                *vdrIfPermissions=\\\"'UpdatePromotion'\\\"\\r\\n                [disabled]=\\\"!saveButtonEnabled()\\\"\\r\\n            >\\r\\n                {{ 'common.update' | translate }}\\r\\n            </button>\\r\\n        </ng-template>\\r\\n    </vdr-ab-right>\\r\\n</vdr-action-bar>\\r\\n\\r\\n<form class=\\\"form\\\" [formGroup]=\\\"detailForm\\\">\\r\\n    <vdr-form-field [label]=\\\"'common.name' | translate\\\" for=\\\"name\\\">\\r\\n        <input\\r\\n            id=\\\"name\\\"\\r\\n            [readonly]=\\\"!('UpdatePromotion' | hasPermission)\\\"\\r\\n            type=\\\"text\\\"\\r\\n            formControlName=\\\"name\\\"\\r\\n        />\\r\\n    </vdr-form-field>\\r\\n    <vdr-form-field [label]=\\\"'marketing.starts-at' | translate\\\" for=\\\"startsAt\\\">\\r\\n        <vdr-datetime-picker formControlName=\\\"startsAt\\\"></vdr-datetime-picker>\\r\\n    </vdr-form-field>\\r\\n    <vdr-form-field [label]=\\\"'marketing.ends-at' | translate\\\" for=\\\"endsAt\\\">\\r\\n        <vdr-datetime-picker formControlName=\\\"endsAt\\\"></vdr-datetime-picker>\\r\\n    </vdr-form-field>\\r\\n    <vdr-form-field [label]=\\\"'marketing.coupon-code' | translate\\\" for=\\\"couponCode\\\">\\r\\n        <input\\r\\n            id=\\\"couponCode\\\"\\r\\n            [readonly]=\\\"!('UpdatePromotion' | hasPermission)\\\"\\r\\n            type=\\\"text\\\"\\r\\n            formControlName=\\\"couponCode\\\"\\r\\n        />\\r\\n    </vdr-form-field>\\r\\n    <vdr-form-field [label]=\\\"'marketing.per-customer-limit' | translate\\\" for=\\\"perCustomerUsageLimit\\\">\\r\\n        <input\\r\\n            id=\\\"perCustomerUsageLimit\\\"\\r\\n            [readonly]=\\\"!('UpdatePromotion' | hasPermission)\\\"\\r\\n            type=\\\"number\\\"\\r\\n            min=\\\"1\\\"\\r\\n            max=\\\"999\\\"\\r\\n            formControlName=\\\"perCustomerUsageLimit\\\"\\r\\n        />\\r\\n    </vdr-form-field>\\r\\n\\r\\n    <div class=\\\"clr-row\\\">\\r\\n        <div class=\\\"clr-col\\\" formArrayName=\\\"conditions\\\">\\r\\n            <label class=\\\"clr-control-label\\\">{{ 'marketing.conditions' | translate }}</label>\\r\\n            <ng-container *ngFor=\\\"let condition of conditions; index as i\\\">\\r\\n                <vdr-configurable-input\\r\\n                    (remove)=\\\"removeCondition($event)\\\"\\r\\n                    [readonly]=\\\"!('UpdatePromotion' | hasPermission)\\\"\\r\\n                    [operation]=\\\"condition\\\"\\r\\n                    [operationDefinition]=\\\"getConditionDefinition(condition)\\\"\\r\\n                    [formControlName]=\\\"i\\\"\\r\\n                ></vdr-configurable-input>\\r\\n            </ng-container>\\r\\n\\r\\n            <div>\\r\\n                <vdr-dropdown *vdrIfPermissions=\\\"'UpdatePromotion'\\\">\\r\\n                    <button class=\\\"btn btn-outline\\\" vdrDropdownTrigger>\\r\\n                        <clr-icon shape=\\\"plus\\\"></clr-icon>\\r\\n                        {{ 'marketing.add-condition' | translate }}\\r\\n                    </button>\\r\\n                    <vdr-dropdown-menu vdrPosition=\\\"bottom-left\\\">\\r\\n                        <button\\r\\n                            *ngFor=\\\"let condition of getAvailableConditions()\\\"\\r\\n                            type=\\\"button\\\"\\r\\n                            vdrDropdownItem\\r\\n                            (click)=\\\"addCondition(condition)\\\"\\r\\n                        >\\r\\n                            {{ condition.description }}\\r\\n                        </button>\\r\\n                    </vdr-dropdown-menu>\\r\\n                </vdr-dropdown>\\r\\n            </div>\\r\\n        </div>\\r\\n        <div class=\\\"clr-col\\\" formArrayName=\\\"actions\\\">\\r\\n            <label class=\\\"clr-control-label\\\">{{ 'marketing.actions' | translate }}</label>\\r\\n            <vdr-configurable-input\\r\\n                *ngFor=\\\"let action of actions; index as i\\\"\\r\\n                (remove)=\\\"removeAction($event)\\\"\\r\\n                [operation]=\\\"action\\\"\\r\\n                [readonly]=\\\"!('UpdatePromotion' | hasPermission)\\\"\\r\\n                [operationDefinition]=\\\"getActionDefinition(action)\\\"\\r\\n                [formControlName]=\\\"i\\\"\\r\\n            ></vdr-configurable-input>\\r\\n            <div>\\r\\n                <vdr-dropdown *vdrIfPermissions=\\\"'UpdatePromotion'\\\">\\r\\n                    <button class=\\\"btn btn-outline\\\" vdrDropdownTrigger>\\r\\n                        <clr-icon shape=\\\"plus\\\"></clr-icon>\\r\\n                        {{ 'marketing.add-action' | translate }}\\r\\n                    </button>\\r\\n                    <vdr-dropdown-menu vdrPosition=\\\"bottom-left\\\">\\r\\n                        <button\\r\\n                            *ngFor=\\\"let action of getAvailableActions()\\\"\\r\\n                            type=\\\"button\\\"\\r\\n                            vdrDropdownItem\\r\\n                            (click)=\\\"addAction(action)\\\"\\r\\n                        >\\r\\n                            {{ action.description }}\\r\\n                        </button>\\r\\n                    </vdr-dropdown-menu>\\r\\n                </vdr-dropdown>\\r\\n            </div>\\r\\n        </div>\\r\\n    </div>\\r\\n</form>\\r\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\"\"]\n            }]\n    }], function () { return [{ type: ɵngcc1.Router }, { type: ɵngcc1.ActivatedRoute }, { type: ɵngcc2.ServerConfigService }, { type: ɵngcc0.ChangeDetectorRef }, { type: ɵngcc2.DataService }, { type: ɵngcc3.FormBuilder }, { type: ɵngcc2.NotificationService }]; }, null); })();\n\nclass PromotionListComponent extends BaseListComponent {\r\n    constructor(dataService, router, route, notificationService, modalService) {\r\n        super(router, route);\r\n        this.dataService = dataService;\r\n        this.notificationService = notificationService;\r\n        this.modalService = modalService;\r\n        super.setQueryFn((...args) => this.dataService.promotion.getPromotions(...args), data => data.promotions);\r\n    }\r\n    deletePromotion(promotionId) {\r\n        this.modalService\r\n            .dialog({\r\n            title: marker('catalog.confirm-delete-promotion'),\r\n            buttons: [\r\n                { type: 'secondary', label: marker('common.cancel') },\r\n                { type: 'danger', label: marker('common.delete'), returnValue: true },\r\n            ],\r\n        })\r\n            .pipe(switchMap(response => response ? this.dataService.promotion.deletePromotion(promotionId) : EMPTY))\r\n            .subscribe(() => {\r\n            this.notificationService.success(marker('common.notify-delete-success'), {\r\n                entity: 'Promotion',\r\n            });\r\n            this.refresh();\r\n        }, err => {\r\n            this.notificationService.error(marker('common.notify-delete-error'), {\r\n                entity: 'Promotion',\r\n            });\r\n        });\r\n    }\r\n}\nPromotionListComponent.ɵfac = function PromotionListComponent_Factory(t) { return new (t || PromotionListComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc2.DataService), ɵngcc0.ɵɵdirectiveInject(ɵngcc1.Router), ɵngcc0.ɵɵdirectiveInject(ɵngcc1.ActivatedRoute), ɵngcc0.ɵɵdirectiveInject(ɵngcc2.NotificationService), ɵngcc0.ɵɵdirectiveInject(ɵngcc2.ModalService)); };\nPromotionListComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: PromotionListComponent, selectors: [[\"vdr-promotion-list\"]], features: [ɵngcc0.ɵɵInheritDefinitionFeature], decls: 25, vars: 25, consts: [[\"locationId\", \"promotion-list\"], [\"class\", \"btn btn-primary\", 3, \"routerLink\", 4, \"vdrIfPermissions\"], [3, \"items\", \"itemsPerPage\", \"totalItems\", \"currentPage\", \"pageChange\", \"itemsPerPageChange\"], [1, \"btn\", \"btn-primary\", 3, \"routerLink\"], [\"shape\", \"plus\"], [1, \"left\", \"align-middle\"], [4, \"ngIf\"], [1, \"align-middle\"], [1, \"right\", \"align-middle\"], [\"iconShape\", \"edit\", 3, \"label\", \"linkTo\"], [\"type\", \"button\", \"vdrDropdownTrigger\", \"\", 1, \"btn\", \"btn-link\", \"btn-sm\"], [\"shape\", \"caret down\"], [\"vdrPosition\", \"bottom-right\"], [\"type\", \"button\", \"vdrDropdownItem\", \"\", 1, \"delete-button\", 3, \"disabled\", \"click\"], [\"shape\", \"trash\", 1, \"is-danger\"]], template: function PromotionListComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"vdr-action-bar\");\n        ɵngcc0.ɵɵelementStart(1, \"vdr-ab-right\");\n        ɵngcc0.ɵɵelement(2, \"vdr-action-bar-items\", 0);\n        ɵngcc0.ɵɵtemplate(3, PromotionListComponent_a_3_Template, 4, 5, \"a\", 1);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(4, \"vdr-data-table\", 2);\n        ɵngcc0.ɵɵlistener(\"pageChange\", function PromotionListComponent_Template_vdr_data_table_pageChange_4_listener($event) { return ctx.setPageNumber($event); })(\"itemsPerPageChange\", function PromotionListComponent_Template_vdr_data_table_itemsPerPageChange_4_listener($event) { return ctx.setItemsPerPage($event); });\n        ɵngcc0.ɵɵpipe(5, \"async\");\n        ɵngcc0.ɵɵpipe(6, \"async\");\n        ɵngcc0.ɵɵpipe(7, \"async\");\n        ɵngcc0.ɵɵpipe(8, \"async\");\n        ɵngcc0.ɵɵelementStart(9, \"vdr-dt-column\");\n        ɵngcc0.ɵɵtext(10);\n        ɵngcc0.ɵɵpipe(11, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(12, \"vdr-dt-column\");\n        ɵngcc0.ɵɵtext(13);\n        ɵngcc0.ɵɵpipe(14, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(15, \"vdr-dt-column\");\n        ɵngcc0.ɵɵtext(16);\n        ɵngcc0.ɵɵpipe(17, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(18, \"vdr-dt-column\");\n        ɵngcc0.ɵɵtext(19);\n        ɵngcc0.ɵɵpipe(20, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelement(21, \"vdr-dt-column\");\n        ɵngcc0.ɵɵelement(22, \"vdr-dt-column\");\n        ɵngcc0.ɵɵelement(23, \"vdr-dt-column\");\n        ɵngcc0.ɵɵtemplate(24, PromotionListComponent_ng_template_24_Template, 27, 26, \"ng-template\");\n        ɵngcc0.ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵproperty(\"vdrIfPermissions\", \"CreatePromotion\");\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"items\", ɵngcc0.ɵɵpipeBind1(5, 9, ctx.items$))(\"itemsPerPage\", ɵngcc0.ɵɵpipeBind1(6, 11, ctx.itemsPerPage$))(\"totalItems\", ɵngcc0.ɵɵpipeBind1(7, 13, ctx.totalItems$))(\"currentPage\", ɵngcc0.ɵɵpipeBind1(8, 15, ctx.currentPage$));\n        ɵngcc0.ɵɵadvance(6);\n        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(11, 17, \"common.name\"));\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(14, 19, \"marketing.coupon-code\"));\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(17, 21, \"marketing.starts-at\"));\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(20, 23, \"marketing.ends-at\"));\n    } }, directives: [ɵngcc2.ActionBarComponent, ɵngcc2.ActionBarRightComponent, ɵngcc2.ActionBarItemsComponent, ɵngcc2.IfPermissionsDirective, ɵngcc2.DataTableComponent, ɵngcc2.DataTableColumnComponent, ɵngcc1.RouterLinkWithHref, ɵngcc5.ClrIconCustomTag, ɵngcc4.NgIf, ɵngcc2.TableRowActionComponent, ɵngcc2.DropdownComponent, ɵngcc2.DropdownTriggerDirective, ɵngcc2.DropdownMenuComponent, ɵngcc2.DropdownItemDirective, ɵngcc2.ChipComponent], pipes: [ɵngcc4.AsyncPipe, ɵngcc6.TranslatePipe, ɵngcc4.DatePipe, ɵngcc2.HasPermissionPipe], styles: [\"\"], changeDetection: 0 });\r\nPromotionListComponent.ctorParameters = () => [\r\n    { type: DataService },\r\n    { type: Router },\r\n    { type: ActivatedRoute },\r\n    { type: NotificationService },\r\n    { type: ModalService }\r\n];\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(PromotionListComponent, [{\n        type: Component,\n        args: [{\n                selector: 'vdr-promotion-list',\n                template: \"<vdr-action-bar>\\r\\n    <vdr-ab-right>\\r\\n        <vdr-action-bar-items locationId=\\\"promotion-list\\\"></vdr-action-bar-items>\\r\\n        <a class=\\\"btn btn-primary\\\"\\r\\n           *vdrIfPermissions=\\\"'CreatePromotion'\\\"\\r\\n           [routerLink]=\\\"['./create']\\\">\\r\\n            <clr-icon shape=\\\"plus\\\"></clr-icon>\\r\\n            {{ 'marketing.create-new-promotion' | translate }}\\r\\n        </a>\\r\\n    </vdr-ab-right>\\r\\n</vdr-action-bar>\\r\\n\\r\\n<vdr-data-table\\r\\n    [items]=\\\"items$ | async\\\"\\r\\n    [itemsPerPage]=\\\"itemsPerPage$ | async\\\"\\r\\n    [totalItems]=\\\"totalItems$ | async\\\"\\r\\n    [currentPage]=\\\"currentPage$ | async\\\"\\r\\n    (pageChange)=\\\"setPageNumber($event)\\\"\\r\\n    (itemsPerPageChange)=\\\"setItemsPerPage($event)\\\"\\r\\n>\\r\\n    <vdr-dt-column>{{ 'common.name' | translate }}</vdr-dt-column>\\r\\n    <vdr-dt-column>{{ 'marketing.coupon-code' | translate }}</vdr-dt-column>\\r\\n    <vdr-dt-column>{{ 'marketing.starts-at' | translate }}</vdr-dt-column>\\r\\n    <vdr-dt-column>{{ 'marketing.ends-at' | translate }}</vdr-dt-column>\\r\\n    <vdr-dt-column></vdr-dt-column>\\r\\n    <vdr-dt-column></vdr-dt-column>\\r\\n    <vdr-dt-column></vdr-dt-column>\\r\\n    <ng-template let-promotion=\\\"item\\\">\\r\\n        <td class=\\\"left align-middle\\\">{{ promotion.name }}</td>\\r\\n        <td class=\\\"left align-middle\\\">\\r\\n            <vdr-chip *ngIf=\\\"promotion.couponCode\\\">\\r\\n                {{ promotion.couponCode }}\\r\\n            </vdr-chip>\\r\\n        </td>\\r\\n        <td class=\\\"left align-middle\\\">{{ promotion.startsAt | date: 'longDate' }}</td>\\r\\n        <td class=\\\"left align-middle\\\">{{ promotion.endsAt | date: 'longDate' }}</td>\\r\\n        <td class=\\\"align-middle\\\">\\r\\n            <vdr-chip *ngIf=\\\"!promotion.enabled\\\">{{ 'common.disabled' | translate }}</vdr-chip>\\r\\n        </td>\\r\\n        <td class=\\\"right align-middle\\\">\\r\\n            <vdr-table-row-action\\r\\n                iconShape=\\\"edit\\\"\\r\\n                [label]=\\\"'common.edit' | translate\\\"\\r\\n                [linkTo]=\\\"['./', promotion.id]\\\"\\r\\n            ></vdr-table-row-action>\\r\\n        </td>\\r\\n        <td class=\\\"right align-middle\\\">\\r\\n            <vdr-dropdown>\\r\\n                <button type=\\\"button\\\" class=\\\"btn btn-link btn-sm\\\" vdrDropdownTrigger>\\r\\n                    {{ 'common.actions' | translate }}\\r\\n                    <clr-icon shape=\\\"caret down\\\"></clr-icon>\\r\\n                </button>\\r\\n                <vdr-dropdown-menu vdrPosition=\\\"bottom-right\\\">\\r\\n                    <button\\r\\n                        type=\\\"button\\\"\\r\\n                        class=\\\"delete-button\\\"\\r\\n                        (click)=\\\"deletePromotion(promotion.id)\\\"\\r\\n                        [disabled]=\\\"!('DeletePromotion' | hasPermission)\\\"\\r\\n                        vdrDropdownItem\\r\\n                    >\\r\\n                        <clr-icon shape=\\\"trash\\\" class=\\\"is-danger\\\"></clr-icon>\\r\\n                        {{ 'common.delete' | translate }}\\r\\n                    </button>\\r\\n                </vdr-dropdown-menu>\\r\\n            </vdr-dropdown>\\r\\n        </td>\\r\\n    </ng-template>\\r\\n</vdr-data-table>\\r\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\"\"]\n            }]\n    }], function () { return [{ type: ɵngcc2.DataService }, { type: ɵngcc1.Router }, { type: ɵngcc1.ActivatedRoute }, { type: ɵngcc2.NotificationService }, { type: ɵngcc2.ModalService }]; }, null); })();\n\n/**\r\n * Resolves the id from the path into a Customer entity.\r\n */\r\nclass PromotionResolver extends BaseEntityResolver {\r\n    constructor(router, dataService) {\r\n        super(router, {\r\n            __typename: 'Promotion',\r\n            id: '',\r\n            createdAt: '',\r\n            updatedAt: '',\r\n            name: '',\r\n            enabled: false,\r\n            conditions: [],\r\n            actions: [],\r\n        }, id => dataService.promotion.getPromotion(id).mapStream(data => data.promotion));\r\n    }\r\n}\nPromotionResolver.ɵfac = function PromotionResolver_Factory(t) { return new (t || PromotionResolver)(ɵngcc0.ɵɵinject(ɵngcc1.Router), ɵngcc0.ɵɵinject(ɵngcc2.DataService)); };\r\nPromotionResolver.ɵprov = ɵɵdefineInjectable({ factory: function PromotionResolver_Factory() { return new PromotionResolver(ɵɵinject(Router), ɵɵinject(DataService)); }, token: PromotionResolver, providedIn: \"root\" });\r\nPromotionResolver.ctorParameters = () => [\r\n    { type: Router },\r\n    { type: DataService }\r\n];\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(PromotionResolver, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: ɵngcc1.Router }, { type: ɵngcc2.DataService }]; }, null); })();\n\nconst ɵ0 = {\r\n    breadcrumb: marker('breadcrumb.promotions'),\r\n}, ɵ1 = {\r\n    breadcrumb: promotionBreadcrumb,\r\n};\r\nconst marketingRoutes = [\r\n    {\r\n        path: 'promotions',\r\n        component: PromotionListComponent,\r\n        data: ɵ0,\r\n    },\r\n    {\r\n        path: 'promotions/:id',\r\n        component: PromotionDetailComponent,\r\n        resolve: createResolveData(PromotionResolver),\r\n        canDeactivate: [CanDeactivateDetailGuard],\r\n        data: ɵ1,\r\n    },\r\n];\r\nfunction promotionBreadcrumb(data, params) {\r\n    return detailBreadcrumb({\r\n        entity: data.entity,\r\n        id: params.id,\r\n        breadcrumbKey: 'breadcrumb.promotions',\r\n        getName: promotion => promotion.name,\r\n        route: 'promotions',\r\n    });\r\n}\n\nclass MarketingModule {\r\n}\nMarketingModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: MarketingModule });\nMarketingModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function MarketingModule_Factory(t) { return new (t || MarketingModule)(); }, imports: [[SharedModule, RouterModule.forChild(marketingRoutes)]] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(MarketingModule, { declarations: function () { return [PromotionListComponent, PromotionDetailComponent]; }, imports: function () { return [SharedModule, ɵngcc1.RouterModule]; } }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(MarketingModule, [{\n        type: NgModule,\n        args: [{\n                imports: [SharedModule, RouterModule.forChild(marketingRoutes)],\n                declarations: [PromotionListComponent, PromotionDetailComponent]\n            }]\n    }], null, null); })();\n\n// This file was generated by the build-public-api.ts script\n\n/**\r\n * Generated bundle index. Do not edit.\r\n */\n\nexport { MarketingModule, PromotionDetailComponent, PromotionListComponent, PromotionResolver, marketingRoutes, promotionBreadcrumb, ɵ0, ɵ1 };\n\n//# sourceMappingURL=vendure-admin-ui-marketing.js.map"]}